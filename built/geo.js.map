{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9e1d15e9633f9eaf304c","webpack:///../node_modules/core-js/modules/_export.js","webpack:///./inherit.js","webpack:///./registry.js","webpack:///../node_modules/jquery/dist/jquery.js","webpack:///../node_modules/core-js/modules/_an-object.js","webpack:///./util/index.js","webpack:///../node_modules/proj4/lib/constants/values.js","webpack:///../node_modules/core-js/modules/_global.js","webpack:///../node_modules/core-js/modules/_fails.js","webpack:///../node_modules/core-js/modules/_is-object.js","webpack:///../node_modules/core-js/modules/_wks.js","webpack:///../node_modules/proj4/lib/common/adjust_lon.js","webpack:///../node_modules/core-js/modules/_descriptors.js","webpack:///../node_modules/core-js/modules/_object-dp.js","webpack:///../node_modules/core-js/modules/_to-length.js","webpack:///./event.js","webpack:///../node_modules/core-js/modules/_to-object.js","webpack:///../node_modules/core-js/modules/_a-function.js","webpack:///./transform.js","webpack:///./feature.js","webpack:///../node_modules/core-js/modules/_hide.js","webpack:///../node_modules/core-js/modules/_redefine.js","webpack:///../node_modules/core-js/modules/_string-html.js","webpack:///./timestamp.js","webpack:///../node_modules/core-js/modules/_has.js","webpack:///../node_modules/core-js/modules/_to-iobject.js","webpack:///../node_modules/core-js/modules/_object-gopd.js","webpack:///../node_modules/core-js/modules/_object-gpo.js","webpack:///../node_modules/core-js/modules/_core.js","webpack:///../node_modules/core-js/modules/_ctx.js","webpack:///../node_modules/core-js/modules/_cof.js","webpack:///../node_modules/core-js/modules/_strict-method.js","webpack:///./d3/d3Renderer.js","webpack:///../node_modules/core-js/modules/_to-primitive.js","webpack:///../node_modules/core-js/modules/_defined.js","webpack:///../node_modules/core-js/modules/_to-integer.js","webpack:///../node_modules/core-js/modules/_object-sap.js","webpack:///../node_modules/core-js/modules/_array-methods.js","webpack:///../node_modules/core-js/modules/_typed-array.js","webpack:///../node_modules/core-js/modules/_metadata.js","webpack:///../node_modules/vgl/vgl.js-exposed","webpack:///./object.js","webpack:///../node_modules/core-js/modules/_meta.js","webpack:///../node_modules/core-js/modules/_library.js","webpack:///../node_modules/core-js/modules/_add-to-unscopables.js","webpack:///../node_modules/core-js/modules/_property-desc.js","webpack:///../node_modules/core-js/modules/_uid.js","webpack:///../node_modules/core-js/modules/_object-keys.js","webpack:///../node_modules/core-js/modules/_to-absolute-index.js","webpack:///../node_modules/core-js/modules/_object-create.js","webpack:///../node_modules/core-js/modules/_object-gopn.js","webpack:///../node_modules/core-js/modules/_set-species.js","webpack:///../node_modules/core-js/modules/_an-instance.js","webpack:///../node_modules/core-js/modules/_for-of.js","webpack:///../node_modules/core-js/modules/_redefine-all.js","webpack:///./sceneObject.js","webpack:///./d3/object.js","webpack:///../node_modules/core-js/modules/_set-to-string-tag.js","webpack:///../node_modules/core-js/modules/_string-trim.js","webpack:///../node_modules/core-js/modules/_iterators.js","webpack:///../node_modules/core-js/modules/_validate-collection.js","webpack:///../node_modules/proj4/lib/common/msfnz.js","webpack:///../node_modules/proj4/lib/common/asinz.js","webpack:///./quadFeature.js","webpack:///./gl/object.js","webpack:///./canvas/object.js","webpack:///../node_modules/core-js/modules/_iobject.js","webpack:///../node_modules/core-js/modules/_object-pie.js","webpack:///../node_modules/core-js/modules/_classof.js","webpack:///../node_modules/proj4/lib/common/sign.js","webpack:///../node_modules/proj4/lib/common/adjust_lat.js","webpack:///./renderer.js","webpack:///./lineFeature.js","webpack:///./layer.js","webpack:///./textFeature.js","webpack:///../node_modules/core-js/modules/_shared.js","webpack:///../node_modules/core-js/modules/_array-includes.js","webpack:///../node_modules/core-js/modules/_object-gops.js","webpack:///../node_modules/core-js/modules/_is-array.js","webpack:///../node_modules/core-js/modules/_is-regexp.js","webpack:///../node_modules/core-js/modules/_iter-detect.js","webpack:///../node_modules/core-js/modules/_flags.js","webpack:///../node_modules/core-js/modules/_fix-re-wks.js","webpack:///../node_modules/core-js/modules/_species-constructor.js","webpack:///../node_modules/core-js/modules/_user-agent.js","webpack:///../node_modules/core-js/modules/_collection.js","webpack:///../node_modules/core-js/modules/_typed.js","webpack:///../node_modules/core-js/modules/_object-forced-pam.js","webpack:///../node_modules/core-js/modules/_set-collection-of.js","webpack:///../node_modules/core-js/modules/_set-collection-from.js","webpack:///../node_modules/proj4/lib/match.js","webpack:///../node_modules/proj4/lib/common/tsfnz.js","webpack:///../node_modules/proj4/lib/common/phi2z.js","webpack:///../node_modules/proj4/lib/common/mlfn.js","webpack:///../node_modules/proj4/lib/common/e0fn.js","webpack:///../node_modules/proj4/lib/common/e1fn.js","webpack:///../node_modules/proj4/lib/common/e2fn.js","webpack:///../node_modules/proj4/lib/common/e3fn.js","webpack:///./pointFeature.js","webpack:///./featureLayer.js","webpack:///./ui/svgWidget.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/core-js/modules/_dom-create.js","webpack:///../node_modules/core-js/modules/_wks-define.js","webpack:///../node_modules/core-js/modules/_shared-key.js","webpack:///../node_modules/core-js/modules/_enum-bug-keys.js","webpack:///../node_modules/core-js/modules/_html.js","webpack:///../node_modules/core-js/modules/_set-proto.js","webpack:///../node_modules/core-js/modules/_string-ws.js","webpack:///../node_modules/core-js/modules/_inherit-if-required.js","webpack:///../node_modules/core-js/modules/_string-repeat.js","webpack:///../node_modules/core-js/modules/_math-sign.js","webpack:///../node_modules/core-js/modules/_math-expm1.js","webpack:///../node_modules/core-js/modules/_string-at.js","webpack:///../node_modules/core-js/modules/_iter-define.js","webpack:///../node_modules/core-js/modules/_iter-create.js","webpack:///../node_modules/core-js/modules/_string-context.js","webpack:///../node_modules/core-js/modules/_fails-is-regexp.js","webpack:///../node_modules/core-js/modules/_is-array-iter.js","webpack:///../node_modules/core-js/modules/_create-property.js","webpack:///../node_modules/core-js/modules/core.get-iterator-method.js","webpack:///../node_modules/core-js/modules/_array-species-create.js","webpack:///../node_modules/core-js/modules/_array-fill.js","webpack:///../node_modules/core-js/modules/es6.array.iterator.js","webpack:///../node_modules/core-js/modules/_task.js","webpack:///../node_modules/core-js/modules/_microtask.js","webpack:///../node_modules/core-js/modules/_new-promise-capability.js","webpack:///../node_modules/core-js/modules/_typed-buffer.js","webpack:///../node_modules/css-loader/lib/css-base.js","webpack:///../node_modules/style-loader/lib/addStyles.js","webpack:///./action.js","webpack:///../node_modules/proj4/lib/Proj.js","webpack:///../node_modules/proj4/lib/common/pj_mlfn.js","webpack:///../node_modules/proj4/lib/projections/etmerc.js","webpack:///../node_modules/proj4/lib/common/sinh.js","webpack:///../node_modules/proj4/lib/common/gN.js","webpack:///../node_modules/proj4/lib/common/imlfn.js","webpack:///../node_modules/proj4/lib/common/qsfnz.js","webpack:///../node_modules/gl-mat4/index.js","webpack:///../node_modules/gl-vec3/index.js","webpack:///./camera.js","webpack:///./polygonFeature.js","webpack:///./mapInteractor.js","webpack:///./d3/uniqueID.js","webpack:///./meshFeature.js","webpack:///./tile.js","webpack:///./isolineFeature.js","webpack:///./ui/widget.js","webpack:///../node_modules/core-js/modules/_ie8-dom-define.js","webpack:///../node_modules/core-js/modules/_wks-ext.js","webpack:///../node_modules/core-js/modules/_object-keys-internal.js","webpack:///../node_modules/core-js/modules/_object-dps.js","webpack:///../node_modules/core-js/modules/_object-gopn-ext.js","webpack:///../node_modules/core-js/modules/_object-assign.js","webpack:///../node_modules/core-js/modules/_bind.js","webpack:///../node_modules/core-js/modules/_invoke.js","webpack:///../node_modules/core-js/modules/_parse-int.js","webpack:///../node_modules/core-js/modules/_parse-float.js","webpack:///../node_modules/core-js/modules/_a-number-value.js","webpack:///../node_modules/core-js/modules/_is-integer.js","webpack:///../node_modules/core-js/modules/_math-log1p.js","webpack:///../node_modules/core-js/modules/_math-fround.js","webpack:///../node_modules/core-js/modules/_iter-call.js","webpack:///../node_modules/core-js/modules/_array-reduce.js","webpack:///../node_modules/core-js/modules/_array-copy-within.js","webpack:///../node_modules/core-js/modules/_iter-step.js","webpack:///../node_modules/core-js/modules/es6.regexp.flags.js","webpack:///../node_modules/core-js/modules/_perform.js","webpack:///../node_modules/core-js/modules/_promise-resolve.js","webpack:///../node_modules/core-js/modules/es6.map.js","webpack:///../node_modules/core-js/modules/_collection-strong.js","webpack:///../node_modules/core-js/modules/es6.set.js","webpack:///../node_modules/core-js/modules/es6.weak-map.js","webpack:///../node_modules/core-js/modules/_collection-weak.js","webpack:///../node_modules/core-js/modules/_to-index.js","webpack:///../node_modules/core-js/modules/_own-keys.js","webpack:///../node_modules/core-js/modules/_flatten-into-array.js","webpack:///../node_modules/core-js/modules/_string-pad.js","webpack:///../node_modules/core-js/modules/_object-to-array.js","webpack:///../node_modules/core-js/modules/_collection-to-json.js","webpack:///../node_modules/core-js/modules/_array-from-iterable.js","webpack:///../node_modules/core-js/modules/_math-scale.js","webpack:///./annotation.js","webpack:///../node_modules/proj4/lib/index.js","webpack:///../node_modules/proj4/lib/defs.js","webpack:///../node_modules/proj4/lib/projString.js","webpack:///../node_modules/wkt-parser/index.js","webpack:///../node_modules/proj4/lib/projections/merc.js","webpack:///../node_modules/proj4/lib/projections/longlat.js","webpack:///../node_modules/proj4/lib/transform.js","webpack:///../node_modules/proj4/lib/common/toPoint.js","webpack:///../node_modules/mgrs/mgrs.js","webpack:///../node_modules/proj4/lib/projections/tmerc.js","webpack:///../node_modules/proj4/lib/common/pj_enfn.js","webpack:///../node_modules/proj4/lib/common/pj_inv_mlfn.js","webpack:///../node_modules/proj4/lib/common/hypot.js","webpack:///../node_modules/proj4/lib/common/cosh.js","webpack:///../node_modules/proj4/lib/projections/utm.js","webpack:///../node_modules/proj4/lib/projections/sterea.js","webpack:///../node_modules/proj4/lib/projections/gauss.js","webpack:///../node_modules/proj4/lib/projections/stere.js","webpack:///../node_modules/proj4/lib/projections/somerc.js","webpack:///../node_modules/proj4/lib/projections/omerc.js","webpack:///../node_modules/proj4/lib/projections/lcc.js","webpack:///../node_modules/proj4/lib/projections/krovak.js","webpack:///../node_modules/proj4/lib/projections/cass.js","webpack:///../node_modules/proj4/lib/projections/laea.js","webpack:///../node_modules/proj4/lib/projections/aea.js","webpack:///../node_modules/proj4/lib/projections/gnom.js","webpack:///../node_modules/proj4/lib/projections/cea.js","webpack:///../node_modules/proj4/lib/projections/eqc.js","webpack:///../node_modules/proj4/lib/projections/poly.js","webpack:///../node_modules/proj4/lib/projections/nzmg.js","webpack:///../node_modules/proj4/lib/projections/mill.js","webpack:///../node_modules/proj4/lib/projections/sinu.js","webpack:///../node_modules/proj4/lib/projections/moll.js","webpack:///../node_modules/proj4/lib/projections/eqdc.js","webpack:///../node_modules/proj4/lib/projections/vandg.js","webpack:///../node_modules/proj4/lib/projections/aeqd.js","webpack:///../node_modules/proj4/lib/projections/ortho.js","webpack:///../node_modules/proj4/lib/projections/qsc.js","webpack:///../node_modules/proj4/lib/projections/robin.js","webpack:///../node_modules/gl-mat4/identity.js","webpack:///../node_modules/gl-vec4/index.js","webpack:///../node_modules/gl-vec4/scale.js","webpack:///../node_modules/gl-vec4/normalize.js","webpack:///../node_modules/gl-vec3/epsilon.js","webpack:///../node_modules/gl-vec3/create.js","webpack:///../node_modules/gl-vec3/fromValues.js","webpack:///../node_modules/gl-vec3/normalize.js","webpack:///../node_modules/gl-vec3/dot.js","webpack:///../node_modules/gl-vec3/subtract.js","webpack:///../node_modules/gl-vec3/multiply.js","webpack:///../node_modules/gl-vec3/divide.js","webpack:///../node_modules/gl-vec3/distance.js","webpack:///../node_modules/gl-vec3/squaredDistance.js","webpack:///../node_modules/gl-vec3/length.js","webpack:///../node_modules/gl-vec3/squaredLength.js","webpack:///./gl/vglRenderer.js","webpack:///./util/distanceGrid.js","webpack:///./util/clustering.js","webpack:///../node_modules/gl-mat3/index.js","webpack:///../node_modules/mousetrap/mousetrap.js","webpack:///./choroplethFeature.js","webpack:///./d3/rescale.js","webpack:///./contourFeature.js","webpack:///./fetchQueue.js","webpack:///./fileReader.js","webpack:///./graphFeature.js","webpack:///./heatmapFeature.js","webpack:///./imageTile.js","webpack:///./ui/uiLayer.js","webpack:///./tileLayer.js","webpack:///./tileCache.js","webpack:///./pathFeature.js","webpack:///./pixelmapFeature.js","webpack:///./vectorFeature.js","webpack:///./ui/domWidget.js","webpack:///./polyfills.js","webpack:///../node_modules/babel-polyfill/lib/index.js","webpack:///../node_modules/core-js/shim.js","webpack:///../node_modules/core-js/modules/es6.symbol.js","webpack:///../node_modules/core-js/modules/_enum-keys.js","webpack:///../node_modules/core-js/modules/es6.object.create.js","webpack:///../node_modules/core-js/modules/es6.object.define-property.js","webpack:///../node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/core-js/modules/es6.object.get-own-property-descriptor.js","webpack:///../node_modules/core-js/modules/es6.object.get-prototype-of.js","webpack:///../node_modules/core-js/modules/es6.object.keys.js","webpack:///../node_modules/core-js/modules/es6.object.get-own-property-names.js","webpack:///../node_modules/core-js/modules/es6.object.freeze.js","webpack:///../node_modules/core-js/modules/es6.object.seal.js","webpack:///../node_modules/core-js/modules/es6.object.prevent-extensions.js","webpack:///../node_modules/core-js/modules/es6.object.is-frozen.js","webpack:///../node_modules/core-js/modules/es6.object.is-sealed.js","webpack:///../node_modules/core-js/modules/es6.object.is-extensible.js","webpack:///../node_modules/core-js/modules/es6.object.assign.js","webpack:///../node_modules/core-js/modules/es6.object.is.js","webpack:///../node_modules/core-js/modules/_same-value.js","webpack:///../node_modules/core-js/modules/es6.object.set-prototype-of.js","webpack:///../node_modules/core-js/modules/es6.object.to-string.js","webpack:///../node_modules/core-js/modules/es6.function.bind.js","webpack:///../node_modules/core-js/modules/es6.function.name.js","webpack:///../node_modules/core-js/modules/es6.function.has-instance.js","webpack:///../node_modules/core-js/modules/es6.parse-int.js","webpack:///../node_modules/core-js/modules/es6.parse-float.js","webpack:///../node_modules/core-js/modules/es6.number.constructor.js","webpack:///../node_modules/core-js/modules/es6.number.to-fixed.js","webpack:///../node_modules/core-js/modules/es6.number.to-precision.js","webpack:///../node_modules/core-js/modules/es6.number.epsilon.js","webpack:///../node_modules/core-js/modules/es6.number.is-finite.js","webpack:///../node_modules/core-js/modules/es6.number.is-integer.js","webpack:///../node_modules/core-js/modules/es6.number.is-nan.js","webpack:///../node_modules/core-js/modules/es6.number.is-safe-integer.js","webpack:///../node_modules/core-js/modules/es6.number.max-safe-integer.js","webpack:///../node_modules/core-js/modules/es6.number.min-safe-integer.js","webpack:///../node_modules/core-js/modules/es6.number.parse-float.js","webpack:///../node_modules/core-js/modules/es6.number.parse-int.js","webpack:///../node_modules/core-js/modules/es6.math.acosh.js","webpack:///../node_modules/core-js/modules/es6.math.asinh.js","webpack:///../node_modules/core-js/modules/es6.math.atanh.js","webpack:///../node_modules/core-js/modules/es6.math.cbrt.js","webpack:///../node_modules/core-js/modules/es6.math.clz32.js","webpack:///../node_modules/core-js/modules/es6.math.cosh.js","webpack:///../node_modules/core-js/modules/es6.math.expm1.js","webpack:///../node_modules/core-js/modules/es6.math.fround.js","webpack:///../node_modules/core-js/modules/es6.math.hypot.js","webpack:///../node_modules/core-js/modules/es6.math.imul.js","webpack:///../node_modules/core-js/modules/es6.math.log10.js","webpack:///../node_modules/core-js/modules/es6.math.log1p.js","webpack:///../node_modules/core-js/modules/es6.math.log2.js","webpack:///../node_modules/core-js/modules/es6.math.sign.js","webpack:///../node_modules/core-js/modules/es6.math.sinh.js","webpack:///../node_modules/core-js/modules/es6.math.tanh.js","webpack:///../node_modules/core-js/modules/es6.math.trunc.js","webpack:///../node_modules/core-js/modules/es6.string.from-code-point.js","webpack:///../node_modules/core-js/modules/es6.string.raw.js","webpack:///../node_modules/core-js/modules/es6.string.trim.js","webpack:///../node_modules/core-js/modules/es6.string.iterator.js","webpack:///../node_modules/core-js/modules/es6.string.code-point-at.js","webpack:///../node_modules/core-js/modules/es6.string.ends-with.js","webpack:///../node_modules/core-js/modules/es6.string.includes.js","webpack:///../node_modules/core-js/modules/es6.string.repeat.js","webpack:///../node_modules/core-js/modules/es6.string.starts-with.js","webpack:///../node_modules/core-js/modules/es6.string.anchor.js","webpack:///../node_modules/core-js/modules/es6.string.big.js","webpack:///../node_modules/core-js/modules/es6.string.blink.js","webpack:///../node_modules/core-js/modules/es6.string.bold.js","webpack:///../node_modules/core-js/modules/es6.string.fixed.js","webpack:///../node_modules/core-js/modules/es6.string.fontcolor.js","webpack:///../node_modules/core-js/modules/es6.string.fontsize.js","webpack:///../node_modules/core-js/modules/es6.string.italics.js","webpack:///../node_modules/core-js/modules/es6.string.link.js","webpack:///../node_modules/core-js/modules/es6.string.small.js","webpack:///../node_modules/core-js/modules/es6.string.strike.js","webpack:///../node_modules/core-js/modules/es6.string.sub.js","webpack:///../node_modules/core-js/modules/es6.string.sup.js","webpack:///../node_modules/core-js/modules/es6.date.now.js","webpack:///../node_modules/core-js/modules/es6.date.to-json.js","webpack:///../node_modules/core-js/modules/es6.date.to-iso-string.js","webpack:///../node_modules/core-js/modules/_date-to-iso-string.js","webpack:///../node_modules/core-js/modules/es6.date.to-string.js","webpack:///../node_modules/core-js/modules/es6.date.to-primitive.js","webpack:///../node_modules/core-js/modules/_date-to-primitive.js","webpack:///../node_modules/core-js/modules/es6.array.is-array.js","webpack:///../node_modules/core-js/modules/es6.array.from.js","webpack:///../node_modules/core-js/modules/es6.array.of.js","webpack:///../node_modules/core-js/modules/es6.array.join.js","webpack:///../node_modules/core-js/modules/es6.array.slice.js","webpack:///../node_modules/core-js/modules/es6.array.sort.js","webpack:///../node_modules/core-js/modules/es6.array.for-each.js","webpack:///../node_modules/core-js/modules/_array-species-constructor.js","webpack:///../node_modules/core-js/modules/es6.array.map.js","webpack:///../node_modules/core-js/modules/es6.array.filter.js","webpack:///../node_modules/core-js/modules/es6.array.some.js","webpack:///../node_modules/core-js/modules/es6.array.every.js","webpack:///../node_modules/core-js/modules/es6.array.reduce.js","webpack:///../node_modules/core-js/modules/es6.array.reduce-right.js","webpack:///../node_modules/core-js/modules/es6.array.index-of.js","webpack:///../node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///../node_modules/core-js/modules/es6.array.copy-within.js","webpack:///../node_modules/core-js/modules/es6.array.fill.js","webpack:///../node_modules/core-js/modules/es6.array.find.js","webpack:///../node_modules/core-js/modules/es6.array.find-index.js","webpack:///../node_modules/core-js/modules/es6.array.species.js","webpack:///../node_modules/core-js/modules/es6.regexp.constructor.js","webpack:///../node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///../node_modules/core-js/modules/es6.regexp.match.js","webpack:///../node_modules/core-js/modules/es6.regexp.replace.js","webpack:///../node_modules/core-js/modules/es6.regexp.search.js","webpack:///../node_modules/core-js/modules/es6.regexp.split.js","webpack:///../node_modules/core-js/modules/es6.promise.js","webpack:///../node_modules/core-js/modules/es6.weak-set.js","webpack:///../node_modules/core-js/modules/es6.typed.array-buffer.js","webpack:///../node_modules/core-js/modules/es6.typed.data-view.js","webpack:///../node_modules/core-js/modules/es6.typed.int8-array.js","webpack:///../node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///../node_modules/core-js/modules/es6.typed.uint8-clamped-array.js","webpack:///../node_modules/core-js/modules/es6.typed.int16-array.js","webpack:///../node_modules/core-js/modules/es6.typed.uint16-array.js","webpack:///../node_modules/core-js/modules/es6.typed.int32-array.js","webpack:///../node_modules/core-js/modules/es6.typed.uint32-array.js","webpack:///../node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///../node_modules/core-js/modules/es6.typed.float64-array.js","webpack:///../node_modules/core-js/modules/es6.reflect.apply.js","webpack:///../node_modules/core-js/modules/es6.reflect.construct.js","webpack:///../node_modules/core-js/modules/es6.reflect.define-property.js","webpack:///../node_modules/core-js/modules/es6.reflect.delete-property.js","webpack:///../node_modules/core-js/modules/es6.reflect.enumerate.js","webpack:///../node_modules/core-js/modules/es6.reflect.get.js","webpack:///../node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js","webpack:///../node_modules/core-js/modules/es6.reflect.get-prototype-of.js","webpack:///../node_modules/core-js/modules/es6.reflect.has.js","webpack:///../node_modules/core-js/modules/es6.reflect.is-extensible.js","webpack:///../node_modules/core-js/modules/es6.reflect.own-keys.js","webpack:///../node_modules/core-js/modules/es6.reflect.prevent-extensions.js","webpack:///../node_modules/core-js/modules/es6.reflect.set.js","webpack:///../node_modules/core-js/modules/es6.reflect.set-prototype-of.js","webpack:///../node_modules/core-js/modules/es7.array.includes.js","webpack:///../node_modules/core-js/modules/es7.array.flat-map.js","webpack:///../node_modules/core-js/modules/es7.array.flatten.js","webpack:///../node_modules/core-js/modules/es7.string.at.js","webpack:///../node_modules/core-js/modules/es7.string.pad-start.js","webpack:///../node_modules/core-js/modules/es7.string.pad-end.js","webpack:///../node_modules/core-js/modules/es7.string.trim-left.js","webpack:///../node_modules/core-js/modules/es7.string.trim-right.js","webpack:///../node_modules/core-js/modules/es7.string.match-all.js","webpack:///../node_modules/core-js/modules/es7.symbol.async-iterator.js","webpack:///../node_modules/core-js/modules/es7.symbol.observable.js","webpack:///../node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///../node_modules/core-js/modules/es7.object.values.js","webpack:///../node_modules/core-js/modules/es7.object.entries.js","webpack:///../node_modules/core-js/modules/es7.object.define-getter.js","webpack:///../node_modules/core-js/modules/es7.object.define-setter.js","webpack:///../node_modules/core-js/modules/es7.object.lookup-getter.js","webpack:///../node_modules/core-js/modules/es7.object.lookup-setter.js","webpack:///../node_modules/core-js/modules/es7.map.to-json.js","webpack:///../node_modules/core-js/modules/es7.set.to-json.js","webpack:///../node_modules/core-js/modules/es7.map.of.js","webpack:///../node_modules/core-js/modules/es7.set.of.js","webpack:///../node_modules/core-js/modules/es7.weak-map.of.js","webpack:///../node_modules/core-js/modules/es7.weak-set.of.js","webpack:///../node_modules/core-js/modules/es7.map.from.js","webpack:///../node_modules/core-js/modules/es7.set.from.js","webpack:///../node_modules/core-js/modules/es7.weak-map.from.js","webpack:///../node_modules/core-js/modules/es7.weak-set.from.js","webpack:///../node_modules/core-js/modules/es7.global.js","webpack:///../node_modules/core-js/modules/es7.system.global.js","webpack:///../node_modules/core-js/modules/es7.error.is-error.js","webpack:///../node_modules/core-js/modules/es7.math.clamp.js","webpack:///../node_modules/core-js/modules/es7.math.deg-per-rad.js","webpack:///../node_modules/core-js/modules/es7.math.degrees.js","webpack:///../node_modules/core-js/modules/es7.math.fscale.js","webpack:///../node_modules/core-js/modules/es7.math.iaddh.js","webpack:///../node_modules/core-js/modules/es7.math.isubh.js","webpack:///../node_modules/core-js/modules/es7.math.imulh.js","webpack:///../node_modules/core-js/modules/es7.math.rad-per-deg.js","webpack:///../node_modules/core-js/modules/es7.math.radians.js","webpack:///../node_modules/core-js/modules/es7.math.scale.js","webpack:///../node_modules/core-js/modules/es7.math.umulh.js","webpack:///../node_modules/core-js/modules/es7.math.signbit.js","webpack:///../node_modules/core-js/modules/es7.promise.finally.js","webpack:///../node_modules/core-js/modules/es7.promise.try.js","webpack:///../node_modules/core-js/modules/es7.reflect.define-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.delete-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-metadata-keys.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-own-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js","webpack:///../node_modules/core-js/modules/es7.reflect.has-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.has-own-metadata.js","webpack:///../node_modules/core-js/modules/es7.reflect.metadata.js","webpack:///../node_modules/core-js/modules/es7.asap.js","webpack:///../node_modules/core-js/modules/es7.observable.js","webpack:///../node_modules/core-js/modules/web.timers.js","webpack:///../node_modules/core-js/modules/web.immediate.js","webpack:///../node_modules/core-js/modules/web.dom.iterable.js","webpack:///../node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js","webpack:///../node_modules/core-js/fn/regexp/escape.js","webpack:///../node_modules/core-js/modules/core.regexp.escape.js","webpack:///../node_modules/core-js/modules/_replacer.js","webpack:///./index.js","webpack:///./main.styl?aac7","webpack:///./main.styl","webpack:///../node_modules/style-loader/lib/urls.js","webpack:///../node_modules/proj4/lib/core.js","webpack:///../node_modules/proj4/lib/parseCode.js","webpack:///../node_modules/proj4/lib/global.js","webpack:///../node_modules/proj4/lib/constants/PrimeMeridian.js","webpack:///../node_modules/proj4/lib/constants/units.js","webpack:///../node_modules/wkt-parser/parser.js","webpack:///../node_modules/wkt-parser/process.js","webpack:///../node_modules/proj4/lib/extend.js","webpack:///../node_modules/proj4/lib/projections.js","webpack:///../node_modules/proj4/lib/deriveConstants.js","webpack:///../node_modules/proj4/lib/constants/Ellipsoid.js","webpack:///../node_modules/proj4/lib/constants/Datum.js","webpack:///../node_modules/proj4/lib/datum.js","webpack:///../node_modules/proj4/lib/datum_transform.js","webpack:///../node_modules/proj4/lib/datumUtils.js","webpack:///../node_modules/proj4/lib/adjust_axis.js","webpack:///../node_modules/proj4/lib/checkSanity.js","webpack:///../node_modules/proj4/lib/Point.js","webpack:///../node_modules/proj4/lib/version.js","webpack:///../node_modules/proj4/package.json","webpack:///../node_modules/proj4/projs.js","webpack:///../node_modules/proj4/lib/common/asinhy.js","webpack:///../node_modules/proj4/lib/common/log1py.js","webpack:///../node_modules/proj4/lib/common/gatg.js","webpack:///../node_modules/proj4/lib/common/clens.js","webpack:///../node_modules/proj4/lib/common/clens_cmplx.js","webpack:///../node_modules/proj4/lib/common/adjust_zone.js","webpack:///../node_modules/proj4/lib/common/srat.js","webpack:///../node_modules/proj4/lib/common/iqsfnz.js","webpack:///../node_modules/proj4/lib/projections .*\\.js$","webpack:///../node_modules/proj4/lib/projections/equi.js","webpack:///../node_modules/proj4/lib/projections/gstmerc.js","webpack:///../node_modules/proj4/lib/common/latiso.js","webpack:///../node_modules/proj4/lib/common/invlatiso.js","webpack:///../node_modules/proj4/lib/common/fL.js","webpack:///./util/throttle.js","webpack:///./util/mockVGL.js","webpack:///../node_modules/vgl/vgl.js","webpack:///../node_modules/gl-mat4/create.js","webpack:///../node_modules/gl-mat4/clone.js","webpack:///../node_modules/gl-mat4/copy.js","webpack:///../node_modules/gl-mat4/transpose.js","webpack:///../node_modules/gl-mat4/invert.js","webpack:///../node_modules/gl-mat4/adjoint.js","webpack:///../node_modules/gl-mat4/determinant.js","webpack:///../node_modules/gl-mat4/multiply.js","webpack:///../node_modules/gl-mat4/translate.js","webpack:///../node_modules/gl-mat4/scale.js","webpack:///../node_modules/gl-mat4/rotate.js","webpack:///../node_modules/gl-mat4/rotateX.js","webpack:///../node_modules/gl-mat4/rotateY.js","webpack:///../node_modules/gl-mat4/rotateZ.js","webpack:///../node_modules/gl-mat4/fromRotation.js","webpack:///../node_modules/gl-mat4/fromRotationTranslation.js","webpack:///../node_modules/gl-mat4/fromScaling.js","webpack:///../node_modules/gl-mat4/fromTranslation.js","webpack:///../node_modules/gl-mat4/fromXRotation.js","webpack:///../node_modules/gl-mat4/fromYRotation.js","webpack:///../node_modules/gl-mat4/fromZRotation.js","webpack:///../node_modules/gl-mat4/fromQuat.js","webpack:///../node_modules/gl-mat4/frustum.js","webpack:///../node_modules/gl-mat4/perspective.js","webpack:///../node_modules/gl-mat4/perspectiveFromFieldOfView.js","webpack:///../node_modules/gl-mat4/ortho.js","webpack:///../node_modules/gl-mat4/lookAt.js","webpack:///../node_modules/gl-mat4/str.js","webpack:///../node_modules/gl-vec4/create.js","webpack:///../node_modules/gl-vec4/clone.js","webpack:///../node_modules/gl-vec4/fromValues.js","webpack:///../node_modules/gl-vec4/copy.js","webpack:///../node_modules/gl-vec4/set.js","webpack:///../node_modules/gl-vec4/add.js","webpack:///../node_modules/gl-vec4/subtract.js","webpack:///../node_modules/gl-vec4/multiply.js","webpack:///../node_modules/gl-vec4/divide.js","webpack:///../node_modules/gl-vec4/min.js","webpack:///../node_modules/gl-vec4/max.js","webpack:///../node_modules/gl-vec4/scaleAndAdd.js","webpack:///../node_modules/gl-vec4/distance.js","webpack:///../node_modules/gl-vec4/squaredDistance.js","webpack:///../node_modules/gl-vec4/length.js","webpack:///../node_modules/gl-vec4/squaredLength.js","webpack:///../node_modules/gl-vec4/negate.js","webpack:///../node_modules/gl-vec4/inverse.js","webpack:///../node_modules/gl-vec4/dot.js","webpack:///../node_modules/gl-vec4/lerp.js","webpack:///../node_modules/gl-vec4/random.js","webpack:///../node_modules/gl-vec4/transformMat4.js","webpack:///../node_modules/gl-vec4/transformQuat.js","webpack:///../node_modules/gl-vec3/clone.js","webpack:///../node_modules/gl-vec3/angle.js","webpack:///../node_modules/gl-vec3/copy.js","webpack:///../node_modules/gl-vec3/set.js","webpack:///../node_modules/gl-vec3/equals.js","webpack:///../node_modules/gl-vec3/exactEquals.js","webpack:///../node_modules/gl-vec3/add.js","webpack:///../node_modules/gl-vec3/sub.js","webpack:///../node_modules/gl-vec3/mul.js","webpack:///../node_modules/gl-vec3/div.js","webpack:///../node_modules/gl-vec3/min.js","webpack:///../node_modules/gl-vec3/max.js","webpack:///../node_modules/gl-vec3/floor.js","webpack:///../node_modules/gl-vec3/ceil.js","webpack:///../node_modules/gl-vec3/round.js","webpack:///../node_modules/gl-vec3/scale.js","webpack:///../node_modules/gl-vec3/scaleAndAdd.js","webpack:///../node_modules/gl-vec3/dist.js","webpack:///../node_modules/gl-vec3/sqrDist.js","webpack:///../node_modules/gl-vec3/len.js","webpack:///../node_modules/gl-vec3/sqrLen.js","webpack:///../node_modules/gl-vec3/negate.js","webpack:///../node_modules/gl-vec3/inverse.js","webpack:///../node_modules/gl-vec3/cross.js","webpack:///../node_modules/gl-vec3/lerp.js","webpack:///../node_modules/gl-vec3/random.js","webpack:///../node_modules/gl-vec3/transformMat4.js","webpack:///../node_modules/gl-vec3/transformMat3.js","webpack:///../node_modules/gl-vec3/transformQuat.js","webpack:///../node_modules/gl-vec3/rotateX.js","webpack:///../node_modules/gl-vec3/rotateY.js","webpack:///../node_modules/gl-vec3/rotateZ.js","webpack:///../node_modules/gl-vec3/forEach.js","webpack:///../node_modules/gl-mat3/adjoint.js","webpack:///../node_modules/gl-mat3/clone.js","webpack:///../node_modules/gl-mat3/copy.js","webpack:///../node_modules/gl-mat3/create.js","webpack:///../node_modules/gl-mat3/determinant.js","webpack:///../node_modules/gl-mat3/frob.js","webpack:///../node_modules/gl-mat3/from-mat2.js","webpack:///../node_modules/gl-mat3/from-mat4.js","webpack:///../node_modules/gl-mat3/from-quat.js","webpack:///../node_modules/gl-mat3/identity.js","webpack:///../node_modules/gl-mat3/invert.js","webpack:///../node_modules/gl-mat3/multiply.js","webpack:///../node_modules/gl-mat3/normal-from-mat4.js","webpack:///../node_modules/gl-mat3/rotate.js","webpack:///../node_modules/gl-mat3/scale.js","webpack:///../node_modules/gl-mat3/str.js","webpack:///../node_modules/gl-mat3/translate.js","webpack:///../node_modules/gl-mat3/transpose.js","webpack:///../node_modules/kdbush/src/kdbush.js","webpack:///../node_modules/kdbush/src/sort.js","webpack:///../node_modules/kdbush/src/range.js","webpack:///../node_modules/kdbush/src/within.js","webpack:///./annotationLayer.js","webpack:///../node_modules/hammerjs/hammer.js","webpack:///../node_modules/d3/d3.js","webpack:///./domRenderer.js","webpack:///./geojsonReader.js","webpack:///./map.js","webpack:///./osmLayer.js","webpack:///./typedef.js","webpack:///./version.js","webpack:///./sha.js","webpack:///./d3/index.js","webpack:///./d3/graphFeature.js","webpack:///./d3/lineFeature.js","webpack:///./d3/pathFeature.js","webpack:///./d3/pointFeature.js","webpack:///./d3/quadFeature.js","webpack:///./d3/tileLayer.js","webpack:///./d3/vectorFeature.js","webpack:///./gl/index.js","webpack:///./gl/choroplethFeature.js","webpack:///./gl/contourFeature.js","webpack:///./gl/isolineFeature.js","webpack:///./gl/lineFeature.js","webpack:///./gl/pointFeature.js","webpack:///./gl/polygonFeature.js","webpack:///../node_modules/earcut/src/earcut.js","webpack:///./gl/quadFeature.js","webpack:///./gl/tileLayer.js","webpack:///./canvas/index.js","webpack:///./canvas/canvasRenderer.js","webpack:///./canvas/heatmapFeature.js","webpack:///./canvas/isolineFeature.js","webpack:///./canvas/lineFeature.js","webpack:///./canvas/pixelmapFeature.js","webpack:///./canvas/quadFeature.js","webpack:///./canvas/textFeature.js","webpack:///./canvas/tileLayer.js","webpack:///./ui/index.js","webpack:///./ui/colorLegendWidget.js","webpack:///./ui/colorLegendWidget.styl?1b91","webpack:///./ui/colorLegendWidget.styl","webpack:///./ui/legendWidget.js","webpack:///./ui/scaleWidget.js","webpack:///./ui/scaleWidget.styl?5974","webpack:///./ui/scaleWidget.styl","webpack:///./ui/sliderWidget.js"],"names":["newfunc","module","exports","C","P","F","prototype","constructor","$","require","widgets","dom","layers","layerDefaultFeatures","renderers","features","featureCapabilities","fileReaders","rendererLayerAdjustments","annotations","util","registerFileReader","name","func","createFileReader","opts","hasOwnProperty","registerRenderer","createRenderer","layer","canvas","options","ren","_init","checkRenderer","noFallback","supported","fallback","console","warn","rendererForFeatures","featureList","preferredRenderers","renderer","ridx","feature","fidx","capability","available","length","indexOf","substr","undefined","join","registerFeature","category","capabilities","old","createFeature","arg","api","extend","gcs","map","registerLayerAdjustment","adjustLayerForRenderer","rendererName","apply","registerLayer","defaultFeatures","createLayer","layerName","registerWidget","createWidget","Error","registerAnnotation","createAnnotation","annotation","listAnnotations","Object","keys","featuresForAnnotations","annotationList","annList","Array","isArray","forEach","ann","push","state","inArray","rendererForAnnotations","registries","proj4","__esModule","default","throttle","mockVGL","DistanceGrid","ClusterGroup","chars","svgForeignObject","m_timingData","m_timingKeepRecent","m_threshold","m_originalRequestAnimationFrame","m_htmlToImageSupport","setNumeric","i","arguments","isFinite","pointInPolygon","point","outer","inner","range","inside","n","j","min","max","x","y","hole","pointTo2DTriangleBasis","vert0","vert1","vert2","a","b","c","d","det","isReadyImage","img","allowFailedImage","Image","complete","src","naturalWidth","naturalHeight","isReadyVideo","vid","allowFailedVideo","HTMLVideoElement","HAVE_CURRENT_DATA","videoWidth","videoHeight","readyState","error","isFunction","f","ensureFunction","isNonNullFinite","val","randomString","s","r","Math","floor","random","substring","convertColor","color","g","opacity","lowerColor","toLowerCase","cssColors","charAt","parseInt","slice","idx","cssColorConversions","match","regex","exec","process","convertColorAndOpacity","defaultColor","convertColorToHex","allowAlpha","rgb","value","round","toString","convertColorToRGBA","toFixed","normalizeCoordinates","p","z","longitude","lng","lon","latitude","lat","elevation","elev","height","start","end","step","results","compareArrays","a1","a2","every","el","vec3AsArray","mat3AsArray","mat4AsArray","getGeomBuffer","geom","srcName","len","sourceByName","data","Float32Array","setData","adjustActions","actions","action","type","input","actionEvents","modifiers","actionModifiers","addAction","toEnd","unshift","hasAction","owner","removeAction","found","removed","splice","actionMatch","inputs","matched","some","modifier","pixelCoordinateParams","node","width","tileWidth","tileHeight","mapW","mapH","tiled","innerWidth","innerHeight","minLevel","log","maxLevel","ceil","mapParams","ingcs","maxBounds","left","top","right","bottom","unitsPerPixel","pow","center","zoom","clampBoundsX","clampBoundsY","clampZoom","layerParams","wrapX","wrapY","tileOffset","attribution","tileRounding","tilesAtZoom","level","scale","tilesMaxBounds","centerFromPerimeter","coor","position","p0","p1","w","sumw","sqrt","distance2dSquared","pt1","pt2","dx","dy","distance2dToLineSquared","pt","line1","line2","lengthSquared","t","triangleTwiceSignedArea2d","pt3","crossedLineSegments2d","seg1pt1","seg1pt2","seg2pt1","seg2pt2","segmentCrossesLineList2d","lineList","result","line","linePt","rdpLineSimplify","pts","tolerance","closed","noCrossLines","distSq","maxDistSq","index","toleranceSq","concat","leftSide","rightSide","getMinMaxValues","values","limit","isNumeric","minValue","maxValue","wrapAngle","PI","escapeUnicodeHTML","text","replace","k","code","charCodeAt","dereferenceElements","elem","deferList","each","key","is","attr","crossOrigin","defer","Deferred","onload","cvs","document","createElement","getContext","drawImage","toDataURL","remove","resolve","onerror","dereferenceCssUrlsRegex","dereferenceCssUrls","css","styleElem","styleDefer","styleKey","baseUrl","url","xhr","XMLHttpRequest","open","responseType","status","response","Uint8Array","String","fromCharCode","getResponseHeader","btoa","send","when","then","style","htmlToImageSupported","svg","append","context","err","XMLSerializer","serializeToString","htmlToImage","parents","container","parent","clone","id","background","margin","addBack","body","href","get","done","fail","reject","timeReport","item","count","stddev","abs","sum2","sum","average","timeFunctionStart","reset","recent","window","performance","now","timeFunctionStop","duration","timeRequestAnimationFrame","stop","threshold","keep","requestAnimationFrame","above_threshold","recentsub","callback","call","timestamp","track","nowDelta","subcalls","total_duration","isObject","radiusEarth","WGS84","cssNumberRegex","cssAngleUnitsBase","deg","grad","rad","turn","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RegExp","hue_to_rgb","m1","m2","h","l","geo_event","layerAdd","layerRemove","rotate","pan","resize","draw","drawEnd","mousemove","mouseclick","brush","brushend","brushstart","select","zoomselect","unzoomselect","actiondown","actionmove","actionup","actionselection","actionwheel","keyaction","transitionstart","transitionend","transitioncancel","parallelprojection","mouseover","mouseover_order","mouseout","mouseon","mouseoff","mouseclick_order","pixelmap","prepared","screenshot","ready","camera","view","projection","viewport","add","add_before","update","coordinates","select_edit_handle","edit_action","mode","projections","Proj","transformCache","maxTransformCacheSize","transform","source","size","target","m_this","m_proj","m_source","m_target","generate_proj4","_forward","forward","_inverse","inverse","defs","lookup","parts","split","toUpperCase","promise","ajax","transformCoordinates","srcPrj","tgtPrj","numberOfComponents","trans","output","transformCoordinatesArray","offset","xAcc","yAcc","zAcc","writer","projPoint","handleArrayCoordinates","handleObjectCoordinates","affineForward","def","coords","origin","affineInverse","sphericalDistance","baseGcs","ellipsoid","phi1","phi2","lambda","sinphi1","sin","cosphi1","cos","sinphi2","cosphi2","sigma","atan2","vincentyDistance","maxIterations","rf","L","U1","atan","U2","sinU1","cosU1","sinU2","cosU2","lastLambda","sinSigma","cosSigma","sinAlpha","cos2alpha","cos2sigmasubm","u2","A","B","deltaSigma","iter","distance","alpha1","alpha2","inherit","sceneObject","s_exit","_exit","s_geoOn","geoOn","s_geoOff","geoOff","m_ready","m_selectionAPI","selectionAPI","m_style","m_layer","m_gcs","m_visible","visible","m_bin","bin","m_renderer","m_dataTime","m_buildTime","m_updateTime","m_dependentFeatures","m_selectedFeatures","_subfeatureStyles","defineProperty","_bindMouseHandlers","_unbindMouseHandlers","_handleMousemove","_handleMouseclick","_handleBrushend","_handleBrush","pointSearch","geo","boxSearch","lowerLeft","upperRight","mouse","interactor","over","newFeatures","oldFeatures","lastTop","extra","geoTrigger","previous","filter","eventID","_clearSelectedFeatures","evt","buttonsDown","arg1","arg2","modified","out","all","updateStyleFromArray","keyOrObject","styleArray","refresh","v","featureGcsToDisplay","gcsToWorld","worldToDisplay","baseToLocal","direct","dependentFeatures","children","dataTime","buildTime","updateTime","geoIsOn","mouseOverOrderHighestIndex","sort","di","_build","_update","event","handler","isAuto","selection","create","spec","m_globalTimestamp","m_timestamp","getMTime","d3Renderer","d3","object","d3Rescale","m_sticky","m_features","m_corners","m_width","m_height","m_diagonal","m_scale","m_transform","rx","ry","rotation","m_renderIds","m_removeIds","m_svg","m_defs","setAttrs","attrs","_convertColor","_convertScale","setStyles","styles","fillFunc","fill","strokeFunc","stroke","getGroup","parentId","_d3id","initCorners","upperLeft","displayToGcs","lowerRight","_setTransform","gcsToDisplay","group","sinr","cosr","localToBase","widget","d3Parent","shadow","sticky","scaleFactor","_resize","_definitions","_drawFeatures","dataIndex","attributes","classes","onlyRenderNew","sortByZ","__render","_renderFeature","scheduleAnimationFrame","_renderFrame","selectAll","ids","entries","rendersel","enter","exit","zIndex","_removeFeature","_error","m_eventHandlers","m_idleHandlers","m_promiseCount","onIdle","configurable","addPromise","onDone","always","e","args","m_parent","m_children","s_trigger","s_addPromise","s_onIdle","addChild","child","removeChild","childrenOnly","geoArgs","stopPropagation","_triggeredBy","d3_object","uniqueID","m_id","s_draw","quadFeature","s_init","m_cacheQuads","m_nextQuadId","m_images","m_videos","m_quads","_objectListStart","list","used","_objectListGet","entry","_objectListAdd","_objectListEnd","coordinate","indices","poly1","poly2","order1","order2","coordbasis","_generateQuads","clrQuads","imgQuads","vidQuads","quadList","quad","pos","basis","_positionToQuad","posFunc","depthFunc","initPos","ll","ur","ul","lr","map_gcs","_checkQuadUpdate","imgFunc","vidFunc","delayFunc","colorFunc","opacityFunc","loadedFunc","previewColorFunc","previewImageFunc","origindiag2","diag2","_cachedQuad","clrquad","imgquad","imageEntry","vidquad","videoEntry","reload","image","video","prev_onload","prev_onerror","previewColor","previewImage","quadinfo","reference","crop","HTMLCanvasElement","off","on","delayRenderWhenSeeking","onloadeddata","quadId","cacheUpdate","indexOrData","cacheQuads","depth","drawOnAsyncResourceLoaded","imageCrop","imageFixedScale","imageFull","gl_object","mayDelay","_render","canvas_object","m_canvasProperties","_renderOnCanvas","_delayRender","_canvasProperty","m_canvas","m_initialized","initialized","lineFeature","m_pointSearchTime","m_pointSearchInfo","featureType","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth","_updatePointSearchInfo","widthFunc","closedFunc","mapgcs","last","lastr2","first","record","current","r2","u","scale2","partial","rdpSimplifyData","lineFunc","featuregcs","lineItem","ld","lidx","defaultStyle","strokeStyle","antialiasing","basic","multicolor","newLayerId","m_name","m_map","m_node","m_rendererName","m_active","active","m_opacity","m_attribution","m_zIndex","_siblingLayers","allowDuplicate","reverse","moveUp","order","me","tmp","sign","moveDown","moveToTop","moveToBottom","toggleClass","toLocal","_toLocalMatrix","applyTransform","fromLocal","_fromLocalMatrix","updateAttribution","noEvents","opac","addClass","maxZ","currentId","textFeature","font","textAlign","textBaseline","rotateWithMap","textScaled","usedStyles","pointFeature","kdbush","m_rangeTree","m_rangeTreeTime","s_data","m_maxRadius","m_clustering","clustering","m_clusterTree","m_allData","m_lastZoom","m_ignoreData","_clusterData","radius","addPoint","_handleZoom","points","clusters","__cluster","__data","obj","isFunc","_updateRangeTree","ifound","fgcs","corners","rad2","fillColor","fillOpacity","zoomLevel","registry","featureLayer","s_update","s_visible","s_selectionAPI","featureName","newFeature","addFeature","removeFeature","deleteFeature","existing","request","clear","svgWidget","_createCanvas","addEventListener","reposition","rendererOpts","geo_action","momentum","zoomrotate","annotation_line","annotation_polygon","annotation_rectangle","annotation_edit_handle","mat3","vec3","mat4","vec4","_view","_proj","_projection","_transform","_bounds","_display","_world","_viewport","_createProj","frustum","ortho","clipbounds","_clipbounds","near","far","multiply","invert","set","copy","_getBounds","bounds","_setBounds","mat","translate","display","_scale","_translate","_resetView","identity","_worldToClip4","transformMat4","_clipToWorld4","applyProjection","unapplyProjection","worldToDisplay4","displayToWorld4","world","displayToWorld","bds","_viewFromCenterSizeRotation","c_ar","v_ar","_rotate","viewFromCenterSizeRotation","axis","invcenter","m","ppMatrix","prec","toExponential","debug","JSON","stringify","valueOf","perspective","parallel","toPrecision","polygonFeature","m_lineFeature","s_modified","s_style","m_coordinates","ret","getCoordinates","_checkForStroke","polyFunc","poly","coord","polygonCoordinates","linePolyStyle","styleValue","polygon","irecord","lineFound","lineData","_getLoopData","itemIndex","loop","polyStyle","miterLimit","posVal","_lastData","_lastPosVal","allButSelf","mouseOverOrderClosestBorder","dist","mindist","pidx","i1","i2","Mousetrap","mapInteractor","debounce","m_options","m_mouse","m_keyHandler","m_boundKeys","m_touchHandler","m_state","m_queue","$node","m_selectionLayer","m_selectionQuad","m_paused","m_clickMaybe","m_clickMaybeTimeout","m_callZoom","calcSpeed","discreteZoom","shift","ctrl","selectionRectangle","click","enabled","buttons","middle","cancelOnMove","keyboard","meta","focusHighlight","alwaysTouch","wheelScaleX","wheelScaleY","zoomScale","rotateWheelScale","zoomrotateMinimumRotation","zoomrotateReverseRotation","zoomrotateMinimumZoom","zoomrotateMinimumPan","touchPanDelay","maxSpeed","minSpeed","stopTime","drag","spring","springConstant","zoomAnimation","ease","page","alt","time","Date","deltaTime","velocity","_handleKeys","simulated","mapSize","actionBase","actionValue","factor","move","shiftKey","ctrlKey","altKey","metaKey","preventDefault","zoomDelta","isNaN","parseFloat","panY","panX","rotationDelta","cancel","hasTouchSupport","Modernizr","touch","navigator","msMaxTouchPoints","maxTouchPoints","_handleTouch","endIfBound","pointerType","touchSupport","lastEventType","pointers","evtType","boundDocumentHandlers","lastEvent","_handleMouseUpDocument","which","lastTime","pageX","pageY","_handleMouseDown","_setClickMaybe","_handleMouseMoveDocument","_handleMouseMove","_handleMouseUp","retriggerMouseMove","_connectEvents","_disconnectEvents","_handleMouseWheel","throttled_wheel","debounced_zoom","usedInputs","bound","keyAction","bind","Hammer","recog","touchEvents","Rotate","enable","Pan","direction","DIRECTION_ALL","Tap","taps","hammerParams","recognizers","manager","Manager","recognizeWith","touchEvent","unbind","destroy","_getMousePosition","dt","_getMouseButton","prop","_getMouseModifiers","_getSelection","keepQueue","clearState","clearTimeout","actionRecord","setTimeout","transitionCancel","kind","initialZoom","initialRotation","initialEventRotation","delta","deleteLayer","_handleZoomrotate","deltaZoom","log2","zoomrotateAllowZoom","deltaTheta","zoomrotateAllowRotation","theta","lastRotationDelta","panOrigin","initialEventGeo","deltaX","deltaY","deltaPan2","zoomrotateAllowPan","selectionObj","cx","cy","modifyVelocity","deltaT","sf","springForce","speed","vx","vy","exp","xplus","xminus","yplus","yminus","_zoomFromSelection","mapsize","scaling","newcenter","oldAction","springBack","_handleMouseClick","details","deltaZ","delay","startZoom","targetZoom","accum","dz","org","transition","zoomOrigin","zoomRE","next","search","my_queue","scroll","deltaFactor","originalEvent","deltaMode","wheel","zoomFactor","recompute","initialVelocity","origAction","removeClass","newValue","pause","simulateEvent","trigger","button","wheelDelta","Event","wheelMode","stopImmediatePropagation","strLength","strArray","meshFeature","m_mesh","mesh","specOrProperty","gridWidth","gridHeight","_createMesh","vertexValueFuncs","i3","numPts","usedPts","usePos","elements","elementPacking","gridW","gridH","wrapLongitude","x0","y0","calcX","skipColumn","origI","gridWorig","shape","hasSubArray","verticesPerElement","remap","vpe","numVertices","numElements","tile","_index","_size","_overlap","overlap","_wrap","wrap","_url","_fetched","_queue","queue","fetch","fetched","onSuccess","onFailure","catch","method","fadeIn","noop","patternLineTable","l0","h0","l1","h1","isolineFeature","m_isolines","m_lastLabelPositions","m_labelLayer","m_labelFeature","contour","isoline","_createIsolines","valueFunc","usedFunc","hasLabels","lines","_getValueList","valueLines","_isolinesForValue","label","spacing","autofit","levels","minmax","steppow","steplog10","fixedDigits","log10","_addSegment","chains","chain","check","checkFirst","checkLast","combine","_chainVertex","vertex","v0","v1","v03","v13","lowhigh","pattern","square","elemLen","lineEntry","labelPositions","spacingFunc","offsetFunc","labelViewport","mapRotation","labelData","maxSpacing","dispCoor","totalDistance","localSpacing","lineDistance","mapCoor","coorIdx","labelAutoUpdate","lastLabelPositions","_updateLabelPositions","lastDelta","styleName","rotationFunction","vi","textStrokeColor","textStrokeWidth","fontSize","labelSpacing","functionList","rt","higher","m_position","repositionEvent","parentCanvas","_appendCanvasToParent","appendChild","actualValue","clearPosition","cssAttr","test","isInViewport","annotationId","annotationState","highlight","edit","annotationActionOwner","defaultEditHandleStyle","selected","scaled","rotateHandleOffset","rotateHandleRotation","resizeHandleOffset","resizeHandleRotation","handles","edge","editHandleFeatureLevel","showLabel","annotationById","m_label","m_description","description","m_type","trim","_labelPosition","_coordinates","_rotateHandlePosition","dispCenter","maxr2","labelRecord","show","labelStyle","processAction","processEditAction","_editHandle","handle","_processEditActionVertex","_processEditActionEdge","_processEditActionCenter","_processEditActionRotate","_processEditActionResize","selectEditHandle","amountRotated","startCoordinates","rotatePosition","startAmountRotated","resizePosition","coordinatesSet","_coordinateOption","styleType","styleForState","editStyle","mouseClick","mouseClickEdit","mouseMove","_geojsonStyles","_geojsonCoordinates","_geojsonGeometryType","geojson","includeCrs","geotype","objStyle","objLabelStyle","geometry","properties","annotationType","crs","_addEditHandles","vertices","isOpen","editPoints","editHandleStyle","editHandle","curPts","ang1","ang2","ang","p2","d01","d02","canClose","origLen","origPt","aPP","atEnd","displayDistance","rectangleAnnotation","uniformPolygon","highlightStyle","createStyle","s_actions","s_processEditAction","opt","_setCornersFromMouse","c0","c2","c1","c3","handled","delta1","delta2","rectangleRequiredFeatures","polygonAnnotation","skip","_lastClick","pop","polygonRequiredFeatures","lineAnnotation","_lastClickVertexCount","cpp","cpc","d12","costheta","lineRequiredFeatures","pointAnnotation","scaleOnZoom","pointRequiredFeatures","actionOwner","_editHandleFeatureLevel","vglRenderer","vgl","m_contextRenderer","m_viewer","m_updateCamera","contextRenderer","overrideContextAttributes","contextType","contextAttributes","viewer","init","renderWindow","activeRenderer","setResetScene","setLayer","windowPosition","positionAndResize","_updateRendererCamera","render","_glContext","GL","renderState","m_context","getExtension","loseContext","clearCachedShaders","proj","projectionMatrix","angle","cam","viewMatrix","setViewMatrix","setProjectionMatrix","viewAlignment","align","roundx","roundy","setEnableParallelProjection","parallelProjection","checkedWebGL","ctx","exts","getSupportedExtensions","Util","stamp","_leaflet_id","lastId","cellSize","_cellSize","_sqCellSize","_grid","_objectPoint","addObject","_getCoord","grid","row","cell","updateObject","removeObject","eachObject","fn","getNearObject","objectPoint","closestDistSq","closest","_sqDist","contents","ClusterTree","_group","_zoom","_points","_clusters","_count","_parent","_coord","that","_add","inc","_increment","_opts","maxZoom","scl","_scaleAtLevel","_topClusterLevel","zoomToHeight","newCluster","lastParent","choroplethFeature","m_choropleth","colorRange","quantize","geoId","geoFeature","GEO_ID","scalarId","scalarElement","scalarValue","scalar","aggregator","choropleth","scalarAggregator","mean","_dictionary","reduce","accumeDictionary","_featureToPolygons","coordinateMap","_generateScale","valueAccessor","extent","domain","createChoropleth","scalars","getFeatureId","valueArray","accumulatedScalarValue","contourFeature","_createContours","stepped","opacityRange","rangeValues","colorMap","minColor","maxColor","clr","minOpacity","maxOpacity","fetchQueue","_track","_needed","needed","_batch","m_next_batch","next_item","_processing","__fetchQueue","_addToQueue","wait","batch","_innextitem","discard","fileReader","canRead","file","read","progress","Promise","newFileReader","reader","FileReader","onprogress","onloadend","_getString","readAsText","graphFeature","m_nodes","m_points","m_links","nodes","links","linkType","link","nodeFeature","linkFeatures","nLinks","heatmapFeature","m_intensity","m_maxIntensity","m_minIntensity","m_updateDelay","m_binned","m_gcsPosition","intensity","maxIntensity","minIntensity","binned","updateDelay","gcsPosition","blurRadius","gaussian","setMax","setMin","imageTile","_image","_cors","crossDomain","uiLayer","widgetName","newWidget","deleteWidget","modulo","m_getTileSubdomain","subdomains","m_tileUrlFromTemplate","base","xPattern","yPattern","zPattern","sPattern","urlSubdomains","sMatch","tileLayer","tileCache","Tile","defaults","cacheSize","keepLower","imageFormat","originalUrl","m_lastTileSet","m_maxBounds","m_exited","_levelZIncrement","_options","_activeTiles","_tileTree","_cache","cache","m_tileOffsetValues","tileCropFromBounds","_tileBounds","isValid","_origin","toLevel","o","tileAtPoint","displayToLevel","to","_tileOffset","gcsTileBounds","indexOrTile","unit","_topDown","_getTile","urlParams","_getTileCached","delayPurge","_tileHash","_getTileRange","_getTiles","sorted","onlyIfChanged","tiles","nTilesLevel","indexRange","changed","bottomLevel","numTiles","_loadMetric","purge","prefetch","a0","b0","fromLevel","drawTile","hash","_moveToTop","_drawTile","div","_getSubLayer","animationDuration","_remove","parentElement","_getViewBounds","mapZoom","_purge","doneLoading","_updating","_canPurge","topDown","find","_updateSubLayers","lastlevel","lastx","lasty","$el","layerx","layery","offsetx","offsety","tileidx","tileel","lastoffsetx","lastoffsety","_setTileTree","_queued","_getTileTree","_isCovered","_outOfBounds","mapzoom","roundzoom","gcsPt","lvlPt","sublayer","tileOverlap","_atime","_access","noMove","removeFunc","noPurge","pathFeature","pixelmapFeature","m_quadFeature","m_srcImage","m_info","maxIndex","mappedColors","_computePixelmap","_preparePixelmap","pixelData","imageData","getImageData","area","lastidx","updateFirst","updateLast","putImageData","vectorFeature","originStyle","endStyle","domWidget","m_default_canvas","annotationLayer","domRenderer","geojsonReader","osmLayer","typedef","version","sha","jQuery","gl","gui","no_trailing","accumulator","debounce_mode","timeout_id","last_exec","wrapper","elapsed","at_begin","_renderWindow","_supported","mockVGLRenderer","_mocked","mockCounts","_id","incID","default_context","activeTexture","attachShader","bindAttribLocation","bindBuffer","bindFramebuffer","bindTexture","blendFuncSeparate","bufferData","bufferSubData","checkFramebufferStatus","FRAMEBUFFER","FRAMEBUFFER_COMPLETE","clearColor","clearDepth","compileShader","createBuffer","createFramebuffer","createProgram","createShader","createTexture","deleteBuffer","deleteProgram","deleteShader","deleteTexture","disable","disableVertexAttribArray","drawArrays","enableVertexAttribArray","finish","getParameter","DEPTH_BITS","getProgramParameter","LINK_STATUS","getShaderInfoLog","getShaderParameter","COMPILE_STATUS","getUniformLocation","isEnabled","BLEND","linkProgram","pixelStorei","shaderSource","texImage2D","texParameteri","uniform1iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","useProgram","vertexAttribPointer","vertexAttrib3fv","mockedRenderWindow","_setup","wsize","windowSize","wpos","restoreVGLRenderer","geo_annotation","m_mode","m_annotations","geojsonStyleProperties","dataType","textFeatureDataTypes","scaleWithMap","shadowBlur","shadowOffset","option","dblClickTime","adjacentPointProximity","continuousPointProximity","continuousPointColinearity","finalPointProximity","showLabels","clickToEdit","_processAction","currentAnnotation","modes","_selectEditHandle","_updateFromEvent","removeAnnotation","_handleMouseOn","_handleMouseOff","retrigger","featureLevel","highlighted","coord1","gcs1","coord2","gcs2","addAnnotation","removeAllAnnotations","skipCreating","editAnnotation","mapNode","oldMode","feature_idx","_geojsonFeatureToAnnotation","annotation_idx","dataList","data_idx","datagcs","altkey","validateAttribute","updated","parse","labels","editable","annotationLabel","featureSpec","keyidx","origFunc","d2","dataEntry","dataElement","_updateLabels","_removeLabelFeature","pointStyle","lineStyle","polygonStyle","File","Blob","_featureArray","_readObject","fileString","normalized","geometries","_feature","_position","_style","_default","isColor","_done","allFeatures","polygons","styleObj","m_ingcs","m_center","m_zoom","m_rotation","m_fileReader","m_interactor","m_validZoomRange","origMin","m_transition","m_queuedTransition","m_discreteZoom","m_allowRotation","allowRotation","m_camera","m_unitsPerPixel","m_clampBoundsX","m_clampBoundsY","m_clampZoom","m_animationQueue","animationQueue","m_autoResize","autoResize","m_origin","mcx","mcy","resizeSelf","clamp","reset_minimum_zoom","oldCenter","newZoom","fix_zoom","ignoreDiscreteZoom","aroundPoint","ignoreClampBounds","boundsFromZoomAndCenter","camera_bounds","screenPosition","shifted","screenDelta","fix_bounds","panPos","clampPos","ignoreRotationFunc","fix_rotation","worldToGcs","newLayer","rotatedSize","rotate_bounds_center","readerOrName","empty","zoomRange","noRefresh","animTime","transitionEnd","interp1","defaultInterp","units","zoom2z","z2zoom","defaultOpts","interp","zCoord","anim","cancelSource","needZoom","cancelNavigation","cancelAnimation","nav","zoomAndCenterFromBounds","calculate_zoom","halfw","halfh","$a","content","html","appendTo","encoderOptions","optsWithoutWait","waitForRAF","fillStyle","fillRect","getComputedStyle","backgroundColor","canvasElem","drawLayerImageToContext","not","attrElem","failure","processAnimationFrame","globalAlpha","setTransform","camera_scaling","ar_bds","ar_vp","sclx","scly","rotate_bounds","noRangeLimit","bw","bh","absinr","abcosr","ow","oh","aspect","fac","bdx","bdy","dataTransfer","dropEffect","files","_map","mapOpacity","tileScale","rescale","d3_graphFeature","d3_lineFeature","m_maxIdx","pos_func","ln","wrapStyle","interpolate","d3_pathFeature","diag","diagonal","trg","d3_pointFeature","d3_quadFeature","ns","namespaceURI","element","createElementNS","preserveAspectRatio","svgTransform","maxarea","maxv","imgscale","imgw","imgh","d3_tileLayer","m_nextTileId","m_tiles","d3_vectorFeature","markerID","updateMarkers","markerConfigs","path","markerGroup","markers","head","tail","sel","marker","markerData","attrName","orig_func","size_func","Number","NEGATIVE_INFINITY","x1","y1","getScale","x2","y2","gl_choroplethFeature","m_gl_polygons","_wipePolygons","gl_contourFeature","m_textureUnit","m_actor","m_mapper","m_material","m_texture","m_minColorUniform","m_maxColorUniform","m_stepsUniform","m_steppedUniform","m_dynamicDraw","dynamicDraw","createVertexShader","vertexShaderSource","shader","VERTEX_SHADER","setShaderSource","createFragmentShader","fragmentShaderSource","FRAGMENT_SHADER","createGLContours","colorTable","j3","posBuf","opacityBuf","valueBuf","indicesBuf","geometryData","setColorTable","primitive","Uint16Array","setIndices","boundsDirty","boundsDirtyTimestamp","blend","prog","shaderProgram","material","tex","lookupTable","modelViewUniform","projectionUniform","samplerUniform","uniform","INT","vertexShader","fragmentShader","posAttr","vertexAttribute","valueAttr","opacityAttr","sourcePositions","sourceDataP3fv","sourceValues","sourceDataAnyfv","vertexAttributeKeysIndexed","One","sourceOpacity","Two","triangles","mapper","addVertexAttribute","vertexAttributeKeys","Position","addUniform","FLOAT_VEC4","FLOAT","BOOL","addShader","setTextureUnit","addAttribute","actor","setMaterial","setMapper","addSource","addPrimitive","setGeometryData","removeActor","addActor","setVisible","setBinNumber","gl_isolineFeature","MAX_MITER_LIMIT","flagsVertex","corner","flagsLineCap","butt","flagsLineJoin","passthrough","miter","bevel","flagsNearLineShift","flagsFarLineShift","flagsNearOffsetShift","flagsDebug","normal","gl_lineFeature","m_pixelWidthUnif","m_aspectUniform","m_miterLimitUniform","m_antialiasingUniform","m_flagsUniform","m_geometry","allowDebug","createGLLines","onlyStyle","v2","numSegments","lineItemList","lineItemData","vert","posIdx3","firstpos","firstPosIdx3","strokeWidthFunc","strokeWidthVal","strokeColorFunc","strokeColorVal","strokeOpacityFunc","strokeOpacityVal","lineCapFunc","lineCapVal","lineJoinFunc","lineJoinVal","strokeOffsetFunc","strokeOffsetVal","featureVertices","orderLen","prevBuf","nextBuf","farBuf","flagsBuf","fixedFlags","strokeWidthBuf","strokeColorBuf","strokeOpacityBuf","dest","dest3","closedVal","updateFlags","prev","posStrokeOffset","negStrokeOffset","flags","verticesPerFeature","vs","fs","prvAttr","nxtAttr","farAttr","flagsAttr","strkWidthAttr","strkColorAttr","strkOpacityAttr","mviUnif","prjUnif","posData","prvPosData","Four","nxtPosData","Five","farPosData","Six","flagsData","Seven","strkWidthData","strkColorData","strkOpacityData","Three","floatUniform","actors","hasActor","gl_pointFeature","m_pixelWidthUniform","m_primitiveShape","s_updateStyleFromArray","primitiveShape","pointPolygon","verts","createGLPoints","unitBuf","radiusVal","radFunc","strokeVal","fillVal","fillOpacityVal","fillOpacityFunc","fillColorVal","fillColorFunc","vpf","ivpf","ivpf3","iunit","nonzeroZ","bufferedKeys","needsRefresh","needsRender","buffer","bpv","getSourceBuffer","updateSourceBuffer","unitAttr","radAttr","strokeWidthAttr","fillColorAttr","fillAttr","strokeColorAttr","strokeAttr","fillOpacityAttr","strokeOpacityAttr","sourceUnits","sourceRadius","sourceStrokeWidth","sourceFillColor","sourceFill","sourceStrokeColor","sourceStroke","sourceAlpha","Eight","sourceStrokeOpacity","Nine","gl_polygonFeature","earcut","m_builtOnce","m_updateAnimFrameRef","createGLPolygons","uniformPolyFunc","items","target_gcs","original","dimensions","holes","sourceFillOpacity","trianglePrimitive","gl_quadFeature","m_modelViewUniform","m_actor_image","m_actor_color","m_glBuffers","m_imgposbuf","m_clrposbuf","m_clrModelViewUniform","m_glCompileTimestamp","m_glColorCompileTimestamp","fragmentShaderImageSource","vertexShaderImageSource","vertexShaderColorSource","setupDrawObjects","newbuf","imgQuadsPosition","ARRAY_BUFFER","DYNAMIC_DRAW","setupColorDrawObjects","clrQuadsPosition","getVGLMapper","renderFunc","g_timestamp","s_render","srctex","unicrop","_renderImageQuads","TextureCoordinate","modelViewOriginUniform","FLOAT_VEC2","getCachedShader","sourceDataT2fv","pushBack","_renderColorQuads","FLOAT_VEC3","utils","setOrigin","_updateTextures","texture","_texture","setImage","m_contextChanged","uniformLocation","TRIANGLE_STRIP","undoBindVertexData","quadcrop","undoBind","gl_tileLayer","canvasRenderer","m_clearCanvas","clearCanvas","context2d","clearRect","checkedCanvas","canvas_heatmapFeature","m_typedBuffer","m_typedClampedBuffer","m_typedBufferData","m_heatMapPosition","m_heatMapTransform","m_renderTime","_computeGradient","gradient","colors","_grad","_gradColors","createLinearGradient","addColorStop","_createCircle","circle","blur","_circle","shadowOffsetX","shadowOffsetY","shadowColor","beginPath","arc","closePath","createRadialGradient","_colorize","pixels","Uint32Array","pixlen","ArrayBuffer","Uint8ClampedArray","_renderPoints","intensityFunc","rangeIntensity","_renderBinnedData","binSize","bins","rw","maxx","maxy","datalen","binrow","pixelArray","numbins","_binned","gcsOrigin","lastScale","lastOrigin","lastRotation","_animatePan","timeout","canvas_isolineFeature","canvas_lineFeature","cur","temp","firstPos","linecap","linejoin","miterlimit","lineWidth","moveTo","lineTo","canvas_pixelmapFeature","canvas_quadFeature","_checkIfChanged","changing","seeking","paused","oldAlpha","p3","_renderImageAndVideoQuads","listidx","quadlist","cropx","cropy","canvas_textFeature","m_defaultFont","m_cssFontRegExp","getFontFromStyles","useSubValues","renderThreshold","textFunc","fontFromSubValues","posArray","lastTransform","rotateZ","strokeText","fillText","canvas_tileLayer","colorLegendWidget","legendWidget","scaleWidget","sliderWidget","m_categories","m_ticks","ticks","popup","categories","_draw","legendContainer","legendSvg","_drawDiscrete","_drawContinous","_prepareCategories","addCategories","removeCategories","valueRange","valueScale","colorScale","axisScale","steps","ordinal","_renderDiscreteColors","rangeRoundBands","tickValues","quantile","invertExtent","axisDomain","rangePoints","createAxis","nice","precision","number","getPrecision","_popupFormatter","tick","endAxisLabelOnly","_renderAxis","tickFormat","format","getValue","_showPopup","_hidePopup","exponent","trunc","containerWidth","clientWidth","popupWidth","m_top","m_group","m_border","m_spacing","m_padding","getBBox","applyColor","linear","maxWidth","maxHeight","orientation","tickLength","_vertical","_scaleValue","unitsTable","multiples","multiple","digits","power","unitEntry","minimum","mul","mulValue","unitRecord","originalValue","originalPixels","sw","sw2","tl","classed","si","miles","m_xscale","m_yscale","m_plus","m_minus","m_nub","m_nubSize","m_plusIcon","m_minusIcon","m_lowContrast","m_highlightDur","put_icon","icon","datum","respond","zrange","mouseOver","mouseOut"],"mappings":"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AEF;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,YAAY;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF,oBAAoB;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,SAAS;AAClB;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,YAAY;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,YAAY;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,SAAS;AAClB;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA,gBAAgB,IAAI;;AAEpB;AACA;;AAEA;;AAEA;AACA;AACA,wCAAwC,IAAI;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,SAAS;;AAET;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ,6BAA6B;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;AAEA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,eAAe;;AAEf,SAAS;;AAET;AACA,QAAQ,iCAAiC;AACzC,QAAQ,oBAAoB;AAC5B,QAAQ,sCAAsC;AAC9C,QAAQ;AACR,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA,gBAAgB,aAAa,EAAE;AAC/B;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,4DAA4D;;AAE5D;AACA;AACA;AACA,yCAAyC;;AAEzC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;AACA;AACA;AACA,6DAA6D;;AAE7D;AACA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gEAAgE;;AAEhE;AACA;AACA;AACA,6CAA6C;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,iEAAiE,UAAU;AAC3E,sCAAsC,2BAA2B;AACjE;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,UAAU;AACpB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,UAAU,cAAc;AACxB;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA,YAAY,uEAAuE;AACnF;AACA;AACA,YAAY,4BAA4B;AACxC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,2DAA2D;;AAE3D;AACA;AACA,oFAAoF;;AAEpF;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,SAAS;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,QAAQ,SAAS;AACjB;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iDAAiD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD;AACjD,UAAU,wCAAwC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA,CAAC;;;;AAID;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,QAAQ,GAAG;AACX;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;;AAIA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB,0BAA0B,wBAAwB;;AAElD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA,0CAA0C;AAC1C,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;;;AAIA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAU,cAAc;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA,OAAO;AACP,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,wCAAwC,sCAAsC;AAC9E,oCAAoC,uCAAuC;AAC3E,oCAAoC,sCAAsC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,OAAO;AACP;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAoC;AACpC,qCAAqC;AACrC,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,EAAE;AACF;;;;;AAKA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,aAAa;AACpC,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,SAAS;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;;AAEA;;AAEA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,EAAE;AACF;;AAEA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;AACf;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE,gBAAgB;AAClB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA,WAAW;;AAEX;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;;AAEA;AACA;;AAEA,cAAc,sBAAsB;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,cAAc;;AAExB;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uCAAuC;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,uDAAuD;AAC9E;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU,OAAO;AACjB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,+BAA+B;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uCAAuC,OAAO;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,OAAO;AAC/C;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,SAAS,qCAAqC;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA,SAAS,8BAA8B;AACvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,WAAW;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA+C,cAAc,WAAW;AACxE,mBAAmB,UAAU;AAC7B;AACA,sBAAsB,cAAc,sBAAsB,gBAAgB;AAC1E,gBAAgB,WAAW,YAAY;AACvC,cAAc;AACd;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,+DAA+D;AAC3E;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,OAAO;;AAEf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA,UAAU,OAAO;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,QAAQ,OAAO;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,iDAAiD,0BAA0B;AAC3E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,gBAAgB;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,2BAA2B;AAC3B;AACA,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,SAAS,gBAAgB;AACzB;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;AACF;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,cAAc;AAClC,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,SAAS;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,UAAU,kBAAkB;AAC5B,WAAW,kBAAkB;AAC7B,cAAc;AACd,CAAC;AACD;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,mBAAmB;AAC3B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;AAKD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA,iCAAiC;AACjC;AACA;;AAEA,IAAI;AACJ;;AAEA,IAAI;AACJ;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA,WAAW,SAAS;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qCAAqC;;AAEpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,KAAK;AACL;;AAEA,WAAW;AACX,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB,gDAAgD;AAChD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;;AAEA;AACA;;AAEA;AACA,iBAAiB;AACjB,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B;;AAE3B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC;;AAElC;AACA,sBAAsB;AACtB,2BAA2B;;AAE3B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;AACJ;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,uBAAuB;AAClC,WAAW,yBAAyB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;AACA;AACA;AACA,EAAE;AACF;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;;AAEA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA,cAAc,sDAAsD;AACpE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA,cAAc,mCAAmC;AACjD,eAAe,6DAA6D;AAC5E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK,IAA0C;AAC/C,CAAC,iCAAkB,EAAE,mCAAE;AACvB;AACA,EAAE;AAAA,oGAAE;AACJ;;;;;AAKA;;AAE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ACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,4BAA4B;AAC5B,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,mBAAmB,0BAA0B,EAAE,EAAE;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gCAAgC;AACzF;AACA,OAAO;AACP;AACA;AACA,6EAA6E,YAAY;AACzF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAyD,6CAA6C,EAAE;;AAExG;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,mDAAmD;AACnD;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,oCAAoC;AACpC;AACA,KAAK;AACL,wEAAwE;AACxE;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,8DAA8D;AAC9D;AACA,KAAK;AACL,wEAAwE;AACxE;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,yBAAyB,sBAAsB,EAAE,EAAE;AACnD;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,sBAAsB,0BAA0B;AAChD,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,yBAAyB;AACzB,KAAK;AACL,uBAAuB;AACvB,2BAA2B;AAC3B,0BAA0B;AAC1B,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,aAAa;AACvC,OAAO;AACP;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,uDAAuD,6BAA6B,EAAE;AACtF;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA,uDAAuD,YAAY;;AAEnE;;AAEA;;AAEA;AACA;AACA,KAAK,UAAU,gBAAgB;;AAE/B;AACA;AACA,KAAK;AACL;AACA,KAAK,WAAW,kCAAkC;;AAElD;AAC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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,EAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnFA,aAAa,mBAAO,CAAC,CAAW;AAChC,gBAAgB,mBAAO,CAAC,GAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,EAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpEa;AACb;AACA,gBAAgB,mBAAO,CAAC,EAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACjBa;AACb,aAAa,mBAAO,CAAC,CAAW;AAChC,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,cAAc,mBAAO,CAAC,EAAY;AAClC,aAAa,mBAAO,CAAC,EAAU;AAC/B,WAAW,mBAAO,CAAC,EAAS;AAC5B,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,YAAY,mBAAO,CAAC,CAAU;AAC9B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,eAAe,mBAAO,CAAC,EAAc;AACrC,cAAc,mBAAO,CAAC,GAAa;AACnC,WAAW,mBAAO,CAAC,EAAgB;AACnC,SAAS,mBAAO,CAAC,EAAc;AAC/B,gBAAgB,mBAAO,CAAC,GAAe;AACvC,qBAAqB,mBAAO,CAAC,EAAsB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,QAAQ,WAAW;AACnB;AACA;AACA,QAAQ,UAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAW;AACnB;AACA;AACA;AACA,QAAQ,WAAW;AACnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,mBAAmB,uBAAuB,EAAE,EAAE;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA,GAAG;AACH,yBAAyB;AACzB,GAAG;AACH,uBAAuB;AACvB,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iDAAiD,iBAAiB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnRA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,GAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;AC3XA;;;;;;;;AAQA,IAAIK,aAAa;AACfC,YAAU,qBADK;AAEfvgB,OAAK,gBAFU;AAGfD,UAAQ,mBAHO;AAIfU,UAAQ,mBAJO;AAKfE,gBAAc,yBALC;AAMfxV,QAAM,iBANS;AAOfq1B,cAAY,wBAPG;AAQf9f,cAAY,uBARG;;AAUf;AACA+f,mBAAiB,qBAXF;AAYfC,sBAAoB,wBAZL;AAafC,wBAAsB,0BAbP;AAcfC,0BAAwB;AAdT,CAAjB;;AAiBAjmC,OAAOC,OAAP,GAAiB0lC,UAAjB,C;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;AACN;AACU;AAC+C;AACjD;AACV;AACA;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mEAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+DAAK,CAAC,iEAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wEAAS;AACzB,YAAY,8EAAe;AAC3B,+BAA+B,+DAAK;;AAEpC,EAAE,gEAAM,aAAa;AACrB,EAAE,gEAAM,gBAAgB;;AAExB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,6DAAW;AACpC;AACe,mEAAU,EAAC;;;;;;;;ACpEX;AACf;AACA;AACA;AACA,C;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEkC;AACE;AACE;AACJ;AACE;AACY;AACF;;AAEvC;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAU,qEAAI;AACd,4BAA4B,sEAAK;AACjC;;AAEO;AACP,WAAW,2EAAU;AACrB;;AAEA,OAAO,qEAAI;AACX;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,sEAAK;AACxC,OAAO,uEAAM;;AAEb,YAAY,4EAAW;;AAEvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc,4EAAW;;AAEzB;AACA;AACA,mBAAmB,qEAAI;;AAEvB;AACA;AACA;AACA;;AAEA,qCAAqC,sEAAK;AAC1C;;AAEA,UAAU,2EAAU;AACpB,UAAU,qEAAI;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACpKa;AACf;AACA;AACA;AACA,C;;;;;;;ACJe;AACf;AACA;AACA,C;;;;;;;ACHe;AACf;AACA;;AAEA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,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ACA;AACA;AACA;AACA;AACA;;;;;;;;ACXa;AACb,aAAa,mBAAO,CAAC,GAAsB;AAC3C,eAAe,mBAAO,CAAC,EAAwB;AAC/C;;AAEA;AACA,iBAAiB,mBAAO,CAAC,EAAe;AACxC,yBAAyB,mEAAmE;AAC5F,CAAC;AACD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AClBY;AACb,SAAS,mBAAO,CAAC,EAAc;AAC/B,aAAa,mBAAO,CAAC,EAAkB;AACvC,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,UAAU,mBAAO,CAAC,EAAQ;AAC1B,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,EAAW;AAC/B,kBAAkB,mBAAO,CAAC,GAAgB;AAC1C,WAAW,mBAAO,CAAC,GAAc;AACjC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,cAAc,mBAAO,CAAC,EAAS;AAC/B,eAAe,mBAAO,CAAC,EAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;AC/Ia;AACb,aAAa,mBAAO,CAAC,GAAsB;AAC3C,eAAe,mBAAO,CAAC,EAAwB;AAC/C;;AAEA;AACA,iBAAiB,mBAAO,CAAC,EAAe;AACxC,yBAAyB,mEAAmE;AAC5F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACbY;AACb,WAAW,mBAAO,CAAC,EAAkB;AACrC,eAAe,mBAAO,CAAC,EAAa;AACpC,WAAW,mBAAO,CAAC,EAAS;AAC5B,aAAa,mBAAO,CAAC,GAAkB;AACvC,WAAW,mBAAO,CAAC,GAAoB;AACvC,eAAe,mBAAO,CAAC,CAAc;AACrC,YAAY,mBAAO,CAAC,CAAU;AAC9B,eAAe,mBAAO,CAAC,EAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,mBAAO,CAAC,EAAe;;AAEvD;AACA,uBAAuB,4EAA4E,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;;;;;;;;AC1Da;AACb,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,cAAc,mBAAO,CAAC,EAAS;AAC/B,eAAe,mBAAO,CAAC,CAAc;AACrC,eAAe,mBAAO,CAAC,CAAc;AACrC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,EAAW;AAC/B,wBAAwB,mBAAO,CAAC,EAAkB;AAClD,WAAW,mBAAO,CAAC,EAAQ;AAC3B,eAAe,mBAAO,CAAC,EAAwB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB,0BAA0B;AAC1B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;ACpFA;AACA,gBAAgB,mBAAO,CAAC,EAAe;AACvC,eAAe,mBAAO,CAAC,EAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;AACA,WAAW,mBAAO,CAAC,EAAgB;AACnC,WAAW,mBAAO,CAAC,EAAgB;AACnC,eAAe,mBAAO,CAAC,CAAc;AACrC,cAAc,mBAAO,CAAC,CAAW;AACjC;AACA;AACA;AACA;AACA;;;;;;;;ACTa;AACb;AACA,cAAc,mBAAO,CAAC,EAAa;AACnC,eAAe,mBAAO,CAAC,CAAc;AACrC,eAAe,mBAAO,CAAC,EAAc;AACrC,UAAU,mBAAO,CAAC,EAAQ;AAC1B,2BAA2B,mBAAO,CAAC,EAAQ;;AAE3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtCA;AACA,eAAe,mBAAO,CAAC,EAAc;AACrC,aAAa,mBAAO,CAAC,GAAkB;AACvC,cAAc,mBAAO,CAAC,EAAY;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA,cAAc,mBAAO,CAAC,EAAgB;AACtC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,aAAa,mBAAO,CAAC,EAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;A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B,sDAAK,SAAS,uDAAK;AACnB,sDAAK,WAAW,gEAAM;AACtB,sDAAK,QAAQ,sDAAI;AACjB,sDAAK,aAAa,2DAAS;AAC3B,sDAAK,QAAQ,qDAAI;AACjB,sDAAK,WAAW,yDAAO;AACvB,+DAAmB,CAAC,sDAAK;AACV,qHAAK,EAAC;;;;;;;;ACpBrB;AAAA;AAAA;AAA+B;AACM;AACR;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oEAAS;AAC9B;AACA;AACA,qBAAqB,mEAAG;AACxB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,gEAAO;AACQ,6DAAI,EAAC;;;;;;;;ACtDpB;AAAA;AAAA;AAAA;AAAuC;AACe;AAChB;AACV;;AAEb;AACf;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sBAAsB,8DAAG;AACzB,KAAK;AACL;AACA,sBAAsB,8DAAG;AACzB,KAAK;AACL;AACA,sBAAsB,8DAAG;AACzB,KAAK;AACL;AACA,wBAAwB,8DAAG;AAC3B,KAAK;AACL;AACA,uBAAuB,8DAAG;AAC1B,KAAK;AACL;AACA,uBAAuB,8DAAG;AAC1B,KAAK;AACL;AACA,uBAAuB,8DAAG;AAC1B,KAAK;AACL;AACA,mCAAmC,8DAAG;AACtC,KAAK;AACL;AACA,uBAAuB,8DAAG;AAC1B,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,iBAAiB,+DAAK,CAAC,iEAAK;AAC5B;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC,8DAAG;AACnC,KAAK;AACL;AACA,eAAe,+DAAK,CAAC,yEAAa;AAClC,wDAAwD,8DAAG;AAC3D,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACtID;AAAA;AAAA;AAC8B;AACE;;;;AAIhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf,aAAa,gEAAM;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE,+DAAK;AACP;AACA;AACA,CAAC;;;;;;;;AC1KD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;;AAEU;AACV;AACA;AAC4B;AACzD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sEAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA,YAAY,8DAAG,eAAe,8DAAG,gBAAgB,8DAAG,gBAAgB,8DAAG;AACvE;AACA;;AAEA;AACA,+BAA+B,kEAAO,KAAK,gEAAK;AAChD;AACA;AACA;AACA;AACA,uCAAuC,2EAAU;AACjD,yDAAyD,iEAAM;AAC/D;AACA;AACA;AACA,eAAe,sEAAK;AACpB,uCAAuC,2EAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;AACA;;AAEA;AACA,UAAU,kEAAO;AACjB;AACA;AACA;AACA,UAAU,sEAAK;AACf;AACA;AACA;AACA;AACA,QAAQ,2EAAU;;AAElB;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACnGF;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;;AAEA;AACA;AACA;AAC6B;AACA;AACtB;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACfF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoE;AACpB;AACR;AACd;AACa;AACC;;AAExC;AACA,uCAAuC,qEAAU,gCAAgC,qEAAU,gEAAgE,qEAAU,8BAA8B,qEAAU;AAC7M;;AAEe;AACf;AACA;AACA,YAAY,wEAAO;AACnB;AACA,EAAE,qEAAW;AACb;AACA;AACA,gBAAgB,sDAAI;AACpB;AACA;AACA;AACA;AACA;AACA,YAAY,qEAAW;AACvB;AACA;AACA;AACA;AACA,mBAAmB,8DAAG;AACtB,mBAAmB,8DAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,yEAAe;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,8DAAG;AACtB,mBAAmB,8DAAG;AACtB;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,qEAAW;AACtB;;AAEA;AACA;;;;;;;;ACjFe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA,IAAI,IAAI;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI,OAAO;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI,OAAO;AACX;AACA;;AAEA,WAAW;AACX,WAAW;AACX,WAAW;AACX,WAAW;AACX,WAAW;AACI;AACf;AACA;AACA;AACA,CAAC,EAAC;AACF;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,IAAI;AACf;AACA,YAAY,OAAO;AACnB;AACO;AACP,2BAA2B;AAC3B;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA,8CAA8C;AAC9C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEwC;AACA;AACQ;AACF;;AAEK;AACjB;;AAE3B;AACP;AACA;AACA;AACA;;AAEA;AACA,cAAc,wEAAO;AACrB,eAAe,wEAAO;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACO;AACP;AACA;;AAEA,kBAAkB,2EAAU;AAC5B;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sCAAsC,gEAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,gEAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gEAAK;AACtC;AACA;AACA;AACA;AACA,aAAa,wEAAO;;AAEpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA,QAAQ;AACR;AACA,UAAU,4EAAW;;AAErB,wBAAwB,kEAAO;AAC/B;AACA;AACA,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA,YAAY,kEAAO,GAAG,qEAAI;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC5KF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACvBA;AAAA;AAAgC;AACU;;AAE1C;;AAEe;AACf;AACA;AACA,wBAAwB,GAAG,OAAO;AAClC;AACA;AACA;AACA;AACA,SAAS,iEAAO;AAChB;AACA,sBAAsB,gEAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACrBc;AACf;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;ACPc;AACf;AACA;AACA;AACA,C;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AAClB;AACvB;AACiC;;;AAGjC;AACP,aAAa,4EAAW;AACxB;AACA;AACA;AACA;AACA,+CAA+C,8DAAG;AAClD;AACA;AACA;;AAEA,EAAE,gDAAM;AACR,iBAAiB,gDAAM;AACvB,iBAAiB,gDAAM;AACvB;;AAEO;AACQ;AACf;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACkB;;AAEvC;AACP,EAAE,+CAAK;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,QAAQ,2EAAU;AAClB,EAAE,+CAAK;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,+CAAK;AACP,QAAQ,2EAAU;AAClB;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC/DF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AAClC;AACoD;;AAE7C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iEAAM,yCAAyC,iEAAM,aAAa,qEAAI;AAC7G;;AAEO;AACP;AACA;;AAEA,6DAA6D,iEAAM,aAAa,qEAAI,yCAAyC,kEAAO;AACpI;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,0CAA0C,iEAAM;AAChD,wBAAwB,OAAO;AAC/B,8BAA8B,qEAAI,4CAA4C,kEAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACnDF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmD;;AAEjB;AACE;AACA;AACA;AACU;;AAEvC;AACP;AACA,0BAA0B,kEAAO;AACjC;;AAEO;AACP;AACA;AACA;AACA,0EAA0E,gEAAK;AAC/E,2BAA2B,qEAAI;AAC/B;AACA;AACA;AACA,kCAAkC,gEAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,gEAAK;AAC/E,kCAAkC,sEAAK,yDAAyD,sEAAK;AACrG;AACA,eAAe,sEAAK;AACpB,2EAA2E,kEAAO;AAClF;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa,2EAAU;;AAEvB,wDAAwD,gEAAK,iCAAiC,gEAAK;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kEAAO;AAChE;AACA;AACA,kCAAkC,gEAAK;AACvC,WAAW,sEAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gEAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,gEAAK;AACnB;AACA;AACA;AACA;AACA;AACA,iCAAiC,gEAAK;AACtC;AACA,cAAc,2EAAU;AACxB;AACA;AACA,cAAc,2EAAU;AACxB;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gEAAK;AACvC,gBAAgB,gEAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sEAAK;AAC5B,uBAAuB,2EAAU;AACjC;AACA;AACA;AACA;AACA,gBAAgB,gEAAK;AACrB;AACA;AACA;AACA;AACA,cAAc,2EAAU;AACxB;AACA,iBAAiB,sEAAK,yBAAyB,kEAAO;AACtD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC7KF;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACrFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;AACU;AACV;AACuB;;AAE3D;AACA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,sEAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,sEAAK;AAClB,aAAa,sEAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2EAAU;AAC3B;AACA,iBAAiB,2EAAU;AAC3B,iBAAiB,2EAAU;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACO;AACP;AACA;AACA,aAAa,2EAAU;AACvB;AACA;AACA,+BAA+B,kEAAO,KAAK,gEAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,iEAAM;AACrD,oBAAoB,kEAAO;AAC3B;AACA;AACA,YAAY,sEAAK;AACjB;AACA;AACA;AACA;AACA;AACA,sCAAsC,gEAAK;AAC3C;AACA;AACA;AACA;AACA;AACA,gDAAgD,gEAAK;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gEAAK;AAC9B;AACA,UAAU,kEAAO;AACjB;AACA,8BAA8B,gEAAK;AACnC;AACA,eAAe,kEAAO;AACtB;AACA;AACA,UAAU,sEAAK;AACf,UAAU,2EAAU;AACpB;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC1KF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;AACA;AACF;AACY;AACV;AACe;AAC5C;;AAEP;AACA,iBAAiB;AACjB,iBAAiB;AACjB,gBAAgB;AAChB,gBAAgB;AAChB,iBAAiB;AACjB,iBAAiB;AACjB,sBAAsB;AACtB,uBAAuB;;AAEvB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gEAAK;AAC7C;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,sEAAK;AACjB,YAAY,sEAAK;;AAEjB;AACA;AACA,YAAY,sEAAK;AACjB,YAAY,sEAAK;;AAEjB,YAAY,sEAAK;;AAEjB,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;;AAEA;AACA,+CAA+C,gEAAK;AACpD,UAAU,qEAAI,SAAS,kEAAO,OAAO,gEAAK;AAC1C;;AAEA,qCAAqC,kEAAO;AAC5C;AACA,YAAY,gEAAK;AACjB,SAAS,sEAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,2EAAU;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,sEAAK;AACf;AACA;AACA;AACA;AACA;AACA,WAAW,kEAAO;AAClB;AACA,QAAQ,2EAAU;;AAElB;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC1IF;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;;AAEvC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,kBAAkB,2EAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACzGF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACA;AACA;AACA;AACA;AACJ;AACgB;AACA;AACV;AACe;;AAE5C;AACP;AACA,cAAc,qEAAI;AAClB,cAAc,qEAAI;AAClB,cAAc,qEAAI;AAClB,cAAc,qEAAI;AAClB,wBAAwB,qEAAI;AAC5B;AACA;;AAEA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA,QAAQ,2EAAU;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mEAAE;AACf;AACA;AACA;AACA;AACA,sBAAsB,qEAAI;;AAE1B;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sEAAK;AACpB,kCAAkC,kEAAO,KAAK,gEAAK;AACnD;AACA,YAAY,kEAAO;AACnB;AACA;AACA;AACA;AACA;AACA,cAAc,mEAAE;;AAEhB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,2EAAU;AAClB,QAAQ,2EAAU;AAClB;;AAEA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;;AC1GyD;;AAEvB;AACU;;AAE9C;AACA;AACA;AACA;AACA;;AAEO;;AAEA;AACA;AACA;;AAEP;AACA;AACO;AACP;AACA,mBAAmB,kEAAO,IAAI,gEAAK;AACnC;AACA;AACA,yBAAyB,gEAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,sEAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sEAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;;AAEA,QAAQ,2EAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gEAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gEAAK;AAC3C;AACA;AACA,UAAU,iEAAM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sEAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,kEAAO;AACjB;AACA;AACA;AACA,gBAAgB,kEAAO;AACvB;AACA;AACA;AACA,sBAAsB,gEAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gEAAK;AAClC;AACA;AACA;AACA;AACA,6BAA6B,gEAAK;AAClC;AACA;AACA;AACA;AACA;AACA,YAAY,kEAAO;AACnB;AACA;AACA,aAAa,kEAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gEAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,2EAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACzSF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoC;AACA;AACU;AACV;AACM;;AAEnC;;AAEP,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,sEAAK;AAClB,aAAa,sEAAK;;AAElB;AACA;AACA;AACA,aAAa,sEAAK;AAClB,aAAa,sEAAK;;AAElB;AACA;AACA;AACA,aAAa,sEAAK;;AAElB,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;;AAEA;AACA;;AAEA,WAAW,sEAAK;AAChB;AACA,yBAAyB,2EAAU;AACnC;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,2EAAU;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA,YAAY,sEAAK;AACjB,eAAe,gEAAK;AACpB;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AChIF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACV;AACM;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,qBAAqB;AACrB,WAAW;AACX,aAAa;AACb,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,2EAAU;;AAEnB;AACA;;AAEA;AACA;AACA;AACA,iCAAiC,gEAAK;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAU,sEAAK;AACf;AACA,UAAU,2EAAU;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACvGF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACV;AACA;AACE;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,cAAc,sEAAK;AACnB;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa,2EAAU;AACvB;AACA;AACA;AACA;AACA;AACA,aAAa,sEAAK;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA,UAAU,2EAAU;AACpB;AACA;AACA;AACA,UAAU,uEAAM;AAChB,UAAU,2EAAU;AACpB;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACrEF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACA;;AAEvC;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;;AAEA,aAAa,2EAAU;AACvB,aAAa,2EAAU;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;;AAEA,QAAQ,2EAAU;AAClB,QAAQ,2EAAU;AAClB;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC/CF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACA;AACA;AACA;AACY;AACA;AACZ;AACQ;;AAEZ;AAC9B;;AAEO;AACP;AACA;AACA;AACA,uCAAuC;AACvC;AACA,YAAY,qEAAI;AAChB,YAAY,qEAAI;AAChB,YAAY,qEAAI;AAChB,YAAY,qEAAI;AAChB,sBAAsB,qEAAI,gDAAgD;AAC1E;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA,aAAa,2EAAU;AACvB;AACA;AACA,yBAAyB,gEAAK;AAC9B;AACA;AACA;AACA;AACA;AACA,oBAAoB,2EAAU;AAC9B;AACA;AACA;AACA,yBAAyB,gEAAK;AAC9B;AACA;AACA;AACA;AACA,eAAe,mEAAE;AACjB;AACA,mBAAmB,qEAAI;AACvB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,gEAAK;AACjD,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,GAAG;AAC3B;AACA;AACA;AACA,8BAA8B,gEAAK;AACnC;AACA;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA;AACA,kCAAkC,gEAAK;AACvC;AACA,YAAY,2EAAU;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB,GAAG;AAC3B;AACA;AACA,uBAAuB,qEAAI;AAC3B;AACA;AACA;AACA;AACA,8BAA8B,gEAAK;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACtIF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,qEAAU;AACpC;AACA,kBAAkB;;AAElB;AACA,aAAa,SAAS;AACtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA,iCAAiC,qEAAU;AAC3C;;AAEA;AACA;;AAEA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACjOF;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;;AAE9C;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACO;AACP;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,aAAa,2EAAU;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;;AAEA,YAAY,2EAAU;AACtB;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACnDF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACA;AACN;AACxC;AACwC;AACQ;AACG;;AAEf;;;AAG7B;AACP;AACA;;;AAGA;AACA,cAAc,wEAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,QAAQ,2EAAU;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,GAAG;AAC/B;AACA;AACA,0BAA0B,gEAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,wEAAO;AACxB;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,sEAAK;AACjB;AACA;AACA,YAAY,sEAAK;AACjB;AACA,UAAU,2EAAU;AACpB,UAAU,2EAAU;AACpB;AACA;AACA,UAAU,4EAAW;AACrB;AACA,YAAY,kEAAO;AACnB;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA,kBAAkB,gEAAK,IAAI,kEAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AClHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACvC;AACmC;AAC1C;AACA;AACO;;AAEP;AACA;AACA;AACA;;AAEA,kBAAkB,2EAAU;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gEAAK;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,gEAAK;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AClFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACA;AACA;AACA;AACE;AACF;AACY;AACA;AACV;AACM;;AAEnC;;AAEP;AACA;AACA;AACA,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qEAAI;AAChB,YAAY,qEAAI;AAChB,YAAY,qEAAI;AAChB,YAAY,qEAAI;;AAEhB;AACA;;AAEA,aAAa,sEAAK;AAClB,aAAa,qEAAI;;AAEjB,wCAAwC,gEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA,eAAe,sEAAK;AACpB,eAAe,qEAAI;AACnB;AACA;AACA;AACA,aAAa,qEAAI;AACjB;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,qEAAI;AACjB;AACA;AACA,wBAAwB,2EAAU;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,2EAAU;AACpB,UAAU,2EAAU;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,sEAAK;AACf,UAAU,2EAAU;AACpB;AACA;AACA;AACA;;AAEA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACpHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;;AAEK;;AAEf;;AAEpC;AACA;AACO;AACP,qBAAqB;AACrB;AACA;;AAEO;;AAEP;AACA;;AAEA;AACA;AACA,aAAa,2EAAU;AACvB;;AAEA,uBAAuB,gEAAK;AAC5B;AACA;AACA;AACA,cAAc,sEAAK;AACnB,yBAAyB,gEAAK,+BAA+B,kEAAO,KAAK,gEAAK;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,gEAAK;AAC1B;AACA;AACA;AACA,UAAU,2EAAU;AACpB;;AAEA;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AChIF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACK;;AAEjB;AACA;AACA;AACA;AACA;AACJ;AACM;AACA;;;;AAI7B;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,aAAa,2EAAU;AACvB;AACA;AACA,sCAAsC,gEAAK;AAC3C;AACA,gCAAgC,kEAAO;AACvC,gCAAgC,kEAAO;AACvC;AACA;AACA,2CAA2C,gEAAK;AAChD;AACA,gCAAgC,kEAAO;AACvC,gCAAgC,kEAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,sCAAsC,gEAAK;AAC3C;AACA,qBAAqB,qEAAI,iBAAiB,kEAAO;AACjD,oBAAoB,qEAAI;AACxB;AACA;AACA;AACA;AACA,2CAA2C,gEAAK;AAChD;AACA,qBAAqB,qEAAI,iBAAiB,kEAAO;AACjD,oBAAoB,qEAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAE;AACd,WAAW,mEAAE;AACb;AACA;AACA;AACA;AACA;AACA,mDAAmD,gEAAK;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,kBAAkB,kEAAO;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,gEAAK;AAC7B;AACA;AACA;AACA,YAAY,sEAAK;AACjB,kCAAkC,kEAAO;AACzC,2BAA2B,gEAAK;AAChC;AACA,gBAAgB,2EAAU;AAC1B;AACA;AACA,gBAAgB,2EAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,cAAc,2EAAU;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,SAAS,qEAAI;AACb,sCAAsC,gEAAK;AAC3C;AACA,qBAAqB,qEAAI,iBAAiB,kEAAO;AACjD;AACA;AACA,YAAY,sEAAK;AACjB,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA,2CAA2C,gEAAK;AAChD;AACA,qBAAqB,qEAAI,iBAAiB,kEAAO;AACjD;AACA;;AAEA,YAAY,sEAAK;AACjB,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mEAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC9MF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACV;AACe;;AAE5C;AACP,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,qBAAqB;AACrB,WAAW;AACX,aAAa;AACb,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,SAAS,2EAAU;;AAEnB;AACA;;AAEA;AACA;AACA;AACA,iCAAiC,gEAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,SAAS;AACT,QAAQ;AACR,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sEAAK;;AAEX;AACA;;AAEA;AACA,sBAAsB,gEAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,QAAQ,sEAAK;AACb,8BAA8B,kEAAO;AACrC,uBAAuB,gEAAK;AAC5B;AACA,YAAY,2EAAU;AACtB;AACA;AACA,YAAY,2EAAU;AACtB;AACA;AACA;AACA;AACA;AACA,QAAQ,2EAAU;AAClB;AACA;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;AC1FF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEwE;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,kEAAO,GAAG,iEAAM;AACnC;AACA,GAAG,yBAAyB,kEAAO,GAAG,iEAAM;AAC5C;AACA,GAAG,kCAAkC,iEAAM;AAC3C;AACA,GAAG,kCAAkC,kEAAO,GAAG,iEAAM;AACrD;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,YAAY;AACZ;AACA;AACA;AACA,QAAQ;AACR,cAAc;;AAEd;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,UAAU,kEAAO;AACjB,eAAe,iEAAM,WAAW,kEAAO,GAAG,iEAAM;AAChD;AACA,oBAAoB,kEAAO;AAC3B,KAAK,gBAAgB,kEAAO,GAAG,iEAAM,aAAa,kEAAO,GAAG,iEAAM;AAClE;AACA,iCAAiC,8DAAG,SAAS,8DAAG;AAChD,KAAK,kBAAkB,kEAAO,GAAG,iEAAM,aAAa,iEAAM;AAC1D;AACA,oBAAoB,kEAAO;AAC3B,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,UAAU,kEAAO;AACjB,eAAe,iEAAM,WAAW,kEAAO,GAAG,iEAAM;AAChD;AACA,qBAAqB,kEAAO;AAC5B,KAAK,gBAAgB,iEAAM,YAAY,iEAAM;AAC7C;AACA;AACA,KAAK,iBAAiB,iEAAM,aAAa,kEAAO,GAAG,iEAAM;AACzD;AACA,qBAAqB,kEAAO;AAC5B,KAAK;AACL;AACA,kCAAkC,8DAAG,UAAU,8DAAG;AAClD;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,uCAAuC,kEAAO;AAC9C,KAAK;AACL,uCAAuC,8DAAG;AAC1C,KAAK;AACL,uCAAuC,kEAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,8DAAG,kDAAkD,iEAAM,KAAK,kEAAO;AAC9F;;AAEA;AACA;AACA,UAAU,kEAAO;AACjB,GAAG;AACH,UAAU,8DAAG;AACb,GAAG;AACH,gBAAgB,8DAAG;AACnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,YAAY;AACZ;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,UAAU,kEAAO;AACjB,GAAG;AACH;AACA,0BAA0B,8DAAG,QAAQ,8DAAG;AACxC,GAAG;AACH;AACA,UAAU,kEAAO;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,8DAAG;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kEAAO;AACpB;AACA,uBAAuB,kEAAO;AAC9B,KAAK;AACL,sCAAsC,8DAAG,WAAW,8DAAG;AACvD,KAAK;AACL,uBAAuB,kEAAO;AAC9B,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,mBAAmB,kEAAO;AAC1B;AACA,wBAAwB,kEAAO;AAC/B,KAAK;AACL;AACA,KAAK;AACL,wBAAwB,kEAAO;AAC/B,KAAK;AACL,uCAAuC,8DAAG,YAAY,8DAAG;AACzD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,6BAA6B,kEAAO;AACpC;AACA;AACA,6CAA6C,kEAAO;AACpD,KAAK;AACL,6CAA6C,8DAAG;AAChD,KAAK;AACL,6CAA6C,kEAAO;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,gEAAK;AACjB;AACA;AACA,GAAG;AACH;AACA,2BAA2B,iEAAM;AACjC;AACA,KAAK,kBAAkB,iEAAM,aAAa,kEAAO,GAAG,iEAAM;AAC1D;AACA,eAAe,kEAAO;AACtB,KAAK,kBAAkB,kEAAO,GAAG,iEAAM,eAAe,kEAAO,GAAG,iEAAM;AACtE;AACA,sCAAsC,8DAAG,WAAW,8DAAG;AACvD,KAAK;AACL;AACA,eAAe,kEAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,8DAAG;AACjB,YAAY,iEAAM;AAClB,GAAG,kBAAkB,8DAAG;AACxB,YAAY,iEAAM;AAClB;AACA;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;AC9WF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAE6D;AACf;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,8DAAG,GAAG;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,cAAc,2EAAU;;AAExB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,WAAW,8DAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA,2BAA2B,kEAAO,GAAG,kEAAO;AAC5C,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK,gEAAK;;AAEnB;AACA,6BAA6B,8DAAG;AAChC;AACA;AACA;AACA;;AAEA,WAAW,2EAAU;AACrB;AACA;;AAEO;AACQ;AACf;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;AChKF;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC1BA;AACA,UAAU,mBAAO,CAAC,GAAU;AAC5B,SAAS,mBAAO,CAAC,GAAS;AAC1B,cAAc,mBAAO,CAAC,GAAc;AACpC,QAAQ,mBAAO,CAAC,GAAQ;AACxB,OAAO,mBAAO,CAAC,GAAO;AACtB,OAAO,mBAAO,CAAC,GAAO;AACtB,YAAY,mBAAO,CAAC,GAAY;AAChC,YAAY,mBAAO,CAAC,GAAY;AAChC,UAAU,mBAAO,CAAC,GAAU;AAC5B,OAAO,mBAAO,CAAC,GAAO;AACtB,OAAO,mBAAO,CAAC,GAAO;AACtB,SAAS,mBAAO,CAAC,GAAS;AAC1B,eAAe,mBAAO,CAAC,GAAe;AACtC,YAAY,mBAAO,CAAC,GAAY;AAChC,mBAAmB,mBAAO,CAAC,GAAmB;AAC9C,UAAU,mBAAO,CAAC,GAAU;AAC5B,iBAAiB,mBAAO,CAAC,GAAiB;AAC1C,UAAU,mBAAO,CAAC,GAAU;AAC5B,WAAW,mBAAO,CAAC,GAAW;AAC9B,aAAa,mBAAO,CAAC,GAAa;AAClC,OAAO,mBAAO,CAAC,GAAO;AACtB,QAAQ,mBAAO,CAAC,GAAQ;AACxB,UAAU,mBAAO,CAAC,GAAU;AAC5B,iBAAiB,mBAAO,CAAC,GAAiB;AAC1C,iBAAiB,mBAAO,CAAC,GAAiB;AAC1C;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;;;;;;ACAA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACbA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACtBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA,C;;;;;;ACXA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACbA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,a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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,aAAa;AAChC,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,uCAAuC;AAC9D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B,mBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;;AAE7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,SAAS;AAC5B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD,kBAAkB;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,SAAS;AACxB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,uDAAuD;AACvD;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe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;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,EAAgB;AAC1B,EAAE,mBAAO,CAAC,EAAe;AACzB,EAAE,mBAAO,CAAC,EAAgB;;AAE1B,sBAAsB,mBAAO,CAAC,EAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,EAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzOA;AACA,cAAc,mBAAO,CAAC,EAAgB;AACtC,WAAW,mBAAO,CAAC,EAAgB;AACnC,UAAU,mBAAO,CAAC,EAAe;AACjC;AACA;AACA;AACA;AAC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BAAwB,mBAAO,CAAC,GAAwB;AACxD,kBAAkB,mBAAO,CAAC,EAAiB;AAC3C,YAAY,mBAAO,CAAC,CAAU;AAC9B,WAAW,mBAAO,CAAC,EAAgB;AACnC,WAAW,mBAAO,CAAC,EAAgB;AACnC,SAAS,mBAAO,CAAC,EAAc;AAC/B,YAAY,mBAAO,CAAC,EAAgB;AACpC;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,EAAkB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,KAAK;AACL;AACA,oCAAoC,cAAc,OAAO;AACzD,qCAAqC,cAAc,OAAO;AAC1D;AACA;AACA,oEAAoE,OAAO;AAC3E;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,0BAA0B,EAAE;AACtE;AACA;AACA,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAa;AACvB;;;;;;;;ACpEa;AACb,cAAc,mBAAO,CAAC,CAAW;AACjC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,mBAAmB,mBAAO,CAAC,GAAmB;AAC9C,aAAa,mBAAO,CAAC,GAAkB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,CAAU;AACxB;AACA,kBAAkB;AAClB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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BAAiB;AACrD;AACA;AACA,EAAE,mBAAO,CAAC,EAAa;AACvB;;AAEA,mBAAO,CAAC,EAAgB;;;;;;;;AC1CX;AACb,mBAAO,CAAC,GAAoB;AAC5B,eAAe,mBAAO,CAAC,CAAc;AACrC,aAAa,mBAAO,CAAC,EAAU;AAC/B,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C;AACA;;AAEA;AACA,EAAE,mBAAO,CAAC,EAAa;AACvB;;AAEA;AACA,IAAI,mBAAO,CAAC,CAAU,eAAe,wBAAwB,0BAA0B,YAAY,EAAE;AACrG;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA,GAAG;AACH;;;;;;;ACxBA;AACA,mBAAO,CAAC,EAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACTD;AACA,mBAAO,CAAC,EAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACXD;AACA,mBAAO,CAAC,EAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACTD;AACA,mBAAO,CAAC,EAAe;AACvB;AACA,iBAAiB,mBAAO,CAAC,EAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;ACtEY;AACb,cAAc,mBAAO,CAAC,EAAY;AAClC,aAAa,mBAAO,CAAC,CAAW;AAChC,UAAU,mBAAO,CAAC,EAAQ;AAC1B,cAAc,mBAAO,CAAC,EAAY;AAClC,cAAc,mBAAO,CAAC,CAAW;AACjC,eAAe,mBAAO,CAAC,CAAc;AACrC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,iBAAiB,mBAAO,CAAC,EAAgB;AACzC,YAAY,mBAAO,CAAC,EAAW;AAC/B,yBAAyB,mBAAO,CAAC,EAAwB;AACzD,WAAW,mBAAO,CAAC,GAAS;AAC5B,gBAAgB,mBAAO,CAAC,GAAc;AACtC,iCAAiC,mBAAO,CAAC,GAA2B;AACpE,cAAc,mBAAO,CAAC,GAAY;AAClC,gBAAgB,mBAAO,CAAC,EAAe;AACvC,qBAAqB,mBAAO,CAAC,GAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,EAAE,mBAAO,CAAC,EAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,EAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E,mBAAO,CAAC,EAAsB;AAC9B,mBAAO,CAAC,EAAgB;AACxB,UAAU,mBAAO,CAAC,EAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD,mBAAO,CAAC,EAAgB;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;AC7RY;AACb,WAAW,mBAAO,CAAC,GAAoB;AACvC,eAAe,mBAAO,CAAC,EAAwB;AAC/C;;AAEA;AACA,mBAAO,CAAC,EAAe;AACvB,6BAA6B,mEAAmE;AAChG,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACbY;AACb,cAAc,mBAAO,CAAC,CAAW;AACjC,aAAa,mBAAO,CAAC,EAAU;AAC/B,aAAa,mBAAO,CAAC,GA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A+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,0BAA0B,aAAa;AACvC,KAAK;AACL,GAAG;AACH;AACA,+DAA+D,OAAO;AACtE;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,0BAA0B,aAAa;AACvC,KAAK;AACL;AACA,CAAC;;AAED,qDAAqD,aAAa,EAAE;;AAEpE,oBAAoB,0BAA0B;;AAE9C,mBAAO,CAAC,EAAgB;;;;;;;ACtMxB;AACA,aAAa,mBAAO,CAAC,CAAW;AAChC,cAAc,mBAAO,CAAC,CAAW;AACjC,gBAAgB,mBAAO,CAAC,EAAe;AACvC;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACnBD,cAAc,mBAAO,CAAC,CAAW;AACjC,YAAY,mBAAO,CAAC,GAAS;AAC7B;AACA;AACA;AACA,CAAC;;;;;;;ACLD,iBAAiB,mBAAO,CAAC,GAAsB;AAC/C,cAAc,mBAAO,CAAC,EAAgB;AACtC,eAAe,mBAAO,CAAC,EAAa;AACpC,aAAa,mBAAO,CAAC,CAAW;AAChC,WAAW,mBAAO,CAAC,EAAS;AAC5B,gBAAgB,mBAAO,CAAC,EAAc;AACtC,UAAU,mBAAO,CAAC,EAAQ;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AAC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A2B,cAAc,aAAa,eAAe,gBAAgB,gCAAgC,eAAe,qBAAqB,iBAAiB,mCAAmC,gCAAgC,8BAA8B,+BAA+B,2BAA2B,uBAAuB,GAAG,0CAA0C,wBAAwB,6CAA6C,0CAA0C,wCAAwC,yCAAyC,qCAAqC,eAAe,uEAAuE,6BAA6B,GAAG,uBAAuB,uBAAuB,GAAG,4BAA4B,qBAAqB,GAAG;;AAEtxE;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;ACxFA;AAAA;AAA0B;AACU;AACpC,YAAY,8DAAI;;AAEhB;AACA;AACA;AACA,uBAAuB,mEAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mEAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,sBAAsB,sDAAI;AAC1B;AACA;AACA;AACA;AACA;AACA,SAAS,8DAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,8DAAK,EAAC;;;;;;;;AC1ErB;AAAA;AAAA;AAAA;AAA0B;AACG;AACM;AACP;AAC5B;AACA;AACA;AACA;AACA,iBAAiB,sDAAI;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,aAAa,+DAAK;AAClB;AACA;AACA;AACA,aAAa,+DAAK;AAClB;AACA;AACA;AACA,YAAY,+DAAK;AACjB;AACA;AACA;AACA,SAAS,+DAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sDAAI;AACjB;AACA;AACA,gBAAgB,mEAAG;AACnB;AACA;AACA,eAAe,sDAAI;AACnB;AACA;AACA;AACA,eAAe,oEAAO;AACtB;AACA;AACA;AACA;AACA,aAAa,oEAAO;AACpB;AACA,GAAG;AACH;AACA;AACA;;AAEe,8DAAK,EAAC;;;;;;;;AC7DN;AACf;AACA;AACA;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,CAAC;;;;;;;;ACVD;AAAA;AAC4B;;AAE5B,wBAAwB;AACxB,iCAAiC;AACjC,+BAA+B;AAC/B,kCAAkC;AAClC,iCAAiC;AACjC,+BAA+B;AAC/B,8BAA8B;AAC9B,mCAAmC;AACnC,iCAAiC;AACjC,4BAA4B;AAC5B,oCAAoC;AACpC,4BAA4B;AAC5B,+BAA+B;;;;;;;;ACfhB;AACf,OAAO,iBAAiB;AACxB,YAAY;AACZ,CAAC,EAAC;;;;;;;;ACHa,oEAAW,EAAC;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzGe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAsC;AACM;AAC5C,aAAa,0DAAI,EAAE,6DAAO;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEa;;AAEN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACe;AACf;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;ACtCF;AAAA;AAAA;AAAA;AAAA;AAA0D;AACQ;AACtC;;AAErB;AACP,iBAAiB;AACjB,iBAAiB;AACjB,0BAA0B;AAC1B;AACA;AACA,mBAAmB,gEAAK,SAAS,8DAAG,QAAQ,8DAAG;AAC/C;AACA;AACA,GAAG;AACH,sBAAsB;AACtB;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACO;AACP,WAAW;AACX,kBAAkB,+DAAK,CAAC,qEAAS;AACjC;AACA,gBAAgB,mEAAK;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,gEAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/CA;AAAA;AAAA;AAC4B;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AClQA;AAAA;AAC4B;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACtGA;AAA8F;;AAE9F;AACA;;AAEA;AACA,qBAAqB,sEAAW;AAChC,GAAG;AACH,qBAAqB,oEAAS;AAC9B;;AAEA;AACA;AACA;AACA,uBAAuB,qEAAU;AACjC;AACA;AACA;AACA,yBAAyB,qEAAU;AACnC,+BAA+B,qEAAU;AACzC,+BAA+B,qEAAU;AACzC,+BAA+B,qEAAU;AACzC;AACA;AACA;AACA;;AAEA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEe,8DAAK,EAAC;;;;;;;;AClCrB;AAAA;AAAuE;;AAEwD;AAC/H;AACA,mBAAmB,qEAAU,aAAa,qEAAU;AACpD;;AAEe;AACf;AACA,MAAM,0EAAa;AACnB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA,4BAA4B,sEAAW,wBAAwB,sEAAW;AAC1E;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU,iFAAoB;AAC9B;AACA;AACA,YAAY,8EAAiB;AAC7B;AACA;AACA,YAAY,gFAAmB;AAC/B;AACA,SAAS,iFAAoB;;AAE7B,CAAC;;;;;;;;ACtCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAa;AACsD;AAC5D;AACP;AACA,iBAAiB;AACjB,GAAG;AACH;AACA;AACA;AACA,GAAG,gCAAgC,qEAAU;AAC7C;AACA,GAAG,gCAAgC,qEAAU;AAC7C;AACA,GAAG;AACH,gBAAgB;AAChB;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,6BAA6B;;AAE7B,SAAS;AACT,cAAc;AACd,eAAe;AACf,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA,kBAAkB,kEAAO,wBAAwB,kEAAO;AACxD,gBAAgB,kEAAO;AACvB,GAAG,qBAAqB,kEAAO,uBAAuB,kEAAO;AAC7D,eAAe,kEAAO;AACtB,GAAG,sBAAsB,kEAAO;AAChC;AACA;AACA,YAAY;AACZ,GAAG,qBAAqB,kEAAO;AAC/B;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEM;AACP;AACA;AACA;AACA;AACA;;AAEA,QAAQ;AACR,SAAS;AACT,SAAS;AACT,SAAS;AACT;AACA;AACA,SAAS;AACT,YAAY;AACZ,YAAY;AACZ,WAAW;AACX,WAAW;AACX,YAAY;AACZ,WAAW;;AAEX;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kEAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACO;;AAEP,qBAAqB,qEAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,yBAAyB,qEAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACO;;AAEP,qBAAqB,qEAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG,yBAAyB,qEAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACpPe;AACf;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACnDc;AACf;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACdA;AAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,6DAAO;AAC1B;AACA;AACA,SAAS,6DAAO;AAChB;AACe,8DAAK,EAAC;;;;;;;;ACjCrB;AAAA;AAAA;AAAmD;;;;;;;ACAnD,kBAAkB,mPAAmP,eAAe,gJAAgJ,uIAAuI,kDAAkD,kBAAkB,oDAAoD,EAAE,2DAA2D,EAAE,2DAA2D,EAAE,wDAAwD,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,mBAAmB,kBAAkB,qCAAqC,2KAA2K,2XAA2X,gBAAgB,2BAA2B,wJAAwJ,0DAA0D,YAAY,8GAA8G,mB;;;;;;;ACA72D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4C;AACE;AACN;AACM;AACF;AACE;AACF;AACJ;AACM;AACJ;AACA;AACF;AACE;AACF;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACE;AACF;AACE;AACJ;AACI;AAC5C,yDAAe;AACf,6BAA6B,+DAAK;AAClC,6BAA6B,gEAAM;AACnC,6BAA6B,6DAAG;AAChC,6BAA6B,gEAAM;AACnC,6BAA6B,+DAAK;AAClC,6BAA6B,gEAAM;AACnC,6BAA6B,+DAAK;AAClC,6BAA6B,6DAAG;AAChC,6BAA6B,gEAAM;AACnC,6BAA6B,8DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,8DAAG;AAChC,6BAA6B,+DAAI;AACjC,6BAA6B,8DAAG;AAChC,6BAA6B,8DAAG;AAChC,6BAA6B,+DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,+DAAI;AACjC,6BAA6B,gEAAK;AAClC,6BAA6B,+DAAI;AACjC,6BAA6B,gEAAK;AAClC,6BAA6B,8DAAG;AAChC,6BAA6B,gEAAK;AAClC,C;;;;;;;ACrDA;AAAA;AAA4B;AACE;;AAEf;AACf;AACA,MAAM,gEAAM,eAAe,+DAAK;;AAEhC;AACA,CAAC;;;;;;;;ACRc;AACf;AACA;;AAEA;AACA,CAAC;;;;;;;;ACLc;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;ACdc;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;ACdD;AAAA;AAA0B;AACA;;AAEX;AACf;AACA;AACA,mBAAmB,8DAAI;AACvB,mBAAmB,8DAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;AC/BD;AAAsC;;AAEvB;AACf;AACA,uBAAuB,oEAAU;;AAEjC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACbc;AACf;AACA,C;;;;;;;ACFA;AAA4C;;AAE7B;AACf;AACA;AACA;AACA,mBAAmB,kEAAO;AAC1B;AACA;AACA,aAAa,kEAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;AC/BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;;AAEvC;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;;AAEA,aAAa,2EAAU;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;;AAEP;AACA;AACA;;AAEA,YAAY,2EAAU;AACtB;AACA;AACA;;AAEO;AACQ;AACf;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B;AACA,WAAOpV,IAAIsV,OAAX;AACA,WAAOtV,IAAIuV,UAAX;AACD;AACF,CAPD,C;;;;;;ACtLA;AACA,WAAW,mBAAO,CAAC,GAAS;AAC5B,WAAW,mBAAO,CAAC,GAAS;AAC5B,WAAW,mBAAO,CAAC,GAAS;AAC5B,QAAQ,mBAAO,CAAC,CAAQ;;AAExB;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAc,EAAE,mCAAE;AACtB;AACA,KAAK;AAAA,oGAAC;AACN,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;;AAE5C,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;;AAE5C,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C,eAAe,cAAc;AAC7B;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,uCAAuC;AACvC,uCAAuC;AACvC;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;;AAEA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;;AAEA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,0CAA0C;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,0CAA0C;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,4BAA4B;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA;;AAEA,eAAe,sBAAsB;AACrC;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B,cAAc;AACd;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,qBAAqB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,oBAAoB,EAAE;;AAE7D,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,6BAA6B;AACvE;AACA;;AAEA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,8BAA8B,EAAE;AACtE,eAAe,wBAAwB;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,KAAK;AAClB,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,KAAK;AAClB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,gBAAgB;AACtC,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,kCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,eAAe,uBAAuB;AACtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB,EAAE;;AAE7C;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,aAAa;AAC9B;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,wBAAwB;AACrC;AACA;AACA;AACA,cAAc;;AAEd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;;AAEA,iBAAiB,yBAAyB;AAC1C;;AAEA,oBAAoB,QAAQ;AAC5B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,YAAY;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,YAAY;AAC3B;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,YAAY;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,iCAAiC;AACjC,qCAAqC;AACrC,kCAAkC;AAClC,mCAAmC;AACnC,sCAAsC;AACtC;AACA,MAAM;AACN,8BAA8B;AAC9B,kFAAkF;AAClF,mCAAmC,KAAK;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,iCAAiC;AACjC,mCAAmC;AACnC,sBAAsB;AACtB;AACA,yDAAyD;AACzD,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,iCAAiC;AACjC,mCAAmC;AACnC,sBAAsB;AACtB;AACA,0EAA0E;AAC1E,0BAA0B;AAC1B,4BAA4B;AAC5B,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,gCAAgC;AAChC,qCAAqC;AACrC,kCAAkC;AAClC,mCAAmC;AACnC,uCAAuC;AACvC,sCAAsC;AACtC;AACA,MAAM;AACN,8BAA8B;AAC9B,kFAAkF;AAClF,iCAAiC,KAAK;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,gCAAgC;AAChC,gCAAgC;AAChC,kCAAkC;AAClC,mCAAmC;AACnC,uCAAuC;AACvC,sCAAsC;AACtC;AACA,MAAM;AACN,gCAAgC;AAChC,kFAAkF;AAClF,iCAAiC,KAAK;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,qCAAqC;AACrC,kCAAkC;AAClC,mCAAmC;AACnC;AACA,MAAM;AACN,8BAA8B;AAC9B,kFAAkF;AAClF,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,YAAY;AACZ,YAAY;AACZ;AACA,mCAAmC;AACnC,kCAAkC;AAClC,qCAAqC;AACrC,kCAAkC;AAClC,mCAAmC;AACnC,0BAA0B;AAC1B,0BAA0B;AAC1B,yCAAyC;AACzC;AACA,MAAM;AACN,8BAA8B;AAC9B,kFAAkF;AAClF,2DAA2D;AAC3D,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iEAAiE;AACjE,6DAA6D;AAC7D,gDAAgD;AAChD,0EAA0E;AAC1E,gCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,yCAAyC;AACzC,wCAAwC;;AAExC,yCAAyC;AACzC,kCAAkC;AAClC,+BAA+B;;AAE/B,oCAAoC;AACpC,oCAAoC;AACpC,yCAAyC;;AAEzC;AACA,MAAM;AACN,+DAA+D;AAC/D,kDAAkD;AAClD,8DAA8D;AAC9D,kCAAkC;AAClC,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,6BAA6B;AAC7B,4BAA4B;AAC5B,8BAA8B;AAC9B,yCAAyC;AACzC,kDAAkD;AAClD,sDAAsD;AACtD,gDAAgD;;AAEhD,kBAAkB;AAClB,wCAAwC;AACxC,yCAAyC;AACzC,kDAAkD;AAClD,gDAAgD;;AAEhD,wDAAwD;AACxD,4BAA4B;AAC5B,2BAA2B;AAC3B,2CAA2C;AAC3C,MAAM;AACN,yDAAyD;AACzD,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,sBAAsB;AACtB,sFAAsF;AACtF,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,iCAAiC;AACjC,mCAAmC;AACnC,sBAAsB;AACtB;AACA,iCAAiC;AACjC,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,gCAAgC;AAChC,oCAAoC;AACpC,kCAAkC;AAClC,mCAAmC;AACnC,0BAA0B;AAC1B,uCAAuC;AACvC,uCAAuC;AACvC;AACA,MAAM;AACN,+CAA+C;AAC/C,qCAAqC;AACrC,oCAAoC;AACpC,mCAAmC;AACnC,sCAAsC;AACtC;AACA,kDAAkD;AAClD,iCAAiC,KAAK;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,uCAAuC;AACvC,qCAAqC;AACrC,gCAAgC;AAChC,gCAAgC;AAChC,uCAAuC;AACvC,oCAAoC;AACpC,iCAAiC;AACjC,oCAAoC;AACpC,6CAA6C;AAC7C,sBAAsB;AACtB,+BAA+B;AAC/B,qCAAqC;AACrC,yEAAyE;AACzE,MAAM,OAAO;AACb,yEAAyE;AACzE,MAAM;AACN,uEAAuE;AACvE,mCAAmC;AACnC;AACA;AACA,yBAAyB;AACzB,MAAM,iCAAiC;AACvC,qDAAqD;AACrD,MAAM,OAAO;AACb,mFAAmF;AACnF,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,qBAAqB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;;AAEA,mBAAmB;;AAEnB,eAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,UAAU;AACzB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,iBAAiB,gCAAgC;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,YAAY;;AAE7D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,mBAAmB,mBAAmB;AACtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,oBAAoB,EAAE;AAC7D,uCAAuC,oBAAoB,EAAE;;AAE7D;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;;AC5wZD;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC1BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC3BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC3BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;AChDA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,e;AACA,oB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;ACtDA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;AC7BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oD;AACA;AACA;AACA;AACA;;AAEA,cAAc,WAAW,WAAW;AACpC;AACA;AACA;AACA;;AAEA,cAAc,WAAW,YAAY;AACrC;AACA;AACA;AACA;;AAEA,eAAe,YAAY,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACzCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,mBAAmB,YAAY,YAAY;AAC3C,mBAAmB,YAAY,YAAY;AAC3C,mBAAmB,YAAY,aAAa;;AAE5C,qBAAqB,cAAc,cAAc;AACjD,qBAAqB,cAAc,cAAc;AACjD,qBAAqB,cAAc,eAAe;;AAElD;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;ACrCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC9BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC,aAAa;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,YAAY,YAAY;AACvC,eAAe,YAAY,YAAY;AACvC,eAAe,YAAY,aAAa;;AAExC;AACA,wBAAwB,yBAAyB;AACjD,4BAA4B,qBAAqB;AACjD,4BAA4B,yBAAyB;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC/DA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC3CA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC3CA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC3CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;ACpDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACnCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACnCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACnCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;AC9CA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACnCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChCA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACnCA,eAAe,mBAAO,CAAC,GAAY;;AAEnC;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;ACzFA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACbA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;;;;;;ACXA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA,mBAAmB,mBAAO,CAAC,GAAa;AACxC,eAAe,mBAAO,CAAC,GAAS;;AAEhC;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA,iBAAiB,mBAAO,CAAC,GAAc;AACvC,gBAAgB,mBAAO,CAAC,GAAa;AACrC,UAAU,mBAAO,CAAC,GAAO;;AAEzB;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,K;AACA;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AChBA;;AAEA,cAAc,mBAAO,CAAC,GAAW;;AAEjC;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;;;;;;ACXA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA,iBAAiB,mBAAO,CAAC,GAAY;;;;;;;ACArC,iBAAiB,mBAAO,CAAC,GAAY;;;;;;;ACArC,iBAAiB,mBAAO,CAAC,GAAU;;;;;;;ACAnC;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACfA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AChBA,iBAAiB,mBAAO,CAAC,GAAY;;;;;;;ACArC,iBAAiB,mBAAO,CAAC,GAAmB;;;;;;;ACA5C,iBAAiB,mBAAO,CAAC,GAAU;;;;;;;ACAnC,iBAAiB,mBAAO,CAAC,GAAiB;;;;;;;ACA1C;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACdA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;AClBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACnBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACnBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AChBA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AC3BA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC3BA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC3BA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC3BA;;AAEA,UAAU,mBAAO,CAAC,GAAU;;AAE5B;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;AC3CA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACxBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;AC5CA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACpCA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACjCA;;AAEA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACtDA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;AChCA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;AC5BA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;AC9BA;;AAEA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACjCa;;AAEb,WAAW,mBAAO,CAAC,GAAQ;AAC3B,YAAY,mBAAO,CAAC,GAAS;AAC7B,aAAa,mBAAO,CAAC,GAAU;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,yBAAyB,aAAa;AACtC,yBAAyB,aAAa;;;;;;;;AC3CzB;;AAEb;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACjEa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,YAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;AC7Ca;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;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ACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B,WAAW,MAAM;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM,OAAO,KAAK,EAAE,KAAK,EAAE,KAAK;AAC3C,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,MAAM,GAAG,KAAK,EAAE,KAAK;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB,EAAE;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO,KAAK;AACvB,WAAW,OAAO,KAAK;AACvB,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;;AAED;AACA,UAAU;AACV,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;;AAED;AACA,UAAU;AACV,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA,4BAA4B,8BAA8B;;AAE1D;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA,gBAAgB;;AAEhB;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iCAAiC;;AAEjC,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,MAAM;AACvB;AACA,kCAAkC,EAAE;;AAEpC;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gCAAgC,EAAE;;AAElC;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,WAAW;AACtB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,EAAE;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C,2BAA2B,cAAc;AACzC,2BAA2B,gCAAgC;AAC3D,yBAAyB,gCAAgC;AACzD;AACA,yBAAyB,4BAA4B;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB;AACA;AACA;AACA,4BAA4B,gCAAgC;;AAE5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,kBAAkB;AACjC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,WAAW;AAC1B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,kBAAkB;AACjC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,iBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,iBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,mGAAmG,GAAG;AACtG;;AAEA,IAAI,IAA0C;AAC9C,IAAI,mCAAO;AACX;AACA,KAAK;AAAA,oGAAC;AACN,CAAC;AACD;AACA,CAAC;AACD;AACA;;AAEA,CAAC;;;;;;;ACllFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE,KAAK;AACL,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,SAAS;AAC/F,4DAA4D,SAAS;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,wEAAwE;AACxE,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,EAAE;AACpD,sBAAsB;AACtB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA,OAAO;AACP,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C,4EAA4E,UAAU;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,OAAO;AAC7C,gEAAgE,OAAO;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C,wDAAwD,OAAO;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,OAAO;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,wCAAwC;AAC9F;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iFAAiF;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,SAAS,gBAAgB;AACzB;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,EAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,sEAAsE,6BAA6B;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,OAAO;AAChE;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,2CAA2C,QAAQ;AACnD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,oEAAoE,OAAO;AAC3E;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA,gCAAgC,QAAQ;AACxC,yBAAyB,8BAA8B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,OAAO;AACP,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,8BAA8B,8BAA8B;AAC5D;AACA,+CAA+C;AAC/C,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iBAAiB,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,wBAAwB,OAAO;AAC/B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,QAAQ;AACvB,UAAU,OAAO;AACjB,UAAU,OAAO;AACjB;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,8BAA8B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,8BAA8B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,OAAO,2DAA2D,iBAAiB,OAAO;AACnJ;AACA,yDAAyD,OAAO,2DAA2D,iBAAiB,OAAO;AACnJ;AACA,mDAAmD,OAAO,mDAAmD,iBAAiB,OAAO;AACrI;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,0BAA0B,OAAO;AACjC;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,2BAA2B,OAAO;AAClC,uDAAuD,OAAO;AAC9D,0EAA0E,OAAO;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,KAAK;AACL;AACA;AACA,iBAAiB,OAAO;AACxB,0BAA0B,OAAO;AACjC,0BAA0B,OAAO,yBAAyB,iBAAiB,OAAO;AAClF;AACA,iBAAiB,OAAO;AACxB;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,8BAA8B,OAAO;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gCAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,MAAM,qBAAqB,OAAO;AAClD;AACA,SAAS;AACT;AACA,gBAAgB,QAAQ,sBAAsB,OAAO;AACrD;AACA,mBAAmB,cAAc;AACjC,8BAA8B,kBAAkB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA,wDAAwD,OAAO;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA,wDAAwD,OAAO;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,0BAA0B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,MAAM,IAA0C,gBAAgB,oCAAO,EAAE;AAAA;AAAA;AAAA;AAAA,oGAAC,CAAC,4EAA4E;AACvJ,CAAC,G;;;;;;;;;ACj1SD,IAAIhwC,UAAU,mBAAO3sB,CAAC,CAAR,CAAd;AACA,IAAIkC,WAAW,mBAAOlC,CAAC,EAAR,CAAf;AACA,IAAIkB,mBAAmB,mBAAOlB,CAAC,CAAR,EAAsBkB,gBAA7C;;AAEA;;;;;;;;;;;;AAYA,IAAI07D,cAAc,SAAdA,WAAc,CAAU15D,GAAV,EAAe;AAC/B;;AAEA,MAAI,EAAE,gBAAgB05D,WAAlB,CAAJ,EAAoC;AAClC,WAAO,IAAIA,WAAJ,CAAgB15D,GAAhB,CAAP;AACD;AACDhB,WAAS8X,IAAT,CAAc,IAAd,EAAoB9W,GAApB;;AAEAA,QAAMA,OAAO,EAAb;;AAEA,MAAI8kB,SAAS,IAAb;;AAEA;;;;;AAKA,OAAK7kB,GAAL,GAAW,YAAY;AACrB,WAAO,KAAP;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AEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC;;AAEzC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC;;AAEzC,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,iCAAiC,+BAA+B;;AAEhE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kDAAkD;;AAElD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"geo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"geo\"] = factory();\n\telse\n\t\troot[\"geo\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/built\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 258);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9e1d15e9633f9eaf304c","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_export.js\n// module id = 0\n// module chunks = 0 1","function newfunc() {\n  return function () {};\n}\n\n/**\n * Convenient function to define JS inheritance.\n *\n * @param {object} C Child class instance.\n * @param {object} P Parent class instance.\n */\nmodule.exports = function (C, P) {\n  var F = newfunc();\n  F.prototype = P.prototype;\n  C.prototype = new F();\n  C.prototype.constructor = C;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./inherit.js","var $ = require('jquery');\nvar widgets = {\n  dom: {}\n};\nvar layers = {};\nvar layerDefaultFeatures = {};\nvar renderers = {};\nvar features = {};\nvar featureCapabilities = {};\nvar fileReaders = {};\nvar rendererLayerAdjustments = {};\nvar annotations = {};\nvar util = {};\n\n/**\n * Register a new file reader type.\n *\n * @alias geo.registerFileReader\n * @param {string} name Name of the reader to register.  If the name already\n *      exists, the class creation function is replaced.\n * @param {function} func Class creation function.\n */\nutil.registerFileReader = function (name, func) {\n  fileReaders[name] = func;\n};\n\n/**\n * Create a new file reader.\n *\n * @alias geo.createFileReader\n * @param {string} name Name of the reader to create.\n * @param {object} opts Options for the new reader.\n * @returns {geo.fileReader|null} The new reader or null if no such name is\n *      registered.\n */\nutil.createFileReader = function (name, opts) {\n  if (fileReaders.hasOwnProperty(name)) {\n    return fileReaders[name](opts);\n  }\n  return null;\n};\n\n/**\n * Register a new renderer type.\n *\n * @alias geo.registerRenderer\n * @param {string} name Name of the renderer to register.  If the name already\n *      exists, the class creation function is replaced.\n * @param {function} func Class creation function.\n */\nutil.registerRenderer = function (name, func) {\n  renderers[name] = func;\n};\n\n/**\n * Create new instance of the renderer.\n *\n * @alias geo.createRenderer\n * @param {string} name Name of the renderer to create.\n * @param {geo.layer} layer The layer associated with the renderer.\n * @param {HTMLCanvasElement} [canvas] A canvas object to share between\n *      renderers.\n * @param {object} options Options for the new renderer.\n * @returns {geo.renderer|null} The new renderer or null if no such name is\n *      registered.\n */\nutil.createRenderer = function (name, layer, canvas, options) {\n  if (renderers.hasOwnProperty(name)) {\n    var ren = renderers[name](\n      {layer: layer, canvas: canvas, options: options}\n    );\n    ren._init();\n    return ren;\n  }\n  return null;\n};\n\n/**\n * Check if the named renderer is supported.  If not, display a warning and get\n * the name of a fallback renderer.  Ideally, we would pass a list of desired\n * features, and, if the renderer is unavailable, this would choose a fallback\n * that would support those features.\n *\n * @alias geo.checkRenderer\n * @param {string|null} name Name of the desired renderer.\n * @param {boolean} noFallback If truthy, don't recommend a fallback.\n * @returns {string|null|false} The name of the renderer that should be used\n *      or false if no valid renderer can be determined.\n */\nutil.checkRenderer = function (name, noFallback) {\n  if (name === null) {\n    return name;\n  }\n  if (renderers.hasOwnProperty(name)) {\n    var ren = renderers[name];\n    if (!ren.supported || ren.supported()) {\n      return name;\n    }\n    if (!ren.fallback || noFallback) {\n      return false;\n    }\n    var fallback = util.checkRenderer(ren.fallback(), true);\n    if (fallback !== false) {\n      console.warn(name + ' renderer is unavailable, using ' + fallback +\n                   ' renderer instead');\n    }\n    return fallback;\n  }\n  return false;\n};\n\n/**\n * Check if there is a renderer that is supported and supports a list of\n * features.  If not, display a warning.  This picks the first renderer that\n * supports all of the listed features.\n *\n * @alias geo.rendererForFeatures\n * @param {string[]|undefined} featureList A list of features that will be used\n *      with this renderer.  Features are the basic feature names (e.g.,\n *      `'quad'`), or the feature name followed by a required capability (e.g.,\n *      `'quad.image'`).  If more than one feature or more than one capability\n *      of a feature is required, include each feature and capability\n *      combination in the list (e.g., `['quad.image', 'plane']`).  If no\n *      capability is specified for a feature (or that feature was registered\n *      without a capability object), then the feature will match regardless of\n *      capabilities.\n * @returns {string|null|false} The name of the renderer that should be used\n *      or false if no valid renderer can be determined.\n */\nutil.rendererForFeatures = function (featureList) {\n  var preferredRenderers = ['vgl', 'canvas', 'd3', null];\n\n  var renderer, ridx, feature, fidx, capability, available;\n  for (ridx = 0; ridx < preferredRenderers.length; ridx += 1) {\n    renderer = preferredRenderers[ridx];\n    if (util.checkRenderer(renderer, true) === false) {\n      continue;\n    }\n    if (!featureList) {\n      return renderer;\n    }\n    if (!features[renderer]) {\n      continue;\n    }\n    available = true;\n    for (fidx = 0; fidx < featureList.length; fidx += 1) {\n      feature = featureList[fidx];\n      capability = null;\n      if (feature.indexOf('.') >= 0) {\n        capability = feature;\n        feature = feature.substr(0, feature.indexOf('.'));\n      }\n      if (features[renderer][feature] === undefined) {\n        available = false;\n        break;\n      }\n      if (capability && featureCapabilities[renderer][feature] &&\n          !featureCapabilities[renderer][feature][capability]) {\n        available = false;\n        break;\n      }\n    }\n    if (available) {\n      return renderer;\n    }\n  }\n  console.warn('There is no renderer available for the feature list \"' +\n               (featureList || []).join(', ') + '\".');\n  return false;\n};\n\n/**\n * Register a new feature type.\n *\n * @alias geo.registerFeature\n * @param {string} category The feature category -- this is the renderer name.\n * @param {string} name The feature name.\n * @param {function} func A function to call to create the feature.\n * @param {object|undefined} capabilities A map of capabilities that this\n *      feature supports.  If the feature is implemented with different\n *      capabilities in multiple categories (renderers), then the feature\n *      should expose a simple dictionary of supported and unsupported\n *      features.  For instance, the quad feature has color quads, image quads,\n *      and image quads that support full transformations.  The capabilities\n *      should be defined in the base feature in a capabilities object so that\n *      they can be referenced by that rather than an explicit string.\n * @returns {object} if this feature replaces an existing one, this was the\n *      feature that was replaced.  In this case, a warning is issued.\n */\nutil.registerFeature = function (category, name, func, capabilities) {\n  if (!(category in features)) {\n    features[category] = {};\n    featureCapabilities[category] = {};\n  }\n\n  var old = features[category][name];\n  if (old) {\n    console.warn('The ' + category + '.' + name + ' feature is already registered');\n  }\n  features[category][name] = func;\n  featureCapabilities[category][name] = capabilities;\n  return old;\n};\n\n/**\n * Create new instance of a feature.\n *\n * @alias geo.createFeature\n * @param {string} name Name of the feature to create.\n * @param {geo.layer} layer The layer associated with the feature.\n * @param {geo.renderer} renderer The renderer associated with the feature.\n *      This is usually `layer.renderer()`.\n * @param {object} arg Options for the new feature.\n * @returns {geo.feature|null} The new feature or null if no such name is\n *      registered.\n */\nutil.createFeature = function (name, layer, renderer, arg) {\n  var category = renderer.api(),\n      options = {'layer': layer, 'renderer': renderer};\n  if (category in features && name in features[category]) {\n    if (arg !== undefined) {\n      $.extend(true, options, arg);\n    }\n    var feature = features[category][name](options);\n    if (layer.gcs === undefined) {\n      layer.gcs = function () {\n        return layer.map().gcs();\n      };\n    }\n    return feature;\n  }\n  return null;\n};\n\n/**\n * Register a layer adjustment.  Layer adjustments are appiled to specified\n * layers when they are created as a method to mixin specific changes,\n * usually based on the renderer used for that layer.\n *\n * @alias geo.registerLayerAdjustment\n * @param {string} category The category for the adjustment; this is commonly\n *      the renderer name.\n * @param {string} name The name of the adjustement.\n * @param {function} func The function to call when the adjustment is used.\n * @returns {object} if this layer adjustment replaces an existing one, this\n *      was the value that was replaced.  In this case, a warning is issued.\n */\nutil.registerLayerAdjustment = function (category, name, func) {\n  if (!(category in rendererLayerAdjustments)) {\n    rendererLayerAdjustments[category] = {};\n  }\n\n  var old = rendererLayerAdjustments[category][name];\n  if (old) {\n    console.warn('The ' + category + '.' + name + ' layer adjustment is already registered');\n  }\n  rendererLayerAdjustments[category][name] = func;\n  return old;\n};\n\n/**\n * If a layer needs to be adjusted based on the renderer, call the function\n * that adjusts it.\n *\n * @alias geo.adjustLayerForRenderer\n * @param {string} name Name of the layer.\n * @param {object} layer Instantiated layer object.\n */\nutil.adjustLayerForRenderer = function (name, layer) {\n  var rendererName = layer.rendererName();\n  if (rendererName) {\n    if (rendererLayerAdjustments &&\n        rendererLayerAdjustments[rendererName] &&\n        rendererLayerAdjustments[rendererName][name]) {\n      rendererLayerAdjustments[rendererName][name].apply(layer);\n    }\n  }\n};\n\n/**\n * Register a new layer type.\n *\n * @alias geo.registerLayer\n * @param {string} name Name of the layer to register.  If the name already\n *      exists, the class creation function is replaced.\n * @param {function} func Class creation function.\n * @param {string[]} [defaultFeatures] An optional list of feature capabilities\n *      that are required to use this layer.\n */\nutil.registerLayer = function (name, func, defaultFeatures) {\n  layers[name] = func;\n  layerDefaultFeatures[name] = defaultFeatures;\n};\n\n/**\n * Create new instance of the layer.\n *\n * @alias geo.createLayer\n * @param {string} name Name of the layer to create.\n * @param {geo.map} map The map class instance that owns the layer.\n * @param {object} arg Options for the new layer.\n * @returns {geo.layer|null} The new layer or null if no such name is\n *      registered.\n */\nutil.createLayer = function (name, map, arg) {\n  // Default renderer is vgl\n  var options = {map: map},\n      layer = null;\n\n  if (name in layers) {\n    if (!arg.renderer && !arg.features && layerDefaultFeatures) {\n      options.features = layerDefaultFeatures[name];\n    }\n    if (arg !== undefined) {\n      $.extend(true, options, arg);\n    }\n    layer = layers[name](options);\n    layer.layerName = name;\n    layer._init();\n    return layer;\n  } else {\n    return null;\n  }\n};\n\n/**\n * Register a new widget type.\n *\n * @alias geo.registerWidget\n * @param {string} category A category for this widget.  This is usually\n *      `'dom'`.\n * @param {string} name The name of the widget to register.\n * @param {function} func Class creation function.\n * @returns {object} If this widget replaces an existing one, this was the\n *      value that was replaced.  In this case, a warning is issued.\n */\nutil.registerWidget = function (category, name, func) {\n  if (!(category in widgets)) {\n    widgets[category] = {};\n  }\n\n  var old = widgets[category][name];\n  if (old) {\n    console.warn('The ' + category + '.' + name + ' widget is already registered');\n  }\n  widgets[category][name] = func;\n  return old;\n};\n\n/**\n * Create new instance of a dom widget.\n *\n * @alias geo.createWidget\n * @param {string} name Name of the widget to create.\n * @param {geo.layer} layer The layer associated with the widget.\n * @param {object} arg Options for the new widget.\n * @returns {geo.widget} The new widget.\n */\nutil.createWidget = function (name, layer, arg) {\n  var options = {\n    layer: layer\n  };\n\n  if (name in widgets.dom) {\n    if (arg !== undefined) {\n      $.extend(true, options, arg);\n    }\n\n    return widgets.dom[name](options);\n  }\n\n  throw new Error('Cannot create unknown widget ' + name);\n};\n\n/**\n * Register a new annotation type.\n *\n * @alias geo.registerAnnotation\n * @param {string} name The annotation name.\n * @param {function} func A function to call to create the annotation.\n * @param {object|undefined} features A map of features that are used by this\n *      annotation.  Each key is a feature that is used.  If the value is true,\n *      the that feature is always needed.  If a list, then it is the set of\n *      annotation states for which that feature is required.  These can be\n *      used to pick an appropriate renderer when creating an annotation layer.\n * @returns {object} if this annotation replaces an existing one, this was the\n *      value that was replaced.  In this case, a warning is issued.\n */\nutil.registerAnnotation = function (name, func, features) {\n  var old = annotations[name];\n  if (old) {\n    console.warn('The ' + name + ' annotation is already registered');\n  }\n  annotations[name] = {func: func, features: features || {}};\n  return old;\n};\n\n/**\n * Create an annotation based on a registered type.\n *\n * @alias geo.createAnnotation\n * @param {string} name The annotation name\n * @param {object} options The options for the annotation.\n * @returns {object} the new annotation.\n */\nutil.createAnnotation = function (name, options) {\n  if (!annotations[name]) {\n    console.warn('The ' + name + ' annotation is not registered');\n    return;\n  }\n  var annotation = annotations[name].func(options);\n  return annotation;\n};\n\n/**\n * Get a list of registered annotation types.\n *\n * @alias geo.listAnnotations\n * @returns {string[]} A list of registered annotations.\n */\nutil.listAnnotations = function () {\n  return Object.keys(annotations);\n};\n\n/**\n * Get a list of required features for a set of annotations.\n *\n * @alias geo.featuresForAnnotations\n * @param {string[]|object|undefined} annotationList A list of annotations that\n *   will be used.  Instead of a list, if this is an object, the keys are the\n *   annotation names, and the values are each a list of modes that will be\n *   used with that annotation.  For example, ['polygon', 'rectangle'] lists\n *   features required to show those annotations in any mode,  whereas\n *   {polygon: [annotationState.done], rectangle: [annotationState.done]} only\n *   lists features that are needed to show the completed annotations.\n * @returns {string[]} a list of features needed for the specified annotations.\n *   There may be duplicates in the list.\n */\nutil.featuresForAnnotations = function (annotationList) {\n  var features = [];\n\n  var annList = Array.isArray(annotationList) ? annotationList : Object.keys(annotationList);\n  annList.forEach(function (ann) {\n    if (!annotations[ann]) {\n      return;\n    }\n    Object.keys(annotations[ann].features).forEach(function (feature) {\n      if (Array.isArray(annotationList) || annotationList[ann] === true ||\n          !Array.isArray(annotations[ann].features[feature])) {\n        features.push(feature);\n      } else {\n        annotationList[ann].forEach(function (state) {\n          if ($.inArray(state, annotations[ann].features[feature]) >= 0) {\n            features.push(feature);\n          }\n        });\n      }\n    });\n  });\n  return features;\n};\n\n/**\n * Check if there is a renderer that is supported and supports a list of\n * annotations.  If not, display a warning.  This generates a list of required\n * features, then picks the first renderer that supports all of these features.\n *\n * @alias geo.rendererForAnnotations\n * @param {string[]|object|undefined} annotationList A list of annotations that\n *   will be used with this renderer.  Instead of a list, if this is an object,\n *   the keys are the annotation names, and the values are each a list of modes\n *   that will be used with that annotation.  See featuresForAnnotations for\n *   more details.\n * @returns {string|null|false} the name of the renderer that should be used or\n *   false if no valid renderer can be determined.\n */\nutil.rendererForAnnotations = function (annotationList) {\n  return util.rendererForFeatures(util.featuresForAnnotations(annotationList));\n};\n\n/**\n * Expose the various registries so that the can be examined to see what\n * things are registered.\n *\n * @namespace geo.registries\n */\nutil.registries = {\n  annotations: annotations,\n  features: features,\n  featureCapabilities: featureCapabilities,\n  fileReaders: fileReaders,\n  layers: layers,\n  renderers: renderers,\n  widgets: widgets\n};\n\nmodule.exports = util;\n\n\n\n// WEBPACK FOOTER //\n// ./registry.js","/*!\n * jQuery JavaScript Library v3.3.1\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2018-01-20T17:24Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar document = window.document;\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n      // Support: Chrome <=57, Firefox <=52\n      // In some browsers, typeof returns \"function\" for HTML <object> elements\n      // (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n      // We don't want to classify *any* DOM node as a function.\n      return typeof obj === \"function\" && typeof obj.nodeType !== \"number\";\n  };\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, doc, node ) {\n\t\tdoc = doc || document;\n\n\t\tvar i,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\t\t\t\tif ( node[ i ] ) {\n\t\t\t\t\tscript[ i ] = node[ i ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.3.1\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android <=4.0 only\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\n\t\t/* eslint-disable no-unused-vars */\n\t\t// See https://github.com/eslint/eslint/issues/6125\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tDOMEval( code );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android <=4.0 only\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.3\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-08-08\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tdisabledAncestor = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && (\"form\" in elem || \"label\" in elem);\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = \"#\" + nid + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement(\"fieldset\");\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t\tdisabledAncestor( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( preferredDoc !== document &&\n\t\t(subWindow = document.defaultView) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( el ) {\n\t\tel.appendChild( document.createComment(\"\") );\n\t\treturn !el.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( (elem = elems[i++]) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode(\"id\");\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( el ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll(\":enabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll(\":disabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( el ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn (sel + \"\").replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( (oldCache = uniqueCache[ key ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( el ) {\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement(\"fieldset\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( el ) {\n\treturn el.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n};\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n        if ( nodeName( elem, \"iframe\" ) ) {\n            return elem.contentDocument;\n        }\n\n        // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n        // Treat the template element as a regular one in browsers that\n        // don't support it.\n        if ( nodeName( elem, \"template\" ) ) {\n            elem = elem.content || elem;\n        }\n\n        return jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the master Deferred\n\t\t\tmaster = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tmaster.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( master.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn master.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), master.reject );\n\t\t}\n\n\t\treturn master.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\tvalue :\n\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (#9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tjQuery.contains( elem.ownerDocument, elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// Support: IE <=9 only\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\n// Support: IE <=9 only\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, contains, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n} )();\nvar documentElement = document.documentElement;\n\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 only\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tvar event = jQuery.event.fix( nativeEvent );\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\t\t\thandlers = ( dataPriv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\n\twhich: function( event ) {\n\t\tvar button = event.button;\n\n\t\t// Add which for key events\n\t\tif ( event.which == null && rkeyEvent.test( event.type ) ) {\n\t\t\treturn event.charCode != null ? event.charCode : event.keyCode;\n\t\t}\n\n\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\tif ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {\n\t\t\tif ( button & 1 ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ( button & 2 ) {\n\t\t\t\treturn 3;\n\t\t\t}\n\n\t\t\tif ( button & 4 ) {\n\t\t\t\treturn 2;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn event.which;\n\t}\n}, jQuery.event.addProp );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t/* eslint-disable max-len */\n\n\t// See https://github.com/eslint/eslint/issues/3229\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n\n\t/* eslint-enable */\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.access( src );\n\t\tpdataCur = dataPriv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), doc, node );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = div.offsetWidth === 36 || \"absolute\";\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, #12537)\n\t//   .css('--customProperty) (#3144)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trcustomProp = /^--/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a property mapped along what jQuery.cssProps suggests or to\n// a vendor prefixed property.\nfunction finalPropName( name ) {\n\tvar ret = jQuery.cssProps[ name ];\n\tif ( !ret ) {\n\t\tret = jQuery.cssProps[ name ] = vendorPropName( name ) || name;\n\t}\n\treturn ret;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\tif ( box === \"margin\" ) {\n\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\t\t) );\n\t}\n\n\treturn delta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\t\tval = curCSS( elem, dimension, styles ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox;\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\t// Check for style in case a browser which returns unreliable values\n\t// for getComputedStyle silently falls back to the reliable elem.style\n\tvalueIsBorderBox = valueIsBorderBox &&\n\t\t( support.boxSizingReliable() || val === elem.style[ dimension ] );\n\n\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t// This happens for inline elements with no explicit setting (gh-3571)\n\t// Support: Android <=4.1 - 4.3 only\n\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\tif ( val === \"auto\" ||\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) {\n\n\t\tval = elem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ];\n\n\t\t// offsetWidth/offsetHeight provide border-box values\n\t\tvalueIsBorderBox = true;\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\t\t\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra && boxModelAdjustment(\n\t\t\t\t\telem,\n\t\t\t\t\tdimension,\n\t\t\t\t\textra,\n\t\t\t\t\tisBorderBox,\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && support.scrollboxSize() === styles.position ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = classesToArray( value );\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = Date.now();\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\toriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce++ ) + uncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" ).prop( {\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t} ).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\t\tfunction( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( ( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( !noGlobal ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/jquery/dist/jquery.js\n// module id = 3\n// module chunks = 0 1","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_an-object.js\n// module id = 4\n// module chunks = 0 1","var $ = require('jquery');\nvar proj4 = require('proj4');\nproj4 = proj4.__esModule ? proj4.default : proj4;\n\nvar throttle = require('./throttle');\nvar mockVGL = require('./mockVGL');\nvar DistanceGrid = require('./distanceGrid.js');\nvar ClusterGroup = require('./clustering.js');\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\nvar svgForeignObject = '<svg xmlns=\"http://www.w3.org/2000/svg\">' +\n  '<foreignObject width=\"100%\" height=\"100%\">' +\n  '</foreignObject>' +\n  '</svg>';\n\nvar m_timingData = {},\n    m_timingKeepRecent = 200,\n    m_threshold = 15,\n    m_originalRequestAnimationFrame,\n    m_htmlToImageSupport;\n\n/**\n * @typedef {object} geo.util.cssColorConversionRecord\n * @property {string} name The name of the color conversion.\n * @property {RegEx} regex A regex that, if it matches the color string, will\n *      cause the process function to be invoked.\n * @property {function} process A function that takes (`color`, `match`) with\n *      the original color string and the results of matching the regex using\n *      the regex's `exec` function.  It outputs a {@link geo.geoColorObject}\n *      color object or the original color string if there is still a parsing\n *      failure.\n */\n\n/**\n * Takes a variable number of arguments and returns the first numeric value\n * it finds.\n *\n * @param {...*} var_args Any number of arguments.\n * @returns {number} The first numeric argument, or `undefined` if there are no\n *      numeric arguments.\n * @private\n */\nfunction setNumeric() {\n  var i;\n  for (i = 0; i < arguments.length; i += 1) {\n    if (isFinite(arguments[i])) {\n      return arguments[i];\n    }\n  }\n}\n\n/**\n * Contains utility classes and methods used by geojs.\n * @namespace geo.util\n */\nvar util = module.exports = {\n  DistanceGrid: DistanceGrid,\n  ClusterGroup: ClusterGroup,\n\n  /**\n   * Check if a point is inside of a polygon.\n   * Algorithm description:\n   *   http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n   * The point and polygon must be in the same coordinate system.\n   *\n   * @param {geo.point2D} point The test point.\n   * @param {geo.point2D[]} outer The outer boundary of the polygon.\n   * @param {Array.<geo.point2D[]>} [inner] A list of inner boundaries\n   *    (holes).\n   * @param {object} [range] If specified, this is the extent of the outer\n   *    polygon and is used for early detection.\n   * @param {geo.point2D} range.min The minimum value of coordinates in\n   *    the outer polygon.\n   * @param {geo.point2D} range.max The maximum value of coordinates in\n   *    the outer polygon.\n   * @returns {boolean} `true` if the point is inside or on the border of the\n   *    polygon.\n   * @memberof geo.util\n   */\n  pointInPolygon: function (point, outer, inner, range) {\n    var inside = false, n = outer.length, i, j;\n\n    if (range && range.min && range.max) {\n      if (point.x < range.min.x || point.y < range.min.y ||\n          point.x > range.max.x || point.y > range.max.y) {\n        return;\n      }\n    }\n\n    if (n < 3) {\n      // we need 3 coordinates for this to make sense\n      return false;\n    }\n\n    for (i = 0, j = n - 1; i < n; j = i, i += 1) {\n      if (((outer[i].y > point.y) !== (outer[j].y > point.y)) &&\n          (point.x < (outer[j].x - outer[i].x) *\n          (point.y - outer[i].y) / (outer[j].y - outer[i].y) + outer[i].x)) {\n        inside = !inside;\n      }\n    }\n\n    if (inner && inside) {\n      inner.forEach(function (hole) {\n        inside = inside && !util.pointInPolygon(point, hole);\n      });\n    }\n\n    return inside;\n  },\n\n  /**\n   * Return a point in the basis of the triangle.  If the point is located on\n   * a vertex of the triangle, it will be at `vert0`: (0, 0), `vert1`:\n   * (1, 0), `vert2`: (0, 1).  If it is within the triangle, its coordinates\n   * will be 0 <= x <= 1, 0 <= y <= 1, x + y <= 1.  The point and vertices\n   * must be in the same coordinate system.\n   *\n   * @param {geo.point2D} point The point to convert.\n   * @param {geo.point2D} vert0 Vertex 0 of the triangle.\n   * @param {geo.point2D} vert1 Vertex 1 (x direction) of the triangle.\n   * @param {geo.point2D} vert2 Vertex 2 (y direction) of the triangle.\n   * @returns {geo.point2D} The point in the triangle basis, or `undefined`\n   *    if the triangle is degenerate.\n   * @memberof geo.util\n   */\n  pointTo2DTriangleBasis: function (point, vert0, vert1, vert2) {\n    var a = vert1.x - vert0.x,\n        b = vert2.x - vert0.x,\n        c = vert1.y - vert0.y,\n        d = vert2.y - vert0.y,\n        x = point.x - vert0.x,\n        y = point.y - vert0.y,\n        det = a * d - b * c;\n    if (det) {\n      return {x: (x * d - y * b) / det, y: (x * -c + y * a) / det};\n    }\n  },\n\n  /**\n   * Check if an object an HTML Image element that is fully loaded.\n   *\n   * @param {object} img An object that might be an HTML Image element.\n   * @param {boolean} [allowFailedImage] If `true`, an image element that has\n   *     a source and has failed to load is also considered 'ready' in the\n   *     sense that it isn't expected to change to a better state.\n   * @returns {boolean} `true` if this is an image that is ready.\n   * @memberof geo.util\n   */\n  isReadyImage: function (img, allowFailedImage) {\n    if (img instanceof Image && img.complete && img.src) {\n      if ((img.naturalWidth && img.naturalHeight) || allowFailedImage) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   * Check if an object an HTMLVideoElement element that is loaded.\n   *\n   * @param {object} vid An object that might be an HTMLVideoElement.\n   * @param {boolean} [allowFailedVideo] If `true`, an viedo element that has\n   *     a source and has failed to load is also considered 'ready' in the\n   *     sense that it isn't expected to change to a better state.\n   * @returns {boolean} `true` if this is a video that is ready.\n   * @memberof geo.util\n   */\n  isReadyVideo: function (vid, allowFailedVideo) {\n    if (vid instanceof HTMLVideoElement && vid.src &&\n        vid.HAVE_CURRENT_DATA !== undefined) {\n      if ((vid.videoWidth && vid.videoHeight && vid.readyState >= vid.HAVE_CURRENT_DATA) ||\n          (allowFailedVideo && vid.error)) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   * Test if an object is a function.\n   *\n   * @param {object} f An object that might be a function.\n   * @returns {boolean} `true` if the object is a function.\n   * @memberof geo.util\n   */\n  isFunction: function (f) {\n    return typeof f === 'function';\n  },\n\n  /**\n   * Return a function.  If the supplied object is a function, return it.\n   * Otherwise, return a function that returns the argument.\n   *\n   * @param {object} f An object that might be a function.\n   * @returns {function} A function.  Either `f` or a function that returns\n   *    `f`.\n   * @memberof geo.util\n   */\n  ensureFunction: function (f) {\n    if (util.isFunction(f)) {\n      return f;\n    } else {\n      return function () { return f; };\n    }\n  },\n\n  /**\n   * Check if a value coerces to a number that is finite, not a NaN, and not\n   * `null`, `false`, or the empty string.\n   *\n   * @param {object} val The value to check.\n   * @returns {boolean} True if `val` is a non-null, non-false, finite number.\n   */\n  isNonNullFinite: function (val) {\n    return isFinite(val) && val !== null && val !== false && val !== '';\n  },\n\n  /**\n   * Return a random string of length n || 8.  The string consists of\n   * mixed-case ASCII alphanumerics.\n   *\n   * @param {number} [n=8] The length of the string to return.\n   * @returns {string} A string of random characters.\n   * @memberof geo.util\n   */\n  randomString: function (n) {\n    var s, i, r;\n    n = n || 8;\n    s = '';\n    for (i = 0; i < n; i += 1) {\n      r = Math.floor(Math.random() * chars.length);\n      s += chars.substring(r, r + 1);\n    }\n    return s;\n  },\n\n  /**\n   * Convert a color to a standard rgb object.  Allowed inputs:\n   *   - rgb object with optional 'a' (alpha) value.\n   *   - css color name\n   *   - #rrggbb, #rrggbbaa, #rgb, #rgba hexadecimal colors\n   *   - rgb(), rgba(), hsl(), and hsla() css colors\n   *   - transparent\n   * The output object always contains r, g, b on a scale of [0-1].  If an\n   * alpha value is specified, the output will also contain an 'a' value on a\n   * scale of [0-1].  Objects already in rgb format are not checked to make\n   * sure that all parameters are in the range of [0-1], but string inputs\n   * are so validated.\n   *\n   * @param {geo.geoColor} color Any valid color input.\n   * @returns {geo.geoColorObject} An rgb color object, possibly with an 'a'\n   *    value.  If the input cannot be converted to a valid color, the input\n   *    value is returned.\n   * @memberof geo.util\n   */\n  convertColor: function (color) {\n    if (color === undefined || color === null || (color.r !== undefined &&\n        color.g !== undefined && color.b !== undefined)) {\n      return color;\n    }\n    var opacity;\n    if (typeof color === 'string') {\n      var lowerColor = color.toLowerCase();\n      if (util.cssColors.hasOwnProperty(lowerColor)) {\n        color = util.cssColors[lowerColor];\n      } else if (color.charAt(0) === '#') {\n        if (color.length === 4 || color.length === 5) {\n          /* interpret values of the form #rgb as #rrggbb and #rgba as\n           * #rrggbbaa */\n          if (color.length === 5) {\n            opacity = parseInt(color.slice(4), 16) / 0xf;\n          }\n          color = parseInt(color.slice(1, 4), 16);\n          color = (color & 0xf00) * 0x1100 + (color & 0xf0) * 0x110 + (color & 0xf) * 0x11;\n        } else if (color.length === 7 || color.length === 9) {\n          if (color.length === 9) {\n            opacity = parseInt(color.slice(7), 16) / 0xff;\n          }\n          color = parseInt(color.slice(1, 7), 16);\n        }\n      } else if (lowerColor === 'transparent') {\n        opacity = color = 0;\n      } else if (lowerColor.indexOf('(') >= 0) {\n        for (var idx = 0; idx < util.cssColorConversions.length; idx += 1) {\n          var match = util.cssColorConversions[idx].regex.exec(lowerColor);\n          if (match) {\n            return util.cssColorConversions[idx].process(lowerColor, match);\n          }\n        }\n      }\n    }\n    if (isFinite(color)) {\n      color = {\n        r: ((color & 0xff0000) >> 16) / 255,\n        g: ((color & 0xff00) >> 8) / 255,\n        b: ((color & 0xff)) / 255\n      };\n    }\n    if (opacity !== undefined && color && color.r !== undefined) {\n      color.a = opacity;\n    }\n    return color;\n  },\n\n  /**\n   * Convert a color (possibly with opacity) and an optional opacity value to\n   * a color object that always has opacity.  The opacity is guaranteed to be\n   * within [0-1].  A valid color object is always returned.\n   *\n   * @param {geo.geoColor} [color] Any valid color input.  If an invalid value\n   *    or no value is supplied, the `defaultColor` is used.\n   * @param {number} [opacity=1] A value from [0-1].  This is multipled with\n   *    the opacity from `color`.\n   * @param {geo.geoColorObject} [defaultColor={r: 0, g: 0, b: 0}] The color\n   *    to use if an invalid color is supplied.\n   * @returns {geo.geoColorObject} An rgba color object.\n   * @memberof geo.util\n   */\n  convertColorAndOpacity: function (color, opacity, defaultColor) {\n    color = util.convertColor(color);\n    if (!color || color.r === undefined || color.g === undefined || color.b === undefined) {\n      color = util.convertColor(defaultColor || {r: 0, g: 0, b: 0});\n    }\n    if (!color || color.r === undefined || color.g === undefined || color.b === undefined) {\n      color = {r: 0, g: 0, b: 0};\n    }\n    color = {\n      r: isFinite(color.r) && color.r >= 0 ? (color.r <= 1 ? +color.r : 1) : 0,\n      g: isFinite(color.g) && color.g >= 0 ? (color.g <= 1 ? +color.g : 1) : 0,\n      b: isFinite(color.b) && color.b >= 0 ? (color.b <= 1 ? +color.b : 1) : 0,\n      a: util.isNonNullFinite(color.a) && color.a >= 0 && color.a < 1 ? +color.a : 1\n    };\n    if (util.isNonNullFinite(opacity) && opacity < 1) {\n      color.a = opacity <= 0 ? 0 : color.a * opacity;\n    }\n    return color;\n  },\n\n  /**\n   * Convert a color to a six or eight digit hex value prefixed with #.\n   *\n   * @param {geo.geoColorObject} color The color object to convert.\n   * @param {boolean} [allowAlpha] If truthy and `color` has a defined `a`\n   *    value, include the alpha channel in the output.  If `'needed'`, only\n   *    include the alpha channel if it is set and not 1.\n   * @returns {string} A color string.\n   * @memberof geo.util\n   */\n  convertColorToHex: function (color, allowAlpha) {\n    var rgb = util.convertColor(color), value;\n    if (!rgb.r && !rgb.g && !rgb.b) {\n      value = '#000000';\n    } else {\n      value = '#' + ((1 << 24) + (Math.round(rgb.r * 255) << 16) +\n                     (Math.round(rgb.g * 255) << 8) +\n                      Math.round(rgb.b * 255)).toString(16).slice(1);\n    }\n    if (rgb.a !== undefined && allowAlpha && (rgb.a < 1 || allowAlpha !== 'needed')) {\n      value += (256 + Math.round(rgb.a * 255)).toString(16).slice(1);\n    }\n    return value;\n  },\n  /**\n   * Convert a color to a css rgba() value.\n   *\n   * @param {geo.geoColorObject} color The color object to convert.\n   * @returns {string} A color string.\n   * @memberof geo.util\n   */\n  convertColorToRGBA: function (color) {\n    var rgb = util.convertColor(color);\n    if (!rgb) {\n      rgb = {r: 0, g: 0, b: 0};\n    }\n    if (!util.isNonNullFinite(rgb.a) || rgb.a > 1) {\n      rgb.a = 1;\n    }\n    return 'rgba(' + Math.round(rgb.r * 255) + ', ' + Math.round(rgb.g * 255) +\n           ', ' + Math.round(rgb.b * 255) + ', ' + +((+rgb.a).toFixed(5)) + ')';\n  },\n\n  /**\n   * Normalize a coordinate object into {@link geo.geoPosition} form.  The\n   * input can be a 2 or 3 element array or an object with a variety of\n   * properties.\n   *\n   * @param {object|array} p The point to convert.\n   * @returns {geo.geoPosition} The point as an object with `x`, `y`, and `z`\n   *    properties.\n   * @memberof geo.util\n   */\n  normalizeCoordinates: function (p) {\n    p = p || {};\n    if (Array.isArray(p)) {\n      return {\n        x: p[0],\n        y: p[1],\n        z: p[2] || 0\n      };\n    }\n    return {\n      x: setNumeric(\n        p.x,\n        p.longitude,\n        p.lng,\n        p.lon,\n        0\n      ),\n      y: setNumeric(\n        p.y,\n        p.latitude,\n        p.lat,\n        0\n      ),\n      z: setNumeric(\n        p.z,\n        p.elevation,\n        p.elev,\n        p.height,\n        0\n      )\n    };\n  },\n\n  /**\n   * Create an integer array contains elements from one integer to another\n   * integer.\n   *\n   * @param {number} start The start integer.\n   * @param {number} end The end integer.\n   * @param {number} [step=1] The step.\n   * @returns {number[]} An array of integers.\n   */\n  range: function (start, end, step) {\n    step = step || 1;\n    var results = [];\n    for (var i = start; i <= end; i += step) {\n      results.push(i);\n    }\n    return results;\n  },\n\n  /**\n   * Compare two arrays and return if their contents are equal.\n   * @param {array} a1 First array to compare.\n   * @param {array} a2 Second array to compare.\n   * @returns {boolean} `true` if the contents of the arrays are equal.\n   * @memberof geo.util\n   */\n  compareArrays: function (a1, a2) {\n    return (a1.length === a2.length && a1.every(function (el, idx) {\n      return el === a2[idx];\n    }));\n  },\n\n  /**\n   * Create a `vec3` that is always an array.  This should only be used if it\n   * will not be used in a WebGL context.  Plain arrays usually use 64-bit\n   * float values, whereas `vec3` defaults to 32-bit floats.\n   *\n   * @returns {array} Zeroed-out vec3 compatible array.\n   * @memberof geo.util\n   */\n  vec3AsArray: function () {\n    return [0, 0, 0];\n  },\n\n  /**\n   * Create a `mat3` that is always an array.  This should only be used if it\n   * will not be used in a WebGL context.  Plain arrays usually use 64-bit\n   * float values, whereas `mat3` defaults to 32-bit floats.\n   *\n   * @returns {array} Identity `mat3` compatible array.\n   * @memberof geo.util\n   */\n  mat3AsArray: function () {\n    return [\n      1, 0, 0,\n      0, 1, 0,\n      0, 0, 1\n    ];\n  },\n\n  /**\n   * Create a `mat4` that is always an array.  This should only be used if it\n   * will not be used in a WebGL context.  Plain arrays usually use 64-bit\n   * float values, whereas `mat4` defaults to 32-bit floats.\n   *\n   * @returns {array} Identity `mat4` compatible array.\n   * @memberof geo.util\n   */\n  mat4AsArray: function () {\n    return [\n      1, 0, 0, 0,\n      0, 1, 0, 0,\n      0, 0, 1, 0,\n      0, 0, 0, 1\n    ];\n  },\n\n  /**\n   * Get a buffer for a vgl geometry source.  If a buffer already exists and\n   * is the correct size, return it.  Otherwise, allocate a new buffer; any\n   * data in an old buffer is discarded.\n   *\n   * @param {vgl.geometryData} geom The geometry to reference and modify.\n   * @param {string} srcName The name of the source.\n   * @param {number} len The number of elements for the array.\n   * @returns {Float32Array} A buffer for the named source.\n   * @memberof geo.util\n   */\n  getGeomBuffer: function (geom, srcName, len) {\n    var src = geom.sourceByName(srcName), data;\n\n    data = src.data();\n    if (data instanceof Float32Array && data.length === len) {\n      return data;\n    }\n    data = new Float32Array(len);\n    src.setData(data);\n    return data;\n  },\n\n  /**\n   * Ensure that the input and modifiers properties of all actions are\n   * objects, not plain strings.\n   *\n   * @param {geo.actionRecord[]} actions An array of actions to adjust as\n   *    needed.\n   * @memberof geo.util\n   */\n  adjustActions: function (actions) {\n    var action, i;\n    for (i = 0; i < actions.length; i += 1) {\n      action = actions[i];\n      if ($.type(action.input) === 'string') {\n        var actionEvents = {};\n        actionEvents[action.input] = true;\n        action.input = actionEvents;\n      }\n      if (!action.modifiers) {\n        action.modifiers = {};\n      }\n      if ($.type(action.modifiers) === 'string') {\n        var actionModifiers = {};\n        actionModifiers[action.modifiers] = true;\n        action.modifiers = actionModifiers;\n      }\n    }\n  },\n\n  /**\n   * Add an action to the list of handled actions.\n   *\n   * @param {geo.actionRecord[]} actions An array of actions to adjust as\n   *    needed.\n   * @param {geo.actionRecord} action An object defining the action.  Use\n   *    `action`, `name`, and `owner` to make this entry distinct if it will\n   *    need to be removed later.\n   * @param {boolean} toEnd The action is added at the beginning of the\n   *    actions list unless `toEnd` is `true`.  Earlier actions prevent later\n   *    actions with the similar input and modifiers.\n   * @memberof geo.util\n   */\n  addAction: function (actions, action, toEnd) {\n    if (toEnd) {\n      actions.push(action);\n    } else {\n      actions.unshift(action);\n    }\n    util.adjustActions(actions);\n  },\n\n  /**\n   * Check if an action is in the actions list.  An action matches if the\n   * `action`, `name`, and `owner` match.  A `null` or `undefined` value will\n   * match all actions.  If using a {@link geo.actionRecord} object, this is\n   * the same as passing (`action.action`, `action.name`, `action.owner`).\n   *\n   * @param {geo.actionRecord[]} actions An array of actions to search.\n   * @param {geo.actionRecord|string} action Either an action object or the\n   *    name of an action.\n   * @param {string} [name] Optional name associated with the action.\n   * @param {string} [owner] Optional owner associated with the action.\n   * @returns {geo.actionRecord?} The first matching action or `null`.\n   * @memberof geo.util\n   */\n  hasAction: function (actions, action, name, owner) {\n    if (action && action.action) {\n      name = action.name;\n      owner = action.owner;\n      action = action.action;\n    }\n    for (var i = 0; i < actions.length; i += 1) {\n      if ((!action || actions[i].action === action) &&\n          (!name || actions[i].name === name) &&\n          (!owner || actions[i].owner === owner)) {\n        return actions[i];\n      }\n    }\n    return null;\n  },\n\n  /**\n   * Remove all matching actions.  Actions are matched as with `hasAction`.\n   *\n   * @param {geo.actionRecord[]} actions An array of actions to adjust as\n   *    needed.\n   * @param {geo.actionRecord|string} action Either an action object or the\n   *    name of an action.\n   * @param {string} [name] Optional name associated with the action.\n   * @param {string} [owner] Optional owner associated with the action.\n   * @returns {number} The number of actions that were removed.\n   * @memberof geo.util\n   */\n  removeAction: function (actions, action, name, owner) {\n    var found, removed = 0;\n\n    do {\n      found = util.hasAction(actions, action, name, owner);\n      if (found) {\n        actions.splice($.inArray(found, actions), 1);\n        removed += 1;\n      }\n    } while (found);\n    return removed;\n  },\n\n  /**\n   * Determine if the current inputs and modifiers match a known action.\n   *\n   * @param {object} inputs Aan object where each input that is currently\n   *    active is truthy.  Common inputs are `left`, `right`, `middle`,\n   *    `wheel`, `pan`, `rotate`.\n   * @param {object} modifiers An object where each currently applied\n   *    modifier is truthy.  Common modifiers are `shift`, `ctrl`, `alt`,\n   *    `meta`.\n   * @param {geo.actionRecord[]} actions A list of actions to compare to the\n   *    inputs and modifiers.  The first action that matches will be\n   *    returned.\n   * @returns {geo.actionRecord} A matching action or `undefined`.\n   * @memberof geo.util\n   */\n  actionMatch: function (inputs, modifiers, actions) {\n    var matched;\n\n    /* actions must have already been processed by adjustActions */\n    if (actions.some(function (action) {\n      for (var input in action.input) {\n        if (action.input.hasOwnProperty(input)) {\n          if ((action.input[input] === false && inputs[input]) ||\n              (action.input[input] && !inputs[input])) {\n            return false;\n          }\n        }\n      }\n      for (var modifier in action.modifiers) {\n        if (action.modifiers.hasOwnProperty(modifier)) {\n          if ((action.modifiers[modifier] === false && modifiers[modifier]) ||\n              (action.modifiers[modifier] && !modifiers[modifier])) {\n            return false;\n          }\n        }\n      }\n      matched = action;\n      return true;\n    })) {\n      return matched;\n    }\n  },\n\n  /**\n   * Return recommended defaults for map parameters and osm or tile layer\n   * paramaters where the expected intent is to use the map in pixel\n   * coordinates (upper left is (0, 0), lower right is (`width`, `height`).\n   *\n   * @example <caption>The returned objects can be modified or\n   *    extended.</caption>\n   * var results = pixelCoordinateParams('#map', 10000, 9000);\n   * var map = geo.map($.extend(results.map, {clampZoom: false}));\n   * map.createLayer('osm', results.layer);\n   *\n   * @param {string} [node] DOM selector for the map container.\n   * @param {number} width Width of the whole map contents in pixels.\n   * @param {number} height Height of the whole map contents in pixels.\n   * @param {number} [tileWidth] If an osm or tile layer is going to be used,\n   *    the width of a tile.\n   * @param {number} [tileHeight] If an osm or tile layer is going to be used,\n   *    the height of a tile.\n   * @returns {object} An object with `map` and `layer` properties.  `map` is\n   *    an object that can be passed to {@link geo.map}, and `layer` is an\n   *    object that can be passed to `map.createLayer`.\n   * @memberof geo.util\n   */\n  pixelCoordinateParams: function (node, width, height, tileWidth, tileHeight) {\n    var mapW, mapH, tiled;\n    if (node) {\n      node = $(node);\n      mapW = node.innerWidth();\n      mapH = node.innerHeight();\n    }\n    tileWidth = tileWidth || width;\n    tileHeight = tileHeight || height;\n    tiled = (tileWidth !== width || tileHeight !== height);\n    var minLevel = Math.min(0, Math.floor(Math.log(Math.min(\n          (mapW || tileWidth) / tileWidth,\n          (mapH || tileHeight) / tileHeight)) / Math.log(2))),\n        maxLevel = Math.ceil(Math.log(Math.max(\n          width / tileWidth,\n          height / tileHeight)) / Math.log(2));\n    var mapParams = {\n      node: node,\n      ingcs: '+proj=longlat +axis=esu',\n      gcs: '+proj=longlat +axis=enu',\n      maxBounds: {left: 0, top: 0, right: width, bottom: height},\n      unitsPerPixel: Math.pow(2, maxLevel),\n      center: {x: width / 2, y: height / 2},\n      min: minLevel,\n      max: maxLevel,\n      zoom: minLevel,\n      clampBoundsX: true,\n      clampBoundsY: true,\n      clampZoom: true\n    };\n    var layerParams = {\n      maxLevel: maxLevel,\n      wrapX: false,\n      wrapY: false,\n      tileOffset: function () {\n        return {x: 0, y: 0};\n      },\n      attribution: '',\n      tileWidth: tileWidth,\n      tileHeight: tileHeight,\n      tileRounding: Math.ceil,\n      tilesAtZoom: tiled ? function (level) {\n        var scale = Math.pow(2, maxLevel - level);\n        return {\n          x: Math.ceil(width / tileWidth / scale),\n          y: Math.ceil(height / tileHeight / scale)\n        };\n      } : undefined,\n      tilesMaxBounds: tiled ? function (level) {\n        var scale = Math.pow(2, maxLevel - level);\n        return {\n          x: Math.floor(width / scale),\n          y: Math.floor(height / scale)\n        };\n      } : undefined\n    };\n    return {map: mapParams, layer: layerParams};\n  },\n\n  /**\n   * Return the coordinate associated with the center of the perimeter formed\n   * from a list of points.  This averages all of the vertices in the perimeter\n   * weighted by the line length on either side of each point.  Functionally,\n   * this is the same as the average of all the points of the lines of the\n   * perimeter.\n   *\n   * @param {geo.geoPosition[]} coor An array of coordinates.\n   * @returns {geo.geoPosition|undefined} The position for the center, or\n   *    `undefined` if no such position exists.\n   */\n  centerFromPerimeter: function (coor) {\n    var position, p0, p1, w, sumw, i;\n    if (!coor || !coor.length) {\n      return;\n    }\n    if (coor.length === 1) {\n      return {x: coor[0].x, y: coor[0].y};\n    }\n    position = {x: 0, y: 0};\n    sumw = 0;\n    p0 = coor[coor.length - 1];\n    for (i = 0; i < coor.length; i += 1) {\n      p1 = p0;\n      p0 = coor[i];\n      w = Math.sqrt(Math.pow(p1.x - p0.x, 2) + Math.pow(p1.y - p0.y, 2));\n      position.x += (p0.x + p1.x) * w;\n      position.y += (p0.y + p1.y) * w;\n      sumw += 2 * w;\n    }\n    position.x /= sumw;\n    position.y /= sumw;\n    // return a copy of p0 if all points are the same\n    return sumw ? position : {x: p0.x, y: p0.y};\n  },\n\n  /**\n   * Get the square of the Euclidean 2D distance between two points.\n   *\n   * @param {geo.geoPosition} pt1 The first point.\n   * @param {geo.geoPosition} pt2 The second point.\n   * @returns {number} The distance squared.\n   */\n  distance2dSquared: function (pt1, pt2) {\n    var dx = pt1.x - pt2.x,\n        dy = pt1.y - pt2.y;\n    return dx * dx + dy * dy;\n  },\n\n  /**\n   * Get the square of the Euclidean 2D distance between a point and a line\n   * segment.\n   *\n   * @param {geo.geoPosition} pt The point.\n   * @param {geo.geoPosition} line1 One end of the line.\n   * @param {geo.geoPosition} line2 The other end of the line.\n   * @returns {number} The distance squared.\n   */\n  distance2dToLineSquared: function (pt, line1, line2) {\n    var dx = line2.x - line1.x,\n        dy = line2.y - line1.y,\n        // we could get the line length from the distance2dSquared function,\n        // but since we need dx and dy in this function, it is faster to just\n        // compute it here.\n        lengthSquared = dx * dx + dy * dy,\n        t = 0;\n    if (lengthSquared) {\n      t = ((pt.x - line1.x) * dx + (pt.y - line1.y) * dy) / lengthSquared;\n      t = Math.max(0, Math.min(1, t));\n    }\n    return util.distance2dSquared(pt, {\n      x: line1.x + t * dx,\n      y: line1.y + t * dy\n    });\n  },\n\n  /**\n   * Get twice the signed area of a 2d triangle.\n   *\n   * @param {geo.geoPosition} pt1 A vertex.\n   * @param {geo.geoPosition} pt2 A vertex.\n   * @param {geo.geoPosition} pt3 A vertex.\n   * @returns {number} Twice the signed area.\n   */\n  triangleTwiceSignedArea2d: function (pt1, pt2, pt3) {\n    return (pt2.y - pt1.y) * (pt3.x - pt2.x) - (pt2.x - pt1.x) * (pt3.y - pt2.y);\n  },\n\n  /**\n   * Determine if two line segments cross.  They are not considered crossing if\n   * they share a vertex.  They are crossing if either of one segment's\n   * vertices are colinear with the other segment.\n   *\n   * @param {geo.geoPosition} seg1pt1 One endpoint of the first segment.\n   * @param {geo.geoPosition} seg1pt2 The other endpoint of the first segment.\n   * @param {geo.geoPosition} seg2pt1 One endpoint of the second segment.\n   * @param {geo.geoPosition} seg2pt2 The other endpoint of the second segment.\n   * @returns {boolean} True if the segments cross.\n   */\n  crossedLineSegments2d: function (seg1pt1, seg1pt2, seg2pt1, seg2pt2) {\n    /* If the segments don't have any overlap in x or y, they can't cross */\n    if ((seg1pt1.x > seg2pt1.x && seg1pt1.x > seg2pt2.x &&\n         seg1pt2.x > seg2pt1.x && seg1pt2.x > seg2pt2.x) ||\n        (seg1pt1.x < seg2pt1.x && seg1pt1.x < seg2pt2.x &&\n         seg1pt2.x < seg2pt1.x && seg1pt2.x < seg2pt2.x) ||\n        (seg1pt1.y > seg2pt1.y && seg1pt1.y > seg2pt2.y &&\n         seg1pt2.y > seg2pt1.y && seg1pt2.y > seg2pt2.y) ||\n        (seg1pt1.y < seg2pt1.y && seg1pt1.y < seg2pt2.y &&\n         seg1pt2.y < seg2pt1.y && seg1pt2.y < seg2pt2.y)) {\n      return false;\n    }\n    /* If any vertex is in common, it is not considered crossing */\n    if ((seg1pt1.x === seg2pt1.x && seg1pt1.y === seg2pt1.y) ||\n        (seg1pt1.x === seg2pt2.x && seg1pt1.y === seg2pt2.y) ||\n        (seg1pt2.x === seg2pt1.x && seg1pt2.y === seg2pt1.y) ||\n        (seg1pt2.x === seg2pt2.x && seg1pt2.y === seg2pt2.y)) {\n      return false;\n    }\n    /* If the lines cross, the signed area of the triangles formed between one\n     * segment and the other's vertices will have different signs.  By using\n     * > 0, colinear points are crossing. */\n    if (util.triangleTwiceSignedArea2d(seg1pt1, seg1pt2, seg2pt1) *\n        util.triangleTwiceSignedArea2d(seg1pt1, seg1pt2, seg2pt2) > 0 ||\n        util.triangleTwiceSignedArea2d(seg2pt1, seg2pt2, seg1pt1) *\n        util.triangleTwiceSignedArea2d(seg2pt1, seg2pt2, seg1pt2) > 0) {\n      return false;\n    }\n    return true;\n  },\n\n  /**\n   * Check if a line segment crosses any segment from a list of lines.  The\n   * segment is considered crossing it it touches a line segment, unless that\n   * line segment shares a vertex with the segment.\n   *\n   * @param {geo.geoPosition} pt1 One end of the line segment.\n   * @param {geo.geoPosition} pt2 The other end of the line segment.\n   * @param {Array.<geo.geoPosition[]>} lineList A list of open lines.  Each\n   *    line is a list of vertices.  The line segment is checked against each\n   *    segment of each line in this list.\n   * @returns {boolean} True if the segment crosses any line segment.\n   */\n  segmentCrossesLineList2d: function (pt1, pt2, lineList) {\n    var result = lineList.some(function (line) {\n      return line.some(function (linePt, idx) {\n        if (idx) {\n          return util.crossedLineSegments2d(pt1, pt2, line[idx - 1], linePt);\n        }\n      });\n    });\n    return result;\n  },\n\n  /**\n   * Remove vertices from a chain of 2d line segments so that it is simpler but\n   * is close to the original overall shape within some tolerance limit.  This\n   * is the Ramer–Douglas–Peucker algorithm.  The first and last points will\n   * always remain the same for open lines.  For closed lines (polygons), this\n   * picks an point that likely to be significant and then reduces it, possibly\n   * returning a single point.\n   *\n   * @param {geo.geoPosition[]} pts A list of points forming the line or\n   *    polygon.\n   * @param {number} tolerance The maximum variation allowed.  A value of zero\n   *    will only remove perfectly colinear points.\n   * @param {boolean} [closed] If true, this is a polygon rather than an open\n   *    line.  In this case, it is possible to get back a single point.\n   * @param {Array.<geo.geoPosition[]>?} [noCrossLines] A falsy value to allow\n   *    the resultant line to cross itself, an empty array (`[]`) to prevent\n   *    self-crossing, or an array of line segments to prevent self-crossing\n   *    and disallow crossing any line segment in the list.  Each entry in the\n   *    list is an open line (with one segment less than the number of\n   *    vertices).  If self-crossing is prohibited, the resultant point set\n   *    might not be as simplified as it could be.\n   * @returns {geo.geoPosition[]} The new point set.\n   */\n  rdpLineSimplify: function (pts, tolerance, closed, noCrossLines) {\n    if (pts.length <= 2 || tolerance < 0) {\n      return pts;\n    }\n    var i, distSq, maxDistSq = -1, index, toleranceSq = tolerance * tolerance;\n    if (closed) {\n      /* If this is closed, find the point that is furthest from the first\n       * point.  ideally, one would find a point that is guaranteed to be on\n       * the diameter of the convex hull, but doing so is an O(n^2) operation,\n       * whereas this is sufficient and only O(n).  The chosen point is\n       * duplicated at the start and end of the chain. */\n      for (i = 1; i < pts.length; i += 1) {\n        distSq = util.distance2dSquared(pts[0], pts[i]);\n        if (distSq > maxDistSq) {\n          maxDistSq = distSq;\n          index = i;\n        }\n      }\n      /* Points could be on any side of the start point, so if all points are\n       * within 1/2 of the tolerance of the start point, we know all points are\n       * within the tolerance of each other and therefore this polygon or\n       * closed line can be simplified to a point. */\n      if (maxDistSq * 4 <= toleranceSq) {\n        return pts.slice(index, index + 1);\n      }\n      pts = pts.slice(index).concat(pts.slice(0, index + 1));\n      pts = util.rdpLineSimplify(pts, tolerance, false, noCrossLines);\n      /* Removed the duplicated first point */\n      pts.splice(pts.length - 1);\n      return pts;\n    }\n    for (i = 1; i < pts.length - 1; i += 1) {\n      distSq = util.distance2dToLineSquared(pts[i], pts[0], pts[pts.length - 1]);\n      if (distSq > maxDistSq) {\n        maxDistSq = distSq;\n        index = i;\n      }\n    }\n    /* We can collapse this to a single line if it is within the tolerance and\n     * we are either allowed to self-cross or it does not self-cross the rest\n     * of the line. */\n    if (maxDistSq <= toleranceSq && (!noCrossLines || !util.segmentCrossesLineList2d(\n      pts[0], pts[pts.length - 1], noCrossLines))) {\n      return [pts[0], pts[pts.length - 1]];\n    }\n    var left = pts.slice(0, index + 1),\n        right = pts.slice(index),\n        leftSide = util.rdpLineSimplify(\n          left, tolerance, false,\n          noCrossLines ? noCrossLines.concat([right]) : null),\n        rightSide = util.rdpLineSimplify(\n          right, tolerance, false,\n          noCrossLines ? noCrossLines.concat([left]) : null);\n    return leftSide.slice(0, leftSide.length - 1).concat(rightSide);\n  },\n\n  /**\n   * Given an array, return the minimum and maximum values within the array.\n   * If a numeric value is specified for one or the other, return that instead.\n   *\n   * @param {number[]} values An array of numeric values.\n   * @param {number} [min] If specified, use this instead of calculating the\n   *    minimum.\n   * @param {number} [max] If specified, use this instead of calculating the\n   *    maximum.\n   * @param {boolean} [limit=false] If truthy, if `min` is specified, the\n   *    returned `min` will be the larger of the specified value and the\n   *    computed value, and if `max` is specified, the returned value will\n   *    be the smaller of the specified value and the computed value.\n   * @returns {object} An object with `min` and `max`, both numbers.  If the\n   *    array is empty, `undefined` may be returned for the `min` and `max`.\n   */\n  getMinMaxValues: function (values, min, max, limit) {\n    if (values.length && (limit || !$.isNumeric(min) || !$.isNumeric(max))) {\n      var minValue = values[0],\n          maxValue = values[0],\n          value, i;\n      for (i = values.length - 1; i > 0; i -= 1) {\n        value = values[i];\n        if (value < minValue) { minValue = value; }\n        if (value > maxValue) { maxValue = value; }\n      }\n      if (!$.isNumeric(min) || (limit && minValue > min)) {\n        min = minValue;\n      }\n      if (!$.isNumeric(max) || (limit && maxValue < max)) {\n        max = maxValue;\n      }\n    }\n    return {min: min, max: max};\n  },\n\n  /**\n   * Given a value in radians, return a value wrapped to the range [-PI, PI).\n   *\n   * @param {number} value A value in radians.\n   * @returns {number} The wrapped value.\n   */\n  wrapAngle: function (value) {\n    /* Module will only ensure that this is between [-2 PI, 2 PI). */\n    value = value % (Math.PI * 2);\n    if (value < -Math.PI) {\n      value += Math.PI * 2;\n    } else if (value >= Math.PI) {\n      value -= Math.PI * 2;\n    }\n    return value;\n  },\n\n  /**\n   * Escape any character in a string that has a code point >= 127.\n   *\n   * @param {string} text The string to escape.\n   * @returns {string} The escaped string.\n   * @memberof geo.util\n   */\n  escapeUnicodeHTML: function (text) {\n    return text.replace(/./g, function (k) {\n      var code = k.charCodeAt();\n      if (code < 127) {\n        return k;\n      }\n      return '&#' + code.toString(10) + ';';\n    });\n  },\n\n  /**\n   * Check svg image and html img tags.  If the source is set, load images\n   * explicitly and convert them to local data:image references.\n   *\n   * @param {jQuery.selector} elem A jQuery selector or element set that may\n   *    contain images.\n   * @returns {jQuery.Deferred[]} A list of deferred objects that resolve\n   *    when images are dereferenced.\n   * @memberof geo.util\n   */\n  dereferenceElements: function (elem) {\n    var deferList = [];\n\n    $('img,image', elem).each(function () {\n      var src = $(this);\n      var key = src.is('image') ? 'href' : 'src';\n      if (src.attr(key)) {\n        var img = new Image();\n        if (src.attr(key).substr(0, 4) === 'http' || src[0].crossOrigin) {\n          img.crossOrigin = src[0].crossOrigin || 'anonymous';\n        }\n        var defer = $.Deferred();\n        img.onload = function () {\n          var cvs = document.createElement('canvas');\n          cvs.width = img.naturalWidth;\n          cvs.height = img.naturalHeight;\n          cvs.getContext('2d').drawImage(img, 0, 0);\n          src.attr(key, cvs.toDataURL('image/png'));\n          if (src.attr(key).substr(0, 10) !== 'data:image') {\n            src.remove();\n          }\n          defer.resolve();\n        };\n        img.onerror = function () {\n          src.remove();\n          defer.resolve();\n        };\n        img.src = src.attr(key);\n        deferList.push(defer);\n      }\n    });\n    return deferList;\n  },\n\n  dereferenceCssUrlsRegex: /url\\([\"']?(http[^)\"']+|[^:)\"']+)[\"']?\\)/g,\n\n  /**\n   * Check css text.  Any url(http[s]...) references are dereferenced and\n   * stored as local base64 urls.\n   *\n   * @param {string} css The css to parse for urls.\n   * @param {jQuery.selector|DOMElement} styleElem The element that receivs\n   *    the css text after dereferencing or the DOM element that has style\n   *    that will be updated.\n   * @param {jQuery.Deferred} styleDefer A Deferred to resolve once\n   *    dereferencing is complete.\n   * @param {string} [styleKey] If unset, styleElem is a header element.  If\n   *    set, styleElem is a DOM element and the named style will be updated.\n   * @param {string} [baseUrl] If present, this is the base for relative urls.\n   * @memberof geo.util\n   */\n  dereferenceCssUrls: function (css, styleElem, styleDefer, styleKey, baseUrl) {\n    var deferList = [],\n        results = [];\n\n    /* Remove comments to avoid dereferencing commented out sections.\n     * To match across lines, use [^\\0] rather than . */\n    css = css.replace(/\\/\\*[^\\0]*?\\*\\//g, '');\n    /* reduce whitespace to make the css shorter */\n    css = css.replace(/\\r/g, '\\n').replace(/\\s+\\n/g, '\\n')\n             .replace(/\\n\\s+/g, '\\n').replace(/\\n\\n+/g, '\\n');\n    if (baseUrl) {\n      var match = /(^[^?#]*)\\/[^?#/]*([?#]|$)/g.exec(baseUrl);\n      baseUrl = match && match[1] ? match[1] + '/' : null;\n    }\n    css.replace(util.dereferenceCssUrlsRegex, function (match, url) {\n      var idx = deferList.length,\n          defer = $.Deferred(),\n          xhr = new XMLHttpRequest();\n      deferList.push(defer);\n      results.push('');\n\n      if (/^[^/:][^:]*(\\/|$)/g.exec(url) && baseUrl) {\n        url = baseUrl + url;\n      }\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function () {\n        if (this.status === 200) {\n          var response = new Uint8Array(this.response),\n              data = new Array(response.length),\n              i;\n          for (i = 0; i < response.length; i += 1) {\n            data[i] = String.fromCharCode(response[i]);\n          }\n          data = data.join('');\n          results[idx] = 'url(data:' + xhr.getResponseHeader('content-type') + ';base64,' + btoa(data) + ')';\n        }\n        // resolve regardless of what response we get\n        defer.resolve();\n      };\n      // if this fails, resolve anyway\n      xhr.onerror = defer.resolve;\n      xhr.send();\n      return match;\n    });\n    $.when.apply($, deferList).then(function () {\n      var idx = 0;\n      css = css.replace(util.dereferenceCssUrlsRegex, function (match, url) {\n        idx += 1;\n        return results[idx - 1];\n      });\n      if (styleKey === undefined) {\n        styleElem.text(css);\n      } else {\n        styleElem.style[styleKey] = css;\n      }\n      styleDefer.resolve();\n    });\n  },\n\n  /**\n   * Check if the current browser supports covnerting html to an image via an\n   * svg foreignObject and canvas.  If this has not been checked before, it\n   * returns a Deferred that resolves to a boolean (never rejects).  If the\n   * check has been done before, it returns a boolean.\n   *\n   * @returns {boolean|jQuery.Deferred}\n   */\n  htmlToImageSupported: function () {\n    if (m_htmlToImageSupport === undefined) {\n      var defer = $.Deferred();\n      var svg = $(svgForeignObject);\n      svg.attr({\n        width: '10px',\n        height: '10px',\n        'text-rendering': 'optimizeLegibility'\n      });\n      $('foreignObject', svg).append('<div/>');\n      var img = new Image();\n      img.onload = img.onerror = function () {\n        var canvas = document.createElement('canvas');\n        canvas.width = 10;\n        canvas.height = 10;\n        var context = canvas.getContext('2d');\n        context.drawImage(img, 0, 0);\n        try {\n          canvas.toDataURL();\n          m_htmlToImageSupport = true;\n        } catch (err) {\n          console.warn(\n            'This browser does not support converting HTML to an image via ' +\n            'SVG foreignObject.  Some functionality will be limited.', err);\n          m_htmlToImageSupport = false;\n        }\n        defer.resolve(m_htmlToImageSupport);\n      };\n      img.src = 'data:image/svg+xml;base64,' + btoa(util.escapeUnicodeHTML(\n        new XMLSerializer().serializeToString(svg[0])));\n      return defer;\n    }\n    return m_htmlToImageSupport;\n  },\n\n  /**\n   * Convert an html element to an image.  This attempts to localize any\n   * images within the element.  If there are other external references, the\n   * image may not work due to security considerations.\n   *\n   * @param {jQuery.selector} elem Either a jquery selector or an HTML\n   *    element.  This may contain multiple elements.  The direct parent and\n   *    grandparent of the element are used for class information.\n   * @param {number} [parents] Number of layers up to travel to get class\n   *    information.\n   * @returns {jQuery.Deferred} A jquery deferred object which receives an\n   *    HTML Image element when resolved.\n   * @memberof geo.util\n   */\n  htmlToImage: function (elem, parents) {\n    var defer = $.Deferred(),\n        deferList = [util.htmlToImageSupported()],\n        container;\n\n    var parent = $(elem);\n    elem = $(elem).clone();\n    while (parents && parents > 0) {\n      parent = parent.parent();\n      if (parent.is('div')) {\n        /* Create a containing div with the parent's class and id (so css\n         * will be used), but override size and background. */\n        container = $('<div>').attr({\n          'class': parent.attr('class'),\n          id: parent.attr('id')\n        }).css({\n          width: '100%',\n          height: '100%',\n          background: 'none',\n          margin: 0\n        });\n        container.append(elem);\n        elem = container;\n      }\n      parents -= 1;\n    }\n    // canvas elements won't render properly here.\n    $('canvas', elem).remove();\n    /* Walk through all of the children of elem and check if any explicitly set\n     * css property needs to be dereferenced. */\n    $('*', elem).addBack().each(function () {\n      var style = this.style;\n      for (var idx = 0; idx < style.length; idx += 1) {\n        var key = this.style[idx];\n        if (this.style[key].match(util.dereferenceCssUrlsRegex)) {\n          var styleDefer = $.Deferred();\n          util.dereferenceCssUrls(this.style[key], this, styleDefer, key);\n          deferList.push(styleDefer);\n        }\n      }\n    });\n    container = $('<div xmlns=\"http://www.w3.org/1999/xhtml\">');\n    container.css({\n      width: parent.width() + 'px',\n      height: parent.height() + 'px'\n    });\n    container.append($('<head>'));\n    var body = $('<body>');\n    container.append(body);\n    /* We must specify the new body as having no background, or we'll clobber\n     * other layers. */\n    body.css({\n      width: parent.width() + 'px',\n      height: parent.height() + 'px',\n      background: 'none',\n      margin: 0\n    });\n    body.append(elem);\n    deferList = deferList.concat(util.dereferenceElements(elem));\n    /* Get styles and links in order, as order matters in css */\n    $('style,link[rel=\"stylesheet\"]').each(function () {\n      var styleElem = $('<style type=\"text/css\">'),\n          styleDefer = $.Deferred();\n      if ($(this).is('style')) {\n        var css = $(this).text();\n        util.dereferenceCssUrls(css, styleElem, styleDefer);\n      } else {\n        var href = $(this).attr('href');\n        $.get(href).done(function (css) {\n          util.dereferenceCssUrls(css, styleElem, styleDefer, undefined, href);\n        }).fail(function (xhr, status, err) {\n          console.warn('Failed to dereference ' + href, status, err);\n          styleElem.remove();\n          styleDefer.resolve();\n        });\n      }\n      deferList.push(styleDefer);\n      $('head', container).append(styleElem);\n    });\n\n    $.when.apply($, deferList).then(function () {\n      var svg = $(svgForeignObject);\n      svg.attr({\n        width: parent.width() + 'px',\n        height: parent.height() + 'px',\n        // Adding this via the attr call works in Firefox headless, whereas if\n        // it is part of the svgForeignObject string, it does not.\n        'text-rendering': 'optimizeLegibility'\n      });\n      $('foreignObject', svg).append(container);\n\n      var img = new Image();\n      if (!util.htmlToImageSupported()) {\n        defer.resolve(img);\n      } else {\n        img.onload = function () {\n          defer.resolve(img);\n        };\n        img.onerror = function () {\n          console.warn('Failed to render html to image');\n          defer.reject();\n        };\n        // Firefox requires the HTML to be base64 encoded.  Chrome doesn't, but\n        // doing so does no harm.\n        img.src = 'data:image/svg+xml;base64,' + btoa(util.escapeUnicodeHTML(\n          new XMLSerializer().serializeToString(svg[0])));\n      }\n    });\n    return defer;\n  },\n\n  /**\n   * Report on one or all of the tracked timings.\n   *\n   * @param {string} [name] A name to report on, or `undefined` to report all.\n   * @returns {object} An object with timing information, or an object with\n   *    properties for all tracked timings, each of which contains timing\n   *    information.\n   * @memberof geo.util\n   */\n  timeReport: function (name) {\n    $.each(m_timingData, function (key, item) {\n      /* calculate the standard deviation of each item. */\n      if (item.count) {\n        item.stddev = Math.sqrt(Math.abs((\n          item.sum2 - item.sum * item.sum / item.count) / item.count));\n        item.average = item.sum / item.count;\n      } else {\n        item.stddev = 0;\n        item.average = 0;\n      }\n    });\n    if (name) {\n      return m_timingData[name];\n    }\n    return m_timingData;\n  },\n\n  /**\n   * Note the start time of a function (or any other section of code).  This\n   * should be paired with `timeFunctionStop`, which will collect statistics on\n   * the amount of time spent in a function.\n   *\n   * @param {string} name Name to use for tracking the timing.\n   * @param {boolean} reset If `true`, clear old tracking data for this named\n   *    tracker.\n   * @memberof geo.util\n   */\n  timeFunctionStart: function (name, reset) {\n    if (!m_timingData[name] || reset) {\n      m_timingData[name] = {\n        count: 0, sum: 0, sum2: 0, max: 0, recent: []\n      };\n    }\n    m_timingData[name].start = window.performance.now();\n  },\n\n  /**\n   * Note the stop time of a function (or any other section of code).  This\n   * should be paired with `timeFunctionStart`.\n   *\n   * @param {string} name Name to use for tracking the timing.\n   * @memberof geo.util\n   */\n  timeFunctionStop: function (name) {\n    if (!m_timingData[name] || !m_timingData[name].start) {\n      return;\n    }\n    var duration = window.performance.now() - m_timingData[name].start;\n    m_timingData[name].start = null;\n    m_timingData[name].sum += duration;\n    m_timingData[name].sum2 += duration * duration;\n    m_timingData[name].count += 1;\n    m_timingData[name].max = Math.max(\n      m_timingData[name].max, duration);\n    m_timingData[name].recent.push(duration);\n    if (m_timingData[name].recent.length > m_timingKeepRecent) {\n      m_timingData[name].recent.splice(\n        0, m_timingData[name].recent.length - m_timingKeepRecent);\n    }\n  },\n\n  /**\n   * Start or stop tracking the time spent in `requestAnimationFrame`.  If\n   * tracked, the results can be fetched via\n   * `timeFunctionReport('requestAnimationFrame')`.\n   *\n   * @param {boolean} [stop] Falsy to start tracking, truthy to start tracking.\n   * @param {boolean} [reset] If truthy, reset the statistics.\n   * @param {number} [threshold=15] If present, set the threshold in\n   *    milliseconds used in tracking slow callbacks.\n   * @param {number} [keep=200] If present, set the number of recent frame\n   *    times to track.\n   * @memberof geo.util\n   */\n  timeRequestAnimationFrame: function (stop, reset, threshold, keep) {\n    if (!m_timingData.requestAnimationFrame || reset) {\n      m_timingData.requestAnimationFrame = {\n        count: 0,\n        sum: 0,\n        sum2: 0,\n        max: 0,\n        above_threshold: 0,\n        recent: [],\n        recentsub: []\n      };\n    }\n    if (threshold) {\n      m_threshold = threshold;\n    }\n    if (keep) {\n      m_timingKeepRecent = keep;\n    }\n    if (stop && m_originalRequestAnimationFrame) {\n      window.requestAnimationFrame = m_originalRequestAnimationFrame;\n      m_originalRequestAnimationFrame = null;\n    } else if (!stop && !m_originalRequestAnimationFrame) {\n      m_originalRequestAnimationFrame = window.requestAnimationFrame;\n      window.requestAnimationFrame = function (callback) {\n        return m_originalRequestAnimationFrame.call(window, function (timestamp) {\n          var track = m_timingData.requestAnimationFrame, recent;\n          /* Some environments have unsynchronized performance and time\n           * counters.  The nowDelta factor compensates for this.  For\n           * instance, our test enviornment has performance.now() values on\n           * the order of ~3000 and timestamps approximating epoch. */\n          if (track.timestamp !== timestamp) {\n            track.nowDelta = window.performance.now() - timestamp;\n            if (Math.abs(track.nowDelta) < 1000) {\n              track.nowDelta = 0;\n            }\n            track.timestamp = timestamp;\n            track.subcalls = track.subcalls || 0;\n            track.start = {\n              sum: track.sum,\n              sum2: track.sum2,\n              count: track.count,\n              max: track.max,\n              above_threshold: track.above_threshold\n            };\n            track.recent.push([0]);\n            track.recentsub.push([]);\n            if (track.recent.length > m_timingKeepRecent) {\n              track.recent.splice(\n                0, track.recent.length - m_timingKeepRecent);\n              track.recentsub.splice(\n                0, track.recentsub.length - m_timingKeepRecent);\n            }\n          }\n          track.subcalls += 1;\n          callback.apply(this, arguments);\n          var duration = window.performance.now() - timestamp;\n          duration -= track.nowDelta;\n          track.sum = track.start.sum + duration;\n          track.sum2 = track.start.sum2 + duration * duration;\n          track.count = track.start.count + 1;\n          track.max = Math.max(track.max, duration);\n          track.above_threshold = track.start.above_threshold + (\n            duration >= m_threshold ? 1 : 0);\n          track.recent[track.recent.length - 1] = duration;\n          recent = track.recentsub[track.recent.length - 1];\n          recent.push({\n            total_duration: duration,\n            duration: duration - (recent.length ?\n              recent[recent.length - 1].total_duration : 0),\n            callback: callback.name || callback\n          });\n        });\n      };\n    }\n  },\n\n  /**\n   * Test if an item is an object.  This uses typeof not instanceof, since\n   * instanceof will return false for some things that we expect to be objects.\n   *\n   * @param {*} value The item to test.\n   * @returns {boolean} True if the tested item is an object.\n   */\n  isObject: function (value) {\n    var type = typeof value;\n    return value !== null && value !== undefined && (type === 'object' || type === 'function');\n  },\n\n  ///////////////////////////////////////////////////////////////////////////\n  /*\n   * Utility member properties.\n   */\n  ///////////////////////////////////////////////////////////////////////////\n\n  /**\n   * Radius of the earth in meters, from the equatorial radius of SRID 4326.\n   * @memberof geo.util\n   */\n  radiusEarth: proj4.WGS84.a,\n\n  /**\n   * A regular expression string that will parse a number (integer or floating\n   * point) for CSS properties.\n   * @memberof geo.util\n   */\n  cssNumberRegex: '[+-]?(?:\\\\d+\\\\.?\\\\d*|\\\\.\\\\d+)(?:[eE][+-]?\\\\d+)?',\n\n  /**\n   * A dictionary of conversion factors for angular CSS measurements.\n   * @memberof geo.util\n   */\n  cssAngleUnitsBase: {deg: 360, grad: 400, rad: 2 * Math.PI, turn: 1},\n\n  /**\n   * The predefined CSS colors.  See\n   * {@link https://drafts.csswg.org/css-color}.\n   *\n   * @memberof geo.util\n   */\n  cssColors: {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  }\n};\n\n///////////////////////////////////////////////////////////////////////////\n/*\n * Utility member properties that need to refer to util functions and\n * properties.\n */\n///////////////////////////////////////////////////////////////////////////\n\n/**\n * A list of regex and processing functions for color conversions to rgb\n * objects.  Each entry is a {@link geo.util.cssColorConversionRecord}.  In\n * general, these conversions are somewhat more forgiving than the css\n * specification (see {@link https://drafts.csswg.org/css-color/}) in that\n * percentages may be mixed with numbers, and that floating point values are\n * accepted for all numbers.  Commas are optional.  As per the latest draft\n * standard, `rgb` and `rgba` are aliases of each other, as are `hsl` and\n * `hsla`.\n * @name cssColorConversions\n * @property cssColorConversions\n * @memberof geo.util\n */\nutil.cssColorConversions = [{\n  name: 'rgb',\n  regex: new RegExp(\n    '^\\\\s*rgba?' +\n    '\\\\(\\\\s*(' + util.cssNumberRegex + ')\\\\s*(%?)\\\\s*' +\n    ',?\\\\s*(' + util.cssNumberRegex + ')\\\\s*(%?)\\\\s*' +\n    ',?\\\\s*(' + util.cssNumberRegex + ')\\\\s*(%?)\\\\s*' +\n    '([/,]?\\\\s*(' + util.cssNumberRegex + ')\\\\s*(%?)\\\\s*)?' +\n    '\\\\)\\\\s*$'),\n  process: function (color, match) {\n    color = {\n      r: Math.min(1, Math.max(0, +match[1] / (match[2] ? 100 : 255))),\n      g: Math.min(1, Math.max(0, +match[3] / (match[4] ? 100 : 255))),\n      b: Math.min(1, Math.max(0, +match[5] / (match[6] ? 100 : 255)))\n    };\n    if (match[7]) {\n      color.a = Math.min(1, Math.max(0, +match[8] / (match[9] ? 100 : 1)));\n    }\n    return color;\n  }\n}, {\n  name: 'hsl',\n  regex: new RegExp(\n    '^\\\\s*hsla?' +\n    '\\\\(\\\\s*(' + util.cssNumberRegex + ')\\\\s*(deg|grad|rad|turn)?\\\\s*' +\n    ',?\\\\s*(' + util.cssNumberRegex + ')\\\\s*%\\\\s*' +\n    ',?\\\\s*(' + util.cssNumberRegex + ')\\\\s*%\\\\s*' +\n    '([/,]?\\\\s*(' + util.cssNumberRegex + ')\\\\s*(%?)\\\\s*)?' +\n    '\\\\)\\\\s*$'),\n  process: function (color, match) {\n    /* Conversion from https://www.w3.org/TR/2011/REC-css3-color-20110607\n     */\n    var hue_to_rgb = function (m1, m2, h) {\n      h = h - Math.floor(h);\n      if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n      }\n      if (h * 6 < 3) {\n        return m2;\n      }\n      if (h * 6 < 4) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n      }\n      return m1;\n    };\n\n    var h = +match[1] / (util.cssAngleUnitsBase[match[2]] || 360),\n        s = Math.min(1, Math.max(0, +match[3] / 100)),\n        l = Math.min(1, Math.max(0, +match[4] / 100)),\n        m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n        m1 = l * 2 - m2;\n    color = {\n      r: hue_to_rgb(m1, m2, h + 1 / 3),\n      g: hue_to_rgb(m1, m2, h),\n      b: hue_to_rgb(m1, m2, h - 1 / 3)\n    };\n    if (match[5]) {\n      color.a = Math.min(1, Math.max(0, +match[6] / (match[7] ? 100 : 1)));\n    }\n    return color;\n  }\n}];\n\n/* Add additional utilities to the main object. */\n$.extend(util, throttle, mockVGL);\n\n\n\n// WEBPACK FOOTER //\n// ./util/index.js","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/constants/values.js\n// module id = 6\n// module chunks = 0 1","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_global.js\n// module id = 7\n// module chunks = 0 1","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_fails.js\n// module id = 8\n// module chunks = 0 1","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_is-object.js\n// module id = 9\n// module chunks = 0 1","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_wks.js\n// module id = 10\n// module chunks = 0 1","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/adjust_lon.js\n// module id = 11\n// module chunks = 0 1","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_descriptors.js\n// module id = 12\n// module chunks = 0 1","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-dp.js\n// module id = 13\n// module chunks = 0 1","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-length.js\n// module id = 14\n// module chunks = 0 1","/**\n * Common object containing all event types that are provided by the GeoJS\n * API.  Each property contained here is a valid target for event handling\n * via {@link geo.object#geoOn}.  The event object provided to handlers is\n * different for each event type.  Each handler is generally called with the\n * `this` context being the class that caused the event.\n *\n * @namespace\n * @alias geo.event\n * @type {geo.event.base}\n *\n * @example\n * map.geoOn(geo.event.layerAdd, function (event) {\n *   // event is an object with type: {@link geo.event.layerAdd}\n * });\n *\n */\nvar geo_event = {};\n\n/**\n * All events are sent an object that are an extension of this type.\n *\n * @typedef geo.event.base\n * @type {object}\n * @property {string} event The event type that was triggered.\n * @property {object} geo A universal event object for controlling propagation.\n */\n\n/*\n * Event types\n */\n\n/**\n * Triggered when a layer is added to the map.\n *\n * @event geo.event.layerAdd\n * @type {geo.event.base}\n * @property {geo.map} target The current map.\n * @property {geo.layer} layer The new layer that was added.\n */\ngeo_event.layerAdd = 'geo_layerAdd';\n\n/**\n * Triggered when a layer is removed from the map.\n *\n * @event geo.event.layerRemove\n * @type {geo.event.base}\n * @property {geo.map} target The current map.\n * @property {geo.layer} layer The old layer that was removed.\n */\ngeo_event.layerRemove = 'geo_layerRemove';\n\n/**\n * Triggered when the map's zoom level is changed.\n *\n * @event geo.event.zoom\n * @type {geo.event.base}\n * @property {number} zoomLevel New zoom level.\n * @property {geo.screenPosition} screenPosition The screen position of the\n *      mouse pointer.\n */\ngeo_event.zoom = 'geo_zoom';\n\n/**\n * Triggered when the map is rotated around the current map center (pointing\n * downward so that positive angles are clockwise rotations).\n *\n * @event geo.event.rotate\n * @type {geo.event.base}\n * @property {number} rotation The angle of the rotation in radians.  This is\n *      the map's complete rotation, not a delta.\n * @property {geo.screenPosition} screenPosition The screen position of the\n *      mouse pointer.\n */\ngeo_event.rotate = 'geo_rotate';\n\n/**\n * Triggered when the map is panned either by user interaction or map\n * transition.\n *\n * @event geo.event.pan\n * @type {geo.event.base}\n * @property {object} screenDelta The number of pixels of the pan.\n * @property {number} screenDelta.x Horizontal pan distance in pixels.\n * @property {number} screenDelta.y Vertical pan distance in pixels.\n */\ngeo_event.pan = 'geo_pan';\n\n/**\n * Triggered when the map's canvas is resized.\n *\n * @event geo.event.resize\n * @type {geo.event.base}\n * @property {geo.map} target The map that was resized.\n * @property {number} width The new width in pixels.\n * @property {number} height The new height in pixels.\n */\ngeo_event.resize = 'geo_resize';\n\n/**\n * Triggered on every call to {@link geo.map#draw} before the map is rendered.\n *\n * @event geo.event.draw\n * @type {geo.event.base}\n * @property {geo.map} target The current map.\n */\ngeo_event.draw = 'geo_draw';\n\n/**\n * Triggered on every call to {@link geo.map#draw} after the map is rendered.\n *\n * @event geo.event.drawEnd\n * @type {geo.event.base}\n * @property {geo.map} target The current map.\n */\ngeo_event.drawEnd = 'geo_drawEnd';\n\n/**\n * Triggered on every `mousemove` over the map's DOM element unless a click\n * might occur.  The event object extends {@link geo.mouseState}.\n *\n * @event geo.event.mousemove\n * @type {(geo.event.base|geo.mouseState)}\n */\ngeo_event.mousemove = 'geo_mousemove';\n\n/**\n * Triggered on `mouseup` events that happen soon enough and close enough to a\n * `mousedown` event.  The event object extends {@link geo.mouseState}.\n *\n * @event geo.event.mouseclick\n * @type {(geo.event.base|geo.mouseState)}\n * @property {geo.mouseButtons} buttonsDown The buttons that were down at the\n *      start of the click action.\n */\ngeo_event.mouseclick = 'geo_mouseclick';\n\n/**\n * Triggered on every `mousemove` during a brushing selection.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.brush\n * @type {(geo.event.base|geo.brushSelection)}\n */\ngeo_event.brush = 'geo_brush';\n\n/**\n * Triggered after a brush selection ends.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.brushend\n * @type {(geo.event.base|geo.brushSelection)}\n */\ngeo_event.brushend = 'geo_brushend';\n\n/**\n * Triggered when a brush selection starts.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.brushstart\n * @type {(geo.event.base|geo.brushSelection)}\n */\ngeo_event.brushstart = 'geo_brushstart';\n\n/**\n * Triggered when brushing results in a selection.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.select\n * @type {(geo.event.base|geo.brushSelection)}\n */\ngeo_event.select = 'geo_select';\n\n/**\n * Triggered when brushing results in a zoom selection.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.zoomselect\n * @type {(geo.event.base|geo.brushSelection)}\n */\ngeo_event.zoomselect = 'geo_zoomselect';\n\n/**\n * Triggered when brushing results in a zoom-out selection.\n * The event object extends {@link geo.brushSelection}.\n *\n * @event geo.event.unzoomselect\n * @type {(geo.event.base|geo.brushSelection)}\n */\n\ngeo_event.unzoomselect = 'geo_unzoomselect';\n\n/**\n * Triggered when an action is initiated with mouse down.\n *\n * @event geo.event.actiondown\n * @type {geo.event.base}\n * @property {geo.actionState} state The action state.\n * @property {geo.mouseState} mouse The mouse state.\n * @property {jQuery.Event} event The triggering jQuery event.\n */\ngeo_event.actiondown = 'geo_actiondown';\n\n/**\n * Triggered when an action is being processed during mouse movement.\n *\n * @event geo.event.actionmove\n * @type {geo.event.base}\n * @property {geo.actionState} state The action state.\n * @property {geo.mouseState} mouse The mouse state.\n * @property {jQuery.Event} event The triggering event.\n */\ngeo_event.actionmove = 'geo_actionmove';\n\n/**\n * Triggered when an action is ended with a mouse up.\n *\n * @event geo.event.actionup\n * @type {geo.event.base}\n * @property {geo.actionState} state The action state.\n * @property {geo.mouseState} mouse The mouse state.\n * @property {jQuery.Event} event The triggering event.\n */\ngeo_event.actionup = 'geo_actionup';\n\n/**\n * Triggered when an action results in a selection.\n *\n * @event geo.event.actionselection\n * @type {geo.event.base}\n * @property {geo.actionState} state The action state.\n * @property {geo.mouseState} mouse The mouse state.\n * @property {jQuery.Event} event The triggering event.\n * @property {geo.screenPosition} lowerLeft Lower left of selection in screen\n *      coordinates.\n * @property {geo.screenPosition} upperRight Upper right of selection in screen\n *      coordinates.\n */\ngeo_event.actionselection = 'geo_actionselection';\n\n/**\n * Triggered when an action is triggered with a mouse wheel event.\n *\n * @event geo.event.actionwheel\n * @type {geo.event.base}\n * @property {geo.actionState} state The action state.\n * @property {geo.mouseState} mouse The mouse state.\n * @property {jQuery.Event} event The triggering event.\n */\ngeo_event.actionwheel = 'geo_actionwheel';\n\n/**\n * Triggered when an action is triggered via the keyboard.\n *\n * @event geo.event.keyaction\n * @type {geo.event.base}\n * @property {object} move The movement that would happen if the action is\n *      passed through.\n * @property {number} [move.zoomDelta] A change in the zoom level.\n * @property {number} [move.zoom] A new zoom level.\n * @property {number} [move.rotationDelta] A change in the rotation in radians.\n * @property {number} [move.rotation] A new absolute rotation in radians.\n * @property {number} [move.panX] A horizontal shift in display pixels.\n * @property {number} [move.panY] A vertical shift in display pixels.\n * @property {boolean} [move.cancel] Set to `true` to cancel the entire\n *      movement.\n * @property {string} action Action based on key\n * @property {number} factor Factor based on metakeys [0-2].  0 means a small\n *      movement is preferred, 1 a medium movement, and 2 a large movement.\n * @property {jQuery.Event} event The triggering event\n */\ngeo_event.keyaction = 'geo_keyaction';\n\n/**\n * Triggered before a map navigation animation begins.  Set\n * `event.geo.cancelAnimation` to cancel the animation of the navigation.  This\n * will cause the map to navigate to the target location immediately.  Set\n * `event.geo.cancelNavigation` to cancel the navigation completely.  The\n * transition options can be modified in place.\n *\n * @event geo.event.transitionstart\n * @type {geo.event.base}\n * @property {geo.geoPosition} center The target center.\n * @property {number} zoom The target zoom level.\n * @property {number} duration The duration of the transition in milliseconds.\n * @property {function} ease The easing function.\n */\ngeo_event.transitionstart = 'geo_transitionstart';\n\n/**\n * Triggered after a map navigation animation ends.\n *\n * @event geo.event.transitionend\n * @type {geo.event.base}\n * @property {geo.geoPosition} center The target center.\n * @property {number} zoom The target zoom level.\n * @property {number} duration The duration of the transition in milliseconds.\n * @property {function} ease The easing function.\n */\ngeo_event.transitionend = 'geo_transitionend';\n\n/**\n * Triggered if a map navigation animation is canceled.\n *\n * @event geo.event.transitioncancel\n * @type {geo.event.base}\n * @property {geo.geoPosition} center The target center.\n * @property {number} zoom The target zoom level.\n * @property {number} duration The duration of the transition in milliseconds.\n * @property {function} ease The easing function.\n */\ngeo_event.transitioncancel = 'geo_transitioncancel';\n\n/**\n * Triggered when the parallel projection mode is changes.\n *\n * @event geo.event.parallelprojection\n * @type {geo.event.base}\n * @property {boolean} paralellProjection `true` if parallel projection is\n *      turned on.\n */\ngeo_event.parallelprojection = 'geo_parallelprojection';\n\n/**\n * This event object provides mouse/keyboard events that can be handled\n * by the features.  This provides a similar interface as core events,\n * but with different names so the events don't interfere.  Subclasses\n * can override this to provide custom events.\n *\n * These events will only be triggered on features which were instantiated\n * with the option 'selectionAPI'.\n * @namespace geo.event.feature\n */\ngeo_event.feature = {\n  /**\n   * The event is the feature version of {@link geo.event.mousemove}.  It is\n   * fired for each data component of a feature below the mouse when the mouse\n   * moves.\n   *\n   * @event geo.event.feature.mousemove\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is over.\n   * @property {number} index The index of the feature data the mouse is over.\n   * @property {object} extra Extra information about the feature and mouse\n   *    location.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse moves over simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  mousemove:  'geo_feature_mousemove',\n  /**\n   * This event is fired for each data component of a feature when the mouse is\n   * above it.\n   *\n   * @event geo.event.feature.mouseover\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is over.\n   * @property {number} index The index of the feature data the mouse is over.\n   * @property {object} extra Extra information about the feature and mouse\n   *    location.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse goes over simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  mouseover:  'geo_feature_mouseover',\n  /**\n   * This event is fired when the mouse changes either which feature components\n   * or the order of the feature components that it is over.\n   *\n   * @event geo.event.feature.mouseover_order\n   * @type {geo.event.base}\n   * @property {geo.feature} feature The feature.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @proeprty {geo.feature.searchResult} over A list of feature components\n   *    that the mouse is over.\n   * @proeprty {number[]} The indices of the data components that the mouse\n   *    was over before this event.\n   */\n  mouseover_order: 'geo_feature_mouseover_order',\n  /**\n   * The event is the feature version of {@link geo.event.mouseout}.a\n   * This event is fired for each data component of a feature when the mouse is\n   * no longer above it.\n   *\n   * @event geo.event.feature.mouseout\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is over.\n   * @property {number} index The index of the feature data the mouse is over.\n   * @property {object} extra Extra information about the feature and mouse\n   *    location.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse goes over simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  mouseout:   'geo_feature_mouseout',\n  /**\n   * This event is fired when mouse is over a new topmost data component of a\n   * feature.\n   *\n   * @event geo.event.feature.mouseon\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is on.\n   * @property {number} index The index of the feature data the mouse is on.\n   * @property {geo.mouseState} mouse The mouse state.\n   */\n  mouseon:    'geo_feature_mouseon',\n  /**\n   * This event is fired when mouse is no longer has the same topmost data\n   * component of a feature.\n   *\n   * @event geo.event.feature.mouseoff\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is off.\n   * @property {number} index The index of the feature data the mouse is off.\n   * @property {geo.mouseState} mouse The mouse state.\n   */\n  mouseoff:   'geo_feature_mouseoff',\n  /**\n   * The event is the feature version of {@link geo.event.mouseclick}.\n   *\n   * @event geo.event.feature.mouseclick\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is off.\n   * @property {number} index The index of the feature data the mouse is off.\n   * @property {object} extra Extra information about the feature and mouse\n   *    location.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse clicks simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  mouseclick: 'geo_feature_mouseclick',\n  /**\n   * The event contains the `feature`, the `mouse` record, and `over`, the\n   * record of data elements that are unrder the mouse.\n   *\n   * @event geo.event.feature.mouseclick_order\n   * @type {geo.event.base}\n   * @property {geo.feature} feature The feature that was clicked.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @proeprty {geo.feature.searchResult} over A list of feature components\n   *    that the mouse is over.\n   */\n  mouseclick_order: 'geo_feature_mouseclick_order',\n  /**\n   * This event is fired for each data component of a feature under a brush\n   * that has just finished its selection.\n   *\n   * @event geo.event.feature.brushend\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is over.\n   * @property {number} index The index of the feature data the mouse is over.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {geo.brushSelection} brush The current brush selection.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse goes over simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  brushend:   'geo_feature_brushend',\n  /**\n   * This event is fired for each data component of a feature under an active\n   * brush.\n   *\n   * @event geo.event.feature.brush\n   * @type {geo.event.base}\n   * @property {object} data The feature data the mouse is over.\n   * @property {number} index The index of the feature data the mouse is over.\n   * @property {geo.mouseState} mouse The mouse state.\n   * @property {geo.brushSelection} brush The current brush selection.\n   * @property {number} eventID a monotonically increasing event number.  All\n   *    features that the mouse goes over simultaneously will have the same\n   *    `eventID`.\n   * @property {boolean} top True if this is the topmost data element.\n   */\n  brush:      'geo_feature_brush'\n};\n\n/**\n * These events are triggered by the pixelmap feature.\n * @namespace geo.event.pixelmap\n */\ngeo_event.pixelmap = {\n  /**\n   * Report that an image associated with a pixel map has been prepared and\n   * rendered once.\n   *\n   * @event geo.event.pixelmap.prepared\n   * @type {geo.event.base}\n   * @property {geo.pixelmapFeature} pixelmap The pixelmap object that was\n   *    prepared.\n   */\n  prepared: 'geo_pixelmap_prepared'\n};\n\n/**\n * These events are triggered by the map screenshot feature.\n * @namespace geo.event.screenshot\n */\ngeo_event.screenshot = {\n  /**\n   * Triggered when a screenshot has been completed.\n   *\n   * @event geo.event.screenshot.ready\n   * @type {geo.event.base}\n   * @property {HTMLCanvasElement} canvas The canvas used to take the\n   *    screenshot.\n   * @property {string|HTMLCanvasElement} screenshot The screenshot as a\n   *    dataURL string or the canvas, depending on the screenshot request.\n   */\n  ready: 'geo_screenshot_ready'\n};\n\n/**\n * These events are triggered by the camera when it's internal state is\n * mutated.\n * @namespace geo.event.camera\n */\ngeo_event.camera = {};\n\n/**\n * Triggered after a general view matrix change (any change in the visible\n * bounds).  This is equivalent to the union of pan and zoom.\n *\n * @event geo.event.camera.view\n * @type {geo.event.base}\n * @property {geo.camera} camera The camera instance.\n */\ngeo_event.camera.view = 'geo_camera_view';\n\n/**\n * Triggered after a projection change.\n *\n * @event geo.event.camera.projection\n * @type {geo.event.base}\n * @property {geo.camera} camera The camera instance.\n * @property {string} type The projection type, either `'perspective'` or\n *      `'parallel'`.\n */\ngeo_event.camera.projection = 'geo_camera_projection';\n\n/**\n * Triggered after a viewport change.\n *\n * @event geo.event.camera.viewport\n * @type {geo.event.base}\n * @property {geo.camera} camera The camera instance.\n * @property {geo.screenSize} viewport The new viewport size.\n */\ngeo_event.camera.viewport = 'geo_camera_viewport';\n\n/**\n * These events are triggered by the annotation layer.\n * @namespace geo.event.annotation\n */\ngeo_event.annotation = {};\n\n/**\n * Triggered when an annotation has been added.\n *\n * @event geo.event.annotation.add\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that was added.\n */\ngeo_event.annotation.add = 'geo_annotation_add';\n\n/**\n * Triggered when an annotation is about to be added.\n *\n * @event geo.event.annotation.add_before\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that will be added.\n */\ngeo_event.annotation.add_before = 'geo_annotation_add_before';\n\n/**\n * Triggered when an annotation has been altered.  This is currently only\n * triggered when updating existing annotations via the geojson function.\n *\n * @event geo.event.annotation.update\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that was altered.\n */\ngeo_event.annotation.update = 'geo_annotation_update';\n\n/**\n * Triggered when an annotation's coordinates have been updated.\n *\n * @event geo.event.annotation.coordinates\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that was altered.\n */\ngeo_event.annotation.coordinates = 'geo_annotation_coordinates';\n\n/**\n * Triggered when an annotation's edit handle is selected or released.\n *\n * @event geo.event.annotation.select_edit_handle\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that has an edit handle\n *   selected or unselected.\n * @property {object} handle Information on the edit handle.\n * @property {boolean} enable Truthy if the handle was enabled, falsy if\n *   disabled.\n */\ngeo_event.annotation.select_edit_handle = 'geo_annotation_select_edit_handle';\n\n/**\n * Triggered when an action is performed on an annotation's edit handle.\n *\n * @event geo.event.annotation.edit_action\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that has an edit handle\n *   selected or unselected.\n * @property {object} handle Information on the edit handle.\n * @property {boolean} action The edit action, typically one of\n *  {@link geo.event.actiondown}, {@link geo.event.actionmove},\n *  {@link geo.event.actionup}.\n */\ngeo_event.annotation.edit_action = 'geo_annotation_edit_action';\n\n/**\n * Triggered when an annotation has been removed.\n *\n * @event geo.event.annotation.remove\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that was removed.\n */\ngeo_event.annotation.remove = 'geo_annotation_remove';\n\n/**\n * Triggered when an annotation's state changes.\n *\n * @event geo.event.annotation.state\n * @type {geo.event.base}\n * @property {geo.annotation} annotation The annotation that changed.\n */\ngeo_event.annotation.state = 'geo_annotation_state';\n\n/**\n * Triggered when the annotation mode is changed.\n *\n * @event geo.event.annotation.mode\n * @type {geo.event.base}\n * @property {string?} mode The new annotation mode.  This is one of the values\n *      from {@link geo.annotation.state}.\n * @property {string?} oldMode The annotation mode before this change.  This is\n *      one of the values from {@link geo.annotation.state}.\n */\ngeo_event.annotation.mode = 'geo_annotation_mode';\n\nmodule.exports = geo_event;\n\n\n\n// WEBPACK FOOTER //\n// ./event.js","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-object.js\n// module id = 16\n// module chunks = 0 1","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_a-function.js\n// module id = 17\n// module chunks = 0 1","var proj4 = require('proj4');\nproj4 = proj4.__esModule ? proj4.default : proj4;\n/* Ensure all projections in proj4 are included. */\nvar projections = require.context('proj4/projections', true, /.*\\.js$/);\nprojections.keys().forEach(function (key) {\n  proj4.Proj.projections.add(projections(key));\n});\nvar util = require('./util');\n\nvar transformCache = {};\n/* Up to maxTransformCacheSize squared might be cached.  When the maximum cache\n * size is reached, the cache is completely emptied.  Since we probably won't\n * be rapidly switching between a large number of transforms, this is adequate\n * simple behavior. */\nvar maxTransformCacheSize = 10;\n\n/**\n * This purpose of this class is to provide a generic interface for computing\n * coordinate transformationss.  The interface is taken from the proj4js,\n * which also provides the geospatial projection implementation.  The\n * interface is intentionally simple to allow for custom, non-geospatial use\n * cases. For further details, see http://proj4js.org/\n *\n * The default transforms lat/long coordinates into web mercator\n * for use with standard tile sets.\n *\n * This class is intended to be extended in the future to support 2.5 and 3\n * dimensional transformations.  The forward/inverse methods take optional\n * z values that are ignored in current mapping context, but will in the\n * future perform more general 3D transformations.\n *\n * @class\n * @alias geo.transform\n * @param {object} options Constructor options\n * @param {string} options.source A proj4 string for the source projection\n * @param {string} options.target A proj4 string for the target projection\n * @returns {geo.transform}\n */\nvar transform = function (options) {\n  'use strict';\n  if (!(this instanceof transform)) {\n    options = options || {};\n    if (!(options.source in transformCache)) {\n      if (Object.size(transformCache) >= maxTransformCacheSize) {\n        transformCache = {};\n      }\n      transformCache[options.source] = {};\n    }\n    if (!(options.target in transformCache[options.source])) {\n      if (Object.size(transformCache[options.source]) >= maxTransformCacheSize) {\n        transformCache[options.source] = {};\n      }\n      transformCache[options.source][options.target] = new transform(options);\n    }\n    return transformCache[options.source][options.target];\n  }\n\n  var m_this = this,\n      m_proj,   // The raw proj4js object\n      m_source, // The source projection\n      m_target; // The target projection\n\n  /**\n   * Generate the internal proj4 object.\n   * @private\n   */\n  function generate_proj4() {\n    m_proj = new proj4(\n      m_this.source(),\n      m_this.target()\n    );\n  }\n\n  /**\n   * Get/Set the source projection.\n   *\n   * @param {string} [arg] The new source projection.  If `undefined`, return\n   *    the current source projection.\n   * @returns {string|this} The current source projection if it was queried,\n   *    otherwise the current transform object.\n   */\n  this.source = function (arg) {\n    if (arg === undefined) {\n      return m_source || 'EPSG:4326';\n    }\n    m_source = arg;\n    generate_proj4();\n    return m_this;\n  };\n\n  /**\n   * Get/Set the target projection.\n   *\n   * @param {string} [arg] The new target projection.  If `undefined`, return\n   *    the current target projection.\n   * @returns {string|this} The current target projection if it was queried,\n   *    otherwise the current transform object.\n   */\n  this.target = function (arg) {\n    if (arg === undefined) {\n      return m_target || 'EPSG:3857';\n    }\n    m_target = arg;\n    generate_proj4();\n    return m_this;\n  };\n\n  /**\n   * Perform a forward transformation (source -> target).\n   * @protected\n   *\n   * @param {geo.geoPosition} point The point in source coordinates.\n   * @returns {geo.geoPosition} A point object in the target coordinates.\n   */\n  this._forward = function (point) {\n    var pt = m_proj.forward(point);\n    pt.z = point.z || 0;\n    return pt;\n  };\n\n  /**\n   * Perform an inverse transformation (target -> source).\n   * @protected\n   *\n   * @param {geo.geoPosition} point The point in target coordinates.\n   * @returns {geo.geoPosition} A point object in the source coordinates.\n   */\n  this._inverse = function (point) {\n    var pt = m_proj.inverse(point);\n    pt.z = point.z || 0;\n    return pt;\n  };\n\n  /**\n   * Perform a forward transformation (source -> target) in place.\n   * @protected\n   *\n   * @param {geo.geoPosition|geo.geoPosition[]} point The point coordinates\n   *    or array of points in source coordinates.\n   * @returns {geo.geoPosition|geo.geoPosition[]} A point object or array in\n   *    the target coordinates.\n   */\n  this.forward = function (point) {\n    if (Array.isArray(point)) {\n      return point.map(m_this._forward);\n    }\n    return m_this._forward(point);\n  };\n\n  /**\n   * Perform an inverse transformation (target -> source) in place.\n   * @protected\n   *\n   * @param {geo.geoPosition|geo.geoPosition[]} point The point coordinates\n   *    or array of points in target coordinates.\n   * @returns {geo.geoPosition|geo.geoPosition[]} A point object or array in\n   *    the source coordinates.\n   */\n  this.inverse = function (point) {\n    if (Array.isArray(point)) {\n      return point.map(m_this._inverse);\n    }\n    return m_this._inverse(point);\n  };\n\n  // Set defaults given by the constructor\n  options = options || {};\n  try {\n    this.source(options.source);\n  } catch (err) {\n    console.error('Can\\'t use transform source: ' + options.source);\n    this.source('EPSG:4326');\n  }\n  try {\n    this.target(options.target);\n  } catch (err) {\n    console.error('Can\\'t use transform target: ' + options.target);\n    this.target('EPSG:3857');\n  }\n\n  return this;\n};\n\n/**\n * Contains a reference to `proj4.defs`.  The functions serves two\n * purposes.\n *\n *   1. It is a key value mapping of all loaded projection definitions\n *   2. It is a function that will add additional definitions.\n *\n * See:\n *   http://proj4js.org/\n */\ntransform.defs = proj4.defs;\n\n/**\n * Look up a projection definition from epsg.io.\n * For the moment, we only handle `EPSG` codes.\n *\n * @param {string} projection A projection alias (e.g. EPSG:4326)\n * @returns {promise} Resolves with the proj4 definition\n */\ntransform.lookup = function (projection) {\n  var $ = require('jquery');\n  var code, defer = $.Deferred(), parts;\n\n  if (proj4.defs.hasOwnProperty(projection)) {\n    return defer.resolve(proj4.defs[projection]);\n  }\n\n  parts = projection.split(':');\n  if (parts.length !== 2 || parts[0].toUpperCase() !== 'EPSG') {\n    return defer.reject('Invalid projection code').promise();\n  }\n  code = parts[1];\n\n  return $.ajax({\n    url: 'http://epsg.io/?q=' + code + '&format=json'\n  }).done(function (data) {\n    var result = (data.results || [])[0];\n    if (!result || !result.proj4) {\n      return defer.reject(data).promise();\n    }\n\n    proj4.defs(projection, result.proj4);\n    return $.when(proj4.defs[projection]);\n  });\n};\n\n/**\n * Transform an array of coordinates from one projection into another.  The\n * transformation may occur in place (modifying the input coordinate array),\n * depending on the input format.  The coordinates can be an object with x,\n * y, and (optionally z) or an array of 2 or 3 values, or an array of either\n * of those, or a single flat array with 2 or 3 components per coordinate.\n * Arrays are always modified in place.  Individual point objects are not\n * altered; new point objects are returned unless no transform is needed.\n *\n * @param {string} srcPrj The source projection.\n * @param {string} tgtPrj The destination projection.\n * @param {geoPosition|geoPosition[]|number[]} coordinates An array of\n *      coordinate objects.  These may be in object or array form, or a flat\n *      array.\n * @param {number} numberOfComponents For flat arrays, either 2 or 3.\n * @returns {geoPosition|geoPosition[]|number[]} The transformed coordinates.\n */\ntransform.transformCoordinates = function (srcPrj, tgtPrj, coordinates, numberOfComponents) {\n  'use strict';\n\n  if (srcPrj === tgtPrj) {\n    return coordinates;\n  }\n\n  var trans = transform({source: srcPrj, target: tgtPrj}), output;\n  if (util.isObject(coordinates) && 'x' in coordinates && 'y' in coordinates) {\n    output = trans.forward({x: +coordinates.x, y: +coordinates.y, z: +coordinates.z || 0});\n    if ('z' in coordinates) {\n      return output;\n    }\n    return {x: output.x, y: output.y};\n  }\n  if (Array.isArray(coordinates) && coordinates.length === 1 &&\n      util.isObject(coordinates[0]) && 'x' in coordinates[0] &&\n      'y' in coordinates[0]) {\n    output = trans.forward({x: +coordinates[0].x, y: +coordinates[0].y, z: +coordinates[0].z || 0});\n    if ('z' in coordinates[0]) {\n      return [output];\n    }\n    return [{x: output.x, y: output.y}];\n  }\n  return transform.transformCoordinatesArray(trans, coordinates, numberOfComponents);\n};\n\n/**\n * Transform an array of coordinates from one projection into another.  The\n * transformation may occur in place (modifying the input coordinate array),\n * depending on the input format.  The coordinates can be an array of 2 or 3\n * values, or an array of either of those, or a single flat array with 2 or 3\n * components per coordinate.  The array is modified in place.\n *\n * @param {transform} trans The transformation object.\n * @param {geoPosition[]|number[]} coordinates An array of coordinate\n *      objects or a flat array.\n * @param {number} numberOfComponents For flat arrays, either 2 or 3.\n * @returns {geoPosition[]|number[]} The transformed coordinates\n */\ntransform.transformCoordinatesArray = function (trans, coordinates, numberOfComponents) {\n  var i, count, offset, xAcc, yAcc, zAcc, writer, output, projPoint;\n\n  // Default Z accessor\n  zAcc = function () {\n    return 0.0;\n  };\n\n  // Helper methods\n  function handleArrayCoordinates() {\n    if (Array.isArray(coordinates[0])) {\n      if (coordinates[0].length === 2) {\n        xAcc = function (index) {\n          return +coordinates[index][0];\n        };\n        yAcc = function (index) {\n          return +coordinates[index][1];\n        };\n        writer = function (index, x, y) {\n          output[index] = [x, y];\n        };\n      } else if (coordinates[0].length === 3) {\n        xAcc = function (index) {\n          return +coordinates[index][0];\n        };\n        yAcc = function (index) {\n          return +coordinates[index][1];\n        };\n        zAcc = function (index) {\n          return +coordinates[index][2];\n        };\n        writer = function (index, x, y, z) {\n          output[index] = [x, y, z];\n        };\n      } else {\n        throw new Error('Invalid coordinates. Requires two or three components per array');\n      }\n    } else {\n      if (coordinates.length === 2) {\n        offset = 2;\n\n        xAcc = function (index) {\n          return +coordinates[index * offset];\n        };\n        yAcc = function (index) {\n          return +coordinates[index * offset + 1];\n        };\n        writer = function (index, x, y) {\n          output[index] = x;\n          output[index + 1] = y;\n        };\n      } else if (coordinates.length === 3) {\n        offset = 3;\n\n        xAcc = function (index) {\n          return +coordinates[index * offset];\n        };\n        yAcc = function (index) {\n          return +coordinates[index * offset + 1];\n        };\n        zAcc = function (index) {\n          return +coordinates[index * offset + 2];\n        };\n        writer = function (index, x, y, z) {\n          output[index] = x;\n          output[index + 1] = y;\n          output[index + 2] = z;\n        };\n      } else if (numberOfComponents) {\n        if (numberOfComponents === 2 || numberOfComponents === 3) {\n          offset = numberOfComponents;\n\n          xAcc = function (index) {\n            return +coordinates[index];\n          };\n          yAcc = function (index) {\n            return +coordinates[index + 1];\n          };\n          if (numberOfComponents === 2) {\n            writer = function (index, x, y) {\n              output[index] = x;\n              output[index + 1] = y;\n            };\n          } else {\n            zAcc = function (index) {\n              return +coordinates[index + 2];\n            };\n            writer = function (index, x, y, z) {\n              output[index] = x;\n              output[index + 1] = y;\n              output[index + 2] = z;\n            };\n          }\n        } else {\n          throw new Error('Number of components should be two or three');\n        }\n      } else {\n        throw new Error('Invalid coordinates');\n      }\n    }\n  }\n\n  // Helper methods\n  function handleObjectCoordinates() {\n    if (coordinates[0] &&\n        'x' in coordinates[0] &&\n        'y' in coordinates[0]) {\n      xAcc = function (index) {\n        return +coordinates[index].x;\n      };\n      yAcc = function (index) {\n        return +coordinates[index].y;\n      };\n\n      if ('z' in coordinates[0]) {\n        zAcc = function (index) {\n          return +coordinates[index].z;\n        };\n        writer = function (index, x, y, z) {\n          output[i] = {x: x, y: y, z: z};\n        };\n      } else {\n        writer = function (index, x, y) {\n          output[index] = {x: x, y: y};\n        };\n      }\n    } else {\n      throw new Error('Invalid coordinates');\n    }\n  }\n\n  if (Array.isArray(coordinates)) {\n    output = [];\n    output.length = coordinates.length;\n    count = coordinates.length;\n\n    if (!coordinates.length) {\n      return output;\n    }\n    if (Array.isArray(coordinates[0]) || util.isObject(coordinates[0])) {\n      offset = 1;\n\n      if (Array.isArray(coordinates[0])) {\n        handleArrayCoordinates();\n      } else if (util.isObject(coordinates[0])) {\n        handleObjectCoordinates();\n      }\n    } else {\n      handleArrayCoordinates();\n    }\n  } else {\n    throw new Error('Coordinates are not valid');\n  }\n\n  for (i = 0; i < count; i += offset) {\n    projPoint = trans.forward({x: xAcc(i), y: yAcc(i), z: zAcc(i)});\n    writer(i, projPoint.x, projPoint.y, projPoint.z);\n  }\n  return output;\n};\n\n/**\n * Apply an affine transformation consisting of a translation then a scaling\n * to the given coordinate array.  Note, the transformation occurs in place\n * so the input coordinate object are mutated.\n *\n * @param {object} def\n * @param {geo.geoPosition} def.origin The transformed origin\n * @param {object} def.scale The transformed scale factor.  This is an object\n *  with `x`, `y`, and `z` parameters.\n * @param {geo.geoPosition[]} coords An array of coordinate objects.\n * @returns {geo.geoPosition[]} The transformed coordinates.\n */\ntransform.affineForward = function (def, coords) {\n  'use strict';\n  var i, origin = def.origin, scale = def.scale || {x: 1, y: 1, z: 1};\n  for (i = 0; i < coords.length; i += 1) {\n    coords[i].x = (coords[i].x - origin.x) * scale.x;\n    coords[i].y = (coords[i].y - origin.y) * scale.y;\n    coords[i].z = ((coords[i].z || 0) - (origin.z || 0)) * scale.z;\n  }\n  return coords;\n};\n\n/**\n * Apply an inverse affine transformation which is the inverse to\n * {@link geo.transform.affineForward}.  Note, the transformation occurs in\n * place so the input coordinate object are mutated.\n *\n * @param {object} def\n * @param {geo.geoPosition} def.origin The transformed origin\n * @param {object} def.scale The transformed scale factor.  This is an object\n *  with `x`, `y`, and `z` parameters.\n * @param {geo.geoPosition[]} coords An array of coordinate objects.\n * @returns {geo.geoPosition[]} The transformed coordinates.\n */\ntransform.affineInverse = function (def, coords) {\n  'use strict';\n  var i, origin = def.origin, scale = def.scale || {x: 1, y: 1, z: 1};\n  for (i = 0; i < coords.length; i += 1) {\n    coords[i].x = coords[i].x / scale.x + origin.x;\n    coords[i].y = coords[i].y / scale.y + origin.y;\n    coords[i].z = (coords[i].z || 0) / scale.z + (origin.z || 0);\n  }\n  return coords;\n};\n\n/**\n * Compute the distance on the surface on a sphere.  The sphere is the major\n * radius of a specified ellipsoid.  Altitude is ignored.\n *\n * @param {geo.geoPosition} pt1 The first point.\n * @param {geo.geoPosition} pt2 The second point.\n * @param {string|geo.transform} [gcs] `undefined` to use the same gcs as the\n *    ellipsoid, otherwise the gcs of the points.\n * @param {string|geo.transform} [baseGcs='EPSG:4326'] the gcs of the\n *    ellipsoid.\n * @param {object} [ellipsoid=proj4.WGS84] An object with at least `a` and one\n *    of `b`, `f`, or `rf` (1 / `f`) -- this works with  proj4 ellipsoid\n *    definitions.\n * @param {number} [maxIterations=100] Maximum number of iterations to use\n *    to test convergence.\n * @returns {number} The distance in meters (or whatever units the ellipsoid\n *    was specified in.\n */\ntransform.sphericalDistance = function (pt1, pt2, gcs, baseGcs, ellipsoid) {\n  baseGcs = baseGcs || 'EPSG:4326';\n  ellipsoid = ellipsoid || proj4.WGS84;\n  gcs = gcs || baseGcs;\n  if (gcs !== baseGcs) {\n    var pts = transform.transformCoordinates(gcs, baseGcs, [pt1, pt2]);\n    pt1 = pts[0];\n    pt2 = pts[1];\n  }\n  // baseGcs must be in degrees or this will be wrong\n  var phi1 = pt1.y * Math.PI / 180,\n      phi2 = pt2.y * Math.PI / 180,\n      lambda = (pt2.x - pt1.x) * Math.PI / 180,\n      sinphi1 = Math.sin(phi1), cosphi1 = Math.cos(phi1),\n      sinphi2 = Math.sin(phi2), cosphi2 = Math.cos(phi2);\n  var sigma = Math.atan2(\n    Math.pow(\n      Math.pow(cosphi2 * Math.sin(lambda), 2) +\n      Math.pow(cosphi1 * sinphi2 - sinphi1 * cosphi2 * Math.cos(lambda), 2), 0.5),\n    sinphi1 * sinphi2 + cosphi1 * cosphi2 * Math.cos(lambda)\n  );\n  return ellipsoid.a * sigma;\n};\n\n/**\n * Compute the Vincenty distance on the surface on an ellipsoid.  Altitude is\n * ignored.\n *\n * @param {geo.geoPosition} pt1 The first point.\n * @param {geo.geoPosition} pt2 The second point.\n * @param {string|geo.transform} [gcs] `undefined` to use the same gcs as the\n *    ellipsoid, otherwise the gcs of the points.\n * @param {string|geo.transform} [baseGcs='EPSG:4326'] the gcs of the\n *    ellipsoid.\n * @param {object} [ellipsoid=proj4.WGS84] An object with at least `a` and one\n *    of `b`, `f`, or `rf` (1 / `f`) -- this works with  proj4 ellipsoid\n *    definitions.\n * @param {number} [maxIterations=100] Maximum number of iterations to use\n *    to test convergence.\n * @returns {object} An object with `distance` in meters (or whatever units the\n *    ellipsoid was specified in), `alpha1` and `alpha2`, the azimuths at the\n *    two points in radians.  The result may be `undefined` if the formula\n *    fails to converge, which can happen near antipodal points.\n */\ntransform.vincentyDistance = function (pt1, pt2, gcs, baseGcs, ellipsoid, maxIterations) {\n  baseGcs = baseGcs || 'EPSG:4326';\n  ellipsoid = ellipsoid || proj4.WGS84;\n  maxIterations = maxIterations || 100;\n  gcs = gcs || baseGcs;\n  if (gcs !== baseGcs) {\n    var pts = transform.transformCoordinates(gcs, baseGcs, [pt1, pt2]);\n    pt1 = pts[0];\n    pt2 = pts[1];\n  }\n  var a = ellipsoid.a,\n      b = ellipsoid.b || ellipsoid.a * (1.0 - (ellipsoid.f || 1.0 / ellipsoid.rf)),\n      f = ellipsoid.f || (ellipsoid.rf ? 1.0 / ellipsoid.rf : 1.0 - b / a),\n      // baseGcs must be in degrees or this will be wrong\n      phi1 = pt1.y * Math.PI / 180,\n      phi2 = pt2.y * Math.PI / 180,\n      L = (((pt2.x - pt1.x) % 360 + 360) % 360) * Math.PI / 180,\n      U1 = Math.atan((1 - f) * Math.tan(phi1)),  // reduced latitude\n      U2 = Math.atan((1 - f) * Math.tan(phi2)),\n      sinU1 = Math.sin(U1), cosU1 = Math.cos(U1),\n      sinU2 = Math.sin(U2), cosU2 = Math.cos(U2),\n      lambda = L, lastLambda = L + Math.PI * 2,\n      sinSigma, cosSigma, sigma, sinAlpha, cos2alpha, cos2sigmasubm, C,\n      u2, A, B, deltaSigma, iter;\n  if (phi1 === phi2 && !L) {\n    return {\n      distance: 0,\n      alpha1: 0,\n      alpha2: 0\n    };\n  }\n  for (iter = maxIterations; iter > 0 && Math.abs(lambda - lastLambda) > 1e-12; iter -= 1) {\n    sinSigma = Math.pow(\n      Math.pow(cosU2 * Math.sin(lambda), 2) +\n      Math.pow(cosU1 * sinU2 - sinU1 * cosU2 * Math.cos(lambda), 2), 0.5);\n    cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * Math.cos(lambda);\n    sigma = Math.atan2(sinSigma, cosSigma);\n    sinAlpha = cosU1 * cosU2 * Math.sin(lambda) / sinSigma;\n    cos2alpha = 1 - Math.pow(sinAlpha, 2);\n    // cos2alpha is zero only when phi1 and phi2 are nearly zero.  In this\n    // case, sinU1 and sinU2 are nearly zero and the the second term can be\n    // dropped\n    cos2sigmasubm = cosSigma - (cos2alpha ? 2 * sinU1 * sinU2 / cos2alpha : 0);\n    C = f / 16 * cos2alpha * (4 + f * (4 - 3 * cos2alpha));\n    lastLambda = lambda;\n    lambda = L + (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (\n      cos2sigmasubm + C * cosSigma * (-1 + 2 * Math.pow(cos2sigmasubm, 2))));\n  }\n  if (!iter) { // failure to converge\n    return;\n  }\n  u2 = cos2alpha * (a * a - b * b) / (b * b);\n  A = 1 + u2 / 16384 * (4096 + u2 * (-768 + u2 * (320 - 175 * u2)));\n  B = u2 / 1024 * (256 + u2 * (-128 + u2 * (74 - 47 * u2)));\n  deltaSigma = B * sinSigma * (cos2sigmasubm + B / 4 * (\n    cosSigma * (-1 + 2 * Math.pow(cos2sigmasubm, 2)) -\n    B / 6 * cos2sigmasubm * (-3 + 4 * sinSigma * sinSigma) *\n    (-3 + 4 * Math.pow(cos2sigmasubm, 2))));\n  return {\n    distance: b * A * (sigma - deltaSigma),\n    alpha1: Math.atan2(cosU2 * Math.sin(lambda), cosU1 * sinU2 - sinU1 * cosU2 * Math.cos(lambda)),\n    alpha2: Math.atan2(cosU1 * Math.sin(lambda), -sinU1 * cosU2 + cosU1 * sinU2 * Math.cos(lambda))\n  };\n};\n\n/* Expose proj4 to make it easier to debug */\ntransform.proj4 = proj4;\n\nmodule.exports = transform;\n\n\n\n// WEBPACK FOOTER //\n// ./transform.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar sceneObject = require('./sceneObject');\nvar timestamp = require('./timestamp');\nvar geo_event = require('./event');\n\n/**\n * General specification for features.\n *\n * @typedef {object} geo.feature.spec\n * @property {geo.layer} [layer] the parent layer associated with the feature.\n * @property {boolean|'auto'} [selectionAPI='auto'] If `'auto'`, enable\n *   selection events if any {@link geo.event.feature} events are bound to the\n *   feature.  Otherwise, if truthy, enable selection events on the feature.\n *   Selection events are those in {@link geo.event.feature}.  They can be\n *   bound via a call like\n *   ```\n *   feature.geoOn(geo.event.feature.mousemove, function (evt) {\n *     // do something with the feature\n *   });\n *   ```\n *   where the handler is passed a {@link geo.event.feature} object.\n * @property {boolean} [visible=true] If truthy, show the feature.  If falsy,\n *   hide the feature and do not allow interaction with it.\n * @property {string} [gcs] The interface gcs for this feature.  If `undefined`\n *   or `null`, this uses the layer's interface gcs.  This is a string used by\n *   {@link geo.transform}.\n * @property {number} [bin=null] The bin number is used to determine the order\n *   of multiple features on the same layer.  It has no effect except on the\n *   vgl renderer.  A negative value hides the feature without stopping\n *   interaction with it.  Otherwise, more features with higher bin numbers are\n *   drawn above those with lower bin numbers.  If two features have the same\n *   bin number, their order relative to one another is indeterminate and may\n *   be unstable.  A value of `null` will use the current position of the\n *   feature within its parent's list of children as the bin number.\n * @property {geo.renderer?} [renderer] A reference to the renderer used for\n *   the feature.\n * @property {geo.feature.styleSpec} [style] An object that contains style\n *   values for the feature.\n */\n\n/**\n * Style specification for a feature.\n *\n * @typedef {object} geo.feature.styleSpec\n * @property {number|function} [opacity=1] The opacity for the whole feature on\n *    a scale of 0 to 1.\n */\n\n/**\n * @typedef {geo.feature.spec} geo.feature.createSpec\n * @property {string} type A supported feature type.\n * @property {object[]} [data=[]] An array of arbitrary objects used to\n *   construct the feature.  These objects (and their associated indices in the\n *   array) will be passed back to style and attribute accessors provided by\n *   the user.\n */\n\n/**\n * @typedef {geo.event} geo.feature.event\n * @property {number} index The index of the feature within the data array.\n * @property {object} data The data element associated with the indexed\n *   feature.\n * @property {geo.mouseState} mouse The mouse information during the event.\n * @property {object} [extra] Additional information about the feature.  This\n *   is sometimes used to identify a subsection of the feature.\n * @property {number} [eventID] A monotonically increasing number identifying\n *   this feature event loop.  This is provided on\n *   {@link geo.event.feature.mousemove}, {@link geo.event.feature.mouseclick},\n *   {@link geo.event.feature.mouseover}, {@link geo.event.feature.mouseout},\n *   {@link geo.event.feature.brush}, and {@link geo.event.feature.brushend}\n *   events, since each of those can trigger multiple events for one mouse\n *   action (all events triggered by the same mouse action will have the same\n *   `eventID`).\n * @property {boolean} [top] `true` if this is the top-most feature that the\n *   mouse is over.  Only the top-most feature gets\n *   {@link geo.event.feature.mouseon} events, whereas multiple features can\n *   get other events.\n */\n\n/**\n * @typedef {object} geo.feature.searchResult\n * @property {object[]} found A list of elements from the data array that were\n *   found by the search.\n * @property {number[]} index A list of the indices of the elements that were\n *   found by the search.\n * @property {object[]} [extra] A list of additional information per found\n *   element.  The information is passed to events without change.\n */\n\n/**\n * Create a new instance of class feature.\n *\n * @class\n * @alias geo.feature\n * @extends geo.sceneObject\n * @param {geo.feature.spec} [arg] A feature specification.\n * @returns {geo.feature}\n */\nvar feature = function (arg) {\n  'use strict';\n  if (!(this instanceof feature)) {\n    return new feature(arg);\n  }\n  sceneObject.call(this);\n\n  var util = require('./util');\n\n  /**\n   * @private\n   */\n  arg = arg || {};\n\n  var m_this = this,\n      s_exit = this._exit,\n      s_geoOn = this.geoOn,\n      s_geoOff = this.geoOff,\n      m_ready,\n      m_selectionAPI = arg.selectionAPI === undefined ? 'auto' : arg.selectionAPI,\n      m_style = {},\n      m_layer = arg.layer === undefined ? null : arg.layer,\n      m_gcs = arg.gcs,\n      m_visible = arg.visible === undefined ? true : arg.visible,\n      m_bin = arg.bin === undefined ? null : arg.bin,\n      m_renderer = arg.renderer === undefined ? null : arg.renderer,\n      m_dataTime = timestamp(),\n      m_buildTime = timestamp(),\n      m_updateTime = timestamp(),\n      m_dependentFeatures = [],\n      m_selectedFeatures = [];\n\n  // subclasses can add keys to this for styles that apply to subcomponents of\n  // data items, such as individual vertices on lines or polygons.\n  this._subfeatureStyles = {};\n\n  /**\n   * @property {boolean} ready `true` if this feature has been initialized,\n   *    `false` if it was destroyed, `undefined` if it was created but not\n   *    initialized.\n   * @name geo.feature#ready\n   */\n  Object.defineProperty(this, 'ready', {\n    get: function () {\n      return m_ready;\n    }\n  });\n\n  /**\n   * Private method to bind mouse handlers on the map element.  This does\n   * nothing if the selectionAPI is turned off.  Otherwise, it first unbinds\n   * any existing handlers and then binds handlers.\n   */\n  this._bindMouseHandlers = function () {\n    // Don't bind handlers for improved performance on features that don't\n    // require it.\n    if (!m_this.selectionAPI()) {\n      return;\n    }\n\n    // First unbind to be sure that the handlers aren't bound twice.\n    m_this._unbindMouseHandlers();\n\n    m_this.geoOn(geo_event.mousemove, m_this._handleMousemove);\n    m_this.geoOn(geo_event.mouseclick, m_this._handleMouseclick);\n    m_this.geoOn(geo_event.brushend, m_this._handleBrushend);\n    m_this.geoOn(geo_event.brush, m_this._handleBrush);\n  };\n\n  /**\n   * Private method to unbind mouse handlers on the map element.\n   */\n  this._unbindMouseHandlers = function () {\n    m_this.geoOff(geo_event.mousemove, m_this._handleMousemove);\n    m_this.geoOff(geo_event.mouseclick, m_this._handleMouseclick);\n    m_this.geoOff(geo_event.brushend, m_this._handleBrushend);\n    m_this.geoOff(geo_event.brush, m_this._handleBrush);\n  };\n\n  /**\n   * Search for features containing the given point.  This should be defined in\n   * relevant subclasses.\n   *\n   * @param {geo.geoPosition} geo Coordinate in interface gcs.\n   * @returns {geo.feature.searchResult} An object with a list of features and\n   *    feature indices that are located at the specified point.\n   */\n  this.pointSearch = function (geo) {\n    // base class method does nothing\n    return {\n      index: [],\n      found: []\n    };\n  };\n\n  /**\n   * Search for features contained within a rectangilar region.  This should be\n   * defined in relevant subclasses.\n   *\n   * @param {geo.geoPosition} lowerLeft Lower-left corner in gcs coordinates.\n   * @param {geo.geoPosition} upperRight Upper-right corner in gcs coordinates.\n   * @param {object} [opts] Additional search options.\n   * @param {boolean} [opts.partial=false] If truthy, include features that are\n   *    partially in the box, otherwise only include features that are fully\n   *    within the region.\n   * @returns {number[]} A list of features indices that are in the box region.\n   */\n  this.boxSearch = function (lowerLeft, upperRight, opts) {\n    // base class method does nothing\n    return [];\n  };\n\n  /**\n   * Private mousemove handler.  This uses `pointSearch` to determine which\n   * features the mouse is over, then fires appropriate events.\n   *\n   * @fires geo.event.feature.mouseover_order\n   * @fires geo.event.feature.mouseover\n   * @fires geo.event.feature.mouseout\n   * @fires geo.event.feature.mousemove\n   * @fires geo.event.feature.mouseoff\n   * @fires geo.event.feature.mouseon\n   */\n  this._handleMousemove = function () {\n    var mouse = m_this.layer().map().interactor().mouse(),\n        data = m_this.data(),\n        over = m_this.pointSearch(mouse.geo),\n        newFeatures = [], oldFeatures = [], lastTop = -1, top = -1, extra;\n\n    // exit if we have no old or new found entries\n    if (!m_selectedFeatures.length && !over.index.length) {\n      return;\n    }\n\n    extra = over.extra || {};\n\n    // if we are over more than one item, trigger an event that is allowed to\n    // reorder the values in evt.over.index.  Event handlers don't have to\n    // maintain evt.over.found.  Handlers should not modify evt.over.extra or\n    // evt.previous.\n    if (over.index.length > 1) {\n      m_this.geoTrigger(geo_event.feature.mouseover_order, {\n        feature: m_this,\n        mouse: mouse,\n        previous: m_selectedFeatures,\n        over: over\n      });\n    }\n\n    // Get the index of the element that was previously on top\n    if (m_selectedFeatures.length) {\n      lastTop = m_selectedFeatures[m_selectedFeatures.length - 1];\n    }\n\n    // There are probably faster ways of doing this:\n    newFeatures = over.index.filter(function (i) {\n      return m_selectedFeatures.indexOf(i) < 0;\n    });\n    oldFeatures = m_selectedFeatures.filter(function (i) {\n      return over.index.indexOf(i) < 0;\n    });\n\n    feature.eventID += 1;\n    // Fire events for mouse in first.\n    newFeatures.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.mouseover, {\n        data: data[i],\n        index: i,\n        extra: extra[i],\n        mouse: mouse,\n        eventID: feature.eventID,\n        top: idx === newFeatures.length - 1\n      }, true);\n    });\n\n    feature.eventID += 1;\n    // Fire events for mouse out next\n    oldFeatures.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.mouseout, {\n        data: data[i],\n        index: i,\n        mouse: mouse,\n        eventID: feature.eventID,\n        top: idx === oldFeatures.length - 1\n      }, true);\n    });\n\n    feature.eventID += 1;\n    // Fire events for mouse move last\n    over.index.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.mousemove, {\n        data: data[i],\n        index: i,\n        extra: extra[i],\n        mouse: mouse,\n        eventID: feature.eventID,\n        top: idx === over.index.length - 1\n      }, true);\n    });\n\n    // Replace the selected features array\n    m_selectedFeatures = over.index;\n\n    // Get the index of the element that is now on top\n    if (m_selectedFeatures.length) {\n      top = m_selectedFeatures[m_selectedFeatures.length - 1];\n    }\n\n    if (lastTop !== top) {\n      // The element on top changed so we need to fire mouseon/mouseoff\n      if (lastTop !== -1) {\n        m_this.geoTrigger(geo_event.feature.mouseoff, {\n          data: data[lastTop],\n          index: lastTop,\n          mouse: mouse\n        }, true);\n      }\n\n      if (top !== -1) {\n        m_this.geoTrigger(geo_event.feature.mouseon, {\n          data: data[top],\n          index: top,\n          extra: extra[top],\n          mouse: mouse\n        }, true);\n      }\n    }\n  };\n\n  /**\n   * Clear our tracked selected features.\n   *\n   * @returns {this}\n   */\n  this._clearSelectedFeatures = function () {\n    m_selectedFeatures = [];\n    return m_this;\n  };\n\n  /**\n   * Private mouseclick handler.  This uses `pointSearch` to determine which\n   * features the mouse is over, then fires a click event for each such\n   * feature.\n   *\n   * @param {geo.event} evt The event that triggered this handler.\n   * @fires geo.event.feature.mouseclick_order\n   * @fires geo.event.feature.mouseclick\n   */\n  this._handleMouseclick = function (evt) {\n    var mouse = m_this.layer().map().interactor().mouse(),\n        data = m_this.data(),\n        over = m_this.pointSearch(mouse.geo),\n        extra = over.extra || {};\n\n    // if we are over more than one item, trigger an event that is allowed to\n    // reorder the values in evt.over.index.  Event handlers don't have to\n    // maintain evt.over.found.  Handlers should not modify evt.over.extra.\n    if (over.index.length > 1) {\n      m_this.geoTrigger(geo_event.feature.mouseclick_order, {\n        feature: m_this,\n        mouse: mouse,\n        over: over\n      });\n    }\n    mouse.buttonsDown = evt.buttonsDown;\n    feature.eventID += 1;\n    over.index.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.mouseclick, {\n        data: data[i],\n        index: i,\n        extra: extra[i],\n        mouse: mouse,\n        eventID: feature.eventID,\n        top: idx === over.index.length - 1\n      }, true);\n    });\n  };\n\n  /**\n   * Private brush handler.  This uses `boxSearch` to determine which features\n   * the brush includes, then fires appropriate events.\n   *\n   * @param {geo.brushSelection} brush The current brush selection.\n   * @fires geo.event.feature.brush\n   */\n  this._handleBrush = function (brush) {\n    var idx = m_this.boxSearch(brush.gcs.lowerLeft, brush.gcs.upperRight),\n        data = m_this.data();\n\n    feature.eventID += 1;\n    idx.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.brush, {\n        data: data[i],\n        index: i,\n        mouse: brush.mouse,\n        brush: brush,\n        eventID: feature.eventID,\n        top: idx === idx.length - 1\n      }, true);\n    });\n  };\n\n  /**\n   * Private brushend handler.  This uses `boxSearch` to determine which\n   * features the brush includes, then fires appropriate events.\n   *\n   * @param {geo.brushSelection} brush The current brush selection.\n   * @fires geo.event.feature.brushend\n   */\n  this._handleBrushend = function (brush) {\n    var idx = m_this.boxSearch(brush.gcs.lowerLeft, brush.gcs.upperRight),\n        data = m_this.data();\n\n    feature.eventID += 1;\n    idx.forEach(function (i, idx) {\n      m_this.geoTrigger(geo_event.feature.brushend, {\n        data: data[i],\n        index: i,\n        mouse: brush.mouse,\n        brush: brush,\n        eventID: feature.eventID,\n        top: idx === idx.length - 1\n      }, true);\n    });\n  };\n\n  /**\n   * Get/Set style used by the feature.  Styles can be constant values or\n   * functions.  If a function, the style is typically called with parameters\n   * such as `(dataElement, dataIndex)` or, if the specific style of a feature\n   * has a subfeature style, with `(subfeatureElement, subfeatureIndex,\n   * dataElement, dataIndex)`.\n   *\n   * See the <a href=\"#.styleSpec\">style specification\n   * <code>styleSpec</code></a> for available styles.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the current style\n   *    object.  If a string and `arg2` is undefined, return the style\n   *    associated with the specified key.  If a string and `arg2` is defined,\n   *    set the named style to the specified value.  Otherwise, extend the\n   *    current style with the values in the specified object.\n   * @param {*} [arg2] If `arg1` is a string, the new value for that style.\n   * @returns {object|this} Either the entire style object, the value of a\n   *    specific style, or the current class instance.\n   */\n  this.style = function (arg1, arg2) {\n    if (arg1 === undefined) {\n      return m_style;\n    } else if (typeof arg1 === 'string' && arg2 === undefined) {\n      return m_style[arg1];\n    } else if (arg2 === undefined) {\n      m_style = $.extend({}, m_style, arg1);\n      m_this.modified();\n      return m_this;\n    } else {\n      m_style[arg1] = arg2;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * A uniform getter that always returns a function even for constant styles.\n   * This can also return all defined styles as functions in a single object.\n   *\n   * @function style_DOT_get\n   * @memberof geo.feature\n   * @instance\n   * @param {string} [key] If defined, return a function for the named style.\n   *    Otherwise, return an object with a function for all defined styles.\n   * @returns {function|object} Either a function for the named style or an\n   *    object with functions for all defined styles.\n   */\n  this.style.get = function (key) {\n    var out;\n    if (key === undefined) {\n      var all = {}, k;\n      for (k in m_style) {\n        if (m_style.hasOwnProperty(k)) {\n          all[k] = m_this.style.get(k);\n        }\n      }\n      return all;\n    }\n    if (key.toLowerCase().match(/color$/)) {\n      if (util.isFunction(m_style[key])) {\n        out = function () {\n          return util.convertColor(\n            m_style[key].apply(m_this, arguments)\n          );\n        };\n      } else {\n        // if the color is not a function, only convert it once\n        out = util.ensureFunction(util.convertColor(m_style[key]));\n      }\n    } else {\n      out = util.ensureFunction(m_style[key]);\n    }\n    return out;\n  };\n\n  /**\n   * Set style(s) from array(s).  For each style, the array should have one\n   * value per data item.  The values are not converted or validated.  Color\n   * values should be {@link geo.geoColorObject}s.  If invalid values are given\n   * the behavior is undefined.\n   *   For some feature styles, if the first entry of an array is itself an\n   * array, then each entry of the array is expected to be an array, and values\n   * are used from these subarrays.  This allows a style to apply, for\n   * instance, per vertex of a data item rather than per data item.\n   *\n   * @param {string|object} keyOrObject Either the name of a single style or\n   *    an object where the keys are the names of styles and the values are\n   *    each arrays.\n   * @param {array} styleArray If keyOrObject is a string, an array of values\n   *    for the style.  If keyOrObject is an object, this parameter is ignored.\n   * @param {boolean} [refresh=false] `true` to redraw the feature when it has\n   *    been updated.  If an object with styles is passed, the redraw is only\n   *    done once.\n   * @returns {this} The feature instance.\n   */\n  this.updateStyleFromArray = function (keyOrObject, styleArray, refresh) {\n    if (typeof keyOrObject !== 'string') {\n      $.each(keyOrObject, function (key, value) {\n        m_this.updateStyleFromArray(key, value);\n      });\n    } else {\n      /* colors are always expected to be objects with r, g, b values, so for\n       * any color, make sure we don't have undefined entries. */\n      var fallback;\n      if (keyOrObject.toLowerCase().match(/color$/)) {\n        fallback = {r: 0, g: 0, b: 0};\n      }\n      if (!Array.isArray(styleArray)) {\n        return m_this;\n      }\n      if (m_this._subfeatureStyles[keyOrObject]) {\n        if (styleArray.length && Array.isArray(styleArray[0])) {\n          m_this.style(keyOrObject, function (v, j, d, i) {\n            var val = (styleArray[i] || [])[j];\n            return val !== undefined ? val : fallback;\n          });\n        } else {\n          m_this.style(keyOrObject, function (v, j, d, i) {\n            var val = styleArray[i];\n            return val !== undefined ? val : fallback;\n          });\n        }\n      } else {\n        m_this.style(keyOrObject, function (d, i) {\n          var val = styleArray[i];\n          return val !== undefined ? val : fallback;\n        });\n      }\n    }\n    if (refresh && m_this.visible()) {\n      m_this.draw();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get the layer referenced by the feature.\n   *\n   * @returns {geo.layer} The layer associated with the feature.\n   */\n  this.layer = function () {\n    return m_layer;\n  };\n\n  /**\n   * Get the renderer used by the feature.\n   *\n   * @returns {geo.renderer} The renderer used to render the feature.\n   */\n  this.renderer = function () {\n    return m_renderer;\n  };\n\n  /**\n   * Get/Set the projection of the feature.\n   *\n   * @param {string?} [val] If `undefined`, return the current gcs.  If\n   *    `null`, use the map's interface gcs.  Otherwise, set a new value for\n   *    the gcs.\n   * @returns {string|this} A string used by {@link geo.transform}.  If the\n   *    map interface gcs is in use, that value will be returned.  If the gcs\n   *    is set, return the current class instance.\n   */\n  this.gcs = function (val) {\n    if (val === undefined) {\n      if ((m_gcs === undefined || m_gcs === null) && m_layer) {\n        return m_layer.map().ingcs();\n      }\n      return m_gcs;\n    } else {\n      m_gcs = val;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Convert from the feature's gcs coordinates to display coordinates.\n   *\n   * @param {geo.geoPosition} c The input coordinate to convert.\n   * @returns {geo.screenPosition} Display space coordinates.\n   */\n  this.featureGcsToDisplay = function (c) {\n    var map = m_layer.map();\n    c = map.gcsToWorld(c, m_this.gcs());\n    c = map.worldToDisplay(c);\n    if (m_renderer.baseToLocal) {\n      c = m_renderer.baseToLocal(c);\n    }\n    return c;\n  };\n\n  /**\n   * Get/Set the visibility of the feature.\n   *\n   * @param {boolean} [val] A boolean to change the visibility, or `undefined`\n   *    to return the visibility.\n   * @param {boolean} [direct] If `true`, when getting the visibility,\n   *    disregard the visibility of the parent layer, and when setting, refresh\n   *    the state regardless of whether it has changed or not.  Otherwise, the\n   *    functional visibility is returned, where both the feature and the layer\n   *    must be visible for a `true` result.\n   * @returns {boolean|this} Either the visibility (if getting) or the feature\n   *    (if setting).\n   */\n  this.visible = function (val, direct) {\n    if (val === undefined) {\n      if (!direct && m_layer && m_layer.visible && !m_layer.visible()) {\n        return false;\n      }\n      return m_visible;\n    }\n    if (m_visible !== val || direct) {\n      m_visible = val;\n      m_this.modified();\n      if (m_layer && m_layer.visible && !m_layer.visible()) {\n        val = false;\n      }\n      // bind or unbind mouse handlers on visibility change\n      if (val) {\n        m_this._bindMouseHandlers();\n      } else {\n        m_this._unbindMouseHandlers();\n      }\n      for (var i = 0; i < m_dependentFeatures.length; i += 1) {\n        m_dependentFeatures[i].visible(m_visible, direct);\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set a list of dependent features.  Dependent features have their\n   * visibility changed at the same time as the feature.\n   *\n   * @param {geo.feature[]} [arg] If specified, the new list of dependent\n   *    features.  Otherwise, return the current list of dependent features.\n   * @returns {geo.feature[]|this} The current list of dependent features or\n   *    a reference to `this`.\n   */\n  this.dependentFeatures = function (arg) {\n    if (arg === undefined) {\n      return m_dependentFeatures.slice();\n    }\n    m_dependentFeatures = arg.slice();\n    return m_this;\n  };\n\n  /**\n   * Get/Set bin of the feature.  The bin number is used to determine the order\n   * of multiple features on the same layer.  It has no effect except on the\n   * vgl renderer.  A negative value hides the feature without stopping\n   * interaction with it.  Otherwise, features with higher bin numbers are\n   * drawn above those with lower bin numbers.  If two features have the same\n   * bin number, their order relative to one another is indeterminate and may\n   * be unstable.\n   *\n   * @param {number} [val] The new bin number.  If `undefined`, return the\n   *    current bin number.  If `null`, the bin is dynamically computed based\n   *    on order within the parent.  If children are nested, this may not be\n   *    what is desired.\n   * @returns {number|this} The current bin number or a reference to `this`.\n   */\n  this.bin = function (val) {\n    if (val === undefined) {\n      if (m_bin === null) {\n        var parent = m_this.parent(),\n            idx = parent ? parent.children().indexOf(m_this) : -1;\n        return idx >= 0 ? idx : 0;\n      }\n      return m_bin;\n    } else {\n      m_bin = val;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Get/Set timestamp of data change.\n   *\n   * @param {geo.timestamp} [val] The new data timestamp object or `undefined`\n   *    to get the current data timestamp object.\n   * @returns {geo.timestamp|this}\n   */\n  this.dataTime = function (val) {\n    if (val === undefined) {\n      return m_dataTime;\n    } else {\n      m_dataTime = val;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Get/Set timestamp of last time a build happened.\n   *\n   * @param {geo.timestamp} [val] The new build timestamp object or `undefined`\n   *    to get the current build timestamp object.\n   * @returns {geo.timestamp|this}\n   */\n  this.buildTime = function (val) {\n    if (val === undefined) {\n      return m_buildTime;\n    } else {\n      m_buildTime = val;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Get/Set timestamp of last time an update happened.\n   *\n   * @param {geo.timestamp} [val] The new update timestamp object or\n   *    `undefined` to get the current update timestamp object.\n   * @returns {geo.timestamp|this}\n   */\n  this.updateTime = function (val) {\n    if (val === undefined) {\n      return m_updateTime;\n    } else {\n      m_updateTime = val;\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Get/Set the data array for the feature.  This is equivalent to getting or\n   * setting the `data` style, except that setting the data array via this\n   * method updates the data timestamp, whereas setting it via the style does\n   * not.\n   *\n   * @param {array} [data] A new data array or `undefined` to return the\n   *    existing array.\n   * @returns {array|this}\n   */\n  this.data = function (data) {\n    if (data === undefined) {\n      return m_this.style('data') || [];\n    } else {\n      m_this.style('data', data);\n      m_this.dataTime().modified();\n      m_this.modified();\n      return m_this;\n    }\n  };\n\n  /**\n   * Get/Set if the selection API is enabled for this feature.\n   *\n   * @param {boolean|string} [arg] `undefined` to return the selectionAPI\n   *    state, a boolean to change the state, or `'auto'` to set the state\n   *    based on the existence of event handlers.  When getting the state, if\n   *    `direct` is not specified, `'auto'` is never returned.\n   * @param {boolean} [direct] If `true`, when getting the selectionAPI state,\n   *    disregard the state of the parent layer, and when setting, refresh the\n   *    state regardless of whether it has changed or not.\n   * @returns {boolean|string|this} Either the selectionAPI state or the\n   *    feature instance.\n   */\n  this.selectionAPI = function (arg, direct) {\n    if (arg === undefined) {\n      if (!direct && m_layer && m_layer.selectionAPI && !m_layer.selectionAPI()) {\n        return false;\n      }\n      if (!direct && m_selectionAPI === 'auto') {\n        return !!m_this.geoIsOn(Object.values(geo_event.feature));\n      }\n      return m_selectionAPI;\n    }\n    if (arg !== 'auto') {\n      arg = !!arg;\n    }\n    if (arg !== m_selectionAPI || direct) {\n      m_selectionAPI = arg;\n      m_this._unbindMouseHandlers();\n      m_this._bindMouseHandlers();\n    }\n    return m_this;\n  };\n\n  /**\n   * If the selectionAPI is on, then setting\n   * `this.geoOn(geo.event.feature.mouseover_order, this.mouseOverOrderHighestIndex)`\n   * will make it so that the mouseon events prefer the highest index feature.\n   *\n   * @param {geo.event} evt The event; this should be triggered from\n   *    {@link geo.event.feature.mouseover_order}.\n   */\n  this.mouseOverOrderHighestIndex = function (evt) {\n    // sort the found indices.  The last one is the one \"on top\".\n    evt.over.index.sort();\n    // this isn't necessary, but ensures that other event handlers have\n    // consistent information\n    var data = evt.feature.data();\n    evt.over.index.forEach(function (di, idx) {\n      evt.over.found[idx] = data[di];\n    });\n  };\n\n  /**\n   * Initialize the class instance.  Derived classes should implement this.\n   *\n   * @param {geo.feature.spec} arg The feature specification.\n   */\n  this._init = function (arg) {\n    if (!m_layer) {\n      throw new Error('Feature requires a valid layer');\n    }\n    m_style = $.extend(\n      {},\n      {'opacity': 1.0},\n      arg.style === undefined ? {} : arg.style);\n    m_this._bindMouseHandlers();\n    m_ready = true;\n  };\n\n  /**\n   * Build.\n   *\n   * Derived classes should implement this.\n   */\n  this._build = function () {\n  };\n\n  /**\n   * Update.\n   *\n   * Derived classes should implement this.\n   */\n  this._update = function () {\n  };\n\n  /**\n   * Bind an event handler to this object.\n   *\n   * @param {string} event An event from {@link geo.event} or a user-defined\n   *   value.\n   * @param {function} handler A function that is called when `event` is\n   *   triggered.  The function is passed a {@link geo.event} object.\n   * @returns {this}\n   */\n  this.geoOn = function (event, handler) {\n    var isAuto = m_this.selectionAPI(undefined, true) === 'auto',\n        selection = isAuto && m_this.selectionAPI();\n    var result = s_geoOn.apply(m_this, arguments);\n    if (isAuto && !selection && m_this.selectionAPI()) {\n      m_this._bindMouseHandlers();\n    }\n    return result;\n  };\n\n  /**\n   * Remove handlers from one event or an array of events.  If no event is\n   * provided all handlers will be removed.\n   *\n   * @param {string|string[]} [event] An event or a list of events from\n   *   {@link geo.event} or defined by the user, or `undefined` to remove all\n   *   events (in which case `arg` is ignored).\n   * @param {(function|function[])?} [arg] A function or array of functions to\n   *   remove from the events or a falsy value to remove all handlers from the\n   *   events.\n   * @returns {this}\n   */\n  this.geoOff = function (event, arg) {\n    var isAuto = m_this.selectionAPI(undefined, true) === 'auto',\n        selection = isAuto && m_this.selectionAPI();\n    var result = s_geoOff.apply(m_this, arguments);\n    if (isAuto && selection && !m_this.selectionAPI()) {\n      m_this._unbindMouseHandlers();\n    }\n    return result;\n  };\n\n  /**\n   * Destroy.  Unbind mouse handlers, clear internal variables, and call the\n   * parent destroy method.\n   *\n   * Derived classes should implement this.\n   */\n  this._exit = function () {\n    m_this._unbindMouseHandlers();\n    m_selectedFeatures = [];\n    m_style = {};\n    s_exit();\n    m_ready = false;\n  };\n\n  this._init(arg);\n  return this;\n};\n\n/**\n * The most recent {@link geo.feature.event} triggered.\n * @type {number}\n */\nfeature.eventID = 0;\n\n/**\n * Create a feature.  This defines a general interface; see individual feature\n * types for specific details.\n *\n * @param {geo.layer} layer The layer to add the feature to.\n * @param {geo.feature.spec} spec The feature specification.  At least the\n *      `type` must be specified.\n * @returns {geo.feature|null} The created feature or `null` for a failure.\n */\nfeature.create = function (layer, spec) {\n  'use strict';\n\n  // Check arguments\n  if (!(layer instanceof require('./layer'))) {\n    console.warn('Invalid layer');\n    return null;\n  }\n  if (typeof spec !== 'object') {\n    console.warn('Invalid spec');\n    return null;\n  }\n  var type = spec.type;\n  var feature = layer.createFeature(type, spec);\n  if (!feature) {\n    console.warn('Could not create feature type \"' + type + '\"');\n    return null;\n  }\n\n  spec.data = spec.data || [];\n  return feature.style(spec);\n};\n\ninherit(feature, sceneObject);\nmodule.exports = feature;\n\n\n\n// WEBPACK FOOTER //\n// ./feature.js","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_hide.js\n// module id = 20\n// module chunks = 0 1","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_redefine.js\n// module id = 21\n// module chunks = 0 1","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-html.js\n// module id = 22\n// module chunks = 0 1","var m_globalTimestamp = 0;\n\n/**\n * Create a new instance of class timestamp.  The timestamp is a globally\n * unique integer that monotonically increases.\n *\n * @class\n * @alias geo.timestamp\n * @returns {geo.timestamp}\n */\nvar timestamp = function () {\n  'use strict';\n  if (!(this instanceof timestamp)) {\n    return new timestamp();\n  }\n\n  var m_this = this,\n      m_timestamp = 0;\n\n  /**\n   * Update the timestamp to the next global timestamp value.\n   *\n   * @returns {this}\n   */\n  this.modified = function () {\n    m_globalTimestamp += 1;\n    m_timestamp = m_globalTimestamp;\n    return m_this;\n  };\n\n  /**\n   * Get time.\n   *\n   * @returns {number} The timestamp.  This is 0 if the timestamp has never\n   *    been modified.\n   */\n  this.timestamp = function () {\n    return m_timestamp;\n  };\n\n  // Also refer to `timestamp` under an alternate name\n  this.getMTime = this.timestamp;\n\n  return this;\n};\n\nmodule.exports = timestamp;\n\n\n\n// WEBPACK FOOTER //\n// ./timestamp.js","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_has.js\n// module id = 24\n// module chunks = 0 1","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-iobject.js\n// module id = 25\n// module chunks = 0 1","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-gopd.js\n// module id = 26\n// module chunks = 0 1","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-gpo.js\n// module id = 27\n// module chunks = 0 1","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_core.js\n// module id = 28\n// module chunks = 0 1","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_ctx.js\n// module id = 29\n// module chunks = 0 1","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_cof.js\n// module id = 30\n// module chunks = 0 1","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_strict-method.js\n// module id = 31\n// module chunks = 0 1","var inherit = require('../inherit');\nvar registerRenderer = require('../registry').registerRenderer;\nvar renderer = require('../renderer');\n\n/**\n * Create a new instance of class d3Renderer.\n *\n * @class\n * @alias geo.d3.renderer\n * @extends geo.renderer\n * @param {object} arg Options for the renderer.\n * @param {geo.layer} [arg.layer] Layer associated with the renderer.\n * @param {HTMLElement} [arg.canvas] Canvas element associated with the\n *   renderer.\n * @param {boolean} [arg.widget=false] Set to `true` if this is a stand-alone\n *   widget.  If it is not a widget, svg elements are wrapped in a parent\n *   group.\n * @param {HTMLElement} [arg.d3Parent] If specified, the parent for any\n *   rendered objects; otherwise the renderer's layer's main node is used.\n * @returns {geo.d3.d3Renderer}\n */\nvar d3Renderer = function (arg) {\n  'use strict';\n\n  var d3 = d3Renderer.d3;\n  var object = require('./object');\n  var util = require('../util');\n  var geo_event = require('../event');\n  var d3Rescale = require('./rescale');\n\n  if (!(this instanceof d3Renderer)) {\n    return new d3Renderer(arg);\n  }\n  renderer.call(this, arg);\n\n  var s_exit = this._exit;\n\n  object.call(this, arg);\n\n  arg = arg || {};\n\n  var m_this = this,\n      m_sticky = null,\n      m_features = {},\n      m_corners = null,\n      m_width = null,\n      m_height = null,\n      m_diagonal = null,\n      m_scale = 1,\n      m_transform = {dx: 0, dy: 0, rx: 0, ry: 0, rotation: 0},\n      m_renderIds = {},\n      m_removeIds = {},\n      m_svg = null,\n      m_defs = null;\n\n  /**\n   * Set attributes to a d3 selection.\n   * @private\n   * @param {d3Selector} select The d3 selector with the elements to change.\n   * @param {object} attrs A map of attributes to set on the elements.\n   */\n  function setAttrs(select, attrs) {\n    var key;\n    for (key in attrs) {\n      if (attrs.hasOwnProperty(key)) {\n        select.attr(key, attrs[key]);\n      }\n    }\n  }\n\n  /**\n   * Meta functions for converting from geojs styles to d3.\n   * @private\n   * @param {object|function} f The style value or function to convert.\n   * @param {function} [g] An optional function that returns a boolean; if it\n   *    returns false, the style is set to `'none'`.\n   * @returns {function} A function for converting styles.\n   */\n  this._convertColor = function (f, g) {\n    f = util.ensureFunction(f);\n    g = g || function () { return true; };\n    return function () {\n      var c = 'none';\n      if (g.apply(m_this, arguments)) {\n        c = f.apply(m_this, arguments);\n        if (c.hasOwnProperty('r') &&\n            c.hasOwnProperty('g') &&\n            c.hasOwnProperty('b')) {\n          c = d3.rgb(255 * c.r, 255 * c.g, 255 * c.b);\n        }\n      }\n      return c;\n    };\n  };\n\n  /**\n   * Return a function for converting a size in pixels to an appropriate\n   * d3 scale.\n   * @private\n   * @param {object|function} f The style value or function to convert.\n   * @returns {function} A function for converting scale.\n   */\n  this._convertScale = function (f) {\n    f = util.ensureFunction(f);\n    return function () {\n      return f.apply(m_this, arguments) / m_scale;\n    };\n  };\n\n  /**\n   * Set styles to a d3 selection. Ignores unknown style keys.\n   * @private\n   * @param {d3Selector} select The d3 selector with the elements to change.\n   * @param {object} styles Style object associated with a feature.\n   */\n  function setStyles(select, styles) {\n    var key, k, f;\n    /**\n     * Check if the fill parameter is truthy.\n     *\n     * @returns {null|'none'} `null` to fill the element, `'none'` to skip\n     *  filling it.\n     */\n    function fillFunc() {\n      if (styles.fill.apply(m_this, arguments)) {\n        return null;\n      } else {\n        return 'none';\n      }\n    }\n    /**\n     * Check if the stroke parameter is truthy.\n     *\n     * @returns {null|'none'} `null` to fill the element, `'none'` to skip\n     *  filling it.\n     */\n    function strokeFunc() {\n      if (styles.stroke.apply(m_this, arguments)) {\n        return null;\n      } else {\n        return 'none';\n      }\n    }\n    for (key in styles) {\n      if (styles.hasOwnProperty(key)) {\n        f = null;\n        k = null;\n        if (key === 'strokeColor') {\n          k = 'stroke';\n          f = m_this._convertColor(styles[key], styles.stroke);\n        } else if (key === 'stroke' && styles[key] &&\n                   !styles.hasOwnProperty('strokeColor')) {\n          k = 'stroke';\n          f = strokeFunc;\n        } else if (key === 'strokeWidth') {\n          k = 'stroke-width';\n          f = m_this._convertScale(styles[key]);\n        } else if (key === 'strokeOpacity') {\n          k = 'stroke-opacity';\n          f = styles[key];\n        } else if (key === 'fillColor') {\n          k = 'fill';\n          f = m_this._convertColor(styles[key], styles.fill);\n        } else if (key === 'fill' && !styles.hasOwnProperty('fillColor')) {\n          k = 'fill';\n          f = fillFunc;\n        } else if (key === 'fillOpacity') {\n          k = 'fill-opacity';\n          f = styles[key];\n        } else if (key === 'lineCap') {\n          k = 'stroke-linecap';\n          f = styles[key];\n        } else if (key === 'lineJoin') {\n          k = 'stroke-linejoin';\n          f = styles[key];\n        } else if (key === 'miterLimit') {\n          k = 'stroke-miterlimit';\n          f = styles[key];\n        }\n        if (k) {\n          select.style(k, f);\n        }\n      }\n    }\n  }\n\n  /**\n   * Get the svg group element associated with this renderer instance, or of a\n   * group within the render instance.\n   *\n   * @private\n   * @param {string} [parentId] Optional parent ID name.\n   * @returns {d3Selector} Selector with the d3 group.\n   */\n  function getGroup(parentId) {\n    if (parentId) {\n      return m_svg.select('.group-' + parentId);\n    }\n    return m_svg.select('.group-' + m_this._d3id());\n  }\n\n  /**\n   * Set the initial lat-lon coordinates of the map view.\n   * @private\n   */\n  function initCorners() {\n    var layer = m_this.layer(),\n        map = layer.map(),\n        width = map.size().width,\n        height = map.size().height;\n\n    m_width = width;\n    m_height = height;\n    if (!m_width || !m_height) {\n      throw new Error('Map layer has size 0');\n    }\n    m_diagonal = Math.pow(width * width + height * height, 0.5);\n    m_corners = {\n      upperLeft: map.displayToGcs({x: 0, y: 0}, null),\n      lowerRight: map.displayToGcs({x: width, y: height}, null),\n      center: map.displayToGcs({x: width / 2, y: height / 2}, null)\n    };\n  }\n\n  /**\n   * Set the translation, scale, and zoom for the current view.\n   * @private\n   */\n  this._setTransform = function () {\n    if (!m_corners) {\n      initCorners();\n    }\n\n    if (!m_sticky) {\n      return;\n    }\n\n    var layer = m_this.layer();\n\n    var map = layer.map(),\n        upperLeft = map.gcsToDisplay(m_corners.upperLeft, null),\n        lowerRight = map.gcsToDisplay(m_corners.lowerRight, null),\n        center = map.gcsToDisplay(m_corners.center, null),\n        group = getGroup(),\n        dx, dy, scale, rotation, rx, ry;\n\n    scale = Math.sqrt(\n      Math.pow(lowerRight.y - upperLeft.y, 2) +\n      Math.pow(lowerRight.x - upperLeft.x, 2)) / m_diagonal;\n    // calculate the translation\n    rotation = map.rotation();\n    rx = -m_width / 2;\n    ry = -m_height / 2;\n    dx = scale * rx + center.x;\n    dy = scale * ry + center.y;\n\n    // set the group transform property\n    if (!rotation) {\n      dx = Math.round(dx);\n      dy = Math.round(dy);\n    }\n    var transform = 'matrix(' + [scale, 0, 0, scale, dx, dy].join() + ')';\n    if (rotation) {\n      transform += ' rotate(' + [\n        rotation * 180 / Math.PI, -rx, -ry].join() + ')';\n    }\n    group.attr('transform', transform);\n\n    // set internal variables\n    m_scale = scale;\n    m_transform.dx = dx;\n    m_transform.dy = dy;\n    m_transform.rx = rx;\n    m_transform.ry = ry;\n    m_transform.rotation = rotation;\n  };\n\n  /**\n   * Convert from screen pixel coordinates to the local coordinate system\n   * in the SVG group element taking into account the transform.\n   * @private\n   * @param {geo.screenPosition} pt The coordinates to convert.\n   * @returns {geo.geoPosition} The converted coordinates.\n   */\n  this.baseToLocal = function (pt) {\n    pt = {\n      x: (pt.x - m_transform.dx) / m_scale,\n      y: (pt.y - m_transform.dy) / m_scale\n    };\n    if (m_transform.rotation) {\n      var sinr = Math.sin(-m_transform.rotation),\n          cosr = Math.cos(-m_transform.rotation);\n      var x = pt.x + m_transform.rx, y = pt.y + m_transform.ry;\n      pt = {\n        x: x * cosr - y * sinr - m_transform.rx,\n        y: x * sinr + y * cosr - m_transform.ry\n      };\n    }\n    return pt;\n  };\n\n  /**\n   * Convert from the local coordinate system in the SVG group element\n   * to screen pixel coordinates.\n   * @private\n   * @param {geo.geoPosition} pt The coordinates to convert.\n   * @returns {geo.screenPosition} The converted coordinates.\n   */\n  this.localToBase = function (pt) {\n    if (m_transform.rotation) {\n      var sinr = Math.sin(m_transform.rotation),\n          cosr = Math.cos(m_transform.rotation);\n      var x = pt.x + m_transform.rx, y = pt.y + m_transform.ry;\n      pt = {\n        x: x * cosr - y * sinr - m_transform.rx,\n        y: x * sinr + y * cosr - m_transform.ry\n      };\n    }\n    pt = {\n      x: pt.x * m_scale + m_transform.dx,\n      y: pt.y * m_scale + m_transform.dy\n    };\n    return pt;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {object} arg The options used to create the renderer.\n   * @param {boolean} [arg.widget=false] Set to `true` if this is a stand-alone\n   *   widget.  If it is not a widget, svg elements are wrapped in a parent\n   *   group.\n   * @param {HTMLElement} [arg.d3Parent] If specified, the parent for any\n   *   rendered objects; otherwise the renderer's layer's main node is used.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    if (!m_this.canvas()) {\n      var canvas;\n      arg.widget = arg.widget || false;\n\n      if ('d3Parent' in arg) {\n        m_svg = d3.select(arg.d3Parent).append('svg');\n      } else {\n        m_svg = d3.select(m_this.layer().node().get(0)).append('svg');\n      }\n      m_svg.attr('display', 'block');\n\n      // create a global svg definitions element\n      m_defs = m_svg.append('defs');\n\n      var shadow = m_defs\n        .append('filter')\n          .attr('id', 'geo-highlight')\n          .attr('x', '-100%')\n          .attr('y', '-100%')\n          .attr('width', '300%')\n          .attr('height', '300%');\n      shadow\n        .append('feMorphology')\n          .attr('operator', 'dilate')\n          .attr('radius', 2)\n          .attr('in', 'SourceAlpha')\n          .attr('result', 'dilateOut');\n      shadow\n        .append('feGaussianBlur')\n          .attr('stdDeviation', 5)\n          .attr('in', 'dilateOut')\n          .attr('result', 'blurOut');\n      shadow\n        .append('feColorMatrix')\n          .attr('type', 'matrix')\n          .attr('values', '-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0')\n          .attr('in', 'blurOut')\n          .attr('result', 'invertOut');\n      shadow\n        .append('feBlend')\n          .attr('in', 'SourceGraphic')\n          .attr('in2', 'invertOut')\n          .attr('mode', 'normal');\n\n      if (!arg.widget) {\n        canvas = m_svg.append('g');\n      }\n\n      shadow = m_defs.append('filter')\n          .attr('id', 'geo-blur')\n          .attr('x', '-100%')\n          .attr('y', '-100%')\n          .attr('width', '300%')\n          .attr('height', '300%');\n\n      shadow\n        .append('feGaussianBlur')\n          .attr('stdDeviation', 20)\n          .attr('in', 'SourceGraphic');\n\n      m_sticky = m_this.layer().sticky();\n      m_svg.attr('class', m_this._d3id());\n      m_svg.attr('width', m_this.layer().node().width());\n      m_svg.attr('height', m_this.layer().node().height());\n\n      if (!arg.widget) {\n        canvas.attr('class', 'group-' + m_this._d3id());\n\n        m_this.canvas(canvas);\n      } else {\n        m_this.canvas(m_svg);\n      }\n    }\n    m_this._setTransform();\n    return m_this;\n  };\n\n  /**\n   * Get API used by the renderer.\n   *\n   * @returns {string} 'd3'.\n   */\n  this.api = function () {\n    return 'd3';\n  };\n\n  /**\n   * Return the current scaling factor to build features that shouldn't\n   * change size during zooms.  For example:\n   *\n   *  selection.append('circle')\n   *    .attr('r', r0 / renderer.scaleFactor());\n   *\n   * This will create a circle element with radius r0 independent of the\n   * current zoom level.\n   *\n   * @returns {number} The current scale factor.\n   */\n  this.scaleFactor = function () {\n    return m_scale;\n  };\n\n  /**\n   * Handle resize event.\n   *\n   * @param {number} x Ignored.\n   * @param {number} y Ignored.\n   * @param {number} w New width in pixels.\n   * @param {number} h New height in pixels.\n   * @returns {this}\n   * @fires geo.event.d3.rescale\n   */\n  this._resize = function (x, y, w, h) {\n    if (!m_corners) {\n      initCorners();\n    }\n    m_svg.attr('width', w);\n    m_svg.attr('height', h);\n    m_this._setTransform();\n    m_this.layer().geoTrigger(d3Rescale, { scale: m_scale }, true);\n    return m_this;\n  };\n\n  /**\n   * Exit.\n   */\n  this._exit = function () {\n    m_features = {};\n    m_this.canvas().remove();\n    m_svg.remove();\n    m_svg = undefined;\n    m_defs.remove();\n    m_defs = undefined;\n    m_renderIds = {};\n    m_removeIds = {};\n    s_exit();\n  };\n\n  /**\n   * Get the definitions DOM element for the layer.\n   * @protected\n   * @returns {HTMLElement} The definitions DOM element.\n   */\n  this._definitions = function () {\n    return m_defs;\n  };\n\n  /**\n   * Create a new feature element from an object that describes the feature\n   * attributes.  To be called from feature classes only.\n   *\n   * @param {object} arg Options for the features.\n   * @param {string} arg.id A unique string identifying the feature.\n   * @param {array} arg.data Array of data objects used in a d3 data method.\n   * @param {function} [aeg.dataIndex] A function that returns a unique id for\n   *    each data element.  This is passed to the data access function.\n   * @param {object} arg.style An object with style values or functions.\n   * @param {object} arg.attributes An object containing element attributes.\n   *    The keys are the attribute names, and the values are either constants\n   *    or functions that get passed a data element and a data index.\n   * @param {string[]} arg.classes An array of classes to add to the elements.\n   * @param {string} arg.append The element type as used in d3 append methods.\n   *    This is something like `'path'`, `'circle'`, or `'line'`.\n   * @param {boolean} [arg.onlyRenderNew] If truthy, features only get\n   *    attributes and styles set when new.  If falsy, features always have\n   *    attributes and styles updated.\n   * @param {boolean} [arg.sortByZ] If truthy, sort features by the `d.zIndex`.\n   * @param {string} [parentId] If set, the group ID of the parent element.\n   * @returns {this}\n   */\n  this._drawFeatures = function (arg) {\n    m_features[arg.id] = {\n      data: arg.data,\n      index: arg.dataIndex,\n      style: arg.style,\n      visible: arg.visible,\n      attributes: arg.attributes,\n      classes: arg.classes,\n      append: arg.append,\n      onlyRenderNew: arg.onlyRenderNew,\n      sortByZ: arg.sortByZ,\n      parentId: arg.parentId\n    };\n    return m_this.__render(arg.id, arg.parentId);\n  };\n\n  /**\n   * Updates a feature by performing a d3 data join.  If no input id is\n   * provided then this method will update all features.\n   *\n   * @param {string} [id] The id of the feature to update.  `undefined` to\n   *    update all features.\n   * @param {string} [parentId] The parent of the feature(s).  If not\n   *    specified, features are rendered on the next animation frame.\n   * @returns {this}\n   */\n  this.__render = function (id, parentId) {\n    var key;\n    if (id === undefined) {\n      for (key in m_features) {\n        if (m_features.hasOwnProperty(key)) {\n          m_this.__render(key);\n        }\n      }\n      return m_this;\n    }\n    if (parentId) {\n      m_this._renderFeature(id, parentId);\n    } else {\n      m_renderIds[id] = true;\n      m_this.layer().map().scheduleAnimationFrame(m_this._renderFrame);\n    }\n    return m_this;\n  };\n\n  /**\n   * Render all features that are marked as needing an update.  This should\n   * only be called duration an animation frame.\n   */\n  this._renderFrame = function () {\n    var id;\n    for (id in m_removeIds) {\n      m_this.select(id).remove();\n      m_defs.selectAll('.' + id).remove();\n    }\n    m_removeIds = {};\n    var ids = m_renderIds;\n    m_renderIds = {};\n    for (id in ids) {\n      if (ids.hasOwnProperty(id)) {\n        m_this._renderFeature(id);\n      }\n    }\n  };\n\n  /**\n   * Render a single feature.\n   *\n   * @param {string} id The id of the feature to update.\n   * @param {string} [parentId] The parent of the feature.  This is used to\n   *    select the feature.\n   * @returns {this}\n   */\n  this._renderFeature = function (id, parentId) {\n    if (!m_features[id]) {\n      return m_this;\n    }\n    var data = m_features[id].data,\n        index = m_features[id].index,\n        style = m_features[id].style,\n        visible = m_features[id].visible,\n        attributes = m_features[id].attributes,\n        classes = m_features[id].classes,\n        append = m_features[id].append,\n        selection = m_this.select(id, parentId).data(data, index),\n        entries, rendersel;\n    entries = selection.enter().append(append);\n    selection.exit().remove();\n    rendersel = m_features[id].onlyRenderNew ? entries : selection;\n    setAttrs(rendersel, attributes);\n    rendersel.attr('class', classes.concat([id]).join(' '));\n    setStyles(rendersel, style);\n    if (visible) {\n      rendersel.style('visibility', visible() ? 'visible' : 'hidden');\n    }\n    if (entries.size() && m_features[id].sortByZ) {\n      selection.sort(function (a, b) {\n        return (a.zIndex || 0) - (b.zIndex || 0);\n      });\n    }\n    return m_this;\n  };\n\n  /**\n   * Returns a d3 selection for the given feature id.\n   *\n   * @param {string} id The id of the feature to select.\n   * @param {string} [parentId] The parent of the feature.  This is used to\n   *    determine the feature's group.\n   * @returns {d3Selector}\n   */\n  this.select = function (id, parentId) {\n    return getGroup(parentId).selectAll('.' + id);\n  };\n\n  /**\n   * Removes a feature from the layer.\n   *\n   * @param {string} id The id of the feature to remove.\n   * @returns {this}\n   */\n  this._removeFeature = function (id) {\n    m_removeIds[id] = true;\n    m_this.layer().map().scheduleAnimationFrame(m_this._renderFrame);\n    delete m_features[id];\n    if (m_renderIds[id]) {\n      delete m_renderIds[id];\n    }\n    return m_this;\n  };\n\n  /**\n   * Override draw method to do nothing.\n   */\n  this.draw = function () {\n  };\n\n  // connect to pan event\n  this.layer().geoOn(geo_event.pan, m_this._setTransform);\n\n  // connect to rotate event\n  this.layer().geoOn(geo_event.rotate, m_this._setTransform);\n\n  // connect to zoom event\n  this.layer().geoOn(geo_event.zoom, function () {\n    m_this._setTransform();\n    m_this.__render();\n    m_this.layer().geoTrigger(d3Rescale, { scale: m_scale }, true);\n  });\n\n  this.layer().geoOn(geo_event.resize, function (event) {\n    m_this._resize(event.x, event.y, event.width, event.height);\n  });\n\n  this._init(arg);\n  return this;\n};\n\ninherit(d3Renderer, renderer);\n\nregisterRenderer('d3', d3Renderer);\n\n/* Code for checking if the renderer is supported */\n\n/**\n * Report if the d3 renderer is supported.  This is just a check if d3 is\n * available.\n *\n * @returns {boolean} true if available.\n */\nd3Renderer.supported = function () {\n  delete d3Renderer.d3;\n  // webpack expects optional dependencies to be wrapped in a try-catch\n  try {\n    d3Renderer.d3 = require('d3');\n  } catch (_error) {}\n  return d3Renderer.d3 !== undefined;\n};\n\n/**\n * If the d3 renderer is not supported, supply the name of a renderer that\n * should be used instead.  This asks for the null renderer.\n *\n * @returns {null} `null` for the null renderer.\n */\nd3Renderer.fallback = function () {\n  return null;\n};\n\nd3Renderer.supported();  // cache reference to d3 if it is available\n\nmodule.exports = d3Renderer;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/d3Renderer.js","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-primitive.js\n// module id = 33\n// module chunks = 0 1","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_defined.js\n// module id = 34\n// module chunks = 0 1","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-integer.js\n// module id = 35\n// module chunks = 0 1","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-sap.js\n// module id = 36\n// module chunks = 0 1","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-methods.js\n// module id = 37\n// module chunks = 0 1","'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_typed-array.js\n// module id = 38\n// module chunks = 0 1","var Map = require('./es6.map');\nvar $export = require('./_export');\nvar shared = require('./_shared')('metadata');\nvar store = shared.store || (shared.store = new (require('./es6.weak-map'))());\n\nvar getOrCreateMetadataMap = function (target, targetKey, create) {\n  var targetMetadata = store.get(target);\n  if (!targetMetadata) {\n    if (!create) return undefined;\n    store.set(target, targetMetadata = new Map());\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if (!keyMetadata) {\n    if (!create) return undefined;\n    targetMetadata.set(targetKey, keyMetadata = new Map());\n  } return keyMetadata;\n};\nvar ordinaryHasOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\nvar ordinaryGetOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\nvar ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\nvar ordinaryOwnMetadataKeys = function (target, targetKey) {\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);\n  var keys = [];\n  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });\n  return keys;\n};\nvar toMetaKey = function (it) {\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\nvar exp = function (O) {\n  $export($export.S, 'Reflect', O);\n};\n\nmodule.exports = {\n  store: store,\n  map: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  key: toMetaKey,\n  exp: exp\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_metadata.js\n// module id = 39\n// module chunks = 0 1","module.exports = global[\"vgl\"] = require(\"-!/home/travis/build/OpenGeoscience/geojs/node_modules/imports-loader/index.js?mat4=gl-mat4,vec4=gl-vec4,vec3=gl-vec3,$=jquery!./vgl.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/vgl/vgl.js-exposed\n// module id = 40\n// module chunks = 0 1","var inherit = require('./inherit');\nvar timestamp = require('./timestamp');\n\n/**\n * Create a new instance of class object.\n *\n * @class\n * @alias geo.object\n * @extends geo.timestamp\n * @returns {geo.object}\n */\nvar object = function () {\n  'use strict';\n  if (!(this instanceof object)) {\n    return new object();\n  }\n\n  var util = require('./util');\n\n  var m_this = this,\n      m_eventHandlers = {},\n      m_idleHandlers = [],\n      m_promiseCount = 0;\n\n  /**\n   * Bind a handler that will be called one time when all internal promises are\n   * resolved.  If there are no outstanding promises, this is invoked\n   * synchronously.\n   *\n   * @param {function} handler A function taking no arguments.\n   * @returns {this}\n   */\n  this.onIdle = function (handler) {\n    if (m_promiseCount) {\n      m_idleHandlers.push(handler);\n    } else {\n      handler();\n    }\n    return m_this;\n  };\n\n  /**\n   * Getter for the idle state.  Read only.\n   *\n   * @property {boolean} idle `true` if the object is idle (`onIdle` would call\n   *    a handler immediately).\n   * @name geo.object#idle\n   */\n  Object.defineProperty(this, 'idle', {\n    get: function () {\n      return !m_promiseCount;\n    },\n    configurable: true\n  });\n\n  /**\n   * Add a new promise object preventing idle event handlers from being called\n   * until it is resolved.\n   *\n   * @param {Promise} promise A promise object.\n   * @returns {this}\n   */\n  this.addPromise = function (promise) {\n    // called on any resolution of the promise\n    function onDone() {\n      m_promiseCount -= 1;\n      if (!m_promiseCount) {\n        m_idleHandlers.splice(0, m_idleHandlers.length)\n          .forEach(function (handler) {\n            handler();\n          });\n      }\n    }\n    m_promiseCount += 1;\n    if (promise.always) {\n      promise.always(onDone);\n    } else {\n      promise.then(onDone, onDone);\n    }\n    return m_this;\n  };\n\n  /**\n   * Bind an event handler to this object.\n   *\n   * @param {string} event An event from {@link geo.event} or a user-defined\n   *   value.\n   * @param {function} handler A function that is called when `event` is\n   *   triggered.  The function is passed a {@link geo.event} object.\n   * @returns {this}\n   */\n  this.geoOn = function (event, handler) {\n    if (Array.isArray(event)) {\n      event.forEach(function (e) {\n        m_this.geoOn(e, handler);\n      });\n      return m_this;\n    }\n    if (!util.isFunction(handler)) {\n      console.warn('Handler for ' + event + ' is not a function', handler, m_this);\n      return m_this;\n    }\n    if (!m_eventHandlers.hasOwnProperty(event)) {\n      m_eventHandlers[event] = [];\n    }\n    m_eventHandlers[event].push(handler);\n    return m_this;\n  };\n\n  /**\n   * Report if an event handler is bound to this object.\n   *\n   * @param {string|string[]} event An event or list of events to check.\n   * @param {function} [handler] A function that might be bound.  If\n   *   `undefined`, this will report `true` if there is any handler for the\n   *   specified event.\n   * @returns {boolean} true if any of the specified events are bound to the\n   *   specified handler.\n   */\n  this.geoIsOn = function (event, handler) {\n    if (Array.isArray(event)) {\n      return event.some(function (e) {\n        return m_this.geoIsOn(e, handler);\n      });\n    }\n    return (m_eventHandlers[event] || []).some(function (h) {\n      return h === handler || handler === undefined;\n    });\n  };\n\n  /**\n   * Trigger an event (or events) on this object and call all handlers.\n   *\n   * @param {string|string[]} event An event or list of events from\n   *   {@link geo.event} or defined by the user.\n   * @param {object} [args] Additional information to add to the\n   *   {@link geo.event} object passed to the handlers.\n   * @returns {this}\n   */\n  this.geoTrigger = function (event, args) {\n\n    // if we have an array of events, recall with single events\n    if (Array.isArray(event)) {\n      event.forEach(function (e) {\n        m_this.geoTrigger(e, args);\n      });\n      return m_this;\n    }\n\n    // append the event type to the argument object\n    args = args || {};\n    args.event = event;\n\n    if (m_eventHandlers.hasOwnProperty(event)) {\n      m_eventHandlers[event].forEach(function (handler) {\n        try {\n          handler.call(m_this, args);\n        } catch (err) {\n          console.warn('Event handler for ' + event + ' threw an error', err);\n        }\n      });\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Remove handlers from one event or an array of events.  If no event is\n   * provided all handlers will be removed.\n   *\n   * @param {string|string[]} [event] An event or a list of events from\n   *   {@link geo.event} or defined by the user, or `undefined` to remove all\n   *   events (in which case `arg` is ignored).\n   * @param {(function|function[])?} [arg] A function or array of functions to\n   *   remove from the events or a falsy value to remove all handlers from the\n   *   events.\n   * @returns {this}\n   */\n  this.geoOff = function (event, arg) {\n    if (event === undefined) {\n      m_eventHandlers = {};\n      m_idleHandlers = [];\n      m_promiseCount = 0;\n    }\n    if (Array.isArray(event)) {\n      event.forEach(function (e) {\n        m_this.geoOff(e, arg);\n      });\n      return m_this;\n    }\n    if (!arg) {\n      m_eventHandlers[event] = [];\n    } else if (Array.isArray(arg)) {\n      arg.forEach(function (handler) {\n        m_this.geoOff(event, handler);\n      });\n      return m_this;\n    }\n    if (m_eventHandlers.hasOwnProperty(event)) {\n      m_eventHandlers[event] = m_eventHandlers[event].filter(function (f) {\n        return f !== arg;\n      });\n    }\n    return m_this;\n  };\n\n  /**\n   * Free all resources and destroy the object.\n   */\n  this._exit = function () {\n    m_this.geoOff();\n  };\n\n  timestamp.call(this);\n  this.modified();\n\n  return this;\n};\n\ninherit(object, timestamp);\nmodule.exports = object;\n\n\n\n// WEBPACK FOOTER //\n// ./object.js","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_meta.js\n// module id = 42\n// module chunks = 0 1","module.exports = false;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_library.js\n// module id = 43\n// module chunks = 0 1","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_add-to-unscopables.js\n// module id = 44\n// module chunks = 0 1","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_property-desc.js\n// module id = 45\n// module chunks = 0 1","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_uid.js\n// module id = 46\n// module chunks = 0 1","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-keys.js\n// module id = 47\n// module chunks = 0 1","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-absolute-index.js\n// module id = 48\n// module chunks = 0 1","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-create.js\n// module id = 49\n// module chunks = 0 1","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-gopn.js\n// module id = 50\n// module chunks = 0 1","'use strict';\nvar global = require('./_global');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_set-species.js\n// module id = 51\n// module chunks = 0 1","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_an-instance.js\n// module id = 52\n// module chunks = 0 1","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_for-of.js\n// module id = 53\n// module chunks = 0 1","var redefine = require('./_redefine');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n  return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_redefine-all.js\n// module id = 54\n// module chunks = 0 1","var inherit = require('./inherit');\nvar object = require('./object');\n\n/**\n * Create a new instance of class sceneObject, which extends the object's\n * event handling with a tree-based event propagation.\n *\n * @class\n * @alias geo.sceneObject\n * @extends geo.object\n * @param {object} arg Options for the object.\n * @returns {geo.sceneObject}\n */\nvar sceneObject = function (arg) {\n  'use strict';\n  if (!(this instanceof sceneObject)) {\n    return new sceneObject();\n  }\n  object.call(this, arg);\n\n  var m_this = this,\n      m_parent = null,\n      m_children = [],\n      s_exit = this._exit,\n      s_trigger = this.geoTrigger,\n      s_addPromise = this.addPromise,\n      s_onIdle = this.onIdle;\n\n  /**\n   * Override object.addPromise to propagate up the scene tree.\n   *\n   * @param {Promise} promise A promise object.\n   * @returns {this}\n   */\n  this.addPromise = function (promise) {\n    if (m_parent) {\n      m_parent.addPromise(promise);\n    } else {\n      s_addPromise(promise);\n    }\n    return this;\n  };\n\n  /**\n   * Override object.onIdle to propagate up the scene tree.\n   *\n   * @param {function} handler A function taking no arguments.\n   * @returns {this}\n   */\n  this.onIdle = function (handler) {\n    if (m_parent) {\n      m_parent.onIdle(handler);\n    } else {\n      s_onIdle(handler);\n    }\n    return this;\n  };\n\n  /**\n   * Get/set parent of the object.\n   *\n   * @param {geo.sceneObject} [arg] The new parant or `undefined` to get the\n   *    current parent.\n   * @returns {this|geo.sceneObject}\n   */\n  this.parent = function (arg) {\n    if (arg === undefined) {\n      return m_parent;\n    }\n    m_parent = arg;\n    return m_this;\n  };\n\n  /**\n   * Add a child (or an array of children) to the object.\n   *\n   * @param {geo.object|geo.object[]} child A child object or array of child\n   *    objects.\n   * @returns {this}\n   */\n  this.addChild = function (child) {\n    if (Array.isArray(child)) {\n      child.forEach(m_this.addChild);\n      return m_this;\n    }\n    child.parent(m_this);\n    m_children.push(child);\n    return m_this;\n  };\n\n  /**\n   * Remove a child (or array of children) from the object.\n   *\n   * @param {geo.object|geo.object[]} child A child object or array of child\n   *    objects.\n   * @returns {this}\n   */\n  this.removeChild = function (child) {\n    if (Array.isArray(child)) {\n      child.forEach(m_this.removeChild);\n      return m_this;\n    }\n    m_children = m_children.filter(function (c) { return c !== child; });\n    return m_this;\n  };\n\n  /**\n   * Get an array of the child objects.\n   *\n   * @returns {geo.object[]} A copy of the array of child objects.\n   */\n  this.children = function () {\n    return m_children.slice();\n  };\n\n  /**\n   * Force redraw of a scene object, to be implemented by subclasses.\n   * Base class just calls draw of child objects.\n   *\n   * @param {object} arg Options to pass to the child draw functions.\n   * @returns {this}\n   */\n  this.draw = function (arg) {\n    m_this.children().forEach(function (child) {\n      child.draw(arg);\n    });\n    return m_this;\n  };\n\n  /**\n   * Trigger an event (or events) on this object and call all handlers.\n   *\n   * @param {string} event The event to trigger.\n   * @param {object} args Arbitrary argument to pass to the handler.\n   * @param {boolean} [childrenOnly] If truthy, only propagate down the tree.\n   * @returns {this}\n   */\n  this.geoTrigger = function (event, args, childrenOnly) {\n\n    var geoArgs;\n\n    args = args || {};\n    geoArgs = args.geo || {};\n    args.geo = geoArgs;\n\n    // stop propagation if requested by the handler\n    if (geoArgs.stopPropagation) {\n      return m_this;\n    }\n\n    // If the event was not triggered by the parent, just propagate up the tree\n    if (!childrenOnly && m_parent && geoArgs._triggeredBy !== m_parent) {\n      geoArgs._triggeredBy = m_this;\n      m_parent.geoTrigger(event, args);\n      return m_this;\n    }\n\n    // call the object's own handlers\n    s_trigger.call(m_this, event, args);\n\n    // stop propagation if requested by the handler\n    if (geoArgs.stopPropagation) {\n      return m_this;\n    }\n\n    // trigger the event on the children\n    m_children.forEach(function (child) {\n      if (child.geoTrigger) {\n        geoArgs._triggeredBy = m_this;\n        child.geoTrigger(event, args);\n      }\n    });\n\n    return m_this;\n  };\n\n  /**\n   * Free all resources and destroy the object.\n   */\n  this._exit = function () {\n    m_children = [];\n    m_parent = null;\n    s_exit();\n  };\n\n  return this;\n};\n\ninherit(sceneObject, object);\nmodule.exports = sceneObject;\n\n\n\n// WEBPACK FOOTER //\n// ./sceneObject.js","var inherit = require('../inherit');\nvar sceneObject = require('../sceneObject');\n\n/**\n * D3 specific subclass of object which adds an id property for d3 selections\n * on groups of objects by class id.\n *\n * @class\n * @alias geo.d3.object\n * @extends geo.sceneObject\n * @param {object} arg Options for the object.\n * @returns {geo.d3.object}\n */\nvar d3_object = function (arg) {\n  'use strict';\n\n  var object = require('../object');\n  var uniqueID = require('./uniqueID');\n\n  // this is used to extend other geojs classes, so only generate\n  // a new object when that is not the case... like if this === window\n  if (!(this instanceof object)) {\n    return new d3_object(arg);\n  }\n  sceneObject.call(this);\n\n  var m_id = 'd3-' + uniqueID(),\n      s_exit = this._exit,\n      m_this = this,\n      s_draw = this.draw;\n\n  this._d3id = function () {\n    return m_id;\n  };\n\n  /**\n   * Returns a d3 selection for the feature elements.\n   *\n   * @returns {d3.selector} A d3 selector of the features in this object.\n   */\n  this.select = function () {\n    return m_this.renderer().select(m_this._d3id());\n  };\n\n  /**\n   * Redraw the object.\n   *\n   * @returns {this}\n   */\n  this.draw = function () {\n    if (m_this.ready) {\n      m_this._update();\n      s_draw();\n    }\n    return m_this;\n  };\n\n  /**\n   * Removes the element from the svg and the renderer.\n   */\n  this._exit = function () {\n    m_this.renderer()._removeFeature(m_this._d3id());\n    s_exit();\n  };\n\n  return this;\n};\n\ninherit(d3_object, sceneObject);\nmodule.exports = d3_object;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/object.js","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_set-to-string-tag.js\n// module id = 57\n// module chunks = 0 1","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-trim.js\n// module id = 58\n// module chunks = 0 1","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iterators.js\n// module id = 59\n// module chunks = 0 1","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_validate-collection.js\n// module id = 60\n// module chunks = 0 1","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/msfnz.js\n// module id = 61\n// module chunks = 0 1","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/asinz.js\n// module id = 62\n// module chunks = 0 1","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Quad feature specification.\n *\n * @typedef {geo.feature.spec} geo.quadFeature.spec\n * @property {geo.geoColor|function} [color] Color for quads without images.\n *   Default is white (`{r: 1, g: 1, b: 1}`).\n * @property {number|function} [opacity=1] Opacity for the quads.\n * @property {number|function} [depth=0] Default z-coordinate for positions\n *   that don't explicitly specify one.\n * @property {boolean|function} [drawOnAsyncResourceLoaded=true] Redraw quads\n *   when images or videos are loaded after initial render.\n * @property {Image|string|function} [image] Image for each data item.  If\n *   falsy and `video` is also falsy, the quad is a solid color.  Default is\n *   (data).image.\n * @property {HTMLVideoElement|string|function} [video] Video for each data\n *   item.  If falsy and `image` is also falsy, the quad is a solid color.\n *   Default is (data).video.\n * @property {boolean|function} [delayRenderWhenSeeking=true] If any video has a\n *   truthy value and is seeking, delaying rendering the entire feature.  This\n *   prevents blinking when seeking a playing video, but may cause stuttering\n *   when there are multiple videos.\n * @property {geo.geoColor|function} [previewColor=null] If specified, a color\n *   to show on image and video quads while waiting for the image or video to\n *   load.\n * @property {Image|string|function} [previewImage=null] If specified, an image\n *   to show on image quads while waiting for the quad-specific image to load.\n *   This will only be shown if it (the preview image) is already loaded.\n * @property {object|function} [position] Position of the quad.  Default is\n *   (data).  The position is an object which specifies the corners of the\n *   quad: ll, lr, ur, ul.  At least two opposite corners must be specified.\n *   The corners do not have to physically correspond to the order specified,\n *   but rather correspond to that part of an image or video (if there is one).\n *   If a corner is unspecified, it will use the x coordinate from one adjacent\n *   corner, the y coordinate from the other adjacent corner, and the average\n *   z value of those two corners.  For instance, if ul is unspecified, it is\n *   {x: ll.x, y: ur.y}.  Note that each quad is rendered as a pair of\n *   triangles: (ll, lr, ul) and (ur, ul, lr).  Nothing special is done for\n *   quads that are not convex or quads that have substantially different\n *   transformations for those two triangles.\n * @property {boolean} [cacheQuads=true] If truthy, a set of internal\n *   information is stored on each data item in the _cachedQuad attribute.  If\n *   this is falsy, the data item is not altered.  If the data (positions,\n *   opacity, etc.) of individual quads will change, set this to `false` or\n *   call `cacheUpdate` on the data item or for all data.\n */\n\n/**\n * Create a new instance of class quadFeature.\n *\n * @class\n * @alias geo.quadFeature\n * @param {geo.quadFeature.spec} arg Options object.\n * @extends geo.feature\n * @returns {geo.quadFeature}\n */\nvar quadFeature = function (arg) {\n  'use strict';\n\n  var transform = require('./transform');\n  var util = require('./util');\n\n  if (!(this instanceof quadFeature)) {\n    return new quadFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      m_cacheQuads,\n      m_nextQuadId = 0,\n      m_images = [],\n      m_videos = [],\n      m_quads;\n\n  /**\n   * Track a list of object->object mappings.  The mappings are kept in a list.\n   * This marks all known mappings as unused.  If they are not marked as used\n   * before `_objectListEnd` is called, that function will remove them.\n   *\n   * @param {array} list The list of mappings.\n   */\n  this._objectListStart = function (list) {\n    $.each(list, function (idx, item) {\n      item.used = false;\n    });\n  };\n\n  /**\n   * Get the value from a list of object->object mappings.  If the key object\n   * is not present, return `undefined`.  If found, the entry is marked as\n   * being in use.\n   *\n   * @param {array} list The list of mappings.\n   * @param {object} entry The key to search for.\n   * @returns {object} The associated object or undefined.\n   */\n  this._objectListGet = function (list, entry) {\n    for (var i = 0; i < list.length; i += 1) {\n      if (list[i].entry === entry) {\n        list[i].used = true;\n        return list[i].value;\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * Add a new object to a list of object->object mappings.  The key object\n   * should not exist, or this will create a duplicate.  The new entry is\n   * marked as being in use.\n   *\n   * @param {array} list The list of mappings.\n   * @param {object} entry The key to add.\n   * @param {object} value The value to store with the entry.\n   */\n  this._objectListAdd = function (list, entry, value) {\n    list.push({entry: entry, value: value, used: true});\n  };\n\n  /**\n   * Remove all unused entries from a list of object->object mappings.\n   *\n   * @param {array} list The list of mappings.\n   */\n  this._objectListEnd = function (list) {\n    for (var i = list.length - 1; i >= 0; i -= 1) {\n      if (!list[i].used) {\n        list.splice(i, 1);\n      }\n    }\n  };\n\n  /**\n   * Point search method for selection api.  Returns markers containing the\n   * given point.\n   *\n   * @param {geo.geoPosition} coordinate Coordinate in input gcs to check if it\n   *    is located in any quad in map interface gcs.\n   * @returns {object} An object with `index`: a list of quad indices, and\n   *    `found`: a list of quads that contain the specified coordinate.\n   */\n  this.pointSearch = function (coordinate) {\n    var found = [], indices = [], extra = {},\n        poly1 = [{}, {}, {}, {}], poly2 = [{}, {}, {}, {}],\n        order1 = [0, 1, 2, 0], order2 = [1, 2, 3, 1],\n        data = m_this.data(),\n        map = m_this.layer().map(),\n        i, coordbasis;\n    coordinate = transform.transformCoordinates(map.ingcs(), map.gcs(), coordinate);\n    if (!m_quads) {\n      this._generateQuads();\n    }\n    $.each([m_quads.clrQuads, m_quads.imgQuads, m_quads.vidQuads], function (idx, quadList) {\n      quadList.forEach(function (quad, idx) {\n        for (i = 0; i < order1.length; i += 1) {\n          poly1[i].x = quad.pos[order1[i] * 3];\n          poly1[i].y = quad.pos[order1[i] * 3 + 1];\n          poly1[i].z = quad.pos[order1[i] * 3 + 2];\n          poly2[i].x = quad.pos[order2[i] * 3];\n          poly2[i].y = quad.pos[order2[i] * 3 + 1];\n          poly2[i].z = quad.pos[order2[i] * 3 + 2];\n        }\n        if (util.pointInPolygon(coordinate, poly1) ||\n            util.pointInPolygon(coordinate, poly2)) {\n          indices.push(quad.idx);\n          found.push(data[quad.idx]);\n          /* If a point is in the quad (based on pointInPolygon, above), check\n           * where in the quad it is located.  We want to output coordinates\n           * where the upper-left is (0, 0) and the lower-right is (1, 1). */\n          coordbasis = util.pointTo2DTriangleBasis(\n            coordinate, poly1[0], poly1[1], poly1[2]);\n          if (!coordbasis || coordbasis.x + coordbasis.y > 1) {\n            coordbasis = util.pointTo2DTriangleBasis(\n              coordinate, poly2[2], poly2[1], poly2[0]);\n            if (coordbasis) {\n              /* In the second triangle, (0, 0) is upper-right, (1, 0) is\n               * upper-left, and (0, 1) is lower-right.  Invert x to get to\n               * the desired output coordinates. */\n              coordbasis.x = 1 - coordbasis.x;\n            }\n          } else {\n            /* In the first triangle, (0, 0) is lower-left, (1, 0) is lower-\n             * right, and (0, 1) is upper-left.  Invert y to get to the\n             * desired output coordinates. */\n            coordbasis.y = 1 - coordbasis.y;\n          }\n          if (coordbasis) {\n            extra[quad.idx] = {basis: coordbasis};\n          }\n        }\n      });\n    });\n    return {\n      index: indices,\n      found: found,\n      extra: extra\n    };\n  };\n\n  /**\n   * Get/Set position.\n   *\n   * @memberof geo.quadFeature\n   * @param {object|function} [val] Object or function that returns the\n   *    position of each quad.  `undefined` to get the current position value.\n   * @returns {geo.quadFeature|this}\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else {\n      m_this.style('position', util.ensureFunction(val));\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Given a data item and its index, fetch its position and ensure we have\n   * complete information for the quad.  This generates missing corners and z\n   * values.\n   *\n   * @param {function} posFunc A function to call to get the position of a data\n   *   item.  It is passed (d, i).\n   * @param {function} depthFunc A function to call to get the z-value of a\n   *   data item.  It is passed (d, i).\n   * @param {object} d A data item.  Used to fetch position and possibly depth.\n   * @param {number} i The index within the data.  Used to fetch position and\n   *   possibly depth.\n   * @returns {object|undefined} Either an object with all four corners, or\n   *   `undefined` if no such object can be generated.  The coordinates have\n   *   been converted to map coordinates.\n   */\n  this._positionToQuad = function (posFunc, depthFunc, d, i) {\n    var initPos = posFunc.call(m_this, d, i);\n    if ((!initPos.ll || !initPos.ur) && (!initPos.ul || !initPos.lr)) {\n      return;\n    }\n    var gcs = m_this.gcs(),\n        map_gcs = m_this.layer().map().gcs(),\n        pos = {};\n    $.each(['ll', 'lr', 'ul', 'ur'], function (idx, key) {\n      if (initPos[key] !== undefined) {\n        pos[key] = {};\n        if (initPos[key].x === undefined) {\n          pos[key] = [initPos[key][0], initPos[key][1], initPos[key][2]];\n        } else {\n          pos[key] = [initPos[key].x, initPos[key].y, initPos[key].z];\n        }\n        if (pos[key][2] === undefined) {\n          pos[key][2] = depthFunc.call(m_this, d, i);\n        }\n        if (gcs !== map_gcs && gcs !== false) {\n          pos[key] = transform.transformCoordinates(\n            gcs, map_gcs, pos[key]);\n        }\n      }\n    });\n    pos.ll = pos.ll || [pos.ul[0], pos.lr[1], (pos.ul[2] + pos.lr[2]) / 2];\n    pos.lr = pos.lr || [pos.ur[0], pos.ll[1], (pos.ur[2] + pos.ll[2]) / 2];\n    pos.ur = pos.ur || [pos.lr[0], pos.ul[1], (pos.lr[2] + pos.ul[2]) / 2];\n    pos.ul = pos.ul || [pos.ll[0], pos.ur[1], (pos.ll[2] + pos.ur[2]) / 2];\n    return pos;\n  };\n\n  /**\n   * Renderers can subclass this when needed.\n   *\n   * This is called when a video qaud may have changed play state.\n   * @param {object} quad The quad record that triggered this.\n   * @param {jQuery.Event} [evt] The event that triggered this.\n   */\n  this._checkQuadUpdate = function (quad, evt) {\n  };\n\n  /**\n   * Convert the current data set to a set of 3 arrays: quads that are a solid\n   * color, quads that have an image, and quads that have a video.  All quads\n   * are objects with pos (a 12 value array containing 4 three-dimensional\n   * position coordinates), and opacity.  Color quads also have a color.  Image\n   * quads may have an image element if the image is loaded.  If it isn't, this\n   * element will be missing.  For preview images, the image quad will have a\n   * reference to the preview element that may later be removed.  If a preview\n   * color is used, the quad will be in both lists, but may be removed from the\n   * color quad list once the image is loaded.  Video quads may have a video\n   * element if the video is loaded.\n   *\n   * The value for origin is one of an ll corner from one of the quads with the\n   * smallest sum of diagonals.  The assumption is that, if using the origin to\n   * improve precision, the smallest quads are the ones most in need of this\n   * benefit.\n   *\n   * @returns {object} An object with `clrQuads`, `imgQuads`, and `vidQuads`,\n   *   each of which is an array; and `origin`, which is a triplet that is\n   *   guaranteed to be one of the quads' corners for a quad with the smallest\n   *   sum of diagonal lengths.\n   */\n  this._generateQuads = function () {\n    var posFunc = m_this.position(),\n        imgFunc = m_this.style.get('image'),\n        vidFunc = m_this.style.get('video'),\n        delayFunc = m_this.style.get('delayRenderWhenSeeking'),\n        colorFunc = m_this.style.get('color'),\n        depthFunc = m_this.style.get('depth'),\n        opacityFunc = m_this.style.get('opacity'),\n        loadedFunc = m_this.style.get('drawOnAsyncResourceLoaded'),\n        previewColorFunc = m_this.style.get('previewColor'),\n        previewImageFunc = m_this.style.get('previewImage'),\n        data = m_this.data(),\n        clrQuads = [], imgQuads = [], vidQuads = [],\n        origin = [0, 0, 0], origindiag2, diag2;\n    /* Keep track of images that we are using.  This prevents creating\n     * additional Image elements for repeated urls. */\n    m_this._objectListStart(m_images);\n    m_this._objectListStart(m_videos);\n    $.each(data, function (i, d) {\n      if (d._cachedQuad) {\n        diag2 = d._cachedQuad.diag2;\n        if (origindiag2 === undefined || (d._cachedQuad.diag2 &&\n            d._cachedQuad.diag2 < origindiag2)) {\n          origin = d._cachedQuad.ll;\n          origindiag2 = d._cachedQuad.diag2;\n        }\n        if (d._cachedQuad.clrquad) {\n          clrQuads.push(d._cachedQuad.clrquad);\n        }\n        if (d._cachedQuad.imgquad) {\n          if (d._cachedQuad.imageEntry) {\n            m_this._objectListGet(m_images, d._cachedQuad.imageEntry);\n          }\n          imgQuads.push(d._cachedQuad.imgquad);\n        }\n        if (d._cachedQuad.vidquad) {\n          if (d._cachedQuad.videoEntry) {\n            m_this._objectListGet(m_videos, d._cachedQuad.videoEntry);\n          }\n          vidQuads.push(d._cachedQuad.vidquad);\n        }\n        return;\n      }\n      var quad, reload, image, video, prev_onload, prev_onerror, defer,\n          pos, img, vid, opacity, previewColor, previewImage, quadinfo = {};\n\n      pos = m_this._positionToQuad(posFunc, depthFunc, d, i);\n      opacity = opacityFunc.call(m_this, d, i);\n      if (pos === undefined || !opacity || opacity < 0) {\n        return;\n      }\n      diag2 = Math.pow(pos.ll[0] - pos.ur[0], 2) + Math.pow(pos.ll[1] -\n          pos.ur[1], 2) + Math.pow(pos.ll[2] - pos.ur[0], 2) + Math.pow(\n        pos.lr[0] - pos.ur[0], 2) + Math.pow(pos.lr[1] - pos.ur[1], 2) +\n        Math.pow(pos.lr[2] - pos.ur[0], 2);\n      quadinfo.diag2 = diag2;\n      quadinfo.ll = pos.ll;\n      if (origindiag2 === undefined || (diag2 && diag2 < origindiag2)) {\n        origin = pos.ll;\n        origindiag2 = diag2;\n      }\n      pos = [\n        pos.ll[0], pos.ll[1], pos.ll[2],\n        pos.lr[0], pos.lr[1], pos.lr[2],\n        pos.ul[0], pos.ul[1], pos.ul[2],\n        pos.ur[0], pos.ur[1], pos.ur[2]\n      ];\n      quad = {\n        idx: i,\n        pos: pos,\n        opacity: opacity\n      };\n      if (d.reference) {\n        quad.reference = d.reference;\n      }\n      if (d.crop) {\n        quad.crop = d.crop;\n      }\n      img = imgFunc.call(m_this, d, i);\n      vid = img ? null : vidFunc.call(m_this, d, i);\n      if (img) {\n        quadinfo.imageEntry = img;\n        /* Handle image quads */\n        image = m_this._objectListGet(m_images, img);\n        if (image === undefined) {\n          if (img instanceof Image || img instanceof HTMLCanvasElement) {\n            image = img;\n          } else {\n            image = new Image();\n            image.src = img;\n          }\n          m_this._objectListAdd(m_images, img, image);\n        }\n        if (util.isReadyImage(image) || image instanceof HTMLCanvasElement) {\n          quad.image = image;\n        } else {\n          previewColor = undefined;\n          previewImage = previewImageFunc.call(m_this, d, i);\n          if (previewImage && util.isReadyImage(previewImage)) {\n            quad.image = previewImage;\n          } else {\n            previewColor = previewColorFunc.call(m_this, d, i);\n            quad.color = util.convertColor(previewColor);\n            if (quad.color && quad.color.r !== undefined && quad.color.g !== undefined && quad.color.b !== undefined) {\n              clrQuads.push(quad);\n              quadinfo.clrquad = quad;\n            } else {\n              previewColor = undefined;\n            }\n          }\n          reload = loadedFunc.call(m_this, d, i);\n          if (reload) {\n            // add a promise to the layer if this image might complete\n            defer = util.isReadyImage(image, true) ? null : $.Deferred();\n            prev_onload = image.onload;\n            image.onload = function () {\n              if (previewColor !== undefined) {\n                if ($.inArray(quad, clrQuads) >= 0) {\n                  clrQuads.splice($.inArray(quad, clrQuads), 1);\n                }\n                delete quadinfo.clrquad;\n              }\n              quad.image = image;\n              m_this.dataTime().modified();\n              m_this.modified();\n              m_this._update();\n              m_this.layer().draw();\n              if (defer) {\n                defer.resolve();\n              }\n              if (prev_onload) {\n                return prev_onload.apply(this, arguments);\n              }\n            };\n            prev_onerror = image.onerror;\n            image.onerror = function () {\n              if (defer) {\n                defer.reject();\n              }\n              if (prev_onerror) {\n                return prev_onerror.apply(this, arguments);\n              }\n            };\n            if (defer) {\n              m_this.layer().addPromise(defer.promise());\n            }\n          } else if (previewColor === undefined && !quad.image) {\n            /* the image isn't ready and we don't want to reload, so don't add\n             * it to the list of image quads */\n            return;\n          }\n        }\n        imgQuads.push(quad);\n        quadinfo.imgquad = quad;\n      } else if (vid) {\n        /* Handle video quads */\n        quadinfo.videoEntry = vid;\n        video = m_this._objectListGet(m_videos, vid);\n        if (video === undefined) {\n          if (vid instanceof HTMLVideoElement) {\n            video = vid;\n          } else {\n            video = document.createElement('video');\n            video.src = vid;\n          }\n          m_this._objectListAdd(m_videos, vid, video);\n          /* monitor some media events that may indicate a change of play state\n           * or seeking */\n          $(video).off('.geojsvideo')\n            .on('seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo', function (evt) {\n              m_this._checkQuadUpdate(quad, evt);\n            });\n        }\n        quad.delayRenderWhenSeeking = delayFunc.call(m_this, d, i);\n        if (quad.delayRenderWhenSeeking === undefined) {\n          quad.delayRenderWhenSeeking = true;\n        }\n        if (util.isReadyVideo(video)) {\n          quad.video = video;\n        } else {\n          previewColor = previewColorFunc.call(m_this, d, i);\n          quad.color = util.convertColor(previewColor);\n          if (quad.color && quad.color.r !== undefined && quad.color.g !== undefined && quad.color.b !== undefined) {\n            clrQuads.push(quad);\n            quadinfo.clrquad = quad;\n          } else {\n            previewColor = undefined;\n          }\n          reload = loadedFunc.call(m_this, d, i);\n          if (reload) {\n            // add a promise to the layer if this video might load\n            defer = util.isReadyVideo(video, true) ? null : $.Deferred();\n            prev_onload = video.onloadeddata;\n            video.onloadeddata = function () {\n              if (previewColor !== undefined) {\n                if ($.inArray(quad, clrQuads) >= 0) {\n                  clrQuads.splice($.inArray(quad, clrQuads), 1);\n                }\n                delete quadinfo.clrquad;\n              }\n              quad.video = video;\n              m_this.dataTime().modified();\n              m_this.modified();\n              m_this._update();\n              m_this.layer().draw();\n              if (defer) {\n                defer.resolve();\n              }\n              if (prev_onload) {\n                return prev_onload.apply(this, arguments);\n              }\n            };\n            prev_onerror = video.onerror;\n            video.onerror = function () {\n              if (defer) {\n                defer.reject();\n              }\n              if (prev_onerror) {\n                return prev_onerror.apply(this, arguments);\n              }\n            };\n            if (defer) {\n              m_this.layer().addPromise(defer.promise());\n            }\n          } else if (previewColor === undefined && !quad.video) {\n            /* the video isn't ready and we don't want to reload, so don't add\n             * it to the list of video quads */\n            return;\n          }\n        }\n        vidQuads.push(quad);\n        quadinfo.vidquad = quad;\n      } else {\n        /* Handle color quads */\n        quad.color = util.convertColor(colorFunc.call(m_this, d, i));\n        if (!quad.color || quad.color.r === undefined || quad.color.g === undefined || quad.color.b === undefined) {\n          /* if we can't resolve the color, don't make a quad */\n          return;\n        }\n        clrQuads.push(quad);\n        quadinfo.clrquad = quad;\n      }\n      if (quadinfo.clrquad) {\n        m_nextQuadId += 1;\n        quadinfo.clrquad.quadId = m_nextQuadId;\n      }\n      if (quadinfo.imgquad) {\n        m_nextQuadId += 1;\n        quadinfo.imgquad.quadId = m_nextQuadId;\n      }\n      if (quadinfo.vidquad) {\n        m_nextQuadId += 1;\n        quadinfo.vidquad.quadId = m_nextQuadId;\n      }\n      if (m_cacheQuads !== false) {\n        d._cachedQuad = quadinfo;\n      }\n    });\n    m_this._objectListEnd(m_images);\n    m_this._objectListEnd(m_videos);\n    m_quads = {\n      clrQuads: clrQuads,\n      imgQuads: imgQuads,\n      vidQuads: vidQuads,\n      origin: origin\n    };\n    return m_quads;\n  };\n\n  /**\n   * If the data has changed and caching has been used, update one or all data\n   * items by clearing their caches and updating the modified flag.\n   *\n   * @param {number|object} [indexOrData] If not specified, clear all quad\n   *    caches.  If a number, clear that index-numbered entry from the data\n   *    array.  Otherwise, clear the matching entry in the data array.\n   * @returns {this}\n   */\n  this.cacheUpdate = function (indexOrData) {\n    if (indexOrData === undefined || indexOrData === null) {\n      $.each(m_this.data(), function (idx, entry) {\n        if (entry._cachedQuad) {\n          delete entry._cachedQuad;\n        }\n      });\n    } else {\n      if (isFinite(indexOrData)) {\n        indexOrData = m_this.data()[indexOrData];\n      }\n      if (indexOrData._cachedQuad) {\n        delete indexOrData._cachedQuad;\n      }\n    }\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get the HTML video element associated with a data item.\n   *\n   * @param {number|object} indexOrData If a number, use that entry in the data\n   *    array, otherwise this must be a value in the data array.  If caching is\n   *    used, this is much more efficient.\n   * @returns {HTMLVideoElement|null}\n   */\n  this.video = function (indexOrData) {\n    var video, index;\n\n    if (isFinite(indexOrData)) {\n      indexOrData = m_this.data()[indexOrData];\n    }\n    if (indexOrData._cachedQuad) {\n      video = (indexOrData._cachedQuad.vidquad || {}).video;\n    } else {\n      if (!m_quads) {\n        m_this._generateQuads();\n      }\n      index = m_this.data().indexOf(indexOrData);\n      if (index >= 0) {\n        /* If we don't cache the quad, we don't maintain a direct link between\n         * a data element and the video (partly because videos could be shared\n         * between multiple quads).  Instead, the video will be in the\n         * last-used object list with a reference to the video value of the\n         * data entry. */\n        video = m_this._objectListGet(m_videos, m_this.style.get('video')(indexOrData, index));\n      }\n    }\n    if (video instanceof HTMLVideoElement) {\n      return video;\n    }\n    return null;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.quadFeature.spec} arg Options for the feature.\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    m_cacheQuads = (arg.cacheQuads !== false);\n\n    var style = $.extend(\n      {},\n      {\n        color: { r: 1.0, g: 1, b: 1 },\n        opacity: 1,\n        depth: 0,\n        drawOnAsyncResourceLoaded: true,\n        previewColor: null,\n        previewImage: null,\n        image: function (d) { return d.image; },\n        video: function (d) { return d.video; },\n        position: function (d) { return d; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.position !== undefined) {\n      style.position = util.ensureFunction(arg.position);\n    }\n    m_this.style(style);\n    m_this.dataTime().modified();\n  };\n\n  return m_this;\n};\n\n/**\n * Create a quadFeature from an object.\n *\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to.\n * @param {geo.quadFeature.spec} spec The object specification.\n * @returns {geo.quadFeature|null}\n */\nquadFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'quad';\n  return feature.create(layer, spec);\n};\n\nquadFeature.capabilities = {\n  /* support for solid-colored quads */\n  color: 'quad.color',\n  /* support for parallelogram image quads */\n  image: 'quad.image',\n  /* support for cropping quad images */\n  imageCrop: 'quad.imageCrop',\n  /* support for fixed-scale quad images */\n  imageFixedScale: 'quad.imageFixedScale',\n  /* support for arbitrary quad images */\n  imageFull: 'quad.imageFull',\n  /* support for canvas elements as content in image quads */\n  canvas: 'quad.canvas',\n  /* support for parallelogram video quads */\n  video: 'quad.video'\n};\n\ninherit(quadFeature, feature);\nmodule.exports = quadFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./quadFeature.js","/**\n * VGL specific subclass of object which rerenders when the object is drawn.\n *\n * @class\n * @alias geo.gl.object\n * @extends geo.sceneObject\n * @param {object} arg Options for the object.\n * @returns {geo.gl.object}\n */\nvar gl_object = function (arg) {\n  'use strict';\n\n  var object = require('../object');\n\n  // this is used to extend other geojs classes, so only generate\n  // a new object when that is not the case... like if this === window\n  if (!(this instanceof object)) {\n    return new gl_object(arg);\n  }\n\n  var m_this = this,\n      s_draw = this.draw;\n\n  /**\n   * Redraw the object.\n   *\n   * @returns {this}\n   */\n  this.draw = function () {\n    if (m_this.ready) {\n      m_this._update({mayDelay: true});\n      m_this.renderer()._render();\n      s_draw();\n    }\n    return m_this;\n  };\n\n  return this;\n};\n\nmodule.exports = gl_object;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/object.js","var inherit = require('../inherit');\nvar sceneObject = require('../sceneObject');\n\n/**\n * Canvas specific subclass of object which rerenders when the object is drawn.\n * @class\n * @alias geo.canvas.object\n * @extends geo.sceneObject\n * @param {object} arg Options for the object.\n * @returns {geo.canvas.object}\n */\nvar canvas_object = function (arg) {\n  'use strict';\n\n  var object = require('../object');\n\n  // this is used to extend other geojs classes, so only generate\n  // a new object when that is not the case... like if this === window\n  if (!(this instanceof object)) {\n    return new canvas_object(arg);\n  }\n  sceneObject.call(this);\n\n  var m_this = this,\n      s_draw = this.draw,\n      m_canvasProperties = {};\n\n  /**\n   * This must be overridden by any feature that needs to render.\n   */\n  this._renderOnCanvas = function () {\n  };\n\n  /**\n   * If this returns true, the render will be skipped and tried again on the\n   * next animation frame.\n   *\n   * @returns {boolean} Truthy to delay rendering.\n   */\n  this._delayRender = function () {\n    return false;\n  };\n\n  /**\n   * Check if a property has already been set on a canvas's context.  If so,\n   * don't set it again.  Some browsers are much slower if the properties are\n   * set, even if no change is made.\n   *\n   * @param {CanvasRenderingContext2D} [context] The canvas context to modify.\n   *    If `undefined`, clear the internal property buffer.\n   * @param {string} [key] The property to set on the canvas.\n   * @param {object} [value] The value for the property.\n   * @returns {this} The current object.\n   */\n  this._canvasProperty = function (context, key, value) {\n    if (!context || !key) {\n      m_canvasProperties = {};\n      return m_this;\n    }\n    if (m_canvasProperties[key] !== value) {\n      m_canvasProperties[key] = value;\n      context[key] = value;\n    }\n    return m_this;\n  };\n\n  /**\n   * Redraw the object.\n   *\n   * @returns {this} The current object.\n   */\n  this.draw = function () {\n    if (m_this.ready) {\n      m_this._update();\n      m_this.renderer()._render();\n      s_draw();\n    }\n    return m_this;\n  };\n\n  return this;\n};\n\ninherit(canvas_object, sceneObject);\nmodule.exports = canvas_object;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/object.js","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iobject.js\n// module id = 66\n// module chunks = 0 1","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-pie.js\n// module id = 67\n// module chunks = 0 1","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_classof.js\n// module id = 68\n// module chunks = 0 1","export default function(x) {\n  return x<0 ? -1 : 1;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/sign.js\n// module id = 69\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/adjust_lat.js\n// module id = 70\n// module chunks = 0 1","var inherit = require('./inherit');\nvar object = require('./object');\n\n/**\n * Create a new instance of class renderer.\n *\n * @class\n * @alias geo.renderer\n * @extends geo.object\n * @param {object} arg Options for the renderer.\n * @param {geo.layer} [arg.layer] Layer associated with the renderer.\n * @param {HTMLElement} [arg.canvas] Canvas element associated with the\n *   renderer.\n * @returns {geo.renderer}\n */\nvar renderer = function (arg) {\n  'use strict';\n\n  if (!(this instanceof renderer)) {\n    return new renderer(arg);\n  }\n  object.call(this);\n\n  arg = arg || {};\n  var m_this = this,\n      m_layer = arg.layer === undefined ? null : arg.layer,\n      m_canvas = arg.canvas === undefined ? null : arg.canvas,\n      m_initialized = false;\n\n  /**\n   * Get layer of the renderer.\n   *\n   * @returns {geo.layer}\n   */\n  this.layer = function () {\n    return m_layer;\n  };\n\n  /**\n   * Get/set canvas for the renderer.\n   *\n   * @param {HTMLElement} [val] If `undefined`, return the current canvas\n   *    element, otherwise set the canvas element and mark the renderer as\n   *    modified.\n   * @returns {HTMLElement|this} The current canvas element or the renderer\n   *    instance.\n   */\n  this.canvas = function (val) {\n    if (val === undefined) {\n      return m_canvas;\n    }\n    m_canvas = val;\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get the map associated with the renderer's layer.\n   *\n   * @returns {geo.map|null} The map associated with the renderer's layer or\n   *    `null` if there is no layer.\n   */\n  this.map = function () {\n    if (m_layer) {\n      return m_layer.map();\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Get/set if renderer has been initialized.\n   *\n   * @param {boolean} [val] If `undefined` return the initialization state,\n   *    otherwise set it.\n   * @returns {boolean|this} The initialization state or this renderer\n   *    instance.\n   */\n  this.initialized = function (val) {\n    if (val === undefined) {\n      return m_initialized;\n    }\n    m_initialized = val;\n    return m_this;\n  };\n\n  /**\n   * Get render API used by the renderer.\n   *\n   * This must be subclassed, returning a string describing the renderer\n   * interface.\n   */\n  this.api = function () {\n    throw new Error('Should be implemented by derived classes');\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    return m_this;\n  };\n\n  /**\n   * Handle resize event.\n   *\n   * @param {number} x Ignored.\n   * @param {number} y Ignored.\n   * @param {number} w New width in pixels.\n   * @param {number} h New height in pixels.\n   * @returns {this}\n   */\n  this._resize = function (x, y, w, h) {\n    return m_this;\n  };\n\n  /**\n   * Render.\n   *\n   * @returns {this}\n   */\n  this._render = function () {\n    return m_this;\n  };\n\n  return this;\n};\n\ninherit(renderer, object);\nmodule.exports = renderer;\n\n\n\n// WEBPACK FOOTER //\n// ./renderer.js","var inherit = require('./inherit');\nvar feature = require('./feature');\nvar timestamp = require('./timestamp');\nvar transform = require('./transform');\nvar util = require('./util');\n\n/**\n * Line feature specification.\n *\n * @typedef {geo.feature.spec} geo.lineFeature.spec\n * @property {geo.geoPosition|function} [position] Position of the data.\n *   Default is (data).\n * @property {object|function} [line] Lines from the data.  Default is (data).\n *   Typically, the data is an array of lines, each of which is an array of\n *   points.  Only lines that have at least two points are rendered.  The\n *   position function is called for each point as `position(linePoint,\n *   pointIndex, lineEntry, lineEntryIndex)`.\n * @property {geo.lineFeature.styleSpec} [style] Style object with default\n *   style options.\n */\n\n/**\n * Style specification for a line feature.\n *\n * @typedef {geo.feature.styleSpec} geo.lineFeature.styleSpec\n * @extends geo.feature.styleSpec\n * @property {geo.geoColor|function} [strokeColor] Color to stroke each line.\n *   The color can vary by point.\n * @property {number|function} [strokeOpacity] Opacity for each line stroke.\n *   The opacity can vary by point.  Opacity is on a [0-1] scale.\n * @property {number|function} [strokeWidth] The weight of the line stroke in\n *   pixels.  The width can vary by point.\n * @property {number|function} [strokeOffset] This is a value from -1 (left) to\n *   1 (right), with 0 being centered.  This can vary by point.\n * @property {string|function} [lineCap='butt'] One of 'butt', 'square', or\n *   'round'.  This can vary by point.\n * @property {string|function} [lineJoin='miter'] One of 'miter', 'bevel',\n *   'round', or 'miter-clip'.  This can vary by point.\n * @property {boolean|function} [closed=false] If true and the renderer\n *   supports it, connect the first and last points of a line if the line has\n *   more than two points.  This applies per line (if a function, it is called\n *   with `(lineEntry, lineEntryIndex)`.\n * @property {number|function} [miterLimit=10] For lines of more than two\n *   segments that are mitered, if the miter length exceeds the `strokeWidth`\n *   divided by the sine of half the angle between segments, then a bevel join\n *   is used instead.  This is a single value that applies to all lines.  If a\n *   function, it is called with `(data)`.\n * @property {number|function} [antialiasing] Antialiasing distance in pixels.\n *   Values must be non-negative.  A value greater than 1 will produce a\n *   visible gradient.  This is a single value that applies to all lines.\n * @property {string|function} [debug] If 'debug', render lines in debug mode.\n *   This is a single value that applies to all lines.\n */\n\n/**\n * Create a new instance of class lineFeature.\n *\n * @class\n * @alias geo.lineFeature\n * @extends geo.feature\n * @param {geo.lineFeature.spec} arg\n * @returns {geo.lineFeature}\n */\nvar lineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof lineFeature)) {\n    return new lineFeature(arg);\n  }\n\n  var $ = require('jquery');\n\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      m_pointSearchTime = timestamp(),\n      m_pointSearchInfo;\n\n  this.featureType = 'line';\n  this._subfeatureStyles = {\n    lineCap: true,\n    lineJoin: true,\n    strokeColor: true,\n    strokeOffset: true,\n    strokeOpacity: true,\n    strokeWidth: true\n  };\n\n  /**\n   * Get/set line accessor.\n   *\n   * @param {object|function} [val] If not specified, return the current line\n   *    accessor.  If specified, use this for the line accessor and return\n   *    `this`.  If a function is given, the function is passed `(dataElement,\n   *    dataIndex)` and returns an array of vertex elements.\n   * @returns {object|function|this} The current line accessor or this feature.\n   */\n  this.line = function (val) {\n    if (val === undefined) {\n      return m_this.style('line');\n    } else {\n      m_this.style('line', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set position accessor.\n   *\n   * @param {geo.geoPosition|function} [val] If not specified, return the\n   *    current position accessor.  If specified, use this for the position\n   *    accessor and return `this`.  If a function is given, this is called\n   *    with `(vertexElement, vertexIndex, dataElement, dataIndex)`.\n   * @returns {geo.geoPosition|function|this} The current position or this\n   *    feature.\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else {\n      m_this.style('position', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Cache information needed for point searches.  The point search\n   * information record is an array with one entry per line, each entry of\n   * which is an array with one entry per line segment.  These each contain\n   * an object with the end coordinates (`u`, `v`) of the segment in map gcs\n   * coordinates and the square of the maximum half-width that needs to be\n   * considered for the line (`r2`).\n   *\n   * @returns {object} The point search information record.\n   */\n  this._updatePointSearchInfo = function () {\n    if (m_pointSearchTime.timestamp() >= m_this.dataTime().timestamp() &&\n        m_pointSearchTime.timestamp() >= m_this.timestamp()) {\n      return m_pointSearchInfo;\n    }\n    m_pointSearchTime.modified();\n    m_pointSearchInfo = [];\n    var data = m_this.data(),\n        line = m_this.line(),\n        widthFunc = m_this.style.get('strokeWidth'),\n        posFunc = m_this.position(),\n        closedFunc = m_this.style.get('closed'),\n        gcs = m_this.gcs(),\n        mapgcs = m_this.layer().map().gcs();\n\n    data.forEach(function (d, index) {\n      var closed = closedFunc(d, index),\n          last, lastr2, first, record = [];\n\n      line(d, index).forEach(function (current, j) {\n        var p = posFunc(current, j, d, index);\n        if (gcs !== mapgcs) {\n          p = transform.transformCoordinates(gcs, mapgcs, p);\n        }\n        var r = Math.ceil(widthFunc(current, j, d, index) / 2) + 2;\n        var r2 = r * r;\n        if (last) {\n          record.push({u: p, v: last, r2: lastr2 > r2 ? lastr2 : r2});\n        }\n        last = p;\n        lastr2 = r2;\n        if (!first && closed) {\n          first = {p: p, r2: r2};\n        }\n      });\n      if (closed && first && (last.x !== first.p.x || last.y !== first.p.y)) {\n        record.push({u: last, v: first.p, r2: lastr2 > first.r2 ? lastr2 : first.r2});\n      }\n      m_pointSearchInfo.push(record);\n    });\n    return m_pointSearchInfo;\n  };\n\n  /**\n   * Returns an array of datum indices that contain the given point.  This is a\n   * slow implementation with runtime order of the number of vertices.  A point\n   * is considered on a line segment if it is close to the line or either end\n   * point.  Closeness is based on the maximum width of the line segement, and\n   * is `ceil(maxwidth / 2) + 2` pixels.  This means that corner extensions\n   * due to mitering may be outside of the selection area and that variable-\n   * width lines will have a greater selection region than their visual size at\n   * the narrow end.\n   *\n   * @param {geo.geoPosition} p point to search for in map interface gcs.\n   * @returns {object} An object with `index`: a list of line indices, and\n   *    `found`: a list of quads that contain the specified coordinate.\n   */\n  this.pointSearch = function (p) {\n    var data = m_this.data(), indices = [], found = [];\n    if (!data || !data.length || !m_this.layer()) {\n      return {\n        found: found,\n        index: indices\n      };\n    }\n    this._updatePointSearchInfo();\n    var map = m_this.layer().map(),\n        scale = map.unitsPerPixel(map.zoom()),\n        scale2 = scale * scale,\n        pt = transform.transformCoordinates(map.ingcs(), map.gcs(), p),\n        i, j, record;\n\n    for (i = 0; i < m_pointSearchInfo.length; i += 1) {\n      record = m_pointSearchInfo[i];\n      for (j = 0; j < record.length; j += 1) {\n        if (util.distance2dToLineSquared(pt, record[j].u, record[j].v) <= record[j].r2 * scale2) {\n          found.push(data[i]);\n          indices.push(i);\n          break;\n        }\n      }\n    }\n    return {\n      found: found,\n      index: indices\n    };\n  };\n\n  /**\n   * Search for lines contained within a rectangilar region.\n   *\n   * @param {geo.geoPosition} lowerLeft Lower-left corner in gcs coordinates.\n   * @param {geo.geoPosition} upperRight Upper-right corner in gcs coordinates.\n   * @param {object} [opts] Additional search options.\n   * @param {boolean} [opts.partial=false] If truthy, include lines that are\n   *    partially in the box, otherwise only include lines that are fully\n   *    within the region.\n   * @returns {number[]} A list of line indices that are in the box region.\n   */\n  this.boxSearch = function (lowerLeft, upperRight, opts) {\n    var pos = m_this.position(),\n        idx = [],\n        line = m_this.line();\n\n    opts = opts || {};\n    opts.partial = opts.partial || false;\n    if (opts.partial) {\n      throw new Error('Unimplemented query method.');\n    }\n\n    m_this.data().forEach(function (d, i) {\n      var inside = true;\n      line(d, i).forEach(function (e, j) {\n        if (!inside) { return; }\n        var p = pos(e, j, d, i);\n        if (!(p.x >= lowerLeft.x &&\n              p.x <= upperRight.x &&\n              p.y >= lowerLeft.y &&\n              p.y <= upperRight.y)\n        ) {\n          inside = false;\n        }\n      });\n      if (inside) {\n        idx.push(i);\n      }\n    });\n    return idx;\n  };\n\n  /**\n   * Take a set of data, reduce the number of vertices per line using the\n   * Ramer–Douglas–Peucker algorithm, and use the result as the new data.\n   * This changes the instance's data, the position accessor, and the line\n   * accessor.\n   *\n   * @param {array} data A new data array.\n   * @param {number} [tolerance] The maximum variation allowed in map.gcs\n   *    units.  A value of zero will only remove perfectly colinear points.  If\n   *    not specified, this is set to a half display pixel at the map's current\n   *    zoom level.\n   * @param {function} [posFunc=this.style.get('position')] The function to\n   *    get the position of each vertex.\n   * @param {function} [lineFunc=this.style.get('line')] The function to get\n   *    each line.\n   * @returns {this}\n   */\n  this.rdpSimplifyData = function (data, tolerance, posFunc, lineFunc) {\n    data = data || m_this.data();\n    posFunc = posFunc || m_this.style.get('position');\n    lineFunc = lineFunc || m_this.style.get('line');\n    var map = m_this.layer().map(),\n        mapgcs = map.gcs(),\n        featuregcs = m_this.gcs(),\n        closedFunc = m_this.style.get('closed');\n    if (tolerance === undefined) {\n      tolerance = map.unitsPerPixel(map.zoom()) * 0.5;\n    }\n\n    /* transform the coordinates to the map gcs */\n    data = data.map(function (d, idx) {\n      var lineItem = lineFunc(d, idx),\n          pts = transform.transformCoordinates(featuregcs, mapgcs, lineItem.map(function (ld, lidx) {\n            return posFunc(ld, lidx, d, idx);\n          })),\n          elem = util.rdpLineSimplify(pts, tolerance, closedFunc(d, idx), []);\n      if (elem.length < 2 || (elem.length === 2 && util.distance2dSquared(elem[0], elem[1]) < tolerance * tolerance)) {\n        elem = [];\n      }\n      elem = transform.transformCoordinates(mapgcs, featuregcs, elem);\n      /* Copy element properties, as they might be used by styles */\n      for (var key in d) {\n        if (d.hasOwnProperty(key) && !(Array.isArray(d) && key >= 0 && key < d.length)) {\n          elem[key] = d[key];\n        }\n      }\n      return elem;\n    });\n\n    /* Set the reduced lines as the data and use simple accessors. */\n    m_this.style('position', function (d) { return d; });\n    m_this.style('line', function (d) { return d; });\n    m_this.data(data);\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.lineFeature.spec} arg The feature specification.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        strokeWidth: 1.0,\n        // Default to gold color for lines\n        strokeColor: { r: 1.0, g: 0.8431372549, b: 0.0 },\n        strokeStyle: 'solid',\n        strokeOpacity: 1.0,\n        // Values of 2 and above appear smoothest.\n        antialiasing: 2.0,\n        closed: false,\n        line: function (d) { return d; },\n        position: function (d) { return d; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.line !== undefined) {\n      defaultStyle.line = arg.line;\n    }\n\n    if (arg.position !== undefined) {\n      defaultStyle.position = arg.position;\n    }\n\n    m_this.style(defaultStyle);\n\n    m_this.dataTime().modified();\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\n/**\n * Create a lineFeature.\n *\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to\n * @param {geo.lineFeature.spec} spec The feature specification\n * @returns {geo.lineFeature|null} The created feature or `null` for failure.\n */\nlineFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'line';\n  return feature.create(layer, spec);\n};\n\nlineFeature.capabilities = {\n  /* core feature name -- support in any manner */\n  feature: 'line',\n  /* support for solid-colored, constant-width lines */\n  basic: 'line.basic',\n  /* support for lines that vary in width and color */\n  multicolor: 'line.multicolor'\n};\n\ninherit(lineFeature, feature);\nmodule.exports = lineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./lineFeature.js","var inherit = require('./inherit');\nvar sceneObject = require('./sceneObject');\nvar feature = require('./feature');\nvar checkRenderer = require('./registry').checkRenderer;\nvar rendererForFeatures = require('./registry').rendererForFeatures;\nvar rendererForAnnotations = require('./registry').rendererForAnnotations;\n\n/**\n * Create a new layer.\n *\n * @class\n * @alias geo.layer\n * @extends geo.sceneObject\n * @param {object} [arg] Options for the new layer.\n * @param {number} [arg.id] The id of the layer.  Defaults to a increasing\n *   sequence.\n * @param {geo.map} [arg.map=null] Parent map of the layer.\n * @param {string|geo.renderer} [arg.renderer] Renderer to associate with the\n *   layer.  If not specified, either `arg.annotations` or `arg.features` can\n *   be used to determine the renderer.\n * @param {string[]|object} [arg.annotations] A list of annotations that will\n *   be used on this layer, used to select a renderer.  Instead of a list, if\n *   this is an object, the keys are the annotation names, and the values are\n *   each a list of modes that will be used with that annotation.  See\n *   `featuresForAnnotations` more details.  This is ignored if `arg.renderer`\n *   is specified.\n * @param {string[]} [arg.features] A list of features that will be used on\n *   this layer, used to select a renderer.  Features are the basic feature\n *   names (e.g., `'quad'`), or the feature name followed by a required\n *   capability (e.g., `'quad.image'`).  This is ignored if `arg.renderer` or\n *   `arg.annotations` is specified.\n * @param {boolean} [arg.active=true] Truthy if the layer has the `active` css\n *   class and may receive native mouse events.\n * @param {string} [arg.attribution] An attribution string to display.\n * @param {number} [arg.opacity=1] The layer opacity on a scale of [0-1].\n * @param {string} [arg.name=''] A name for the layer for user convenience.\n * @param {boolean} [arg.selectionAPI=true] Truthy if the layer can generate\n *   selection and other interaction events.\n * @param {boolean} [arg.sticky=true] Truthy if the layer should navigate with\n *   the map.\n * @param {boolean} [arg.visible=true] Truthy if the layer is visible.\n * @param {number} [arg.zIndex] The z-index to assign to the layer (defaults\n *   to the index of the layer inside the map).\n * @returns {geo.layer}\n */\nvar layer = function (arg) {\n  'use strict';\n\n  if (!(this instanceof layer)) {\n    return new layer(arg);\n  }\n  arg = arg || {};\n  sceneObject.call(this, arg);\n\n  var $ = require('jquery');\n  var timestamp = require('./timestamp');\n  var createRenderer = require('./registry').createRenderer;\n  var newLayerId = require('./util').newLayerId;\n  var geo_event = require('./event');\n  var camera = require('./camera');\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      m_id = arg.id === undefined ? layer.newLayerId() : arg.id,\n      m_name = arg.name === undefined ? '' : arg.name,\n      m_map = arg.map === undefined ? null : arg.map,\n      m_node = null,\n      m_canvas = null,\n      m_renderer = null,\n      m_initialized = false,\n      m_rendererName = arg.renderer !== undefined ? arg.renderer : (\n        arg.annotations ? rendererForAnnotations(arg.annotations) :\n          rendererForFeatures(arg.features)),\n      m_dataTime = timestamp(),\n      m_updateTime = timestamp(),\n      m_sticky = arg.sticky === undefined ? true : arg.sticky,\n      m_active = arg.active === undefined ? true : arg.active,\n      m_opacity = arg.opacity === undefined ? 1 : arg.opacity,\n      m_attribution = arg.attribution || null,\n      m_visible = arg.visible === undefined ? true : arg.visible,\n      m_selectionAPI = arg.selectionAPI === undefined ? true : arg.selectionAPI,\n      m_zIndex;\n\n  m_rendererName = checkRenderer(m_rendererName);\n\n  if (!m_map) {\n    throw new Error('Layers must be initialized on a map.');\n  }\n\n  /**\n   * Get a list of sibling layers.  If no parent has been assigned to this\n   * layer, assume that the map will be the parent.  This gets all of the\n   * parent's children that are layer instances.\n   *\n   * @returns {geo.layer[]} A list of sibling layers.\n   */\n  function _siblingLayers() {\n    return (m_this.parent() || m_this.map()).children().filter(function (child) {\n      return child instanceof layer;\n    });\n  }\n\n  /**\n   * Get the name of the renderer.\n   *\n   * @returns {string}\n   */\n  this.rendererName = function () {\n    return m_rendererName;\n  };\n\n  /**\n   * Get or set the z-index of the layer.  The z-index controls the display\n   * order of the layers in much the same way as the CSS z-index property.\n   *\n   * @param {number} [zIndex] The new z-index, or undefined to return the\n   *    current z-index.\n   * @param {boolean} [allowDuplicate] When setting the z index, if this is\n   *    truthy, allow other layers to have the same z-index.  Otherwise,\n   *    ensure that other layers have distinct z-indices from this one.\n   * @returns {number|this}\n   */\n  this.zIndex = function (zIndex, allowDuplicate) {\n    if (zIndex === undefined) {\n      return m_zIndex;\n    }\n    if (!allowDuplicate) {\n      // if any extant layer has the same index, then we move all of those\n      // layers up.  We do this in reverse order since, if two layers above\n      // this one share a z-index, they will resolve to the layer insert order.\n      _siblingLayers().reverse().forEach(function (child) {\n        if (child !== this && child.zIndex() === zIndex) {\n          child.zIndex(zIndex + 1);\n        }\n      });\n    }\n    m_zIndex = zIndex;\n    m_node.css('z-index', m_zIndex);\n    return m_this;\n  };\n\n  /**\n   * Bring the layer above the given number of layers.  This will rotate the\n   * current z-indices for this and the next `n` layers.\n   *\n   * @param {number} [n=1] The number of positions to move.\n   * @returns {this}\n   */\n  this.moveUp = function (n) {\n    var order, i, me = null, tmp, sign;\n\n    // set the default\n    if (n === undefined) {\n      n = 1;\n    }\n\n    // set the sort direction that controls if we are moving up\n    // or down the z-index\n    sign = 1;\n    if (n < 0) {\n      sign = -1;\n      n = -n;\n    }\n\n    // get a sorted list of layers\n    order = _siblingLayers().sort(\n      function (a, b) { return sign * (a.zIndex() - b.zIndex()); }\n    );\n\n    for (i = 0; i < order.length; i += 1) {\n      if (me === null) {\n        // loop until we get to the current layer\n        if (order[i] === m_this) {\n          me = i;\n        }\n      } else if (i - me <= n) {\n        // swap the next n layers\n        tmp = m_this.zIndex();\n        m_this.zIndex(order[i].zIndex(), true);\n        order[i].zIndex(tmp, true);\n      } else {\n        // all the swaps are done now\n        break;\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Bring the layer below the given number of layers.  This will rotate the\n   * current z-indices for this and the previous `n` layers.\n   *\n   * @param {number} [n=1] The number of positions to move.\n   * @returns {this}\n   */\n  this.moveDown = function (n) {\n    if (n === undefined) {\n      n = 1;\n    }\n    return m_this.moveUp(-n);\n  };\n\n  /**\n   * Bring the layer to the top of the map layers.\n   *\n   * @returns {this}\n   */\n  this.moveToTop = function () {\n    return m_this.moveUp(_siblingLayers().length - 1);\n  };\n\n  /**\n   * Bring the layer to the bottom of the map layers.\n   *\n   * @returns {this}\n   */\n  this.moveToBottom = function () {\n    return m_this.moveDown(_siblingLayers().length - 1);\n  };\n\n  /**\n   * Get whether or not the layer is sticky (navigates with the map).\n   *\n   * @returns {boolean}\n   */\n  this.sticky = function () {\n    return m_sticky;\n  };\n\n  /**\n   * Get/Set whether or not the layer is active.  An active layer will receive\n   * native mouse when the layer is on top.  Non-active layers will never\n   * receive native mouse events.\n   *\n   * @param {boolean} [arg] If specified, the new `active` value.\n   * @returns {boolean|object}\n   */\n  this.active = function (arg) {\n    if (arg === undefined) {\n      return m_active;\n    }\n    if (m_active !== arg) {\n      m_active = arg;\n      m_node.toggleClass('active', m_active);\n    }\n    return this;\n  };\n\n  /**\n   * Get root node of the layer.\n   *\n   * @returns {div}\n   */\n  this.node = function () {\n    return m_node;\n  };\n\n  /**\n   * Get/Set id of the layer.\n   *\n   * @param {string} [val] If specified, the new id of the layer.\n   * @returns {string|this}\n   */\n  this.id = function (val) {\n    if (val === undefined) {\n      return m_id;\n    }\n    m_id = newLayerId();\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get/Set name of the layer.\n   *\n   * @param {string} [val] If specified, the new name of the layer.\n   * @returns {string|this}\n   */\n  this.name = function (val) {\n    if (val === undefined) {\n      return m_name;\n    }\n    m_name = val;\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get the map associated with this layer.\n   *\n   * @returns {geo.map} The map associated with the layer.\n   */\n  this.map = function () {\n    return m_map;\n  };\n\n  /**\n   * Get renderer for the layer.\n   *\n   * @returns {geo.renderer} The renderer associated with the layer or `null`\n   *    if there is no renderer.\n   */\n  this.renderer = function () {\n    return m_renderer;\n  };\n\n  /**\n   * Get canvas of the layer.\n   *\n   * @returns {HTMLCanvasElement} The canvas element associated with the\n   *    layer.\n   */\n  this.canvas = function () {\n    return m_canvas;\n  };\n\n  /**\n   * Return last time data got changed.\n   *\n   * @returns {geo.timestamp} The data time.\n   */\n  this.dataTime = function () {\n    return m_dataTime;\n  };\n\n  /**\n   * Return the modified time for the last update that did something.\n   *\n   * @returns {geo.timestamp} The update time.\n   */\n  this.updateTime = function () {\n    return m_updateTime;\n  };\n\n  /**\n   * Get/Set if the layer has been initialized.\n   *\n   * @param {boolean} [val] If specified, update the intialized value.\n   *    Otherwise, return it.\n   * @returns {boolean|this} Either the initialized value or this.\n   */\n  this.initialized = function (val) {\n    if (val !== undefined) {\n      m_initialized = val;\n      return m_this;\n    }\n    return m_initialized;\n  };\n\n  /**\n   * Transform coordinates from world coordinates into a local coordinate\n   * system specific to the underlying renderer.  This method is exposed\n   * to allow direct access the rendering context, but otherwise should\n   * not be called directly.  The default implementation is the identity\n   * operator.\n   *\n   * @param {geo.geoPosition} input World coordinates.\n   * @returns {geo.geoPosition} Renderer coordinates.\n   */\n  this.toLocal = function (input) {\n    if (m_this._toLocalMatrix) {\n      camera.applyTransform(m_this._toLocalMatrix, input);\n    }\n    return input;\n  };\n\n  /**\n   * Transform coordinates from a local coordinate system to world coordinates.\n   *\n   * @param {geo.geoPosition} input Renderer coordinates.\n   * @returns {geo.geoPosition} World coordinates.\n   */\n  this.fromLocal = function (input) {\n    if (m_this._fromLocalMatrix) {\n      camera.applyTransform(m_this._fromLocalMatrix, input);\n    }\n    return input;\n  };\n\n  /**\n   * Get or set the attribution html content that will displayed with the\n   * layer.  By default, nothing will be displayed.  Note, this content\n   * is **not** html escaped, so care should be taken when renderering\n   * user provided content.\n   *\n   * @param {string?} arg An html fragment\n   * @returns {string|this} Chainable as a setter\n   */\n  this.attribution = function (arg) {\n    if (arg !== undefined) {\n      m_attribution = arg;\n      m_this.map().updateAttribution();\n      return m_this;\n    }\n    return m_attribution;\n  };\n\n  /**\n   * Get/Set visibility of the layer.\n   *\n   * @param {boolean} [val] If specified, change the visibility.  Otherwise,\n   *    get it.\n   * @returns {boolean|this} either the visibility (if getting) or the layer\n   *    (if setting).\n   */\n  this.visible = function (val) {\n    if (val === undefined) {\n      return m_visible;\n    }\n    if (m_visible !== val) {\n      m_visible = val;\n      m_node.css('display', m_visible ? '' : 'none');\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set selectionAPI of the layer.\n   *\n   * @param {boolean} [val] If specified, set the selectionAPI state, otherwise\n   *    return it.\n   * @returns {boolean|this} Either the selectionAPI state or the layer.\n   */\n  this.selectionAPI = function (val) {\n    if (val === undefined) {\n      return m_selectionAPI;\n    }\n    if (m_selectionAPI !== val) {\n      m_selectionAPI = val;\n    }\n    return m_this;\n  };\n\n  /**\n   * Init layer.\n   *\n   * @param {boolean} noEvents If a subclass of this intends to bind the\n   *    resize, pan, and zoom events itself, set this flag to true to avoid\n   *    binding them here.\n   * @returns {this}\n   */\n  this._init = function (noEvents) {\n    if (m_initialized) {\n      return m_this;\n    }\n\n    m_map.node().append(m_node);\n\n    /* Pass along the arguments, but not the map reference */\n    var options = $.extend({}, arg);\n    delete options.map;\n\n    if (m_rendererName === null) {\n      // if given a \"null\" renderer, then pass the map element as the\n      // canvas\n      m_renderer = null;\n      m_canvas = m_node;\n    } else if (m_canvas) { // Share context if we have valid one\n      m_renderer = createRenderer(m_rendererName, m_this, m_canvas, options);\n    } else {\n      m_renderer = createRenderer(m_rendererName, m_this, undefined, options);\n      m_canvas = m_renderer.canvas();\n    }\n\n    m_node.toggleClass('active', m_this.active());\n\n    m_initialized = true;\n\n    if (!noEvents) {\n      // Bind events to handlers\n      m_this.geoOn(geo_event.resize, function (event) {\n        m_this._update({event: event});\n      });\n\n      m_this.geoOn(geo_event.pan, function (event) {\n        m_this._update({event: event});\n      });\n\n      m_this.geoOn(geo_event.rotate, function (event) {\n        m_this._update({event: event});\n      });\n\n      m_this.geoOn(geo_event.zoom, function (event) {\n        m_this._update({event: event});\n      });\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Clean up resources.\n   */\n  this._exit = function () {\n    m_this.geoOff();\n    if (m_renderer) {\n      m_renderer._exit();\n    }\n    m_node.off();\n    m_node.remove();\n    arg = {};\n    m_canvas = null;\n    m_renderer = null;\n    s_exit();\n  };\n\n  /**\n   * Update layer.\n   *\n   * This is a stub that should be subclasses.\n   */\n  this._update = function () {\n  };\n\n  /**\n   * Return the width of the layer in pixels.\n   *\n   * @returns {number} The width of the parent map in pixels.\n   */\n  this.width = function () {\n    return m_this.map().size().width;\n  };\n\n  /**\n   * Return the height of the layer in pixels.\n   *\n   * @returns {number} The height of the parent map in pixels.\n   */\n  this.height = function () {\n    return m_this.map().size().height;\n  };\n\n  /**\n   * Get or set the current layer opacity.  The opacity is in the range [0-1].\n   *\n   * @param {number} [opac] If specified, set the opacity.  Otherwise, return\n   *    the opacity.\n   * @returns {number|this} The current opacity or the current layer.\n   */\n  this.opacity = function (opac) {\n    if (opac !== undefined) {\n      m_opacity = opac;\n      m_node.css('opacity', m_opacity);\n      return m_this;\n    }\n    return m_opacity;\n  };\n\n  // Create top level div for the layer\n  m_node = $(document.createElement('div'));\n  m_node.addClass('geojs-layer');\n  m_node.attr('id', m_name);\n  m_this.opacity(m_opacity);\n\n  // set the z-index (this prevents duplication)\n  if (arg.zIndex === undefined) {\n    var maxZ = -1;\n    _siblingLayers().forEach(function (child) {\n      if (child.zIndex() !== undefined) {\n        maxZ = Math.max(maxZ, child.zIndex());\n      }\n    });\n    arg.zIndex = maxZ + 1;\n  }\n  m_this.zIndex(arg.zIndex);\n\n  return m_this;\n};\n\n/**\n * Gets a new id number for a layer.\n * @protected\n * @instance\n * @returns {number}\n */\nlayer.newLayerId = (function () {\n  'use strict';\n  var currentId = 1;\n  return function () {\n    var id = currentId;\n    currentId += 1;\n    return id;\n  };\n}());\n\n/**\n * General object specification for feature types.\n * @typedef geo.layer.spec\n * @type {object}\n * @property {string} [type='feature'] For feature compatibility with more than\n *    one kind of creatable layer\n * @property {object[]} [data=[]] The default data array to apply to each\n *    feature if none exists\n * @property {string} [renderer='vgl'] The renderer to use\n * @property {geo.feature.spec[]} [features=[]] Features to add to the layer.\n */\n\n/**\n * Create a layer from an object.  Any errors in the creation\n * of the layer will result in returning null.\n * @param {geo.map} map The map to add the layer to\n * @param {geo.layer.spec} spec The object specification\n * @returns {geo.layer|null}\n */\nlayer.create = function (map, spec) {\n  'use strict';\n\n  spec = spec || {};\n\n  // add osmLayer later\n  spec.type = 'feature';\n  if (spec.type !== 'feature') {\n    console.warn('Unsupported layer type');\n    return null;\n  }\n\n  spec.renderer = spec.renderer || 'vgl';\n  spec.renderer = checkRenderer(spec.renderer);\n\n  if (!spec.renderer) {\n    console.warn('Invalid renderer');\n    return null;\n  }\n\n  var layer = map.createLayer(spec.type, spec);\n  if (!layer) {\n    console.warn('Unable to create a layer');\n    return null;\n  }\n\n  // probably move this down to featureLayer eventually\n  spec.features.forEach(function (f) {\n    f.data = f.data || spec.data;\n    f.feature = feature.create(layer, f);\n  });\n\n  return layer;\n};\n\ninherit(layer, sceneObject);\nmodule.exports = layer;\n\n\n\n// WEBPACK FOOTER //\n// ./layer.js","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Object specification for a text feature.\n *\n * @typedef {geo.feature.spec} geo.textFeature.spec\n * @property {geo.geoPosition[]|function} [position] The position of each data\n *   element.  Defaults to the `x`, `y`, and `z` properties of the data\n *   element.\n * @property {string[]|function} [text] The text of each data element.\n *   Defaults to the `text` property of the data element.\n * @property {geo.textFeature.styleSpec} [style] The style to apply to each\n *   data element.\n */\n\n/**\n * Style specification for a text feature.\n *\n * @typedef {geo.feature.styleSpec} geo.textFeature.styleSpec\n * @extends geo.feature.styleSpec\n * @property {boolean|function} [visible=true] If falsy, don't show this data\n *    element.\n * @property {string|function} [font] A css font specification.  This is of the\n *    form `[style] [variant] [weight] [stretch] size[/line-height] family`.\n *    Individual font styles override this value if a style is specified in\n *    each.  See the individual font styles for details.\n * @property {string|function} [fontStyle='normal'] The font style.  One of\n *    `normal`, `italic`, or `oblique`.\n * @property {string|function} [fontVariant='normal'] The font variant.  This\n *    can have values such as `small-caps` or `slashed-zero`.\n * @property {string|function} [fontWeight='normal'] The font weight.  This may\n *    be a numeric value where 400 is normal and 700 is bold, or a string such\n *    as `bold` or `lighter`.\n * @property {string|function} [fontStretch='normal'] The font stretch, such as\n *    `condensed`.\n * @property {string|function} [fontSize='medium'] The font size.\n * @property {string|function} [lineHeight='normal'] The font line height.\n * @property {string|function} [fontFamily] The font family.\n * @property {string|function} [textAlign='center'] The horizontal text\n *    alignment.  One of `start`, `end`, `left`, `right`, or `center`.\n * @property {string|function} [textBaseline='middle'] The vertical text\n *    alignment.  One of `top`, `hanging`, `middle`, `alphabetic`,\n *    `ideographic`, or `bottom`.\n * @property {geo.geoColor|function} [color='black'] Text color.  May include\n *    opacity.\n * @property {number|function} [textOpacity=1] The opacity of the text.  If the\n *    color includes opacity, this is combined with that value.\n * @property {number|function} [rotation=0] Text rotation in radians.\n * @property {boolean|function} [rotateWithMap=false] If truthy, rotate the\n *    text when the map rotates.  Otherwise, the text is always in the same\n *    orientation.\n * @property {number|function} [textScaled] If defined, the text is scaled when\n *    the map zoomes and this is the basis zoom for the fontSize.\n * @property {geo.screenPosition|function} [offset] Offset from the default\n *    position for the text.  This is applied before rotation.\n * @property {geo.geoColor|function} [shadowColor='black'] Text shadow color.\n *    May include opacity.\n * @property {geo.screenPosition|function} [shadowOffset] Offset for a text\n *    shadow.  This is applied before rotation.\n * @property {number|null|function} [shadowBlur] If not null, add a text shadow\n *    with this much blur.\n * @property {boolean|function} [shadowRotate=false] If truthy, rotate the\n *    shadow offset based on the text rotation (the `shadowOffset` is the\n *    offset if the text has a 0 rotation).\n * @property {geo.geoColor|function} [textStrokeColor='transparent'] Text\n *    stroke color.  May include opacity.\n * @property {geo.geoColor|function} [textStrokeWidth=0] Text stroke width in\n *    pixels.\n * @property {number|function} [renderThreshold] If this is a positive number,\n *    text elements may not be rendered if their base position (before offset\n *    and font effects are applied) is more than this distance in pixels\n *    outside of the current viewport.  If it is known that such text elements\n *    cannot affect the current viewport, setting this can speed up rendering.\n *    This is computed once for the whole feature.\n */\n\n/**\n * Create a new instance of class textFeature.\n *\n * @class\n * @alias geo.textFeature\n * @extends geo.feature\n *\n * @param {geo.textFeature.spec} [arg] Options for the feature.\n * @returns {geo.textFeature} The created feature.\n */\nvar textFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof textFeature)) {\n    return new textFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var $ = require('jquery');\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init;\n\n  this.featureType = 'text';\n\n  /**\n   * Get/Set position.\n   *\n   * @param {array|function} [val] If `undefined`, return the current position\n   *    setting.  Otherwise, modify the current position setting.\n   * @returns {array|function|this} The current position or this feature.\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else if (val !== m_this.style('position')) {\n      m_this.style('position', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set text.\n   *\n   * @param {array|function} [val] If `undefined`, return the current text\n   *    setting.  Otherwise, modify the current text setting.\n   * @returns {array|function|this} The current text or this feature.\n   */\n  this.text = function (val) {\n    if (val === undefined) {\n      return m_this.style('text');\n    } else if (val !== m_this.style('text')) {\n      m_this.style('text', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.textFeature.spec} [arg] The feature specification.\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var style = $.extend(\n      {},\n      {\n        font: 'bold 16px sans-serif',\n        textAlign: 'center',\n        textBaseline: 'middle',\n        color: { r: 0, g: 0, b: 0 },\n        rotation: 0,  /* in radians */\n        rotateWithMap: false,\n        textScaled: false,\n        position: function (d) { return d; },\n        text: function (d) { return d.text; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.position !== undefined) {\n      style.position = arg.position;\n    }\n    if (arg.text !== undefined) {\n      style.text = arg.text;\n    }\n\n    m_this.style(style);\n    if (style.position) {\n      m_this.position(style.position);\n    }\n    if (style.text) {\n      m_this.text(style.text);\n    }\n    m_this.dataTime().modified();\n  };\n\n  this._init(arg);\n  return m_this;\n};\n\ntextFeature.usedStyles = [\n  'visible', 'font', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch',\n  'fontSize', 'lineHeight', 'fontFamily', 'textAlign', 'textBaseline', 'color',\n  'textOpacity', 'rotation', 'rotateWithMap', 'textScaled', 'offset',\n  'shadowColor', 'shadowOffset', 'shadowBlur', 'shadowRotate',\n  'textStrokeColor', 'textStrokeWidth'\n];\n\n/**\n * Create a textFeature from an object.\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to\n * @param {geo.textFeature.spec} spec The object specification\n * @returns {geo.textFeature|null}\n */\ntextFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'text';\n  return feature.create(layer, spec);\n};\n\ntextFeature.capabilities = {\n  /* core feature name -- support in any manner */\n  feature: 'text'\n};\n\ninherit(textFeature, feature);\nmodule.exports = textFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./textFeature.js","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_shared.js\n// module id = 75\n// module chunks = 0 1","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-includes.js\n// module id = 76\n// module chunks = 0 1","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-gops.js\n// module id = 77\n// module chunks = 0 1","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_is-array.js\n// module id = 78\n// module chunks = 0 1","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_is-regexp.js\n// module id = 79\n// module chunks = 0 1","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iter-detect.js\n// module id = 80\n// module chunks = 0 1","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_flags.js\n// module id = 81\n// module chunks = 0 1","'use strict';\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar wks = require('./_wks');\n\nmodule.exports = function (KEY, length, exec) {\n  var SYMBOL = wks(KEY);\n  var fns = exec(defined, SYMBOL, ''[KEY]);\n  var strfn = fns[0];\n  var rxfn = fns[1];\n  if (fails(function () {\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  })) {\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return rxfn.call(string, this); }\n    );\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_fix-re-wks.js\n// module id = 82\n// module chunks = 0 1","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_species-constructor.js\n// module id = 83\n// module chunks = 0 1","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_user-agent.js\n// module id = 84\n// module chunks = 0 1","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar redefineAll = require('./_redefine-all');\nvar meta = require('./_meta');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar $iterDetect = require('./_iter-detect');\nvar setToStringTag = require('./_set-to-string-tag');\nvar inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  var fixMethod = function (KEY) {\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function (a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a) {\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance = new C();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new C();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n    if (!ACCEPT_ITERABLES) {\n      C = wrapper(function (target, iterable) {\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base(), target, C);\n        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if (IS_WEAK && proto.clear) delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_collection.js\n// module id = 85\n// module chunks = 0 1","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_typed.js\n// module id = 86\n// module chunks = 0 1","'use strict';\n// Forced replacement prototype accessors methods\nmodule.exports = require('./_library') || !require('./_fails')(function () {\n  var K = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call\n  __defineSetter__.call(null, K, function () { /* empty */ });\n  delete require('./_global')[K];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-forced-pam.js\n// module id = 87\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_set-collection-of.js\n// module id = 88\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_set-collection-from.js\n// module id = 89\n// module chunks = 0 1","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/match.js\n// module id = 90\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/tsfnz.js\n// module id = 91\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/phi2z.js\n// module id = 92\n// module chunks = 0 1","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/mlfn.js\n// module id = 93\n// module chunks = 0 1","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/e0fn.js\n// module id = 94\n// module chunks = 0 1","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/e1fn.js\n// module id = 95\n// module chunks = 0 1","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/e2fn.js\n// module id = 96\n// module chunks = 0 1","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/e3fn.js\n// module id = 97\n// module chunks = 0 1","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Object specification for a point feature.\n *\n * @typedef {geo.feature.spec} geo.pointFeature.spec\n * @property {geo.geoPosition|function} [position] Position of the data.\n *   Default is (data).\n * @property {geo.pointFeature.styleSpec} [style] Style object with default\n *   style options.\n * @property {boolean|geo.pointFeature.clusteringSpec} [clustering=false]\n *   Enable point clustering.\n * @property {string} [primitiveShape='sprite'] For the gl renderer, select the\n *   primitive shape.  This is one of `'triangle'`, `'square'`, or `'sprite'`.\n *   `sprite` uses the least memory, `triangle` is fastest if the vertex shader\n *   is the bottleneck, and `square` is fastest if the fragment shader is the\n *   bottleneck.  `sprite` may not work for very large points.\n * @property {boolean} [dynamicDraw=false] For the gl renderer, if this is\n *   truthy, webgl source buffers can be modifies and updated directly.\n */\n\n/**\n * Style specification for a point feature.\n *\n * @typedef {geo.feature.styleSpec} geo.pointFeature.styleSpec\n * @extends geo.feature.styleSpec\n * @property {number|function} [radius=5] Radius of each point in pixels.  This\n *   is the fill radius inside of the stroke.\n * @property {boolean|function} [stroke=true] True to stroke point.\n * @property {geo.geoColor|function} [strokeColor] Color to stroke each point.\n * @property {number|function} [strokeOpacity=1] Opacity for each point's\n *   stroke.  Opacity is on a [0-1] scale.\n * @property {number|function} [strokeWidth=1.25] The weight of the point's\n *   stroke in pixels.\n * @property {boolean|function} [fill=true] True to fill point.\n * @property {geo.geoColor|function} [fillColor] Color to fill each point.\n * @property {number|function} [fillOpacity=1] Opacity for each point.  Opacity\n *   is on a [0-1] scale.\n */\n\n/**\n * Point clustering specification.\n *\n * @typedef {object} geo.pointFeature.clusteringSpec\n * @property {number} [radius=0.05] This is combined with the `width` and\n *   `height` to determine how close points need to be to each other to be\n *   clustered.\n * @property {number} [maxZoom=18] Never cluster above this zoom level.\n * @property {number} [width=256]\n * @property {number} [height=256]\n */\n\n/**\n * Create a new instance of class pointFeature.\n *\n * @class\n * @alias geo.pointFeature\n * @extends geo.feature\n * @param {geo.pointFeature.spec} arg\n * @returns {geo.pointFeature}\n */\nvar pointFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof pointFeature)) {\n    return new pointFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var $ = require('jquery');\n  var timestamp = require('./timestamp');\n  var ClusterGroup = require('./util/clustering');\n  var geo_event = require('./event');\n  var util = require('./util');\n  var kdbush = require('kdbush');\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      m_rangeTree = null,\n      m_rangeTreeTime = timestamp(),\n      s_data = this.data,\n      m_maxRadius = 0,\n      m_clustering = arg.clustering,\n      m_clusterTree = null,\n      m_allData = [],\n      m_lastZoom = null,\n      m_ignoreData = false; // flag to ignore data() calls made locally\n\n  this.featureType = 'point';\n\n  /**\n   * Get/Set clustering option.\n   *\n   * @param {boolean|geo.pointFeature.clusteringSpec} [val] If not specified,\n   *   return the current value.  If specified and falsy, turn off clustering.\n   *   If `true`, use a default clustering with `radius` set to `0.01`.\n   *   Otherwise, turn on clustering with these options.\n   * @returns {geo.pointFeature.clusteringSpec|boolean|this}\n   */\n  this.clustering = function (val) {\n    if (val === undefined) {\n      return m_clustering;\n    }\n    if (m_clustering && !val) {\n      // Throw out the cluster tree and reset the data\n      m_clusterTree = null;\n      m_clustering = false;\n      s_data(m_allData);\n    } else if (val && m_clustering !== val) {\n      // Generate the cluster tree\n      m_clustering = val;\n      m_this._clusterData();\n    }\n    return m_this;\n  };\n\n  /**\n   * Generate the clustering tree from positions.  This might be async in the\n   * future.\n   */\n  this._clusterData = function () {\n    if (!m_clustering) {\n      // clustering is not enabled, so this is a no-op\n      return;\n    }\n\n    // set clustering options to default if an options argument wasn't supplied\n    var opts = m_clustering === true ? {radius: 0.01} : m_clustering;\n\n    // generate the cluster tree from the raw data\n    var position = m_this.position();\n    m_clusterTree = new ClusterGroup(\n      opts, m_this.layer().width(), m_this.layer().height());\n\n    m_allData.forEach(function (d, i) {\n\n      // for each point in the data set normalize the coordinate\n      // representation and add the point to the cluster treee\n      var pt = util.normalizeCoordinates(position(d, i));\n      pt.index = i;\n      m_clusterTree.addPoint(pt);\n    });\n\n    // reset the last zoom state and trigger a redraw at the current zoom level\n    m_lastZoom = null;\n    m_this._handleZoom(m_this.layer().map().zoom());\n  };\n\n  /**\n   * Handle zoom events for clustering.  This keeps track of the last\n   * clustering level, and only regenerates the displayed points when the\n   * zoom level changes.\n   *\n   * @param {number} zoom The new zoom level.\n   */\n  this._handleZoom = function (zoom) {\n    // get the current zoom level rounded down\n    var z = Math.floor(zoom);\n\n    if (!m_clustering || z === m_lastZoom) {\n      // short cut when there is nothing to do\n      return;\n    }\n\n    // store the current zoom level privately\n    m_lastZoom = z;\n\n    // get the raw data elements for the points at the current level\n    var data = m_clusterTree.points(z).map(function (d) {\n      return m_allData[d.index];\n    });\n\n    // append the clusters at the current level\n    m_clusterTree.clusters(z).forEach(function (d) {\n      // mark the datum as a cluster for accessor methods\n      d.__cluster = true;\n\n      // store all of the data objects for each point in the cluster as __data\n      d.__data = [];\n      d.obj.each(function (e) {\n        d.__data.push(m_allData[e.index]);\n      });\n      data.push(d);\n    });\n\n    // prevent recomputing the clustering and set the new data array\n    m_ignoreData = true;\n    m_this.data(data);\n  };\n\n  /**\n   * Get/Set position.\n   *\n   * @param {function|geo.geoPosition} [val] If not specified, return the\n   *    position accessor, which is guaranteed to be a function.  If specified,\n   *    wrap the value in an function that handles clustering if it is enabled\n   *    and set the position accessor to that function.\n   * @returns {this|function}\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else {\n      var isFunc = util.isFunction(val);\n      m_this.style('position', function (d, i) {\n        if (d !== null && d !== undefined && d.__cluster) {\n          return d;\n        } else if (isFunc) {\n          return val(d, i);\n        } else {\n          return val;\n        }\n      });\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Update the current range tree object.  Should be called whenever the\n   * data changes.\n   */\n  this._updateRangeTree = function () {\n    if (m_rangeTreeTime.timestamp() >= m_this.dataTime().timestamp()) {\n      return;\n    }\n    var pts, position,\n        radius = m_this.style.get('radius'),\n        stroke = m_this.style.get('stroke'),\n        strokeWidth = m_this.style.get('strokeWidth');\n\n    position = m_this.position();\n\n    m_maxRadius = 0;\n\n    // create an array of positions in geo coordinates\n    pts = m_this.data().map(function (d, i) {\n      var pt = position(d, i);\n\n      // store the maximum point radius\n      m_maxRadius = Math.max(\n        m_maxRadius,\n        radius(d, i) + (stroke(d, i) ? strokeWidth(d, i) : 0)\n      );\n\n      return [pt.x, pt.y];\n    });\n\n    m_rangeTree = kdbush(pts);\n    m_rangeTreeTime.modified();\n  };\n\n  /**\n   * Returns an array of datum indices that contain the given point.\n   * Largely adapted from wigglemaps pointQuerier:\n   * https://github.com/dotskapes/wigglemaps/blob/cf5bed3fbfe2c3e48d31799462a80c564be1fb60/src/query/PointQuerier.js\n   * This does not take into account clustering.\n   *\n   * @param {geo.geoPosition} p point to search for in map interface gcs.\n   * @returns {object} An object with `index`: a list of point indices, and\n   *    `found`: a list of points that contain the specified coordinate.\n   */\n  this.pointSearch = function (p) {\n    var min, max, data, idx = [], found = [], ifound = [], map, pt,\n        fgcs = m_this.gcs(), // this feature's gcs\n        corners,\n        stroke = m_this.style.get('stroke'),\n        strokeWidth = m_this.style.get('strokeWidth'),\n        radius = m_this.style.get('radius');\n\n    data = m_this.data();\n    if (!data || !data.length) {\n      return {\n        found: [],\n        index: []\n      };\n    }\n\n    // We need to do this before we find corners, since the max radius is\n    // determined then\n    m_this._updateRangeTree();\n\n    map = m_this.layer().map();\n    pt = map.gcsToDisplay(p);\n    // check all corners to make sure we handle rotations\n    corners = [\n      map.displayToGcs({x: pt.x - m_maxRadius, y: pt.y - m_maxRadius}, fgcs),\n      map.displayToGcs({x: pt.x + m_maxRadius, y: pt.y - m_maxRadius}, fgcs),\n      map.displayToGcs({x: pt.x - m_maxRadius, y: pt.y + m_maxRadius}, fgcs),\n      map.displayToGcs({x: pt.x + m_maxRadius, y: pt.y + m_maxRadius}, fgcs)\n    ];\n    min = {\n      x: Math.min(corners[0].x, corners[1].x, corners[2].x, corners[3].x),\n      y: Math.min(corners[0].y, corners[1].y, corners[2].y, corners[3].y)\n    };\n    max = {\n      x: Math.max(corners[0].x, corners[1].x, corners[2].x, corners[3].x),\n      y: Math.max(corners[0].y, corners[1].y, corners[2].y, corners[3].y)\n    };\n\n    // Find points inside the bounding box\n    idx = m_rangeTree.range(min.x, min.y, max.x, max.y);\n\n    // Filter by circular region\n    idx.forEach(function (i) {\n      var d = data[i],\n          p = m_this.position()(d, i),\n          dx, dy, rad, rad2;\n\n      rad = radius(data[i], i);\n      rad += stroke(data[i], i) ? strokeWidth(data[i], i) : 0;\n      if (rad) {\n        rad2 = rad * rad;\n        p = map.gcsToDisplay(p, fgcs);\n        dx = p.x - pt.x;\n        dy = p.y - pt.y;\n        if (dx * dx + dy * dy <= rad2) {\n          found.push(d);\n          ifound.push(i);\n        }\n      }\n    });\n\n    return {\n      found: found,\n      index: ifound\n    };\n  };\n\n  /**\n   * Returns an array of datum indices that are contained in the given box.\n   * This does not take clustering into account.\n   *\n   * @param {geo.geoPosition} lowerLeft Lower-left corner in gcs coordinates.\n   * @param {geo.geoPosition} upperRight Upper-right corner in gcs coordinates.\n   * @returns {number[]} A list of point indices that are in the box region.\n   */\n  this.boxSearch = function (lowerLeft, upperRight) {\n    var pos = m_this.position(),\n        idx = [];\n    // TODO: use the range tree\n    m_this.data().forEach(function (d, i) {\n      var p = pos(d, i);\n      if (p.x >= lowerLeft.x &&\n          p.x <= upperRight.x &&\n          p.y >= lowerLeft.y &&\n          p.y <= upperRight.y\n      ) {\n        idx.push(i);\n      }\n    });\n    return idx;\n  };\n\n  /**\n   * Overloaded data method that updates the internal range tree on write.\n   * Get/Set the data array for the feature.\n   *\n   * @param {array} [data] A new data array or `undefined` to return the\n   *    existing array.\n   * @returns {array|this}\n   */\n  this.data = function (data) {\n    if (data === undefined) {\n      return s_data();\n    }\n    if (!m_ignoreData) {\n      m_allData = data;\n    }\n    if (m_clustering && !m_ignoreData) {\n      m_this._clusterData();\n    } else {\n      s_data(data);\n    }\n    m_ignoreData = false;\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.pointFeature.spec} arg The feature specification.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        radius: 5.0,\n        stroke: true,\n        strokeColor: { r: 0.851, g: 0.604, b: 0.0 },\n        strokeWidth: 1.25,\n        strokeOpacity: 1.0,\n        fillColor: { r: 1.0, g: 0.839, b: 0.439 },\n        fill: true,\n        fillOpacity: 0.8,\n        position: function (d) { return d; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.position !== undefined) {\n      defaultStyle.position = arg.position;\n    }\n\n    m_this.style(defaultStyle);\n    if (defaultStyle.position) {\n      m_this.position(defaultStyle.position);\n    }\n    m_this.dataTime().modified();\n\n    // bind to the zoom handler for point clustering\n    m_this.geoOn(geo_event.zoom, function (evt) {\n      m_this._handleZoom(evt.zoomLevel);\n    });\n    return m_this;\n  };\n\n  return m_this;\n};\n\n/**\n * Create a pointFeature from an object.\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to\n * @param {geo.pointFeature.spec} spec The object specification\n * @returns {geo.pointFeature|null}\n */\npointFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'point';\n  return feature.create(layer, spec);\n};\n\npointFeature.capabilities = {\n  /* core feature name -- support in any manner */\n  feature: 'point'\n};\n\ninherit(pointFeature, feature);\nmodule.exports = pointFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./pointFeature.js","var inherit = require('./inherit');\nvar layer = require('./layer');\nvar geo_event = require('./event');\nvar registry = require('./registry');\n\n/**\n * Layer to draw points, lines, and polygons on the map The polydata layer\n * provide mechanisms to create and draw geometrical shapes such as points,\n * lines, and polygons.\n * @class\n * @alias geo.featureLayer\n * @extends geo.layer\n * @param {object} arg Options for the new layer.\n * @returns {geo.featureLayer}\n */\nvar featureLayer = function (arg) {\n  'use strict';\n  if (!(this instanceof featureLayer)) {\n    return new featureLayer(arg);\n  }\n  layer.call(this, arg);\n\n  /**\n   * private\n   */\n  var m_this = this,\n      m_features = [],\n      s_init = this._init,\n      s_exit = this._exit,\n      s_update = this._update,\n      s_visible = this.visible,\n      s_selectionAPI = this.selectionAPI,\n      s_draw = this.draw;\n\n  /**\n   * Create a feature by name.\n   *\n   * @param {string} featureName The name of the feature to create.\n   * @param {object} arg Properties for the new feature.\n   * @returns {geo.feature} The created feature.\n   */\n  this.createFeature = function (featureName, arg) {\n\n    var newFeature = registry.createFeature(\n      featureName, m_this, m_this.renderer(), arg);\n    if (newFeature) {\n      this.addFeature(newFeature);\n    } else {\n      console.warn('Layer renderer (' + m_this.rendererName() + ') does not support feature type \"' + featureName + '\"');\n    }\n    return newFeature;\n  };\n\n  /**\n   * Add a feature to the layer if it is not already present.\n   *\n   * @param {object} feature the feature to add.\n   * @returns {this}\n   */\n  this.addFeature = function (feature) {\n    /* try to remove the feature first so that we don't have two copies */\n    this.removeFeature(feature);\n    m_this.addChild(feature);\n    m_features.push(feature);\n    m_this.dataTime().modified();\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Remove a feature without destroying it.\n   *\n   * @param {geo.feature} feature The feature to remove.\n   * @returns {this}\n   */\n  this.removeFeature = function (feature) {\n    var pos;\n\n    pos = m_features.indexOf(feature);\n    if (pos >= 0) {\n      m_features.splice(pos, 1);\n      m_this.removeChild(feature);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Delete feature.\n   *\n   * @param {geo.feature} feature The feature to delete.\n   * @returns {this}\n   */\n  this.deleteFeature = function (feature) {\n\n    // call _exit first, as destroying the feature affect other features\n    if (feature) {\n      if (m_features.indexOf(feature) >= 0) {\n        feature._exit();\n      }\n      this.removeFeature(feature);\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Get/Set drawables.\n   *\n   * @param {geo.feature[]} val A list of features, or unspecified to return\n   *    the current feature list.  If a list is provided, features are added or\n   *    removed as needed.\n   * @returns {geo.feature[]|this} The current features associated with the\n   *    layer or the current layer.\n   */\n  this.features = function (val) {\n    if (val === undefined) {\n      return m_features.slice();\n    } else {\n      // delete existing features that aren't in the new array.  Since features\n      // can affect other features during their exit process, make sure each\n      // feature still exists as we work through the list.\n      var existing = m_features.slice();\n      var i;\n      for (i = 0; i < existing.length; i += 1) {\n        if (val.indexOf(existing[i]) < 0 && m_features.indexOf(existing[i]) >= 0) {\n          this.deleteFeature(existing[i]);\n        }\n      }\n      for (i = 0; i < val.length; i += 1) {\n        this.addFeature(val[i]);\n      }\n      return m_this;\n    }\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    if (m_this.initialized()) {\n      return m_this;\n    }\n\n    // Call super class init\n    s_init.call(m_this, true);\n\n    // Bind events to handlers\n    m_this.geoOn(geo_event.resize, function (event) {\n      if (m_this.renderer()) {\n        m_this.renderer()._resize(event.x, event.y, event.width, event.height);\n        m_this._update({event: event});\n        m_this.renderer()._render();\n      } else {\n        m_this._update({event: event});\n      }\n    });\n\n    m_this.geoOn(geo_event.pan, function (event) {\n      m_this._update({event: event});\n      if (m_this.renderer()) {\n        m_this.renderer()._render();\n      }\n    });\n\n    m_this.geoOn(geo_event.rotate, function (event) {\n      m_this._update({event: event});\n      if (m_this.renderer()) {\n        m_this.renderer()._render();\n      }\n    });\n\n    m_this.geoOn(geo_event.zoom, function (event) {\n      m_this._update({event: event});\n      if (m_this.renderer()) {\n        m_this.renderer()._render();\n      }\n    });\n\n    return m_this;\n  };\n\n  /**\n   * Update layer.\n   *\n   * @param {object} request A value to pass to the parent class.\n   * @returns {this}\n   */\n  this._update = function (request) {\n    var i;\n\n    if (!m_features.length) {\n      return m_this;\n    }\n\n    // Call base class update\n    s_update.call(m_this, request);\n\n    if (m_this.dataTime().timestamp() > m_this.updateTime().timestamp()) {\n      for (i = 0; i < m_features.length; i += 1) {\n        m_features[i].renderer(m_this.renderer());\n      }\n    }\n\n    for (i = 0; i < m_features.length; i += 1) {\n      m_features[i]._update();\n    }\n\n    m_this.updateTime().modified();\n\n    return m_this;\n  };\n\n  /**\n   * Free all resources.\n   */\n  this._exit = function () {\n    m_this.clear();\n    s_exit();\n  };\n\n  /**\n   * Draw.  If the layer is visible, call the parent class's draw function and\n   * the renderer's render function.\n   *\n   * @returns {this}\n   */\n  this.draw = function () {\n    if (m_this.visible()) {\n      // Call sceneObject.draw, which calls draw on all child objects.\n      s_draw();\n\n      // Now call render on the renderer. In certain cases it may not do\n      // anything if the child objects are drawn on the screen already.\n      if (m_this.renderer()) {\n        m_this.renderer()._render();\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set visibility of the layer.\n   *\n   * @param {boolean} [val] If specified, change the visibility, otherwise\n   *    return it.\n   * @returns {boolean|this} The current visibility or the layer.\n   */\n  this.visible = function (val) {\n    if (val === undefined) {\n      return s_visible();\n    }\n    if (m_this.visible() !== val) {\n      s_visible(val);\n\n      // take a copy of the features; changing visible could mutate them.\n      var features = m_features.slice(), i;\n\n      for (i = 0; i < features.length; i += 1) {\n        features[i].visible(features[i].visible(undefined, true), true);\n      }\n      if (val) {\n        m_this.draw();\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set selectionAPI of the layer.\n   *\n   * @param {boolean} [val] If specified change the selectionAPI state of the\n   *    layer, otherwise return the current state.\n   * @returns {boolean|this} The selectionAPI state or the current layer.\n   */\n  this.selectionAPI = function (val) {\n    if (val === undefined) {\n      return s_selectionAPI();\n    }\n    if (m_this.selectionAPI() !== val) {\n      s_selectionAPI(val);\n\n      // take a copy of the features; changing selectionAPI could mutate them.\n      var features = m_features.slice(), i;\n\n      for (i = 0; i < features.length; i += 1) {\n        features[i].selectionAPI(features[i].selectionAPI(undefined, true), true);\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Clear all features in layer.\n   *\n   * @returns {this}\n   */\n  this.clear = function () {\n    while (m_features.length) {\n      m_this.deleteFeature(m_features[0]);\n    }\n    return m_this;\n  };\n\n  return m_this;\n};\n\ninherit(featureLayer, layer);\nregistry.registerLayer('feature', featureLayer);\nmodule.exports = featureLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./featureLayer.js","var widget = require('./widget');\nvar inherit = require('../inherit');\nvar registerWidget = require('../registry').registerWidget;\n\n/**\n * Create a new instance of class geo.gui.svgWidget.\n *\n * Due to the nature of d3 creating DOM elements as it inserts them, calls to\n * appendChild don't appear in this widget.\n *\n * The canvas of an svgWidget always refers to the actual svg element.\n * The parentCanvas can refer to another widget's svg element, dom element, or\n * the UI layer's dom element.\n * See {@link geo.gui.widget#parentCanvas}.\n *\n * @class\n * @alias geo.gui.svgWidget\n * @extends geo.gui.widget\n * @param {object} arg\n * @param {geo.widget} [parent] A parent widget for this widget.\n * @returns {geo.gui.svgWidget}\n */\nvar svgWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof svgWidget)) {\n    return new svgWidget(arg);\n  }\n\n  widget.call(this, arg);\n\n  var d3Renderer = require('../d3/d3Renderer');\n\n  var m_this = this,\n      s_exit = this._exit,\n      m_renderer = null;\n\n  /**\n   * Initializes SVG Widget.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    var d3Parent;\n    if (arg.hasOwnProperty('parent')) {\n      arg.parent.addChild(m_this);\n\n      // Tell the renderer there is an SVG element as a parent\n      d3Parent = arg.parent.canvas();\n    }\n\n    m_this._createCanvas(d3Parent);\n\n    m_this.canvas().addEventListener('mousedown', function (e) {\n      e.stopPropagation();\n    });\n\n    m_this.reposition();\n    return m_this;\n  };\n\n  /**\n   * Clean up the widget.\n   */\n  this._exit = function () {\n    if (m_renderer) {\n      m_renderer._exit();\n    }\n    s_exit();\n  };\n\n  /**\n   * Creates the canvas for the svg widget.\n   * This directly uses the {@link geo.d3.d3Renderer} as a helper to do all of\n   * the heavy lifting.\n   *\n   * @param {d3Selector} d3Parent The canvas's parent element.\n   */\n  this._createCanvas = function (d3Parent) {\n    var rendererOpts = {\n      layer: m_this.layer(),\n      widget: true\n    };\n\n    if (d3Parent) {\n      rendererOpts.d3Parent = d3Parent;\n    }\n\n    m_renderer = d3Renderer(rendererOpts);\n\n    // svg widgets manage their own sizes, so make the resize handler a no-op\n    m_renderer._resize = function () {};\n\n    m_this.canvas(m_renderer.canvas()[0][0]);\n  };\n\n  return this;\n};\n\ninherit(svgWidget, widget);\n\nregisterWidget('dom', 'svg', svgWidget);\nmodule.exports = svgWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/svgWidget.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/webpack/buildin/global.js\n// module id = 101\n// module chunks = 0 1","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_dom-create.js\n// module id = 102\n// module chunks = 0 1","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_wks-define.js\n// module id = 103\n// module chunks = 0 1","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_shared-key.js\n// module id = 104\n// module chunks = 0 1","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_enum-bug-keys.js\n// module id = 105\n// module chunks = 0 1","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_html.js\n// module id = 106\n// module chunks = 0 1","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_set-proto.js\n// module id = 107\n// module chunks = 0 1","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-ws.js\n// module id = 108\n// module chunks = 0 1","var isObject = require('./_is-object');\nvar setPrototypeOf = require('./_set-proto').set;\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_inherit-if-required.js\n// module id = 109\n// module chunks = 0 1","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-repeat.js\n// module id = 110\n// module chunks = 0 1","// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_math-sign.js\n// module id = 111\n// module chunks = 0 1","// 20.2.2.14 Math.expm1(x)\nvar $expm1 = Math.expm1;\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x) {\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;\n} : $expm1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_math-expm1.js\n// module id = 112\n// module chunks = 0 1","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-at.js\n// module id = 113\n// module chunks = 0 1","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iter-define.js\n// module id = 114\n// module chunks = 0 1","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iter-create.js\n// module id = 115\n// module chunks = 0 1","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-context.js\n// module id = 116\n// module chunks = 0 1","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_fails-is-regexp.js\n// module id = 117\n// module chunks = 0 1","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_is-array-iter.js\n// module id = 118\n// module chunks = 0 1","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_create-property.js\n// module id = 119\n// module chunks = 0 1","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/core.get-iterator-method.js\n// module id = 120\n// module chunks = 0 1","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-species-create.js\n// module id = 121\n// module chunks = 0 1","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-fill.js\n// module id = 122\n// module chunks = 0 1","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.iterator.js\n// module id = 123\n// module chunks = 0 1","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_task.js\n// module id = 124\n// module chunks = 0 1","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_microtask.js\n// module id = 125\n// module chunks = 0 1","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_new-promise-capability.js\n// module id = 126\n// module chunks = 0 1","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_typed-buffer.js\n// module id = 127\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader/lib/css-base.js\n// module id = 128\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/addStyles.js\n// module id = 129\n// module chunks = 0 1","/**\n * Common object containing all action types that are provided by the GeoJS\n * API.\n *\n * @namespace\n * @alias geo.action\n * @enum {string}\n */\nvar geo_action = {\n  momentum: 'geo_action_momentum',\n  pan: 'geo_action_pan',\n  rotate: 'geo_action_rotate',\n  select: 'geo_action_select',\n  unzoomselect: 'geo_action_unzoomselect',\n  zoom: 'geo_action_zoom',\n  zoomrotate: 'geo_action_zoom_rotate',\n  zoomselect: 'geo_action_zoomselect',\n\n  // annotation actions\n  annotation_line: 'geo_annotation_line',\n  annotation_polygon: 'geo_annotation_polygon',\n  annotation_rectangle: 'geo_annotation_rectangle',\n  annotation_edit_handle: 'geo_annotation_edit_handle'\n};\n\nmodule.exports = geo_action;\n\n\n\n// WEBPACK FOOTER //\n// ./action.js","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calulated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/Proj.js\n// module id = 131\n// module chunks = 0 1","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/pj_mlfn.js\n// module id = 132\n// module chunks = 0 1","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (this.es === undefined || this.es <= 0) {\n    throw new Error('incorrect elliptical usage');\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/etmerc.js\n// module id = 133\n// module chunks = 0 1","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/sinh.js\n// module id = 134\n// module chunks = 0 1","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/gN.js\n// module id = 135\n// module chunks = 0 1","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/imlfn.js\n// module id = 136\n// module chunks = 0 1","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/qsfnz.js\n// module id = 137\n// module chunks = 0 1","module.exports = {\n  create: require('./create')\n  , clone: require('./clone')\n  , copy: require('./copy')\n  , identity: require('./identity')\n  , transpose: require('./transpose')\n  , invert: require('./invert')\n  , adjoint: require('./adjoint')\n  , determinant: require('./determinant')\n  , multiply: require('./multiply')\n  , translate: require('./translate')\n  , scale: require('./scale')\n  , rotate: require('./rotate')\n  , rotateX: require('./rotateX')\n  , rotateY: require('./rotateY')\n  , rotateZ: require('./rotateZ')\n  , fromRotation: require('./fromRotation')\n  , fromRotationTranslation: require('./fromRotationTranslation')\n  , fromScaling: require('./fromScaling')\n  , fromTranslation: require('./fromTranslation')\n  , fromXRotation: require('./fromXRotation')\n  , fromYRotation: require('./fromYRotation')\n  , fromZRotation: require('./fromZRotation')\n  , fromQuat: require('./fromQuat')\n  , frustum: require('./frustum')\n  , perspective: require('./perspective')\n  , perspectiveFromFieldOfView: require('./perspectiveFromFieldOfView')\n  , ortho: require('./ortho')\n  , lookAt: require('./lookAt')\n  , str: require('./str')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/index.js\n// module id = 138\n// module chunks = 0 1","module.exports = {\n  EPSILON: require('./epsilon')\n  , create: require('./create')\n  , clone: require('./clone')\n  , angle: require('./angle')\n  , fromValues: require('./fromValues')\n  , copy: require('./copy')\n  , set: require('./set')\n  , equals: require('./equals')\n  , exactEquals: require('./exactEquals')\n  , add: require('./add')\n  , subtract: require('./subtract')\n  , sub: require('./sub')\n  , multiply: require('./multiply')\n  , mul: require('./mul')\n  , divide: require('./divide')\n  , div: require('./div')\n  , min: require('./min')\n  , max: require('./max')\n  , floor: require('./floor')\n  , ceil: require('./ceil')\n  , round: require('./round')\n  , scale: require('./scale')\n  , scaleAndAdd: require('./scaleAndAdd')\n  , distance: require('./distance')\n  , dist: require('./dist')\n  , squaredDistance: require('./squaredDistance')\n  , sqrDist: require('./sqrDist')\n  , length: require('./length')\n  , len: require('./len')\n  , squaredLength: require('./squaredLength')\n  , sqrLen: require('./sqrLen')\n  , negate: require('./negate')\n  , inverse: require('./inverse')\n  , normalize: require('./normalize')\n  , dot: require('./dot')\n  , cross: require('./cross')\n  , lerp: require('./lerp')\n  , random: require('./random')\n  , transformMat4: require('./transformMat4')\n  , transformMat3: require('./transformMat3')\n  , transformQuat: require('./transformQuat')\n  , rotateX: require('./rotateX')\n  , rotateY: require('./rotateY')\n  , rotateZ: require('./rotateZ')\n  , forEach: require('./forEach')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/index.js\n// module id = 139\n// module chunks = 0 1","var inherit = require('./inherit');\nvar object = require('./object');\nvar util = require('./util');\nvar mat3 = require('gl-mat3');\nvar vec3 = require('gl-vec3');\nvar mat4 = require('gl-mat4');\nvar vec4 = require('gl-vec4');\n\n/**\n * This class defines the raw interface for a camera.  At a low level, the\n * camera provides a methods for converting between a map's coordinate system\n * to display pixel coordinates.\n *\n * For the moment, all camera transforms are assumed to be expressible as\n * 4x4 matrices.  More general cameras may follow that break this assumption.\n *\n * The interface for the camera is relatively stable for \"map-like\" views,\n * e.g. when the camera is pointing in the direction [0, 0, -1], and placed\n * above the z=0 plane.  More general view changes and events have not yet\n * been defined.\n *\n * The camera emits the following events when the view changes:\n *\n *   * {@link geo.event.camera.pan} when the camera is translated in the\n *       x/y plane\n *   * {@link geo.event.camera.zoom} when the camera is changed in a way\n *       that modifies the current zoom level\n *   * {@link geo.event.camera.view} when the visible bounds change for\n *       any reason\n *   * {@link geo.event.camera.projection} when the projection type changes\n *   * {@link geo.event.camera.viewport} when the viewport changes\n *\n * By convention, protected methods do not update the internal matrix state,\n * public methods do.  There are a few primary methods that are intended to\n * be used by external classes to mutate the internal state:\n *\n *   * bounds: Set the visible bounds (for initialization and zooming)\n *   * pan: Translate the camera in x/y by an offset (for panning)\n *   * viewFromCenterSizeRotation: set the camera view based on a center\n *        point, boundary size, and rotation angle.\n *\n * @class\n * @alias geo.camera\n * @extends geo.object\n * @param {object?} spec Options argument\n * @param {string} spec.projection One of the supported\n *    {@link geo.camera.projection}.\n * @param {object} spec.viewport The initial camera viewport\n * @param {object} spec.viewport.width\n * @param {object} spec.viewport.height\n * @returns {geo.camera}\n */\nvar camera = function (spec) {\n  if (!(this instanceof camera)) {\n    return new camera(spec);\n  }\n\n  var geo_event = require('./event');\n\n  spec = spec || {};\n  object.call(this, spec);\n\n  /**\n   * The view matrix\n   * @protected\n   */\n  this._view = util.mat4AsArray();\n\n  /**\n   * The projection matrix\n   * @protected\n   */\n  this._proj = util.mat4AsArray();\n\n  /**\n   * The projection type (one of `this.constructor.projection`)\n   * @protected\n   */\n  this._projection = null;\n\n  /**\n   * The transform matrix (view * proj)\n   * @protected\n   */\n  this._transform = util.mat4AsArray();\n\n  /**\n   * The inverse transform matrix (view * proj)^-1\n   * @protected\n   */\n  this._inverse = util.mat4AsArray();\n\n  /**\n   * Cached bounds object recomputed on demand.\n   * @protected\n   */\n  this._bounds = null;\n\n  /**\n   * Cached \"display\" matrix recomputed on demand.\n   * @see {@link geo.camera.display}\n   * @protected\n   */\n  this._display = null;\n\n  /**\n   * Cached \"world\" matrix recomputed on demand.\n   * @see {@link geo.camera.world}\n   * @protected\n   */\n  this._world = null;\n\n  /**\n   * The viewport parameters size and offset.\n   * @property {number} height Viewport height in pixels\n   * @property {number} width Viewport width in pixels\n   * @protected\n   */\n  this._viewport = {width: 1, height: 1};\n\n  /**\n   * Set up the projection matrix for the current projection type.\n   * @protected\n   */\n  this._createProj = function () {\n    var func = this._projection === 'perspective' ? mat4.frustum : mat4.ortho,\n        clipbounds = this._clipbounds[this._projection];\n    func(this._proj, clipbounds.left, clipbounds.right, clipbounds.bottom,\n         clipbounds.top, clipbounds.near, clipbounds.far);\n  };\n\n  /**\n   * Update the internal state of the camera on change to camera\n   * parameters.\n   * @protected\n   * @fires geo.event.camera.view\n   */\n  this._update = function () {\n    this._bounds = null;\n    this._display = null;\n    this._world = null;\n    this._transform = mat4.multiply(util.mat4AsArray(), this._proj, this._view);\n    mat4.invert(this._inverse, this._transform);\n    this.geoTrigger(geo_event.camera.view, {\n      camera: this\n    });\n  };\n\n  /**\n   * Getter/setter for the view matrix.\n   * @note copies the matrix value on set.\n   * @property {mat4} view The view matrix.\n   * @name geo.camera#view\n   */\n  Object.defineProperty(this, 'view', {\n    get: function () {\n      return this._view;\n    },\n    set: function (view) {\n      mat4.copy(this._view, view);\n      this._update();\n    }\n  });\n\n  /**\n   * Getter/setter for the view bounds.\n   *\n   * @property {object} bounds The view bounds.\n   * @property {number} bounds.left\n   * @property {number} bounds.top\n   * @property {number} bounds.right\n   * @property {number} bounds.bottom\n   * @name geo.camera#bounds\n   */\n  Object.defineProperty(this, 'bounds', {\n    get: function () {\n      if (this._bounds === null) {\n        this._bounds = this._getBounds();\n      }\n      return this._bounds;\n    },\n    set: function (bounds) {\n      this._setBounds(bounds);\n      this._update();\n    }\n  });\n\n  /**\n   * Getter/setter for the render clipbounds.  Opposite bounds must have\n   * different values.  There are independant clipbounds for each projection\n   * (parallel and perspective); switching the projection will switch to the\n   * clipbounds.  Individual values of the clipbounds can be set either via a\n   * command like `camera.clipbounds = {near: 3, far: 1}` or\n   * `camera.clipbounds.near = 3`.  In the second example, no check is made to\n   * ensure a non-zero volume clipbounds.\n   *\n   * @property {object} clipbounds The clipbounds for the current projection.\n   * @name geo.camera#clipbounds\n   */\n  Object.defineProperty(this, 'clipbounds', {\n    get: function () {\n      return this._clipbounds[this._projection];\n    },\n    set: function (bounds) {\n      var clipbounds = this._clipbounds[this._projection];\n      bounds = {\n        left: bounds.left === undefined ? clipbounds.left : bounds.left,\n        right: bounds.right === undefined ? clipbounds.right : bounds.right,\n        top: bounds.top === undefined ? clipbounds.top : bounds.top,\n        bottom: bounds.bottom === undefined ? clipbounds.bottom : bounds.bottom,\n        near: bounds.near === undefined ? clipbounds.near : bounds.near,\n        far: bounds.far === undefined ? clipbounds.far : bounds.far\n      };\n      if (bounds.left === bounds.right) {\n        throw new Error('Left and right values must be different');\n      }\n      if (bounds.top === bounds.bottom) {\n        throw new Error('Top and bottom values must be different');\n      }\n      if (bounds.near === bounds.far) {\n        throw new Error('Near and far values must be different');\n      }\n      this._clipbounds[this._projection] = bounds;\n      this._createProj();\n      this._update();\n    }\n  });\n\n  /**\n   * Getter for the \"display\" matrix.  This matrix converts from world\n   * coordinates into display coordinates.  Read only.\n   *\n   * @property {mat4} display The display matrix.\n   * @name geo.camera#display\n   */\n  Object.defineProperty(this, 'display', {\n    get: function () {\n      if (this._display === null) {\n        var b = this._clipbounds[this._projection];\n        var mat = util.mat4AsArray();\n        mat4.translate(mat, mat, [\n          this.viewport.width / 2,\n          this.viewport.height / 2,\n          0]);\n        mat4.scale(mat, mat, [\n          this.viewport.width / (b.right - b.left),\n          this.viewport.height / (b.bottom - b.top),\n          1]);\n        mat4.translate(mat, mat, [\n          -(b.left + b.right) / 2,\n          -(b.top + b.bottom) / 2,\n          0]);\n        mat4.multiply(mat, mat, this._transform);\n        this._display = mat;\n      }\n      return this._display;\n    }\n  });\n\n  /**\n   * Getter for the \"world\" matrix.  This matrix converts from display\n   * coordinates into world coordinates.  This is the inverse of the \"display\"\n   * matrix.  Read only.\n   *\n   * @property {mat4} world The world matrix.\n   * @name geo.camera#world\n   */\n  Object.defineProperty(this, 'world', {\n    get: function () {\n      if (this._world === null) {\n        this._world = mat4.invert(\n          util.mat4AsArray(),\n          this.display\n        );\n      }\n      return this._world;\n    }\n  });\n\n  /**\n   * Getter/setter for the projection type.\n   *\n   * @property {string} projection The projection type.  One of `parallel` or\n   *    `perspective`.\n   * @name geo.camera#projection\n   * @fires geo.event.camera.projection\n   */\n  Object.defineProperty(this, 'projection', {\n    get: function () {\n      return this._projection;\n    },\n    set: function (type) {\n      if (!this.constructor.projection[type]) {\n        throw new Error('Unsupported projection type: ' + type);\n      }\n      if (type !== this._projection) {\n        this._projection = type;\n        this._createProj();\n        this._update();\n        this.geoTrigger(geo_event.camera.projection, {\n          camera: this,\n          projection: type\n        });\n      }\n    }\n  });\n\n  /**\n   * Getter for the projection matrix.  Read only.\n   *\n   * @property {mat4} projectionMatrix The projection matrix.\n   * @name geo.camera#projectionMatrix\n   */\n  Object.defineProperty(this, 'projectionMatrix', {\n    get: function () {\n      return this._proj;\n    }\n  });\n\n  /**\n   * Getter for the transform matrix.  This is the projection multiplied by the\n   * view matrix.  Read only.\n   *\n   * @property {mat4} transform The transform matrix.\n   * @name geo.camera#transform\n   */\n  Object.defineProperty(this, 'transform', {\n    get: function () {\n      return this._transform;\n    }\n  });\n\n  /**\n   * Getter for the inverse transform matrix.  Read only.\n   *\n   * @property {mat4} inverse The inverse transform matrix.\n   * @name geo.camera#inverse\n   */\n  Object.defineProperty(this, 'inverse', {\n    get: function () {\n      return this._inverse;\n    }\n  });\n\n  /**\n   * Getter/setter for the viewport.\n   *\n   * The viewport consists of a width and height in pixels, plus a left and\n   * top offset in pixels.  The offsets are only used to determine if pixel\n   * alignment is possible.\n   *\n   * @property {object} viewport The viewport in pixels.\n   * @property {number} viewport.width\n   * @property {number} viewport.height\n   * @property {number} viewport.top\n   * @property {number} viewport.left\n   * @name geo.camera#viewport\n   * @fires geo.event.camera.viewport\n   */\n  Object.defineProperty(this, 'viewport', {\n    get: function () {\n      return {\n        width: this._viewport.width,\n        height: this._viewport.height,\n        left: this._viewport.left,\n        top: this._viewport.top\n      };\n    },\n    set: function (viewport) {\n      if (!(viewport.width > 0 &&\n            viewport.height > 0)) {\n        throw new Error('Invalid viewport dimensions');\n      }\n      if (viewport.width === this._viewport.width &&\n          viewport.height === this._viewport.height) {\n        return;\n      }\n\n      // apply scaling to the view matrix to account for the new aspect ratio\n      // without changing the apparent zoom level\n      if (this._viewport.width && this._viewport.height) {\n        this._scale([\n          this._viewport.width / viewport.width,\n          this._viewport.height / viewport.height,\n          1\n        ]);\n\n        // translate by half the difference to keep the center the same\n        this._translate([\n          (viewport.width - this._viewport.width) / 2,\n          (viewport.height - this._viewport.height) / 2,\n          0\n        ]);\n      }\n\n      this._viewport = {\n        width: viewport.width,\n        height: viewport.height,\n        left: viewport.left,\n        top: viewport.top\n      };\n      this._update();\n      this.geoTrigger(geo_event.camera.viewport, {\n        camera: this,\n        viewport: this.viewport\n      });\n    }\n  });\n\n  /**\n   * Reset the view matrix to its initial (identity) state.\n   * @protected\n   * @returns {this} Chainable.\n   */\n  this._resetView = function () {\n    mat4.identity(this._view);\n    return this;\n  };\n\n  /**\n   * Uses `mat4.translate` to translate the camera by the given vector amount.\n   * @protected\n   * @param {vec3|Array} offset The camera translation vector.\n   * @returns {this} Chainable.\n   */\n  this._translate = function (offset) {\n    mat4.translate(this._view, this._view, offset);\n    return this;\n  };\n\n  /**\n   * Uses `mat4.scale` to scale the camera by the given vector amount.\n   * @protected\n   * @param {vec3|Array} scale The scaling vector.\n   * @returns {this} Chainable.\n   */\n  this._scale = function (scale) {\n    mat4.scale(this._view, this._view, scale);\n    return this;\n  };\n\n  /**\n   * Project a vec4 from world space into clipped space [-1, 1] in place.\n   * @protected\n   * @param {vec4} point The point in world coordinates (mutated).\n   * @returns {vec4} The point in clip space coordinates.\n   */\n  this._worldToClip4 = function (point) {\n    return vec4.transformMat4(point, point, this._transform);\n  };\n\n  /**\n   * Project a vec4 from clipped space into world space in place.\n   * @protected\n   * @param {vec4} point The point in clipped coordinates (mutated).\n   * @returns {vec4} The point in world space coordinates.\n   */\n  this._clipToWorld4 = function (point) {\n    return vec4.transformMat4(point, point, this._inverse);\n  };\n\n  /**\n   * Apply the camera's projection transform to the given point.\n   * @param {vec4} pt a point in clipped coordinates.\n   * @returns {vec4} the point in normalized coordinates.\n   */\n  this.applyProjection = function (pt) {\n    var w;\n    if (this._projection === 'perspective') {\n      w = 1 / (pt[3] || 1);\n      pt[0] = w * pt[0];\n      pt[1] = w * pt[1];\n      pt[2] = w * pt[2];\n      pt[3] = w;\n    } else {\n      pt[3] = 1;\n    }\n    return pt;\n  };\n\n  /**\n   * Unapply the camera's projection transform from the given point.\n   * @param {vec4} pt a point in normalized coordinates.\n   * @returns {vec4} the point in clipped coordinates.\n   */\n  this.unapplyProjection = function (pt) {\n    var w;\n    if (this._projection === 'perspective') {\n      w = pt[3] || 1;\n      pt[0] = w * pt[0];\n      pt[1] = w * pt[1];\n      pt[2] = w * pt[2];\n      pt[3] = w;\n    } else {\n      pt[3] = 1;\n    }\n    return pt;\n  };\n\n  /**\n   * Project a vector from world space into viewport (display) space.  The\n   * resulting vector always has the last component (`w`) equal to 1.\n   *\n   * @param {vec2|vec3|vec4} point The point in world coordinates.\n   * @returns {vec4} The point in display coordinates.\n   */\n  this.worldToDisplay4 = function (point) {\n    point = [point[0], point[1], point[2] || 0, point[3] || 1];\n    point = vec4.transformMat4(point, point, this.display);\n    if (point[3] && point[3] !== 1) {\n      point = [point[0] / point[3], point[1] / point[3], point[2] / point[3], 1];\n    }\n    return point;\n  };\n\n  /**\n   * Project a vector from viewport (display) space into world space.  The\n   * resulting vector always has the last component (`w`) equal to 1.\n   *\n   * @param {vec2|vec3|vec4} point The point in display coordinates.\n   * @returns {vec4} The point in world space coordinates.\n   */\n  this.displayToWorld4 = function (point) {\n    point = [point[0], point[1], point[2] || 0, point[3] || 1];\n    point = vec4.transformMat4(point, point, this.world);\n    if (point[3] && point[3] !== 1) {\n      point = [point[0] / point[3], point[1] / point[3], point[2] / point[3], 1];\n    }\n    return point;\n  };\n\n  /**\n   * Project a 2D point object from world space into viewport space.  `z` is\n   * set to `-this.clipbounds.near` to scale with the clip space.\n   *\n   * @param {object} point The point in world coordinates.\n   * @param {number} point.x\n   * @param {number} point.y\n   * @returns {object} The point in display coordinates.\n   */\n  this.worldToDisplay = function (point) {\n    var b = this._clipbounds[this._projection];\n    point = this.worldToDisplay4([point.x, point.y, -b.near]);\n    return {x: point[0], y: point[1]};\n  };\n\n  /**\n   * Project a 2D point object from viewport space into world space.  `z` is\n   * set to -1 to scale with the clip space.\n   *\n   * @param {object} point The point in display coordinates.\n   * @param {number} point.x\n   * @param {number} point.y\n   * @returns {object} The point in world coordinates.\n   */\n  this.displayToWorld = function (point) {\n    point = this.displayToWorld4([point.x, point.y, -1]);\n    return {x: point[0], y: point[1]};\n  };\n\n  /**\n   * Calculate the current bounds in world coordinates from the\n   * current view matrix.  This computes a matrix vector multiplication\n   * so the result is cached for public facing methods.\n   *\n   * @protected\n   * @returns {object} bounds object.\n   */\n  this._getBounds = function () {\n    var ul, ur, ll, lr, bds = {};\n\n    // get corners\n    ul = this.displayToWorld({x: 0, y: 0});\n    ur = this.displayToWorld({x: this._viewport.width, y: 0});\n    ll = this.displayToWorld({x: 0, y: this._viewport.height});\n    lr = this.displayToWorld({x: this._viewport.width, y: this._viewport.height});\n\n    bds.left = Math.min(ul.x, ur.x, ll.x, lr.x);\n    bds.bottom = Math.min(ul.y, ur.y, ll.y, lr.y);\n    bds.right = Math.max(ul.x, ur.x, ll.x, lr.x);\n    bds.top = Math.max(ul.y, ur.y, ll.y, lr.y);\n\n    return bds;\n  };\n\n  /**\n   * Sets the view matrix so that the given world bounds\n   * are in view.  To account for the viewport aspect ratio,\n   * the resulting bounds may be larger in width or height than\n   * the requested bound, but should be centered in the frame.\n   *\n   * @protected\n   * @param {object} bounds\n   * @param {number} bounds.left\n   * @param {number} bounds.right\n   * @param {number} bounds.bottom\n   * @param {number} bounds.top\n   * @param {number?} bounds.near Currently ignored.\n   * @param {number?} bounds.far Currently ignored.\n   * @returns {this} Chainable.\n   */\n  this._setBounds = function (bounds) {\n    var size = {\n      width: bounds.right - bounds.left,\n      height: bounds.top - bounds.bottom\n    };\n    var center = {\n      x: (bounds.left + bounds.right) / 2,\n      y: (bounds.bottom + bounds.top) / 2\n    };\n\n    this._viewFromCenterSizeRotation(center, size, 0);\n    return this;\n  };\n\n  /**\n   * Sets the view matrix so that the given world center is centered, at\n   * least a certain width and height are visible, and a rotation is applied.\n   * The resulting bounds may be larger in width or height than the values if\n   * the viewport is a different aspect ratio.\n   *\n   * @protected\n   * @param {object} center Center of the view in gcs coordinates.\n   * @param {number} center.x\n   * @param {number} center.y\n   * @param {object} size Minimum size of the view in gcs units.\n   * @param {number} size.width\n   * @param {number} size.height\n   * @param {number} rotation in clockwise radians.  Optional.\n   * @returns {this} Chainable.\n   */\n  this._viewFromCenterSizeRotation = function (center, size, rotation) {\n    var translate = util.vec3AsArray(),\n        scale = util.vec3AsArray(),\n        c_ar, v_ar, w, h;\n\n    // reset view to the identity\n    this._resetView();\n\n    w = Math.abs(size.width);\n    h = Math.abs(size.height);\n    c_ar = w / h;\n    v_ar = this._viewport.width / this._viewport.height;\n\n    if (c_ar >= v_ar) {\n      // grow camera bounds vertically\n      h = w / v_ar;\n      scale[0] = 2 / w;\n      scale[1] = 2 / h;\n    } else {\n      // grow bounds horizontally\n      w = h * v_ar;\n      scale[0] = 2 / w;\n      scale[1] = 2 / h;\n    }\n\n    scale[2] = 1;\n    this._scale(scale);\n\n    if (rotation) {\n      this._rotate(rotation);\n    }\n\n    // translate to the new center.\n    translate[0] = -center.x;\n    translate[1] = -center.y;\n    translate[2] = 0;\n\n    this._translate(translate);\n\n    return this;\n  };\n\n  /**\n   * Sets the view matrix so that the given world center is centered, at\n   * least a certain width and height are visible, and a rotation is applied.\n   * The resulting bounds may be larger in width or height than the values if\n   * the viewport is a different aspect ratio.\n   *\n   * @param {object} center Center of the view in gcs coordinates.\n   * @param {number} center.x\n   * @param {number} center.y\n   * @param {object} size Minimum size of the view in gcs units.\n   * @param {number} size.width\n   * @param {number} size.height\n   * @param {number} rotation in clockwise radians.  Optional.\n   * @returns {this} Chainable.\n   */\n  this.viewFromCenterSizeRotation = function (center, size, rotation) {\n    this._viewFromCenterSizeRotation(center, size, rotation);\n    this._update();\n    return this;\n  };\n\n  /**\n   * Pans the view matrix by the given amount.\n   *\n   * @param {object} offset The delta in world space coordinates.\n   * @param {number} offset.x\n   * @param {number} offset.y\n   * @param {number} [offset.z=0]\n   * @returns {this} Chainable.\n   */\n  this.pan = function (offset) {\n    if (!offset.x && !offset.y && !offset.z) {\n      return;\n    }\n    this._translate([\n      offset.x,\n      offset.y,\n      offset.z || 0\n    ]);\n    this._update();\n    return this;\n  };\n\n  /**\n   * Zooms the view matrix by the given amount.\n   *\n   * @param {number} zoom The zoom scale to apply\n   * @returns {this} Chainable.\n   */\n  this.zoom = function (zoom) {\n    if (zoom === 1) {\n      return;\n    }\n    mat4.scale(this._view, this._view, [\n      zoom,\n      zoom,\n      zoom\n    ]);\n    this._update();\n    return this;\n  };\n\n  /**\n   * Rotate the view matrix by the given amount.\n   *\n   * @param {number} rotation Counter-clockwise rotation angle in radians.\n   * @param {object} center Center of rotation in world space coordinates.\n   * @param {vec3} [axis=[0, 0, -1]] axis of rotation.\n   * @returns {this} Chainable.\n   */\n  this._rotate = function (rotation, center, axis) {\n    if (!rotation) {\n      return;\n    }\n    axis = axis || [0, 0, -1];\n    if (!center) {\n      center = [0, 0, 0];\n    } else if (center.x !== undefined) {\n      center = [center.x || 0, center.y || 0, center.z || 0];\n    }\n    var invcenter = [-center[0], -center[1], -center[2]];\n    mat4.translate(this._view, this._view, center);\n    mat4.rotate(this._view, this._view, rotation, axis);\n    mat4.translate(this._view, this._view, invcenter);\n    return this;\n  };\n\n  /**\n   * Returns a CSS transform that converts (by default) from world coordinates\n   * into display coordinates.  This allows users of this module to position\n   * elements using world coordinates directly inside DOM elements.  This\n   * expects that the transform-origin is 0 0.\n   *\n   * @param {string} [transform='display'] The transform to return.  One of\n   *   `display` or `world`.\n   * @returns {string} The css transform string.\n   */\n  this.css = function (transform) {\n    var m;\n    switch ((transform || '').toLowerCase()) {\n      case 'display':\n      case '':\n        m = this.display;\n        break;\n      case 'world':\n        m = this.world;\n        break;\n      default:\n        throw new Error('Unknown transform ' + transform);\n    }\n    return camera.css(m);\n  };\n\n  /**\n   * Represent a glmatrix as a pretty-printed string.\n   * @param {mat4} mat A 4 x 4 matrix.\n   * @param {number} prec The number of decimal places.\n   * @returns {string}\n   */\n  this.ppMatrix = function (mat, prec) {\n    var t = mat;\n    prec = prec || 2;\n    function f(i) {\n      var d = t[i], s = d.toExponential(prec);\n      if (d >= 0) {\n        s = ' ' + s;\n      }\n      return s;\n    }\n    return [\n      [f(0), f(4), f(8), f(12)].join(' '),\n      [f(1), f(5), f(9), f(13)].join(' '),\n      [f(2), f(6), f(10), f(14)].join(' '),\n      [f(3), f(7), f(11), f(15)].join(' ')\n    ].join('\\n');\n  };\n\n  /**\n   * Pretty print the transform matrix.\n   * @returns {string} A string representation of the matrix.\n   */\n  this.toString = function () {\n    return this.ppMatrix(this._transform);\n  };\n\n  /**\n   * Return a debugging string of the current camera state.\n   * @returns {string} A string with the camera state.\n   */\n  this.debug = function () {\n    return [\n      'bounds',\n      JSON.stringify(this.bounds),\n      'view:',\n      this.ppMatrix(this._view),\n      'projection:',\n      this.ppMatrix(this._proj),\n      'transform:',\n      this.ppMatrix(this._transform)\n    ].join('\\n');\n  };\n\n  /**\n   * Represent the value of the camera as its transform matrix.\n   * @returns {mat4} The transform matrix.\n   */\n  this.valueOf = function () {\n    return this._transform;\n  };\n\n  this._clipbounds = this.constructor.clipbounds;\n  // initialize the view matrix\n  this._resetView();\n\n  // set up the projection matrix\n  this.projection = spec.projection || 'parallel';\n\n  // initialize the viewport\n  if (spec.viewport) {\n    this.viewport = spec.viewport;\n  }\n\n  // trigger an initial update to set up the camera state\n  this._update();\n\n  return this;\n};\n\n/**\n * Supported projection types.\n * @enum\n */\ncamera.projection = {\n  perspective: true,\n  parallel: true\n};\n\n/**\n * Default camera clipping bounds.  Some features and renderers may rely on the\n * far clip value being more positive than the near clip value.\n * @enum\n */\ncamera.clipbounds = {\n  perspective: {\n    left: -1,\n    right: 1,\n    top: 1,\n    bottom: -1,\n    far: 2000,\n    near: 0.01\n  },\n  parallel: {\n    left: -1,\n    right: 1,\n    top: 1,\n    bottom: -1,\n    far: -1,\n    near: 1\n  }\n};\n\n/**\n * Output a mat4 as a css transform.  This expects that the transform-origin is\n * 0 0.\n *\n * @variation 2\n * @param {mat4} t A matrix transform.\n * @returns {string} A css transform string.\n */\ncamera.css = function (t) {\n  return 'matrix3d(' +\n      t.map(function (val) {\n        /* Format each value with a certain precision, but don't use scientific\n         * notation or keep needless trailing zeroes. */\n        val = (+val).toPrecision(15);\n        if (val.indexOf('e') >= 0) {\n          val = (+val).toString();\n        } else if (val.indexOf('.') >= 0) {\n          val = val.replace(/(\\.|)0+$/, '');\n        }\n        return val;\n      }).join(',') +\n    ')';\n};\n\n// expose the vector and matrix functions for convenience\ncamera.vec3 = vec3;\ncamera.mat3 = mat3;\ncamera.vec4 = vec4;\ncamera.mat4 = mat4;\n\ninherit(camera, object);\nmodule.exports = camera;\n\n\n\n// WEBPACK FOOTER //\n// ./camera.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar feature = require('./feature');\nvar transform = require('./transform');\n\n/**\n * Polygon feature specification.\n *\n * @typedef {geo.feature.spec} geo.polygonFeature.spec\n * @property {geo.geoPosition|function} [position] Position of the data.\n *   Default is (data).\n * @property {geo.polygon|function} [polygon] Polygons from the data.  Default\n *   (data).\n * @property {geo.polygonFeature.styleSpec} [style] Style object with default\n *   style options.\n */\n\n/**\n * Style specification for a polygon feature.\n *\n * @typedef {geo.lineFeature.styleSpec} geo.polygonFeature.styleSpec\n * @extends geo.lineFeature.styleSpec\n * @property {boolean|function} [fill=true] True to fill polygon.\n * @property {geo.geoColor|function} [fillColor] Color to fill each polygon.\n *   The color can vary by vertex.\n * @property {number|function} [fillOpacity] Opacity for each polygon.  The\n *   opacity can vary by vertex.  Opacity is on a [0-1] scale.\n * @property {boolean|function} [stroke=false] True to stroke polygon.\n * @property {boolean|function} [uniformPolygon=false] Boolean indicating if\n *   each polygon has a uniform style (uniform fill color, fill opacity, stroke\n *   color, and stroke opacity).  Can vary by polygon.\n * @property {boolean|function} [closed=true] Ignored.  Always `true`.\n */\n\n/**\n * Create a new instance of class polygonFeature.\n *\n * @class\n * @alias geo.polygonFeature\n * @extends geo.feature\n * @param {geo.polygonFeature.spec} arg\n * @returns {geo.polygonFeature}\n */\nvar polygonFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof polygonFeature)) {\n    return new polygonFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var util = require('./util');\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_lineFeature,\n      s_init = this._init,\n      s_exit = this._exit,\n      s_data = this.data,\n      s_draw = this.draw,\n      s_modified = this.modified,\n      s_style = this.style,\n      m_coordinates = [];\n\n  this.featureType = 'polygon';\n  this._subfeatureStyles = {\n    fillColor: true,\n    fillOpacity: true,\n    lineCap: true,\n    lineJoin: true,\n    strokeColor: true,\n    strokeOffset: true,\n    strokeOpacity: true,\n    strokeWidth: true\n  };\n\n  /**\n   * Get/set data.\n   *\n   * @param {object} [arg] if specified, use this for the data and return the\n   *    feature.  If not specified, return the current data.\n   * @returns {geo.polygonFeature|object}\n   */\n  this.data = function (arg) {\n    var ret = s_data(arg);\n    if (arg !== undefined) {\n      m_coordinates = getCoordinates();\n      this._checkForStroke();\n    }\n    return ret;\n  };\n\n  /**\n   * Get the internal coordinates whenever the data changes.  Also compute the\n   * extents of the outside of each polygon for faster checking if points are\n   * in the polygon.\n   *\n   * @private\n   * @param {object[]} [data=this.data()] The data to process.\n   * @param {function} [posFunc=this.style.get('position')] The function to\n   *    get the position of each vertex.\n   * @param {function} [polyFunc=this.style.get('polygon')] The function to\n   *    get each polygon.\n   * @returns {geo.polygonObject[]} An array of polygon positions.  Each has\n   *    `outer` and `inner` if it has any coordinates, or is `undefined`.\n   */\n  function getCoordinates(data, posFunc, polyFunc) {\n    data = data || m_this.data();\n    posFunc = posFunc || m_this.style.get('position');\n    polyFunc = polyFunc || m_this.style.get('polygon');\n    var coordinates = data.map(function (d, i) {\n      var poly = polyFunc(d, i);\n      if (!poly) {\n        return;\n      }\n      var outer, inner, range, coord, j, x, y;\n\n      coord = poly.outer || (Array.isArray(poly) ? poly : []);\n      outer = new Array(coord.length);\n      for (j = 0; j < coord.length; j += 1) {\n        outer[j] = posFunc.call(m_this, coord[j], j, d, i);\n        x = outer[j].x || outer[j][0] || 0;\n        y = outer[j].y || outer[j][1] || 0;\n        if (!j) {\n          range = {min: {x: x, y: y}, max: {x: x, y: y}};\n        } else {\n          if (x < range.min.x) { range.min.x = x; }\n          if (y < range.min.y) { range.min.y = y; }\n          if (x > range.max.x) { range.max.x = x; }\n          if (y > range.max.y) { range.max.y = y; }\n        }\n      }\n      inner = (poly.inner || []).map(function (hole) {\n        coord = hole || [];\n        var trans = new Array(coord.length);\n        for (j = 0; j < coord.length; j += 1) {\n          trans[j] = posFunc.call(m_this, coord[j], j, d, i);\n        }\n        return trans;\n      });\n      return {\n        outer: outer,\n        inner: inner,\n        range: range\n      };\n    });\n    return coordinates;\n  }\n\n  /**\n   * Get the set of normalized polygon coordinates.\n   *\n   * @returns {geo.polygonObject[]} An array of polygon positions.  Each has\n   *    `outer` and `inner` if it has any coordinates, or is `undefined`.\n   */\n  this.polygonCoordinates = function () {\n    return m_coordinates;\n  };\n\n  /**\n   * Get the style for the stroke of the polygon.  Since polygons can have\n   * holes, the number of stroke lines may not be the same as the number of\n   * polygons.  If the style for a stroke is a function, this calls the\n   * appropriate value for the polygon.  Any style set for a stroke line should\n   * be wrapped in this function.\n   *\n   * @param {(object|function)?} styleValue The polygon's style value used for\n   *    the stroke.  This should be m_this.style(<name of style>) and not\n   *    m_this.style.get(<name of style>), as the result is more efficient if\n   *    the style is not a function.\n   * @returns {object|function} A style that can be used for the stroke.\n   * @private\n   */\n  function linePolyStyle(styleValue) {\n    if (util.isFunction(styleValue)) {\n      return function (d) {\n        return styleValue(d[0], d[1], d[2], d[3]);\n      };\n    } else {\n      return styleValue;\n    }\n  }\n\n  /**\n   * Get/set polygon accessor.\n   *\n   * @param {object|function} [val] If not specified, return the current\n   *    polygon accessor.  If specified, use this for the polygon accessor and\n   *    return `this`.  If a function is given, the function is passed\n   *    `(dataElement, dataIndex)` and returns a {@link geo.polygon}.\n   * @returns {object|function|this} The current polygon accessor or this\n   *    feature.\n   */\n  this.polygon = function (val) {\n    if (val === undefined) {\n      return m_this.style('polygon');\n    } else {\n      m_this.style('polygon', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n      m_coordinates = getCoordinates();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set position accessor.\n   *\n   * @param {geo.geoPosition|function} [val] If not specified, return the\n   *    current position accessor.  If specified, use this for the position\n   *    accessor and return `this`.  If a function is given, this is called\n   *    with `(vertexElement, vertexIndex, dataElement, dataIndex)`.\n   * @returns {geo.geoPosition|this} The current position or this feature.\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else {\n      m_this.style('position', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n      m_coordinates = getCoordinates();\n    }\n    return m_this;\n  };\n\n  /**\n   * Point search method for selection api.  Returns markers containing the\n   * given point.\n   *\n   * @param {geo.geoPosition} coordinate point to search for in map interface\n   *    gcs.\n   * @returns {object} An object with `index`: a list of polygon indices, and\n   *    `found`: a list of polygons that contain the specified coordinate.\n   */\n  this.pointSearch = function (coordinate) {\n    var found = [], indices = [], irecord = {}, data = m_this.data(),\n        map = m_this.layer().map(),\n        pt = transform.transformCoordinates(map.ingcs(), m_this.gcs(), coordinate);\n    m_coordinates.forEach(function (coord, i) {\n      var inside = util.pointInPolygon(\n        pt,\n        coord.outer,\n        coord.inner,\n        coord.range\n      );\n      if (inside) {\n        indices.push(i);\n        irecord[i] = true;\n        found.push(data[i]);\n      }\n    });\n    if (m_lineFeature) {\n      var lineFound = m_lineFeature.pointSearch(coordinate);\n      lineFound.found.forEach(function (lineData) {\n        if (lineData.length && lineData[0].length === 4 && !irecord[lineData[0][3]]) {\n          indices.push(lineData[0][3]);\n          irecord[lineData[0][3]] = true;\n          found.push(data[lineData[0][3]]);\n        }\n      });\n    }\n    return {\n      index: indices,\n      found: found\n    };\n  };\n\n  /**\n   * Get/Set style used by the feature.  This calls the super function, then\n   * checks if strokes are required.\n   *\n   * See the <a href=\"#.styleSpec\">style specification\n   * <code>styleSpec</code></a> for available styles.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the current style\n   *    object.  If a string and `arg2` is undefined, return the style\n   *    associated with the specified key.  If a string and `arg2` is defined,\n   *    set the named style to the specified value.  Otherwise, extend the\n   *    current style with the values in the specified object.\n   * @param {*} [arg2] If `arg1` is a string, the new value for that style.\n   * @returns {object|this} Either the entire style object, the value of a\n   *    specific style, or the current class instance.\n   */\n  this.style = function (arg1, arg2) {\n    var result = s_style.apply(this, arguments);\n    if (arg1 !== undefined && (typeof arg1 !== 'string' || arg2 !== undefined)) {\n      this._checkForStroke();\n    }\n    return result;\n  };\n\n  this.style.get = s_style.get;\n\n  /**\n   * Get an outer or inner loop of a polygon and return the necessary data to\n   * use it for a closed polyline.\n   *\n   * @param {object} item: the polygon.\n   * @param {number} itemIndex: the index of the polygon\n   * @param {Array} loop: the inner or outer loop.\n   * @returns {Array} the loop with the data necessary to send to the position\n   *    function for each vertex.\n   */\n  this._getLoopData = function (item, itemIndex, loop) {\n    var line = [], i;\n\n    for (i = 0; i < loop.length; i += 1) {\n      line.push([loop[i], i, item, itemIndex]);\n    }\n    return line;\n  };\n\n  /**\n   * Check if we need to add a line feature to the layer, and update it as\n   * necessary.\n   */\n  this._checkForStroke = function () {\n    if (s_style('stroke') === false) {\n      if (m_lineFeature && m_this.layer()) {\n        m_this.layer().deleteFeature(m_lineFeature);\n        m_lineFeature = null;\n        m_this.dependentFeatures([]);\n      }\n      return;\n    }\n    if (!m_this.layer()) {\n      return;\n    }\n    if (!m_lineFeature) {\n      m_lineFeature = m_this.layer().createFeature('line', {\n        selectionAPI: false,\n        gcs: m_this.gcs(),\n        visible: m_this.visible(undefined, true)\n      });\n      m_this.dependentFeatures([m_lineFeature]);\n    }\n    var polyStyle = m_this.style();\n    m_lineFeature.style({\n      antialiasing: linePolyStyle(polyStyle.antialiasing),\n      closed: true,\n      lineCap: linePolyStyle(polyStyle.lineCap),\n      lineJoin: linePolyStyle(polyStyle.lineJoin),\n      miterLimit: linePolyStyle(polyStyle.miterLimit),\n      strokeWidth: linePolyStyle(polyStyle.strokeWidth),\n      strokeStyle: linePolyStyle(polyStyle.strokeStyle),\n      strokeColor: linePolyStyle(polyStyle.strokeColor),\n      strokeOffset: linePolyStyle(polyStyle.strokeOffset),\n      strokeOpacity: util.isFunction(polyStyle.stroke) || !polyStyle.stroke ?\n        function (d) {\n          return m_this.style.get('stroke')(d[2], d[3]) ? m_this.style.get('strokeOpacity')(d[0], d[1], d[2], d[3]) : 0;\n        } :\n        linePolyStyle(polyStyle.strokeOpacity)\n    });\n    var data = this.data(),\n        posVal = this.style('position');\n    if (data !== m_lineFeature._lastData || posVal !== m_lineFeature._lastPosVal) {\n      var lineData = [], i, polygon, loop,\n          posFunc = this.style.get('position'),\n          polyFunc = this.style.get('polygon');\n\n      for (i = 0; i < data.length; i += 1) {\n        polygon = polyFunc(data[i], i);\n        if (!polygon) {\n          continue;\n        }\n        loop = polygon.outer || (Array.isArray(polygon) ? polygon : []);\n        if (loop.length >= 2) {\n          lineData.push(m_this._getLoopData(data[i], i, loop));\n          if (polygon.inner) {\n            polygon.inner.forEach(function (loop) {\n              if (loop.length >= 2) {\n                lineData.push(m_this._getLoopData(data[i], i, loop));\n              }\n            });\n          }\n        }\n      }\n      m_lineFeature.position(function (d, i, item, itemIndex) {\n        return posFunc(d[0], d[1], d[2], d[3]);\n      });\n      m_lineFeature.data(lineData);\n      m_lineFeature._lastData = data;\n      m_lineFeature._lastPosVal = posVal;\n    }\n  };\n\n  /**\n   * Redraw the object.\n   *\n   * @returns {object} The results of the superclass draw function.\n   */\n  this.draw = function () {\n    var result = s_draw();\n    if (m_lineFeature) {\n      m_lineFeature.draw();\n    }\n    return result;\n  };\n\n  /**\n   * When the feature is marked as modified, mark our sub-feature as\n   * modified, too.\n   *\n   * @returns {object} The results of the superclass modified function.\n   */\n  this.modified = function () {\n    var result = s_modified();\n    if (m_lineFeature) {\n      m_lineFeature.modified();\n    }\n    return result;\n  };\n\n  /**\n   * Take a set of data, reduce the number of vertices per polygon using the\n   * Ramer–Douglas–Peucker algorithm, and use the result as the new data.\n   * This changes the instance's data, the position accessor, and the polygon\n   * accessor.\n   *\n   * @param {array} data A new data array.\n   * @param {number} [tolerance] The maximum variation allowed in map.gcs\n   *    units.  A value of zero will only remove perfectly colinear points.  If\n   *    not specified, this is set to a half display pixel at the map's current\n   *    zoom level.\n   * @param {function} [posFunc=this.style.get('position')] The function to\n   *    get the position of each vertex.\n   * @param {function} [polyFunc=this.style.get('polygon')] The function to\n   *    get each polygon.\n   * @returns {this}\n   */\n  this.rdpSimplifyData = function (data, tolerance, posFunc, polyFunc) {\n    var map = m_this.layer().map(),\n        mapgcs = map.gcs(),\n        featuregcs = m_this.gcs(),\n        coordinates = getCoordinates(data, posFunc, polyFunc);\n    if (tolerance === undefined) {\n      tolerance = map.unitsPerPixel(map.zoom()) * 0.5;\n    }\n\n    /* transform the coordinates to the map gcs */\n    coordinates = coordinates.map(function (poly) {\n      return {\n        outer: transform.transformCoordinates(featuregcs, mapgcs, poly.outer),\n        inner: poly.inner.map(function (hole) {\n          return transform.transformCoordinates(featuregcs, mapgcs, hole);\n        })\n      };\n    });\n    data = data.map(function (d, idx) {\n      var poly = coordinates[idx],\n          elem = {};\n      /* Copy element properties, as they might be used by styles */\n      for (var key in d) {\n        if (d.hasOwnProperty(key) && !(Array.isArray(d) && key >= 0 && key < d.length)) {\n          elem[key] = d[key];\n        }\n      }\n      if (poly && poly.outer.length >= 3) {\n        // discard degenerate holes before anything else\n        elem.inner = poly.inner.filter(function (hole) {\n          return hole.length >= 3;\n        });\n        // simplify the outside of the polygon without letting it cross holes\n        elem.outer = util.rdpLineSimplify(poly.outer, tolerance, true, elem.inner);\n        if (elem.outer.length >= 3) {\n          var allButSelf = elem.inner.slice();\n          // simplify holes without crossing other holes or the outside\n          elem.inner.map(function (hole, idx) {\n            allButSelf[idx] = elem.outer;\n            var result = util.rdpLineSimplify(hole, tolerance, true, allButSelf);\n            allButSelf[idx] = result;\n            return result;\n          }).filter(function (hole) {\n            return hole.length >= 3;\n          });\n          // transform coordinates back to the feature gcs\n          elem.outer = transform.transformCoordinates(mapgcs, featuregcs, elem.outer);\n          elem.inner = elem.inner.map(function (hole) {\n            return transform.transformCoordinates(mapgcs, featuregcs, hole);\n          });\n        } else {\n          elem.outer = elem.inner = [];\n        }\n      } else {\n        elem.outer = [];\n      }\n      return elem;\n    });\n\n    /* Set the reduced polgons as the data and use simple accessors. */\n    m_this.style('position', function (d) { return d; });\n    m_this.style('polygon', function (d) { return d; });\n    m_this.data(data);\n    return m_this;\n  };\n\n  /**\n   * If the selectionAPI is on, then setting\n   * `this.geoOn(geo.event.feature.mouseover_order, this.mouseOverOrderClosestBorder)`\n   * will make it so that the mouseon events prefer the polygon with the\n   * closet border, including hole edges.\n   *\n   * @param {geo.event} evt The event; this should be triggered from\n   *    {@link geo.event.feature.mouseover_order}.\n   */\n  this.mouseOverOrderClosestBorder = function (evt) {\n    var data = evt.feature.data(),\n        map = evt.feature.layer().map(),\n        pt = transform.transformCoordinates(map.ingcs(), evt.feature.gcs(), evt.mouse.geo),\n        coor = evt.feature.polygonCoordinates(),\n        dist = {};\n    evt.over.index.forEach(function (di, idx) {\n      var poly = coor[di], mindist;\n      poly.outer.forEach(function (line1, pidx) {\n        var line2 = poly.outer[(pidx + 1) % poly.outer.length];\n        var dist = util.distance2dToLineSquared(pt, line1, line2);\n        if (mindist === undefined || dist < mindist) {\n          mindist = dist;\n        }\n      });\n      poly.inner.forEach(function (inner) {\n        inner.forEach(function (line1, pidx) {\n          var line2 = inner[(pidx + 1) % inner.length];\n          var dist = util.distance2dToLineSquared(pt, line1, line2);\n          if (mindist === undefined || dist < mindist) {\n            mindist = dist;\n          }\n        });\n      });\n      dist[di] = mindist;\n    });\n    evt.over.index.sort(function (i1, i2) {\n      return dist[i1] - dist[i2];\n    }).reverse();\n    // this isn't necessary, but ensures that other event handlers have\n    // consistent information\n    evt.over.index.forEach(function (di, idx) {\n      evt.over.found[idx] = data[di];\n    });\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    if (m_lineFeature && m_this.layer()) {\n      m_this.layer().deleteFeature(m_lineFeature);\n      m_lineFeature = null;\n      m_this.dependentFeatures([]);\n    }\n    s_exit();\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.polygonFeature.spec} arg An object with options for the\n   *    feature.\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var style = $.extend(\n      {},\n      {\n        // default style\n        fill: true,\n        fillColor: {r: 0.0, g: 0.5, b: 0.5},\n        fillOpacity: 1.0,\n        stroke: false,\n        strokeWidth: 1.0,\n        strokeStyle: 'solid',\n        strokeColor: {r: 0.0, g: 1.0, b: 1.0},\n        strokeOpacity: 1.0,\n        polygon: function (d) { return d; },\n        position: function (d) { return d; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.polygon !== undefined) {\n      style.polygon = arg.polygon;\n    }\n    if (arg.position !== undefined) {\n      style.position = arg.position;\n    }\n    m_this.style(style);\n\n    this._checkForStroke();\n  };\n\n  /* Don't call _init here -- let subclasses call it */\n  return this;\n};\n\n/**\n * Create a polygonFeature from an object.\n *\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to\n * @param {geo.polygonFeature.spec} spec The object specification\n * @returns {geo.polygonFeature|null}\n */\npolygonFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'polygon';\n  return feature.create(layer, spec);\n};\n\npolygonFeature.capabilities = {\n  /* core feature name -- support in any manner */\n  feature: 'polygon'\n};\n\ninherit(polygonFeature, feature);\nmodule.exports = polygonFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./polygonFeature.js","var inherit = require('./inherit');\nvar object = require('./object');\nvar util = require('./util');\nvar Mousetrap = require('mousetrap');\n\n/**\n * Map Interactor specification.\n *\n * @typedef {object} geo.mapInteractor.spec\n * @property {number} [throttle=30] Mouse events are throttled so that an event\n *      occurs no more often that this number of milliseconds.\n * @property {boolean|number} [discreteZoom=false] If `true`, only allow\n *      discrete (integer) zoom levels and debounce with a 400 ms delay.  If a\n *      positive number, debounce zoom events with the given delay in\n *      milliseconds.\n * @property {geo.actionRecord[]} [actions] The list of available actions.  See\n *      the code for the full default list.\n * @property {object} [click] An object specifying if click events should be\n *      handled.\n * @property {boolean} [click.enabled=true] Truthy to enable click events.\n * @property {object} [click.buttons] An object with button names (`left`,\n *      `right`, `middle`), each of which is a boolean which indicates if that\n *      button triggers a click event.\n * @property {number} [click.duration=0] If a positive number, the mouse up\n *      event must occur within this time in milliseconds of the mouse down\n *      event for it to be considered a click.\n * @property {boolean} [click.cancelOnMove=true] If truthy, don't generate\n *      click events if the mouse moved at all.\n * @property {object} [keyboard] An object describing which keyboard events are\n *      handled.\n * @property {object} [keyboard.actions] An object with different actions that\n *      are trigger by the keyboard.  Each key is the event that is triggered,\n *      with the values a list of keys that trigger the event.  See the code\n *      for the defaults.\n * @property {object} [keyboard.meta] Keyboard events can generate actions of\n *      different magnitudes.  This is an object with keys of `0`, `1`, and\n *      `2`, corresponding to small, medium, and large actions.  Each entry is\n *      an object with keys of the meta keys that are required to be down or\n *      up for that scale action to trigger.  If the value of the meta key is\n *      truthy, it must be down.  If `false`, it must be up.\n * @property {boolean} [keyboard.focusHighlight=true] If truthy, when the map\n *      gains focus, a highlight style is shown around it.  This gives an\n *      indicator that keyboard events will affect the map, but may not be\n *      visuallly desirabel.\n * @property {boolean} [alwaysTouch=false] If true, add touch support even if\n *      the browser doesn't apepar to be touch-aware.\n * @property {number} [wheelScaleX=1] A scale multiplier for horizontal wheel\n *      interactions.\n * @property {number} [wheelScaleY=1] A scale multiplier for vertical wheel\n *      interactions.\n * @property {number} [zoomScale=1] This affects how far the mouse must be\n *      dragged to zoom one level.  Roughly, the mouse must move `zoomScale` *\n *      120 pixels per level.\n * @property {number} [rotateWheelScale=0.105] When the mouse wheel is used for\n *      rotation, this is the number of radians per wheel step.\n * @property {number} [zoomrotateMinimumRotation=0.087] The minimum angle of\n *      rotation in radians before a `geo_action.zoomrotate` action will allow\n *      rotation.  Set to 0 to always include rotation.\n * @property {number} [zoomrotateReverseRotation=0.698] The minimum angle of\n *      rotation (in radians) before the `geo_action.zoomrotate` action will\n *      reverse the rotation direction.  This helps reduce chatter when zooms\n *      and pans are combined with rotations.\n * @property {number} [zoomrotateMinimumZoom=0.05] The minimum zoom factor\n *      change (increasing or desceasing) before the `geo_action.zoomrotate`\n *      action will allow zoom.  Set to 0 to always include zoom.\n * @property {number} [zoomrotateMinimumPan=5] The minimum number of pixels\n *      before the `geo_action.zoomrotate` action will allow panning.  Set to 0\n *      to always include panning.\n * @property {number} [touchPanDelay=50] The touch pan delay prevents a touch\n *      pan event from immediately following a rotate (including zoom) event.\n *      No touch pan event is processed within this number of milliseconds of a\n *      non-pan touch event.\n * @property {object} [momentum] Enable momentum when panning and zooming.\n * @property {boolean} [momentum.enabled=true] Truthy to allow momentum.\n * @property {number} [momentum.maxSpeed=2.5] Maximum animation speed.\n * @property {number} [momentum.minSpeed=0.01] Animations top when they drop\n *      below this speed.\n * @property {number} [momentum.stopTime=250] If the mouse hasn't moved in this\n *      many milliseconds, don't apply momentum.  The movement is a separate\n *      action from the preceding movement.\n * @property {number} [momentum.drag=0.01] Drag coefficient; larger values slow\n *      down faster.\n * @property {string[]} [momentum.actions] A list of actions on which to apply\n *      momentum.  Defaults to pan and zoom.\n * @property {object} [spring] Enable spring clamping to screen edges.\n * @property {boolean} [spring.enabled=true] Truthy to allow edge spring back.\n * @property {number} [spring.springConstant=0.00005] Higher values spring back\n *      faster.\n * @property {object} [zoomAnimation] Enable zoom animation for both discrete\n *      and continuous zoom.\n * @property {boolean} [zoomAnimation.enabled=true] Truthy to allow zoom\n *      animation.\n * @property {number} [zoomAnimation.duration=500] The time it takes for the\n *      final zoom to be reached.\n * @property {function} [zoomAnimation.ease] The easing function for the zoom.\n *      The default is `(2 - t) * t`.\n */\n\n/**\n * The mapInteractor class is responsible for handling raw events from the\n * browser and interpreting them as map navigation interactions.  This class\n * will call the navigation methods on the connected map, which will make\n * modifications to the camera directly.\n *\n * @class\n * @alias geo.mapInteractor\n * @extends geo.object\n * @param {geo.mapInterator.spec} args Interactor specification object.\n * @returns {geo.mapInteractor}\n */\nvar mapInteractor = function (args) {\n  'use strict';\n  if (!(this instanceof mapInteractor)) {\n    return new mapInteractor(args);\n  }\n  object.call(this);\n\n  var $ = require('jquery');\n  var geo_event = require('./event');\n  var geo_action = require('./action');\n  var throttle = require('./util').throttle;\n  var debounce = require('./util').debounce;\n  var actionMatch = require('./util').actionMatch;\n  var quadFeature = require('./quadFeature');\n\n  var m_options,\n      m_this = this,\n      m_mouse,\n      m_keyHandler,\n      m_boundKeys,\n      m_touchHandler,\n      m_state,\n      m_queue,\n      $node,\n      m_selectionLayer = null,\n      m_selectionQuad,\n      m_paused = false,\n      // if m_clickMaybe is not false, it contains the x, y, and buttons that\n      // were present when the mouse down event occurred.\n      m_clickMaybe = false,\n      m_clickMaybeTimeout,\n      m_callZoom = function () {};\n\n  // Helper method to calculate the speed from a velocity\n  function calcSpeed(v) {\n    var x = v.x, y = v.y;\n    return Math.sqrt(x * x + y * y);\n  }\n\n  // copy the options object with defaults\n  m_options = $.extend(\n    true,\n    {},\n    {\n      throttle: 30,\n      discreteZoom: false,\n\n      /* There should only be one action with any specific combination of event\n       * and modifiers.  When that event and modifiers occur, the specified\n       * action is triggered.  The event and modifiers fields can either be a\n       * simple string or an object with multiple entries with each entry set\n       * to true, false, or undefined.  If an object, all values that are\n       * truthy must match, all values that are false must not match, and all\n       * other values that are falsy are ignored.\n       *   Available actions:\n       * see geo_action list\n       *   Available events:\n       * left, right, middle, wheel\n       *   Available modifiers:\n       * shift, ctrl, alt, meta\n       *   Useful fields:\n       * action: the name of the action.  Multiple events may trigger the same\n       *    action.\n       * input: the name of the input or an object with input names for keys\n       *    and boolean values that indicates the combination of events that\n       *    trigger this action.\n       * modifiers: the name of a modifier or an object with modifier names for\n       *    keys and boolean values that indicates the combination of modifiers\n       *    that trigger this action.\n       * selectionRectangle: truthy if a selection rectangle should be shown\n       *    during the action.  This can be the name of an event that will be\n       *    triggered when the selection is complete.\n       * name: a string that can be used to reference this action.\n       * owner: a string that can be used to reference this action.\n       */\n      actions: [{\n        action: geo_action.pan,\n        input: 'left',\n        modifiers: {shift: false, ctrl: false},\n        owner: 'geo.mapInteractor',\n        name: 'button pan'\n      }, {\n        action: geo_action.zoom,\n        input: 'right',\n        modifiers: {shift: false, ctrl: false},\n        owner: 'geo.mapInteractor',\n        name: 'button zoom'\n      }, {\n        action: geo_action.zoom,\n        input: 'wheel',\n        modifiers: {shift: false, ctrl: false},\n        owner: 'geo.mapInteractor',\n        name: 'wheel zoom'\n      }, {\n        action: geo_action.rotate,\n        input: 'left',\n        modifiers: {shift: false, ctrl: true},\n        owner: 'geo.mapInteractor',\n        name: 'button rotate'\n      }, {\n        action: geo_action.rotate,\n        input: 'wheel',\n        modifiers: {shift: false, ctrl: true},\n        owner: 'geo.mapInteractor',\n        name: 'wheel rotate'\n      }, {\n        action: geo_action.select,\n        input: 'left',\n        modifiers: {shift: true, ctrl: true},\n        selectionRectangle: geo_event.select,\n        owner: 'geo.mapInteractor',\n        name: 'drag select'\n      }, {\n        action: geo_action.zoomselect,\n        input: 'left',\n        modifiers: {shift: true, ctrl: false},\n        selectionRectangle: geo_event.zoomselect,\n        owner: 'geo.mapInteractor',\n        name: 'drag zoom'\n      }, {\n        action: geo_action.unzoomselect,\n        input: 'right',\n        modifiers: {shift: true, ctrl: false},\n        selectionRectangle: geo_event.unzoomselect,\n        owner: 'geo.mapInteractor',\n        name: 'drag unzoom'\n      }, {\n        action: geo_action.pan,\n        input: 'pan',\n        owner: 'geo.mapInteractor',\n        name: 'touch pan'\n      }, {\n        action: geo_action.zoomrotate,\n        input: 'rotate',\n        owner: 'geo.mapInteractor',\n        name: 'touch zoom and rotate'\n      }],\n\n      click: {\n        enabled: true,\n        buttons: {left: true, right: true, middle: true},\n        duration: 0,\n        cancelOnMove: true\n      },\n\n      keyboard: {\n        actions: {\n          /* Specific actions can be disabled by removing them from this object\n           * or setting an empty list as the key bindings.  Additional actions\n           * can be added to the dictionary, each of which gets a list of key\n           * bindings.  See Mousetrap documentation for special key names. */\n          'zoom.in': ['plus', 'shift+plus', 'shift+ctrl+plus', '=', 'shift+=', 'shift+ctrl+='],\n          'zoom.out': ['-', 'shift+-', 'shift+ctrl+-', '_', 'shift+_', 'shift+ctrl+_'],\n          'zoom.0': ['1'],\n          'zoom.3': ['2'],\n          'zoom.6': ['3'],\n          'zoom.9': ['4'],\n          'zoom.12': ['5'],\n          'zoom.15': ['6'],\n          'zoom.18': ['7'],\n          'pan.left': ['left', 'shift+left', 'shift+ctrl+left'],\n          'pan.right': ['right', 'shift+right', 'shift+ctrl+right'],\n          'pan.up': ['up', 'shift+up', 'shift+ctrl+up'],\n          'pan.down': ['down', 'shift+down', 'shift+ctrl+down'],\n          'rotate.ccw': ['<', 'shift+<', 'shift+ctrl+<', '.', 'shift+.', 'shift+ctrl+.'],\n          'rotate.cw': ['>', 'shift+>', 'shift+ctrl+>', ',', 'shift+,', 'shift+ctrl+,'],\n          'rotate.0': ['0']\n        },\n        meta: {\n          /* the metakeys that are down during a key event determine the\n           * magnitude of the action, where 0 is the default small action\n           * (1-pixel pan, small zoom, small rotation), 1 is a middle-sized\n           * action, and 2 is the largest action.  Metakeys that aren't listed\n           * are ignored.  Metakeys include shift, ctrl, alt, and meta (alt is\n           * either the alt or option key, and meta is either windows or\n           * command). */\n          0: {shift: false, ctrl: false},\n          1: {shift: true, ctrl: true},\n          2: {shift: true, ctrl: false}\n        },\n        /* if focusHighlight is truthy, then a class is added to the map such\n         * that when the map gets focus, it is indicated inside the border of\n         * the map -- browsers usually show focus on the outside, which isn't\n         * useful if the map is full window.  It might be desirable to change\n         * this so it is only present if the focus is reached via the keyboard\n         * (which would probably require detecting keyup events). */\n        focusHighlight: true\n      },\n      /* Set alwaysTouch to false to only add touch support on devices that\n       * report touch support.  Set to true to add touch support on all\n       * devices. */\n      alwaysTouch: false,\n      wheelScaleX: 1,\n      wheelScaleY: 1,\n      zoomScale: 1,\n      rotateWheelScale: 6 * Math.PI / 180,\n      /* The minimum angle of rotation (in radians) before the\n       * geo_action.zoomrotate action will allow rotation.  Set to 0 to always\n       * include rotation. */\n      zoomrotateMinimumRotation: 5.0 * Math.PI / 180,\n      /* The minimum angle of rotation (in radians) before the\n       * geo_action.zoomrotate action will reverse the rotation direction.\n       * This helps reduce chatter when zooms and pans are combined with\n       * rotations. */\n      zoomrotateReverseRotation: 4.0 * Math.PI / 180,\n      /* The minimum zoom factor change (increasing or decreasing) before the\n       * geo_action.zoomrotate action will allow zoom.  Set to 0 to always\n       * include zoom. */\n      zoomrotateMinimumZoom: 0.05,\n      /* The minimum number of pixels before the geo_action.zoomrotate action\n       * will allow panning.  Set to 0 to always include panning. */\n      zoomrotateMinimumPan: 5,\n      /* The touch pan delay prevents a touch pan event from immediately\n       * following a rotate (including zoom) event.  No touch pan event is\n       * processed within this number of milliseconds of a non-pan touch\n       * event. */\n      touchPanDelay: 50,\n      momentum: {\n        enabled: true,\n        maxSpeed: 2.5,\n        minSpeed: 0.01,\n        stopTime: 250,\n        drag: 0.01,\n        actions: [geo_action.pan, geo_action.zoom]\n      },\n      spring: {\n        enabled: false,\n        springConstant: 0.00005\n      },\n      zoomAnimation: {\n        enabled: true,\n        duration: 500,\n        ease: function (t) { return (2 - t) * t; }\n      }\n    },\n    args || {}\n  );\n  /* We don't want to merge the original arrays with arrays passed in the args,\n   * so override that as necessary for actions. */\n  if (args && args.actions) {\n    m_options.actions = $.extend(true, [], args.actions);\n  }\n  if (args && args.momentum && args.momentum.actions) {\n    m_options.momentum.actions = $.extend(true, [], args.momentum.actions);\n  }\n  if (args && args.keyboard && args.keyboard.actions !== undefined) {\n    m_options.keyboard.actions = $.extend(true, {}, args.keyboard.actions);\n  }\n\n  // default mouse object\n  m_mouse = {\n    page: {x: 0, y: 0}, // mouse position relative to the page\n    map: {x: 0, y: 0}, // mouse position relative to the map\n    geo: {x: 0, y: 0},  // mouse position in map interface gcs\n    mapgcs: {x: 0, y: 0},  // mouse position in map gcs\n    // mouse button status\n    buttons: {\n      left: false,\n      right: false,\n      middle: false\n    },\n    // keyboard modifier status\n    modifiers: {\n      alt: false,\n      ctrl: false,\n      shift: false,\n      meta: false\n    },\n    // time the event was captured\n    time: new Date(),\n    // time elapsed since the last mouse event\n    deltaTime: 1,\n    // pixels/ms\n    velocity: {\n      x: 0,\n      y: 0\n    }\n  };\n\n  /*\n   * The interactor state determines what actions are taken in response to\n   * core browser events.\n   *\n   * i.e.\n   *  {\n   *    'action': geo_action.pan,    * an ongoing pan event\n   *    'origin': {...},       * mouse object at the start of the action\n   *    'delta': {x: *, y: *} // mouse movement since action start\n   *                           * not including the current event\n   *  }\n   *\n   *  {\n   *    'action': geo_action.zoom,   * an ongoing zoom event\n   *    ...\n   *  }\n   *\n   *  {\n   *    'action': geo_action.rotate,   * an ongoing rotate event\n   *    'origin': {...},       * mouse object at the start of the action\n   *    'delta': {x: *, y: *} // mouse movement since action start\n   *                           * not including the current event\n   *  }\n   *\n   *  {\n   *    'acton': geo_action.select,\n   *    'origin': {...},\n   *    'delta': {x: *, y: *}\n   *  }\n   *\n   *  {\n   *    'action': geo_action.momentum,\n   *    'origin': {...},\n   *    'handler': function () { }, // called in animation loop\n   *    'timer': animate loop timer\n   *  }\n   */\n  m_state = {};\n\n  /**\n   * Store queued map navigation commands (due to throttling) here\n   * {\n   *   kind: 'move' | 'wheel',  // what kind of mouse action triggered this\n   *   method: function () {},  // the throttled method\n   *   scroll: {x: ..., y: ...} // accumulated scroll wheel deltas\n   * }\n   */\n  m_queue = {};\n\n  /**\n   * Process keys that we've captured.  Metakeys determine the magnitude of\n   * the action.\n   *\n   * @param {string} action The basic action to take.\n   * @param {object} evt The event with metakeys.\n   * @param {object} keys Keys used to trigger the event.  `keys.simulated` is\n   *    true if artificially triggered.\n   * @fires geo.event.keyaction\n   */\n  this._handleKeys = function (action, evt, keys) {\n    if (keys && keys.simulated === true) {\n      evt = keys;\n    }\n    var meta = m_options.keyboard.meta || {0: {}},\n        map = m_this.map(),\n        mapSize = map.size(),\n        actionBase = action, actionValue = '',\n        value, factor, move = {};\n\n    for (value in meta) {\n      if (meta.hasOwnProperty(value)) {\n        if ((meta[value].shift === undefined || evt.shiftKey === !!meta[value].shift) &&\n            (meta[value].ctrl === undefined || evt.ctrlKey === !!meta[value].ctrl) &&\n            (meta[value].alt === undefined || evt.altKey === !!meta[value].alt) &&\n            (meta[value].meta === undefined || evt.metaKey === !!meta[value].meta)) {\n          factor = value;\n        }\n      }\n    }\n    if (factor === undefined) {\n      /* metakeys don't match, so don't trigger an event. */\n      return;\n    }\n\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    if (action.indexOf('.') >= 0) {\n      actionBase = action.substr(0, action.indexOf('.'));\n      actionValue = action.substr(action.indexOf('.') + 1);\n    }\n    switch (actionBase) {\n      case 'zoom':\n        switch (actionValue) {\n          case 'in':\n            move.zoomDelta = [0.05, 0.25, 1][factor];\n            break;\n          case 'out':\n            move.zoomDelta = -[0.05, 0.25, 1][factor];\n            break;\n          default:\n            if (!isNaN(parseFloat(actionValue))) {\n              move.zoom = parseFloat(actionValue);\n            }\n            break;\n        }\n        break;\n      case 'pan':\n        switch (actionValue) {\n          case 'down':\n            move.panY = -Math.max(1, [0, 0.05, 0.5][factor] * mapSize.height);\n            break;\n          case 'left':\n            move.panX = Math.max(1, [0, 0.05, 0.5][factor] * mapSize.width);\n            break;\n          case 'right':\n            move.panX = -Math.max(1, [0, 0.05, 0.5][factor] * mapSize.width);\n            break;\n          case 'up':\n            move.panY = Math.max(1, [0, 0.05, 0.5][factor] * mapSize.height);\n            break;\n        }\n        break;\n      case 'rotate':\n        switch (actionValue) {\n          case 'ccw':\n            move.rotationDelta = [1, 5, 90][factor] * Math.PI / 180;\n            break;\n          case 'cw':\n            move.rotationDelta = -[1, 5, 90][factor] * Math.PI / 180;\n            break;\n          default:\n            if (!isNaN(parseFloat(actionValue))) {\n              move.rotation = parseFloat(actionValue);\n            }\n            break;\n        }\n        break;\n    }\n    map.geoTrigger(geo_event.keyaction, {\n      move: move,\n      action: action,\n      factor: factor,\n      event: evt\n    });\n    if (move.cancel) {\n      return;\n    }\n    if (move.zoom !== undefined) {\n      map.zoom(move.zoom);\n    } else if (move.zoomDelta) {\n      map.zoom(map.zoom() + move.zoomDelta);\n    }\n    if (move.rotation !== undefined) {\n      map.rotation(move.rotation);\n    } else if (move.rotationDelta) {\n      map.rotation(map.rotation() + move.rotationDelta);\n    }\n    if (move.panX || move.panY) {\n      map.pan({x: move.panX || 0, y: move.panY || 0});\n    }\n  };\n\n  /**\n   * Check if this browser has touch support.\n   * Copied from https://github.com/hammerjs/touchemulator under the MIT\n   * license.\n   *\n   * @returns {boolean} `true` if there is touch support.\n   */\n  this.hasTouchSupport = function () {\n    return ('ontouchstart' in window) || // touch events\n           (window.Modernizr && window.Modernizr.touch) || // modernizr\n           (navigator.msMaxTouchPoints || navigator.maxTouchPoints) > 1; // pointer events\n  };\n\n  /**\n   * Handle touch events.\n   *\n   * @param {object} evt The touch event.\n   */\n  this._handleTouch = function (evt) {\n    var endIfBound = false;\n    if (evt.pointerType === 'mouse' && m_touchHandler.touchSupport) {\n      endIfBound = true;\n    }\n    if (evt.type === 'hammer.input') {\n      if (m_touchHandler.lastEventType === 'pan' && evt.pointers.length !== 1) {\n        endIfBound = true;\n        m_touchHandler.lastEventType = null;\n      } else {\n        return;\n      }\n    }\n    var evtType = /^(.*)(start|end|move|tap)$/.exec(evt.type);\n    if (!evtType || evtType.length !== 3) {\n      endIfBound = true;\n    }\n    if (endIfBound) {\n      if (m_state.boundDocumentHandlers && m_touchHandler.lastEvent) {\n        m_this._handleMouseUpDocument(m_touchHandler.lastEvent);\n      }\n      return;\n    }\n    evt.which = evtType[1];\n    var time = (new Date()).valueOf();\n    if (evt.which === 'pan' && m_touchHandler.lastEventType !== 'pan' &&\n        time - m_touchHandler.lastTime < m_options.touchPanDelay) {\n      return;\n    }\n    m_touchHandler.lastTime = time;\n    m_touchHandler.lastEventType = evt.which;\n    m_touchHandler.lastEvent = evt;\n    /* convert touch events to have page locations */\n    if (evt.pageX === undefined && evt.center !== undefined && evt.center.x !== undefined) {\n      evt.pageX = evt.center.x;\n      evt.pageY = evt.center.y;\n    }\n    /* start events should occur *before* the triggering delta.  By using the\n     * mouse handlers, we get all of the action properties we expect (and\n     * actions can be changed or defined as we see fit). */\n    if (evtType[2] === 'start') {\n      m_this._handleMouseDown(evt);\n      m_this._setClickMaybe(false);\n      if (m_state.boundDocumentHandlers) {\n        $(document).on('mousemove.geojs', m_this._handleMouseUpDocument);\n      }\n    }\n    /* start and move events both trigger a movement */\n    if (evtType[2] === 'start' || evtType[2] === 'move') {\n      if (m_state.boundDocumentHandlers) {\n        m_this._handleMouseMoveDocument(evt);\n      } else {\n        m_this._handleMouseMove(evt);\n      }\n    }\n    if (evtType[2] === 'end' || evtType[2] === 'cancel') {\n      if (m_state.boundDocumentHandlers) {\n        m_this._handleMouseUpDocument(evt);\n      } else {\n        m_this._handleMouseUp(evt);\n      }\n      m_touchHandler.lastEvent = null;\n    }\n    /* tap events are represented as a mouse left button down and up. */\n    if (evtType[2] === 'tap' && !m_state.boundDocumentHandlers) {\n      evt.which = 1;\n      m_touchHandler.lastEventType = null;\n      m_this._handleMouseDown(evt);\n      m_this._handleMouseUp(evt);\n      m_touchHandler.lastEventType = evtType[2];\n    }\n  };\n\n  /**\n   * Retrigger a mouse movement with the current mouse state.\n   * @fires geo.event.mousemove\n   */\n  this.retriggerMouseMove = function () {\n    m_this.map().geoTrigger(geo_event.mousemove, m_this.mouse());\n  };\n\n  /**\n   * Connects events to a map.  If the map is not set, then this does nothing.\n   * @returns {this}\n   */\n  this._connectEvents = function () {\n    if (!m_options.map) {\n      return m_this;\n    }\n\n    // prevent double binding to DOM elements\n    m_this._disconnectEvents();\n\n    // store the connected element\n    $node = $(m_options.map.node());\n\n    // set methods related to asynchronous event handling\n    m_this._handleMouseWheel = throttled_wheel();\n    m_callZoom = debounced_zoom();\n\n    // catalog what inputs we are using\n    util.adjustActions(m_options.actions);\n    var usedInputs = {};\n    ['right', 'pan', 'rotate'].forEach(function (input) {\n      usedInputs[input] = m_options.actions.some(function (action) {\n        return action.input[input];\n      });\n    });\n    // add event handlers\n    $node.on('wheel.geojs', m_this._handleMouseWheel);\n    $node.on('mousemove.geojs', m_this._handleMouseMove);\n    $node.on('mousedown.geojs', m_this._handleMouseDown);\n    $node.on('mouseup.geojs', m_this._handleMouseUp);\n    // Disable dragging images and such\n    $node.on('dragstart', function () { return false; });\n    if (usedInputs.right) {\n      $node.on('contextmenu.geojs', function () { return false; });\n    }\n\n    // bind keyboard events\n    if (m_options.keyboard && m_options.keyboard.actions) {\n      m_keyHandler = Mousetrap($node[0]);\n      var bound = [];\n      for (var keyAction in m_options.keyboard.actions) {\n        if (m_options.keyboard.actions.hasOwnProperty(keyAction)) {\n          m_keyHandler.bind(\n            m_options.keyboard.actions[keyAction],\n            (function (action) {\n              return function (evt, keys) {\n                m_this._handleKeys(action, evt, keys);\n              };\n            })(keyAction)\n          );\n          bound = bound.concat(m_options.keyboard.actions[keyAction]);\n        }\n      }\n      m_boundKeys = bound;\n    }\n    $node.toggleClass(\n      'highlight-focus',\n      !!(m_boundKeys && m_boundKeys.length && m_options.keyboard.focusHighlight));\n    // bind touch events\n    if ((m_this.hasTouchSupport() || m_options.alwaysTouch) &&\n        (usedInputs.pan || usedInputs.rotate)) {\n      // webpack expects optional dependencies to be wrapped in a try-catch\n      var Hammer;\n      try {\n        Hammer = require('hammerjs');\n      } catch (_error) {}\n      if (Hammer !== undefined) {\n        var recog = [],\n            touchEvents = ['hammer.input'];\n        if (usedInputs.rotate) {\n          recog.push([Hammer.Rotate, {enable: true}]);\n          touchEvents = touchEvents.concat(['rotatestart', 'rotateend', 'rotatemove']);\n        }\n        if (usedInputs.pan) {\n          recog.push([Hammer.Pan, {direction: Hammer.DIRECTION_ALL}]);\n          touchEvents = touchEvents.concat(['panstart', 'panend', 'panmove']);\n        }\n        /* Always handle tap events.  Reject double taps. */\n        recog.push([Hammer.Tap, {event: 'doubletap', taps: 2}]);\n        recog.push([Hammer.Tap, {event: 'singletap'}, undefined, ['doubletap']]);\n        touchEvents = touchEvents.concat(['singletap']);\n        var hammerParams = {recognizers: recog, preventDefault: true};\n        m_touchHandler = {\n          manager: new Hammer.Manager($node[0], hammerParams),\n          touchSupport: m_this.hasTouchSupport(),\n          lastTime: 0\n        };\n        m_touchHandler.manager.get('doubletap').recognizeWith('singletap');\n        touchEvents.forEach(function (touchEvent) {\n          m_touchHandler.manager.on(touchEvent, m_this._handleTouch);\n        });\n      }\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Disconnects events to a map.  If the map is not set, then this does\n   * nothing.\n   * @returns {this}\n   */\n  this._disconnectEvents = function () {\n    if (m_boundKeys) {\n      if (m_keyHandler) {\n        m_keyHandler.unbind(m_boundKeys);\n      }\n      m_boundKeys = null;\n      m_keyHandler = null;\n    }\n    if (m_touchHandler) {\n      m_touchHandler.manager.destroy();\n      m_touchHandler = null;\n    }\n    if ($node) {\n      $node.off('.geojs');\n      $node = null;\n    }\n    m_this._handleMouseWheel = function () {};\n    m_callZoom = function () {};\n\n    return m_this;\n  };\n\n  /**\n   * Sets or gets map for this interactor, adds draw region layer if needed.\n   *\n   * @param {geo.map} [val] Either a new map object for `undefined` to return\n   *    the current map object.\n   * @returns {geo.map|this} Either the current map object or the\n   *    mapInteractor class instance.\n   */\n  this.map = function (val) {\n    if (val !== undefined) {\n      m_options.map = val;\n      m_this._connectEvents();\n      return m_this;\n    }\n    return m_options.map;\n  };\n\n  /**\n   * Gets/sets the options object for the interactor.\n   *\n   * @param {geo.mapInteractor.spec} opts Options to set.\n   * @returns {geo.mapInteractor.spec|this}\n   */\n  this.options = function (opts) {\n    if (opts === undefined) {\n      return $.extend({}, m_options);\n    }\n    $.extend(m_options, opts);\n\n    // reset event handlers for new options\n    this._connectEvents();\n    return m_this;\n  };\n\n  /**\n   * Stores the current mouse position from an event.\n   *\n   * @param {jQuery.Event} evt JQuery event with the mouse position.\n   */\n  this._getMousePosition = function (evt) {\n    var offset = $node.offset(), dt, t;\n\n    t = (new Date()).valueOf();\n    dt = t - m_mouse.time;\n    m_mouse.time = t;\n    m_mouse.deltaTime = dt;\n    m_mouse.velocity = {\n      x: (evt.pageX - m_mouse.page.x) / dt,\n      y: (evt.pageY - m_mouse.page.y) / dt\n    };\n    m_mouse.page = {\n      x: evt.pageX,\n      y: evt.pageY\n    };\n    m_mouse.map = {\n      x: evt.pageX - offset.left,\n      y: evt.pageY - offset.top\n    };\n    try {\n      m_mouse.geo = m_this.map().displayToGcs(m_mouse.map);\n      m_mouse.mapgcs = m_this.map().displayToGcs(m_mouse.map, null);\n    } catch (e) {\n      // catch georeferencing problems and move on\n      m_mouse.geo = m_mouse.mapgcs = null;\n    }\n  };\n\n  /**\n   * Stores the current mouse button state in the m_mouse object.\n   *\n   * @param {jQuery.Event} evt The event that trigger the mouse action.\n   */\n  this._getMouseButton = function (evt) {\n    for (var prop in m_mouse.buttons) {\n      if (m_mouse.buttons.hasOwnProperty(prop)) {\n        m_mouse.buttons[prop] = false;\n      }\n    }\n    /* If the event buttons are specified, use them in preference to the\n     * evt.which for determining which buttons are down.  buttons is a bitfield\n     * and therefore can represent more than one button at a time. */\n    if (evt.buttons !== undefined) {\n      m_mouse.buttons.left = !!(evt.buttons & 1);\n      m_mouse.buttons.right = !!(evt.buttons & 2);\n      m_mouse.buttons.middle = !!(evt.buttons & 4);\n    } else if (evt.type !== 'mouseup') {\n      /* If we don't evt.buttons, fall back to which, but not on mouseup. */\n      switch (evt.which) {\n        case 1: m_mouse.buttons.left = true; break;\n        case 2: m_mouse.buttons.middle = true; break;\n        case 3: m_mouse.buttons.right = true; break;\n      }\n    }\n    /* When handling touch events, evt.which can be a string, in which case\n     * handle a \"button\" with that name -- a non-integer string will not\n     * evaluate as being between 1 and 3. */\n    if (evt.which && !(evt.which >= 1 && evt.which <= 3)) {\n      m_mouse.buttons[evt.which] = true;\n    }\n  };\n\n  /**\n   * Stores the current keyboard modifiers from an event in the m_mouse\n   * object.\n   *\n   * @param {jQuery.Event} evt JQuery event with the keyboard modifiers.\n   */\n  this._getMouseModifiers = function (evt) {\n    m_mouse.modifiers.alt = evt.altKey;\n    m_mouse.modifiers.ctrl = evt.ctrlKey;\n    m_mouse.modifiers.meta = evt.metaKey;\n    m_mouse.modifiers.shift = evt.shiftKey;\n  };\n\n  /**\n   * Compute a selection information object.\n   *\n   * @private\n   * @returns {geo.brushSelection}\n   */\n  this._getSelection = function () {\n    var origin = m_state.origin,\n        mouse = m_this.mouse(),\n        map = m_this.map(),\n        display = {}, gcs = {};\n\n    // TODO: clamp to map bounds\n    // Get the display coordinates\n    display.upperLeft = {\n      x: Math.min(origin.map.x, mouse.map.x),\n      y: Math.min(origin.map.y, mouse.map.y)\n    };\n\n    display.lowerRight = {\n      x: Math.max(origin.map.x, mouse.map.x),\n      y: Math.max(origin.map.y, mouse.map.y)\n    };\n\n    display.upperRight = {\n      x: display.lowerRight.x,\n      y: display.upperLeft.y\n    };\n\n    display.lowerLeft = {\n      x: display.upperLeft.x,\n      y: display.lowerRight.y\n    };\n\n    // Get the gcs coordinates\n    gcs.upperLeft = map.displayToGcs(display.upperLeft, null);\n    gcs.lowerRight = map.displayToGcs(display.lowerRight, null);\n    gcs.upperRight = map.displayToGcs(display.upperRight, null);\n    gcs.lowerLeft = map.displayToGcs(display.lowerLeft, null);\n\n    m_selectionQuad.data([{\n      ul: gcs.upperLeft,\n      ur: gcs.upperRight,\n      ll: gcs.lowerLeft,\n      lr: gcs.lowerRight\n    }]);\n    m_selectionQuad.draw();\n\n    return {\n      display: display,\n      gcs: gcs,\n      mouse: mouse,\n      origin: $.extend({}, m_state.origin)\n    };\n  };\n\n  /**\n   * Immediately cancel an ongoing action.\n   *\n   * @param {string?} action The action type, if `null` cancel any action.\n   * @param {boolean} [keepQueue] If truthy, keep the queue event if an action\n   *    is canceled.\n   * @returns {boolean} Set if an action was canceled.\n   */\n  this.cancel = function (action, keepQueue) {\n    var out;\n    if (!action) {\n      out = !!m_state.action;\n    } else {\n      out = m_state.action === action;\n    }\n    if (out) {\n      // cancel any queued interaction events\n      if (!keepQueue) {\n        m_queue = {};\n      }\n      clearState();\n    }\n    return out;\n  };\n\n  /**\n   * Set the value of whether a click is possible.  Cancel any outstanding\n   * timer for this process.\n   *\n   * @param {false|object} value If `false`, there is no chance of a future\n   *    click.  If an object with coordinates and the mouse button state,\n   *    a click is possible if the same button is released nearby.\n   */\n  this._setClickMaybe = function (value) {\n    m_clickMaybe = value;\n    if (m_clickMaybeTimeout) {\n      window.clearTimeout(m_clickMaybeTimeout);\n      m_clickMaybeTimeout = null;\n    }\n  };\n\n  /**\n   * Handle event when a mouse button is pressed.\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   * @fires geo.event.brushstart\n   * @fires geo.event.actiondown\n   */\n  this._handleMouseDown = function (evt) {\n    var action, actionRecord;\n\n    if (m_paused) {\n      return;\n    }\n    /* In some scenarios, we get both a tap event and then, somewhat later, a\n     * set of mousedown/mouseup events.  Ignore the spurious down/up set if we\n     * just handled a tap. */\n    if (m_touchHandler && m_touchHandler.lastEventType === 'tap' &&\n        (new Date()).valueOf() - m_touchHandler.lastTime < 1000) {\n      return;\n    }\n\n    m_this._getMousePosition(evt);\n    m_this._getMouseButton(evt);\n    m_this._getMouseModifiers(evt);\n\n    if (m_options.click.enabled &&\n        (!m_mouse.buttons.left || m_options.click.buttons.left) &&\n        (!m_mouse.buttons.right || m_options.click.buttons.right) &&\n        (!m_mouse.buttons.middle || m_options.click.buttons.middle)) {\n      m_this._setClickMaybe({\n        x: m_mouse.page.x,\n        y: m_mouse.page.y,\n        buttons: $.extend({}, m_mouse.buttons)\n      });\n      if (m_options.click.duration > 0) {\n        m_clickMaybeTimeout = window.setTimeout(function () {\n          m_clickMaybe = false;\n          m_clickMaybeTimeout = null;\n        }, m_options.click.duration);\n      }\n    }\n    actionRecord = actionMatch(m_mouse.buttons, m_mouse.modifiers,\n                               m_options.actions);\n    action = (actionRecord || {}).action;\n\n    var map = m_this.map();\n    // cancel transitions and momentum on click\n    map.transitionCancel('_handleMouseDown' + (action ? '.' + action : ''));\n    m_this.cancel(geo_action.momentum);\n\n    m_mouse.velocity = {\n      x: 0,\n      y: 0\n    };\n\n    if (action) {\n      // cancel any ongoing interaction queue\n      m_queue = {\n        kind: 'move'\n      };\n\n      // store the state object\n      m_state = {\n        action: action,\n        actionRecord: actionRecord,\n        origin: $.extend(true, {}, m_mouse),\n        initialZoom: map.zoom(),\n        initialRotation: map.rotation(),\n        initialEventRotation: evt.rotation,\n        delta: {x: 0, y: 0}\n      };\n\n      if (actionRecord.selectionRectangle) {\n        // Make sure the old selection layer is gone.\n        if (m_selectionLayer) {\n          m_selectionLayer.clear();\n          map.deleteLayer(m_selectionLayer);\n          m_selectionLayer = null;\n        }\n        m_selectionLayer = map.createLayer(\n          'feature', {features: [quadFeature.capabilities.color]});\n        m_selectionQuad = m_selectionLayer.createFeature(\n          'quad', {gcs: map.gcs()});\n        m_selectionQuad.style({\n          opacity: 0.25,\n          color: {r: 0.3, g: 0.3, b: 0.3}\n        });\n        map.geoTrigger(geo_event.brushstart, m_this._getSelection());\n      }\n      map.geoTrigger(geo_event.actiondown, {\n        state: m_this.state(), mouse: m_this.mouse(), event: evt});\n\n      // bind temporary handlers to document\n      if (m_options.throttle > 0) {\n        $(document).on(\n          'mousemove.geojs',\n          throttle(\n            m_options.throttle,\n            m_this._handleMouseMoveDocument\n          )\n        );\n      } else {\n        $(document).on('mousemove.geojs', m_this._handleMouseMoveDocument);\n      }\n      $(document).on('mouseup.geojs', m_this._handleMouseUpDocument);\n      m_state.boundDocumentHandlers = true;\n    }\n\n  };\n\n  /**\n   * Handle mouse move event.\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   * @fires geo.event.mousemove\n   */\n  this._handleMouseMove = function (evt) {\n    if (m_paused) {\n      return;\n    }\n\n    if (m_state.boundDocumentHandlers) {\n      // If currently performing a navigation action, the mouse\n      // coordinates will be captured by the document handler.\n      return;\n    }\n\n    if (m_options.click.cancelOnMove && m_clickMaybe) {\n      m_this._setClickMaybe(false);\n    }\n\n    m_this._getMousePosition(evt);\n    m_this._getMouseButton(evt);\n    m_this._getMouseModifiers(evt);\n\n    if (m_clickMaybe) {\n      return;\n    }\n\n    m_this.map().geoTrigger(geo_event.mousemove, m_this.mouse());\n  };\n\n  /**\n   * Handle the zoomrotate action.\n   *\n   * @param {object} evt The mouse event that triggered this.\n   */\n  this._handleZoomrotate = function (evt) {\n    /* Only zoom if we have once exceeded the initial zoom threshold. */\n    var deltaZoom = Math.log2(evt.scale);\n    if (!m_state.zoomrotateAllowZoom && deltaZoom &&\n        Math.abs(deltaZoom) >= Math.log2(1 + m_options.zoomrotateMinimumZoom)) {\n      if (m_options.zoomrotateMinimumZoom) {\n        m_state.initialZoom -= deltaZoom;\n      }\n      m_state.zoomrotateAllowZoom = true;\n    }\n    if (m_state.zoomrotateAllowZoom && deltaZoom) {\n      var zoom = m_state.initialZoom + deltaZoom;\n      m_this.map().zoom(zoom, m_state.origin);\n    }\n    /* Only rotate if we have once exceeded the initial rotation threshold.  The\n     * first time this happens (if the threshold is greater than zero), set the\n     * start of rotation to the current position, so that there is no sudden\n     * jump. */\n    var deltaTheta = (evt.rotation - m_state.initialEventRotation) * Math.PI / 180;\n    if (!m_state.zoomrotateAllowRotation && deltaTheta &&\n        Math.abs(deltaTheta) >= m_options.zoomrotateMinimumRotation) {\n      if (m_options.zoomrotateMinimumRotation) {\n        m_state.initialEventRotation = evt.rotation;\n        deltaTheta = 0;\n      }\n      m_state.zoomrotateAllowRotation = true;\n    }\n    if (m_state.zoomrotateAllowRotation) {\n      var theta = m_state.initialRotation + deltaTheta;\n      /* Compute the delta in the range of [-PI, PI). */\n      deltaTheta = util.wrapAngle(theta - m_this.map().rotation());\n      /* If we reverse direction, don't rotate until some threshold is\n       * exceeded.  This helps prevent rotation bouncing while panning. */\n      if (deltaTheta && (deltaTheta * (m_state.lastRotationDelta || 0) >= 0 ||\n          Math.abs(deltaTheta) >= m_options.zoomrotateReverseRotation)) {\n        m_this.map().rotation(theta, m_state.origin);\n        m_state.lastRotationDelta = deltaTheta;\n      }\n    }\n    /* Only pan if we have once exceed the initial pan threshold. */\n    var panOrigin = m_state.origin.page;\n    if (m_state.initialEventGeo) {\n      var offset = $node.offset();\n      panOrigin = m_this.map().gcsToDisplay(m_state.initialEventGeo);\n      panOrigin.x += offset.left;\n      panOrigin.y += offset.top;\n    }\n    var x = evt.pageX, deltaX = x - panOrigin.x,\n        y = evt.pageY, deltaY = y - panOrigin.y,\n        deltaPan2 = deltaX * deltaX + deltaY * deltaY;\n    if (!m_state.zoomrotateAllowPan && deltaPan2 &&\n        deltaPan2 >= m_options.zoomrotateMinimumPan * m_options.zoomrotateMinimumPan) {\n      if (m_options.zoomrotateMinimumPan) {\n        deltaX = deltaY = 0;\n        m_state.initialEventGeo = m_this.mouse().geo;\n      } else {\n        m_state.initialEventGeo = m_state.origin.geo;\n      }\n      m_state.zoomrotateAllowPan = true;\n    }\n    if (m_state.zoomrotateAllowPan && (deltaX || deltaY)) {\n      m_this.map().pan({x: deltaX, y: deltaY});\n    }\n  };\n\n  /**\n   * Handle mouse move event on the document (temporary bindings).\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   * @fires geo.event.brush\n   * @fires geo.event.actionmove\n   */\n  this._handleMouseMoveDocument = function (evt) {\n    var dx, dy, selectionObj;\n\n    // If the map has been disconnected, we do nothing.\n    if (!m_this.map()) {\n      return;\n    }\n\n    if (m_paused || m_queue.kind !== 'move') {\n      return;\n    }\n\n    m_this._getMousePosition(evt);\n    m_this._getMouseButton(evt);\n    m_this._getMouseModifiers(evt);\n\n    /* Only cancel possible clicks on move if we actually moved */\n    if (m_options.click.cancelOnMove && (m_clickMaybe.x === undefined ||\n        m_mouse.page.x !== m_clickMaybe.x ||\n        m_mouse.page.y !== m_clickMaybe.y)) {\n      m_this._setClickMaybe(false);\n    }\n    if (m_clickMaybe) {\n      return;\n    }\n\n    if (!m_state.action) {\n      // This shouldn't happen\n      console.log('WARNING: Invalid state in mapInteractor.');\n      return;\n    }\n\n    // calculate the delta from the origin point to avoid\n    // accumulation of floating point errors\n    dx = m_mouse.map.x - m_state.origin.map.x - m_state.delta.x;\n    dy = m_mouse.map.y - m_state.origin.map.y - m_state.delta.y;\n    m_state.delta.x += dx;\n    m_state.delta.y += dy;\n\n    if (m_state.action === geo_action.pan) {\n      m_this.map().pan({x: dx, y: dy}, undefined, 'limited');\n    } else if (m_state.action === geo_action.zoom) {\n      m_callZoom(-dy * m_options.zoomScale / 120, m_state);\n    } else if (m_state.action === geo_action.rotate) {\n      var cx, cy;\n      if (m_state.origin.rotation === undefined) {\n        cx = m_state.origin.map.x - m_this.map().size().width / 2;\n        cy = m_state.origin.map.y - m_this.map().size().height / 2;\n        m_state.origin.rotation = m_this.map().rotation() - Math.atan2(cy, cx);\n      }\n      cx = m_mouse.map.x - m_this.map().size().width / 2;\n      cy = m_mouse.map.y - m_this.map().size().height / 2;\n      m_this.map().rotation(m_state.origin.rotation + Math.atan2(cy, cx));\n    } else if (m_state.action === geo_action.zoomrotate) {\n      m_this._handleZoomrotate(evt);\n    } else if (m_state.actionRecord.selectionRectangle) {\n      // Get the bounds of the current selection\n      selectionObj = m_this._getSelection();\n      m_this.map().geoTrigger(geo_event.brush, selectionObj);\n    }\n    m_this.map().geoTrigger(geo_event.actionmove, {\n      state: m_this.state(), mouse: m_this.mouse(), event: evt});\n\n    // Prevent default to stop text selection in particular\n    evt.preventDefault();\n  };\n\n  /**\n   * Clear the action state, but remember if we have bound document handlers.\n   * @private\n   */\n  function clearState() {\n    m_state = {boundDocumentHandlers: m_state.boundDocumentHandlers};\n  }\n\n  /**\n   * Use interactor options to modify the mouse velocity by momentum\n   * or spring equations depending on the current map state.\n   * @private\n   * @param {object} v Current velocity in pixels / millisecond.\n   * @param {number} deltaT The time delta.\n   * @returns {object} New velocity.\n   */\n  function modifyVelocity(v, deltaT) {\n    deltaT = deltaT <= 0 ? 30 : deltaT;\n    var sf = springForce();\n    var speed = calcSpeed(v);\n    var vx = v.x / speed;\n    var vy = v.y / speed;\n\n    speed = speed * Math.exp(-m_options.momentum.drag * deltaT);\n\n    // |force| + |velocity| < c <- stopping condition\n    if (calcSpeed(sf) * deltaT + speed < m_options.momentum.minSpeed) {\n      return null;\n    }\n\n    if (speed > 0) {\n      vx = vx * speed;\n      vy = vy * speed;\n    } else {\n      vx = 0;\n      vy = 0;\n    }\n\n    return {\n      x: vx - sf.x * deltaT,\n      y: vy - sf.y * deltaT\n    };\n  }\n\n  /**\n   * Get the spring force for the current map bounds.\n   * @private\n   * @returns {object} The spring force.\n   */\n  function springForce() {\n    var xplus,  // force to the right\n        xminus, // force to the left\n        yplus,  // force to the top\n        yminus; // force to the bottom\n\n    if (!m_options.spring.enabled) {\n      return {x: 0, y: 0};\n    }\n    // get screen coordinates of corners\n    var maxBounds = m_this.map().maxBounds(undefined, null);\n    var ul = m_this.map().gcsToDisplay({\n      x: maxBounds.left,\n      y: maxBounds.top\n    }, null);\n    var lr = m_this.map().gcsToDisplay({\n      x: maxBounds.right,\n      y: maxBounds.bottom\n    }, null);\n\n    var c = m_options.spring.springConstant;\n    // Arg... map needs to expose the canvas size\n    var width = m_this.map().node().width();\n    var height = m_this.map().node().height();\n\n    xplus = c * Math.max(0, ul.x);\n    xminus = c * Math.max(0, width - lr.x);\n    yplus = c * Math.max(0, ul.y) / 2;\n    yminus = c * Math.max(0, height - lr.y) / 2;\n\n    return {\n      x: xplus - xminus,\n      y: yplus - yminus\n    };\n  }\n\n  /**\n   * Based on the screen coordinates of a selection, zoom or unzoom and\n   * recenter.\n   *\n   * @private\n   * @param {string} action Either `geo_action.zoomselect` or\n   *    `geo_action.unzoomselect`.\n   * @param {object} lowerLeft The x and y coordinates of the lower left corner\n   *    of the zoom rectangle.\n   * @param {object} upperRight The x and y coordinates of the upper right\n   *    corner of the zoom rectangle.\n   */\n  this._zoomFromSelection = function (action, lowerLeft, upperRight) {\n    if (action !== geo_action.zoomselect && action !== geo_action.unzoomselect) {\n      return;\n    }\n    if (lowerLeft.x === upperRight.x || lowerLeft.y === upperRight.y) {\n      return;\n    }\n    var zoom, center,\n        map = m_this.map(),\n        mapsize = map.size();\n    /* To arbitrarily handle rotation and projection, we center the map at the\n     * central coordinate of the selection and set the zoom level such that the\n     * four corners are just barely on the map.  When unzooming (zooming out),\n     * we ensure that the previous view is centered in the selection but use\n     * the maximal size for the zoom factor. */\n    var scaling = {\n      x: Math.abs((upperRight.x - lowerLeft.x) / mapsize.width),\n      y: Math.abs((upperRight.y - lowerLeft.y) / mapsize.height)\n    };\n    if (action === geo_action.zoomselect) {\n      center = map.displayToGcs({\n        x: (lowerLeft.x + upperRight.x) / 2,\n        y: (lowerLeft.y + upperRight.y) / 2\n      }, null);\n      zoom = map.zoom() - Math.log2(Math.max(scaling.x, scaling.y));\n    } else {  /* unzoom */\n      /* To make the existing visible map entirely within the selection\n       * rectangle, this would be changed to Math.min instead of Math.max of\n       * the scaling factors.  This felt wrong, though. */\n      zoom = map.zoom() + Math.log2(Math.max(scaling.x, scaling.y));\n      /* Record the current center.  Later, this is panned to the center of the\n       * selection rectangle. */\n      center = map.center(undefined, null);\n    }\n    /* When discrete zoom is enable, always round down.  We have to do this\n     * explicitly, as otherwise we may zoom too far and the selection will not\n     * be completely visible. */\n    if (map.discreteZoom()) {\n      zoom = Math.floor(zoom);\n    }\n    map.zoom(zoom);\n    if (action === geo_action.zoomselect) {\n      map.center(center, null);\n    } else {\n      var newcenter = map.gcsToDisplay(center, null);\n      map.pan({\n        x: (lowerLeft.x + upperRight.x) / 2 - newcenter.x,\n        y: (lowerLeft.y + upperRight.y) / 2 - newcenter.y\n      });\n    }\n  };\n\n  /**\n   * Handle event when a mouse button is unpressed on the document.\n   * Removes temporary bindings.\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   * @fires geo.event.brushend\n   * @fires geo.event.actionselection\n   * @fires geo.event.actionup\n   * @fires geo.event.select\n   * @fires geo.event.zoomselect\n   * @fires geo.event.unzoomselect\n   */\n  this._handleMouseUpDocument = function (evt) {\n    var selectionObj, oldAction;\n\n    if (m_paused) {\n      return;\n    }\n\n    // cancel queued interactions\n    m_queue = {};\n\n    m_this._setClickMaybe(false);\n    m_this._getMouseButton(evt);\n    m_this._getMouseModifiers(evt);\n\n    // unbind temporary handlers on document\n    $(document).off('.geojs');\n    m_state.boundDocumentHandlers = false;\n\n    if (m_mouse.buttons.right) {\n      evt.preventDefault();\n    }\n\n    if (m_state.actionRecord && m_state.actionRecord.selectionRectangle) {\n      m_this._getMousePosition(evt);\n      selectionObj = m_this._getSelection();\n\n      m_selectionLayer.clear();\n      m_this.map().deleteLayer(m_selectionLayer);\n      m_selectionLayer = null;\n      m_selectionQuad = null;\n\n      m_this.map().geoTrigger(geo_event.brushend, selectionObj);\n      if (m_state.actionRecord.selectionRectangle !== true) {\n        m_this.map().geoTrigger(m_state.actionRecord.selectionRectangle,\n                                selectionObj);\n      }\n      m_this._zoomFromSelection(m_state.action, selectionObj.display.lowerLeft,\n                                selectionObj.display.upperRight);\n      m_this.map().geoTrigger(geo_event.actionselection, {\n        state: m_this.state(),\n        mouse: m_this.mouse(),\n        event: evt,\n        lowerLeft: selectionObj.display.lowerLeft,\n        upperRight: selectionObj.display.upperRight});\n    }\n    m_this.map().geoTrigger(geo_event.actionup, {\n      state: m_this.state(), mouse: m_this.mouse(), event: evt});\n\n    // reset the interactor state\n    oldAction = m_state.action;\n    clearState();\n\n    // if momentum is enabled, start the action here\n    if (m_options.momentum.enabled &&\n            $.inArray(oldAction, m_options.momentum.actions) >= 0) {\n      var t = (new Date()).valueOf();\n      var dt = t - m_mouse.time + m_mouse.deltaTime;\n      if (t - m_mouse.time < m_options.momentum.stopTime) {\n        m_mouse.velocity.x *= m_mouse.deltaTime / dt;\n        m_mouse.velocity.y *= m_mouse.deltaTime / dt;\n        m_mouse.deltaTime = dt;\n      } else {\n        m_mouse.velocity.x = m_mouse.velocity.y = 0;\n      }\n      m_this.springBack(true, oldAction);\n    }\n  };\n\n  /**\n   * Handle event when a mouse button is unpressed.\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   */\n  this._handleMouseUp = function (evt) {\n    if (m_paused) {\n      return;\n    }\n\n    m_this._getMouseButton(evt);\n\n    if (m_clickMaybe) {\n      m_this._handleMouseClick(evt);\n    }\n  };\n\n  /**\n   * Handle event when a mouse click is detected.  A mouse click is a simulated\n   * event that occurs when the time between a mouse down and mouse up\n   * is less than the configured duration and (optionally) if no mousemove\n   * events were triggered in the interim.\n   *\n   * @param {jQuery.Event} evt The event that triggered this.\n   * @fires geo.event.mouseup\n   */\n  this._handleMouseClick = function (evt) {\n\n    /* Cancel a selection if it is occurring */\n    if (m_state.actionRecord && m_state.actionRecord.selectionRectangle) {\n      m_selectionLayer.clear();\n      m_this.map().deleteLayer(m_selectionLayer);\n      m_selectionLayer = null;\n      m_selectionQuad = null;\n      m_state.action = m_state.actionRecord = null;\n    }\n    m_this._getMouseButton(evt);\n    m_this._getMouseModifiers(evt);\n\n    // cancel any ongoing pan action\n    m_this.cancel(geo_action.pan);\n\n    // unbind temporary handlers on document\n    $(document).off('.geojs');\n    m_state.boundDocumentHandlers = false;\n    // add information about the button state to the event information\n    var details = m_this.mouse();\n    details.buttonsDown = m_clickMaybe.buttons;\n\n    // reset click detector variable\n    m_this._setClickMaybe(false);\n    // fire a click event\n    m_this.map().geoTrigger(geo_event.mouseclick, details);\n  };\n\n  /**\n   * Private wrapper around the map zoom method that is debounced to support\n   * discrete zoom interactions.\n   *\n   * @returns {function} A function to handle zooms that debounces such\n   *    events.  This function is passed the zoom level and the mouse state.\n   */\n  function debounced_zoom() {\n    var deltaZ = 0, delay = 400, origin, startZoom, targetZoom;\n\n    function accum(dz, org) {\n      var map = m_this.map(), zoom;\n\n      origin = $.extend(true, {}, org);\n      deltaZ += dz;\n      if (targetZoom === undefined) {\n        startZoom = targetZoom = map.zoom();\n      }\n      targetZoom += dz;\n\n      // Respond to debounced events when they add up to a change in the\n      // discrete zoom level.\n      if (map && Math.abs(deltaZ) >= 1 && m_options.discreteZoom &&\n            !m_options.zoomAnimation.enabled) {\n\n        zoom = Math.round(deltaZ + map.zoom());\n\n        // delta is what is left over from the zoom delta after the new zoom\n        // value\n        deltaZ = deltaZ + map.zoom() - zoom;\n\n        map.zoom(zoom, origin);\n      }\n\n    }\n\n    function apply() {\n      var map = m_this.map(), zoom;\n      if (map) {\n        if (m_options.zoomAnimation.enabled) {\n          zoom = targetZoom;\n          if (m_options.discreteZoom) {\n            zoom = Math.round(zoom);\n            if (zoom === startZoom && targetZoom !== startZoom) {\n              zoom = startZoom + (targetZoom > startZoom ? 1 : -1);\n            }\n          }\n          map.transitionCancel('debounced_zoom.' + geo_action.zoom);\n          map.transition({\n            zoom: zoom,\n            zoomOrigin: origin,\n            duration: m_options.zoomAnimation.duration,\n            ease: m_options.zoomAnimation.ease,\n            done: function (status) {\n              status = status || {};\n              var zoomRE = new RegExp('\\\\.' + geo_action.zoom + '$');\n              if (!status.next && (!status.cancel ||\n                  ('' + status.source).search(zoomRE) < 0)) {\n                targetZoom = undefined;\n              }\n              /* If we were animating the zoom, if the zoom is continuous, just\n               * stop where we are.  If using discrete zoom, we need to make\n               * sure we end up discrete.  However, we don't want to do that if\n               * the next action is further zooming. */\n              if (m_options.discreteZoom && status.cancel &&\n                  status.transition && status.transition.end &&\n                  ('' + status.source).search(zoomRE) < 0) {\n                map.zoom(status.transition.end.zoom,\n                         status.transition.end.zoomOrigin);\n              }\n            }\n          });\n        } else {\n          zoom = deltaZ + map.zoom();\n          if (m_options.discreteZoom) {\n            // round off the zoom to an integer and throw away the rest\n            zoom = Math.round(zoom);\n          }\n          map.zoom(zoom, origin);\n        }\n      }\n      deltaZ = 0;\n    }\n\n    if (m_options.discreteZoom !== true && m_options.discreteZoom > 0) {\n      delay = m_options.discreteZoom;\n    }\n    if ((m_options.discreteZoom === true || m_options.discreteZoom > 0) &&\n            !m_options.zoomAnimation.enabled) {\n      return debounce(delay, false, apply, accum);\n    } else {\n      return function (dz, org) {\n        if (!dz && targetZoom === undefined) {\n          return;\n        }\n        accum(dz, org);\n        apply();\n      };\n    }\n  }\n\n  /**\n   * Attaches wrapped methods for accumulating fast mouse wheel events and\n   * throttling map interactions.\n   * @private\n   *\n   * @returns {function} A function that takes a jQuery.Event for mouse wheel\n   *    actions.\n   * @fires geo.event.actionwheel\n   */\n  function throttled_wheel() {\n    var my_queue = {};\n\n    function accum(evt) {\n      var dx, dy;\n\n      if (m_paused) {\n        return;\n      }\n\n      if (my_queue !== m_queue) {\n        my_queue = {\n          kind: 'wheel',\n          scroll: {x: 0, y: 0}\n        };\n        m_queue = my_queue;\n      }\n\n      evt.preventDefault();\n\n      // try to normalize deltas using the wheel event standard:\n      //   https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n      evt.deltaFactor = 1;\n      if (evt.originalEvent.deltaMode === 1) {\n        // DOM_DELTA_LINE -- estimate line height\n        evt.deltaFactor = 40;\n      } else if (evt.originalEvent.deltaMode === 2) {\n        // DOM_DELTA_PAGE -- get window height\n        evt.deltaFactor = $(window).height();\n      }\n\n      // prevent NaN's on legacy browsers\n      dx = evt.originalEvent.deltaX || 0;\n      dy = evt.originalEvent.deltaY || 0;\n\n      // scale according to the options\n      dx = dx * m_options.wheelScaleX * evt.deltaFactor / 120;\n      dy = dy * m_options.wheelScaleY * evt.deltaFactor / 120;\n\n      my_queue.scroll.x += dx;\n      my_queue.scroll.y += dy;\n    }\n\n    function wheel(evt) {\n      var zoomFactor, action, actionRecord;\n\n      // If the current queue doesn't match the queue passed in as an argument,\n      // assume it was cancelled and do nothing.\n      if (my_queue !== m_queue) {\n        return;\n      }\n\n      // perform the map navigation event\n      m_this._getMouseModifiers(evt);\n\n      actionRecord = actionMatch({wheel: true}, m_mouse.modifiers,\n                                 m_options.actions);\n      action = (actionRecord || {}).action;\n\n      if (action) {\n        // if we were moving because of momentum or a transition, cancel it and\n        // recompute where the mouse action is occurring.\n        var recompute = m_this.map().transitionCancel('wheel.' + action);\n        recompute |= m_this.cancel(geo_action.momentum, true);\n        if (recompute) {\n          m_mouse.geo = m_this.map().displayToGcs(m_mouse.map);\n          m_mouse.mapgcs = m_this.map().displayToGcs(m_mouse.map, null);\n        }\n        switch (action) {\n          case geo_action.pan:\n            m_this.map().pan({\n              x: m_queue.scroll.x,\n              y: m_queue.scroll.y\n            }, undefined, 'limited');\n            break;\n          case geo_action.zoom:\n            zoomFactor = -m_queue.scroll.y;\n            m_callZoom(zoomFactor, m_mouse);\n            break;\n          case geo_action.rotate:\n            m_this.map().rotation(\n              m_this.map().rotation() +\n              m_queue.scroll.y * m_options.rotateWheelScale,\n              m_mouse);\n            break;\n        }\n        m_this.map().geoTrigger(geo_event.actionwheel, {\n          state: m_this.state(), mouse: m_this.mouse(), event: evt});\n      }\n\n      // reset the queue\n      m_queue = {};\n    }\n\n    if (m_options.throttle > 0) {\n      return throttle(m_options.throttle, false, wheel, accum);\n    } else {\n      return function (evt) {\n        accum(evt);\n        wheel(evt);\n      };\n    }\n  }\n\n  /**\n   * Handle mouse wheel event.  (Defined inside _connectEvents).\n   */\n  this._handleMouseWheel = function () {};\n\n  /**\n   * Start up a spring back action when the map bounds are out of range.\n   * Not to be user callable.\n   * @protected\n   *\n   * @param {boolean} initialVelocity Truthy if the mouse's current velocity\n   *    should be used as the initial velocity.  False to assume no initial\n   *    velocity.\n   * @param {object} origAction The original action that started the spring\n   *    back.  If this was a zoom action, the spring back includes zoom;\n   *    otherwise it only includes panning.\n   */\n  this.springBack = function (initialVelocity, origAction) {\n    if (m_state.action === geo_action.momentum) {\n      return;\n    }\n    if (!initialVelocity) {\n      m_mouse.velocity = {\n        x: 0,\n        y: 0\n      };\n    }\n    m_state.origAction = origAction;\n    m_state.action = geo_action.momentum;\n    m_state.origin = m_this.mouse();\n    m_state.momentum = m_this.mouse();\n    m_state.start = new Date();\n    m_state.handler = function () {\n      var v, s, last, dt;\n\n      if (m_state.action !== geo_action.momentum ||\n          !m_this.map() ||\n          m_this.map().transition()) {\n        // cancel if a new action was performed\n        return;\n      }\n      // Not sure the correct way to do this.  We need the delta t for the\n      // next time step...  Maybe use a better interpolator and the time\n      // parameter from requestAnimationFrame.\n      dt = Math.min(m_state.momentum.deltaTime, 30);\n\n      last = m_state.start.valueOf();\n      m_state.start = new Date();\n\n      v = modifyVelocity(m_state.momentum.velocity, m_state.start - last);\n\n      // stop panning when the speed is below the threshold\n      if (!v) {\n        clearState();\n        return;\n      }\n\n      s = calcSpeed(v);\n      if (s > m_options.momentum.maxSpeed) {\n        s = m_options.momentum.maxSpeed / s;\n        v.x = v.x * s;\n        v.y = v.y * s;\n      }\n\n      if (!isFinite(v.x) || !isFinite(v.y)) {\n        v.x = 0;\n        v.y = 0;\n      }\n      m_state.momentum.velocity.x = v.x;\n      m_state.momentum.velocity.y = v.y;\n\n      switch (m_state.origAction) {\n        case geo_action.zoom:\n          var dy = m_state.momentum.velocity.y * dt;\n          m_callZoom(-dy * m_options.zoomScale / 120, m_state);\n          break;\n        default:\n          m_this.map().pan({\n            x: m_state.momentum.velocity.x * dt,\n            y: m_state.momentum.velocity.y * dt\n          }, undefined, 'limited');\n          break;\n      }\n\n      if (m_state.handler) {\n        m_this.map().scheduleAnimationFrame(m_state.handler);\n      }\n    };\n    if (m_state.handler) {\n      m_this.map().scheduleAnimationFrame(m_state.handler);\n    }\n  };\n\n  /**\n   * Public method that unbinds all events.\n   */\n  this.destroy = function () {\n    m_this._disconnectEvents();\n    if (m_this.map()) {\n      $(m_this.map().node()).removeClass('highlight-focus');\n    }\n    m_this.map(null);\n  };\n\n  /**\n   * Get current mouse information.\n   *\n   * @returns {object} The current mouse state.\n   */\n  this.mouse = function () {\n    return $.extend(true, {}, m_mouse);\n  };\n\n  /**\n   * Get/set current keyboard information.\n   *\n   * @param {object} [newValue] Either a object with new options for the\n   *    keyboard actions or `undefined` to get the current options.\n   * @returns {object|this} Either the current keyboard options or this\n   *    mapInteractor class instance.\n   */\n  this.keyboard = function (newValue) {\n    if (newValue === undefined) {\n      return $.extend(true, {}, m_options.keyboard || {});\n    }\n    return m_this.options({keyboard: newValue});\n  };\n\n  /**\n   * Get the current interactor state.\n   *\n   * @returns {geo.interactorState}\n   */\n  this.state = function () {\n    return $.extend(true, {}, m_state);\n  };\n\n  /**\n   * Get or set the pause state of the interactor, which ignores all native\n   * mouse and keyboard events.\n   *\n   * @param {boolean} [value] The pause state to set or undefined to return\n   *    the current state.\n   * @returns {boolean|this} The current pause state or this class instance.\n   */\n  this.pause = function (value) {\n    if (value === undefined) {\n      return m_paused;\n    }\n    m_paused = !!value;\n    return m_this;\n  };\n\n  /**\n   * Add an action to the list of handled actions.\n   *\n   * @param {object} action An object defining the action.  This must have\n   *    action and input properties, and may have modifiers, name, and owner.\n   *    Use action, name, and owner to make this entry distinct if it will need\n   *    to be removed later.\n   * @param {boolean} [toEnd] The action is added at the beginning of the\n   *    actions list unless truthy.  Earlier actions prevent later actions with\n   *    similar input and modifiers.\n   */\n  this.addAction = function (action, toEnd) {\n    if (!action || !action.action || !action.input) {\n      return;\n    }\n    util.addAction(m_options.actions, action, toEnd);\n    if (m_options.map && m_options.actions.some(function (action) {\n      return action.input.right;\n    })) {\n      $node.off('contextmenu.geojs');\n      $node.on('contextmenu.geojs', function () { return false; });\n    }\n  };\n\n  /**\n   * Check if an action is in the actions list.  An action matches if the\n   * action, name, and owner match.  A null or undefined value will match all\n   * actions.  If using an action object, this is the same as passing\n   * (action.action, action.name, action.owner).\n   *\n   * @param {object|string} action Either an action object or the name of an\n   *    action.\n   * @param {string} name Optional name associated with the action.\n   * @param {string} owner Optional owner associated with the action.\n   * @returns {object|null} The first matching action or null.\n   */\n  this.hasAction = function (action, name, owner) {\n    return util.hasAction(m_options.actions, action, name, owner);\n  };\n\n  /**\n   * Remove all matching actions.  Actions are matched as with hasAction.\n   *\n   * @param {object|string} action Either an action object or the name of an\n   *    action.\n   * @param {string} name Optional name associated with the action.\n   * @param {string} owner Optional owner associated with the action.\n   * @returns {number} The number of actions that were removed.\n   */\n  this.removeAction = function (action, name, owner) {\n    var removed = util.removeAction(\n      m_options.actions, action, name, owner);\n    if (m_options.map && !m_options.actions.some(function (action) {\n      return action.input.right;\n    })) {\n      $node.off('contextmenu.geojs');\n    }\n    return removed;\n  };\n\n  /**\n   * Simulate a DOM mouse event on connected map.  Not all options are required\n   * for every event type.\n   *\n   * @param {string} type Event type `mousemove`, `mousedown`, `mouseup`, etc.\n   *    `keyboard` is treated separately from other types.\n   * @param {object} options Options for the simulated event.\n   * @param {boolean} [options.shift] A boolean if a `keyboard` event has the\n   *    shift key down or explicitly up.\n   * @param {boolean} [options.shiftKey] Alternate name to `shift`.\n   * @param {boolean} [options.ctrl] A boolean if a `keyboard` event has the\n   *    control key down or explicitly up.\n   * @param {boolean} [options.ctrlKey] Alternate name to `ctrl`.\n   * @param {boolean} [options.alt] A boolean if a `keyboard` event has the\n   *    alt key down or explicitly up.\n   * @param {boolean} [options.altKey] Alternate name to `alt`.\n   * @param {boolean} [options.meta] A boolean if a `keyboard` event has the\n   *    meta key down or explicitly up.\n   * @param {boolean} [options.metaKey] Alternate name to `meta`.\n   * @param {string} [options.keys] A Mousetrap-style key sequence string for\n   *    `keyboard` events.\n   * @param {geo.screenPosition} [options.page] The position of the event on\n   *    the window.  Overridden by `map`.\n   * @param {geo.screenPosition} [options.map] The position of the event on the\n   *    map in pixels relative to the map's div.\n   * @param {geo.screenPosition} [options.center] The position of a touch\n   *    event center relative to the window.\n   * @param {string} [button] One of `left`, `middle`, or `right` for mouse\n   *    events.\n   * @param {string} [modifiers] A space-separated list of metakeys that are\n   *    down on mouse events.\n   * @param {geo.screenPosition} [wheelDelta] The amount the wheel moved in\n   *    both directions for wheel events.  One step is often 20 units of\n   *    vement.\n   * @param {number} [wheelMode] The wheel delta mode.  See\n   *    https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent .\n   * @param {boolean} [touch] `truthy` if this is a touch event.\n   * @param {number} [rotation] Touch event rotation in degrees.\n   * @param {number} [scale] Touch event scale.  Initial events should have a\n   *    scale of 1; subsequent events should increase or decrease this to\n   *    simulate spread and pinch actions.\n   * @param {number[]} [pointers] A list of pointer numbers involved in a\n   *    touch event.  Pointers are number from one up, so `[1]` is the first\n   *    touch point, `[1, 2]` are two touch points, and `[2]` is when the first\n   *    point was released but the second is still touching.\n   * @param {string} [pointerType] `mouse` if this is a mouse action rather\n   *    than a touch action.\n   * @returns {mapInteractor}\n   */\n  this.simulateEvent = function (type, options) {\n    var evt, page, offset, which, buttons;\n\n    if (!m_this.map()) {\n      return m_this;\n    }\n\n    if (type === 'keyboard' && m_keyHandler) {\n      /* Mousetrap passes through the keys we send, but not an event object,\n       * so we construct an artificial event object as the keys, and use that.\n       */\n      var keys = {\n        shiftKey: options.shift || options.shiftKey || false,\n        ctrlKey: options.ctrl || options.ctrlKey || false,\n        altKey: options.alt || options.altKey || false,\n        metaKey: options.meta || options.metaKey || false,\n        toString: function () { return options.keys; },\n        stopPropagation: function () {},\n        preventDefault: function () {},\n        simulated: true\n      };\n      m_keyHandler.trigger(keys);\n      return;\n    }\n\n    page = options.page || {};\n\n    if (options.map) {\n      offset = $node.offset();\n      page.x = options.map.x + offset.left;\n      page.y = options.map.y + offset.top;\n    }\n\n    if (options.button === 'left') {\n      which = 1;\n      buttons = 1;\n    } else if (options.button === 'right') {\n      which = 3;\n      buttons = 2;\n    } else if (options.button === 'middle') {\n      which = 2;\n      buttons = 4;\n    }\n\n    options.modifiers = options.modifiers || [];\n    options.wheelDelta = options.wheelDelta || {};\n\n    evt = $.Event(\n      type,\n      {\n        pageX: page.x,\n        pageY: page.y,\n        which: which,\n        buttons: buttons,\n        altKey: options.modifiers.indexOf('alt') >= 0,\n        ctrlKey: options.modifiers.indexOf('ctrl') >= 0,\n        metaKey: options.modifiers.indexOf('meta') >= 0,\n        shiftKey: options.modifiers.indexOf('shift') >= 0,\n        center: options.center,\n        rotation: options.touch ? options.rotation || 0 : options.rotation,\n        scale: options.touch ? options.scale || 1 : options.scale,\n        pointers: options.pointers,\n        pointerType: options.pointerType,\n\n        originalEvent: {\n          deltaX: options.wheelDelta.x,\n          deltaY: options.wheelDelta.y,\n          deltaMode: options.wheelMode,\n          preventDefault: function () {},\n          stopPropagation: function () {},\n          stopImmediatePropagation: function () {}\n        }\n      }\n    );\n    if (options.touch && m_touchHandler) {\n      m_this._handleTouch(evt);\n    } else {\n      $node.trigger(evt);\n    }\n    if (type.indexOf('.geojs') >= 0) {\n      $(document).trigger(evt);\n    }\n  };\n  this._connectEvents();\n  return this;\n};\n\ninherit(mapInteractor, object);\nmodule.exports = mapInteractor;\n\n\n\n// WEBPACK FOOTER //\n// ./mapInteractor.js","var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz',\n    strLength = 8;\n\n/**\n * Get a random string to use as a div ID.\n *\n * @alias geo.d3.uniqueID\n * @returns {string} A random ID string.\n */\nvar uniqueID = function () {\n  var strArray = [],\n      i;\n  strArray.length = strLength;\n  for (i = 0; i < strLength; i += 1) {\n    strArray[i] = chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return strArray.join('');\n};\n\nmodule.exports = uniqueID;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/uniqueID.js","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Mesh feature specification.\n *\n * @typedef {geo.feature.spec} geo.meshFeature.spec\n * @property {object[]} [data=[]] An array of arbitrary objects used to\n *    construct the feature.\n * @property {geo.feature.styleSpec} [style] An object that contains style\n *    values for the feature.\n * @property {geo.meshFeature.meshSpec} [mesh] The mesh specification for the\n *    feature.\n */\n\n/**\n * A mesh formed by a set of triangular or square elements or a\n * squarely-connected grid that is of rectangular extent.  The gird can be\n * regularly spaced or have arbitrary position coordinates for each node.  All\n * of these properties can be functions, which get passed `data`.\n *\n * @typedef {object} geo.meshFeature.meshSpec\n * @property {number[]|array.<number[]>} [elements] If specified, a list of\n *      indices into the data array that form elements.  If this is an array of\n *      arrays, each subarray must have at least either 3 values for triangular\n *      elements or 4 values for square elements.  If this is a single array,\n *      the data indices are of all elements are packed one after another and\n *      the `elementPacking` property is used to determine element shape.  If\n *      this `null` or `undefined`, a rectangular grid of squares is used based\n *      on `gridWidth` and `gridHeight` or an implicit version of those\n *      parameters.\n * @property {string} [elementPacking='auto'] If `elements` is provided as a\n *      single array, this determines the shape of the elements.  It is one of\n *      `auto`, `triangle`, or `square`.  `triangle` uses triplets of values to\n *      define elements.  `square` uses quads of values.  `auto` is identical\n *      to `triangle` unless `elements`'s length is a multiple of 4 and *not* a\n *      multiple of 3, in which case it is the same as `square`.\n * @property {number} [gridWidth] The number of data columns in the grid.  If\n *      this is not specified and `gridHeight` is given, this is the number of\n *      data elements divided by `gridHeight`.  If neither `gridWidth` nor\n *      `gridHeight` are specified, the squareroot of the number of data\n *      elements is used.  If both are specified, some data could be unused.\n *      Ignored if `elements` is used.\n * @property {number} [gridHeight] The number of data rows in the grid.  If\n *      this is not specified and `gridWidth` is given, this is the number of\n *      data elements divided by `gridWidth`.  If neither `gridWidth` not\n *      `gridHeight` are specified, the squareroot of the number of data\n *      elements is used.  If both are specified, some data could be unused.\n *      Ignored if `elements` is used.\n * @property {number} [x0] The x coordinate of the 0th data point.  If `null`\n *      or `undefined`, the coordinate is taken from the `position` style.\n *      Ignored if `elements` is used.\n * @property {number} [y0] The y coordinate of the 0th data point.  If `null`\n *      or `undefined`, the coordinate is taken from the `position` style.\n *      Ignored if `elements` is used.\n * @property {number} [dx] The distance in the x direction between the 0th and\n *      1st data point.  This may be positive or negative.  If 0, `null`, or\n *      `undefined`, the coordinate is taken from the `position` style.\n *      Ignored if `elements` is used.\n * @property {number} [dy] The distance in the y direction between the 0th and\n *      `gridWidth`th data point.  This may be positive or negative.  If 0,\n *      `null`, or `undefined`, the coordinate is taken from the `position`\n *      style.  Ignored if `elements` is used.\n * @property {boolean} [wrapLongitude=true] If truthy and `position` is not\n *      used (`elements` is not used and `x0`, `y0`, `dx`, and `dy` are all set\n *      appropriately), assume the x coordinates are longitude and should be\n *      adjusted to be within -180 to 180.  If the data spans 180 degrees, the\n *      points or squares that straddle the meridian will be duplicated to\n *      ensure that the map is covered from -180 to 180 as appropriate.  Set\n *      this to `false` if using a non-longitude x coordinate.\n */\n\n/**\n * A set of elements and their associated positions for a mesh.\n *\n * @typedef {object} geo.meshFeature.meshInfo\n * @property {string} shape One of `'triangle'` or `'square'`.  If `square`,\n *      each pair of elements is one square.  These elements have vertices v00,\n *      v01, v02, v10, v11, v12.  The square is formed via v00-v01-v10-v11-v00.\n *      For `triangle`, each element stands alone.\n * @property {number[]} elements A packed array of indices into the `pos` array\n *      defining the elements.  Each sequential three values forms a triangle.\n * @property {number[]} index An array that references which data index is\n *      associated with each vertex.\n * @property {number[]} pos A packed array of coordinates in the interface gcs\n *      for the vertices.  This is in the order x0, y0, z0, x1, y1, z2, x2, ...\n * @property {number} numberVertices the number of vertices in the mesh.\n * @property {number} numberElementsthe number of elements (squares or\n *      triangles) in the mesh.\n * @property {number} verticesPerElement 3 for triangles, 6 for squares.\n */\n\n/**\n * Create a new instance of class meshFeature.  This should be the parent of a\n * more useable feature class.\n *\n * @class\n * @alias geo.meshFeature\n * @extends geo.feature\n *\n * @param {geo.meshFeature.spec} arg\n * @returns {this}\n */\nvar meshFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof meshFeature)) {\n    return new meshFeature(arg);\n  }\n\n  var $ = require('jquery');\n  var util = require('./util');\n\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var m_this = this,\n      s_init = this._init,\n      m_mesh = {};\n\n  /**\n   * Get/Set mesh accessor.\n   *\n   * @param {string|geo.meshFeature.meshSpec} [specOrProperty] If `undefined`,\n   *    return the current mesh specification.  If a string is specified,\n   *    either get or set the named mesh property.  If an object is given, set\n   *    or update the specification with the specified parameters.\n   * @param {object} [value] If `specOrProperty` is a string, set that property\n   *    to `value`.  If `undefined`, return the current value of the named\n   *    property.\n   * @returns {geo.meshFeature.meshSpec|object|this} The current mesh\n   *    specification, the value of a named mesh property, or this mesh object.\n   */\n  this.mesh = function (specOrProperty, value) {\n    if (specOrProperty === undefined) {\n      return m_mesh;\n    }\n    if (typeof specOrProperty === 'string' && value === undefined) {\n      return m_mesh[specOrProperty];\n    }\n    if (value === undefined) {\n      var mesh = $.extend(\n        {},\n        {\n          gridWidth: function () {\n            if (specOrProperty.gridHeight) {\n              return Math.floor(m_this.data().length / specOrProperty.gridHeight);\n            }\n            return Math.floor(Math.sqrt(m_this.data().length));\n          },\n          gridHeight: function () {\n            if (specOrProperty.gridWidth) {\n              return Math.floor(m_this.data().length / specOrProperty.gridWidth);\n            }\n            return Math.floor(Math.sqrt(m_this.data().length));\n          }\n        },\n        m_mesh,\n        specOrProperty\n      );\n      m_mesh = mesh;\n    } else {\n      m_mesh[specOrProperty] = value;\n    }\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * A uniform getter that always returns a function even for constant values.\n   * If undefined input, return all the mesh values as an object.\n   *\n   * @function mesh_DOT_get\n   * @memberof geo.meshFeature\n   * @instance\n   * @param {string|undefined} key The name of the mesh key or `undefined` to\n   *    return an object with all keys as functions.\n   * @returns {object|function} A function related to the key, or an object\n   *    with all mesh keys, each of which is a function.\n   */\n  this.mesh.get = function (key) {\n    if (key === undefined) {\n      var all = {}, k;\n      for (k in m_mesh) {\n        if (m_mesh.hasOwnProperty(k)) {\n          all[k] = m_this.mesh.get(k);\n        }\n      }\n      return all;\n    }\n    return util.ensureFunction(m_mesh[key]);\n  };\n\n  /**\n   * Get/Set position accessor.  This is identical to getting or setting the\n   * `position` style.\n   *\n   * @param {array|function} [val] If specified, set the position style.  If\n   *    `undefined`, return the current value.\n   * @returns {array|function|this} Either the position style or this.\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else {\n      m_this.style('position', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Create a set of vertices and elements from a mesh specification.\n   *\n   * This currently takes a set of `vertexValueFuncs` to detemrine which\n   * vertices are used (shown) and values at those vertices.  It could be\n   * extended with `elementValueFuncs`.\n   *\n   * @param {object} [vertexValueFuncs] A dictionary where the keys are the\n   *    names of properties to include in the results and the values are\n   *    functions that are evaluated at each vertex with the arguments\n   *    `(data[idx], idx, position)`.  If a key is named `used`, then its\n   *    function is passed `(data[idx], idx)` and if it returns a falsy value\n   *    for a data point, the vertex associated with that data point is removed\n   *    from the resultant mesh.\n   * @returns {geo.meshFeature.meshInfo} An object with the mesh information.\n   */\n  this._createMesh = function (vertexValueFuncs) {\n    vertexValueFuncs = vertexValueFuncs || {};\n    var i, i3, j, k, idx, numPts, usedPts, usePos, item, key,\n        data = m_this.data(),\n        posFunc = m_this.position(), posVal,\n        elements = m_this.mesh.get('elements')(data),\n        elementPacking = m_this.mesh.get('elementPacking')(data),\n        gridW = m_this.mesh.get('gridWidth')(data),\n        gridH = m_this.mesh.get('gridHeight')(data),\n        wrapLongitude = m_this.mesh.get('wrapLongitude')(data),\n        x0 = m_this.mesh.get('x0')(data),\n        y0 = m_this.mesh.get('y0')(data),\n        dx = m_this.mesh.get('dx')(data),\n        dy = m_this.mesh.get('dy')(data),\n        calcX, skipColumn, x, origI, /* used for wrapping */\n        gridWorig = gridW,  /* can be different when wrapping */\n        result = {\n          shape: 'square',\n          elements: []\n        };\n    /* If we are using a grid, calculate the elements and positions. */\n    if (!elements) {\n      if (gridW * gridH > data.length) {\n        gridH = Math.floor(data.length / gridW);\n      }\n      /* If we are not using the position values (we are using x0, y0, dx, dy),\n       * and wrapLongitude is turned on, and the position spans 180 degrees,\n       * duplicate one or two columns of points at opposite ends of the map. */\n      usePos = (x0 === null || x0 === undefined || y0 === null ||\n          y0 === undefined || !dx || !dy);\n      wrapLongitude = !!(wrapLongitude === undefined || wrapLongitude);\n      if (!usePos && wrapLongitude && (x0 < -180 || x0 > 180 ||\n          x0 + dx * (gridW - 1) < -180 || x0 + dx * (gridW - 1) > 180) &&\n          dx > -180 && dx < 180 && dx * (gridW - 1) < 360 + 1e-4) {\n        calcX = [];\n        for (i = 0; i < gridW; i += 1) {\n          x = x0 + i * dx;\n          while (x < -180) { x += 360; }\n          while (x > 180) { x -= 360; }\n          if (i && Math.abs(x - calcX[calcX.length - 1]) > 180) {\n            if (x > calcX[calcX.length - 1]) {\n              calcX.push(x - 360);\n              calcX.push(calcX[calcX.length - 2] + 360);\n            } else {\n              calcX.push(x + 360);\n              calcX.push(calcX[calcX.length - 2] - 360);\n            }\n            skipColumn = i;\n          }\n          calcX.push(x);\n        }\n        gridW += 2;\n        if (Math.abs(Math.abs(gridWorig * dx) - 360) < 0.01) {\n          gridW += 1;\n          x = x0 + gridWorig * dx;\n          while (x < -180) { x += 360; }\n          while (x > 180) { x -= 360; }\n          calcX.push(x);\n        }\n      }\n      /* Calculate the value for point */\n      numPts = gridW * gridH;\n      if (skipColumn !== undefined) {\n        result.index = new Array(numPts);\n        for (i = 0; i < numPts; i += 1) {\n          j = Math.floor(i / gridW);\n          origI = i - j * gridW;\n          origI += (origI > skipColumn ? -2 : 0);\n          if (origI >= gridWorig) {\n            origI -= gridWorig;\n          }\n          origI += j * gridWorig;\n          result.index[i] = origI;\n        }\n      }\n      /* Create triangles */\n      for (j = idx = 0; j < gridH - 1; j += 1, idx += 1) {\n        for (i = 0; i < gridW - 1; i += 1, idx += 1) {\n          if (i !== skipColumn) {\n            result.elements.push(idx);\n            result.elements.push(idx + 1);\n            result.elements.push(idx + gridW);\n            result.elements.push(idx + gridW + 1);\n            result.elements.push(idx + gridW);\n            result.elements.push(idx + 1);\n          }\n        }\n      }\n    } else {\n      /* use defined elements */\n      var hasSubArray = elements.length && Array.isArray(elements[0]);\n      if (elementPacking === 'square' || (elementPacking !== 'triangle' &&\n          ((!hasSubArray && !(elements.length % 4) && (elements.length % 3)) ||\n          (hasSubArray && elements[0].length === 4)))) {\n        result.shape = 'square';\n        if (hasSubArray) {\n          for (i = 0; i < elements.length; i += 1) {\n            result.elements.push(elements[i][0]);\n            result.elements.push(elements[i][1]);\n            result.elements.push(elements[i][3]);\n            result.elements.push(elements[i][2]);\n            result.elements.push(elements[i][3]);\n            result.elements.push(elements[i][1]);\n          }\n        } else {\n          for (i = 0; i < elements.length - 3; i += 4) {\n            result.elements.push(elements[i]);\n            result.elements.push(elements[i + 1]);\n            result.elements.push(elements[i + 3]);\n            result.elements.push(elements[i + 2]);\n            result.elements.push(elements[i + 3]);\n            result.elements.push(elements[i + 1]);\n          }\n        }\n      } else {\n        result.shape = 'triangle';\n        if (hasSubArray) {\n          for (i = 0; i < elements.length; i += 1) {\n            result.elements.push(elements[i][0]);\n            result.elements.push(elements[i][1]);\n            result.elements.push(elements[i][2]);\n          }\n        } else {\n          result.elements = elements.slice(0, elements.length - (elements.length % 3));\n        }\n      }\n      numPts = data.length;\n      usePos = true;\n    }\n    result.verticesPerElement = result.shape === 'triangle' ? 3 : 6;\n    /* If we have a `vertexValueFuncs.used` function, remove any unused\n     * vertices.  Then, remove any elements that have a vertex that can't be\n     * used.  This could leave vertices that are unused by any element, but\n     * removing those is expensive so it is not done. */\n    if (vertexValueFuncs.used) {\n      for (i = 0; i < numPts; i += 1) {\n        idx = result.index ? result.index[i] : i;\n        if (!vertexValueFuncs.used(data[idx], idx)) {\n          break;\n        }\n      }\n      if (i !== numPts) {\n        usedPts = i;\n        var remap = new Array(numPts),\n            vpe = result.verticesPerElement;\n        for (j = 0; j < usedPts; j += 1) {\n          remap[j] = j;\n        }\n        remap[usedPts] = -1;\n        if (!result.index) {\n          result.index = new Array(data.length);\n          for (j = 0; j < data.length; j += 1) {\n            result.index[j] = j;\n          }\n        }\n        for (i = usedPts + 1; i < numPts; i += 1) {\n          idx = result.index[i];\n          if (vertexValueFuncs.used(data[idx], idx)) {\n            remap[i] = usedPts;\n            result.index[usedPts] = result.index[i];\n            usedPts += 1;\n          } else {\n            remap[i] = -1;\n          }\n        }\n        result.index.splice(usedPts);\n        for (i = k = 0; i < result.elements.length; i += vpe) {\n          for (j = 0; j < vpe; j += 1) {\n            if (remap[result.elements[i + j]] < 0) {\n              break;\n            }\n            result.elements[k + j] = remap[result.elements[i + j]];\n          }\n          if (j === vpe) {\n            k += vpe;\n          }\n        }\n        result.elements.splice(k);\n        numPts = usedPts;\n      }\n    }\n    /* Get point locations and store them in a packed array */\n    result.pos = new Array(numPts * 3);\n    for (key in vertexValueFuncs) {\n      if (key !== 'used' && vertexValueFuncs.hasOwnProperty(key)) {\n        result[key] = new Array(numPts);\n      }\n    }\n    for (i = i3 = 0; i < numPts; i += 1, i3 += 3) {\n      idx = result.index ? result.index[i] : i;\n      item = data[idx];\n      if (usePos) {\n        posVal = posFunc(item, idx);\n        result.pos[i3] = posVal.x;\n        result.pos[i3 + 1] = posVal.y;\n        result.pos[i3 + 2] = posVal.z || 0;\n      } else {\n        if (skipColumn === undefined) {\n          result.pos[i3] = x0 + dx * (idx % gridW);\n        } else {\n          result.pos[i3] = calcX[i % gridW];\n        }\n        result.pos[i3 + 1] = y0 + dy * Math.floor(idx / gridW);\n        result.pos[i3 + 2] = 0;\n        posVal = {x: result.pos[i3], y: result.pos[i3 + 1], z: result.pos[i3 + 2]};\n      }\n      for (key in vertexValueFuncs) {\n        if (key !== 'used' && vertexValueFuncs.hasOwnProperty(key)) {\n          result[key][i] = vertexValueFuncs[key](item, idx, posVal);\n        }\n      }\n    }\n    result.numVertices = numPts;\n    result.numElements = result.elements.length / result.verticesPerElement;\n    return result;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.meshFeature.spec} arg The mesh feature specification.\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    /* Initialize from arguments */\n    arg = arg || {};\n    var style = $.extend({}, {\n      position: function (d) {\n        /* We could construct a new object and return\n         *  {x: d.x, y: d.y, z: d.z};\n         * but that isn't necessary. */\n        return d;\n      }\n    }, arg.style || {});\n\n    this.mesh(arg.mesh || {});\n    this.style(style);\n  };\n\n  return this;\n};\n\ninherit(meshFeature, feature);\n\nmodule.exports = meshFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./meshFeature.js","var $ = require('jquery');\n\n/**\n * This class defines the raw interface for a \"tile\" on a map.  A tile is\n * defined as a rectangular section of a map.  The base implementation\n * is independent of the actual content of the tile, but assumes that\n * the content is loaded asynchronously via a url.  The tile object\n * has a promise-like interface.\n * @example\n * tile.then(function (data) {...}).catch(function (data) {...});\n *\n * @class\n * @alias geo.tile\n * @param {object} spec The tile specification.\n *\n * @param {object} spec.index The global position of the tile.\n * @param {number} spec.index.x The x-coordinate (usually the column number).\n * @param {number} spec.index.y The y-coordinate (usually the row number).\n *\n * @param {object} spec.size The size of each tile.\n * @param {number} spec.size.x Width (usually in pixels).\n * @param {number} spec.size.y Height (usually in pixels).\n *\n * @param {object|string} spec.url A url or jQuery ajax config object.\n *\n * @param {object?} spec.overlap The size of overlap with neighboring tiles.\n * @param {number} [spec.overlap.x=0]\n * @param {number} [spec.overlap.y=0]\n * @returns {geo.tile}\n */\nvar tile = function (spec) {\n  if (!(this instanceof tile)) {\n    return new tile(spec);\n  }\n\n  this._index = spec.index;\n  this._size = spec.size;\n  this._overlap = spec.overlap || {x: 0, y: 0};\n  this._wrap = spec.wrap || {x: 1, y: 1};\n  this._url = spec.url;\n  this._fetched = false;\n  this._queue = spec.queue || null;\n\n  /**\n   * Return the index coordinates.  Read only.\n   *\n   * @property {object} index The tile index.\n   * @property {number} index.x The tile x index.\n   * @property {number} index.y The tile y index.\n   * @name geo.tile#index\n   */\n  Object.defineProperty(this, 'index', {\n    get:\n      function () { return this._index; }\n  });\n\n  /**\n   * Return the tile size.  Read only.\n   *\n   * @property {object} size The tile size.\n   * @property {number} size.x The tile width.\n   * @property {number} size.y The tile height.\n   * @name geo.tile#size\n   */\n  Object.defineProperty(this, 'size', {\n    get: function () { return this._size; }\n  });\n\n  /**\n   * Return the tile overlap.  Read only.\n   *\n   * @property {object} overlap The tile overlap.\n   * @property {number} overlap.x The tile x overlap.\n   * @property {number} overlap.y The tile y overlap.\n   * @name geo.tile#overlap\n   */\n  Object.defineProperty(this, 'overlap', {\n    get: function () { return this._overlap; }\n  });\n\n  /**\n   * Initiate the ajax request and add a promise interface to the tile\n   * object.  This method exists to allow derived classes the ability to\n   * override how the tile is obtained.  For example, imageTile uses an\n   * Image element rather than $.get.\n   *\n   * @returns {this}\n   */\n  this.fetch = function () {\n    if (!this._fetched) {\n      $.get(this._url).done(function () {\n        this._fetched = true;\n      }.bind(this)).promise(this);\n    }\n    return this;\n  };\n\n  /**\n   * Return whether this tile has been fetched already.\n   *\n   * @returns {boolean} True if the tile has been fetched.\n   */\n  this.fetched = function () {\n    return this._fetched;\n  };\n\n  /**\n   * Add a method to be called with the data when the ajax request is\n   * successfully resolved.\n   *\n   * @param {function?} onSuccess The success handler.\n   * @param {function?} onFailure The failure handler.\n   * @returns {this}\n   */\n  this.then = function (onSuccess, onFailure) {\n    // both fetch and _queueAdd can replace the current then method\n    if (!this.fetched() && this._queue && this._queue.add && (!this.state ||\n        this.state() === 'pending')) {\n      this._queue.add(this, this.fetch);\n    } else {\n      this.fetch();\n    }\n    // Call then on the new promise\n    if (this.done && this.fail) {\n      this.done(onSuccess).fail(onFailure);\n    } else {\n      this.then(onSuccess, onFailure);\n    }\n    return this;\n  };\n\n  /**\n   * Add a method to be called with the data when the ajax fails.\n   *\n   * @param {function} method The rejection handler.\n   * @returns {this}\n   */\n  this.catch = function (method) {\n    this.then(undefined, method);\n    return this;\n  };\n\n  /**\n   * Return a unique string representation of the given tile useable as a\n   * hash key.  Possibly extend later to include url information to make\n   * caches aware of the tile source.\n   *\n   * @returns {string}\n   */\n  this.toString = function () {\n    return [this._index.level || 0, this._index.y, this._index.x].join('_');\n  };\n\n  /**\n   * Return the bounds of the tile given an index offset and a translation.\n   *\n   * @param {object} index The tile index containing (0, 0).\n   * @param {object} shift The coordinates of (0, 0) inside the tile.\n   * @returns {object} An object with `left`, `top`, `right`, `bottom`.\n   */\n  this.bounds = function (index, shift) {\n    var left, right, bottom, top;\n    left = this.size.x * (this.index.x - index.x) - this.overlap.x - shift.x;\n    right = left + this.size.x + this.overlap.x * 2;\n    top = this.size.y * (this.index.y - index.y) - this.overlap.y - shift.y;\n    bottom = top + this.size.y + this.overlap.y * 2;\n    return {\n      left: left,\n      right: right,\n      bottom: bottom,\n      top: top\n    };\n  };\n\n  /**\n   * Computes the global coordinates of the bottom edge.\n   * @property {number} bottom The global coordinates of the bottom edge.\n   * @name geo.tile#bottom\n   */\n  Object.defineProperty(this, 'bottom', {\n    get: function () {\n      return this.size.y * (this.index.y + 1) + this.overlap.y;\n    }\n  });\n\n  /**\n   * Computes the global coordinates of the top edge.\n   * @property {number} top The global coordinates of the top edge.\n   * @name geo.tile#top\n   */\n  Object.defineProperty(this, 'top', {\n    get: function () {\n      return this.size.y * this.index.y - this.overlap.y;\n    }\n  });\n\n  /**\n   * Computes the global coordinates of the left edge.\n   * @property {number} left The global coordinates of the left edge.\n   * @name geo.tile#left\n   */\n  Object.defineProperty(this, 'left', {\n    get: function () {\n      return this.size.x * this.index.x - this.overlap.x;\n    }\n  });\n\n  /**\n   * Computes the global coordinates of the right edge.\n   * @property {number} right The global coordinates of the right edge.\n   * @name geo.tile#right\n   */\n  Object.defineProperty(this, 'right', {\n    get: function () {\n      return this.size.x * (this.index.x + 1) + this.overlap.x;\n    }\n  });\n\n  /**\n   * Set the opacity of the tile to 0 and gradually fade in over the given\n   * number of milliseconds.  This is just a delay.\n   *\n   * @param {number} duration The duration of the animation in ms.\n   * @returns {this}\n   */\n  this.fadeIn = function (duration) {\n    $.noop(duration);\n    return this;\n  };\n};\n\nmodule.exports = tile;\n\n\n\n// WEBPACK FOOTER //\n// ./tile.js","var inherit = require('./inherit');\nvar meshFeature = require('./meshFeature');\nvar registry = require('./registry');\nvar util = require('./util');\n\n/**\n * Isoline feature specification.\n *\n * @typedef {geo.feature.spec} geo.isolineFeature.spec\n * @property {object[]} [data=[]] An array of arbitrary objects used to\n *    construct the feature.\n * @property {geo.isolineFeature.styleSpec} [style] An object that contains\n *    style values for the feature.\n * @property {geo.isolineFeature.isolineSpec} [isoline] The isoline\n *    specification for the feature.\n */\n\n/**\n * Style specification for an isoline feature.  Extends\n * {@link geo.lineFeasture.styleSpec} and {@link geo.textFeasture.styleSpec}.\n *\n * @typedef {geo.feature.styleSpec} geo.isolineFeature.styleSpec\n * @extends geo.feature.styleSpec\n * @extends geo.textFeature.styleSpec\n * @extends geo.lineFeature.styleSpec\n * @property {geo.geoPosition|function} [position=data] The position of each\n *    data element.  This defaults to just using `x`, `y`, and `z` properties\n *    of the data element itself.  The position is in the feature's gcs\n *    coordinates.\n * @property {number|function} [value=data.z] The value of each data element.\n *    This defaults to the `z` property of the data elements.  If the value of\n *    a grid point is `null` or `undefined`, the point and elements that use\n *    that point won't be included in the results.\n * @property {geo.geoColor|function} [strokeColor='black'] Color to stroke each\n *    line.\n * @property {number|function} [strokeWidth] The weight of the line stroke in\n *    pixels.  This defaults to the line value's level + 0.5.\n * @property {boolean|function} [rotateWithMap=true] Rotate label text when the\n *    map rotates.\n * @property {number|function} [rotation] Text rotation in radians.  This\n *    defaults to the label oriented so that top of the text is toward the\n *    higher value.  There is a utility function that can be used for common\n *    rotation preferences.  See {@link geo.isolineFeature#rotationFunction}.\n *    For instance, `rotation=geo.isolineFeature.rotationFunction('map')`.\n * @property {string|function} [fontSize='12px'] The font size.\n * @property {geo.geoColor|function} [textStrokeColor='white'] Text\n *    stroke color.  This adds contrast between the label and the isoline.\n * @property {geo.geoColor|function} [textStrokeWidth=2] Text stroke width in\n *    pixels.\n */\n\n/**\n * Isoline specification.  All of these properties can be functions, which get\n * passed the {@link geo.meshFeature.meshInfo} object.\n *\n * @typedef {geo.meshFeature.meshSpec} geo.isolineFeature.isolineSpec\n * @property {number} [min] Minimum isoline value.  If unspecified, taken from\n *    the computed minimum of the `value` style.\n * @property {number} [max] Maximum isoline value.  If unspecified, taken from\n *    the computed maximum of the `value` style.\n * @property {number} [count=15] Approximate number of isolines shown through\n *    the value range.  Used if `spacing` or `values` is not specified.\n * @property {boolean} [autofit=true] If `count` is used to determine the\n *    isolines, and this is truthy, the isoline values will be round numbers.\n *    If falsy, they will include the exact minimum and maximum values.\n * @property {number} [spacing] Distance in value units between isolines.\n *    Used if specified and `values` is not specified.\n * @property {number[]|geo.isolineFeature.valueEntry[]} [values] An array of\n *    explicit values for isolines.\n * @property {number[]} [levels=[5, 5]] If `values` is not used to explicitly\n *    set isoline levels, this determines the spacing of levels which can be\n *    used to style lines distinctly.  Most isolines will be level 0.  If\n *    `levels` is an array of [`n0`, `n1`, ...], every `n0`th line will be\n *    level 1, every `n0 * n1`th line will be level 2, etc.\n * @property {boolean|function} [label] Truthy if a label should be shown for a\n *    isoline value.  If a function, this is called with\n *    `(geo.isolineFeature.valueEntry, index)`.  This defaults to\n *    `valueEntry.level >= 1`.\n * @property {string|function} [labelText] Text for a label.  If a function,\n *    this is called with `(geo.isolineFeature.valueEntry, index)`.  This\n *    defaults to `valueEntry.value`.\n * @property {number|function} [labelSpacing=200] Minimum distance between\n *    labels on an isoline in screen pixels.  If a function, this is called\n *    with `(geo.isolineFeature.valueEntry, index)`.\n * @property {number|function} [labelOffset=0] Offset for labels along an\n *    isoline relative to where they would be placed by default on a scale of\n *    [-0.5, 0.5].  +/- 1 would move the text to the next repeated occurance of\n *    the label.  If a function, this is called with\n *    `(geo.isolineFeature.valueEntry, index)`.\n * @property {number|function} [labelViewport=10000] If the main position of a\n *    label would be further than this many pixels from the current viewport,\n *    don't create it.  This prevents creating an excessive number of labels\n *    when zoomed in, but requires regenerating labels occasionally when\n *    panning.  If <= 0, all labels are generated regardless of location.\n * @property {boolean|function} [labelAutoUpdate=true] If truthy, when the map\n *    is panned (including zoom, rotation, etc.), periodically regenerate\n *    labels.  This uses an internal function that has a threshold based on a\n *    fixed change in zoom, size, and other parameters.  Set `labelAutoUpdate`\n *    to `false` and handle the {@link geo.event.pan} elsewhere.\n */\n\n/**\n * Isoline value entry.\n *\n * @typedef {object} geo.isolineFeature.valueEntry\n * @property {number} value The value of the isoline.\n * @property {number} level The level of the isoline.\n * @property {number} [position] An index of the position of the isoline.  For\n *   evenly spaced or autofit values, this is the value modulo the spacing.\n *   Otherwise, this is the index position within the list of values.  This is\n *   computed when calculating isolines.\n * @property {string} [label] The label to display on this value.  This is\n *   computed from the `label` and `labelText` styles when calculating\n *   isolines.\n */\n\n/**\n * Computed isoline information.\n *\n * @typedef {object} geo.isolineFeature.isolineInfo\n * @property {geo.isolineFeature.valueEntry[]} values The values used to\n *    produce the isolines.\n * @property {geo.meshFeature.meshInfo} mesh The normalized mesh.\n * @property {array[]} lines An array of arrays.  Each entry is a list of\n *    vertices that also have a `value` property with the appropriate entry in\n *    `values`.  If the line should show a label, it will  also have a `label`\n *    property with the text of the label.\n * @property {boolean} hasLabels `true` if there are any lines that have\n *    labels that need to be shown if there is enough resolution.\n */\n\n/* This includes both the marching triangles and marching squares conditions.\n * The triangle pattern has three values, where 0 is less below the threshold\n * and 1 is above it.  The square pattern has four values in the order\n * ul-ur-ll-lr.  For each line a pattern produces, the line is created with a\n * low and high vertex from each of two edges.  Additionally, the create line\n * is such that the low value is outside of a clockwise winding.\n *\n * Performance note: Initially this table used string keys (e.g., '0001'), but\n * the string lookup was vastly slower than an integer lookup.\n */\nvar patternLineTable = {\n  /* triangles with one high vertex */\n  17 /* 001 */: [{l0: 1, h0: 2, l1: 0, h1: 2}],\n  18 /* 010 */: [{l0: 0, h0: 1, l1: 2, h1: 1}],\n  20 /* 100 */: [{l0: 2, h0: 0, l1: 1, h1: 0}],\n  /* triangles with one low vertex */\n  22 /* 110 */: [{l0: 2, h0: 0, l1: 2, h1: 1}],\n  21 /* 101 */: [{l0: 1, h0: 2, l1: 1, h1: 0}],\n  19 /* 011 */: [{l0: 0, h0: 1, l1: 0, h1: 2}],\n  /* squares with one high vertex */\n  1  /* 0001 */: [{l0: 2, h0: 3, l1: 1, h1: 3}],\n  2  /* 0010 */: [{l0: 0, h0: 2, l1: 3, h1: 2}],\n  4  /* 0100 */: [{l0: 3, h0: 1, l1: 0, h1: 1}],\n  8  /* 1000 */: [{l0: 1, h0: 0, l1: 2, h1: 0}],\n  /* squares with one low vertex */\n  14 /* 1110 */: [{l0: 3, h0: 1, l1: 3, h1: 2}],\n  13 /* 1101 */: [{l0: 2, h0: 3, l1: 2, h1: 0}],\n  11 /* 1011 */: [{l0: 1, h0: 0, l1: 1, h1: 3}],\n  7  /* 0111 */: [{l0: 0, h0: 2, l1: 0, h1: 1}],\n  /* squares with two low vertices sharing a side */\n  3  /* 0011 */: [{l0: 0, h0: 2, l1: 1, h1: 3}],\n  10 /* 1010 */: [{l0: 1, h0: 0, l1: 3, h1: 2}],\n  12 /* 1100 */: [{l0: 3, h0: 1, l1: 2, h1: 0}],\n  5  /* 0101 */: [{l0: 2, h0: 3, l1: 0, h1: 1}],\n  /* squares with two low vertices on opposite corners.  These could generate\n   * a different pair of lines each. */\n  6  /* 0110 */: [{l0: 0, h0: 2, l1: 0, h1: 1}, {l0: 3, h0: 1, l1: 3, h1: 2}],\n  9  /* 1001 */: [{l0: 1, h0: 0, l1: 1, h1: 3}, {l0: 2, h0: 3, l1: 2, h1: 0}]\n};\n\n/**\n * Create a new instance of class isolineFeature.\n *\n * @class\n * @alias geo.isolineFeature\n * @extends geo.meshFeature\n *\n * @borrows geo.isolineFeature#mesh as geo.isolineFeature#contour\n * @borrows geo.isolineFeature#mesh as geo.isolineFeature#isoline\n *\n * @param {geo.isolineFeature.spec} arg\n * @returns {geo.isolineFeature}\n */\nvar isolineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof isolineFeature)) {\n    return new isolineFeature(arg);\n  }\n\n  var $ = require('jquery');\n  var transform = require('./transform');\n  var geo_event = require('./event');\n  var textFeature = require('./textFeature');\n\n  arg = arg || {};\n  meshFeature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_isolines,\n      m_lastLabelPositions,\n      m_lineFeature,\n      m_labelLayer,\n      m_labelFeature,\n      s_draw = this.draw,\n      s_exit = this._exit,\n      s_init = this._init,\n      s_modified = this.modified,\n      s_update = this._update;\n\n  this.contour = m_this.mesh;\n  this.isoline = m_this.mesh;\n\n  /**\n   * Create a set of isolines.  This is a set of lines that could be used for a\n   * line feature and to inform a text feature.\n   *\n   * @returns {geo.isolineFeature.isolineInfo} An object with the isoline\n   *    information.\n   */\n  this._createIsolines = function () {\n    var valueFunc = m_this.style.get('value'),\n        usedFunc = m_this.style('used') !== undefined ?\n          m_this.style.get('used') :\n          function (d, i) { return util.isNonNullFinite(valueFunc(d, i)); },\n        values,\n        hasLabels = false,\n        lines = [];\n    var mesh = this._createMesh({\n      used: usedFunc,\n      value: valueFunc\n    });\n    values = this._getValueList(mesh);\n    if (!values.length) {\n      return {};\n    }\n    values.forEach(function (value) {\n      var valueLines = m_this._isolinesForValue(mesh, value);\n      if (valueLines.length) {\n        lines = lines.concat(valueLines);\n        hasLabels = hasLabels || !!value.label;\n      }\n    });\n    /* We may want to rdpSimplify the result to remove very small segments, but\n     * if we do, it must NOT change the winding direction. */\n    return {\n      lines: lines,\n      mesh: mesh,\n      values: values,\n      hasLabels: hasLabels\n    };\n  };\n\n  /**\n   * Generate an array of values for which isolines will be generated.\n   *\n   * @param {geo.meshFeature.meshInfo} mesh The normalized mesh.\n   * @returns {geo.isolineFeature.valueEntry[]} The values in ascending order.\n   */\n  this._getValueList = function (mesh) {\n    var isoline = m_this.isoline,\n        values = isoline.get('values')(mesh),\n        spacing = isoline.get('spacing')(mesh),\n        count = isoline.get('count')(mesh),\n        autofit = isoline.get('autofit')(mesh),\n        levels = isoline.get('levels')(mesh),\n        minmax, delta, step, steppow, steplog10, fixedDigits, i;\n    if (!mesh.numVertices || !mesh.numElements) {\n      return [];\n    }\n    minmax = util.getMinMaxValues(mesh.value, isoline.get('min')(mesh), isoline.get('max')(mesh), true);\n    mesh.minValue = minmax.min;\n    mesh.maxValue = minmax.max;\n    delta = mesh.maxValue - mesh.minValue;\n    if (delta <= 0) {\n      return [];\n    }\n    /* Determine values for which we need to generate isolines. */\n    if (Array.isArray(values)) {\n      /* if the caller specified values, use them.  Each can either be a number\n       * or an object with `value` and optionally `level`.  If it doesn't have\n       * level, the position is just the index in the array. */\n      values = values.map(function (val, idx) {\n        return {\n          value: val.value !== undefined ? val.value : val,\n          position: idx,\n          level: val.level\n        };\n      });\n      /* Remove any values that are outside of the data range. */\n      values = values.filter(function (val) {\n        return val.value >= mesh.minValue && val.value <= mesh.maxValue;\n      });\n    } else if (!spacing && !autofit) {\n      /* If no values or spacing are specified and autofit is falsy, then\n       * use uniform spacing across the value range.  The max and min won't\n       * produce contours (since they are exact values), so there range is\n       * divided into `count + 1` sections to get `count` visible lines. */\n      values = Array(count);\n      for (i = 0; i < count; i += 1) {\n        values[i] = {\n          value: mesh.minValue + delta * (i + 1) / (count + 1),\n          position: i + 1\n        };\n      }\n    } else {\n      if (!spacing) {\n        /* If no spacing is specfied, then this has a count with autofit.\n         * Generate at least 2/3rds as many lines as the count, but it could be\n         * 5/2 of that when adjusted to \"nice values\" (so between 2/3 and 5/3\n         * of the specified count). */\n        step = delta / (count * 2 / 3);\n        steplog10 = Math.floor(Math.log10(step));\n        fixedDigits = Math.max(0, -steplog10);\n        steppow = Math.pow(10, steplog10);\n        step /= steppow;  // will now be in range [1, 10)\n        step = step >= 5 ? 5 : step >= 2 ? 2 : 1;  // now 1, 2, or 5\n        spacing = step * steppow;\n      }\n      /* Generate the values based on a spacing.  The `position` is used for\n       * figuring out level further on and is based so that 0 will be the\n       * maximum level. */\n      values = [];\n      for (i = Math.ceil(mesh.minValue / spacing); i <= Math.floor(mesh.maxValue / spacing); i += 1) {\n        values.push({value: i * spacing, position: i, fixedDigits: fixedDigits});\n      }\n    }\n    /* Mark levels for each value.  These are intended for styling.  All values\n     * will have a `value` and `position` attribute at this point. */\n    if (levels.length) {\n      values.forEach(function (val, idx) {\n        if (val.level === undefined) {\n          val.level = 0;\n          for (var i = 0, basis = levels[0]; i < levels.length && !(val.position % basis); i += 1, basis *= levels[i]) {\n            val.level = i + 1;\n          }\n        }\n        if (isoline.get('label')(val, val.position)) {\n          var label = isoline.get('labelText')(val, val.position);\n          if (label === undefined) {\n            if (val.fixedDigits !== undefined) {\n              label = '' + parseFloat(val.value.toFixed(val.fixedDigits));\n            } else {\n              label = '' + val.value;\n            }\n          }\n          if (label) {\n            val.label = label;\n          }\n        }\n      });\n    }\n    return values;\n  };\n\n  /**\n   * Add a new segment to a list of chains.  Each chain is a list of vertices,\n   * each of which is an array of two values with the low/high mesh vertices\n   * for that chain vertex.  There are then three possibilities:  (a) The\n   * segment forms a new chain that doesn't attch to an existing chain.  (b)\n   * One endpoint of the segment matches the endpoint of an existing chain, and\n   * it gets added to that chain.  (c) Both endpoints of the segment match\n   * endpoints of two different chains, and those two chains are combined via\n   * the segment.  A chain may represent a loop, in which case its two\n   * endpoints will match.  This function does not join the loop.\n   *\n   * @param {array} chains An array of existing chains.\n   * @param {array} first One endpoint of the new segment.  This is an array of\n   *    two numbers defining the mesh vertices used for the endpoint.\n   * @param {array} last The second endpoint of the new segment.\n   * @returns {array} The modified chains array.\n   */\n  this._addSegment = function (chains, first, last) {\n    var chain = [first, last],\n        idx = chains.length,\n        i, iter, check, checkFirst, checkLast, combine;\n    /* Add the segment as a new chain by itself. */\n    chains.push(chain);\n    for (iter = 0; iter < 2; iter += 1) {\n      /* Check if the new chain can attach to an existing chain */\n      for (i = idx - 1; i >= 0; i -= 1) {\n        check = chains[i];\n        checkFirst = check[0];\n        checkLast = check[check.length - 1];\n        /* The segment can be inserted at the start of this chain */\n        if (last[0] === checkFirst[0] && last[1] === checkFirst[1]) {\n          combine = chain.concat(check.slice(1));\n        /* The segment can be inserted at the end of this chain */\n        } else if (first[0] === checkLast[0] && first[1] === checkLast[1]) {\n          combine = check.concat(chain.slice(1));\n        /* These two conditions should never be required, as we generate\n         * segments with a consistent winding direction.\n        } else if (first[0] === checkFirst[0] && first[1] === checkFirst[1]) {\n          combine = chain.slice(1).reverse().concat(check);\n        } else if (last[0] === checkLast[0] && last[1] === checkLast[1]) {\n          combine = check.concat(chain.slice(0, chain.length - 1).reverse());\n         */\n        /* The segment doesn't match this chain, so keep scanning chains */\n        } else {\n          continue;\n        }\n        /* The segment matched and `combine` contains the chain it has been\n         * merged with. */\n        chains.splice(idx, 1);\n        chains[i] = chain = combine;\n        idx = i;\n        first = chain[0];\n        last = chain[chain.length - 1];\n        break;\n      }\n      /* If we didn't combine the new chain to any existing chains, then don't\n       * check if the other end also joins an existing chain. */\n      if (i < 0) {\n        break;\n      }\n    }\n    return chains;\n  };\n\n  /**\n   * Given a vertex of the form [low vertex index, high vertex index], compute\n   * the coordinates of the vertex.\n   *\n   * @param {geo.meshFeature.meshInfo} mesh The normalized mesh.\n   * @param {geo.isolineFeature.valueEntry} value The value for which to\n   *    generate the vertex.\n   * @param {number[]} vertex The low vertex index and high vertex index.\n   * @returns {geo.geoPosition} The calculated coordinate.\n   */\n  this._chainVertex = function (mesh, value, vertex) {\n    var v0 = vertex[0], v1 = vertex[1],\n        v03 = v0 * 3, v13 = v1 * 3,\n        f = (value.value - mesh.value[v0]) / (mesh.value[v1] - mesh.value[v0]),\n        g = 1 - f;\n    return {\n      x: mesh.pos[v03] * g + mesh.pos[v13] * f,\n      y: mesh.pos[v03 + 1] * g + mesh.pos[v13 + 1] * f,\n      z: mesh.pos[v03 + 2] * g + mesh.pos[v13 + 2] * f\n    };\n  };\n\n  /**\n   * Generate the lines for associated with a particular value.  This performs\n   * either marching triangles or marching squares.\n   *\n   * @param {geo.meshFeature.meshInfo} mesh The normalized mesh.\n   * @param {geo.isolineFeature.valueEntry} value The value for which to\n   *    generate the isolines.\n   * @returns {geo.isolineFeature.line[]} An array of lines.\n   */\n  this._isolinesForValue = function (mesh, value) {\n    var val = value.value,\n        lowhigh = Array(mesh.value.length),\n        chains = [],\n        i, v, pattern, lines;\n    /* Determine if each vertex is above or below the value.  It is faster to\n     * use a for loop than map since it avoids function calls. */\n    for (i = lowhigh.length - 1; i >= 0; i -= 1) {\n      lowhigh[i] = mesh.value[i] <= val ? 0 : 1;\n    }\n    var vpe = mesh.verticesPerElement,\n        square = mesh.shape === 'square',\n        elem = mesh.elements,\n        elemLen = elem.length;\n    for (v = 0; v < elemLen; v += vpe) {\n      if (square) {\n        pattern = lowhigh[elem[v]] * 8 + lowhigh[elem[v + 1]] * 4 +\n                  lowhigh[elem[v + 2]] * 2 + lowhigh[elem[v + 3]];\n        if (pattern === 0 || pattern === 15) {\n          continue;\n        }\n      } else {\n        pattern = 16 + lowhigh[elem[v]] * 4 + lowhigh[elem[v + 1]] * 2 +\n                  lowhigh[elem[v + 2]];\n        if (pattern === 16 || pattern === 23) {\n          continue;\n        }\n      }\n      patternLineTable[pattern].forEach(function (lineEntry) {\n        chains = m_this._addSegment(\n          chains,\n          [elem[v + lineEntry.l0], elem[v + lineEntry.h0]],\n          [elem[v + lineEntry.l1], elem[v + lineEntry.h1]]\n        );\n      });\n    }\n    /* convert chains to lines */\n    lines = chains.map(function (chain) {\n      var line = [];\n      chain.forEach(function (vertex) {\n        var v = m_this._chainVertex(mesh, value, vertex);\n        if (!line.length || v.x !== line[line.length - 1].x ||\n            v.y !== line[line.length - 1].y) {\n          line.push(v);\n        }\n      });\n      line.closed = (line[0].x === line[line.length - 1].x &&\n                     line[0].y === line[line.length - 1].y);\n      /* Add value, level, position, and label information to the line. */\n      line.value = value.value;\n      line.level = value.level;\n      line.position = value.position;\n      line.label = value.label;\n      return line;\n    }).filter(function (line) { return line.length > 1; });\n    return lines;\n  };\n\n  /**\n   * When the feature is marked as modified, mark our sub-feature as\n   * modified, too.\n   *\n   * @returns {object} The results of the superclass modified function.\n   */\n  this.modified = function () {\n    var result = s_modified();\n    if (m_lineFeature) {\n      m_lineFeature.modified();\n    }\n    if (m_labelFeature) {\n      m_labelFeature.modified();\n    }\n    return result;\n  };\n\n  /**\n   * Compute the positions for labels on each line.  This can be called to\n   * recompute label positions without needign to recompute isolines, for\n   * instance when the zoom level changes.  Label positions are computed in the\n   * map gcs coordinates, not interface gcs coordinates, since the interface\n   * gcs may not be linear with the display space.\n   *\n   * @returns {this}\n   */\n  this.labelPositions = function () {\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp()) {\n      m_this._build();\n    }\n    m_lastLabelPositions = null;\n    if (!m_labelFeature) {\n      return m_this;\n    }\n    if (!m_isolines || !m_isolines.hasLabels || !m_isolines.lines || !m_isolines.lines.length) {\n      m_labelFeature.data([]);\n      return m_this;\n    }\n    var isoline = m_this.isoline,\n        spacingFunc = isoline.get('labelSpacing'),\n        offsetFunc = isoline.get('labelOffset'),\n        labelViewport = isoline.get('labelViewport')(m_isolines.mesh),\n        gcs = m_this.gcs(),\n        map = m_this.layer().map(),\n        mapgcs = map.gcs(),\n        mapRotation = map.rotation(),\n        mapSize = map.size(),\n        labelData = [],\n        maxSpacing = 0;\n    m_isolines.lines.forEach(function (line, idx) {\n      if (!line.label) {\n        return;\n      }\n      var spacing = spacingFunc(line.value, line.value.position),\n          offset = offsetFunc(line.value, line.value.position) || 0,\n          dispCoor = map.gcsToDisplay(line, gcs),\n          totalDistance = 0,\n          dist, count, localSpacing, next, lineDistance, i, i2, f, g, pos,\n          mapCoor;\n      if (spacing <= 0 || isNaN(spacing)) {\n        return;\n      }\n      maxSpacing = Math.max(spacing, maxSpacing);\n      /* make offset in the range of [0, 1) with the default at 0.5 */\n      offset = (offset + 0.5) - Math.floor(offset + 0.5);\n      dist = dispCoor.map(function (pt1, coorIdx) {\n        if (!line.closed && coorIdx + 1 === dispCoor.length) {\n          return 0;\n        }\n        var val = Math.sqrt(util.distance2dSquared(pt1, dispCoor[coorIdx + 1 < dispCoor.length ? coorIdx + 1 : 0]));\n        totalDistance += val;\n        return val;\n      });\n      count = Math.floor(totalDistance / spacing);\n      if (!count) {\n        return;\n      }\n      /* If we have any labels, compute map coordinates of the line and use\n       * those for interpolating label positions */\n      mapCoor = transform.transformCoordinates(gcs, mapgcs, line);\n      localSpacing = totalDistance / count;\n      next = localSpacing * offset;\n      lineDistance = 0;\n      for (i = 0; i < dispCoor.length; i += 1) {\n        while (lineDistance + dist[i] >= next) {\n          i2 = i + 1 === dispCoor.length ? 0 : i + 1;\n          f = (next - lineDistance) / dist[i];\n          g = 1 - f;\n          next += localSpacing;\n          if (labelViewport > 0) {\n            pos = {\n              x: dispCoor[i].x * g + dispCoor[i2].x * f,\n              y: dispCoor[i].y * g + dispCoor[i2].y * f\n            };\n            if (pos.x < -labelViewport || pos.x > mapSize.width + labelViewport ||\n                pos.y < -labelViewport || pos.y > mapSize.height + labelViewport) {\n              continue;\n            }\n          }\n          labelData.push({\n            x: mapCoor[i].x * g + mapCoor[i2].x * f,\n            y: mapCoor[i].y * g + mapCoor[i2].y * f,\n            z: mapCoor[i].z * g + mapCoor[i2].z * f,\n            line: line,\n            rotation: Math.atan2(dispCoor[i].y - dispCoor[i2].y, dispCoor[i].x - dispCoor[i2].x) - mapRotation\n          });\n        }\n        lineDistance += dist[i];\n      }\n    });\n    m_labelFeature.gcs(mapgcs);\n    m_labelFeature.data(labelData);\n    m_labelFeature.style('renderThreshold', maxSpacing * 2);\n    m_lastLabelPositions = {\n      zoom: map.zoom(),\n      center: map.center(),\n      rotation: mapRotation,\n      size: mapSize,\n      labelViewport: labelViewport,\n      maxSpacing: maxSpacing,\n      labelAutoUpdate: isoline.get('labelAutoUpdate')(m_isolines.mesh)\n    };\n    return m_this;\n  };\n\n  /**\n   * Get the last map position that was used for generating labels.\n   *\n   * @returns {object} An object with the map `zoom` and `center` and the\n   *    `labelViewport` used in generating labels.  The object may have no\n   *    properties if there are no labels.\n   */\n  this.lastLabelPositions = function () {\n    return $.extend({}, m_lastLabelPositions);\n  };\n\n  /**\n   * On a pan event, if labels exist and are set to autoupdate, recalculate\n   * their positions and redraw them as needed.  Labels are redrawn if the\n   * zoom level changes by at least 2 levels, or the map's center is moved\n   * enough that there is a chance that the viewport is nearing the extent of\n   * the generated labels.  The viewport calculation is conservative, as the\n   * map could be rotated, changed size, or have other modifications.\n   *\n   * @returns {exit}\n   */\n  this._updateLabelPositions = function () {\n    var last = m_lastLabelPositions;\n    if (!last || !last.labelAutoUpdate) {\n      return m_this;\n    }\n    var map = m_this.layer().map(),\n        zoom = map.zoom(),\n        mapSize = map.size(),\n        update = !!(Math.abs(zoom - last.zoom) >= 2);\n    if (!update && last.labelViewport > 0) {\n      /* Distance in scaled pixels between the map's current center and the\n       * center when the labels were computed. */\n      var lastDelta = Math.sqrt(util.distance2dSquared(\n        map.gcsToDisplay(map.center()), map.gcsToDisplay(last.center))) *\n        Math.pow(2, last.zoom - zoom);\n      /* Half the viewport, less twice the maxSpacing, less any expansion of\n       * the map. */\n      var threshold = last.labelViewport / 2 - last.maxSpacing * 2 - Math.max(\n        mapSize.width - last.size.width, mapSize.height - last.size.height, 0);\n      update = update || (lastDelta >= threshold);\n    }\n    if (update) {\n      m_this.labelPositions().draw();\n    }\n    return m_this;\n  };\n\n  /**\n   * Build.  Generate the isolines.  Create a line feature if necessary and\n   * update it.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    m_isolines = m_this._createIsolines();\n    if (m_isolines && m_isolines.lines && m_isolines.lines.length) {\n      if (!m_lineFeature) {\n        m_lineFeature = m_this.layer().createFeature('line', {\n          selectionAPI: false,\n          gcs: m_this.gcs(),\n          visible: m_this.visible(undefined, true),\n          style: {\n            closed: function (d) { return d.closed; }\n          }\n        });\n        m_this.dependentFeatures([m_lineFeature]);\n      }\n      var style = m_this.style();\n      m_lineFeature.data(m_isolines.lines).style({\n        antialiasing: style.antialiasing,\n        lineCap: style.lineCap,\n        lineJoin: style.lineJoin,\n        miterLimit: style.miterLimit,\n        strokeWidth: style.strokeWidth,\n        strokeStyle: style.strokeStyle,\n        strokeColor: style.strokeColor,\n        strokeOffset: style.strokeOffset,\n        strokeOpacity: style.strokeOpacity\n      });\n      if (m_isolines.hasLabels) {\n        if (!m_labelFeature) {\n          if (!(registry.registries.features[m_this.layer().rendererName()] || {}).text) {\n            var renderer = registry.rendererForFeatures(['text']);\n            m_labelLayer = registry.createLayer('feature', m_this.layer().map(), {renderer: renderer});\n            m_this.layer().addChild(m_labelLayer);\n            m_this.layer().node().append(m_labelLayer.node());\n          }\n          m_labelFeature = (m_labelLayer || m_this.layer()).createFeature('text', {\n            selectionAPI: false,\n            gcs: m_this.gcs(),\n            visible: m_this.visible(undefined, true),\n            style: {\n              text: function (d) { return d.line.label; }\n            }\n          }).geoOn(geo_event.pan, m_this._updateLabelPositions);\n        }\n        textFeature.usedStyles.forEach(function (styleName) {\n          if (styleName !== 'visible') {\n            m_labelFeature.style(styleName, style[styleName]);\n          }\n        });\n        m_this.dependentFeatures([m_lineFeature, m_labelFeature]);\n      }\n    } else if (m_lineFeature) {\n      m_lineFeature.data([]);\n    }\n    m_this.buildTime().modified();\n    /* Update label positions after setting the build time.  The labelPositions\n     * method will build if necessary, and this prevents it from looping. */\n    m_this.labelPositions();\n    return m_this;\n  };\n\n  /**\n   * Update.  Rebuild if necessary.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() <= m_this.timestamp()) {\n      m_this._build();\n    }\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Redraw the object.\n   *\n   * @returns {object} The results of the superclass draw function.\n   */\n  this.draw = function () {\n    var result = s_draw();\n    if (m_lineFeature) {\n      m_lineFeature.draw();\n    }\n    if (m_labelFeature) {\n      m_labelFeature.draw();\n    }\n    return result;\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    if (m_labelFeature) {\n      if (m_labelLayer || m_this.layer()) {\n        (m_labelLayer || m_this.layer()).deleteFeature(m_labelFeature);\n      }\n      if (m_labelLayer && m_this.layer()) {\n        m_this.layer().removeChild(m_labelLayer);\n      }\n    }\n    if (m_lineFeature && m_this.layer()) {\n      m_this.layer().deleteFeature(m_lineFeature);\n    }\n    m_labelFeature = null;\n    m_labelLayer = null;\n    m_lineFeature = null;\n    m_this.dependentFeatures([]);\n\n    s_exit();\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.isolineFeature.spec} arg The isoline feature specification.\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        opacity: 1.0,\n        value: function (d, i) {\n          return m_this.position()(d, i).z;\n        },\n        rotateWithMap: true,\n        rotation: isolineFeature.rotationFunction(),\n        strokeWidth: function (v, vi, d, di) { return d.level + 0.5; },\n        strokeColor: {r: 0, g: 0, b: 0},\n        textStrokeColor: {r: 1, g: 1, b: 1, a: 0.75},\n        textStrokeWidth: 2,\n        fontSize: '12px'\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    m_this.style(defaultStyle);\n\n    m_this.isoline($.extend({}, {\n      count: 15,\n      autofit: true,\n      levels: [5, 5],\n      label: function (value) {\n        return value.level >= 1;\n      },\n      labelSpacing: 200,\n      labelViewport: 10000,\n      labelAutoUpdate: true\n    }, arg.mesh || {}, arg.contour || {}, arg.isoline || {}));\n\n    if (arg.mesh || arg.contour || arg.isoline) {\n      m_this.dataTime().modified();\n    }\n  };\n\n  return this;\n};\n\n/**\n * Return a function that will rotate text labels in a specified orientation.\n * The results of this are intended to be used as the value of the `rotation`\n * style.\n *\n * @param {string} [mode='higher'] The rotation mode.  `higher` orients the top\n *   of the text to high values.  `lower` orients the top of the text to lower\n *   values.  `map` orients the top of the text so it is aligned to the isoline\n *   and biased toward the top of the map.  `screen` orients the top of the\n *   text so it is aligned to the isoline and biased toward the top of the\n *   display screen.\n * @param {geo.map} [map] The parent map.  Required for `screen` mode.\n * @returns {function} A function for the rotation style.\n */\nisolineFeature.rotationFunction = function (mode, map) {\n  var functionList = {\n    'higher': function (d) {\n      return d.rotation;\n    },\n    'lower': function (d) {\n      return d.rotation + Math.PI;\n    },\n    'map': function (d) {\n      var r = d.rotation,\n          rt = util.wrapAngle(r, true);\n      if (rt > Math.PI / 2 || rt < -Math.PI / 2) {\n        r += Math.PI;\n      }\n      return r;\n    },\n    'screen': function (d) {\n      var r = d.rotation,\n          rt = util.wrapAngle(r + map.rotation(), true);\n      if (rt > Math.PI / 2 || rt < -Math.PI / 2) {\n        r += Math.PI;\n      }\n      return r;\n    }\n  };\n  return functionList[mode] || functionList.higher;\n};\n\ninherit(isolineFeature, meshFeature);\nmodule.exports = isolineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./isolineFeature.js","var inherit = require('../inherit');\nvar sceneObject = require('../sceneObject');\nvar $ = require('jquery');\n\n/**\n * @typedef {object} geo.gui.widget.position\n * @property {string|number} [top] The position to the top of the container.\n *   A string css position or a number in pixels.\n * @property {string|number} [right] The position to the right of the\n *   container.  A string css position or a number in pixels.\n * @property {string|number} [bottom] The position to the bottom of the\n *   container.  A string css position or a number in pixels.\n * @property {string|number} [left] The position to the left of the container.\n * @property {string|number} [top] The position to the top of the container.\n * @property {*} [...] Additional css properties that affect position are\n *   allowed.  See the css specification for details.\n */\n\n/**\n * Create a new instance of class widget.\n *\n * @class\n * @alias geo.gui.widget\n * @param {object} [arg] Options for the widget.\n * @param {geo.layer} [arg.layer] Layer associated with the widget.\n * @param {geo.gui.widget.position} [arg.position] Location of the widget.\n * @param {geo.gui.widget} [arg.parent] Optional parent widget.\n * @extends {geo.sceneObject}\n * @returns {geo.gui.widget}\n */\nvar widget = function (arg) {\n  'use strict';\n  if (!(this instanceof widget)) {\n    return new widget(arg);\n  }\n  arg = arg || {};\n  sceneObject.call(this, arg);\n\n  var geo_event = require('../event');\n\n  var m_this = this,\n      s_exit = this._exit,\n      m_layer = arg.layer,\n      m_canvas = null,\n      m_position = arg.position === undefined ? { left: 0, top: 0 } : arg.position;\n\n  if (arg.parent !== undefined && !(arg.parent instanceof widget)) {\n    throw new Error('Parent must be of type geo.gui.widget');\n  } else if (arg.parent) {\n    m_this.parent(arg.parent);\n  }\n\n  /**\n   * Initialize the widget.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Clean up the widget.\n   */\n  this._exit = function () {\n    m_this.children().forEach(function (child) {\n      m_this.removeChild(child);\n      child._exit();\n    });\n\n    m_this.layer().geoOff(geo_event.pan, m_this.repositionEvent);\n    if (m_this.parentCanvas().removeChild && m_this.canvas()) {\n      try {\n        m_this.parentCanvas().removeChild(m_this.canvas());\n      } catch (err) {\n        // fail gracefully if the canvas is not a child of the parentCanvas\n      }\n    }\n    s_exit();\n  };\n\n  /**\n   * Return the layer associated with this widget.\n   *\n   * @returns {geo.layer}\n   */\n  this.layer = function () {\n    return m_layer || (m_this.parent() && m_this.parent().layer());\n  };\n\n  /**\n   * Create the canvas this widget will operate on.\n   */\n  this._createCanvas = function () {\n    throw new Error('Must be defined in derived classes');\n  };\n\n  /**\n   * Get/Set the canvas for the widget.\n   *\n   * @param {HTMLElement} [val] If specified, set the canvas, otherwise get\n   *    the canvas.\n   * @returns {HTMLElement|this} If getting the canvas, return the current\n   *    value; otherwise, return this widget.\n   */\n  this.canvas = function (val) {\n    if (val === undefined) {\n      return m_canvas;\n    }\n    m_canvas = val;\n    return m_this;\n  };\n\n  /**\n   * Appends the canvas to the parent canvas.\n   * The widget determines how to append itself to a parent, the parent can\n   * either be another widget, or the UI Layer.\n   */\n  this._appendCanvasToParent = function () {\n    m_this.parentCanvas().appendChild(m_this.canvas());\n  };\n\n  /**\n   * Get the parent canvas (top level widgets define their layer as their\n   * parent canvas).\n   *\n   * @returns {HTMLElement} The canvas of the widget's parent.\n   */\n  this.parentCanvas = function () {\n    if (!m_this.parent()) {\n      return m_this.layer().canvas();\n    }\n    return m_this.parent().canvas();\n  };\n\n  /**\n   * Get or set the CSS positioning that a widget should be placed at.\n   *\n   * @param {geo.gui.widget.position} [pos] If unspecified, return the current\n   *    position.  Otherwise, set the current position.\n   * @param {boolean} [actualValue] If getting the position, if this is truthy,\n   *    always return the stored value, not a value adjusted for display.\n   * @returns {geo.gui.widget.position|this} Either the position or the widget\n   *    instance.  If this is the position and `actualValue` is falsy,\n   *    positions that specify an explicit `x` and `y` parameter will be\n   *    converted to a value that can be used by the display css.\n   */\n  this.position = function (pos, actualValue) {\n    if (pos !== undefined) {\n      this.layer().geoOff(geo_event.pan, m_this.repositionEvent);\n      var clearPosition = {};\n      for (var attr in m_position) {\n        if (m_position.hasOwnProperty(attr)) {\n          clearPosition[attr] = null;\n        }\n      }\n      m_position = pos;\n      if (m_position.hasOwnProperty('x') && m_position.hasOwnProperty('y')) {\n        this.layer().geoOn(geo_event.pan, m_this.repositionEvent);\n      }\n      this.reposition($.extend(clearPosition, m_this.position()));\n      return this;\n    }\n    if (m_position.hasOwnProperty('x') && m_position.hasOwnProperty('y') && !actualValue) {\n      var position = m_this.layer().map().gcsToDisplay(m_position);\n\n      return {\n        left: position.x,\n        top: position.y,\n        right: null,\n        bottom: null\n      };\n    }\n\n    return m_position;\n  };\n\n  /**\n   * Repositions a widget.\n   *\n   * @param {geo.gui.widget.position} [position] The new position for the\n   *    widget.  `undefined` uses the stored position value.\n   * @returns {this}\n   */\n  this.reposition = function (position) {\n    position = position || m_this.position();\n    if (m_this.canvas() && m_this.canvas().style) {\n      m_this.canvas().style.position = 'absolute';\n\n      for (var cssAttr in position) {\n        if (position.hasOwnProperty(cssAttr)) {\n          // if the property is a number, add px to it, otherwise set it to the\n          // specified value.  Setting a property to null clears it.  Setting to\n          // undefined doesn't alter it.\n          if (/^\\s*(-|\\+)?(\\d+(\\.\\d*)?|\\d*\\.\\d+)([eE](-|\\+)?\\d+)?\\s*$/.test(position[cssAttr])) {\n            // this ensures that the number is a float with no more than 3\n            // decimal places (Chrome does this automatically, but doing so\n            // explicitly makes testing more consistent).  It will be an\n            // integer when possible.\n            m_this.canvas().style[cssAttr] = parseFloat(parseFloat(position[cssAttr]).toFixed(3)) + 'px';\n          } else {\n            m_this.canvas().style[cssAttr] = position[cssAttr];\n          }\n        }\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * If the position is based on map coordinates, this gets called when the\n   * map is panned to resposition the widget.\n   *\n   * @returns {this}\n   */\n  this.repositionEvent = function () {\n    return m_this.reposition();\n  };\n\n  /**\n   * Report if the top left of widget (or its current x, y position) is within\n   * the viewport.\n   *\n   * @returns {boolean} True if the widget is within the viewport.\n   */\n  this.isInViewport = function () {\n    var position = m_this.position();\n    var layer = m_this.layer();\n\n    return ((position.left >= 0 && position.top >= 0) &&\n            (position.left <= layer.width() && position.top <= layer.height()));\n  };\n\n  if (m_position.hasOwnProperty('x') && m_position.hasOwnProperty('y')) {\n    this.layer().geoOn(geo_event.pan, m_this.repositionEvent);\n  }\n};\ninherit(widget, sceneObject);\nmodule.exports = widget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/widget.js","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_ie8-dom-define.js\n// module id = 148\n// module chunks = 0 1","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_wks-ext.js\n// module id = 149\n// module chunks = 0 1","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-keys-internal.js\n// module id = 150\n// module chunks = 0 1","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-dps.js\n// module id = 151\n// module chunks = 0 1","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-gopn-ext.js\n// module id = 152\n// module chunks = 0 1","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-assign.js\n// module id = 153\n// module chunks = 0 1","'use strict';\nvar aFunction = require('./_a-function');\nvar isObject = require('./_is-object');\nvar invoke = require('./_invoke');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (F, len, args) {\n  if (!(len in factories)) {\n    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var bound = function (/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if (isObject(fn.prototype)) bound.prototype = fn.prototype;\n  return bound;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_bind.js\n// module id = 154\n// module chunks = 0 1","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_invoke.js\n// module id = 155\n// module chunks = 0 1","var $parseInt = require('./_global').parseInt;\nvar $trim = require('./_string-trim').trim;\nvar ws = require('./_string-ws');\nvar hex = /^[-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_parse-int.js\n// module id = 156\n// module chunks = 0 1","var $parseFloat = require('./_global').parseFloat;\nvar $trim = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str) {\n  var string = $trim(String(str), 3);\n  var result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_parse-float.js\n// module id = 157\n// module chunks = 0 1","var cof = require('./_cof');\nmodule.exports = function (it, msg) {\n  if (typeof it != 'number' && cof(it) != 'Number') throw TypeError(msg);\n  return +it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_a-number-value.js\n// module id = 158\n// module chunks = 0 1","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_is-integer.js\n// module id = 159\n// module chunks = 0 1","// 20.2.2.20 Math.log1p(x)\nmodule.exports = Math.log1p || function log1p(x) {\n  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_math-log1p.js\n// module id = 160\n// module chunks = 0 1","// 20.2.2.16 Math.fround(x)\nvar sign = require('./_math-sign');\nvar pow = Math.pow;\nvar EPSILON = pow(2, -52);\nvar EPSILON32 = pow(2, -23);\nvar MAX32 = pow(2, 127) * (2 - EPSILON32);\nvar MIN32 = pow(2, -126);\n\nvar roundTiesToEven = function (n) {\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\nmodule.exports = Math.fround || function fround(x) {\n  var $abs = Math.abs(x);\n  var $sign = sign(x);\n  var a, result;\n  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n  a = (1 + EPSILON32 / EPSILON) * $abs;\n  result = a - (a - $abs);\n  // eslint-disable-next-line no-self-compare\n  if (result > MAX32 || result != result) return $sign * Infinity;\n  return $sign * result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_math-fround.js\n// module id = 161\n// module chunks = 0 1","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iter-call.js\n// module id = 162\n// module chunks = 0 1","var aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar toLength = require('./_to-length');\n\nmodule.exports = function (that, callbackfn, aLen, memo, isRight) {\n  aFunction(callbackfn);\n  var O = toObject(that);\n  var self = IObject(O);\n  var length = toLength(O.length);\n  var index = isRight ? length - 1 : 0;\n  var i = isRight ? -1 : 1;\n  if (aLen < 2) for (;;) {\n    if (index in self) {\n      memo = self[index];\n      index += i;\n      break;\n    }\n    index += i;\n    if (isRight ? index < 0 : length <= index) {\n      throw TypeError('Reduce of empty array with no initial value');\n    }\n  }\n  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {\n    memo = callbackfn(memo, self[index], index, O);\n  }\n  return memo;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-reduce.js\n// module id = 163\n// module chunks = 0 1","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-copy-within.js\n// module id = 164\n// module chunks = 0 1","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_iter-step.js\n// module id = 165\n// module chunks = 0 1","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.flags.js\n// module id = 166\n// module chunks = 0 1","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_perform.js\n// module id = 167\n// module chunks = 0 1","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_promise-resolve.js\n// module id = 168\n// module chunks = 0 1","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.map.js\n// module id = 169\n// module chunks = 0 1","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_collection-strong.js\n// module id = 170\n// module chunks = 0 1","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.set.js\n// module id = 171\n// module chunks = 0 1","'use strict';\nvar each = require('./_array-methods')(0);\nvar redefine = require('./_redefine');\nvar meta = require('./_meta');\nvar assign = require('./_object-assign');\nvar weak = require('./_collection-weak');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar validate = require('./_validate-collection');\nvar WEAK_MAP = 'WeakMap';\nvar getWeak = meta.getWeak;\nvar isExtensible = Object.isExtensible;\nvar uncaughtFrozenStore = weak.ufstore;\nvar tmp = {};\nvar InternalMap;\n\nvar wrapper = function (get) {\n  return function WeakMap() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key) {\n    if (isObject(key)) {\n      var data = getWeak(key);\n      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value) {\n    return weak.def(validate(this, WEAK_MAP), key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')(WEAK_MAP, wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {\n  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function (key) {\n    var proto = $WeakMap.prototype;\n    var method = proto[key];\n    redefine(proto, key, function (a, b) {\n      // store frozen objects on internal weakmap shim\n      if (isObject(a) && !isExtensible(a)) {\n        if (!this._f) this._f = new InternalMap();\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.weak-map.js\n// module id = 172\n// module chunks = 0 1","'use strict';\nvar redefineAll = require('./_redefine-all');\nvar getWeak = require('./_meta').getWeak;\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar createArrayMethod = require('./_array-methods');\nvar $has = require('./_has');\nvar validate = require('./_validate-collection');\nvar arrayFind = createArrayMethod(5);\nvar arrayFindIndex = createArrayMethod(6);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (that) {\n  return that._l || (that._l = new UncaughtFrozenStore());\n};\nvar UncaughtFrozenStore = function () {\n  this.a = [];\n};\nvar findUncaughtFrozen = function (store, key) {\n  return arrayFind(store.a, function (it) {\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = arrayFindIndex(this.a, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;      // collection type\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var data = getWeak(anObject(key), true);\n    if (data === true) uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_collection-weak.js\n// module id = 173\n// module chunks = 0 1","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_to-index.js\n// module id = 174\n// module chunks = 0 1","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_own-keys.js\n// module id = 175\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar isArray = require('./_is-array');\nvar isObject = require('./_is-object');\nvar toLength = require('./_to-length');\nvar ctx = require('./_ctx');\nvar IS_CONCAT_SPREADABLE = require('./_wks')('isConcatSpreadable');\n\nfunction flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;\n  var element, spreadable;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      spreadable = false;\n      if (isObject(element)) {\n        spreadable = element[IS_CONCAT_SPREADABLE];\n        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);\n      }\n\n      if (spreadable && depth > 0) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1fffffffffffff) throw TypeError();\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n}\n\nmodule.exports = flattenIntoArray;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_flatten-into-array.js\n// module id = 176\n// module chunks = 0 1","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_string-pad.js\n// module id = 177\n// module chunks = 0 1","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_object-to-array.js\n// module id = 178\n// module chunks = 0 1","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_collection-to-json.js\n// module id = 179\n// module chunks = 0 1","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-from-iterable.js\n// module id = 180\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nmodule.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {\n  if (\n    arguments.length === 0\n      // eslint-disable-next-line no-self-compare\n      || x != x\n      // eslint-disable-next-line no-self-compare\n      || inLow != inLow\n      // eslint-disable-next-line no-self-compare\n      || inHigh != inHigh\n      // eslint-disable-next-line no-self-compare\n      || outLow != outLow\n      // eslint-disable-next-line no-self-compare\n      || outHigh != outHigh\n  ) return NaN;\n  if (x === Infinity || x === -Infinity) return x;\n  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_math-scale.js\n// module id = 181\n// module chunks = 0 1","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar geo_event = require('./event');\nvar geo_action = require('./action');\nvar transform = require('./transform');\nvar util = require('./util');\nvar registerAnnotation = require('./registry').registerAnnotation;\nvar lineFeature = require('./lineFeature');\nvar pointFeature = require('./pointFeature');\nvar polygonFeature = require('./polygonFeature');\nvar textFeature = require('./textFeature');\n\nvar annotationId = 0;\n\n/**\n * @alias geo.annotation.state\n * @enum {string}\n */\nvar annotationState = {\n  create: 'create',\n  done: 'done',\n  highlight: 'highlight',\n  edit: 'edit'\n};\n\nvar annotationActionOwner = 'annotationAction';\n\n/**\n * These styles are applied to edit handles, and can be overridden by\n * individual annotations.\n *\n * @alias geo.annotation.defaultEditHandleStyle\n * @type {object}\n * @default\n */\nvar defaultEditHandleStyle = {\n  fill: true,\n  fillColor: function (d) {\n    return d.selected ? {r: 0, g: 1, b: 1} : {r: 0.3, g: 0.3, b: 0.3};\n  },\n  fillOpacity: function (d) {\n    return d.selected ? 0.5 : 0.25;\n  },\n  radius: function (d) {\n    return d.type === 'edge' || d.type === 'rotate' ? 8 : 10;\n  },\n  scaled: false,\n  stroke: true,\n  strokeColor: {r: 0, g: 0, b: 1},\n  strokeOpacity: 1,\n  strokeWidth: function (d) {\n    return d.type === 'edge' || d.type === 'rotate' ? 2 : 3;\n  },\n  rotateHandleOffset: 24, // should be roughly twice radius + strokeWidth\n  rotateHandleRotation: -Math.PI / 4,\n  resizeHandleOffset: 48, // should be roughly twice radius + strokeWidth + rotateHandleOffset\n  resizeHandleRotation: -Math.PI / 4,\n  // handles may be a function to dynamically generate the results\n  handles: {  // if `false`, the handle won't be created for editing\n    vertex: true,\n    edge: true,\n    center: true,\n    rotate: true,\n    resize: true\n  }\n};\nvar editHandleFeatureLevel = 3;\n\n/**\n * General annotation specification.\n *\n * @typedef {object} geo.annotation.spec\n * @property {string} [name] A name for the annotation.  This defaults to the\n *    type with a unique ID suffixed to it.\n * @property {geo.annotationLayer} [layer] A reference to the controlling\n *    layer.  This is used for coordinate transforms.\n * @property {string} [state] Initial annotation state.  One of the\n *    {@link geo.annotation.state} values.\n * @property {boolean|string[]} [showLabel=true] `true` to show the annotation\n *    label on annotations in done or edit states.  Alternately, a list of\n *    states in which to show the label.  Falsy to not show the label.\n */\n\n/**\n * Base annotation class.\n *\n * @class\n * @alias geo.annotation\n * @param {string} type The type of annotation.  These should be registered\n *    with {@link geo.registerAnnotation} and can be listed with\n *    {@link geo.listAnnotations}.\n * @param {geo.annotation.spec?} [args] Options for the annotation.\n * @returns {geo.annotation}\n */\nvar annotation = function (type, args) {\n  'use strict';\n  if (!(this instanceof annotation)) {\n    return new annotation(type, args);\n  }\n\n  var m_this = this,\n      m_options = $.extend({}, {showLabel: true}, args || {}),\n      m_id = m_options.annotationId;\n  delete m_options.annotationId;\n  if (m_id === undefined || (m_options.layer && m_options.layer.annotationById(m_id))) {\n    annotationId += 1;\n    if (m_id !== undefined) {\n      console.warn('Annotation id ' + m_id + ' is in use; using ' + annotationId + ' instead.');\n    }\n    m_id = annotationId;\n  } else {\n    if (m_id > annotationId) {\n      annotationId = m_id;\n    }\n  }\n  var m_name = m_options.name || (\n        type.charAt(0).toUpperCase() + type.substr(1) + ' ' + m_id),\n      m_label = m_options.label || null,\n      m_description = m_options.description || undefined,\n      m_type = type,\n      m_layer = m_options.layer,\n      /* one of annotationState.* */\n      m_state = m_options.state || annotationState.done;\n  delete m_options.state;\n  delete m_options.layer;\n  delete m_options.name;\n  delete m_options.label;\n  delete m_options.description;\n\n  /**\n   * Clean up any resources that the annotation is using.\n   */\n  this._exit = function () {\n  };\n\n  /**\n   * Get a unique annotation id.\n   *\n   * @returns {number} The annotation id.\n   */\n  this.id = function () {\n    return m_id;\n  };\n\n  /**\n   * Get or set the name of this annotation.\n   *\n   * @param {string|undefined} arg If `undefined`, return the name, otherwise\n   *    change it.  When setting the name, the value is trimmed of\n   *    whitespace.  The name will not be changed to an empty string.\n   * @returns {this|string} The current name or this annotation.\n   */\n  this.name = function (arg) {\n    if (arg === undefined) {\n      return m_name;\n    }\n    if (arg !== null && ('' + arg).trim()) {\n      arg = ('' + arg).trim();\n      if (arg !== m_name) {\n        m_name = arg;\n        m_this.modified();\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Get or set the label of this annotation.\n   *\n   * @param {string|null|undefined} arg If `undefined`, return the label,\n   *    otherwise change it.  `null` to clear the label.\n   * @param {boolean} noFallback If not truthy and the label is `null`, return\n   *    the name, otherwise return the actual value for label.\n   * @returns {this|string} The current label or this annotation.\n   */\n  this.label = function (arg, noFallback) {\n    if (arg === undefined) {\n      return m_label === null && !noFallback ? m_name : m_label;\n    }\n    if (arg !== m_label) {\n      m_label = arg;\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Return the coordinate associated with the label.\n   *\n   * @returns {geo.geoPosition|undefined} The map gcs position for the label,\n   *    or `undefined` if no such position exists.\n   */\n  this._labelPosition = function () {\n    return util.centerFromPerimeter(m_this._coordinates());\n  };\n\n  /**\n   * Return the coordinate associated with the rotation handle for the\n   * annotation.\n   *\n   * @param {number} [offset] An additional offset from cetner to apply to the\n   *    handle.\n   * @param {number} [rotation] An additional rotation to apply to the handle.\n   * @returns {geo.geoPosition|undefined} The map gcs position for the handle,\n   *    or `undefined` if no such position exists.\n   */\n  this._rotateHandlePosition = function (offset, rotation) {\n    var map = m_this.layer().map(),\n        coor = m_this._coordinates(),\n        center = util.centerFromPerimeter(m_this._coordinates()),\n        dispCenter = center ? map.gcsToDisplay(center, null) : undefined,\n        i, pos, maxr2 = 0, r;\n    if (!center) {\n      return;\n    }\n    offset = offset || 0;\n    rotation = rotation || 0;\n    for (i = 0; i < coor.length; i += 1) {\n      pos = map.gcsToDisplay(coor[i], null);\n      maxr2 = Math.max(maxr2, Math.pow(pos.x - dispCenter.x, 2) + Math.pow(pos.y - dispCenter.y, 2));\n    }\n    r = Math.sqrt(maxr2) + offset;\n    pos = map.displayToGcs({\n      x: dispCenter.x + r * Math.cos(rotation),\n      y: dispCenter.y - r * Math.sin(rotation)}, null);\n    return pos;\n  };\n\n  /**\n   * If the label should be shown, get a record of the label that can be used\n   * in a {@link geo.textFeature}.\n   *\n   * @returns {geo.annotationLayer.labelRecord|undefined} A label record, or\n   *    `undefined` if it should not be shown.\n   */\n  this.labelRecord = function () {\n    var show = m_this.options('showLabel');\n    if (!show) {\n      return;\n    }\n    var state = m_this.state();\n    if ((show === true && state === annotationState.create) ||\n        (show !== true && show.indexOf(state) < 0)) {\n      return;\n    }\n    var style = m_this.labelStyle();\n    var labelRecord = {\n      text: m_this.label(),\n      position: m_this._labelPosition()\n    };\n    if (!labelRecord.position) {\n      return;\n    }\n    if (style) {\n      labelRecord.style = style;\n    }\n    return labelRecord;\n  };\n\n  /**\n   * Get or set the description of this annotation.\n   *\n   * @param {string|undefined} arg If `undefined`, return the description,\n   *    otherwise change it.\n   * @returns {this|string} The current description or this annotation.\n   */\n  this.description = function (arg) {\n    if (arg === undefined) {\n      return m_description;\n    }\n    if (arg !== m_description) {\n      m_description = arg;\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get or set the annotation layer associated with this annotation.\n   *\n   * @param {geo.annotationLayer|undefined} arg if undefined, return the layer,\n   *    otherwise change it.\n   * @returns {this|geo.annotationLayer} the current layer or this annotation.\n   */\n  this.layer = function (arg) {\n    if (arg === undefined) {\n      return m_layer;\n    }\n    m_layer = arg;\n    return m_this;\n  };\n\n  /**\n   * Get or set the state of this annotation.\n   *\n   * @param {string|undefined} arg If `undefined`, return the state,\n   *    otherwise change it.  This should be one of the\n   *    {@link geo.annotation.state} values.\n   * @returns {this|string} The current state or this annotation.\n   * @fires geo.event.annotation.state\n   */\n  this.state = function (arg) {\n    if (arg === undefined) {\n      return m_state;\n    }\n    if (m_state !== arg) {\n      m_state = arg;\n      if (m_this.layer()) {\n        m_this.layer().geoTrigger(geo_event.annotation.state, {\n          annotation: this\n        });\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Return actions needed for the specified state of this annotation.\n   *\n   * @param {string} [state] The state to return actions for.  Defaults to\n   *    the current state.\n   * @returns {geo.actionRecord[]} A list of actions.\n   */\n  this.actions = function (state) {\n    if (!state) {\n      state = m_this.state();\n    }\n    switch (state) {\n      case annotationState.edit:\n        return [{\n          action: geo_action.annotation_edit_handle,\n          name: 'annotation edit',\n          owner: annotationActionOwner,\n          input: 'left'\n        }, {\n          action: geo_action.annotation_edit_handle,\n          name: 'annotation edit',\n          owner: annotationActionOwner,\n          input: 'pan'\n        }];\n      default:\n        return [];\n    }\n  };\n\n  /**\n   * Process any non-edit actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if the\n   *    annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.processAction = function () {\n    return undefined;\n  };\n\n  /**\n   * Process any edit actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean} `true` to update the annotation, falsy to not update\n   *    anything.\n   */\n  this.processEditAction = function (evt) {\n    if (!evt || !m_this._editHandle || !m_this._editHandle.handle) {\n      return;\n    }\n    switch (m_this._editHandle.handle.type) {\n      case 'vertex':\n        return m_this._processEditActionVertex(evt);\n      case 'edge':\n        return m_this._processEditActionEdge(evt);\n      case 'center':\n        return m_this._processEditActionCenter(evt);\n      case 'rotate':\n        return m_this._processEditActionRotate(evt);\n      case 'resize':\n        return m_this._processEditActionResize(evt);\n    }\n  };\n\n  /**\n   * When an edit handle is selected or deselected (for instance, by moving the\n   * mouse on or off of it), mark if it is selected and record the current\n   * coordinates.\n   *\n   * @param {object} handle The data for the edit handle.\n   * @param {boolean} enable True to enable the handle, false to disable.\n   * @returns {this}\n   * @fires geo.event.annotation.select_edit_handle\n   */\n  this.selectEditHandle = function (handle, enable) {\n    if (enable && m_this._editHandle && m_this._editHandle.handle &&\n        m_this._editHandle.handle.selected) {\n      m_this._editHandle.handle.selected = false;\n    }\n    handle.selected = enable;\n    var amountRotated = (m_this._editHandle || {}).amountRotated || 0;\n    m_this._editHandle = {\n      handle: handle,\n      startCoordinates: m_this._coordinates().slice(),\n      center: util.centerFromPerimeter(m_this._coordinates()),\n      rotatePosition: m_this._rotateHandlePosition(\n        handle.style.rotateHandleOffset, handle.style.rotateHandleRotation + amountRotated),\n      startAmountRotated: amountRotated,\n      amountRotated: amountRotated,\n      resizePosition: m_this._rotateHandlePosition(\n        handle.style.resizeHandleOffset, handle.style.resizeHandleRotation)\n    };\n    if (m_this.layer()) {\n      m_this.layer().geoTrigger(geo_event.annotation.select_edit_handle, {\n        annotation: m_this,\n        handle: m_this._editHandle,\n        enable: enable\n      });\n    }\n    return m_this;\n  };\n\n  /**\n   * Set or get options.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the options object.\n   *    If a string, either set or return the option of that name.  If an\n   *    object, update the options with the object's values.\n   * @param {object} [arg2] If `arg1` is a string and this is defined, set\n   *    the option to this value.\n   * @returns {object|this} If options are set, return the annotation,\n   *    otherwise return the requested option or the set of options.\n   * @fires geo.event.annotation.coordinates\n   */\n  this.options = function (arg1, arg2) {\n    if (arg1 === undefined) {\n      return m_options;\n    }\n    if (typeof arg1 === 'string' && arg2 === undefined) {\n      return m_options[arg1];\n    }\n    var coordinatesSet;\n    if (arg2 === undefined) {\n      coordinatesSet = arg1[m_this._coordinateOption] !== undefined;\n      m_options = $.extend(true, m_options, arg1);\n      /* For style objects, re-extend them without recursion.  This allows\n       * setting colors without an opacity field, for instance. */\n      ['style', 'createStyle', 'editStyle', 'editHandleStyle', 'labelStyle',\n        'highlightStyle'\n      ].forEach(function (key) {\n        if (arg1[key] !== undefined) {\n          $.extend(m_options[key], arg1[key]);\n        }\n      });\n    } else {\n      coordinatesSet = arg1 === m_this._coordinateOption;\n      m_options[arg1] = arg2;\n    }\n    if (m_options.coordinates) {\n      var coor = m_options.coordinates;\n      delete m_options.coordinates;\n      m_this._coordinates(coor);\n    }\n    if (m_options.name !== undefined) {\n      var name = m_options.name;\n      delete m_options.name;\n      m_this.name(name);\n    }\n    if (m_options.label !== undefined) {\n      var label = m_options.label;\n      delete m_options.label;\n      m_this.label(label);\n    }\n    if (m_options.description !== undefined) {\n      var description = m_options.description;\n      delete m_options.description;\n      m_this.description(description);\n    }\n    m_this.modified();\n    if (coordinatesSet && m_this.layer()) {\n      m_this.layer().geoTrigger(geo_event.annotation.coordinates, {\n        annotation: m_this\n      });\n    }\n    return this;\n  };\n\n  /**\n   * Set or get style.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the current style\n   *    object.  If a string and `arg2` is undefined, return the style\n   *    associated with the specified key.  If a string and `arg2` is defined,\n   *    set the named style to the specified value.  Otherwise, extend the\n   *    current style with the values in the specified object.\n   * @param {*} [arg2] If `arg1` is a string, the new value for that style.\n   * @param {string} [styleType='style'] The name of the style type, such as\n   *    `createStyle`, `editStyle`, `editHandleStyle`, `labelStyle`, or\n   *    `highlightStyle`.\n   * @returns {object|this} Either the entire style object, the value of a\n   *    specific style, or the current class instance.\n   */\n  this.style = function (arg1, arg2, styleType) {\n    styleType = styleType || 'style';\n    if (arg1 === undefined) {\n      return m_options[styleType];\n    }\n    if (typeof arg1 === 'string' && arg2 === undefined) {\n      return (m_options[styleType] || {})[arg1];\n    }\n    if (m_options[styleType] === undefined) {\n      m_options[styleType] = {};\n    }\n    if (arg2 === undefined) {\n      m_options[styleType] = $.extend(true, m_options[styleType], arg1);\n    } else {\n      m_options[styleType][arg1] = arg2;\n    }\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Calls {@link geo.annotation#style} with `styleType='createStyle'`.\n   * @function createStyle\n   * @memberof geo.annotation\n   * @instance\n   */\n  /**\n   * Calls {@link geo.annotation#style} with `styleType='editStyle'`.\n   * @function editStyle\n   * @memberof geo.annotation\n   * @instance\n   */\n  /**\n   * Calls {@link geo.annotation#style} with `styleType='editHandleStyle'`.\n   * @function editHandleStyle\n   * @memberof geo.annotation\n   * @instance\n   */\n  /**\n   * Calls {@link geo.annotation#style} with `styleType='labelStyle'`.\n   * @function labelStyle\n   * @memberof geo.annotation\n   * @instance\n   */\n  /**\n   * Calls {@link geo.annotation#style} with `styleType='highlightHandleStyle'`.\n   * @function highlightHandleStyle\n   * @memberof geo.annotation\n   * @instance\n   */\n  ['createStyle', 'editStyle', 'editHandleStyle', 'labelStyle', 'highlightStyle'\n  ].forEach(function (styleType) {\n    m_this[styleType] = function (arg1, arg2) {\n      return m_this.style(arg1, arg2, styleType);\n    };\n  });\n\n  /**\n   * Return the style dictionary for a particular state.\n   * @param {string} [state] The state to return styles for.  Defaults to the\n   *    current state.\n   * @returns {object} The style object for the state.  If there is no such\n   *    style defined, the default style is used.\n   */\n  this.styleForState = function (state) {\n    state = state || m_this.state();\n    /* for some states, fall back to the general style if they don't specify a\n     * value explicitly. */\n    if (state === annotationState.edit || state === annotationState.highlight) {\n      return $.extend({}, m_options.style, m_options[state + 'Style']);\n    }\n    if (state === annotationState.create) {\n      return $.extend({}, m_options.style, m_options.editStyle,\n                      m_options[state + 'Style']);\n    }\n    return m_options[state + 'Style'] || m_options.style || {};\n  };\n\n  /**\n   * Get the type of this annotation.\n   *\n   * @returns {string} The annotation type.\n   */\n  this.type = function () {\n    return m_type;\n  };\n\n  /**\n   * Get a list of renderable features for this annotation.  The list index is\n   * functionally a z-index for the feature.  Each entry is a dictionary with\n   * the key as the feature name (such as `line`, `quad`, or `polygon`), and\n   * the value a dictionary of values to pass to the feature constructor, such\n   * as `style` and `coordinates`.\n   *\n   * @returns {array} An array of features.\n   */\n  this.features = function () {\n    return [];\n  };\n\n  /**\n   * Handle a mouse click on this annotation.  If the event is processed,\n   * evt.handled should be set to `true` to prevent further processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClick = function (evt) {\n    return undefined;\n  };\n\n  /**\n   * Handle a mouse click on this annotation when in edit mode.  If the event\n   * is processed, evt.handled should be set to `true` to prevent further\n   * processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClickEdit = function (evt) {\n    return undefined;\n  };\n\n  /**\n   * Handle a mouse move on this annotation.\n   *\n   * @param {geo.event} evt The mouse move event.\n   * @returns {boolean} Truthy to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.mouseMove = function (evt) {\n    return undefined;\n  };\n\n  /**\n   * Get or set coordinates associated with this annotation in the map gcs\n   * coordinate system.\n   *\n   * @param {geo.geoPosition[]} [coordinates] An optional array of coordinates\n   *  to set.\n   * @returns {geo.geoPosition[]} The current array of coordinates.\n   */\n  this._coordinates = function (coordinates) {\n    return [];\n  };\n\n  this._coordinateOption = 'vertices';\n\n  /**\n   * Get coordinates associated with this annotation.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.geoPosition[]} An array of coordinates.\n   */\n  this.coordinates = function (gcs) {\n    var coord = m_this._coordinates() || [];\n    if (m_this.layer()) {\n      var map = m_this.layer().map();\n      gcs = (gcs === null ? map.gcs() : (\n        gcs === undefined ? map.ingcs() : gcs));\n      if (gcs !== map.gcs()) {\n        coord = transform.transformCoordinates(map.gcs(), gcs, coord);\n      }\n    }\n    return coord;\n  };\n\n  /**\n   * Mark this annotation as modified.  This just marks the parent layer as\n   * modified.\n   *\n   * @returns {this} The annotation.\n   */\n  this.modified = function () {\n    if (m_this.layer()) {\n      m_this.layer().modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Draw this annotation.  This just updates and draws the parent layer.\n   *\n   * @returns {this} The annotation.\n   */\n  this.draw = function () {\n    if (m_this.layer()) {\n      m_this.layer()._update();\n      m_this.layer().draw();\n    }\n    return m_this;\n  };\n\n  /**\n   * Return a list of styles that should be preserved in a geojson\n   * representation of the annotation.\n   *\n   * @returns {string[]} A list of style names to store.\n   */\n  this._geojsonStyles = function () {\n    return [\n      'closed', 'fill', 'fillColor', 'fillOpacity', 'lineCap', 'lineJoin',\n      'radius', 'stroke', 'strokeColor', 'strokeOffset', 'strokeOpacity',\n      'strokeWidth'];\n  };\n\n  /**\n   * Return the coordinates to be stored in a geojson geometry object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {array} An array of flattened coordinates in the interface gcs\n   *    coordinate system.  `undefined` if this annotation is incomplete.\n   */\n  this._geojsonCoordinates = function (gcs) {\n    return [];\n  };\n\n  /**\n   * Return the geometry type that is used to store this annotation in geojson.\n   *\n   * @returns {string} A geojson geometry type.\n   */\n  this._geojsonGeometryType = function () {\n    return '';\n  };\n\n  /**\n   * Return the annotation as a geojson object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @param {boolean} [includeCrs] If truthy, include the coordinate system.\n   * @returns {object} The annotation as a geojson object, or `undefined` if it\n   *    should not be represented (for instance, while it is being created).\n   */\n  this.geojson = function (gcs, includeCrs) {\n    var coor = m_this._geojsonCoordinates(gcs),\n        geotype = m_this._geojsonGeometryType(),\n        styles = m_this._geojsonStyles(),\n        objStyle = m_this.options('style') || {},\n        objLabelStyle = m_this.labelStyle() || {},\n        i, key, value;\n    if (!coor || !coor.length || !geotype) {\n      return;\n    }\n    var obj = {\n      type: 'Feature',\n      geometry: {\n        type: geotype,\n        coordinates: coor\n      },\n      properties: {\n        annotationType: m_type,\n        name: m_this.name(),\n        annotationId: m_this.id()\n      }\n    };\n    if (m_label) {\n      obj.properties.label = m_label;\n    }\n    if (m_description) {\n      obj.properties.description = m_description;\n    }\n    if (m_this.options('showLabel') === false) {\n      obj.properties.showLabel = m_this.options('showLabel');\n    }\n    for (i = 0; i < styles.length; i += 1) {\n      key = styles[i];\n      value = util.ensureFunction(objStyle[key])();\n      if (value !== undefined) {\n        if (key.toLowerCase().match(/color$/)) {\n          value = util.convertColorToHex(value, 'needed');\n        }\n        obj.properties[key] = value;\n      }\n    }\n    for (i = 0; i < textFeature.usedStyles.length; i += 1) {\n      key = textFeature.usedStyles[i];\n      value = util.ensureFunction(objLabelStyle[key])();\n      if (value !== undefined) {\n        if (key.toLowerCase().match(/color$/)) {\n          value = util.convertColorToHex(value, 'needed');\n        }\n        obj.properties['label' + key.charAt(0).toUpperCase() + key.slice(1)] = value;\n      }\n    }\n    if (includeCrs) {\n      var map = m_this.layer().map();\n      gcs = (gcs === null ? map.gcs() : (\n        gcs === undefined ? map.ingcs() : gcs));\n      obj.crs = {\n        type: 'name',\n        properties: {\n          type: 'proj4',\n          name: gcs\n        }\n      };\n    }\n    return obj;\n  };\n\n  /**\n   * Add edit handles to the feature list.\n   *\n   * @param {array} features The array of features to modify.\n   * @param {geo.geoPosition[]} vertices An array of vertices in map gcs\n   *    coordinates.\n   * @param {object} [opts] If specified, the keys are the types of the\n   *    handles.  This matches the `editHandleStyle.handle` object.  Any type\n   *    that is set to `false` in either `opts` or `editHandleStyle.handle`\n   *    will prevent those handles from being created.\n   * @param {boolean} [isOpen=false] If true, no edge handle will be created\n   *    between the last and first vertices.\n   */\n  this._addEditHandles = function (features, vertices, opts, isOpen) {\n    var editPoints,\n        style = $.extend({}, defaultEditHandleStyle, m_this.editHandleStyle()),\n        handles = util.ensureFunction(style.handles)() || {},\n        selected = (\n          m_this._editHandle && m_this._editHandle.handle &&\n          m_this._editHandle.handle.selected ?\n            m_this._editHandle.handle : undefined);\n    /* opts specify which handles are allowed.  They must be allowed by the\n     * original opts object and by the editHandleStyle.handle object. */\n    opts = $.extend({}, opts);\n    Object.keys(handles).forEach(function (key) {\n      if (handles[key] === false) {\n        opts[key] = false;\n      }\n    });\n    if (!features[editHandleFeatureLevel]) {\n      features[editHandleFeatureLevel] = {point: []};\n    }\n    editPoints = features[editHandleFeatureLevel].point;\n    vertices.forEach(function (pt, idx) {\n      if (opts.vertex !== false) {\n        editPoints.push($.extend({}, pt, {type: 'vertex', index: idx, style: style, editHandle: true}));\n      }\n      if (opts.edge !== false && idx !== vertices.length - 1 && (pt.x !== vertices[idx + 1].x || pt.y !== vertices[idx + 1].y)) {\n        editPoints.push($.extend({\n          x: (pt.x + vertices[idx + 1].x) / 2,\n          y: (pt.y + vertices[idx + 1].y) / 2\n        }, {type: 'edge', index: idx, style: style, editHandle: true}));\n      }\n      if (opts.edge !== false && !isOpen && idx === vertices.length - 1 && (pt.x !== vertices[0].x || pt.y !== vertices[0].y)) {\n        editPoints.push($.extend({\n          x: (pt.x + vertices[0].x) / 2,\n          y: (pt.y + vertices[0].y) / 2\n        }, {type: 'edge', index: idx, style: style, editHandle: true}));\n      }\n    });\n    if (opts.center !== false) {\n      editPoints.push($.extend({}, util.centerFromPerimeter(m_this._coordinates()), {type: 'center', style: style, editHandle: true}));\n    }\n    if (opts.rotate !== false) {\n      editPoints.push($.extend(m_this._rotateHandlePosition(\n        style.rotateHandleOffset,\n        style.rotateHandleRotation + (selected && selected.type === 'rotate' ? m_this._editHandle.amountRotated : 0)\n      ), {type: 'rotate', style: style, editHandle: true}));\n      if (m_this._editHandle && (!selected || selected.type !== 'rotate')) {\n        m_this._editHandle.amountRotated = 0;\n      }\n    }\n    if (opts.resize !== false) {\n      editPoints.push($.extend(m_this._rotateHandlePosition(\n        style.resizeHandleOffset,\n        style.resizeHandleRotation\n      ), {type: 'resize', style: style, editHandle: true}));\n    }\n    if (selected) {\n      editPoints.forEach(function (pt) {\n        if (pt.type === selected.type && pt.index === selected.index) {\n          pt.selected = true;\n        }\n      });\n    }\n  };\n\n  /**\n   * Process the edit center action for a general annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this._processEditActionCenter = function (evt) {\n    var start = m_this._editHandle.startCoordinates,\n        delta = {\n          x: evt.mouse.mapgcs.x - evt.state.origin.mapgcs.x,\n          y: evt.mouse.mapgcs.y - evt.state.origin.mapgcs.y\n        },\n        curPts = m_this._coordinates();\n    var pts = start.map(function (elem) {\n      return {x: elem.x + delta.x, y: elem.y + delta.y};\n    });\n    if (pts[0].x !== curPts[0].x || pts[0].y !== curPts[0].y) {\n      m_this._coordinates(pts);\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Process the edit rotate action for a general annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this._processEditActionRotate = function (evt) {\n    var handle = m_this._editHandle,\n        start = handle.startCoordinates,\n        delta = {\n          x: evt.mouse.mapgcs.x - evt.state.origin.mapgcs.x,\n          y: evt.mouse.mapgcs.y - evt.state.origin.mapgcs.y\n        },\n        ang1 = Math.atan2(\n          handle.rotatePosition.y - handle.center.y,\n          handle.rotatePosition.x - handle.center.x),\n        ang2 = Math.atan2(\n          handle.rotatePosition.y + delta.y - handle.center.y,\n          handle.rotatePosition.x + delta.x - handle.center.x),\n        ang = ang2 - ang1,\n        curPts = m_this._coordinates();\n    var pts = start.map(function (elem) {\n      var delta = {x: elem.x - handle.center.x, y: elem.y - handle.center.y};\n      return {\n        x: delta.x * Math.cos(ang) - delta.y * Math.sin(ang) + handle.center.x,\n        y: delta.x * Math.sin(ang) + delta.y * Math.cos(ang) + handle.center.y\n      };\n    });\n    if (pts[0].x !== curPts[0].x || pts[0].y !== curPts[0].y) {\n      m_this._coordinates(pts);\n      handle.amountRotated = handle.startAmountRotated + ang;\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Process the edit resize action for a general annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this._processEditActionResize = function (evt) {\n    var handle = m_this._editHandle,\n        start = handle.startCoordinates,\n        delta = {\n          x: evt.mouse.mapgcs.x - evt.state.origin.mapgcs.x,\n          y: evt.mouse.mapgcs.y - evt.state.origin.mapgcs.y\n        },\n        map = m_this.layer().map(),\n        p0 = map.gcsToDisplay(handle.center, null),\n        p1 = map.gcsToDisplay(handle.resizePosition, null),\n        p2 = map.gcsToDisplay({\n          x: handle.resizePosition.x + delta.x,\n          y: handle.resizePosition.y + delta.y\n        }, null),\n        d01 = Math.pow(Math.pow(p1.y - p0.y, 2) +\n                       Math.pow(p1.x - p0.x, 2), 0.5) -\n              handle.handle.style.resizeHandleOffset,\n        d02 = Math.pow(Math.pow(p2.y - p0.y, 2) +\n                       Math.pow(p2.x - p0.x, 2), 0.5) -\n              handle.handle.style.resizeHandleOffset,\n        curPts = m_this._coordinates();\n    if (d02 && d01) {\n      var scale = d02 / d01;\n      var pts = start.map(function (elem) {\n        return {\n          x: (elem.x - handle.center.x) * scale + handle.center.x,\n          y: (elem.y - handle.center.y) * scale + handle.center.y\n        };\n      });\n      if (pts[0].x !== curPts[0].x || pts[0].y !== curPts[0].y) {\n        m_this._coordinates(pts);\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Process the edit edge action for a general annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this._processEditActionEdge = function (evt) {\n    var handle = m_this._editHandle,\n        index = handle.handle.index,\n        curPts = m_this._coordinates();\n    curPts.splice(index + 1, 0, {x: handle.handle.x, y: handle.handle.y});\n    handle.handle.type = 'vertex';\n    handle.handle.index += 1;\n    handle.startCoordinates = curPts.slice();\n    m_this.modified();\n    return true;\n  };\n\n  /**\n   * Process the edit vertex action for a general annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @param {boolean} [canClose] if True, this annotation has a closed style\n   *    that indicates if the first and last vertices are joined.  If falsy, is\n   *    allowed to be changed to true.\n   * @returns {boolean|string} `true` to update the annotation, `false` to\n   *    prevent closure, any other falsy to not update anything.\n   */\n  this._processEditActionVertex = function (evt, canClose) {\n    var handle = m_this._editHandle,\n        index = handle.handle.index,\n        start = handle.startCoordinates,\n        curPts = m_this._coordinates(),\n        origLen = curPts.length,\n        origPt = curPts[index],\n        delta = {\n          x: evt.mouse.mapgcs.x - evt.state.origin.mapgcs.x,\n          y: evt.mouse.mapgcs.y - evt.state.origin.mapgcs.y\n        },\n        layer = m_this.layer(),\n        aPP = layer.options('adjacentPointProximity'),\n        near, atEnd;\n\n    curPts[index] = {\n      x: start[index].x + delta.x,\n      y: start[index].y + delta.y\n    };\n    if (layer.displayDistance(curPts[index], null, start[index], null) <= aPP) {\n      /* if we haven't moved at least aPP from where the vertex started, don't\n       * allow it to be merged into another vertex.  This prevents small scale\n       * edits from collapsing immediately. */\n    } else if (layer.displayDistance(\n      curPts[index], null,\n      curPts[(index + 1) % curPts.length], null) <= aPP) {\n      near = (index + 1) % curPts.length;\n    } else if (layer.displayDistance(\n      curPts[index], null,\n      curPts[(index + curPts.length - 1) % curPts.length], null) <= aPP) {\n      near = (index + curPts.length - 1) % curPts.length;\n    }\n    atEnd = ((near === 0 && index === curPts.length - 1) ||\n             (near === curPts.length - 1 && index === 0));\n    if (canClose === false && atEnd) {\n      near = undefined;\n    }\n    if (near !== undefined && curPts.length > (canClose || m_this.options('style').closed ? 3 : 2)) {\n      curPts[index] = {x: curPts[near].x, y: curPts[near].y};\n      if (evt.event === geo_event.actionup) {\n        if (canClose && atEnd) {\n          m_this.options('style').closed = true;\n        }\n        curPts.splice(index, 1);\n      }\n    }\n    if (curPts.length === origLen &&\n        curPts[index].x === origPt.x && curPts[index].y === origPt.y) {\n      return false;\n    }\n    m_this._coordinates(curPts);\n    return true;\n  };\n};\n\n/**\n * Rectangle annotation specification.  Extends {@link geo.annotation.spec}.\n *\n * @typedef {object} geo.rectangleAnnotation.spec\n * @extends geo.annotation.spec\n * @property {geo.geoPosition[]} [corners] A list of four corners in map gcs\n *    coordinates.  These must be in order around the perimeter of the\n *    rectangle (in either direction).\n * @property {geo.geoPosition[]} [coordinates] An alternate name for `corners`.\n * @property {geo.polygonFeature.styleSpec} [style] The style to apply to a\n *    finished rectangle.  This uses styles for {@link geo.polygonFeature}.\n * @property {geo.polygonFeature.styleSpec} [editStyle] The style to apply to a\n *    rectangle in edit mode.\n */\n\n/**\n * Rectangle annotation class.\n *\n * Rectangles are always rendered as polygons.  This could be changed -- if no\n * stroke is specified, the quad feature would be sufficient and work on more\n * renderers.\n *\n * @class\n * @alias geo.rectangleAnnotation\n * @extends geo.annotation\n *\n * @param {geo.rectangleAnnotation.spec?} [args] Options for the annotation.\n */\nvar rectangleAnnotation = function (args) {\n  'use strict';\n  if (!(this instanceof rectangleAnnotation)) {\n    return new rectangleAnnotation(args);\n  }\n\n  args = $.extend(true, {}, {\n    style: {\n      fill: true,\n      fillColor: {r: 0, g: 1, b: 0},\n      fillOpacity: 0.25,\n      polygon: function (d) { return d.polygon; },\n      stroke: true,\n      strokeColor: {r: 0, g: 0, b: 0},\n      strokeOpacity: 1,\n      strokeWidth: 3,\n      uniformPolygon: true\n    },\n    highlightStyle: {\n      fillColor: {r: 0, g: 1, b: 1},\n      fillOpacity: 0.5,\n      strokeWidth: 5\n    },\n    createStyle: {\n      fillColor: {r: 0.3, g: 0.3, b: 0.3},\n      fillOpacity: 0.25,\n      strokeColor: {r: 0, g: 0, b: 1}\n    }\n  }, args || {});\n  args.corners = args.corners || args.coordinates || [];\n  delete args.coordinates;\n  annotation.call(this, 'rectangle', args);\n\n  var m_this = this,\n      s_actions = this.actions,\n      s_processEditAction = this.processEditAction;\n\n  /**\n   * Return actions needed for the specified state of this annotation.\n   *\n   * @param {string} [state] The state to return actions for.  Defaults to\n   *    the current state.\n   * @returns {geo.actionRecord[]} A list of actions.\n   */\n  this.actions = function (state) {\n    if (!state) {\n      state = m_this.state();\n    }\n    switch (state) {\n      case annotationState.create:\n        return [{\n          action: geo_action.annotation_rectangle,\n          name: 'rectangle create',\n          owner: annotationActionOwner,\n          input: 'left',\n          modifiers: {shift: false, ctrl: false},\n          selectionRectangle: true\n        }];\n      default:\n        return s_actions.apply(m_this, arguments);\n    }\n  };\n\n  /**\n   * Process any actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if the\n   *    annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.processAction = function (evt) {\n    var layer = m_this.layer();\n    if (m_this.state() !== annotationState.create || !layer ||\n        evt.event !== geo_event.actionselection ||\n        evt.state.action !== geo_action.annotation_rectangle) {\n      return;\n    }\n    var map = layer.map(),\n        corners = [\n          /* Keep in map gcs, not interface gcs to avoid wrapping issues */\n          map.displayToGcs({x: evt.lowerLeft.x, y: evt.lowerLeft.y}, null),\n          map.displayToGcs({x: evt.lowerLeft.x, y: evt.upperRight.y}, null),\n          map.displayToGcs({x: evt.upperRight.x, y: evt.upperRight.y}, null),\n          map.displayToGcs({x: evt.upperRight.x, y: evt.lowerLeft.y}, null)\n        ];\n    /* Don't keep rectangles that have nearly zero area in display pixels */\n    if (layer.displayDistance(corners[0], null, corners[1], null) *\n        layer.displayDistance(corners[0], null, corners[3], null) < 0.01) {\n      return 'remove';\n    }\n    m_this.options('corners', corners);\n    m_this.state(annotationState.done);\n    return 'done';\n  };\n\n  /**\n   * Get a list of renderable features for this annotation.\n   *\n   * @returns {array} An array of features.\n   */\n  this.features = function () {\n    var opt = m_this.options(),\n        state = m_this.state(),\n        features;\n    switch (state) {\n      case annotationState.create:\n        features = [];\n        if (opt.corners && opt.corners.length >= 4) {\n          features = [{\n            polygon: {\n              polygon: opt.corners,\n              style: m_this.styleForState(state)\n            }\n          }];\n        }\n        break;\n      default:\n        features = [{\n          polygon: {\n            polygon: opt.corners,\n            style: m_this.styleForState(state)\n          }\n        }];\n        if (state === annotationState.edit) {\n          m_this._addEditHandles(features, opt.corners);\n        }\n        break;\n    }\n    return features;\n  };\n\n  /**\n   * Get and optionally set coordinates associated with this annotation in the\n   * map gcs coordinate system.\n   *\n   * @param {geo.geoPosition[]} [coordinates] An optional array of coordinates\n   *  to set.\n   * @returns {geo.geoPosition[]} The current array of coordinates.\n   */\n  this._coordinates = function (coordinates) {\n    if (coordinates && coordinates.length >= 4) {\n      m_this.options('corners', coordinates.slice(0, 4));\n      /* Should we ensure that the four points form a rectangle in the current\n       * projection, though this might not be rectangular in another gcs? */\n    }\n    return m_this.options('corners');\n  };\n\n  this._coordinateOption = 'corners';\n\n  /**\n   * Return the coordinates to be stored in a geojson geometry object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {array} An array of flattened coordinates in the interface gcs\n   *    coordinate system.  `undefined` if this annotation is incomplete.\n   */\n  this._geojsonCoordinates = function (gcs) {\n    var src = m_this.coordinates(gcs);\n    if (!src || m_this.state() === annotationState.create || src.length < 4) {\n      return;\n    }\n    var coor = [];\n    for (var i = 0; i < 4; i += 1) {\n      coor.push([src[i].x, src[i].y]);\n    }\n    coor.push([src[0].x, src[0].y]);\n    return [coor];\n  };\n\n  /**\n   * Return the geometry type that is used to store this annotation in geojson.\n   *\n   * @returns {string} A geojson geometry type.\n   */\n  this._geojsonGeometryType = function () {\n    return 'Polygon';\n  };\n\n  /**\n   * Return a list of styles that should be preserved in a geojson\n   * representation of the annotation.\n   *\n   * @returns {string[]} A list of style names to store.\n   */\n  this._geojsonStyles = function () {\n    return [\n      'fill', 'fillColor', 'fillOpacity', 'lineCap', 'lineJoin', 'stroke',\n      'strokeColor', 'strokeOffset', 'strokeOpacity', 'strokeWidth'];\n  };\n\n  /**\n   * Set three corners based on an initial corner and a mouse event.\n   *\n   * @param {geo.geoPosition} corners An array of four corners to update.\n   * @param {geo.event} evt The mouse move event.\n   */\n  this._setCornersFromMouse = function (corners, evt) {\n    var map = m_this.layer().map(),\n        c0 = map.gcsToDisplay({x: corners[0].x, y: corners[0].y}, null),\n        c2 = map.gcsToDisplay(evt.mapgcs, null),\n        c1 = {x: c2.x, y: c0.y},\n        c3 = {x: c0.x, y: c2.y};\n    corners[2] = $.extend({}, evt.mapgcs);\n    corners[1] = map.displayToGcs(c1, null);\n    corners[3] = map.displayToGcs(c3, null);\n  };\n\n  /**\n   * Handle a mouse move on this annotation.\n   *\n   * @param {geo.event} evt The mouse move event.\n   * @returns {boolean} Truthy to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.mouseMove = function (evt) {\n    if (m_this.state() !== annotationState.create) {\n      return;\n    }\n    var corners = m_this.options('corners');\n    if (corners.length) {\n      m_this._setCornersFromMouse(corners, evt);\n      return true;\n    }\n  };\n\n  /**\n   * Handle a mouse click on this annotation.  If the event is processed,\n   * evt.handled should be set to `true` to prevent further processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClick = function (evt) {\n    var layer = m_this.layer();\n    if (m_this.state() !== annotationState.create || !layer) {\n      return;\n    }\n    if (!evt.buttonsDown.left && !evt.buttonsDown.right) {\n      return;\n    }\n    var corners = m_this.options('corners');\n    if (evt.buttonsDown.right && !corners.length) {\n      return;\n    }\n    evt.handled = true;\n    if (corners.length) {\n      m_this._setCornersFromMouse(corners, evt);\n      /* Don't keep rectangles that have nearly zero area in display pixels */\n      if (layer.displayDistance(corners[0], null, corners[1], null) *\n          layer.displayDistance(corners[0], null, corners[3], null) < 0.01) {\n        return 'remove';\n      }\n      m_this.state(annotationState.done);\n      return 'done';\n    }\n    if (evt.buttonsDown.left) {\n      corners.push($.extend({}, evt.mapgcs));\n      corners.push($.extend({}, evt.mapgcs));\n      corners.push($.extend({}, evt.mapgcs));\n      corners.push($.extend({}, evt.mapgcs));\n      return true;\n    }\n  };\n\n  /**\n   * Process any edit actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.processEditAction = function (evt) {\n    var start = m_this._editHandle.startCoordinates,\n        delta = {\n          x: evt.mouse.mapgcs.x - evt.state.origin.mapgcs.x,\n          y: evt.mouse.mapgcs.y - evt.state.origin.mapgcs.y\n        },\n        type = m_this._editHandle.handle.type,\n        index = m_this._editHandle.handle.index,\n        ang = [\n          Math.atan2(start[1].y - start[0].y, start[1].x - start[0].x),\n          Math.atan2(start[2].y - start[1].y, start[2].x - start[1].x),\n          Math.atan2(start[3].y - start[2].y, start[3].x - start[2].x),\n          Math.atan2(start[0].y - start[3].y, start[0].x - start[3].x)\n        ],\n        corners, delta1, delta2, ang1, ang2;\n    // an angle can be zero because it is horizontal or undefined.  If opposite\n    // angles are both zero, this is a degenerate rectangle (a line or a point)\n    if (!ang[0] && !ang[1] && !ang[2] && !ang[3]) {\n      ang[1] = Math.PI / 2;\n      ang[2] = Math.PI;\n      ang[3] = -Math.PI / 2;\n    }\n    if (!ang[0] && !ang[2]) {\n      ang[0] = ang[1] - Math.PI / 2;\n      ang[2] = ang[1] + Math.PI / 2;\n    }\n    if (!ang[1] && !ang[3]) {\n      ang[1] = ang[2] - Math.PI / 2;\n      ang[3] = ang[2] + Math.PI / 2;\n    }\n    switch (type) {\n      case 'vertex':\n        corners = start.map(function (elem) {\n          return {x: elem.x, y: elem.y};\n        });\n        ang1 = ang[(index + 1) % 4];\n        delta1 = {\n          x: (delta.x * Math.cos(ang1) + delta.y * Math.sin(ang1)) * Math.cos(ang1),\n          y: (delta.y * Math.sin(ang1) + delta.x * Math.cos(ang1)) * Math.sin(ang1)\n        };\n        ang2 = ang[index];\n        delta2 = {\n          x: (delta.x * Math.cos(ang2) + delta.y * Math.sin(ang2)) * Math.cos(ang2),\n          y: (delta.y * Math.sin(ang2) + delta.x * Math.cos(ang2)) * Math.sin(ang2)\n        };\n        corners[index].x += delta.x;\n        corners[index].y += delta.y;\n        corners[(index + 1) % 4].x += delta1.x;\n        corners[(index + 1) % 4].y += delta1.y;\n        corners[(index + 3) % 4].x += delta2.x;\n        corners[(index + 3) % 4].y += delta2.y;\n        m_this.options('corners', corners);\n        return true;\n      case 'edge':\n        corners = start.map(function (elem) {\n          return {x: elem.x, y: elem.y};\n        });\n        ang1 = ang[(index + 1) % 4];\n        delta = {\n          x: (delta.x * Math.cos(ang1) + delta.y * Math.sin(ang1)) * Math.cos(ang1),\n          y: (delta.y * Math.sin(ang1) + delta.x * Math.cos(ang1)) * Math.sin(ang1)\n        };\n        corners[index].x += delta.x;\n        corners[index].y += delta.y;\n        corners[(index + 1) % 4].x += delta.x;\n        corners[(index + 1) % 4].y += delta.y;\n        m_this.options('corners', corners);\n        return true;\n    }\n    return s_processEditAction.apply(m_this, arguments);\n  };\n};\ninherit(rectangleAnnotation, annotation);\n\nvar rectangleRequiredFeatures = {};\nrectangleRequiredFeatures[polygonFeature.capabilities.feature] = true;\nregisterAnnotation('rectangle', rectangleAnnotation, rectangleRequiredFeatures);\n\n/**\n * Polygon annotation specification.  Extends {@link geo.annotation.spec}.\n *\n * @typedef {object} geo.polygonAnnotation.spec\n * @extends geo.annotation.spec\n * @property {geo.geoPosition[]} [vertices] A list of vertices in map gcs\n *    coordinates.  These must be in order around the perimeter of the polygon\n *    (in either direction).\n * @property {geo.geoPosition[]} [coordinates] An alternate name for\n *    `vertices`.\n * @property {geo.polygonFeature.styleSpec} [style] The style to apply to a\n *    finished polygon.  This uses styles for {@link geo.polygonFeature}.\n * @property {geo.polygonFeature.styleSpec} [editStyle] The style to apply to ai\n *    polygon in edit mode.\n */\n\n/**\n * Polygon annotation class\n *\n * When complete, polygons are rendered as polygons.  During creation they are\n * rendered as lines and polygons.\n *\n * @class\n * @alias geo.polygonAnnotation\n * @extends geo.annotation\n *\n * @param {geo.polygonAnnotation.spec?} [args] Options for the annotation.\n */\nvar polygonAnnotation = function (args) {\n  'use strict';\n  if (!(this instanceof polygonAnnotation)) {\n    return new polygonAnnotation(args);\n  }\n\n  args = $.extend(true, {}, {\n    style: {\n      fill: true,\n      fillColor: {r: 0, g: 1, b: 0},\n      fillOpacity: 0.25,\n      polygon: function (d) { return d.polygon; },\n      stroke: true,\n      strokeColor: {r: 0, g: 0, b: 0},\n      strokeOpacity: 1,\n      strokeWidth: 3,\n      uniformPolygon: true\n    },\n    highlightStyle: {\n      fillColor: {r: 0, g: 1, b: 1},\n      fillOpacity: 0.5,\n      strokeWidth: 5\n    },\n    createStyle: {\n      closed: false,\n      fillColor: {r: 0.3, g: 0.3, b: 0.3},\n      fillOpacity: 0.25,\n      line: function (d) {\n        /* Return an array that has the same number of items as we have\n         * vertices. */\n        return Array.apply(null, Array(m_this.options('vertices').length)).map(\n          function () { return d; });\n      },\n      position: function (d, i) {\n        return m_this.options('vertices')[i];\n      },\n      stroke: false,\n      strokeColor: {r: 0, g: 0, b: 1}\n    }\n  }, args || {});\n  args.vertices = args.vertices || args.coordinates || [];\n  delete args.coordinates;\n  annotation.call(this, 'polygon', args);\n\n  var m_this = this;\n\n  /**\n   * Get a list of renderable features for this annotation.  When the polygon\n   * is done, this is just a single polygon.  During creation this can be a\n   * polygon and line at z-levels 1 and 2.\n   *\n   * @returns {array} An array of features.\n   */\n  this.features = function () {\n    var opt = m_this.options(),\n        state = m_this.state(),\n        style = m_this.styleForState(state),\n        features;\n    switch (state) {\n      case annotationState.create:\n        features = [];\n        if (opt.vertices && opt.vertices.length >= 3) {\n          features[1] = {\n            polygon: {\n              polygon: opt.vertices,\n              style: style\n            }\n          };\n        }\n        if (opt.vertices && opt.vertices.length >= 2) {\n          features[2] = {\n            line: {\n              line: opt.vertices,\n              style: style\n            }\n          };\n        }\n        break;\n      default:\n        features = [{\n          polygon: {\n            polygon: opt.vertices,\n            style: style\n          }\n        }];\n        if (state === annotationState.edit) {\n          m_this._addEditHandles(features, opt.vertices);\n        }\n        break;\n    }\n    return features;\n  };\n\n  /**\n   * Get and optionally set coordinates associated with this annotation in the\n   * map gcs coordinate system.\n   *\n   * @param {geo.geoPosition[]} [coordinates] An optional array of coordinates\n   *  to set.\n   * @returns {geo.geoPosition[]} The current array of coordinates.\n   */\n  this._coordinates = function (coordinates) {\n    if (coordinates) {\n      m_this.options('vertices', coordinates);\n    }\n    return m_this.options('vertices');\n  };\n\n  /**\n   * Handle a mouse move on this annotation.\n   *\n   * @param {geo.event} evt The mouse move event.\n   * @returns {boolean} Truthy to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.mouseMove = function (evt) {\n    if (m_this.state() !== annotationState.create) {\n      return;\n    }\n    var vertices = m_this.options('vertices');\n    if (vertices.length) {\n      vertices[vertices.length - 1] = evt.mapgcs;\n      return true;\n    }\n  };\n\n  /**\n   * Handle a mouse click on this annotation.  If the event is processed,\n   * evt.handled should be set to `true` to prevent further processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClick = function (evt) {\n    var layer = m_this.layer();\n    if (m_this.state() !== annotationState.create || !layer) {\n      return;\n    }\n    var end = !!evt.buttonsDown.right, skip;\n    if (!evt.buttonsDown.left && !evt.buttonsDown.right) {\n      return;\n    }\n    var vertices = m_this.options('vertices');\n    if (evt.buttonsDown.right && !vertices.length) {\n      return;\n    }\n    evt.handled = true;\n    if (evt.buttonsDown.left) {\n      if (vertices.length) {\n        if (vertices.length >= 2 && layer.displayDistance(\n          vertices[vertices.length - 2], null, evt.map, 'display') <=\n          layer.options('adjacentPointProximity')) {\n          skip = true;\n          if (m_this._lastClick &&\n              evt.time - m_this._lastClick < layer.options('dblClickTime')) {\n            end = true;\n          }\n        } else if (vertices.length >= 2 && layer.displayDistance(\n          vertices[0], null, evt.map, 'display') <=\n          layer.options('finalPointProximity')) {\n          end = true;\n        } else {\n          vertices[vertices.length - 1] = evt.mapgcs;\n        }\n      } else {\n        vertices.push(evt.mapgcs);\n      }\n      if (!end && !skip) {\n        vertices.push(evt.mapgcs);\n      }\n      m_this._lastClick = evt.time;\n    }\n    if (end) {\n      if (vertices.length < 4) {\n        return 'remove';\n      }\n      vertices.pop();\n      m_this.state(annotationState.done);\n      return 'done';\n    }\n    return !skip;\n  };\n\n  /**\n   * Return the coordinates to be stored in a geojson geometry object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {array} An array of flattened coordinates in the interface gcs\n   *    coordinate system.  `undefined` if this annotation is incomplete.\n   */\n  this._geojsonCoordinates = function (gcs) {\n    var src = m_this.coordinates(gcs);\n    if (!src || src.length < 3 || m_this.state() === annotationState.create) {\n      return;\n    }\n    var coor = [];\n    for (var i = 0; i < src.length; i += 1) {\n      coor.push([src[i].x, src[i].y]);\n    }\n    coor.push([src[0].x, src[0].y]);\n    return [coor];\n  };\n\n  /**\n   * Return the geometry type that is used to store this annotation in geojson.\n   *\n   * @returns {string} A geojson geometry type.\n   */\n  this._geojsonGeometryType = function () {\n    return 'Polygon';\n  };\n\n  /**\n   * Return a list of styles that should be preserved in a geojson\n   * representation of the annotation.\n   *\n   * @returns {string[]} A list of style names to store.\n   */\n  this._geojsonStyles = function () {\n    return [\n      'fill', 'fillColor', 'fillOpacity', 'lineCap', 'lineJoin', 'stroke',\n      'strokeColor', 'strokeOffset', 'strokeOpacity', 'strokeWidth'];\n  };\n};\ninherit(polygonAnnotation, annotation);\n\nvar polygonRequiredFeatures = {};\npolygonRequiredFeatures[polygonFeature.capabilities.feature] = true;\npolygonRequiredFeatures[lineFeature.capabilities.basic] = [annotationState.create];\nregisterAnnotation('polygon', polygonAnnotation, polygonRequiredFeatures);\n\n/**\n * Line annotation specification.  Extends {@link geo.annotation.spec}.\n *\n * @typedef {object} geo.lineAnnotation.spec\n * @extends geo.annotation.spec\n * @property {geo.geoPosition[]} [vertices] A list of vertices in map gcs\n *    coordinates.\n * @property {geo.geoPosition[]} [coordinates] An alternate name for\n *    `vertices`.\n * @property {geo.lineFeature.styleSpec} [style] The style to apply to a\n *    finished line.  This uses styles for {@link geo.lineFeature}.\n * @property {geo.lineFeature.styleSpec} [editStyle] The style to apply to a\n *    line in edit mode.\n */\n\n/**\n * Line annotation class.\n *\n * @class\n * @alias geo.lineAnnotation\n * @extends geo.annotation\n *\n * @param {geo.lineAnnotation.spec?} [args] Options for the annotation.\n */\nvar lineAnnotation = function (args) {\n  'use strict';\n  if (!(this instanceof lineAnnotation)) {\n    return new lineAnnotation(args);\n  }\n\n  args = $.extend(true, {}, {\n    style: {\n      line: function (d) {\n        /* Return an array that has the same number of items as we have\n         * vertices. */\n        return Array.apply(null, Array(m_this.options('vertices').length)).map(\n          function () { return d; });\n      },\n      position: function (d, i) {\n        return m_this.options('vertices')[i];\n      },\n      strokeColor: {r: 0, g: 0, b: 0},\n      strokeOpacity: 1,\n      strokeWidth: 3,\n      closed: false,\n      lineCap: 'butt',\n      lineJoin: 'miter'\n    },\n    highlightStyle: {\n      strokeWidth: 5\n    },\n    createStyle: {\n      line: function (d) {\n        /* Return an array that has the same number of items as we have\n         * vertices. */\n        return Array.apply(null, Array(m_this.options('vertices').length)).map(\n          function () { return d; });\n      },\n      position: function (d, i) {\n        return m_this.options('vertices')[i];\n      },\n      strokeColor: {r: 0, g: 0, b: 1},\n      strokeOpacity: 1,\n      strokeWidth: 3,\n      closed: false,\n      lineCap: 'butt',\n      lineJoin: 'miter'\n    }\n  }, args || {});\n  args.vertices = args.vertices || args.coordinates || [];\n  delete args.coordinates;\n  annotation.call(this, 'line', args);\n\n  var m_this = this,\n      s_actions = this.actions,\n      s_processEditAction = this.processEditAction;\n\n  /**\n   * Get a list of renderable features for this annotation.\n   *\n   * @returns {array} An array of features.\n   */\n  this.features = function () {\n    var opt = m_this.options(),\n        state = m_this.state(),\n        features;\n    switch (state) {\n      case annotationState.create:\n        features = [{\n          line: {\n            line: opt.vertices,\n            style: m_this.styleForState(state)\n          }\n        }];\n        break;\n      default:\n        features = [{\n          line: {\n            line: opt.vertices,\n            style: m_this.styleForState(state)\n          }\n        }];\n        if (state === annotationState.edit) {\n          m_this._addEditHandles(features, opt.vertices, undefined, !m_this.style('closed'));\n        }\n        break;\n    }\n    return features;\n  };\n\n  /**\n   * Get and optionally set coordinates associated with this annotation in the\n   * map gcs coordinate system.\n   *\n   * @param {geo.geoPosition[]} [coordinates] An optional array of coordinates\n   *  to set.\n   * @returns {geo.geoPosition[]} The current array of coordinates.\n   */\n  this._coordinates = function (coordinates) {\n    if (coordinates) {\n      m_this.options('vertices', coordinates);\n    }\n    return m_this.options('vertices');\n  };\n\n  /**\n   * Handle a mouse move on this annotation.\n   *\n   * @param {geo.event} evt The mouse move event.\n   * @returns {boolean} Truthy to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.mouseMove = function (evt) {\n    if (m_this.state() !== annotationState.create) {\n      return;\n    }\n    var vertices = m_this.options('vertices');\n    if (vertices.length) {\n      vertices[vertices.length - 1] = evt.mapgcs;\n      return true;\n    }\n  };\n\n  /**\n   * Handle a mouse click on this annotation.  If the event is processed,\n   * evt.handled should be set to `true` to prevent further processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClick = function (evt) {\n    var layer = m_this.layer();\n    if (m_this.state() !== annotationState.create || !layer) {\n      return;\n    }\n    var end = !!evt.buttonsDown.right, skip;\n    if (!evt.buttonsDown.left && !evt.buttonsDown.right) {\n      return;\n    }\n    var vertices = m_this.options('vertices');\n    if (evt.buttonsDown.right && !vertices.length) {\n      return;\n    }\n    evt.handled = true;\n    if (evt.buttonsDown.left) {\n      if (vertices.length) {\n        if (vertices.length >= 2 && layer.displayDistance(\n          vertices[vertices.length - 2], null, evt.map, 'display') <=\n          layer.options('adjacentPointProximity')) {\n          skip = true;\n          if (m_this._lastClick &&\n              evt.time - m_this._lastClick < layer.options('dblClickTime')) {\n            end = true;\n          }\n        } else if (vertices.length >= 2 && layer.displayDistance(\n          vertices[0], null, evt.map, 'display') <=\n          layer.options('finalPointProximity')) {\n          end = 'close';\n        } else {\n          vertices[vertices.length - 1] = evt.mapgcs;\n        }\n      } else {\n        vertices.push(evt.mapgcs);\n      }\n      if (!end && !skip) {\n        vertices.push(evt.mapgcs);\n      }\n      m_this._lastClick = evt.time;\n      m_this._lastClickVertexCount = vertices.length;\n    }\n    if (end) {\n      if (vertices.length < 3) {\n        return 'remove';\n      }\n      vertices.pop();\n      m_this.options('style').closed = end === 'close';\n      m_this.state(annotationState.done);\n      return 'done';\n    }\n    return !skip;\n  };\n\n  /**\n   * Return actions needed for the specified state of this annotation.\n   *\n   * @param {string} [state] The state to return actions for.  Defaults to\n   *    the current state.\n   * @returns {geo.actionRecord[]} A list of actions.\n   */\n  this.actions = function (state) {\n    if (!state) {\n      state = m_this.state();\n    }\n    switch (state) {\n      case annotationState.create:\n        return [{\n          action: geo_action.annotation_line,\n          name: 'line create',\n          owner: annotationActionOwner,\n          input: 'left',\n          modifiers: {shift: false, ctrl: false}\n        }, {\n          action: geo_action.annotation_line,\n          name: 'line create',\n          owner: annotationActionOwner,\n          input: 'pan'\n        }];\n      default:\n        return s_actions.apply(m_this, arguments);\n    }\n  };\n\n  /**\n   * Process any actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if the\n   *    annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.processAction = function (evt) {\n    var layer = m_this.layer();\n    if (m_this.state() !== annotationState.create || !layer ||\n        evt.state.action !== geo_action.annotation_line) {\n      return;\n    }\n    var cpp = layer.options('continuousPointProximity');\n    var cpc = layer.options('continuousPointColinearity');\n    if (cpp || cpp === 0) {\n      var vertices = m_this.options('vertices');\n      if (!vertices.length) {\n        vertices.push(evt.mouse.mapgcs);\n        vertices.push(evt.mouse.mapgcs);\n        return true;\n      }\n      var dist = layer.displayDistance(vertices[vertices.length - 2], null, evt.mouse.map, 'display');\n      if (dist && dist > cpp) {\n        // combine nearly colinear points\n        if (vertices.length >= (m_this._lastClickVertexCount || 1) + 3) {\n          var d01 = layer.displayDistance(vertices[vertices.length - 3], null, vertices[vertices.length - 2], null),\n              d12 = dist,\n              d02 = layer.displayDistance(vertices[vertices.length - 3], null, evt.mouse.map, 'display');\n          if (d01 && d02) {\n            var costheta = (d02 * d02 - d01 * d01 - d12 * d12) / (2 * d01 * d12);\n            if (costheta > Math.cos(cpc)) {\n              vertices.pop();\n            }\n          }\n        }\n        vertices[vertices.length - 1] = evt.mouse.mapgcs;\n        vertices.push(evt.mouse.mapgcs);\n        return true;\n      }\n    }\n  };\n\n  /**\n   * Return the coordinates to be stored in a geojson geometry object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {array} An array of flattened coordinates in the interface gcs\n   *    coordinate system.  `undefined` if this annotation is incomplete.\n   */\n  this._geojsonCoordinates = function (gcs) {\n    var src = m_this.coordinates(gcs);\n    if (!src || src.length < 2 || m_this.state() === annotationState.create) {\n      return;\n    }\n    var coor = [];\n    for (var i = 0; i < src.length; i += 1) {\n      coor.push([src[i].x, src[i].y]);\n    }\n    return coor;\n  };\n\n  /**\n   * Return the geometry type that is used to store this annotation in geojson.\n   *\n   * @returns {string} A geojson geometry type.\n   */\n  this._geojsonGeometryType = function () {\n    return 'LineString';\n  };\n\n  /**\n   * Return a list of styles that should be preserved in a geojson\n   * representation of the annotation.\n   *\n   * @returns {string[]} A list of style names to store.\n   */\n  this._geojsonStyles = function () {\n    return [\n      'closed', 'lineCap', 'lineJoin', 'strokeColor', 'strokeOffset',\n      'strokeOpacity', 'strokeWidth'];\n  };\n\n  /**\n   * Process any edit actions for this annotation.\n   *\n   * @param {geo.event} evt The action event.\n   * @returns {boolean|string} `true` to update the annotation, falsy to not\n   *    update anything.\n   */\n  this.processEditAction = function (evt) {\n    switch (m_this._editHandle.handle.type) {\n      case 'vertex':\n        return m_this._processEditActionVertex(evt, true);\n    }\n    return s_processEditAction.apply(m_this, arguments);\n  };\n\n  /**\n   * Handle a mouse click on this annotation when in edit mode.  If the event\n   * is processed, evt.handled should be set to `true` to prevent further\n   * processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClickEdit = function (evt) {\n    // if we get a left double click on an edge on a closed line, break the\n    // line at that edge\n    var layer = m_this.layer(),\n        handle = m_this._editHandle,\n        split;\n    // ensure we are in edit mode and this is a left click\n    if (m_this.state() !== annotationState.edit || !layer || !evt.buttonsDown.left) {\n      return;\n    }\n    // ensure this is an edge on a closed line\n    if (!handle || !handle.handle.selected || handle.handle.type !== 'edge' || !m_this.options('style').closed) {\n      return;\n    }\n    evt.handled = true;\n    if (m_this._lastClick && evt.time - m_this._lastClick < layer.options('dblClickTime')) {\n      split = true;\n    }\n    m_this._lastClick = evt.time;\n    if (split) {\n      var index = handle.handle.index,\n          curPts = m_this._coordinates(),\n          pts = curPts.slice(index + 1).concat(curPts.slice(0, index + 1));\n      m_this._coordinates(pts);\n      m_this.options('style').closed = false;\n      handle.handle.index = undefined;\n      return true;\n    }\n  };\n\n};\ninherit(lineAnnotation, annotation);\n\nvar lineRequiredFeatures = {};\nlineRequiredFeatures[lineFeature.capabilities.basic] = [annotationState.create];\nregisterAnnotation('line', lineAnnotation, lineRequiredFeatures);\n\n/**\n * Point annotation specification.  Extends {@link geo.annotation.spec}.\n *\n * @typedef {object} geo.pointAnnotation.spec\n * @extends geo.annotation.spec\n * @property {geo.geoPosition} [position] A coordinate in map gcs coordinates.\n * @property {geo.geoPosition[]} [coordinates] An array with one coordinate to\n *    use in place of `position`.\n * @property {geo.pointFeature.styleSpec} [style] The style to apply to a\n *    finished point.  This uses styles for {@link geo.pointFeature}.\n * @property {boolean|number} [style.scaled=false] If `false`, the point is not\n *    scaled with zoom level.  If `true`, the radius is based on the zoom level\n *    at first instantiation.  If a number, the radius is used at the `scaled`\n *    zoom level.\n * @property {geo.pointFeature.styleSpec} [editStyle] The style to apply to a\n *    point in edit mode.\n */\n\n/**\n * Point annotation class.\n *\n * @class\n * @alias geo.pointAnnotation\n * @extends geo.annotation\n *\n * @param {geo.pointAnnotation.spec?} [args] Options for the annotation.\n */\nvar pointAnnotation = function (args) {\n  'use strict';\n  if (!(this instanceof pointAnnotation)) {\n    return new pointAnnotation(args);\n  }\n\n  args = $.extend(true, {}, {\n    style: {\n      fill: true,\n      fillColor: {r: 0, g: 1, b: 0},\n      fillOpacity: 0.25,\n      radius: 10,\n      scaled: false,\n      stroke: true,\n      strokeColor: {r: 0, g: 0, b: 0},\n      strokeOpacity: 1,\n      strokeWidth: 3\n    },\n    createStyle: {\n      fillColor: {r: 0.3, g: 0.3, b: 0.3},\n      fillOpacity: 0.25,\n      strokeColor: {r: 0, g: 0, b: 1}\n    },\n    highlightStyle: {\n      fillColor: {r: 0, g: 1, b: 1},\n      fillOpacity: 0.5,\n      strokeWidth: 5\n    }\n  }, args || {});\n  args.position = args.position || (args.coordinates ? args.coordinates[0] : undefined);\n  delete args.coordinates;\n  annotation.call(this, 'point', args);\n\n  var m_this = this;\n\n  /**\n   * Get a list of renderable features for this annotation.\n   *\n   * @returns {array} An array of features.\n   */\n  this.features = function () {\n    var opt = m_this.options(),\n        state = m_this.state(),\n        features, style, scaleOnZoom;\n    switch (state) {\n      case annotationState.create:\n        features = [];\n        break;\n      default:\n        style = m_this.styleForState(state);\n        if (opt.style.scaled || opt.style.scaled === 0) {\n          if (opt.style.scaled === true) {\n            opt.style.scaled = m_this.layer().map().zoom();\n          }\n          style = $.extend({}, style, {\n            radius: function () {\n              var radius = opt.style.radius,\n                  zoom = m_this.layer().map().zoom();\n              if (util.isFunction(radius)) {\n                radius = radius.apply(m_this, arguments);\n              }\n              radius *= Math.pow(2, zoom - opt.style.scaled);\n              return radius;\n            }\n          });\n          scaleOnZoom = true;\n        }\n        features = [{\n          point: {\n            x: opt.position.x,\n            y: opt.position.y,\n            style: style,\n            scaleOnZoom: scaleOnZoom\n          }\n        }];\n        if (state === annotationState.edit) {\n          m_this._addEditHandles(\n            features, [opt.position],\n            {edge: false, center: false, resize: false, rotate: false});\n        }\n        break;\n    }\n    return features;\n  };\n\n  /**\n   * Get and optionally set coordinates associated with this annotation in the\n   * map gcs coordinate system.\n   *\n   * @param {geo.geoPosition[]} [coordinates] An optional array of coordinates\n   *  to set.\n   * @returns {geo.geoPosition[]} The current array of coordinates.\n   */\n  this._coordinates = function (coordinates) {\n    if (coordinates && coordinates.length >= 1) {\n      m_this.options('position', coordinates[0]);\n    }\n    if (m_this.state() === annotationState.create) {\n      return [];\n    }\n    return [m_this.options('position')];\n  };\n\n  this._coordinateOption = 'position';\n\n  /**\n   * Handle a mouse click on this annotation.  If the event is processed,\n   * evt.handled should be set to `true` to prevent further processing.\n   *\n   * @param {geo.event} evt The mouse click event.\n   * @returns {boolean|string} `true` to update the annotation, `'done'` if\n   *    the annotation was completed (changed from create to done state),\n   *    `'remove'` if the annotation should be removed, falsy to not update\n   *    anything.\n   */\n  this.mouseClick = function (evt) {\n    if (m_this.state() !== annotationState.create) {\n      return;\n    }\n    if (!evt.buttonsDown.left) {\n      return;\n    }\n    evt.handled = true;\n    m_this.options('position', evt.mapgcs);\n    m_this.state(annotationState.done);\n    return 'done';\n  };\n\n  /**\n   * Return a list of styles that should be preserved in a geojson\n   * representation of the annotation.\n   *\n   * @returns {string[]} A list of style names to store.\n   */\n  this._geojsonStyles = function () {\n    return [\n      'fill', 'fillColor', 'fillOpacity', 'radius', 'scaled', 'stroke',\n      'strokeColor', 'strokeOpacity', 'strokeWidth'];\n  };\n\n  /**\n   * Return the coordinates to be stored in a geojson geometry object.\n   *\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {array} An array of flattened coordinates in the interface gcs\n   *    coordinate system.  `undefined` if this annotation is incomplete.\n   */\n  this._geojsonCoordinates = function (gcs) {\n    var src = m_this.coordinates(gcs);\n    if (!src || m_this.state() === annotationState.create || src.length < 1 || src[0] === undefined) {\n      return;\n    }\n    return [src[0].x, src[0].y];\n  };\n\n  /**\n   * Return the geometry type that is used to store this annotation in geojson.\n   *\n   * @returns {string} A geojson geometry type.\n   */\n  this._geojsonGeometryType = function () {\n    return 'Point';\n  };\n};\ninherit(pointAnnotation, annotation);\n\nvar pointRequiredFeatures = {};\npointRequiredFeatures[pointFeature.capabilities.feature] = true;\nregisterAnnotation('point', pointAnnotation, pointRequiredFeatures);\n\nmodule.exports = {\n  state: annotationState,\n  actionOwner: annotationActionOwner,\n  annotation: annotation,\n  lineAnnotation: lineAnnotation,\n  pointAnnotation: pointAnnotation,\n  polygonAnnotation: polygonAnnotation,\n  rectangleAnnotation: rectangleAnnotation,\n  _editHandleFeatureLevel: editHandleFeatureLevel,\n  defaultEditHandleStyle: defaultEditHandleStyle\n};\n\n\n\n// WEBPACK FOOTER //\n// ./annotation.js","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport version from \"./version\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = version;\nincludedProjections(proj4);\nexport default proj4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/index.js\n// module id = 183\n// module chunks = 0 1","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/defs.js\n// module id = 184\n// module chunks = 0 1","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projString.js\n// module id = 185\n// module chunks = 0 1","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert, 10;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['false_easting', 'False_Easting'],\n    ['false_northing', 'False_Northing'],\n    ['central_meridian', 'Central_Meridian'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/wkt-parser/index.js\n// module id = 186\n// module chunks = 0 1","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/merc.js\n// module id = 187\n// module chunks = 0 1","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/longlat.js\n// module id = 188\n// module chunks = 0 1","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R\n    };\n  }\n  else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/transform.js\n// module id = 189\n// module chunks = 0 1","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/toPoint.js\n// module id = 190\n// module chunks = 0 1","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/mgrs/mgrs.js\n// module id = 191\n// module chunks = 0 1","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/tmerc.js\n// module id = 192\n// module chunks = 0 1","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/pj_enfn.js\n// module id = 193\n// module chunks = 0 1","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/pj_inv_mlfn.js\n// module id = 194\n// module chunks = 0 1","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/hypot.js\n// module id = 195\n// module chunks = 0 1","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/cosh.js\n// module id = 196\n// module chunks = 0 1","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/utm.js\n// module id = 197\n// module chunks = 0 1","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/sterea.js\n// module id = 198\n// module chunks = 0 1","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/gauss.js\n// module id = 199\n// module chunks = 0 1","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/stere.js\n// module id = 200\n// module chunks = 0 1","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/somerc.js\n// module id = 201\n// module chunks = 0 1","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {EPSLN, HALF_PI, FORTPI} from '../constants/values';\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {\n  this.no_off = this.no_off || false;\n  this.no_rot = this.no_rot || false;\n\n  if (isNaN(this.k0)) {\n    this.k0 = 1;\n  }\n  var sinlat = Math.sin(this.lat0);\n  var coslat = Math.cos(this.lat0);\n  var con = this.e * sinlat;\n\n  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n  var t0 = tsfnz(this.e, this.lat0, sinlat);\n  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n  if (dl * dl < 1) {\n    dl = 1;\n  }\n  var fl;\n  var gl;\n  if (!isNaN(this.longc)) {\n    //Central point and azimuth method\n\n    if (this.lat0 >= 0) {\n      fl = dl + Math.sqrt(dl * dl - 1);\n    }\n    else {\n      fl = dl - Math.sqrt(dl * dl - 1);\n    }\n    this.el = fl * Math.pow(t0, this.bl);\n    gl = 0.5 * (fl - 1 / fl);\n    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n  }\n  else {\n    //2 points method\n    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n    if (this.lat0 >= 0) {\n      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    else {\n      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    var hl = Math.pow(t1, this.bl);\n    var ll = Math.pow(t2, this.bl);\n    fl = this.el / hl;\n    gl = 0.5 * (fl - 1 / fl);\n    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n    var pl = (ll - hl) / (ll + hl);\n    var dlon12 = adjust_lon(this.long1 - this.long2);\n    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n    this.long0 = adjust_lon(this.long0);\n    var dlon10 = adjust_lon(this.long1 - this.long0);\n    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n  }\n\n  if (this.no_off) {\n    this.uc = 0;\n  }\n  else {\n    if (this.lat0 >= 0) {\n      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n    else {\n      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n  }\n\n}\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var dlon = adjust_lon(lon - this.long0);\n  var us, vs;\n  var con;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    if (lat > 0) {\n      con = -1;\n    }\n    else {\n      con = 1;\n    }\n    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n    us = -1 * con * HALF_PI * this.al / this.bl;\n  }\n  else {\n    var t = tsfnz(this.e, lat, Math.sin(lat));\n    var ql = this.el / Math.pow(t, this.bl);\n    var sl = 0.5 * (ql - 1 / ql);\n    var tl = 0.5 * (ql + 1 / ql);\n    var vl = Math.sin(this.bl * (dlon));\n    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n      vs = Number.POSITIVE_INFINITY;\n    }\n    else {\n      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n    }\n    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n      us = this.al * this.bl * (dlon);\n    }\n    else {\n      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n    }\n  }\n\n  if (this.no_rot) {\n    p.x = this.x0 + us;\n    p.y = this.y0 + vs;\n  }\n  else {\n\n    us -= this.uc;\n    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n  }\n  return p;\n}\n\nexport function inverse(p) {\n  var us, vs;\n  if (this.no_rot) {\n    vs = p.y - this.y0;\n    us = p.x - this.x0;\n  }\n  else {\n    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n    us += this.uc;\n  }\n  var qp = Math.exp(-1 * this.bl * vs / this.al);\n  var sp = 0.5 * (qp - 1 / qp);\n  var tp = 0.5 * (qp + 1 / qp);\n  var vp = Math.sin(this.bl * us / this.al);\n  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n  if (Math.abs(up - 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = HALF_PI;\n  }\n  else if (Math.abs(up + 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = -1 * HALF_PI;\n  }\n  else {\n    p.y = phi2z(this.e, ts);\n    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n  }\n  return p;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/omerc.js\n// module id = 202\n// module chunks = 0 1","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n\n  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n  //double c_lat;                   /* center latitude                      */\n  //double c_lon;                   /* center longitude                     */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/lcc.js\n// module id = 203\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/krovak.js\n// module id = 204\n// module chunks = 0 1","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/cass.js\n// module id = 205\n// module chunks = 0 1","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.phi0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/laea.js\n// module id = 206\n// module chunks = 0 1","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/aea.js\n// module id = 207\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/gnom.js\n// module id = 208\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/cea.js\n// module id = 209\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/eqc.js\n// module id = 210\n// module chunks = 0 1","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/poly.js\n// module id = 211\n// module chunks = 0 1","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/nzmg.js\n// module id = 212\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/mill.js\n// module id = 213\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/sinu.js\n// module id = 214\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/moll.js\n// module id = 215\n// module chunks = 0 1","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/eqdc.js\n// module id = 216\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/vandg.js\n// module id = 217\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c / Math.sin(c);\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/aeqd.js\n// module id = 218\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/ortho.js\n// module id = 219\n// module chunks = 0 1","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/qsc.js\n// module id = 220\n// module chunks = 0 1","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/robin.js\n// module id = 221\n// module chunks = 0 1","module.exports = identity;\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nfunction identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/identity.js\n// module id = 222\n// module chunks = 0 1","module.exports = {\n  create: require('./create'),\n  clone: require('./clone'),\n  fromValues: require('./fromValues'),\n  copy: require('./copy'),\n  set: require('./set'),\n  add: require('./add'),\n  subtract: require('./subtract'),\n  multiply: require('./multiply'),\n  divide: require('./divide'),\n  min: require('./min'),\n  max: require('./max'),\n  scale: require('./scale'),\n  scaleAndAdd: require('./scaleAndAdd'),\n  distance: require('./distance'),\n  squaredDistance: require('./squaredDistance'),\n  length: require('./length'),\n  squaredLength: require('./squaredLength'),\n  negate: require('./negate'),\n  inverse: require('./inverse'),\n  normalize: require('./normalize'),\n  dot: require('./dot'),\n  lerp: require('./lerp'),\n  random: require('./random'),\n  transformMat4: require('./transformMat4'),\n  transformQuat: require('./transformQuat')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/index.js\n// module id = 223\n// module chunks = 0 1","module.exports = scale\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nfunction scale (out, a, b) {\n  out[0] = a[0] * b\n  out[1] = a[1] * b\n  out[2] = a[2] * b\n  out[3] = a[3] * b\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/scale.js\n// module id = 224\n// module chunks = 0 1","module.exports = normalize\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nfunction normalize (out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3]\n  var len = x * x + y * y + z * z + w * w\n  if (len > 0) {\n    len = 1 / Math.sqrt(len)\n    out[0] = x * len\n    out[1] = y * len\n    out[2] = z * len\n    out[3] = w * len\n  }\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/normalize.js\n// module id = 225\n// module chunks = 0 1","module.exports = 0.000001\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/epsilon.js\n// module id = 226\n// module chunks = 0 1","module.exports = create;\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nfunction create() {\n    var out = new Float32Array(3)\n    out[0] = 0\n    out[1] = 0\n    out[2] = 0\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/create.js\n// module id = 227\n// module chunks = 0 1","module.exports = fromValues;\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nfunction fromValues(x, y, z) {\n    var out = new Float32Array(3)\n    out[0] = x\n    out[1] = y\n    out[2] = z\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/fromValues.js\n// module id = 228\n// module chunks = 0 1","module.exports = normalize;\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nfunction normalize(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    var len = x*x + y*y + z*z\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len)\n        out[0] = a[0] * len\n        out[1] = a[1] * len\n        out[2] = a[2] * len\n    }\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/normalize.js\n// module id = 229\n// module chunks = 0 1","module.exports = dot;\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nfunction dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/dot.js\n// module id = 230\n// module chunks = 0 1","module.exports = subtract;\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction subtract(out, a, b) {\n    out[0] = a[0] - b[0]\n    out[1] = a[1] - b[1]\n    out[2] = a[2] - b[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/subtract.js\n// module id = 231\n// module chunks = 0 1","module.exports = multiply;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction multiply(out, a, b) {\n    out[0] = a[0] * b[0]\n    out[1] = a[1] * b[1]\n    out[2] = a[2] * b[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/multiply.js\n// module id = 232\n// module chunks = 0 1","module.exports = divide;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction divide(out, a, b) {\n    out[0] = a[0] / b[0]\n    out[1] = a[1] / b[1]\n    out[2] = a[2] / b[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/divide.js\n// module id = 233\n// module chunks = 0 1","module.exports = distance;\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2]\n    return Math.sqrt(x*x + y*y + z*z)\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/distance.js\n// module id = 234\n// module chunks = 0 1","module.exports = squaredDistance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nfunction squaredDistance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2]\n    return x*x + y*y + z*z\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/squaredDistance.js\n// module id = 235\n// module chunks = 0 1","module.exports = length;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nfunction length(a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    return Math.sqrt(x*x + y*y + z*z)\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/length.js\n// module id = 236\n// module chunks = 0 1","module.exports = squaredLength;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nfunction squaredLength(a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    return x*x + y*y + z*z\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/squaredLength.js\n// module id = 237\n// module chunks = 0 1","var inherit = require('../inherit');\nvar registerRenderer = require('../registry').registerRenderer;\nvar renderer = require('../renderer');\n\n/**\n * Create a new instance of class vglRenderer.\n *\n * @class\n * @alias geo.gl.vglRenderer\n * @extends geo.renderer\n * @param {object} arg Options for the renderer.\n * @param {geo.layer} [arg.layer] Layer associated with the renderer.\n * @param {HTMLElement} [arg.canvas] Canvas element associated with the\n *   renderer.\n * @param {object} [arg.options] Additional options for the vgl renderer.\n * @returns {geo.gl.vglRenderer}\n */\nvar vglRenderer = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vglRenderer)) {\n    return new vglRenderer(arg);\n  }\n  arg = arg || {};\n  renderer.call(this, arg);\n\n  var $ = require('jquery');\n  var vgl = require('vgl');\n  var mat4 = require('gl-mat4');\n  var util = require('../util');\n  var geo_event = require('../event');\n\n  var m_this = this,\n      m_contextRenderer = null,\n      m_viewer = null,\n      m_width = 0,\n      m_height = 0,\n      m_lastZoom,\n      m_updateCamera = false,\n      s_init = this._init,\n      s_exit = this._exit;\n\n  // TODO: Move this API to the base class\n  /**\n   * Return width of the renderer.\n   *\n   * @returns {number} The width of the current canvas.\n   */\n  this.width = function () {\n    return m_width;\n  };\n\n  /**\n   * Return height of the renderer.\n   *\n   * @returns {number} The height of the current canvas.\n   */\n  this.height = function () {\n    return m_height;\n  };\n\n  /**\n   * Get context specific renderer.\n   *\n   * @returns {object} The vgl context renderer.\n   */\n  this.contextRenderer = function () {\n    return m_contextRenderer;\n  };\n\n  /**\n   * Get API used by the renderer.\n   *\n   * @returns {string} `vgl`.\n   */\n  this.api = function () {\n    return 'vgl';\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    if (m_this.initialized()) {\n      return m_this;\n    }\n\n    s_init.call(m_this);\n\n    var canvas = $(document.createElement('canvas'));\n    canvas.addClass('webgl-canvas');\n    $(m_this.layer().node().get(0)).append(canvas);\n\n    if (window.overrideContextAttributes) {\n      var elem = canvas.get(0);\n      var getContext = elem.getContext;\n      elem.getContext = function (contextType, contextAttributes) {\n        contextAttributes = contextAttributes || {};\n        if (window.overrideContextAttributes) {\n          for (var key in window.overrideContextAttributes) {\n            if (window.overrideContextAttributes.hasOwnProperty(key)) {\n              contextAttributes[key] = window.overrideContextAttributes[key];\n            }\n          }\n        }\n        return getContext.call(elem, contextType, contextAttributes);\n      };\n    }\n\n    m_viewer = vgl.viewer(canvas.get(0), arg.options);\n    m_viewer.init();\n    m_contextRenderer = m_viewer.renderWindow().activeRenderer();\n    m_contextRenderer.setResetScene(false);\n\n    if (m_viewer.renderWindow().renderers().length > 0) {\n      m_contextRenderer.setLayer(m_viewer.renderWindow().renderers().length);\n    }\n    m_this.canvas(canvas);\n    /* Initialize the size of the renderer */\n    var map = m_this.layer().map(),\n        mapSize = map.size();\n    m_this._resize(0, 0, mapSize.width, mapSize.height);\n\n    return m_this;\n  };\n\n  /**\n   * Handle resize event.\n   *\n   * @param {number} x The left coordinate.\n   * @param {number} y The top coordinate.\n   * @param {number} w The width in pixels.\n   * @param {number} h The height in pixels.\n   * @returns {this}\n   */\n  this._resize = function (x, y, w, h) {\n    var renderWindow = m_viewer.renderWindow();\n\n    if (x !== renderWindow.windowPosition[0] ||\n        y !== renderWindow.windowPosition[1] ||\n        w !== m_width || h !== m_height) {\n      m_width = w;\n      m_height = h;\n      m_this.canvas().attr('width', w);\n      m_this.canvas().attr('height', h);\n      renderWindow.positionAndResize(x, y, w, h);\n\n      m_updateCamera = true;\n      m_this._render();\n    }\n    return m_this;\n  };\n\n  /**\n   * Render.  This actually schedules rendering for the next animation frame.\n   *\n   * @returns {this}\n   */\n  this._render = function () {\n    /* If we are already scheduled to render, don't schedule again.  Rather,\n     * mark that we should render after other animation frame requests occur.\n     * It would be nice if we could just reschedule the call by removing and\n     * readding the animation frame request, but this doesn't work for if the\n     * reschedule occurs during another animation frame callback (it then waits\n     * until a subsequent frame). */\n    m_this.layer().map().scheduleAnimationFrame(this._renderFrame, true);\n    return m_this;\n  };\n\n  /**\n   * This clears the render timer and actually renders.\n   */\n  this._renderFrame = function () {\n    if (m_viewer) {\n      if (m_updateCamera) {\n        m_updateCamera = false;\n        m_this._updateRendererCamera();\n      }\n      m_viewer.render();\n    }\n  };\n\n  /**\n   * Get the GL context for this renderer.\n   *\n   * @returns {WebGLRenderingContext} The current context.  If unavailable,\n   *    falls back to the vgl generic context.\n   */\n  this._glContext = function () {\n    if (m_viewer && m_viewer.renderWindow()) {\n      return m_viewer.renderWindow().context();\n    }\n    return vgl.GL;\n  };\n\n  /**\n   * Exit.\n   */\n  this._exit = function () {\n    m_this.layer().map().scheduleAnimationFrame(this._renderFrame, 'remove');\n    m_this.canvas().remove();\n    if (m_viewer) {\n      var renderState = new vgl.renderState();\n      renderState.m_renderer = m_viewer;\n      renderState.m_context = this._glContext();\n      m_viewer.exit(renderState);\n      if (this._glContext() !== vgl.GL && this._glContext().getExtension('WEBGL_lose_context') && this._glContext().getExtension('WEBGL_lose_context').loseContext) {\n        this._glContext().getExtension('WEBGL_lose_context').loseContext();\n      }\n    }\n    // make sure we clear shaders associated with the generate context, too\n    vgl.clearCachedShaders(vgl.GL);\n    m_viewer = null;\n    s_exit();\n  };\n\n  /**\n   * Update the vgl renderer's camera based on the map's camera class.\n   */\n  this._updateRendererCamera = function () {\n    var renderWindow = m_viewer.renderWindow(),\n        map = m_this.layer().map(),\n        camera = map.camera(),\n        rotation = map.rotation() || 0,\n        view = camera.view,\n        proj = camera.projectionMatrix;\n    if (proj[15]) {\n      /* In the parallel projection, we want the clipbounds [near, far] to map\n       * to [0, 1].  The ortho matrix scales to [-1, 1]. */\n      proj = mat4.copy(util.mat4AsArray(), proj);\n      proj = mat4.scale(proj, proj, [1, 1, -0.5]);\n      proj = mat4.translate(proj, proj, [0, 0, camera.clipbounds.far]);\n    } else {\n      /* This rescales the perspective projection to work with most gl\n       * features.  It doesn't work with all clipbounds, and will probably need\n       * to be refactored when we have tiltable maps. */\n      var near = camera.clipbounds.near,\n          far = camera.clipbounds.far;\n      proj = mat4.copy(util.mat4AsArray(), proj);\n      proj = mat4.scale(proj, proj, [1 / near, 1 / near, -1 / far]);\n    }\n    /* Check if the rotation is a multiple of 90 */\n    var basis = Math.PI / 2,\n        angle = rotation % basis,  // move to range (-pi/2, pi/2)\n        ortho = (Math.min(Math.abs(angle), Math.abs(angle - basis)) < 0.00001);\n    renderWindow.renderers().forEach(function (renderer) {\n      var cam = renderer.camera();\n      if (util.compareArrays(view, cam.viewMatrix()) &&\n          util.compareArrays(proj, cam.projectionMatrix()) &&\n          m_lastZoom === map.zoom()) {\n        return;\n      }\n      m_lastZoom = map.zoom();\n      cam.setViewMatrix(view, true);\n      cam.setProjectionMatrix(proj);\n      var viewport = camera.viewport;\n      /* Test if we should align texels.  We won't if the projection matrix\n       * is not simple, if there is a rotation that isn't a multiple of 90\n       * degrees, if the viewport is not at an integer location, or if the zoom\n       * level is not close to an integer.\n       *   Note that the test for the viewport is strict (val % 1 is non-zero\n       * if the value is not an integer), as, in general, the alignment is only\n       * non-integral if a percent offset or calculation was used in css\n       * somewhere.  The test for zoom level always has some allowance for\n       * precision, as it is often the result of repeated computations. */\n      if (proj[1] || proj[2] || proj[3] || proj[4] || proj[6] || proj[7] ||\n          proj[8] || proj[9] || proj[11] || proj[15] !== 1 || !ortho ||\n          (viewport.left && viewport.left % 1) ||\n          (viewport.top && viewport.top % 1) ||\n          (parseFloat(m_lastZoom.toFixed(6)) !==\n           parseFloat(m_lastZoom.toFixed(0)))) {\n        /* Don't align texels */\n        cam.viewAlignment = function () {\n          return null;\n        };\n      } else {\n        /* Set information for texel alignment.  The rounding factors should\n         * probably be divided by window.devicePixelRatio. */\n        cam.viewAlignment = function () {\n          var align = {\n            roundx: 2.0 / viewport.width,\n            roundy: 2.0 / viewport.height\n          };\n          align.dx = (viewport.width % 2) ? align.roundx * 0.5 : 0;\n          align.dy = (viewport.height % 2) ? align.roundy * 0.5 : 0;\n          return align;\n        };\n      }\n    });\n  };\n\n  // Connect to pan event.  This is sufficient, as all zooms and rotations also\n  // produce a pan\n  m_this.layer().geoOn(geo_event.pan, function (evt) {\n    void (evt);\n    m_updateCamera = true;\n  });\n\n  // Connect to parallelprojection event\n  m_this.layer().geoOn(geo_event.parallelprojection, function (evt) {\n    var vglRenderer = m_this.contextRenderer(),\n        camera,\n        layer = m_this.layer();\n\n    if (evt.geo && evt.geo._triggeredBy !== layer) {\n      if (!vglRenderer || !vglRenderer.camera()) {\n        console.log('Parallel projection event triggered on unconnected VGL ' +\n                    'renderer.');\n        return;\n      }\n      camera = vglRenderer.camera();\n      camera.setEnableParallelProjection(evt.parallelProjection);\n      m_updateCamera = true;\n    }\n  });\n\n  return this;\n};\n\ninherit(vglRenderer, renderer);\n\nregisterRenderer('vgl', vglRenderer);\n\n/* Code for checking if the renderer is supported */\n\nvar checkedWebGL;\n\n/**\n * Report if the vgl renderer is supported.  This is just a check if webGL is\n * supported and available.\n *\n * @returns {boolean} true if available.\n */\nvglRenderer.supported = function () {\n  if (checkedWebGL === undefined) {\n    /* This is extracted from what Modernizr uses. */\n    var canvas, ctx, exts; // eslint-disable-line no-unused-vars\n    try {\n      canvas = document.createElement('canvas');\n      ctx = (canvas.getContext('webgl') ||\n             canvas.getContext('experimental-webgl'));\n      exts = ctx.getSupportedExtensions(); // used for side effects\n      checkedWebGL = true;\n    } catch (e) {\n      console.warn('No webGL support');\n      checkedWebGL = false;\n    }\n    canvas = undefined;\n    ctx = undefined;\n    exts = undefined;\n  }\n  return checkedWebGL;\n};\n\n/**\n * If the vgl renderer is not supported, supply the name of a renderer that\n * should be used instead.  This asks for the null renderer.\n *\n * @returns {null} null for the null renderer.\n */\nvglRenderer.fallback = function () {\n  return null;\n};\n\nmodule.exports = vglRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/vglRenderer.js","/*\nmarkercluster plugin:\n\nCopyright 2012 David Leaver\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nLeaflet utilities:\n\nCopyright (c) 2010-2015, Vladimir Agafonkin\nCopyright (c) 2010-2011, CloudMade\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are\npermitted provided that the following conditions are met:\n\n   1. Redistributions of source code must retain the above copyright notice, this list of\n      conditions and the following disclaimer.\n\n   2. Redistributions in binary form must reproduce the above copyright notice, this list\n      of conditions and the following disclaimer in the documentation and/or other\n      materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\nEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\nCOPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\nEXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\nSUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\nHOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR\nTORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n * Code taken from https://github.com/Leaflet/Leaflet.markercluster\n * to support faster hierarchical clustering of features.\n * @copyright 2012, David Leaver\n */\n\nvar $ = require('jquery');\nvar L = {};\nL.Util = {\n    // return unique ID of an object\n    stamp: function (obj) {\n        obj._leaflet_id = obj._leaflet_id || ++L.Util.lastId;\n        return obj._leaflet_id;\n    },\n    lastId: 0\n};\n\n/**\n * @class\n * @alias geo.util.DistanceGrid\n */\nvar DistanceGrid = function (cellSize) {\n    this._cellSize = cellSize;\n    this._sqCellSize = cellSize * cellSize;\n    this._grid = {};\n    this._objectPoint = {};\n};\n\nDistanceGrid.prototype = {\n\n    addObject: function (obj, point) {\n        var x = this._getCoord(point.x),\n            y = this._getCoord(point.y),\n            grid = this._grid,\n            row = grid[y] = grid[y] || {},\n            cell = row[x] = row[x] || [],\n            stamp = L.Util.stamp(obj);\n\n        point.obj = obj;\n        this._objectPoint[stamp] = point;\n\n        cell.push(obj);\n    },\n\n    updateObject: function (obj, point) {\n        this.removeObject(obj);\n        this.addObject(obj, point);\n    },\n\n    //Returns true if the object was found\n    removeObject: function (obj, point) {\n        var x = this._getCoord(point.x),\n            y = this._getCoord(point.y),\n            grid = this._grid,\n            row = grid[y] = grid[y] || {},\n            cell = row[x] = row[x] || [],\n            i, len;\n\n        delete this._objectPoint[L.Util.stamp(obj)];\n\n        for (i = 0, len = cell.length; i < len; i++) {\n            if (cell[i] === obj) {\n\n                cell.splice(i, 1);\n\n                if (len === 1) {\n                    delete row[x];\n                }\n\n                return true;\n            }\n        }\n\n    },\n\n    eachObject: function (fn, context) {\n        var i, j, k, len, row, cell, removed,\n            grid = this._grid;\n\n        for (i in grid) {\n            row = grid[i];\n\n            for (j in row) {\n                cell = row[j];\n\n                for (k = 0, len = cell.length; k < len; k++) {\n                    removed = fn.call(context, cell[k]);\n                    if (removed) {\n                        k--;\n                        len--;\n                    }\n                }\n            }\n        }\n    },\n\n    getNearObject: function (point) {\n        var x = this._getCoord(point.x),\n            y = this._getCoord(point.y),\n            i, j, k, row, cell, len, obj, dist,\n            objectPoint = this._objectPoint,\n            closestDistSq = this._sqCellSize,\n            closest = null;\n\n        for (i = y - 1; i <= y + 1; i++) {\n            row = this._grid[i];\n            if (row) {\n\n                for (j = x - 1; j <= x + 1; j++) {\n                    cell = row[j];\n                    if (cell) {\n\n                        for (k = 0, len = cell.length; k < len; k++) {\n                            obj = cell[k];\n                            dist = this._sqDist(\n                                objectPoint[L.Util.stamp(obj)],\n                                point\n                            );\n                            if (dist < closestDistSq) {\n                                closestDistSq = dist;\n                                closest = obj;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return closest;\n    },\n\n    /* return the point coordinates contained in the structure */\n    contents: function () {\n        return $.map(this._objectPoint, function (val) { return val; });\n    },\n\n    _getCoord: function (x) {\n        return Math.floor(x / this._cellSize);\n    },\n\n    _sqDist: function (p, p2) {\n        var dx = p2.x - p.x,\n            dy = p2.y - p.y;\n        return dx * dx + dy * dy;\n    }\n};\n\nmodule.exports = DistanceGrid;\n\n\n\n// WEBPACK FOOTER //\n// ./util/distanceGrid.js","/*\n * Using methods adapted from leaflet to cluster an array of positions\n * hierarchically given an array of length scales (zoom levels).\n */\n\nvar $ = require('jquery');\nvar vgl = require('vgl');\n\n/**\n * This class manages a group of nearby points that are clustered as a\n * single object for display purposes.  The class constructor is private\n * and only meant to be created by the ClusterGroup object.\n *\n * This is a tree-like data structure.  Each node in the tree is a\n * cluster containing child clusters and unclustered points.\n *\n * @class\n * @alias geo.util.ClusterTree\n *\n * @param {geo.util.ClusterGroup} group The source cluster group\n * @param {number} zoom The zoom level of the current node\n * @param {object[]} children An array of ClusterTrees or point objects\n */\nfunction ClusterTree(group, zoom, children) {\n  this._group = group;\n  this._zoom = zoom;\n  this._points = [];     // Unclustered points\n  this._clusters = [];   // Child clusters\n  this._count = 0;       // Total number of points\n  this._parent = null;\n  this._coord = null;    // The cached coordinates\n  var that = this;\n\n  // add the children provided in the constructor call\n  (children || []).forEach(function (c) {\n    that._add(c);\n  });\n}\n\n/**\n * Add a point or cluster as a child to the current cluster.\n * @param {object} pt A ClusterTree or point object\n * @private\n */\nClusterTree.prototype._add = function (pt) {\n  var inc = 1;\n\n  if (pt instanceof ClusterTree) {\n    // add a child cluster\n    this._clusters.push(pt);\n    inc = pt._count;\n  } else {\n    this._points.push(pt);\n  }\n  pt._parent = this;\n\n  // increment the counter\n  this._increment(inc);\n};\n\n/**\n * Increment the child counter for this and the parent.\n * @param {number} inc The value to increment by\n * @private\n */\nClusterTree.prototype._increment = function (inc) {\n  this._coord = null;\n  this._count += inc;\n  if (this._parent) {\n    this._parent._increment(inc);\n  }\n};\n\n/**\n * Return the total number of child points contained in the cluster.\n * @returns {number} Total points contained\n */\nClusterTree.prototype.count = function () {\n  return this._count;\n};\n\n/**\n * Recursively call a function on all points contained in the cluster.\n * Calls the function with `this` as the current ClusterTree object, and\n * arguments to arguments the point object and the zoom level:\n * `func.call(this, point, zoom)`.\n *\n * @param {function} func The function to call.\n */\nClusterTree.prototype.each = function (func) {\n  var i;\n  for (i = 0; i < this._points.length; i += 1) {\n    func.call(this, this._points[i], this._zoom);\n  }\n  for (i = 0; i < this._clusters.length; i += 1) {\n    this._clusters[i].each.call(\n      this._clusters[i],\n      func\n    );\n  }\n};\n\n/**\n * Get the coordinates of the cluster (the mean position of all the points\n * contained).  This is lazily calculated and cached.\n *\n * @returns {geo.geoPosition} The 2-d coordinates of the center.\n */\nClusterTree.prototype.coords = function () {\n  var i, center = {x: 0, y: 0};\n  if (this._coord) {\n    return this._coord;\n  }\n  // first add up the points at the node\n  for (i = 0; i < this._points.length; i += 1) {\n    center.x += this._points[i].x;\n    center.y += this._points[i].y;\n  }\n\n  // add up the contribution from the clusters\n  for (i = 0; i < this._clusters.length; i += 1) {\n    center.x += this._clusters[i].coords().x * this._clusters[i].count();\n    center.y += this._clusters[i].coords().y * this._clusters[i].count();\n  }\n\n  return {\n    x: center.x / this.count(),\n    y: center.y / this.count()\n  };\n};\n\n/**\n * This class manages clustering of an array of positions hierarchically.\n * The algorithm and code was adapted from the Leaflet marker cluster\n * plugin by David Leaver: https://github.com/Leaflet/Leaflet.markercluster .\n *\n * @class\n * @alias geo.util.ClusterGroup\n * @param {object} opts An options object\n * @param {number} width The width of the window; used for scaling.\n * @param {number} height The height of the window; used for scaling.\n * @param {number} maxZoom The maximimum zoom level to calculate.\n * @param {number} radius Proportional to the clustering radius in pixels.\n */\nfunction C(opts, width, height) {\n\n  var DistanceGrid = require('./distanceGrid');\n\n  // store the options\n  this._opts = $.extend({\n    maxZoom: 18,\n    radius: 0.05\n  }, opts);\n  this._opts.width = this._opts.width || width || 256;\n  this._opts.height = this._opts.height || height || 256;\n\n  // generate the initial datastructures\n  this._clusters = {}; // clusters at each zoom level\n  this._points = {};   // unclustered points at each zoom level\n\n  var zoom, scl;\n  for (zoom = this._opts.maxZoom; zoom >= 0; zoom -= 1) {\n    scl = this._scaleAtLevel(zoom, this._opts.width, this._opts.height);\n    this._clusters[zoom] = new DistanceGrid(scl);\n    this._points[zoom] = new DistanceGrid(scl);\n  }\n  this._topClusterLevel = new ClusterTree(this, -1);\n}\n\n/**\n * Returns a characteristic distance scale at a particular zoom level.  This\n * scale is used to control the clustering radius.  When the renderer supports\n * it, this call should be replaced by a calculation involving the view port\n * size in point coordinates at a particular zoom level.\n * @private\n * @param {number} zoom The zoom level for the scale.\n * @param {number} width The viewport width.\n * @param {number} height The viewport height.\n * @returns {number} The scale for clustering the feature coordinates.\n */\nC.prototype._scaleAtLevel = function (zoom, width, height) {\n  return vgl.zoomToHeight(zoom, width, height) / 2 * this._opts.radius;\n};\n\n/**\n * Add a position to the cluster group.\n * @protected\n * @param {geo.geoPosition} point A point to add to the cluster.\n */\nC.prototype.addPoint = function (point) {\n  var zoom, closest, parent, newCluster, lastParent, z;\n  /*\n   * start at the maximum zoom level and search for nearby\n   *\n   * 1.  existing clusters\n   * 2.  unclustered points\n   *\n   * otherwise add the point as a new unclustered point\n   */\n  for (zoom = this._opts.maxZoom; zoom >= 0; zoom -= 1) {\n\n    // find near cluster\n    closest = this._clusters[zoom].getNearObject(point);\n    if (closest) {\n      // add the point to the cluster and return\n      closest._add(point);\n      return;\n    }\n\n    // find near point\n    closest = this._points[zoom].getNearObject(point);\n    if (closest) {\n      parent = closest._parent;\n      if (parent) {\n        // remove the point from the parent\n        for (z = parent._points.length - 1; z >= 0; z -= 1) {\n          if (parent._points[z] === closest) {\n            parent._points.splice(z, 1);\n            parent._increment(-1);\n            break;\n          }\n        }\n      }\n\n      if (!parent) {\n        $.noop();\n      }\n      // create a new cluster with these two points\n      newCluster = new ClusterTree(this, zoom, [closest, point]);\n      this._clusters[zoom].addObject(newCluster, newCluster.coords());\n\n      // create intermediate parent clusters that don't exist\n      lastParent = newCluster;\n      for (z = zoom - 1; z > parent._zoom; z -= 1) {\n        lastParent = new ClusterTree(this, z, [lastParent]);\n        this._clusters[z].addObject(lastParent, lastParent.coords());\n      }\n      parent._add(lastParent);\n\n      // remove closest from this zoom level and any above (replace with newCluster)\n      for (z = zoom; z >= 0; z -= 1) {\n        if (!this._points[z].removeObject(closest, closest)) {\n          break;\n        }\n      }\n\n      return;\n    }\n\n    // add an unclustered point\n    this._points[zoom].addObject(point, point);\n  }\n\n  // otherwise add to the top\n  this._topClusterLevel._add(point);\n};\n\n/**\n * Return the unclustered points contained at a given zoom level.\n * @param {number} zoom The zoom level.\n * @returns {object[]} The array of unclustered points.\n */\nC.prototype.points = function (zoom) {\n  zoom = Math.min(Math.max(Math.floor(zoom), 0), this._opts.maxZoom - 1);\n  return this._points[Math.floor(zoom)].contents();\n};\n\n/**\n * Return the clusters contained at a given zoom level.\n * @param {number} zoom The zoom level.\n * @returns {geo.util.ClusterTree[]} The array of clusters.\n */\nC.prototype.clusters = function (zoom) {\n  zoom = Math.min(Math.max(Math.floor(zoom), 0), this._opts.maxZoom - 1);\n  return this._clusters[Math.floor(zoom)].contents();\n};\n\nmodule.exports = C;\n\n\n\n// WEBPACK FOOTER //\n// ./util/clustering.js","module.exports = {\n  adjoint: require('./adjoint')\n  , clone: require('./clone')\n  , copy: require('./copy')\n  , create: require('./create')\n  , determinant: require('./determinant')\n  , frob: require('./frob')\n  , fromMat2: require('./from-mat2')\n  , fromMat4: require('./from-mat4')\n  , fromQuat: require('./from-quat')\n  , identity: require('./identity')\n  , invert: require('./invert')\n  , multiply: require('./multiply')\n  , normalFromMat4: require('./normal-from-mat4')\n  , rotate: require('./rotate')\n  , scale: require('./scale')\n  , str: require('./str')\n  , translate: require('./translate')\n  , transpose: require('./transpose')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/index.js\n// module id = 241\n// module chunks = 0 1","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.2\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/mousetrap/mousetrap.js\n// module id = 242\n// module chunks = 0 1","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Choropleth feature specification.\n *\n * @typedef {geo.feature.spec} geo.choroplethFeature.spec\n * @property {geo.colorObject[]} [colorRange] Color lookup table.  Default is\n *   9-step color table.\n * @property {function} [scale] A scale converts a input domain into the\n *   the colorRange.  Default is `d3.scale.quantize()`.\n * @property {function} [geoId] Given a geometry feature, return an identifier.\n * @property {function} [scalarId] Given a scalar element, return an\n *   identifier.\n * @property {function} [scalarValue] Given a scalar element, return a numeric\n *   values.\n */\n\n/**\n * Create a new instance of class choroplethFeature.\n *\n * @class\n * @alias geo.choroplethFeature\n * @param {geo.choroplethFeature.spec} arg Feature specification.\n * @extends geo.feature\n * @returns {geo.choroplethFeature}\n */\nvar choroplethFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof choroplethFeature)) {\n    return new choroplethFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var $ = require('jquery');\n  var ensureFunction = require('./util').ensureFunction;\n\n  delete arg.layer;\n  delete arg.renderer;\n  /**\n   * @private\n   */\n  var d3 = require('./d3/d3Renderer').d3,\n      m_this = this,\n      s_init = this._init,\n      m_choropleth = $.extend(\n        {},\n        {\n          colorRange: [\n            {r: 0.07514311, g: 0.468049805, b: 1},\n            {r: 0.468487184, g: 0.588057293, b: 1},\n            {r: 0.656658579, g: 0.707001303, b: 1},\n            {r: 0.821573924, g: 0.837809045, b: 1},\n            {r: 0.943467973, g: 0.943498599, b: 0.943398095},\n            {r: 1, g: 0.788626485, b: 0.750707739},\n            {r: 1, g: 0.6289553, b: 0.568237474},\n            {r: 1, g: 0.472800903, b: 0.404551679},\n            {r: 0.916482116, g: 0.236630659, b: 0.209939162}\n          ],\n          scale: d3.scale.quantize(),\n          //accessor for ID on geodata feature\n          geoId: function (geoFeature) {\n            return geoFeature.properties.GEO_ID;\n          },\n          //accessor for ID on scalar element\n          scalarId: function (scalarElement) {\n            return scalarElement.id;\n          },\n          //accessor for value on scalar element\n          scalarValue: function (scalarElement) {\n            return scalarElement.value;\n          }\n        },\n        arg);\n\n  /**\n   * Get/Set choropleth scalar data.\n   *\n   * @param {object[]} [data] An array of objects that are passed to the\n   *   `scalarId` and `scalarValue` functions to get the associated information\n   *   for each scalar.\n   * @param {function} [aggregator] The aggregator aggregates the scalar when\n   *   there are multiple values with the same id. The default is `d3.mean`.\n   * @returns {object[]|this} Either the current scalar data or the feature\n   *   instance.\n   */\n  this.scalar = function (data, aggregator) {\n    var scalarId, scalarValue;\n\n    if (data === undefined) {\n      return m_this.choropleth.get('scalar')() || [];\n    } else {\n      scalarId = m_this.choropleth.get('scalarId');\n      scalarValue = m_this.choropleth.get('scalarValue');\n      m_choropleth.scalar = data;\n      m_choropleth.scalarAggregator = aggregator || d3.mean;\n      // we make internal dictionary from array for faster lookup\n      // when matching geojson features to scalar values,\n      // note that we also allow for multiple scalar elements\n      // for the same geo feature\n      m_choropleth.scalar._dictionary = data\n        .reduce(function (accumeDictionary, scalarElement) {\n          var id, value;\n\n          id = scalarId(scalarElement);\n          value = scalarValue(scalarElement);\n\n          accumeDictionary[id] =\n            accumeDictionary[id] ?\n              accumeDictionary[id].push(value) : [value];\n\n          return accumeDictionary;\n        }, {});\n      m_this.dataTime().modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set choropleth accessor.\n   *\n   * @param {string|geo.choroplethFeature.spec} [arg1] If `undefined`,\n   *    return the current choropleth specification.  If a string is specified,\n   *    either get or set the named property.  If an object is given, set\n   *    or update the specification with the specified parameters.\n   * @param {object} [arg2] If `arg1` is a string, set that property to `arg2`.\n   *    If `undefined`, return the current value of the named  property.\n   * @returns {geo.choroplethFeature.spec|object|this} The current choropleth\n   *    specification, the value of a named property, or this object.\n   */\n  this.choropleth = function (arg1, arg2) {\n    var choropleth;\n\n    if (arg1 === undefined) {\n      return m_choropleth;\n    }\n    if (typeof arg1 === 'string' && arg2 === undefined) {\n      return m_choropleth[arg1];\n    }\n    if (arg2 === undefined) {\n      choropleth = $.extend(\n        {},\n        m_choropleth,\n        arg1\n      );\n      m_choropleth = choropleth;\n    } else {\n      m_choropleth[arg1] = arg2; //if you pass in accessor for prop\n    }\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * A uniform getter that always returns a function even for constant\n   * choropleth properties.  This can also return all defined properties as\n   * functions in a single object.\n   *\n   * @function choropleth_DOT_get\n   * @memberof geo.choroplethFeature\n   * @instance\n   * @param {string} [key] If defined, return a function for the named\n   *    property.  Otherwise, return an object with a function for all defined\n   *    properties.\n   * @returns {function|object} Either a function for the named property or an\n   *    object with functions for all defined properties.\n   */\n  this.choropleth.get = function (key) {\n    var all = {}, k;\n    if (key === undefined) {\n      for (k in m_choropleth) {\n        if (m_choropleth.hasOwnProperty(k)) {\n          all[k] = m_this.choropleth.get(k);\n        }\n      }\n      return all;\n    }\n    return ensureFunction(m_choropleth[key]);\n  };\n\n  /**\n   * Add a geojson polygon feature to the current layer.\n   *\n   * @param {geojsonFeature} feature A geojson parsed feature.\n   * @param {geo.geoColor} fillColor The fill color for the feature.\n   * @returns {geo.polygonFeature}\n   */\n  this._featureToPolygons = function (feature, fillColor) {\n    var newFeature = m_this.layer().createFeature('polygon', {});\n\n    if (feature.geometry.type === 'Polygon') {\n      newFeature.data([{\n        type: 'Polygon',\n        coordinates: feature.geometry.coordinates\n      }]);\n    } else if (feature.geometry.type === 'MultiPolygon') {\n      newFeature.data(feature.geometry.coordinates.map(function (coordinateMap) {\n        return {\n          type: 'Polygon',\n          coordinates: coordinateMap\n        };\n      }));\n    }\n\n    newFeature\n      .polygon(function (d) {\n        return {\n          'outer': d.coordinates[0],\n          'inner': d.coordinates[1] // undefined but ok\n        };\n      })\n      .position(function (d) {\n        return {\n          x: d[0],\n          y: d[1]\n        };\n      })\n      .style({\n        'fillColor': fillColor\n      });\n\n    return newFeature;\n  };\n\n  /**\n   * Set a choropleth scale's domain and range.\n   *\n   * @param {function} valueAccessor A function that can be passed to\n   *    `d3.extent`.\n   * @returns {this}\n   */\n  this._generateScale = function (valueAccessor) {\n    var extent = d3.extent(m_this.scalar(), valueAccessor || undefined);\n\n    m_this.choropleth()\n      .scale\n      .domain(extent)\n      .range(m_this.choropleth().colorRange);\n\n    return m_this;\n  };\n\n  /**\n   * Generate scale for choropleth.data(), make polygons from features.\n   *\n   * @returns {geo.featurePolygon[]}\n   */\n  this.createChoropleth = function () {\n    var choropleth = m_this.choropleth,\n        data = m_this.data(),\n        scalars = m_this.scalar(),\n        valueFunc = choropleth.get('scalarValue'),\n        getFeatureId = choropleth.get('geoId');\n\n    m_this._generateScale(valueFunc);\n\n    return data.map(function (feature) {\n      var id = getFeatureId(feature);\n      var valueArray = scalars._dictionary[id];\n      var accumulatedScalarValue = choropleth().scalarAggregator(valueArray);\n      // take average of this array of values\n      // which allows for non-bijective correspondence\n      // between geo data and scalar data\n      var fillColor = m_this.choropleth().scale(accumulatedScalarValue);\n\n      return m_this._featureToPolygons(feature, fillColor);\n    });\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.choroplethFeature} arg\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    if (m_choropleth) {\n      m_this.dataTime().modified();\n    }\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(choroplethFeature, feature);\nmodule.exports = choroplethFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./choroplethFeature.js","/**\n * @namespace geo.event.d3\n */\n\n/**\n * @event geo.event.d3.rescale\n * @type {geo.event.base}\n * @property {number} scale The scale as a ratio of the original render size.\n */\nmodule.exports = 'geo_d3_rescale';\n\n\n\n// WEBPACK FOOTER //\n// ./d3/rescale.js","var inherit = require('./inherit');\nvar meshFeature = require('./meshFeature');\n\n/**\n * Contour feature specification.\n *\n * @typedef {geo.feature.spec} geo.contourFeature.spec\n * @property {object[]} [data=[]] An array of arbitrary objects used to\n *    construct the feature.\n * @property {geo.contourFeature.styleSpec} [style] An object that contains\n *    style values for the feature.\n * @property {geo.contourFeature.contourSpec} [contour] The contour\n *    specification for the feature.\n */\n\n/**\n * Style specification for a contour feature.\n *\n * @typedef {geo.feature.styleSpec} geo.contourFeature.styleSpec\n * @extends geo.feature.styleSpec\n * @property {geo.geoPosition|function} [position=data] The position of each\n *    data element.  This defaults to just using `x`, `y`, and `z` properties\n *    of the data element itself.  The position is in the feature's gcs\n *    coordinates.\n * @property {number|function} [value=data.z] The value of each data element.\n *    This defaults to the `z` property of the data elements.  If the value of\n *    a grid point is `null` or `undefined`, the point and elements that use\n *    that point won't be included in the results.\n */\n\n/**\n * Contour specification.  All of these properties can be functions, which get\n * passed the {@link geo.meshFeature.meshInfo} object.\n *\n * @typedef {geo.meshFeature.meshSpec} geo.contourFeature.contourSpec\n * @property {number} [min] Minimum contour value.  If unspecified, taken from\n *    the computed minimum of the `value` style.\n * @property {number} [max] Maximum contour value.  If unspecified, taken from\n *    the computed maximum of the `value` style.\n * @property {geo.geoColor} [minColor='black'] Color used for any value below\n *    the minimum.\n * @property {number} [minOpacity=0] Opacity used for any value below the\n *    minimum.\n * @property {geo.geoColor} [maxColor='black'] Color used for any value above\n *    the maximum.\n * @property {number} [maxOpacity=0] Opacity used for any value above the\n *    maximum.\n * @property {boolean} [stepped] If falsy but not `undefined`, smooth\n *    transitions between colors.\n * @property {geo.geoColor[]} [colorRange=<color table>] An array of colors\n *    used to show the range of values.  The default is a 9-step color table.\n * @property {number[]} [opacityRange] An array of opacities used to show the\n *    range of values.  If unspecified, the opacity is 1.  If this is a shorter\n *    list than the `colorRange`, an opacity of 1 is used for the entries near\n *    the end of the color range.\n * @property {number[]} [rangeValues] An array used to map values to the\n *    `colorRange`.  By default, values are spaced linearly.  If specified, the\n *    entries must be increasing weakly monotonic, and there must be one more\n *    entry then the length of `colorRange`.\n */\n\n/**\n * Computed contour information.\n *\n * @typedef {geo.meshFeature.meshInfo} geo.contourFeature.contourInfo\n * @property {number[]} value An array of values that have been normalized to a\n *    range of [0, steps].  There is one value per vertex.\n * @property {number[]} opacity An array of opacities per vertex.\n * @property {number} minValue the minimum value used for the contour.  If\n *    `rangeValues` was specified, this is the first entry of that array.\n * @property {number} maxValue the maximum value used for the contour.  If\n *    `rangeValues` was specified, this is the last entry of that array.\n * @property {number} factor If linear value scaling is used, this is the\n *    number of color values divided by the difference between the maximum and\n *    minimum values.  It is ignored if non-linear value scaling is used.\n * @property {geo.geoColorObject} minColor The color used for values below\n *    minValue.  Includes opacity.\n * @property {geo.geoColorObject} maxColor The color used for values above\n *    maxValue.  Includes opacity.\n * @property {geo.geoColorObject[]} colorMap The specified `colorRange` and\n *    `opacityRange` converted into objects that include opacity.\n */\n\n/**\n * Create a new instance of class contourFeature.\n *\n * @class\n * @alias geo.contourFeature\n * @extends geo.meshFeature\n *\n * @borrows geo.contourFeature#mesh as geo.contourFeature#contour\n *\n * @param {geo.contourFeature.spec} arg\n * @returns {geo.contourFeature}\n */\nvar contourFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof contourFeature)) {\n    return new contourFeature(arg);\n  }\n\n  var $ = require('jquery');\n  var util = require('./util');\n\n  arg = arg || {};\n  meshFeature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init;\n\n  /**\n   * Create a set of vertices, values at the vertices, and opacities at the\n   * vertices.  Create a set of triangles of indices into the vertex array.\n   * Create a color and opacity map corresponding to the values.\n   *\n   * @returns {geo.contourFeature.contourInfo} An object with the contour\n   *    information.\n   */\n  this._createContours = function () {\n    var contour = m_this.contour,\n        valueFunc = m_this.style.get('value'),\n        usedFunc = m_this.style('used') !== undefined ?\n          m_this.style.get('used') :\n          function (d, i) { return util.isNonNullFinite(valueFunc(d, i)); },\n        minmax, val, range, i, k;\n    var result = this._createMesh({\n      used: usedFunc,\n      opacity: m_this.style.get('opacity'),\n      value: valueFunc\n    });\n    if (!result.numVertices || !result.numElements) {\n      return result;\n    }\n    var stepped = contour.get('stepped')(result),\n        opacityRange = contour.get('opacityRange')(result),\n        rangeValues = contour.get('rangeValues')(result);\n    result.stepped = stepped === undefined || stepped ? true : false;\n    /* Create the min/max colors and the color array */\n    result.colorMap = [];\n    result.minColor = $.extend(\n      {a: contour.get('minOpacity')(result) || 0},\n      util.convertColor(contour.get('minColor')(result)));\n    result.maxColor = $.extend(\n      {a: contour.get('maxOpacity')(result) || 0},\n      util.convertColor(contour.get('maxColor')(result)));\n    contour.get('colorRange')(result).forEach(function (clr, idx) {\n      result.colorMap.push($.extend({\n        a: opacityRange && opacityRange[idx] !== undefined ? opacityRange[idx] : 1\n      }, util.convertColor(clr)));\n    });\n    /* Get min and max values */\n    minmax = util.getMinMaxValues(result.value, contour.get('min')(result), contour.get('max')(result));\n    result.minValue = minmax.min;\n    result.maxValue = minmax.max;\n    if (!rangeValues || rangeValues.length !== result.colorMap.length + 1) {\n      rangeValues = null;\n    }\n    if (rangeValues) {  /* ensure increasing monotonicity */\n      for (k = 1; k < rangeValues.length; k += 1) {\n        if (rangeValues[k - 1] > rangeValues[k]) {\n          rangeValues = null;\n          break;\n        }\n      }\n    }\n    if (rangeValues) {\n      result.minValue = rangeValues[0];\n      result.maxValue = rangeValues[rangeValues.length - 1];\n    }\n    range = result.maxValue - result.minValue;\n    if (!range) {\n      result.colorMap = result.colorMap.slice(0, 1);\n      range = 1;\n      rangeValues = null;\n    }\n    result.rangeValues = rangeValues;\n    result.factor = result.colorMap.length / range;\n    /* Scale values */\n    for (i = 0; i < result.numVertices; i += 1) {\n      val = result.value[i];\n      if (rangeValues && val >= result.minValue && val <= result.maxValue) {\n        for (k = 1; k < rangeValues.length; k += 1) {\n          if (val <= rangeValues[k]) {\n            result.value[i] = k - 1 + (val - rangeValues[k - 1]) /\n                (rangeValues[k] - rangeValues[k - 1]);\n            break;\n          }\n        }\n      } else {\n        result.value[i] = (val - result.minValue) * result.factor;\n      }\n    }\n    return result;\n  };\n\n  this.contour = m_this.mesh;\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.contourFeature.spec} arg The contour feature specification.\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        opacity: 1.0,\n        value: function (d, i) {\n          return m_this.position()(d, i).z;\n        }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    m_this.style(defaultStyle);\n\n    m_this.contour($.extend({}, {\n      minColor: 'black',\n      minOpacity: 0,\n      maxColor: 'black',\n      maxOpacity: 0,\n      /* 9-step based on paraview bwr colortable */\n      colorRange: [\n        {r: 0.07514311, g: 0.468049805, b: 1},\n        {r: 0.468487184, g: 0.588057293, b: 1},\n        {r: 0.656658579, g: 0.707001303, b: 1},\n        {r: 0.821573924, g: 0.837809045, b: 1},\n        {r: 0.943467973, g: 0.943498599, b: 0.943398095},\n        {r: 1, g: 0.788626485, b: 0.750707739},\n        {r: 1, g: 0.6289553, b: 0.568237474},\n        {r: 1, g: 0.472800903, b: 0.404551679},\n        {r: 0.916482116, g: 0.236630659, b: 0.209939162}\n      ]\n    }, arg.mesh || {}, arg.contour || {}));\n\n    if (arg.mesh || arg.contour) {\n      m_this.dataTime().modified();\n    }\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(contourFeature, meshFeature);\nmodule.exports = contourFeature;\n\n/* Example:\n\nlayer.createFeature('contour', {\n})\n.data(<array with w x h elements>)\n.position(function (d) {\n  return { x: <longitude>, y: <latitude>, z: <altitude>};\n})\n.style({\n  opacity: function (d) {\n    return <opacity of grid point>;\n  },\n  value: function (d) {            // defaults to position().z\n    return <contour value>;\n  }\n})\n.contour({\n  gridWidth: <width of grid>,\n  gridHeight: <height of grid>,\n  x0: <the x coordinate of the 0th point in the value array>,\n  y0: <the y coordinate of the 0th point in the value array>,\n  dx: <the distance in the x direction between the 0th and 1st point in the\n    value array>,\n  dy: <the distance in the y direction between the 0th and (gridWidth)th point\n    in the value array>,\n  wrapLongitude: <boolean (default true).  If true, AND the position array is\n    not used, assume the x coordinates is longitude and should be adjusted to\n    be within -180 to 180.  If the data spans 180 degrees, the points or\n    squares will be duplicated to ensure that the map is covered from -180 to\n    180 as appropriate.  Set this to false if using a non longitude x\n    coordinate.  This is ignored if the position array is used.>,\n  min: <optional minimum contour value, otherwise taken from style.value>,\n  max: <optional maximum contour value, otherwise taken from style.value>,\n  minColor: <color for any value below the minimum>,\n  minOpacity: <opacity for any value below the minimum>,\n  maxColor: <color for any value above the maximum>,\n  maxOpacity: <opacity for any value above the maximum>,\n  stepped: <boolean (default true).  If false, smooth transitions between\n    colors>,\n  colorRange: [<array of colors used for the contour>],\n  opacityRange: [<optional array of opacities used for the contour, expected to\n    be the same length as colorRange>],\n  rangeValues: [<if specified, instead of spacing the colors linearly, use this\n    spacing.  Must be increasing monotonic and one value longer than the length\n    of colorRange>]\n})\n */\n\n\n\n// WEBPACK FOOTER //\n// ./contourFeature.js","var $ = require('jquery');\n\n/**\n * This class implements a queue for Deferred objects.  Whenever one of the\n * objects in the queue completes (resolved or rejected), another item in the\n * queue is processed.  The number of concurrently processing items can be\n * adjusted.  At this time (2015-12-29) most major browsers support 6\n * concurrent requests from any given server, so, when using the queue for\n * tile images, thie number of concurrent requests should be 6 * (number of\n * subdomains serving tiles).\n *\n * @class\n * @alias geo.fetchQueue\n *\n * @param {object} [options] A configuration object for the queue.\n * @param {number} [options.size=6] The maximum number of concurrent deferred\n *    objects.\n * @param {number} [options.track=600] The number of objects that are tracked\n *    that trigger checking if any of them have been abandoned.  The fetch\n *    queue can grow to the greater of this size and the number of items that\n *    are still needed.  Setting this to a low number will increase\n *    processing time, to a high number can increase memory.  Ideally, it\n *    should reflect the number of items that are kept in memory elsewhere.\n *    If needed is null, this is ignored.\n * @param {function} [options.needed=null] If set, this function is passed a\n *    Deferred object and must return a truthy value if the object is still\n *    needed.\n */\nvar fetchQueue = function (options) {\n  if (!(this instanceof fetchQueue)) {\n    return new fetchQueue(options);\n  }\n\n  options = options || {};\n  this._size = options.size || 6;\n  this._track = options.track || 600;\n  this._needed = options.needed || null;\n  this._batch = false;\n\n  var m_this = this,\n      m_next_batch = 1;\n\n  /**\n   * Get/set the maximum concurrent deferred object size.\n   * @property {number} size The maximum number of deferred objects.\n   * @name geo.fetchQueue#size\n   */\n  Object.defineProperty(this, 'size', {\n    get: function () { return this._size; },\n    set: function (n) {\n      this._size = n;\n      this.next_item();\n    }\n  });\n\n  /**\n   * Get the current queue size.  Read only.\n   * @property {number} length The current queue size.\n   * @name geo.fetchQueue#length\n   */\n  Object.defineProperty(this, 'length', {\n    get: function () { return this._queue.length; }\n  });\n\n  /**\n   * Get the current number of processing items.  Read only.\n   * @property {number} processing The current number of processing items.\n   * @name geo.fetchQueue#processing\n   */\n  Object.defineProperty(this, 'processing', {\n    get: function () { return this._processing; }\n  });\n\n  /**\n   * Remove all items from the queue.\n   *\n   * @returns {this}\n   */\n  this.clear = function () {\n    this._queue = [];\n    this._processing = 0;\n    return this;\n  };\n\n  /**\n   * Add a Deferred object to the queue.\n   *\n   * @param {jQuery.Deferred} defer Deferred object to add to the queue.\n   * @param {function} callback A function to call when the item's turn is\n   *  granted.\n   * @param {boolean} atEnd If falsy, add the item to the front of the queue\n   *  if batching is turned off or at the end of the current batch if it is\n   *  turned on.  If truthy, always add the item to the end of the queue.\n   * @returns {jQuery.Deferred} The deferred object that was passed to the\n   *  function.\n   */\n  this.add = function (defer, callback, atEnd) {\n    if (defer.__fetchQueue) {\n      var pos = $.inArray(defer, this._queue);\n      if (pos >= 0) {\n        this._queue.splice(pos, 1);\n        this._addToQueue(defer, atEnd);\n        return defer;\n      }\n    }\n    var wait = $.Deferred();\n    var process = $.Deferred();\n    wait.done(function () {\n      $.when(callback.call(defer)).always(process.resolve);\n    }).fail(process.resolve);\n    defer.__fetchQueue = wait;\n    this._addToQueue(defer, atEnd);\n    $.when(wait, process).always(function () {\n      if (m_this._processing > 0) {\n        m_this._processing -= 1;\n      }\n      m_this.next_item();\n    }).promise(defer);\n    m_this.next_item();\n    return defer;\n  };\n\n  /**\n   * Add an item to the queue.  If batches are being used, add it at after\n   * other items in the same batch.\n   *\n   * @param {jQuery.Deferred} defer Deferred object to add to the queue.\n   * @param {boolean} atEnd If falsy, add the item to the front of the queue\n   *  if batching is turned off or at the end of the current batch if it is\n   *  turned on.  If truthy, always add the item to the end of the queue.\n   */\n  this._addToQueue = function (defer, atEnd) {\n    defer.__fetchQueue._batch = this._batch;\n    if (atEnd) {\n      this._queue.push(defer);\n    } else if (!this._batch) {\n      this._queue.unshift(defer);\n    } else {\n      for (var i = 0; i < this._queue.length; i += 1) {\n        if (this._queue[i].__fetchQueue._batch !== this._batch) {\n          break;\n        }\n      }\n      this._queue.splice(i, 0, defer);\n    }\n  };\n\n  /**\n   * Get the position of a deferred object in the queue.\n   *\n   * @param {jQuery.Deferred} defer Deferred object to get the position of.\n   * @returns {number} -1 if not in the queue, or the position in the queue.\n   */\n  this.get = function (defer) {\n    return $.inArray(defer, this._queue);\n  };\n\n  /**\n   * Remove a Deferred object from the queue.\n   *\n   * @param {jQuery.Deferred} defer Deferred object to add to the queue.\n   * @returns {boolean} `true` if the object was removed.\n   */\n  this.remove = function (defer) {\n    var pos = $.inArray(defer, this._queue);\n    if (pos >= 0) {\n      this._queue.splice(pos, 1);\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Start a new batch or clear using batches.\n   *\n   * @param {boolean} start Truthy too start a new batch, falsy to turn off\n   *   using batches.  `undefined` to return the current state of batches.\n   * @returns {number|boolean|this} `false` if batches are turned off, the\n   *   batch number if turned on, or `this` if setting the batch.\n   */\n  this.batch = function (start) {\n    if (start === undefined) {\n      return this._batch;\n    }\n    if (!start) {\n      this._batch = false;\n    } else {\n      this._batch = m_next_batch;\n      m_next_batch += 1;\n    }\n    return this;\n  };\n\n  /**\n   * Check if any items are queued and if the processing allotment is not\n   * full.  If so, process more items.\n   */\n  this.next_item = function () {\n    if (m_this._innextitem) {\n      return;\n    }\n    m_this._innextitem = true;\n    /* if the queue is greater than the track size, check each item to see\n     * if it is still needed. */\n    if (m_this._queue.length > m_this._track && this._needed) {\n      for (var i = m_this._queue.length - 1; i >= 0; i -= 1) {\n        if (!m_this._needed(m_this._queue[i])) {\n          var discard = m_this._queue.splice(i, 1)[0];\n          m_this._processing += 1;\n          discard.__fetchQueue.reject();\n          delete discard.__fetchQueue;\n        }\n      }\n    }\n    while (m_this._processing < m_this._size && m_this._queue.length) {\n      var defer = m_this._queue.shift();\n      if (defer.__fetchQueue) {\n        m_this._processing += 1;\n        var needed = m_this._needed ? m_this._needed(defer) : true;\n        if (needed) {\n          defer.__fetchQueue.resolve();\n        } else {\n          defer.__fetchQueue.reject();\n        }\n        delete defer.__fetchQueue;\n      }\n    }\n    m_this._innextitem = false;\n  };\n\n  this.clear();\n  return this;\n};\n\nmodule.exports = fetchQueue;\n\n\n\n// WEBPACK FOOTER //\n// ./fetchQueue.js","var inherit = require('./inherit');\nvar featureLayer = require('./featureLayer');\nvar object = require('./object');\n\n/**\n * Object specification for a fileReader.\n *\n * @typedef {object} geo.fileReader.spec\n * @property {geo.featureLayer} layer The target feature layer.\n */\n\n/**\n * Create a new instance of class fileReader.\n *\n * @class\n * @alias geo.fileReader\n * @extends geo.object\n * @param {geo.fileReader.spec} arg\n * @returns {geo.fileReader}\n */\nvar fileReader = function (arg) {\n  'use strict';\n  if (!(this instanceof fileReader)) {\n    return new fileReader(arg);\n  }\n  object.call(this);\n\n  /**\n   * @private\n   */\n  arg = arg || {};\n\n  if (!(arg.layer instanceof featureLayer)) {\n    throw new Error('fileReader must be given a feature layer');\n  }\n\n  var m_layer = arg.layer;\n\n  /**\n   * Get the feature layer attached to the reader.\n   *\n   * @returns {geo.featureLayer} The layer associated with the reader.\n   */\n  this.layer = function () {\n    return m_layer;\n  };\n\n  /**\n   * Tells the caller if it can handle the given file by returning a boolean.\n   *\n   * @param {File|Blob|string|object} file This is either a `File` object, a\n   *    `Blob` object, a string representation of a file, or an object\n   *    representing data from a file.\n   * @returns {boolean} `true` if this reader can read a file.\n   */\n  this.canRead = function (file) {\n    return false;\n  };\n\n  /**\n   * Reads the file and optionally calls a function when finished.  The `done`\n   * function is called with a value that is truthy if the read was a success.\n   * Depending on the specific reader, this value may be an object with details\n   * of the read operation.\n   *\n   * @param {File|Blob|string|object} file This is either a `File` object, a\n   *    `Blob` object, a string representation of a file, or an object\n   *    representing data from a file.\n   * @param {function} [done] An optional callback function when the read is\n   *    complete.  This is called with `false` on error or the object that was\n   *    read and parsed by the reader.\n   * @param {function} [progress] A function which is passed `ProgressEvent`\n   *    information from a `FileReader`.  This includes `loaded` and `total`\n   *    each with a number of bytes.\n   * @returns {Promise} A `Promise` that resolves with object parsed by the\n   *    reader or is rejected if the reader fails.\n   */\n  this.read = function (file, done, progress) {\n    var promise = new Promise(function (resolve, reject) {\n      if (done) {\n        done(false);\n      }\n      throw new Error('The default file reader always fails');\n    });\n    this.addPromise(promise);\n    return promise;\n  };\n\n  /**\n   * Return a `FileReader` with handlers attached.\n   *\n   * @param {function} done A callback that receives either the string read\n   *    from the file or a `DOMException` with an error.\n   * @param {function} [progress] A function which is passed `ProgressEvent`\n   *    information from a `FileReader`.  This includes `loaded` and `total`\n   *    each with a number of bytes.\n   * @returns {FileReader} The `FileReader` with done and progress handles\n   *    attached to it.\n   */\n  function newFileReader(done, progress) {\n    var reader = new FileReader();\n    if (progress) {\n      reader.onprogress = progress;\n    }\n    reader.onloadend = function () {\n      done(reader.error || reader.result);\n    };\n    return reader;\n  }\n\n  /**\n   * Read a file object as a string.  Calls `done` with the string content\n   * when finished or an error object if unsuccessful.\n   *\n   * @param {File|Blob} file A `File` or `Blob` object to read.\n   * @param {function} done A callback that receives either the string read\n   *    from the file or a `DOMException` with an error.\n   * @param {function} [progress] A function which is passed `ProgressEvent`\n   *    information from a `FileReader`.  This includes `loaded` and `total`\n   *    each with a number of bytes.\n   */\n  this._getString = function (file, done, progress) {\n    var reader = newFileReader(done, progress);\n    reader.readAsText(file);\n  };\n\n  return this;\n};\n\ninherit(fileReader, object);\nmodule.exports = fileReader;\n\n\n\n// WEBPACK FOOTER //\n// ./fileReader.js","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Create a new instance of class graphFeature\n *\n * @class\n * @alias geo.graphFeature\n * @extends geo.feature\n * @returns {geo.graphFeature}\n */\nvar graphFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof graphFeature)) {\n    return new graphFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  var $ = require('jquery');\n  var util = require('./util');\n  var registry = require('./registry');\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_draw = this.draw,\n      s_style = this.style,\n      m_nodes = null,\n      m_points = null,\n      m_children = function (d) { return d.children; },\n      m_links = [],\n      s_init = this._init,\n      s_exit = this._exit;\n\n  /**\n   * Initialize\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      true, {}, {\n        nodes: {\n          radius: 5.0,\n          fill: true,\n          fillColor: { r: 1.0, g: 0.0, b: 0.0 },\n          strokeColor: { r: 0, g: 0, b: 0 }\n        },\n        links: {\n          strokeColor: { r: 0.0, g: 0.0, b: 0.0 }\n        },\n        linkType: 'path' /* 'path' || 'line' */\n      },\n      arg.style === undefined ? {} : arg.style);\n\n    m_this.style(defaultStyle);\n    m_this.nodes(function (d) { return d; });\n  };\n\n  /**\n   * Call child _build methods\n   */\n  this._build = function () {\n    m_this.children().forEach(function (child) {\n      child._build();\n    });\n  };\n\n  /**\n   * Call child _update methods\n   */\n  this._update = function () {\n    m_this.children().forEach(function (child) {\n      child._update();\n    });\n  };\n\n  /**\n   * Custom _exit method to remove all sub-features\n   */\n  this._exit = function () {\n    m_this.data([]);\n    m_links.forEach(function (link) {\n      link._exit();\n      m_this.removeChild(link);\n    });\n    m_links = [];\n    m_points._exit();\n    m_this.removeChild(m_points);\n    s_exit();\n    return m_this;\n  };\n\n  /**\n   * Get/Set style\n   */\n  this.style = function (arg, arg2) {\n    var out = s_style.call(m_this, arg, arg2);\n    if (out !== m_this) {\n      return out;\n    }\n    // set styles for sub-features\n    m_points.style(arg.nodes);\n    m_links.forEach(function (l) {\n      l.style(arg.links);\n    });\n    return m_this;\n  };\n\n  /**\n   * Get/Set links accessor.\n   */\n  this.links = function (arg) {\n    if (arg === undefined) {\n      return m_children;\n    }\n\n    m_children = util.ensureFunction(arg);\n    return m_this;\n  };\n\n  /**\n   * Get/Set nodes\n   */\n  this.nodes = function (val) {\n    if (val === undefined) {\n      return m_nodes;\n    }\n    m_nodes = val;\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get internal node feature\n   */\n  this.nodeFeature = function () {\n    return m_points;\n  };\n\n  /**\n   * Get internal link features\n   */\n  this.linkFeatures = function () {\n    return m_links;\n  };\n\n  /**\n   * Build the feature for drawing\n   */\n  this.draw = function () {\n\n    var layer = m_this.layer(),\n        data = m_this.data(),\n        nLinks = 0,\n        style;\n\n    // get the feature style object\n    style = m_this.style();\n\n    // Bind data to the point nodes\n    m_points.data(data);\n    m_points.style(style.nodes);\n\n    // get links from node connections\n    data.forEach(function (source) {\n      (source.children || []).forEach(function (target) {\n        var link;\n        nLinks += 1;\n        if (m_links.length < nLinks) {\n          link = registry.createFeature(\n            style.linkType, layer, layer.renderer()\n          ).style(style.links);\n          m_this.addChild(link);\n          m_links.push(link);\n        }\n        m_links[nLinks - 1].data([source, target]);\n      });\n    });\n\n    m_links.splice(nLinks, m_links.length - nLinks).forEach(function (l) {\n      l._exit();\n      m_this.removeChild(l);\n    });\n\n    s_draw();\n    return m_this;\n  };\n\n  m_points = registry.createFeature(\n    'point',\n    this.layer(),\n    this.layer().renderer()\n  );\n  m_this.addChild(m_points);\n\n  if (arg.nodes) {\n    this.nodes(arg.nodes);\n  }\n\n  this._init(arg);\n  return this;\n};\n\ninherit(graphFeature, feature);\nmodule.exports = graphFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./graphFeature.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar feature = require('./feature');\nvar transform = require('./transform');\n\n/**\n * Heatmap feature specification.\n *\n * @typedef {geo.feature.spec} geo.heatmapFeature.spec\n * @property {geo.geoPosition|function} [position] Position of the data.\n *   Default is (data).\n * @property {function} [intensity] Scalar value of each data point.  The\n *   scalar value must be a positive real number and is used to compute the\n *   weight for each data point.\n * @property {number} [maxIntensity=null] Maximum intensity of the data.\n *   Maximum intensity must be a positive real number and is used to normalize\n *   all intensities within a dataset.  If `null`, it is computed.\n * @property {number} [minIntensity=null] Minimum intensity of the data.\n *   Minimum intensity must be a positive real number and is used to normalize\n *   all intensities within a dataset.  If `null`, it is computed.\n * @property {number} [updateDelay=1000] Delay in milliseconds after a zoom,\n *   rotate, or pan event before recomputing the heatmap.\n * @property {boolean|number|'auto'} [binned='auto'] If `true` or a number,\n *   spatially bin data as part of producing the heatmap.  If falsy, each\n *   datapoint stands on its own.  If `'auto'`, bin data if there are more data\n *   points than there would be bins.  Using `true` or `auto` uses bins that\n *   are `max(Math.floor((radius + blurRadius) / 8), 3)`.\n * @property {object} [style.color] An object where the keys are numbers from\n *   [0-1] and the values are {@link geo.geoColor}.  This is used to transform\n *   normalized intensity.\n * @property {number} [style.radius=10] Radius of a point in pixels.\n * @property {number} [style.blurRadius=10] Blur radius for each point in\n *   pixels.\n * @property {boolean} [style.gaussian=true] If truthy, appoximate a gaussian\n *   distribution for each point using a multi-segment linear radial\n *   appoximation.  The total weight of the gaussian area is approximately the\n *   `9/16 r^2`.  The sum of `radius + blurRadius` is used as the radius for\n *   the gaussian distribution.\n */\n\n/**\n * Create a new instance of class heatmapFeature.\n *\n * @class\n * @alias geo.heatmapFeature\n * @param {geo.heatmapFeature.spec} arg Feature specification.\n * @extends geo.feature\n * @returns {geo.heatmapFeature}\n */\nvar heatmapFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof heatmapFeature)) {\n    return new heatmapFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_position,\n      m_intensity,\n      m_maxIntensity,\n      m_minIntensity,\n      m_updateDelay,\n      m_binned,\n      m_gcsPosition,\n      s_init = this._init;\n\n  m_position = arg.position || function (d) { return d; };\n  m_intensity = arg.intensity || function (d) { return 1; };\n  m_maxIntensity = arg.maxIntensity !== undefined ? arg.maxIntensity : null;\n  m_minIntensity = arg.minIntensity !== undefined ? arg.minIntensity : null;\n  m_binned = arg.binned !== undefined ? arg.binned : 'auto';\n  m_updateDelay = arg.updateDelay ? parseInt(arg.updateDelay, 10) : 1000;\n\n  /**\n   * Get/Set maxIntensity.\n   *\n   * @param {number|null} [val] If not specified, return the current value.\n   *    If a number, use this as the maximum intensity.  If `null`, compute\n   *    the maximum intensity.\n   * @returns {number|null|this}\n   */\n  this.maxIntensity = function (val) {\n    if (val === undefined) {\n      return m_maxIntensity;\n    } else {\n      m_maxIntensity = val;\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set minIntensity.\n   *\n   * @param {number|null} [val] If not specified, return the current value.\n   *    If a number, use this as the minimum intensity.  If `null`, compute\n   *    the minimum intensity.\n   * @returns {number|null|this}\n   */\n  this.minIntensity = function (val) {\n    if (val === undefined) {\n      return m_minIntensity;\n    } else {\n      m_minIntensity = val;\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set updateDelay.\n   *\n   * @param {number} [val] If not specified, return the current update delay.\n   *    If specified, this is the delay in milliseconds after a zoom, rotate,\n   *    or pan event before recomputing the heatmap.\n   * @returns {number|this}\n   */\n  this.updateDelay = function (val) {\n    if (val === undefined) {\n      return m_updateDelay;\n    } else {\n      m_updateDelay = parseInt(val, 10);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set binned value.\n   *\n   * @param {boolean|number|'auto'} [val] If not specified, return the current\n   *    binned value.  If `true` or a number, spatially bin data as part of\n   *    producing the heatmap.  If falsy, each datapoint stands on its own.\n   *    If `'auto'`, bin data if there are more data points than there would be\n   *    bins.  Using `true` or `auto` uses bins that are\n   *    `max(Math.floor((radius + blurRadius) / 8), 3)`.\n   * @returns {boolean|number|'auto'|this}\n   */\n  this.binned = function (val) {\n    if (val === undefined) {\n      return m_binned;\n    } else {\n      if (val === 'true') {\n        val = true;\n      } else if (val === 'false') {\n        val = false;\n      } else if (val !== 'auto' && val !== true && val !== false) {\n        val = parseInt(val, 10);\n        if (val <= 0 || isNaN(val)) {\n          val = false;\n        }\n      }\n      m_binned = val;\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set position accessor.\n   *\n   * @param {geo.geoPosition|function} [val] If not specified, return the\n   *    current position accessor.  If specified, use this for the position\n   *    accessor and return `this`.  If a function is given, this is called\n   *    with `(dataElement, dataIndex)`.\n   * @returns {geo.geoPosition|function|this} The current position or this\n   *    feature.\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_position;\n    } else {\n      m_position = val;\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get pre-computed gcs position accessor.\n   *\n   * @returns {geo.heatmap}\n   */\n  this.gcsPosition = function () {\n    this._update();\n    return m_gcsPosition;\n  };\n\n  /**\n   * Get/Set intensity.\n   *\n   * @param {function} [val] If not specified, the current intensity accessor.\n   *    Otherwise, a function that returns the intensity of each data point.\n   * @returns {function|this}\n   */\n  this.intensity = function (val) {\n    if (val === undefined) {\n      return m_intensity;\n    } else {\n      m_intensity = val;\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.heatmapFeature.spec} arg\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        radius: 10,\n        blurRadius: 10,\n        gaussian: true,\n        color: {\n          0:    {r: 0, g: 0, b: 0.0, a: 0.0},\n          0.25: {r: 0, g: 0, b: 1, a: 0.5},\n          0.5:  {r: 0, g: 1, b: 1, a: 0.6},\n          0.75: {r: 1, g: 1, b: 0, a: 0.7},\n          1:    {r: 1, g: 0, b: 0, a: 0.8}}\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    m_this.style(defaultStyle);\n\n    if (m_position) {\n      m_this.dataTime().modified();\n    }\n  };\n\n  /**\n   * Build the fetaure.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    var data = m_this.data(),\n        intensity = null,\n        position = [],\n        setMax = (m_maxIntensity === null || m_maxIntensity === undefined),\n        setMin = (m_minIntensity === null || m_minIntensity === undefined);\n\n    data.forEach(function (d, i) {\n      position.push(m_this.position()(d, i));\n      if (setMax || setMin) {\n        intensity = m_this.intensity()(d, i);\n        if (m_maxIntensity === null || m_maxIntensity === undefined) {\n          m_maxIntensity = intensity;\n        }\n        if (m_minIntensity === null || m_minIntensity === undefined) {\n          m_minIntensity = intensity;\n        }\n        if (setMax && intensity > m_maxIntensity) {\n          m_maxIntensity = intensity;\n        }\n        if (setMin && intensity < m_minIntensity) {\n          m_minIntensity = intensity;\n        }\n\n      }\n    });\n    if (setMin && setMax && m_minIntensity === m_maxIntensity) {\n      m_minIntensity -= 1;\n    }\n    m_gcsPosition = transform.transformCoordinates(\n      m_this.gcs(), m_this.layer().map().gcs(), position);\n\n    m_this.buildTime().modified();\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(heatmapFeature, feature);\nmodule.exports = heatmapFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./heatmapFeature.js","var inherit = require('./inherit');\nvar tile = require('./tile');\n\n/**\n * This class defines a tile that is part of a standard \"image pyramid\", such\n * as an open street map tile set.  Every tile is uniquely indexed by a row,\n * column, and zoom level.  The number of rows/columns at zoom level z is\n * `2^z`, the number of pixels per tile is configurable.\n *\n * By default, this class assumes that images are fetched from the url, but\n * subclasses may define additional rendering steps to produce the images\n * before passing them off to the handlers.\n *\n * @class\n * @alias geo.imageTile\n * @extends geo.tile\n * @param {object} spec The tile specification.\n *\n * @param {object} spec.index The global position of the tile.\n * @param {number} spec.index.x The x-coordinate (usually the column number).\n * @param {number} spec.index.y The y-coordinate (usually the row number).\n * @param {number} spec.index.level The zoom level.\n *\n * @param {object?} spec.size The size of each tile.\n * @param {number} [spec.size.x=256] Width in pixels.\n * @param {number} [spec.size.y=256] Height in pixels.\n *\n * @param {string} spec.url A url to the image.\n * @param {string} [spec.crossDomain='anonymous'] Image CORS attribute.\n *\n * @param {object} spec.overlap The size of overlap with neighboring tiles.\n * @param {number} [spec.overlap.x=0]\n * @param {number} [spec.overlap.y=0]\n */\nvar imageTile = function (spec) {\n  if (!(this instanceof imageTile)) {\n    return new imageTile(spec);\n  }\n\n  var $ = require('jquery');\n\n  spec.size = spec.size || {x: 256, y: 256};\n  this._image = null;\n\n  this._cors = (spec.crossDomain || spec.crossDomain === null) ? spec.crossDomain : 'anonymous';\n\n  // Call superclass constructor\n  tile.call(this, spec);\n\n  /**\n   * Read only accessor to the Image object used by the tile.  Note, this\n   * method does not guarantee that the image data is available.  Use the\n   * promise interface to add asynchronous handlers.\n   *\n   * @property {Image} image The image object used by the tile.\n   * @name geo.imageTile#image\n   */\n  Object.defineProperty(this, 'image', {\n    get: function () { return this._image; }\n  });\n\n  /**\n   * Initiate the image request.\n   *\n   * @returns {this}\n   */\n  this.fetch = function () {\n    var defer;\n    if (!this._image) {\n      this._image = new Image(this.size.x, this.size.y);\n      // Only set the crossOrigin parameter if this is going across origins.\n      if (this._cors && this._url.indexOf(':') >= 0 &&\n          this._url.indexOf('/') === this._url.indexOf(':') + 1) {\n        this._image.crossOrigin = this._cors;\n      }\n      defer = $.Deferred();\n      this._image.onload = defer.resolve;\n      this._image.onerror = defer.reject;\n      this._image.src = this._url;\n\n      // attach a promise interface to `this`\n      defer.done(function () {\n        this._fetched = true;\n      }.bind(this)).promise(this);\n    }\n    return this;\n  };\n\n  /**\n   * Set the opacity of the tile to 0 and gradually fade in over the given\n   * number of milliseconds.  This will also resolve the embedded promise\n   * interface.\n   *\n   * @param {number} duration The duration of the animation in ms.\n   * @returns {this}\n   */\n  this.fadeIn = function (duration) {\n    var promise = this.fetch(),\n        defer = $.Deferred();\n    $(this._image).css('display', 'none');\n    promise.done(function () {\n      $(this._image).fadeIn(duration, function () {\n        defer.resolve();\n      });\n    }.bind(this));\n    return defer.promise(this);\n  };\n\n  return this;\n};\n\ninherit(imageTile, tile);\n\nmodule.exports = imageTile;\n\n\n\n// WEBPACK FOOTER //\n// ./imageTile.js","var inherit = require('../inherit');\nvar registerLayer = require('../registry').registerLayer;\nvar layer = require('../layer');\n\n/**\n * Create a new instance of class uiLayer.\n *\n * @class\n * @alias geo.gui.uiLayer\n * @extends {geo.layer}\n * @param {object} [arg] Options for the layer.\n * @returns {geo.gui.uiLayer}\n */\nvar uiLayer = function (arg) {\n  'use strict';\n\n  var createWidget = require('../registry').createWidget;\n\n  // The widget stays fixed on the screen.\n  arg.renderer = 'dom';\n  arg.sticky = false;\n\n  if (!(this instanceof uiLayer)) {\n    return new uiLayer(arg);\n  }\n  layer.call(this, arg);\n\n  var m_this = this,\n      s_exit = this._exit;\n\n  /**\n   * Create a new ui control.\n   *\n   * @param {string} widgetName The name of the widget.\n   * @param {object} arg Options for the widget.\n   * @param {geo.object} [arg.parent] A parent object for the widget.\n   * @returns {geo.gui.widget} The new widget.\n   */\n  this.createWidget = function (widgetName, arg) {\n    var newWidget = createWidget(widgetName, m_this, arg);\n\n    // We only want top level widgets to be a child of the uiLayer\n    if (!(arg && 'parent' in arg)) {\n      m_this.addChild(newWidget);\n    }\n\n    newWidget._init(arg);\n    m_this.modified();\n    return newWidget;\n  };\n\n  /**\n   * Delete a ui control.\n   *\n   * @param {geo.gui.widget} widget The widget to remove.\n   * @returns {this}\n   */\n  this.deleteWidget = function (widget) {\n    widget._exit();\n    m_this.removeChild(widget);\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Free memory and destroy the layer.\n   */\n  this._exit = function () {\n    m_this.children().forEach(function (child) {\n      m_this.deleteWidget(child);\n    });\n    s_exit();\n  };\n};\n\ninherit(uiLayer, layer);\n\nregisterLayer('ui', uiLayer);\nmodule.exports = uiLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/uiLayer.js","var inherit = require('./inherit');\nvar featureLayer = require('./featureLayer');\n\n/**\n * Standard modulo operator where the output is in [0, b) for all inputs.\n * @private\n * @param {number} a Any finite number.\n * @param {number} b A positive number.\n * @returns {number} The positive version of `a % b`.\n */\nfunction modulo(a, b) {\n  return ((a % b) + b) % b;\n}\n\n/**\n * Pick a subdomain from a list of subdomains based on a the tile location.\n *\n * @param {number} x The x tile coordinate.\n * @param {number} y The y tile coordinate.\n * @param {number} z The tile layer.\n * @param {string[]} subdomains The list of known subdomains.\n * @returns {string} A subdomain based on the location.\n */\nfunction m_getTileSubdomain(x, y, z, subdomains) {\n  return subdomains[modulo(x + y + z, subdomains.length)];\n}\n\n/**\n * Returns an OSM tile server formatting function from a standard format\n * string. Replaces `{s}`, `{z}`, `{x}`, and `{y}`.  These may be any case\n * and may be prefixed with `$` (e.g., `${X}` is the same as `{x}`).  The\n * subdomain can be specifed by a string of characters, listed as a range,\n * or as a comma-separated list (e.g., `{s:abc}`, `{a-c}`, `{a,b,c}` are\n * all equivalent.  The comma-separated list can have subdimains that are of\n * any length; the string and range both use one-character subdomains.\n *\n * @param {string} base The tile format string\n * @returns {function} A conversion function.\n * @private.\n */\nfunction m_tileUrlFromTemplate(base) {\n  var xPattern = new RegExp(/\\$?\\{[xX]\\}/),\n      yPattern = new RegExp(/\\$?\\{[yY]\\}/),\n      zPattern = new RegExp(/\\$?\\{[zZ]\\}/),\n      sPattern = new RegExp(/\\$?\\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\\}/);\n  var url = base\n      .replace(sPattern, '{s}')\n      .replace(xPattern, '{x}')\n      .replace(yPattern, '{y}')\n      .replace(zPattern, '{z}');\n  var urlSubdomains;\n  var sMatch = base.match(sPattern);\n  if (sMatch) {\n    if (sMatch[2]) {\n      urlSubdomains = sMatch[1].split(',');\n    } else if (sMatch[1][1] === ':') {\n      urlSubdomains = sMatch[1].substr(2).split('');\n    } else if (sMatch[1][1] === '-') {\n      urlSubdomains = [];\n      var start = sMatch[1].charCodeAt(0),\n          end = sMatch[1].charCodeAt(2);\n      for (var i = Math.min(start, end); i <= Math.max(start, end); i += 1) {\n        urlSubdomains.push(String.fromCharCode(i));\n      }\n    }\n  }\n\n  return function (x, y, z, subdomains) {\n    return url\n      .replace('{s}', m_getTileSubdomain(x, y, z, urlSubdomains || subdomains))\n      .replace('{x}', x)\n      .replace('{y}', y)\n      .replace('{z}', z);\n  };\n}\n\n/**\n * This method defines a tileLayer, an abstract class defining a layer\n * divided into tiles of arbitrary data.  Notably, this class provides the\n * core functionality of {@link geo.osmLayer}, but hooks exist to render\n * tiles more generically.  When multiple zoom levels are present in a given\n * dataset, this class assumes that the space occupied by tile `(i, j)` at\n * level `z` is covered by a 2x2 grid of tiles at zoom level `z + 1`:\n * ```\n *   (2i, 2j),     (2i, 2j + 1)\n *   (2i + 1, 2j), (2i + 1, 2j + 1)\n * ```\n * The higher level tile set should represent a 2x increase in resolution.\n *\n * @class\n * @alias geo.tileLayer\n * @extends geo.featureLayer\n * @param {object?} options\n * @param {number} [options.minLevel=0] The minimum zoom level available.\n * @param {number} [options.maxLevel=18] The maximum zoom level available.\n * @param {object} [options.tileOverlap] Pixel overlap between tiles.\n * @param {number} [options.tileOverlap.x] Horizontal overlap.\n * @param {number} [options.tileOverlap.y] Vertical overlap.\n * @param {number} [options.tileWidth=256] The tile width without overlap.\n * @param {number} [options.tileHeight=256] The tile height without overlap.\n * @param {function} [options.tilesAtZoom=null] A function that is given a\n *    zoom level and returns `{x: (num), y: (num)}` with the number of tiles\n *    at that zoom level.\n * @param {number} [options.cacheSize=400] The maximum number of tiles to\n *    cache.  The default is 200 if keepLower is false.\n * @param {boolean} [options.keepLower=true] When truthy, keep lower zoom\n *    level tiles when showing high zoom level tiles.  This uses more memory\n *    but results in smoother transitions.\n * @param {boolean} [options.wrapX=true] Wrap in the x-direction.\n * @param {boolean} [options.wrapY=false] Wrap in the y-direction.\n * @param {string|function} [options.url=null] A function taking the current\n *   tile indices `(x, y, level, subdomains)` and returning a URL or jquery\n *   ajax config to be passed to the {geo.tile} constructor.  Example:\n *   ```\n *   (x, y, z, subdomains) => \"http://example.com/z/y/x.png\"\n *   ```\n *   If this is a string, a template url with {x}, {y}, {z}, and {s} as\n *   template variables.  {s} picks one of the subdomains parameter and may\n *   contain a comma-separated list of subdomains.\n * @param {string|list} [options.subdomain=\"abc\"] Subdomains to use in\n *   template url strings.  If a string, this is converted to a list before\n *   being passed to a url function.\n * @param {string} [options.baseUrl=null]  If defined, use the old-style base\n *   url instead of the options.url parameter.  This is functionally the same\n *   as using a url of `baseUrl/{z}/{x}/{y}.(options.imageFormat || png)`.\n *   If the specified string does not end in a slash, one is added.\n * @param {string} [options.imageFormat='png'] This is only used if a\n *   `baseUrl` is specified, in which case it determines the image name\n *   extension used in the url.\n * @param {number} [options.animationDuration=0] The number of milliseconds\n *   for the tile loading animation to occur.  Only some renderers support\n *   this.\n * @param {string} [options.attribution] An attribution to display with the\n *   layer (accepts HTML).\n * @param {function} [options.tileRounding=Math.round] This function\n *   determines which tiles will be loaded when the map is at a non-integer\n *   zoom.  For example, `Math.floor`, will use tile level 2 when the map is\n *   at zoom 2.9.\n * @param {function} [options.tileOffset] This function takes a zoom level\n *   argument and returns, in units of pixels, the coordinates of the point\n *   (0, 0) at the given zoom level relative to the bottom left corner of the\n *   domain.\n * @param {function} [options.tilesMaxBounds=null] This function takes a zoom\n *   level argument and returns an object with `x` and `y` in pixels which is\n *   used to crop the last row and column of tiles.  Note that if tiles wrap,\n *   only complete tiles in the wrapping direction(s) are supported, and this\n *   max bounds will probably not behave properly.\n * @param {boolean} [options.topDown=false]  True if the gcs is top-down,\n *   false if bottom-up (the ingcs does not matter, only the gcs coordinate\n *   system).  When falsy, this inverts the gcs y-coordinate when calculating\n *   local coordinates.\n * @returns {geo.tileLayer}\n */\nvar tileLayer = function (options) {\n  'use strict';\n  if (!(this instanceof tileLayer)) {\n    return new tileLayer(options);\n  }\n  featureLayer.call(this, options);\n\n  var $ = require('jquery');\n  var geo_event = require('./event');\n  var transform = require('./transform');\n  var tileCache = require('./tileCache');\n  var fetchQueue = require('./fetchQueue');\n  var adjustLayerForRenderer = require('./registry').adjustLayerForRenderer;\n  var Tile = require('./tile');\n\n  options = $.extend(true, {}, this.constructor.defaults, options || {});\n  if (!options.cacheSize) {\n    // this size should be sufficient for a 4k display\n    options.cacheSize = options.keepLower ? 600 : 200;\n  }\n  if ($.type(options.subdomains) === 'string') {\n    options.subdomains = options.subdomains.split('');\n  }\n  /* We used to call the url option baseUrl.  If a baseUrl is specified, use\n   * it instead of url, interpretting it as before. */\n  if (options.baseUrl) {\n    var url = options.baseUrl;\n    if (url && url.charAt(url.length - 1) !== '/') {\n      url += '/';\n    }\n    options.url = url + '{z}/{x}/{y}.' + (options.imageFormat || 'png');\n  }\n  /* Save the original url so that we can return it if asked */\n  options.originalUrl = options.url;\n  if ($.type(options.url) === 'string') {\n    options.url = m_tileUrlFromTemplate(options.url);\n  }\n\n  var s_init = this._init,\n      s_exit = this._exit,\n      s_visible = this.visible,\n      m_lastTileSet = [],\n      m_maxBounds = [],\n      m_exited;\n\n  // Space tile levels this far apart in z-buffer space.  This value doesn't\n  // have any visual effect in parallel projections, but will slightly skew\n  // perspective projections.\n  this._levelZIncrement = 1e-5;\n\n  // copy the options into a private variable\n  this._options = $.extend(true, {}, options);\n\n  // set the layer attribution text\n  this.attribution(options.attribution);\n\n  // initialize the object that keeps track of actively drawn tiles\n  this._activeTiles = {};\n\n  // initialize the object that stores active tile regions in a\n  // tree-like structure providing quick queries to determine\n  // if tiles are completely obscured or not.\n  this._tileTree = {};\n\n  // initialize the in memory tile cache\n  this._cache = tileCache({size: options.cacheSize});\n\n  // initialize the tile fetch queue\n  this._queue = fetchQueue({\n    // this should probably be 6 * subdomains.length if subdomains are used\n    size: 6,\n    // if track is the same as the cache size, then neither processing time\n    // nor memory will be wasted.  Larger values will use more memory,\n    // smaller values will do needless computations.\n    track: options.cacheSize,\n    needed: function (tile) {\n      return tile === this.cache.get(tile.toString(), true);\n    }.bind(this)\n  });\n\n  var m_tileOffsetValues = {};\n\n  /**\n   * Readonly accessor to the options object.\n   * @property {object} options A copy of the options object.\n   * @name geo.tileLayer#options\n   */\n  Object.defineProperty(this, 'options', {get: function () {\n    return $.extend({}, this._options);\n  }});\n\n  /**\n   * Readonly accessor to the tile cache object.\n   * @property {geo.tileCache} cache The tile cache object.\n   * @name geo.tileLayer#cache\n   */\n  Object.defineProperty(this, 'cache', {get: function () {\n    return this._cache;\n  }});\n\n  /**\n   * Readonly accessor to the active tile mapping.  This is an object\n   * containing all currently drawn tiles (hash(tile) => tile).\n   *\n   * @property {object} activeTiles The keys are `hash(tile)` and the values\n   *    are tiles.\n   * @name geo.tileLayer#activeTiles\n   */\n  Object.defineProperty(this, 'activeTiles', {get: function () {\n    return $.extend({}, this._activeTiles); // copy on output\n  }});\n\n  /**\n   * The number of tiles at the given zoom level.  The default implementation\n   * just returns `Math.pow(2, z)`.\n   *\n   * @param {number} level A zoom level.\n   * @returns {object} The number of tiles in each axis in the form\n   *     `{x: nx, y: ny}`.\n   */\n  this.tilesAtZoom = function (level) {\n    if (this._options.tilesAtZoom) {\n      return this._options.tilesAtZoom.call(this, level);\n    }\n    var s = Math.pow(2, level);\n    return {x: s, y: s};\n  };\n\n  /**\n   * The maximum tile bounds at the given zoom level, or null if no special\n   * tile bounds.\n   *\n   * @param {number} level A zoom level.\n   * @returns {object} The maximum tile bounds in pixels for the specified\n   *    level, or null if none specified (`{x: width, y: height}`).\n   */\n  this.tilesMaxBounds = function (level) {\n    if (this._options.tilesMaxBounds) {\n      return this._options.tilesMaxBounds.call(this, level);\n    }\n    return null;\n  };\n\n  /**\n   * Get the crop values for a tile based on the tilesMaxBounds function.\n   * Returns undefined if the tile should not be cropped.\n   *\n   * @param {object} tile The tile to compute crop values for.\n   * @returns {object} Either `undefined` or an object with `x` and `y` values\n   *      which is the size in pixels for the tile.\n   */\n  this.tileCropFromBounds = function (tile) {\n    if (!this._options.tilesMaxBounds) {\n      return;\n    }\n    var level = tile.index.level,\n        bounds = this._tileBounds(tile);\n    if (m_maxBounds[level] === undefined) {\n      m_maxBounds[level] = this.tilesMaxBounds(level) || null;\n    }\n    if (m_maxBounds[level] && (bounds.right > m_maxBounds[level].x ||\n        bounds.bottom > m_maxBounds[level].y)) {\n      return {\n        x: Math.max(0, Math.min(m_maxBounds[level].x, bounds.right) - bounds.left),\n        y: Math.max(0, Math.min(m_maxBounds[level].y, bounds.bottom) - bounds.top)\n      };\n    }\n  };\n\n  /**\n   * Returns `true` if the given tile index is valid:\n   * - min level <= level <= max level\n   * - 0 <= x <= 2^level - 1\n   * - 0 <= y <= 2^level - 1\n   * If the layer wraps, the x and y values may be allowed to extend beyond\n   * these values.\n   *\n   * @param {object} index The tile index.\n   * @param {number} index.x\n   * @param {number} index.y\n   * @param {number} index.level\n   * @returns {boolean}\n   */\n  this.isValid = function (index) {\n    if (!(this._options.minLevel <= index.level &&\n         index.level <= this._options.maxLevel)) {\n      return false;\n    }\n    if (!(this._options.wrapX || (\n      0 <= index.x && index.x <= this.tilesAtZoom(index.level).x - 1))) {\n      return false;\n    }\n    if (!(this._options.wrapY || (\n      0 <= index.y && index.y <= this.tilesAtZoom(index.level).y - 1))) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n   * Returns the current origin tile and offset at the given zoom level.\n   * This is intended to be cached in the future to optimize coordinate\n   * transformations.\n   *\n   * @protected\n   * @param {number} level The target zoom level.\n   * @returns {object} The origin and offset in the form\n   *   `{index: {x, y}, offset: {x, y}}`.\n   */\n  this._origin = function (level) {\n    var origin = this.toLevel(this.toLocal(this.map().origin()), level),\n        o = this._options,\n        index, offset;\n\n    // get the tile index\n    index = {\n      x: Math.floor(origin.x / o.tileWidth),\n      y: Math.floor(origin.y / o.tileHeight)\n    };\n\n    // get the offset inside the tile (in pixels)\n    // This computation should contain the only numerically unstable\n    // subtraction in this class.  All other methods will assume\n    // coordinates are given relative to the map origin.\n    offset = {\n      x: origin.x - o.tileWidth * index.x,\n      y: origin.y - o.tileHeight * index.y\n    };\n    return {index: index, offset: offset};\n  };\n\n  /**\n   * Returns a tile's bounds in its level coordinates.\n   *\n   * @param {geo.tile} tile The tile to check.\n   * @returns {object} The tile's bounds with `left`, `top`, `right`,\n   *   `bottom`.\n   */\n  this._tileBounds = function (tile) {\n    var origin = this._origin(tile.index.level);\n    return tile.bounds(origin.index, origin.offset);\n  };\n\n  /**\n   * Returns the tile indices at the given point.\n   *\n   * @param {object} point The coordinates in pixels relative to the map\n   *   origin.\n   * @param {number} point.x\n   * @param {number} point.y\n   * @param {number} level The target zoom level.\n   * @returns {object} The tile indices.  This has `x` and `y` properties.\n   */\n  this.tileAtPoint = function (point, level) {\n    var o = this._origin(level);\n    var map = this.map();\n    point = this.displayToLevel(map.gcsToDisplay(point, null), level);\n    if (isNaN(point.x)) { point.x = 0; }\n    if (isNaN(point.y)) { point.y = 0; }\n    var to = this._tileOffset(level);\n    if (to) {\n      point.x += to.x;\n      point.y += to.y;\n    }\n    var tile = {\n      x: Math.floor(\n        o.index.x + (o.offset.x + point.x) / this._options.tileWidth\n      ),\n      y: Math.floor(\n        o.index.y + (o.offset.y + point.y) / this._options.tileHeight\n      )\n    };\n    return tile;\n  };\n\n  /**\n   * Returns a tile's bounds in a gcs.\n   *\n   * @param {object|tile} indexOrTile Either a tile or an object with\n   *    {x, y, level}` specifying a tile.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the\n   *    interface gcs, `null` to use the map gcs, or any other transform.\n   * @returns {object} The tile bounds in the specified gcs.\n   */\n  this.gcsTileBounds = function (indexOrTile, gcs) {\n    var tile = (indexOrTile.index ? indexOrTile : Tile({\n      index: indexOrTile,\n      size: {x: this._options.tileWidth, y: this._options.tileHeight},\n      url: ''\n    }));\n    var to = this._tileOffset(tile.index.level),\n        bounds = tile.bounds({x: 0, y: 0}, to),\n        map = this.map(),\n        unit = map.unitsPerPixel(tile.index.level);\n    var coord = [{\n      x: bounds.left * unit, y: this._topDown() * bounds.top * unit\n    }, {\n      x: bounds.right * unit, y: this._topDown() * bounds.bottom * unit\n    }];\n    gcs = (gcs === null ? map.gcs() : (\n      gcs === undefined ? map.ingcs() : gcs));\n    if (gcs !== map.gcs()) {\n      coord = transform.transformCoordinates(map.gcs(), gcs, coord);\n    }\n    return {\n      left: coord[0].x,\n      top: coord[0].y,\n      right: coord[1].x,\n      bottom: coord[1].y\n    };\n  };\n\n  /**\n   * Returns an instantiated tile object with the given indices.  This\n   * method always returns a new tile object.  Use `_getTileCached`\n   * to use the caching layer.\n   *\n   * @param {object} index The tile index.\n   * @param {number} index.x\n   * @param {number} index.y\n   * @param {number} index.level\n   * @param {object} source The tile index used for constructing the url.\n   * @param {number} source.x\n   * @param {number} source.y\n   * @param {number} source.level\n   * @returns {geo.tile}\n   */\n  this._getTile = function (index, source) {\n    var urlParams = source || index;\n    return Tile({\n      index: index,\n      size: {x: this._options.tileWidth, y: this._options.tileHeight},\n      queue: this._queue,\n      url: this._options.url.call(\n        this, urlParams.x, urlParams.y, urlParams.level || 0,\n        this._options.subdomains)\n    });\n  };\n\n  /**\n   * Returns an instantiated tile object with the given indices.  This\n   * method is similar to `_getTile`, but checks the cache before\n   * generating a new tile.\n   *\n   * @param {object} index The tile index.\n   * @param {number} index.x\n   * @param {number} index.y\n   * @param {number} index.level\n   * @param {object} source The tile index used for constructing the url.\n   * @param {number} source.x\n   * @param {number} source.y\n   * @param {number} source.level\n   * @param {boolean} delayPurge If true, don't purge tiles from the cache.\n   * @returns {geo.tile}\n   */\n  this._getTileCached = function (index, source, delayPurge) {\n    var tile = this.cache.get(this._tileHash(index));\n    if (tile === null) {\n      tile = this._getTile(index, source);\n      this.cache.add(tile, this.remove.bind(this), delayPurge);\n    }\n    return tile;\n  };\n\n  /**\n   * Returns a string representation of the tile at the given index.\n   *\n   * Note: This method **must** return the same string as:\n   * ```\n   *   tile({index: index}).toString();\n   * ```\n   * This method is used as a hashing function for the caching layer.\n   *\n   * @param {object} index The tile index\n   * @param {number} index.x\n   * @param {number} index.y\n   * @param {number} index.level\n   * @returns {string}\n   */\n  this._tileHash = function (index) {\n    return [index.level || 0, index.y, index.x].join('_');\n  };\n\n  /**\n   * Returns the optimal starting and ending tile indices (inclusive)\n   * necessary to fill the given viewport.\n   *\n   * @param {number} level The zoom level\n   * @param {geo.geoBounds} bounds The map bounds in world coordinates.\n   * @returns {object} The tile range with a `start`  and `end` record, each\n   *      with `x` and `y` tile indices.\n   */\n  this._getTileRange = function (level, bounds) {\n    var corners = [\n      this.tileAtPoint({x: bounds.left, y: bounds.top}, level),\n      this.tileAtPoint({x: bounds.right, y: bounds.top}, level),\n      this.tileAtPoint({x: bounds.left, y: bounds.bottom}, level),\n      this.tileAtPoint({x: bounds.right, y: bounds.bottom}, level)\n    ];\n    return {\n      start: {\n        x: Math.min(corners[0].x, corners[1].x, corners[2].x, corners[3].x),\n        y: Math.min(corners[0].y, corners[1].y, corners[2].y, corners[3].y)\n      },\n      end: {\n        x: Math.max(corners[0].x, corners[1].x, corners[2].x, corners[3].x),\n        y: Math.max(corners[0].y, corners[1].y, corners[2].y, corners[3].y)\n      }\n    };\n  };\n\n  /**\n   * Returns a list of tiles necessary to fill the screen at the given\n   * zoom level, center point, and viewport size.  The list is optionally\n   * ordered by loading priority (center tiles first).\n   *\n   * @protected\n   * @param {number} maxLevel The zoom level\n   * @param {geo.geoBounds} bounds The map bounds\n   * @param {boolean} sorted Return a sorted list\n   * @param {boolean} onlyIfChanged If the set of tiles have not changed\n   *     (even if their desired order has), return undefined instead of an\n   *     array of tiles.\n   * @returns {geo.tile[]} An array of tile objects\n   */\n  this._getTiles = function (maxLevel, bounds, sorted, onlyIfChanged) {\n    var i, j, tiles = [], index, nTilesLevel,\n        start, end, indexRange, source, center, changed = false, old, level,\n        minLevel = (this._options.keepLower ? this._options.minLevel : maxLevel);\n    if (maxLevel < minLevel) {\n      maxLevel = minLevel;\n    }\n\n    /* Generate a list of the tiles that we want to create.  This is done\n     * before sorting, because we want to actually generate the tiles in\n     * the sort order. */\n    for (level = minLevel; level <= maxLevel; level += 1) {\n      // get the tile range to fetch\n      indexRange = this._getTileRange(level, bounds);\n      start = indexRange.start;\n      end = indexRange.end;\n      // total number of tiles existing at this level\n      nTilesLevel = this.tilesAtZoom(level);\n\n      if (!this._options.wrapX) {\n        start.x = Math.min(Math.max(start.x, 0), nTilesLevel.x - 1);\n        end.x = Math.min(Math.max(end.x, 0), nTilesLevel.x - 1);\n        if (level === minLevel && this._options.keepLower) {\n          start.x = 0;\n          end.x = nTilesLevel.x - 1;\n        }\n      }\n      if (!this._options.wrapY) {\n        start.y = Math.min(Math.max(start.y, 0), nTilesLevel.y - 1);\n        end.y = Math.min(Math.max(end.y, 0), nTilesLevel.y - 1);\n        if (level === minLevel && this._options.keepLower) {\n          start.y = 0;\n          end.y = nTilesLevel.y - 1;\n        }\n      }\n      /* If we are reprojecting tiles, we need a check to not use all levels\n       * if the number of tiles is excessive. */\n      if (this._options.gcs && this._options.gcs !== this.map().gcs() &&\n          level !== minLevel &&\n          (end.x + 1 - start.x) * (end.y + 1 - start.y) >\n          (this.map().size().width * this.map().size().height /\n          this._options.tileWidth / this._options.tileHeight) * 16) {\n        break;\n      }\n\n      // loop over the tile range\n      for (i = start.x; i <= end.x; i += 1) {\n        for (j = start.y; j <= end.y; j += 1) {\n          index = {level: level, x: i, y: j};\n          source = {level: level, x: i, y: j};\n          if (this._options.wrapX) {\n            source.x = modulo(source.x, nTilesLevel.x);\n          }\n          if (this._options.wrapY) {\n            source.y = modulo(source.y, nTilesLevel.y);\n          }\n          if (this.isValid(source)) {\n            if (onlyIfChanged && tiles.length < m_lastTileSet.length) {\n              old = m_lastTileSet[tiles.length];\n              changed = changed || (index.level !== old.level ||\n                  index.x !== old.x || index.y !== old.y);\n            }\n            tiles.push({index: index, source: source});\n          }\n        }\n      }\n    }\n\n    if (onlyIfChanged) {\n      if (!changed && tiles.length === m_lastTileSet.length) {\n        return;\n      }\n      m_lastTileSet.splice(0, m_lastTileSet.length);\n      $.each(tiles, function (idx, tile) {\n        m_lastTileSet.push(tile.index);\n      });\n    }\n\n    if (sorted) {\n      center = {\n        x: (start.x + end.x) / 2,\n        y: (start.y + end.y) / 2,\n        level: maxLevel,\n        bottomLevel: maxLevel\n      };\n      var numTiles = Math.max(end.x - start.x, end.y - start.y) + 1;\n      for (; numTiles >= 1; numTiles /= 2) {\n        center.bottomLevel -= 1;\n      }\n      tiles.sort(this._loadMetric(center));\n      /* If we are using a fetch queue, start a new batch */\n      if (this._queue) {\n        this._queue.batch(true);\n      }\n    }\n    if (this.cache.size < tiles.length) {\n      console.log('Increasing cache size to ' + tiles.length);\n      this.cache.size = tiles.length;\n    }\n    /* Actually get the tiles. */\n    for (i = 0; i < tiles.length; i += 1) {\n      tiles[i] = this._getTileCached(tiles[i].index, tiles[i].source, true);\n    }\n    this.cache.purge(this.remove.bind(this));\n    return tiles;\n  };\n\n  /**\n   * Prefetches tiles up to a given zoom level around a given bounding box.\n   *\n   * @param {number} level The zoom level.\n   * @param {geo.geoBounds} bounds The map bounds.\n   * @returns {jQuery.Deferred} resolves when all of the tiles are fetched.\n   */\n  this.prefetch = function (level, bounds) {\n    var tiles;\n    tiles = this._getTiles(level, bounds, true);\n    return $.when.apply($, tiles.map(function (tile) {\n      return tile.fetch();\n    }));\n  };\n\n  /**\n   * This method returns a metric that determines tile loading order.  The\n   * default implementation prioritizes tiles that are closer to the center,\n   * or at a lower zoom level.\n   *\n   * @protected\n   * @param {object} center The center tile.\n   * @param {number} center.x\n   * @param {number} center.y\n   * @returns {function} A function accepted by `Array.prototype.sort`.\n   */\n  this._loadMetric = function (center) {\n    return function (a, b) {\n      var a0, b0, dx, dy, cx, cy, scale;\n\n      a = a.index || a;\n      b = b.index || b;\n      // shortcut if zoom level differs\n      if (a.level !== b.level) {\n        if (center.bottomLevel && ((a.level >= center.bottomLevel) !==\n                                   (b.level >= center.bottomLevel))) {\n          return a.level >= center.bottomLevel ? -1 : 1;\n        }\n        return a.level - b.level;\n      }\n\n      /* compute the center coordinates relative to a.level.  Since we really\n       * care about the center of the tiles, use an offset */\n      scale = Math.pow(2, a.level - center.level);\n      cx = (center.x + 0.5) * scale - 0.5;\n      cy = (center.y + 0.5) * scale - 0.5;\n\n      // calculate distances to the center squared\n      dx = a.x - cx;\n      dy = a.y - cy;\n      a0 = dx * dx + dy * dy;\n\n      dx = b.x - cx;\n      dy = b.y - cy;\n      b0 = dx * dx + dy * dy;\n\n      // return negative if a < b, or positive if a > b\n      return a0 - b0;\n    };\n  };\n\n  /**\n   * Convert a coordinate from pixel coordinates at the given zoom\n   * level to world coordinates.\n   *\n   * @param {object} coord\n   * @param {number} coord.x The offset in pixels (level 0) from the left\n   *      edge.\n   * @param {number} coord.y The offset in pixels (level 0) from the bottom\n   *      edge.\n   * @param {number} level The zoom level of the source coordinates.\n   * @returns {object} World coordinates with `x` and `y`.\n   */\n  this.fromLevel = function (coord, level) {\n    var s = Math.pow(2, -level);\n    return {\n      x: coord.x * s,\n      y: coord.y * s\n    };\n  };\n\n  /**\n   * Convert a coordinate from layer coordinates to pixel coordinates at the\n   * given zoom level.\n   *\n   * @param {object} coord\n   * @param {number} coord.x The offset in pixels (level 0) from the left\n   *      edge.\n   * @param {number} coord.y The offset in pixels (level 0) from the bottom\n   *      edge.\n   * @param {number} level The zoom level of the new coordinates.\n   * @returns {object} The pixel coordinates with `x` and `y`.\n   */\n  this.toLevel = function (coord, level) {\n    var s = Math.pow(2, level);\n    return {\n      x: coord.x * s,\n      y: coord.y * s\n    };\n  };\n\n  /**\n   * Draw the given tile on the active canvas\n   *.\n   * @param {geo.tile} tile The tile to draw.\n   */\n  this.drawTile = function (tile) {\n    var hash = tile.toString();\n\n    if (this._activeTiles.hasOwnProperty(hash)) {\n      // the tile is already drawn, move it to the top\n      this._moveToTop(tile);\n    } else {\n      // pass to the rendering implementation\n      this._drawTile(tile);\n    }\n\n    // add the tile to the active cache\n    this._activeTiles[hash] = tile;\n  };\n\n  /**\n   * Render the tile on the canvas.  This implementation draws the tiles\n   * directly on the DOM using <img> tags.  Derived classes should override\n   * this method to draw the tile on a renderer specific context.\n   *\n   * @protected\n   * @param {geo.tile} tile The tile to draw.\n   */\n  this._drawTile = function (tile) {\n    // Make sure this method is not called when there is\n    // a renderer attached.\n    if (this.renderer() !== null) {\n      throw new Error('This draw method is not valid on renderer managed layers.');\n    }\n\n    // get the layer node\n    var level = tile.index.level,\n        div = $(this._getSubLayer(level)),\n        bounds = this._tileBounds(tile),\n        duration = this._options.animationDuration,\n        container = $('<div class=\"geo-tile-container\"/>').attr(\n          'tile-reference', tile.toString()),\n        crop;\n\n    // apply a transform to place the image correctly\n    container.append(tile.image);\n    container.css({\n      left: (bounds.left - parseInt(div.attr('offsetx') || 0, 10)) + 'px',\n      top: (bounds.top - parseInt(div.attr('offsety') || 0, 10)) + 'px'\n    });\n\n    crop = this.tileCropFromBounds(tile);\n    if (crop) {\n      container.addClass('crop').css({\n        width: crop.x + 'px',\n        height: crop.y + 'px'\n      });\n    }\n\n    // apply fade in animation\n    if (duration > 0) {\n      tile.fadeIn(duration);\n    }\n\n    // append the image element\n    div.append(container);\n\n    // add an error handler\n    tile.catch(function () {\n      // May want to do something special here later\n      console.warn('Could not load tile at ' + tile.toString());\n      this._remove(tile);\n    }.bind(this));\n  };\n\n  /**\n   * Remove the given tile from the canvas and the active cache.\n   *\n   * @param {geo.tile|string} tile The tile (or hash) to remove.\n   * @returns {geo.tile} The tile removed from the active layer.\n   */\n  this.remove = function (tile) {\n    var hash = tile.toString();\n    var value = this._activeTiles[hash];\n\n    if (value instanceof Tile) {\n      this._remove(value);\n    }\n\n    delete this._activeTiles[hash];\n    return value;\n  };\n\n  /**\n   * Remove the given tile from the canvas.  This implementation just\n   * finds and removes the <img> element created for the tile.\n   *\n   * @param {geo.tile|string} tile The tile object to remove.\n   */\n  this._remove = function (tile) {\n    if (tile.image) {\n      if (tile.image.parentElement) {\n        $(tile.image.parentElement).remove();\n      } else {\n        /* This shouldn't happen, but sometimes does.  Originally it happened\n         * when a tile was removed from the cache before it was finished\n         * being used; there is still some much rarer condition that can\n         * cause it.  Log that it happened until we can figure out how to fix\n         * the issue. */\n        console.log('No parent element to remove ' + tile.toString(), tile);\n      }\n      $(tile.image).remove();\n    }\n  };\n\n  /**\n   * Move the given tile to the top on the canvas.\n   *\n   * @param {geo.tile} tile The tile object to move.\n   */\n  this._moveToTop = function (tile) {\n    $.noop(tile);\n  };\n\n  /**\n   * Query the attached map for the current bounds and return them as pixels\n   *      at the current zoom level.\n   *\n   * @returns {object} Bounds object with `left`, `right`, `top`, `bottom`,\n   *      `scale`, and `level` keys.\n   */\n  this._getViewBounds = function () {\n    var map = this.map(),\n        mapZoom = map.zoom(),\n        zoom = this._options.tileRounding(mapZoom),\n        scale = Math.pow(2, mapZoom - zoom),\n        size = map.size();\n    var ul = this.displayToLevel({x: 0, y: 0}),\n        ur = this.displayToLevel({x: size.width, y: 0}),\n        ll = this.displayToLevel({x: 0, y: size.height}),\n        lr = this.displayToLevel({x: size.width, y: size.height});\n    return {\n      level: zoom,\n      scale: scale,\n      left: Math.min(ul.x, ur.x, ll.x, lr.x),\n      right: Math.max(ul.x, ur.x, ll.x, lr.x),\n      top: Math.min(ul.y, ur.y, ll.y, lr.y),\n      bottom: Math.max(ul.y, ur.y, ll.y, lr.y)\n    };\n  };\n\n  /**\n   * Remove all inactive tiles from the display.  An inactive tile is one\n   * that is no longer visible either because it was panned out of the active\n   * view or the zoom has changed.\n   *\n   * @protected\n   * @param {number} zoom Tiles in bounds at this zoom level will be kept.\n   * @param {boolean} doneLoading If true, allow purging additional tiles.\n   * @param {geo.geoBounds} bounds View bounds.  If not specified, this is\n   *   obtained from _getViewBounds().\n   * @returns {this}\n   */\n  this._purge = function (zoom, doneLoading, bounds) {\n    var tile, hash;\n\n    // Don't purge tiles in an active update\n    if (this._updating) {\n      return this;\n    }\n\n    // get the view bounds\n    if (!bounds) {\n      bounds = this._getViewBounds();\n    }\n\n    for (hash in this._activeTiles) {\n\n      tile = this._activeTiles[hash];\n      if (this._canPurge(tile, bounds, zoom, doneLoading)) {\n        this.remove(tile);\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Remove all active tiles from the canvas.\n   *\n   * @returns {geo.tile[]} The array of tiles removed.\n   */\n  this.clear = function () {\n    var tiles = [], tile;\n\n    // ignoring the warning here because this is a privately\n    // controlled object with simple keys\n    for (tile in this._activeTiles) {\n      tiles.push(this.remove(tile));\n    }\n\n    // clear out the tile coverage tree\n    this._tileTree = {};\n\n    m_lastTileSet = [];\n\n    return tiles;\n  };\n\n  /**\n   * Reset the layer to the initial state, clearing the canvas and resetting\n   * the tile cache.\n   *\n   * @returns {this}\n   */\n  this.reset = function () {\n    this.clear();\n    this._cache.clear();\n    return this;\n  };\n\n  /**\n   * Compute local coordinates from the given world coordinates.  The tile\n   * layer uses units of pixels relative to the world space coordinate\n   * origin.\n   *\n   * @param {object} pt A point in world space coordinates with `x` and `y`.\n   * @param {number|undefined} zoom If unspecified, use the map zoom.\n   * @returns {object} Local coordinates with `x` and `y`.\n   */\n  this.toLocal = function (pt, zoom) {\n    var map = this.map(),\n        unit = map.unitsPerPixel(zoom === undefined ? map.zoom() : zoom);\n    return {\n      x: pt.x / unit,\n      y: this._topDown() * pt.y / unit\n    };\n  };\n\n  /**\n   * Compute world coordinates from the given local coordinates.  The tile\n   * layer uses units of pixels relative to the world space coordinate\n   * origin.\n   *\n   * @param {object} pt A point in world space coordinates with `x` and `y`.\n   * @param {number|undefined} zoom If unspecified, use the map zoom.\n   * @returns {object} Local coordinates with `x` and `y`.\n   */\n  this.fromLocal = function (pt, zoom) {\n    // these need to always use the *layer* unitsPerPixel, or possibly\n    // convert tile space using a transform\n    var map = this.map(),\n        unit = map.unitsPerPixel(zoom === undefined ? map.zoom() : zoom);\n    return {\n      x: pt.x * unit,\n      y: this._topDown() * pt.y * unit\n    };\n  };\n\n  /**\n   * Return a factor for inverting the y units as appropriate.\n   *\n   * @returns {number} Either 1 to not invert y, or -1 to invert it.\n   */\n  this._topDown = function () {\n    return this._options.topDown ? 1 : -1;\n  };\n\n  /**\n   * Return the DOM element containing a level specific layer.  This will\n   * create the element if it doesn't already exist.\n   *\n   * @param {number} level The zoom level of the layer to fetch.\n   * @returns {DOM} The layer's DOM element.\n   */\n  this._getSubLayer = function (level) {\n    if (!this.canvas()) {\n      return;\n    }\n    var node = this.canvas()\n      .find('div[data-tile-layer=' + level.toFixed() + ']').get(0);\n    if (!node) {\n      node = $(\n        '<div class=geo-tile-layer data-tile-layer=\"' + level.toFixed() + '\"/>'\n      ).get(0);\n      this.canvas().append(node);\n    }\n    return node;\n  };\n\n  /**\n   * Set sublayer transforms to align them with the given zoom level.\n   *\n   * @param {number} level The target zoom level.\n   * @param {geo.geoBounds} view The view bounds.  The top and left are used\n   *      to adjust the offset of tile layers.\n   * @returns {object} The `x` and `y` offsets for the current level.\n   */\n  this._updateSubLayers = function (level, view) {\n    var canvas = this.canvas(),\n        lastlevel = parseInt(canvas.attr('lastlevel'), 10),\n        lastx = parseInt(canvas.attr('lastoffsetx') || 0, 10),\n        lasty = parseInt(canvas.attr('lastoffsety') || 0, 10);\n    if (lastlevel === level && Math.abs(lastx - view.left) < 65536 &&\n        Math.abs(lasty - view.top) < 65536) {\n      return {x: lastx, y: lasty};\n    }\n    var map = this.map(),\n        to = this._tileOffset(level),\n        x = parseInt((view.left + view.right - map.size().width) / 2 + to.x, 10),\n        y = parseInt((view.top + view.bottom - map.size().height) / 2 + to.y, 10);\n    canvas.find('.geo-tile-layer').each(function (idx, el) {\n      var $el = $(el),\n          layer = parseInt($el.data('tileLayer'), 10);\n      $el.css(\n        'transform',\n        'scale(' + Math.pow(2, level - layer) + ')'\n      );\n      var layerx = parseInt(x / Math.pow(2, level - layer), 10),\n          layery = parseInt(y / Math.pow(2, level - layer), 10),\n          dx = layerx - parseInt($el.attr('offsetx') || 0, 10),\n          dy = layery - parseInt($el.attr('offsety') || 0, 10);\n      $el.attr({offsetx: layerx, offsety: layery});\n      $el.find('.geo-tile-container').each(function (tileidx, tileel) {\n        $(tileel).css({\n          left: (parseInt($(tileel).css('left'), 10) - dx) + 'px',\n          top: (parseInt($(tileel).css('top'), 10) - dy) + 'px'\n        });\n      });\n    });\n    canvas.attr({lastoffsetx: x, lastoffsety: y, lastlevel: level});\n    return {x: x, y: y};\n  };\n\n  /**\n   * Update the view according to the map/camera.\n   *\n   * @param {geo.event} evt The event that triggered the change.  Zoom and\n   *      rotate events do nothing, since they are always followed by a pan\n   *      event which will cause appropriate action.\n   * @returns {this}\n   */\n  this._update = function (evt) {\n    /* Ignore zoom and rotate events, as they are ALWAYS followed by a pan\n     * event */\n    if (evt && evt.event && (evt.event.event === geo_event.zoom ||\n        evt.event.event === geo_event.rotate)) {\n      return this;\n    }\n    if (!this.visible()) {\n      return this;\n    }\n    var map = this.map(),\n        bounds = map.bounds(undefined, null),\n        mapZoom = map.zoom(),\n        zoom = this._options.tileRounding(mapZoom),\n        tiles;\n    if (this._updateSubLayers) {\n      var view = this._getViewBounds();\n      // Update the transform for the local layer coordinates\n      var offset = this._updateSubLayers(zoom, view) || {x: 0, y: 0};\n\n      var to = this._tileOffset(zoom);\n      if (this.renderer() === null) {\n        var scale = Math.pow(2, mapZoom - zoom),\n            rotation = map.rotation(),\n            rx = -to.x + -(view.left + view.right) / 2 + offset.x,\n            ry = -to.y + -(view.bottom + view.top) / 2 + offset.y,\n            dx = (rx + map.size().width / 2),\n            dy = (ry + map.size().height / 2);\n\n        this.canvas().css({\n          'transform-origin': '' +\n              -rx + 'px ' +\n              -ry + 'px'\n        });\n        var transform = 'translate(' + dx + 'px' + ',' + dy + 'px' + ')' +\n            'scale(' + scale + ')';\n        if (rotation) {\n          transform += 'rotate(' + (rotation * 180 / Math.PI) + 'deg)';\n        }\n        this.canvas().css('transform', transform);\n      }\n      /* Set some attributes that can be used by non-css based viewers.  This\n       * doesn't include the map center, as that may need to be handled\n       * differently from the view center. */\n      this.canvas().attr({\n        scale: Math.pow(2, mapZoom - zoom),\n        dx: -to.x + -(view.left + view.right) / 2,\n        dy: -to.y + -(view.bottom + view.top) / 2,\n        offsetx: offset.x,\n        offsety: offset.y,\n        rotation: map.rotation()\n      });\n    }\n\n    tiles = this._getTiles(\n      zoom, bounds, true, true\n    );\n\n    if (tiles === undefined) {\n      return this;\n    }\n\n    // reset the tile coverage tree\n    this._tileTree = {};\n\n    tiles.forEach(function (tile) {\n      if (tile.fetched()) {\n        /* if we have already fetched the tile, we know we can just draw it,\n         * as the bounds won't have changed since the call to _getTiles. */\n        this.drawTile(tile);\n\n        // mark the tile as covered\n        this._setTileTree(tile);\n      } else {\n        if (!tile._queued) {\n          tile.then(function () {\n            if (m_exited) {\n              /* If we have disconnected the renderer, do nothing.  This\n               * happens when the layer is being deleted. */\n              return;\n            }\n            if (tile !== this.cache.get(tile.toString())) {\n              /* If the tile has fallen out of the cache, don't draw it -- it\n               * is untracked.  This may be an indication that a larger cache\n               * should have been used. */\n              return;\n            }\n            /* Check if a tile is still desired.  Don't draw it if it\n             * isn't. */\n            var mapZoom = map.zoom(),\n                zoom = this._options.tileRounding(mapZoom),\n                view = this._getViewBounds();\n            if (this._canPurge(tile, view, zoom)) {\n              this.remove(tile);\n              return;\n            }\n\n            this.drawTile(tile);\n\n            // mark the tile as covered\n            this._setTileTree(tile);\n          }.bind(this));\n\n          this.addPromise(tile);\n          tile._queued = true;\n        } else {\n          /* If we are using a fetch queue, tell the queue so this tile can\n           * be reprioritized. */\n          var pos = this._queue ? this._queue.get(tile) : -1;\n          if (pos >= 0) {\n            this._queue.add(tile);\n          }\n        }\n      }\n    }.bind(this));\n    // purge all old tiles when the new tiles are loaded (successfully or not)\n    $.when.apply($, tiles)\n      .done(// called on success and failure\n        function () {\n          var map = this.map(),\n              mapZoom = map.zoom(),\n              zoom = this._options.tileRounding(mapZoom);\n          this._purge(zoom, true);\n        }.bind(this)\n      );\n    return this;\n  };\n\n  /**\n   * Set a value in the tile tree object indicating that the given area of\n   * the canvas is covered by the tile.\n   *\n   * @protected\n   * @param {geo.tile} tile The tile to add.\n   */\n  this._setTileTree = function (tile) {\n    if (this._options.keepLower) {\n      return;\n    }\n    var index = tile.index;\n    this._tileTree[index.level] = this._tileTree[index.level] || {};\n    this._tileTree[index.level][index.x] = this._tileTree[index.level][index.x] || {};\n    this._tileTree[index.level][index.x][index.y] = tile;\n  };\n\n  /**\n   * Get a value in the tile tree object if it exists or return `null`.\n   * @protected\n   * @param {object} index A tile index object\n   * @param {object} index.level\n   * @param {object} index.x\n   * @param {object} index.y\n   * @returns {geo.tile|null}\n   */\n  this._getTileTree = function (index) {\n    return (\n      (this._tileTree[index.level] || {})[index.x] || {}\n    )[index.y] || null;\n  };\n\n  /**\n   * Returns true if the tile is completely covered by other tiles on the\n   * canvas.  Currently this method only checks layers +/- 1 away from\n   * `tile`.  If the zoom level is allowed to change by 2 or more in a single\n   * update step, this method will need to be refactored to make a more\n   * robust check.  Returns an array of tiles covering it or null if any\n   * part of the tile is exposed.\n   *\n   * @protected\n   * @param {geo.tile} tile The tile to check.\n   * @returns {geo.tile[]|null}\n   */\n  this._isCovered = function (tile) {\n    var level = tile.index.level,\n        x = tile.index.x,\n        y = tile.index.y,\n        tiles = [];\n\n    // Check one level up\n    tiles = this._getTileTree({\n      level: level - 1,\n      x: Math.floor(x / 2),\n      y: Math.floor(y / 2)\n    });\n    if (tiles) {\n      return [tiles];\n    }\n\n    // Check one level down\n    tiles = [\n      this._getTileTree({\n        level: level + 1,\n        x: 2 * x,\n        y: 2 * y\n      }),\n      this._getTileTree({\n        level: level + 1,\n        x: 2 * x + 1,\n        y: 2 * y\n      }),\n      this._getTileTree({\n        level: level + 1,\n        x: 2 * x,\n        y: 2 * y + 1\n      }),\n      this._getTileTree({\n        level: level + 1,\n        x: 2 * x + 1,\n        y: 2 * y + 1\n      })\n    ];\n    if (tiles.every(function (t) { return t !== null; })) {\n      return tiles;\n    }\n\n    return null;\n  };\n\n  /**\n   * Returns true if the provided tile is outside of the current view bounds\n   * and can be removed from the canvas.\n   * @protected\n   * @param {geo.tile} tile The tile to check.\n   * @param {geo.geoBounds} bounds The view bounds.\n   * @returns {boolean}\n   */\n  this._outOfBounds = function (tile, bounds) {\n    /* We may want to add an (n) tile edge buffer so we appear more\n     * responsive */\n    var to = this._tileOffset(tile.index.level);\n    var scale = 1;\n    if (tile.index.level !== bounds.level) {\n      scale = Math.pow(2, (bounds.level || 0) - (tile.index.level || 0));\n    }\n    return (tile.bottom - to.y) * scale < bounds.top ||\n           (tile.left - to.x) * scale > bounds.right ||\n           (tile.top - to.y) * scale > bounds.bottom ||\n           (tile.right - to.x) * scale < bounds.left;\n  };\n\n  /**\n   * Returns true if the provided tile can be purged from the canvas.  This\n   * method will return `true` if the tile is completely covered by one or\n   * more other tiles or it is outside of the active view bounds.  This\n   * method returns the logical and of `_isCovered` and `_outOfBounds`.\n   * @protected\n   * @param {geo.tile} tile The tile to check.\n   * @param {geo.geoBounds} [bounds] The view bounds (if unspecified, assume\n   *      global bounds)\n   * @param {number} bounds.level The zoom level the bounds are given as.\n   * @param {number} zoom Keep in bound tile at this zoom level.\n   * @param {boolean} doneLoading If true, allow purging additional tiles.\n   * @returns {boolean}\n   */\n  this._canPurge = function (tile, bounds, zoom, doneLoading) {\n    if (this._options.keepLower) {\n      zoom = zoom || 0;\n      if (zoom < tile.index.level &&\n          tile.index.level !== this._options.minLevel) {\n        return true;\n      }\n      if (tile.index.level === this._options.minLevel &&\n          !this._options.wrapX && !this._options.wrapY) {\n        return false;\n      }\n    } else {\n      /* For tile layers that should only keep one layer, if loading is\n       * finished, purge all but the current layer.  This is important for\n       * semi-transparanet layers. */\n      if ((doneLoading || this._isCovered(tile)) &&\n          zoom !== tile.index.level) {\n        return true;\n      }\n    }\n    if (bounds) {\n      return this._outOfBounds(tile, bounds);\n    }\n    return false;\n  };\n\n  /**\n   * Convert display pixel coordinates (where (0,0) is the upper left) to\n   * layer pixel coordinates (typically (0,0) is the center of the map and\n   * the upper-left has the most negative values).\n   * By default, this is done at the current base zoom level.\n   *\n   * @param {object} [pt] The point to convert with `x` and `y`.  If\n   *      `undefined`, use the center of the display.\n   * @param {number} [zoom] If specified, the zoom level to use.\n   * @returns {object} The point in level coordinates with `x` and `y`.\n   */\n  this.displayToLevel = function (pt, zoom) {\n    var map = this.map(),\n        mapzoom = map.zoom(),\n        roundzoom = this._options.tileRounding(mapzoom),\n        unit = map.unitsPerPixel(zoom === undefined ? roundzoom : zoom),\n        gcsPt;\n    if (pt === undefined) {\n      var size = map.size();\n      pt = {x: size.width / 2, y: size.height / 2};\n    }\n    /* displayToGcs can fail under certain projections.  If this happens,\n     * just return the origin. */\n    try {\n      gcsPt = map.displayToGcs(pt, this._options.gcs || null);\n    } catch (err) {\n      gcsPt = {x: 0, y: 0};\n    }\n    /* Reverse the y coordinate, since we expect the gcs coordinate system\n     * to be right-handed and the level coordinate system to be\n     * left-handed. */\n    var lvlPt = {x: gcsPt.x / unit, y: this._topDown() * gcsPt.y / unit};\n    return lvlPt;\n  };\n\n  /**\n   * Get or set the tile url string or function.  If changed, load the new\n   * tiles.\n   *\n   * @param {string|function} [url] The new tile url.\n   * @returns {string|function|this}\n   */\n  this.url = function (url) {\n    if (url === undefined) {\n      return this._options.originalUrl;\n    }\n    if (url === this._options.originalUrl) {\n      return this;\n    }\n    this._options.originalUrl = url;\n    if ($.type(url) === 'string') {\n      url = m_tileUrlFromTemplate(url);\n    }\n    this._options.url = url;\n    this.reset();\n    this.map().draw();\n    return this;\n  };\n\n  /**\n   * Get or set the subdomains used for templating.\n   *\n   * @param {string|list} [subdomains] A comma-separated list, a string of\n   *      single character subdomains, or a list.\n   * @returns {string|list|this}\n   */\n  this.subdomains = function (subdomains) {\n    if (subdomains === undefined) {\n      return this._options.subdomains;\n    }\n    if (subdomains) {\n      if ($.type(subdomains) === 'string') {\n        if (subdomains.indexOf(',') >= 0) {\n          subdomains = subdomains.split(',');\n        } else {\n          subdomains = subdomains.split('');\n        }\n      }\n      this._options.subdomains = subdomains;\n      this.reset();\n      this.map().draw();\n    }\n    return this;\n  };\n\n  /**\n   * Return a value from the tileOffset function, caching it for different\n   * levels.\n   *\n   * @param {number} level The level to pass to the tileOffset function.\n   * @returns {object} A tile offset object with `x` and `y` properties.\n   */\n  this._tileOffset = function (level) {\n    if (m_tileOffsetValues[level] === undefined) {\n      m_tileOffsetValues[level] = this._options.tileOffset(level);\n    }\n    return m_tileOffsetValues[level];\n  };\n\n  /**\n   * Get/Set visibility of the layer.\n   *\n   * @param {boolean|undefined} val If unspecified, return the visibility,\n   *    otherwise set it.\n   * @returns {boolean|this} Either the visibility (if getting) or the layer\n   *    (if setting).\n   */\n  this.visible = function (val) {\n    if (val === undefined) {\n      return s_visible();\n    }\n    if (this.visible() !== val) {\n      s_visible(val);\n\n      if (val) {\n        this._update();\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Initialize after the layer is added to the map.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    var sublayer;\n\n    // call super method\n    s_init.apply(this, arguments);\n\n    if (this.renderer() === null) {\n      // Initialize sublayers in the correct order\n      for (sublayer = 0; sublayer <= this._options.maxLevel; sublayer += 1) {\n        this._getSubLayer(sublayer);\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Clean up the layer.\n   *\n   * @returns {this}\n   */\n  this._exit = function () {\n    this.reset();\n    // call super method\n    s_exit.apply(this, arguments);\n    m_exited = true;\n    return this;\n  };\n\n  adjustLayerForRenderer('tile', this);\n\n  return this;\n};\n\n/**\n * This object contains the default options used to initialize the tileLayer.\n */\ntileLayer.defaults = {\n  minLevel: 0,\n  maxLevel: 18,\n  tileOverlap: {x: 0, y: 0},\n  tileWidth: 256,\n  tileHeight: 256,\n  wrapX: true,\n  wrapY: false,\n  url: null,\n  subdomains: 'abc',\n  tileOffset: function (level) {\n    return {x: 0, y: 0};\n  },\n  tilesMaxBounds: null,\n  topDown: false,\n  keepLower: true,\n  // cacheSize: 400,  // set depending on keepLower\n  tileRounding: Math.round,\n  attribution: '',\n  animationDuration: 0\n};\n\ninherit(tileLayer, featureLayer);\n\nmodule.exports = tileLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./tileLayer.js","/**\n * This class implements a simple cache for tile objects.  Each tile is\n * stored in cache object keyed by a configurable hashing function.  Another\n * array keeps track of last access times for each tile to purge old tiles\n * once the maximum cache size is reached.\n *\n * @class\n * @alias geo.tileCache\n *\n * @param {object} [options] A configuration object for the cache.\n * @param {number} [options.size=64] The maximum number of tiles to store.\n */\nvar tileCache = function (options) {\n  if (!(this instanceof tileCache)) {\n    return new tileCache(options);\n  }\n  options = options || {};\n  this._size = options.size || 64;\n\n  /**\n   * Get/set the maximum cache size.\n   * @property {number} size The maximum cache size.\n   * @name geo.tileCache#size\n   */\n  Object.defineProperty(this, 'size', {\n    get: function () { return this._size; },\n    set: function (n) {\n      while (this._atime.length > n) {\n        this.remove(this._atime[this._atime.length - 1]);\n      }\n      this._size = n;\n    }\n  });\n\n  /**\n   * Get the current cache size.  Read only.\n   * @property {number} length The current cache size.\n   * @name geo.tileCache#length\n   */\n  Object.defineProperty(this, 'length', {\n    get: function () { return this._atime.length; }\n  });\n\n  /**\n   * Get the position of the tile in the access queue.\n   *\n   * @param {string} hash The tile's hash value.\n   * @returns {number} The position in the queue or -1.\n   */\n  this._access = function (hash) {\n    return this._atime.indexOf(hash);\n  };\n\n  /**\n   * Remove a tile from the cache.\n   *\n   * @param {string|geo.tile} tile The tile or its hash.\n   * @returns {booliean} `true` if a tile was removed.\n   */\n  this.remove = function (tile) {\n    var hash = typeof tile === 'string' ? tile : tile.toString();\n\n    // if the tile is not in the cache\n    if (!(hash in this._cache)) {\n      return false;\n    }\n\n    // Remove the tile from the access queue\n    this._atime.splice(this._access(hash), 1);\n\n    // Remove the tile from the cache\n    delete this._cache[hash];\n    return true;\n  };\n\n  /**\n   * Remove all tiles from the cache.\n   *\n   * @returns {this}\n   */\n  this.clear = function () {\n    this._cache = {};  // The hash -> tile mapping\n    this._atime = [];  // The access queue (the hashes are stored)\n    return this;\n  };\n\n  /**\n   * Get a tile from the cache if it exists, otherwise return `null`.  This\n   * method also moves the tile to the front of the access queue.\n   *\n   * @param {string|geo.tile} hash The tile or the tile hash value.\n   * @param {boolean} [noMove] If truthy, don't move the tile to the front of\n   *   the access queue.\n   * @returns {geo.tile|null}\n   */\n  this.get = function (hash, noMove) {\n    hash = typeof hash === 'string' ? hash : hash.toString();\n    if (!(hash in this._cache)) {\n      return null;\n    }\n\n    if (!noMove) {\n      this._atime.splice(this._access(hash), 1);\n      this._atime.unshift(hash);\n    }\n    return this._cache[hash];\n  };\n\n  /**\n   * Add a tile to the cache.\n   *\n   * @param {geo.tile} tile The tile to add.\n   * @param {function} removeFunc If specified and tiles must be purged from\n   *      the cache, call this function on each tile before purging.\n   * @param {boolean} noPurge if true, don't purge tiles.\n   */\n  this.add = function (tile, removeFunc, noPurge) {\n    // remove any existing tiles with the same hash\n    this.remove(tile);\n    var hash = tile.toString();\n\n    // add the tile\n    this._cache[hash] = tile;\n    this._atime.unshift(hash);\n\n    if (!noPurge) {\n      this.purge(removeFunc);\n    }\n  };\n\n  /**\n   * Purge tiles from the cache if it is full.\n   *\n   * @param {function} removeFunc If specified and tiles must be purged from\n   *      the cache, call this function on each tile before purging.\n   */\n  this.purge = function (removeFunc) {\n    var hash;\n    while (this._atime.length > this.size) {\n      hash = this._atime.pop();\n      var tile = this._cache[hash];\n      if (removeFunc) {\n        removeFunc(tile);\n      }\n      delete this._cache[hash];\n    }\n  };\n\n  this.clear();\n  return this;\n};\n\nmodule.exports = tileCache;\n\n\n\n// WEBPACK FOOTER //\n// ./tileCache.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Create a new instance of class pathFeature\n *\n * @class\n * @alias geo.pathFeature\n * @extends geo.feature\n * @returns {geo.pathFeature}\n */\nvar pathFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof pathFeature)) {\n    return new pathFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_position = arg.position === undefined ? [] : arg.position,\n      s_init = this._init;\n\n  /**\n   * Get/Set positions\n   *\n   * @returns {geo.pathFeature}\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_position;\n    }\n    // Copy incoming array of positions\n    m_position = val;\n    m_this.dataTime().modified();\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Initialize\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        'strokeWidth': function () { return 1; },\n        'strokeColor': function () { return { r: 1.0, g: 1.0, b: 1.0 }; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    m_this.style(defaultStyle);\n\n    if (m_position) {\n      m_this.dataTime().modified();\n    }\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(pathFeature, feature);\nmodule.exports = pathFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./pathFeature.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar feature = require('./feature');\nvar geo_event = require('./event');\nvar util = require('./util');\n\n/**\n * Pixelmap feature specification.\n *\n * @typedef {geo.feature.spec} geo.pixelmapFeature.spec\n * @property {string|function|HTMLImageElement} [url] URL of a pixel map or an\n *   HTML Image element.  The rgb data is interpretted as an index of the form\n *   0xbbggrr.  The alpha channel is ignored.\n * @property {geo.geoColor|function} [color] The color that should be used\n *   for each data element.  Data elements correspond to the indices in the\n *   pixel map. If an index is larger than the number of data elements, it will\n *   be transparent.  If there is more data than there are indices, it is\n *   ignored.\n * @property {geo.geoPosition|function} [position] Position of the image.\n *   Default is (data).  The position is an Object which specifies the corners\n *   of the quad: ll, lr, ur, ul.  At least two opposite corners must be\n *   specified.  The corners do not have to physically correspond to the order\n *   specified, but rather correspond to that part of the image map.  If a\n *   corner is unspecified, it will use the x coordinate from one adjacent\n *   corner, the y coordinate from the other adjacent corner, and the average z\n *   value of those two corners.  For instance, if ul is unspecified, it is\n *   {x: ll.x, y: ur.y}.  Note that each quad is rendered as a pair of\n *   triangles: (ll, lr, ul) and (ur, ul, lr).  Nothing special is done for\n *   quads that are not convex or quads that have substantially different\n *   transformations for those two triangles.\n */\n\n/**\n * Pixelmap feature information record.\n *\n * @typedef {object} geo.pixelmapFeature.info\n * @property {number} width The width of the source image.\n * @property {number} height The width of the source image.\n * @property {context} context The HTMLCanvasElement context used for handling\n *    the pixelmap.\n * @property {ImageData} imageData The context's image data.\n * @property {number[]} indices An array, one per pixel, of the index value in\n *    the image.  This decodes the pixel value to the corresponding integer.\n * @property number} area The number of pixels in the image.  This is\n *    `width * height`.\n * @property {object[]} mappedColors This has one entry for each distinct index\n *    value.  Each entry has `first` and `last` with the first and last pixel\n *    locations where that index occurs.  Note that last is the inclusive value\n *    of the location (so its maximum possible value is `size -1`).\n */\n\n/**\n * Create a new instance of class pixelmapFeature\n *\n * @class\n * @alias geo.pixelmapFeature\n * @param {geo.pixelmapFeature.spec} arg Options object.\n * @extends geo.feature\n * @returns {geo.pixelmapFeature}\n */\n\nvar pixelmapFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof pixelmapFeature)) {\n    return new pixelmapFeature(arg);\n  }\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_quadFeature,\n      m_srcImage,\n      m_info,\n      s_update = this._update,\n      s_init = this._init,\n      s_exit = this._exit;\n\n  /**\n   * Get/Set position accessor.\n   *\n   * @param {geo.geoPosition|function} [val] If not specified, return the\n   *    current position accessor.  If specified, use this for the position\n   *    accessor and return `this`.  See {@link geo.quadFeature.position} for\n   *    for details on this position.\n   * @returns {geo.geoPosition|function|this}\n   */\n  this.position = function (val) {\n    if (val === undefined) {\n      return m_this.style('position');\n    } else if (val !== m_this.style('position')) {\n      m_this.style('position', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/Set url accessor.\n   *\n   * @param {string|function} [val] If not specified, return the current url\n   *    accessor.  If specified, use this for the url accessor and return\n   *    `this`.\n   * @returns {string|function|this}\n   */\n  this.url = function (val) {\n    if (val === undefined) {\n      return m_this.style('url');\n    } else if (val !== m_this.style('url')) {\n      m_srcImage = m_info = undefined;\n      m_this.style('url', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get the maximum index value from the pixelmap.  This is a value present in\n   * the pixelmap.\n   *\n   * @returns {number} The maximum index value.\n   */\n  this.maxIndex = function () {\n    if (m_info) {\n      /* This isn't just m_info.mappedColors.length - 1, since there\n       * may be more data than actual indices. */\n      if (m_info.maxIndex === undefined) {\n        m_info.maxIndex = 0;\n        for (var idx in m_info.mappedColors) {\n          if (m_info.mappedColors.hasOwnProperty(idx)) {\n            m_info.maxIndex = Math.max(m_info.maxIndex, idx);\n          }\n        }\n      }\n      return m_info.maxIndex;\n    }\n  };\n\n  /**\n   * Get/Set color accessor.\n   *\n   * @param {geo.geoColor|function} [val] The new color map accessor or\n   *    `undefined` to get the current accessor.\n   * @returns {geo.geoColor|function|this}\n   */\n  this.color = function (val) {\n    if (val === undefined) {\n      return m_this.style('color');\n    } else if (val !== m_this.style('color')) {\n      m_this.style('color', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * If the specified coordinates are in the rendered quad, use the basis\n   * information from the quad to determine the pixelmap index value so that it\n   * can be included in the `found` results.\n   *\n   * @param {geo.geoPosition} geo Coordinate in interface gcs.\n   * @returns {geo.feature.searchResult} An object with a list of features and\n   *    feature indices that are located at the specified point.\n   */\n  this.pointSearch = function (geo) {\n    if (m_quadFeature && m_info) {\n      var result = m_quadFeature.pointSearch(geo);\n      if (result.index.length === 1 && result.extra && result.extra[result.index[0]].basis) {\n        var basis = result.extra[result.index[0]].basis, x, y, idx;\n        x = Math.floor(basis.x * m_info.width);\n        y = Math.floor(basis.y * m_info.height);\n        if (x >= 0 && x < m_info.width &&\n            y >= 0 && y < m_info.height) {\n          idx = m_info.indices[y * m_info.width + x];\n          result = {\n            index: [idx],\n            found: [m_this.data()[idx]]\n          };\n          return result;\n        }\n      }\n    }\n    return {index: [], found: []};\n  };\n\n  /**\n   * Build.  Fetches the image if necesary.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    /* Set the build time at the start of the call.  A build can result in\n     * drawing a quad, which can trigger a full layer update, which in turn\n     * checks if this feature is built.  Setting the build time avoids calling\n     * this a second time. */\n    m_this.buildTime().modified();\n    if (!m_srcImage) {\n      var src = this.style.get('url')();\n      if (util.isReadyImage(src)) {\n        /* we have an already loaded image, so we can just use it. */\n        m_srcImage = src;\n        this._computePixelmap();\n      } else if (src) {\n        var defer = $.Deferred(), prev_onload, prev_onerror;\n        if (src instanceof Image) {\n          /* we have an unloaded image.  Hook to the load and error callbacks\n           * so that when it is loaded we can use it. */\n          m_srcImage = src;\n          prev_onload = src.onload;\n          prev_onerror = src.onerror;\n        } else {\n          /* we were given a url, so construct a new image */\n          m_srcImage = new Image();\n          // Only set the crossOrigin parameter if this is going across origins.\n          if (src.indexOf(':') >= 0 &&\n              src.indexOf('/') === src.indexOf(':') + 1) {\n            m_srcImage.crossOrigin = this.style.get('crossDomain')() || 'anonymous';\n          }\n        }\n        m_srcImage.onload = function () {\n          if (prev_onload) {\n            prev_onload.apply(this, arguments);\n          }\n          /* Only use this image if our pixelmap hasn't changed since we\n           * attached our handler */\n          if (m_this.style.get('url')() === src) {\n            m_info = undefined;\n            m_this._computePixelmap();\n          }\n          defer.resolve();\n        };\n        m_srcImage.onerror = function () {\n          if (prev_onerror) {\n            prev_onerror.apply(this, arguments);\n          }\n          defer.reject();\n        };\n        defer.promise(this);\n        this.layer().addPromise(this);\n        if (!(src instanceof Image)) {\n          m_srcImage.src = src;\n        }\n      }\n    } else if (m_info) {\n      this._computePixelmap();\n    }\n    return m_this;\n  };\n\n  /**\n   * Compute information for this pixelmap image.  It is wasteful to call this\n   * if the pixelmap has already been prepared (it is invalidated by a change\n   * in the image).\n   *\n   * @returns {geo.pixelmapFeature.info}\n   */\n  this._preparePixelmap = function () {\n    var i, idx, pixelData;\n\n    if (!util.isReadyImage(m_srcImage)) {\n      return;\n    }\n    m_info = {\n      width: m_srcImage.naturalWidth,\n      height: m_srcImage.naturalHeight,\n      canvas: document.createElement('canvas')\n    };\n\n    m_info.canvas.width = m_info.width;\n    m_info.canvas.height = m_info.height;\n    m_info.context = m_info.canvas.getContext('2d');\n\n    m_info.context.drawImage(m_srcImage, 0, 0);\n    m_info.imageData = m_info.context.getImageData(\n      0, 0, m_info.canvas.width, m_info.canvas.height);\n    pixelData = m_info.imageData.data;\n    m_info.indices = new Array(pixelData.length / 4);\n    m_info.area = pixelData.length / 4;\n\n    m_info.mappedColors = {};\n    for (i = 0; i < pixelData.length; i += 4) {\n      idx = pixelData[i] + (pixelData[i + 1] << 8) + (pixelData[i + 2] << 16);\n      m_info.indices[i / 4] = idx;\n      if (!m_info.mappedColors[idx]) {\n        m_info.mappedColors[idx] = {first: i / 4};\n      }\n      m_info.mappedColors[idx].last = i / 4;\n    }\n    return m_info;\n  };\n\n  /**\n   * Given the loaded pixelmap image, create a canvas the size of the image.\n   * Compute a color for each distinct index and recolor the canvas based on\n   * thise colors, then draw the resultant image as a quad.\n   *\n   * @fires geo.event.pixelmap.prepared\n   */\n  this._computePixelmap = function () {\n    var data = m_this.data() || [],\n        colorFunc = m_this.style.get('color'),\n        i, idx, lastidx, color, pixelData, indices, mappedColors,\n        updateFirst, updateLast = -1, update, prepared;\n\n    if (!m_info) {\n      if (!m_this._preparePixelmap()) {\n        return;\n      }\n      prepared = true;\n    }\n    mappedColors = m_info.mappedColors;\n    updateFirst = m_info.area;\n    for (idx in mappedColors) {\n      if (mappedColors.hasOwnProperty(idx)) {\n        color = colorFunc(data[idx], +idx) || {};\n        color = [\n          (color.r || 0) * 255,\n          (color.g || 0) * 255,\n          (color.b || 0) * 255,\n          color.a === undefined ? 255 : (color.a * 255)\n        ];\n        mappedColors[idx].update = (\n          !mappedColors[idx].color ||\n          mappedColors[idx].color[0] !== color[0] ||\n          mappedColors[idx].color[1] !== color[1] ||\n          mappedColors[idx].color[2] !== color[2] ||\n          mappedColors[idx].color[3] !== color[3]);\n        if (mappedColors[idx].update) {\n          mappedColors[idx].color = color;\n          updateFirst = Math.min(mappedColors[idx].first, updateFirst);\n          updateLast = Math.max(mappedColors[idx].last, updateLast);\n        }\n      }\n    }\n    /* If nothing was updated, we are done */\n    if (updateFirst >= updateLast) {\n      return;\n    }\n    /* Update only the extent that has changed */\n    pixelData = m_info.imageData.data;\n    indices = m_info.indices;\n    for (i = updateFirst; i <= updateLast; i += 1) {\n      idx = indices[i];\n      if (idx !== lastidx) {\n        lastidx = idx;\n        color = mappedColors[idx].color;\n        update = mappedColors[idx].update;\n      }\n      if (update) {\n        pixelData[i * 4] = color[0];\n        pixelData[i * 4 + 1] = color[1];\n        pixelData[i * 4 + 2] = color[2];\n        pixelData[i * 4 + 3] = color[3];\n      }\n    }\n    /* Place the updated area into the canvas */\n    m_info.context.putImageData(\n      m_info.imageData, 0, 0, 0, Math.floor(updateFirst / m_info.width),\n      m_info.width, Math.ceil((updateLast + 1) / m_info.width));\n\n    /* If we haven't made a quad feature, make one now.  The quad feature needs\n     * to have the canvas capability. */\n    if (!m_quadFeature) {\n      m_quadFeature = m_this.layer().createFeature('quad', {\n        selectionAPI: false,\n        gcs: m_this.gcs(),\n        visible: m_this.visible(undefined, true)\n      });\n      m_this.dependentFeatures([m_quadFeature]);\n      m_quadFeature.style({\n        image: m_info.canvas,\n        position: m_this.style.get('position')})\n      .data([{}])\n      .draw();\n    }\n    /* If we prepared the pixelmap and rendered it, send a prepared event */\n    if (prepared) {\n      m_this.geoTrigger(geo_event.pixelmap.prepared, {\n        pixelmap: m_this\n      });\n    }\n  };\n\n  /**\n   * Update.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.buildTime().timestamp() <= m_this.dataTime().timestamp() ||\n        m_this.updateTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Destroy.  Deletes the associated quadFeature.\n   *\n   * @returns {this}\n   */\n  this._exit = function () {\n    if (m_quadFeature && m_this.layer()) {\n      m_this.layer().deleteFeature(m_quadFeature);\n      m_quadFeature = null;\n      m_this.dependentFeatures([]);\n    }\n    s_exit();\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.pixelmapFeature.spec} arg\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    arg = arg || {};\n    s_init.call(m_this, arg);\n\n    var style = $.extend(\n      {},\n      {\n        color: function (d, idx) {\n          return {\n            r: (idx & 0xFF) / 255,\n            g: ((idx >> 8) & 0xFF) / 255,\n            b: ((idx >> 16) & 0xFF) / 255,\n            a: 1\n          };\n        },\n        position: function (d) { return d; }\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n    if (arg.position !== undefined) {\n      style.position = arg.position;\n    }\n    if (arg.url !== undefined) {\n      style.url = arg.url;\n    }\n    if (arg.color !== undefined) {\n      style.color = arg.color;\n    }\n    m_this.style(style);\n    m_this.dataTime().modified();\n\n    return m_this;\n  };\n\n  return this;\n};\n\n/**\n * Create a pixelmapFeature from an object.\n *\n * @see {@link geo.feature.create}\n * @param {geo.layer} layer The layer to add the feature to\n * @param {geo.pixelmapFeature.spec} spec The object specification\n * @returns {geo.pixelmapFeature|null}\n */\npixelmapFeature.create = function (layer, spec) {\n  'use strict';\n\n  spec = spec || {};\n  spec.type = 'pixelmap';\n  return feature.create(layer, spec);\n};\n\npixelmapFeature.capabilities = {\n  /* core feature name -- support in any manner */\n  feature: 'pixelmap'\n};\n\ninherit(pixelmapFeature, feature);\nmodule.exports = pixelmapFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./pixelmapFeature.js","var inherit = require('./inherit');\nvar feature = require('./feature');\n\n/**\n * Create a new instance of class vectorFeature\n *\n * @class\n * @alias geo.vectorFeature\n * @extends geo.feature\n * @returns {geo.vectorFeature}\n */\nvar vectorFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof vectorFeature)) {\n    return new vectorFeature(arg);\n  }\n\n  var $ = require('jquery');\n\n  arg = arg || {};\n  feature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      s_style = this.style;\n\n  /**\n   * Get or set the accessor for the origin of the vector.  This is the point\n   * that the vector base resides at.  Defaults to (0, 0, 0).\n   * @param {geo.accessor|geo.geoPosition} [accessor] The origin accessor\n   */\n  this.origin = function (val) {\n    if (val === undefined) {\n      return s_style('origin');\n    } else {\n      s_style('origin', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Get or set the accessor for the displacement (coordinates) of the vector.\n   * @param {geo.accessor|geo.geoPosition} [accessor] The accessor\n   */\n  this.delta = function (val) {\n    if (val === undefined) {\n      return s_style('delta');\n    } else {\n      s_style('delta', val);\n      m_this.dataTime().modified();\n      m_this.modified();\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize\n   * @protected\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n\n    var defaultStyle = $.extend(\n      {},\n      {\n        strokeColor: 'black',\n        strokeWidth: 2.0,\n        strokeOpacity: 1.0,\n        originStyle: 'none',\n        endStyle: 'arrow',\n        origin: {x: 0, y: 0, z: 0},\n        delta: function (d) { return d; },\n        scale: null // size scaling factor (null -> renderer decides)\n      },\n      arg.style === undefined ? {} : arg.style\n    );\n\n    if (arg.origin !== undefined) {\n      defaultStyle.origin = arg.origin;\n    }\n\n    m_this.style(defaultStyle);\n    m_this.dataTime().modified();\n  };\n};\n\ninherit(vectorFeature, feature);\nmodule.exports = vectorFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./vectorFeature.js","var widget = require('./widget');\nvar inherit = require('../inherit');\nvar registerWidget = require('../registry').registerWidget;\n\n/**\n * Create a new instance of class domWidget.\n *\n * @class\n * @alias geo.gui.domWidget\n * @extends geo.gui.widget\n * @param {object} arg\n * @param {geo.widget} [parent] A parent widget for this widget.\n * @param {string} [el='div'] The type of DOM element to create.\n * @returns {geo.domWidget}\n */\nvar domWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof domWidget)) {\n    return new domWidget(arg);\n  }\n\n  widget.call(this, arg);\n\n  var m_this = this,\n      m_default_canvas = 'div';\n\n  /**\n   * Initializes DOM Widget.\n   * Sets the canvas for the widget, does parent/child relationship management,\n   * appends it to it's parent and handles any positioning logic.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    if (arg.hasOwnProperty('parent')) {\n      arg.parent.addChild(m_this);\n    }\n\n    m_this._createCanvas();\n    m_this._appendCanvasToParent();\n\n    m_this.canvas().addEventListener('mousedown', function (e) {\n      e.stopPropagation();\n    });\n\n    m_this.reposition();\n    return m_this;\n  };\n\n  /**\n   * Creates the widget canvas.  This is a DOM element (`arg.el` or a div).\n   */\n  this._createCanvas = function () {\n    m_this.canvas(document.createElement(arg.el || m_default_canvas));\n  };\n\n  return this;\n};\n\ninherit(domWidget, widget);\n\nregisterWidget('dom', 'dom', domWidget);\nmodule.exports = domWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/domWidget.js","require('babel-polyfill');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./polyfills.js\n// module id = 259\n// module chunks = 0 1","\"use strict\";\n\nrequire(\"core-js/shim\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nrequire(\"core-js/fn/regexp/escape\");\n\nif (global._babelPolyfill) {\n  throw new Error(\"only one instance of babel-polyfill is allowed\");\n}\nglobal._babelPolyfill = true;\n\nvar DEFINE_PROPERTY = \"defineProperty\";\nfunction define(O, key, value) {\n  O[key] || Object[DEFINE_PROPERTY](O, key, {\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\n\ndefine(String.prototype, \"padLeft\", \"\".padStart);\ndefine(String.prototype, \"padRight\", \"\".padEnd);\n\n\"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill\".split(\",\").forEach(function (key) {\n  [][key] && define(Array, key, Function.call.bind([][key]));\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/babel-polyfill/lib/index.js\n// module id = 260\n// module chunks = 0 1","require('./modules/es6.symbol');\nrequire('./modules/es6.object.create');\nrequire('./modules/es6.object.define-property');\nrequire('./modules/es6.object.define-properties');\nrequire('./modules/es6.object.get-own-property-descriptor');\nrequire('./modules/es6.object.get-prototype-of');\nrequire('./modules/es6.object.keys');\nrequire('./modules/es6.object.get-own-property-names');\nrequire('./modules/es6.object.freeze');\nrequire('./modules/es6.object.seal');\nrequire('./modules/es6.object.prevent-extensions');\nrequire('./modules/es6.object.is-frozen');\nrequire('./modules/es6.object.is-sealed');\nrequire('./modules/es6.object.is-extensible');\nrequire('./modules/es6.object.assign');\nrequire('./modules/es6.object.is');\nrequire('./modules/es6.object.set-prototype-of');\nrequire('./modules/es6.object.to-string');\nrequire('./modules/es6.function.bind');\nrequire('./modules/es6.function.name');\nrequire('./modules/es6.function.has-instance');\nrequire('./modules/es6.parse-int');\nrequire('./modules/es6.parse-float');\nrequire('./modules/es6.number.constructor');\nrequire('./modules/es6.number.to-fixed');\nrequire('./modules/es6.number.to-precision');\nrequire('./modules/es6.number.epsilon');\nrequire('./modules/es6.number.is-finite');\nrequire('./modules/es6.number.is-integer');\nrequire('./modules/es6.number.is-nan');\nrequire('./modules/es6.number.is-safe-integer');\nrequire('./modules/es6.number.max-safe-integer');\nrequire('./modules/es6.number.min-safe-integer');\nrequire('./modules/es6.number.parse-float');\nrequire('./modules/es6.number.parse-int');\nrequire('./modules/es6.math.acosh');\nrequire('./modules/es6.math.asinh');\nrequire('./modules/es6.math.atanh');\nrequire('./modules/es6.math.cbrt');\nrequire('./modules/es6.math.clz32');\nrequire('./modules/es6.math.cosh');\nrequire('./modules/es6.math.expm1');\nrequire('./modules/es6.math.fround');\nrequire('./modules/es6.math.hypot');\nrequire('./modules/es6.math.imul');\nrequire('./modules/es6.math.log10');\nrequire('./modules/es6.math.log1p');\nrequire('./modules/es6.math.log2');\nrequire('./modules/es6.math.sign');\nrequire('./modules/es6.math.sinh');\nrequire('./modules/es6.math.tanh');\nrequire('./modules/es6.math.trunc');\nrequire('./modules/es6.string.from-code-point');\nrequire('./modules/es6.string.raw');\nrequire('./modules/es6.string.trim');\nrequire('./modules/es6.string.iterator');\nrequire('./modules/es6.string.code-point-at');\nrequire('./modules/es6.string.ends-with');\nrequire('./modules/es6.string.includes');\nrequire('./modules/es6.string.repeat');\nrequire('./modules/es6.string.starts-with');\nrequire('./modules/es6.string.anchor');\nrequire('./modules/es6.string.big');\nrequire('./modules/es6.string.blink');\nrequire('./modules/es6.string.bold');\nrequire('./modules/es6.string.fixed');\nrequire('./modules/es6.string.fontcolor');\nrequire('./modules/es6.string.fontsize');\nrequire('./modules/es6.string.italics');\nrequire('./modules/es6.string.link');\nrequire('./modules/es6.string.small');\nrequire('./modules/es6.string.strike');\nrequire('./modules/es6.string.sub');\nrequire('./modules/es6.string.sup');\nrequire('./modules/es6.date.now');\nrequire('./modules/es6.date.to-json');\nrequire('./modules/es6.date.to-iso-string');\nrequire('./modules/es6.date.to-string');\nrequire('./modules/es6.date.to-primitive');\nrequire('./modules/es6.array.is-array');\nrequire('./modules/es6.array.from');\nrequire('./modules/es6.array.of');\nrequire('./modules/es6.array.join');\nrequire('./modules/es6.array.slice');\nrequire('./modules/es6.array.sort');\nrequire('./modules/es6.array.for-each');\nrequire('./modules/es6.array.map');\nrequire('./modules/es6.array.filter');\nrequire('./modules/es6.array.some');\nrequire('./modules/es6.array.every');\nrequire('./modules/es6.array.reduce');\nrequire('./modules/es6.array.reduce-right');\nrequire('./modules/es6.array.index-of');\nrequire('./modules/es6.array.last-index-of');\nrequire('./modules/es6.array.copy-within');\nrequire('./modules/es6.array.fill');\nrequire('./modules/es6.array.find');\nrequire('./modules/es6.array.find-index');\nrequire('./modules/es6.array.species');\nrequire('./modules/es6.array.iterator');\nrequire('./modules/es6.regexp.constructor');\nrequire('./modules/es6.regexp.to-string');\nrequire('./modules/es6.regexp.flags');\nrequire('./modules/es6.regexp.match');\nrequire('./modules/es6.regexp.replace');\nrequire('./modules/es6.regexp.search');\nrequire('./modules/es6.regexp.split');\nrequire('./modules/es6.promise');\nrequire('./modules/es6.map');\nrequire('./modules/es6.set');\nrequire('./modules/es6.weak-map');\nrequire('./modules/es6.weak-set');\nrequire('./modules/es6.typed.array-buffer');\nrequire('./modules/es6.typed.data-view');\nrequire('./modules/es6.typed.int8-array');\nrequire('./modules/es6.typed.uint8-array');\nrequire('./modules/es6.typed.uint8-clamped-array');\nrequire('./modules/es6.typed.int16-array');\nrequire('./modules/es6.typed.uint16-array');\nrequire('./modules/es6.typed.int32-array');\nrequire('./modules/es6.typed.uint32-array');\nrequire('./modules/es6.typed.float32-array');\nrequire('./modules/es6.typed.float64-array');\nrequire('./modules/es6.reflect.apply');\nrequire('./modules/es6.reflect.construct');\nrequire('./modules/es6.reflect.define-property');\nrequire('./modules/es6.reflect.delete-property');\nrequire('./modules/es6.reflect.enumerate');\nrequire('./modules/es6.reflect.get');\nrequire('./modules/es6.reflect.get-own-property-descriptor');\nrequire('./modules/es6.reflect.get-prototype-of');\nrequire('./modules/es6.reflect.has');\nrequire('./modules/es6.reflect.is-extensible');\nrequire('./modules/es6.reflect.own-keys');\nrequire('./modules/es6.reflect.prevent-extensions');\nrequire('./modules/es6.reflect.set');\nrequire('./modules/es6.reflect.set-prototype-of');\nrequire('./modules/es7.array.includes');\nrequire('./modules/es7.array.flat-map');\nrequire('./modules/es7.array.flatten');\nrequire('./modules/es7.string.at');\nrequire('./modules/es7.string.pad-start');\nrequire('./modules/es7.string.pad-end');\nrequire('./modules/es7.string.trim-left');\nrequire('./modules/es7.string.trim-right');\nrequire('./modules/es7.string.match-all');\nrequire('./modules/es7.symbol.async-iterator');\nrequire('./modules/es7.symbol.observable');\nrequire('./modules/es7.object.get-own-property-descriptors');\nrequire('./modules/es7.object.values');\nrequire('./modules/es7.object.entries');\nrequire('./modules/es7.object.define-getter');\nrequire('./modules/es7.object.define-setter');\nrequire('./modules/es7.object.lookup-getter');\nrequire('./modules/es7.object.lookup-setter');\nrequire('./modules/es7.map.to-json');\nrequire('./modules/es7.set.to-json');\nrequire('./modules/es7.map.of');\nrequire('./modules/es7.set.of');\nrequire('./modules/es7.weak-map.of');\nrequire('./modules/es7.weak-set.of');\nrequire('./modules/es7.map.from');\nrequire('./modules/es7.set.from');\nrequire('./modules/es7.weak-map.from');\nrequire('./modules/es7.weak-set.from');\nrequire('./modules/es7.global');\nrequire('./modules/es7.system.global');\nrequire('./modules/es7.error.is-error');\nrequire('./modules/es7.math.clamp');\nrequire('./modules/es7.math.deg-per-rad');\nrequire('./modules/es7.math.degrees');\nrequire('./modules/es7.math.fscale');\nrequire('./modules/es7.math.iaddh');\nrequire('./modules/es7.math.isubh');\nrequire('./modules/es7.math.imulh');\nrequire('./modules/es7.math.rad-per-deg');\nrequire('./modules/es7.math.radians');\nrequire('./modules/es7.math.scale');\nrequire('./modules/es7.math.umulh');\nrequire('./modules/es7.math.signbit');\nrequire('./modules/es7.promise.finally');\nrequire('./modules/es7.promise.try');\nrequire('./modules/es7.reflect.define-metadata');\nrequire('./modules/es7.reflect.delete-metadata');\nrequire('./modules/es7.reflect.get-metadata');\nrequire('./modules/es7.reflect.get-metadata-keys');\nrequire('./modules/es7.reflect.get-own-metadata');\nrequire('./modules/es7.reflect.get-own-metadata-keys');\nrequire('./modules/es7.reflect.has-metadata');\nrequire('./modules/es7.reflect.has-own-metadata');\nrequire('./modules/es7.reflect.metadata');\nrequire('./modules/es7.asap');\nrequire('./modules/es7.observable');\nrequire('./modules/web.timers');\nrequire('./modules/web.immediate');\nrequire('./modules/web.dom.iterable');\nmodule.exports = require('./modules/_core');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/shim.js\n// module id = 261\n// module chunks = 0 1","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.symbol.js\n// module id = 262\n// module chunks = 0 1","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_enum-keys.js\n// module id = 263\n// module chunks = 0 1","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.create.js\n// module id = 264\n// module chunks = 0 1","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.define-property.js\n// module id = 265\n// module chunks = 0 1","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.define-properties.js\n// module id = 266\n// module chunks = 0 1","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.get-own-property-descriptor.js\n// module id = 267\n// module chunks = 0 1","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.get-prototype-of.js\n// module id = 268\n// module chunks = 0 1","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.keys.js\n// module id = 269\n// module chunks = 0 1","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.get-own-property-names.js\n// module id = 270\n// module chunks = 0 1","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.freeze.js\n// module id = 271\n// module chunks = 0 1","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.seal.js\n// module id = 272\n// module chunks = 0 1","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function ($preventExtensions) {\n  return function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.prevent-extensions.js\n// module id = 273\n// module chunks = 0 1","// 19.1.2.12 Object.isFrozen(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isFrozen', function ($isFrozen) {\n  return function isFrozen(it) {\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.is-frozen.js\n// module id = 274\n// module chunks = 0 1","// 19.1.2.13 Object.isSealed(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isSealed', function ($isSealed) {\n  return function isSealed(it) {\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.is-sealed.js\n// module id = 275\n// module chunks = 0 1","// 19.1.2.11 Object.isExtensible(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isExtensible', function ($isExtensible) {\n  return function isExtensible(it) {\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.is-extensible.js\n// module id = 276\n// module chunks = 0 1","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.assign.js\n// module id = 277\n// module chunks = 0 1","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', { is: require('./_same-value') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.is.js\n// module id = 278\n// module chunks = 0 1","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_same-value.js\n// module id = 279\n// module chunks = 0 1","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.set-prototype-of.js\n// module id = 280\n// module chunks = 0 1","'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./_classof');\nvar test = {};\ntest[require('./_wks')('toStringTag')] = 'z';\nif (test + '' != '[object z]') {\n  require('./_redefine')(Object.prototype, 'toString', function toString() {\n    return '[object ' + classof(this) + ']';\n  }, true);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.object.to-string.js\n// module id = 281\n// module chunks = 0 1","// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\nvar $export = require('./_export');\n\n$export($export.P, 'Function', { bind: require('./_bind') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.function.bind.js\n// module id = 282\n// module chunks = 0 1","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.function.name.js\n// module id = 283\n// module chunks = 0 1","'use strict';\nvar isObject = require('./_is-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar HAS_INSTANCE = require('./_wks')('hasInstance');\nvar FunctionProto = Function.prototype;\n// 19.2.3.6 Function.prototype[@@hasInstance](V)\nif (!(HAS_INSTANCE in FunctionProto)) require('./_object-dp').f(FunctionProto, HAS_INSTANCE, { value: function (O) {\n  if (typeof this != 'function' || !isObject(O)) return false;\n  if (!isObject(this.prototype)) return O instanceof this;\n  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n  return false;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.function.has-instance.js\n// module id = 284\n// module chunks = 0 1","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.parse-int.js\n// module id = 285\n// module chunks = 0 1","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 18.2.4 parseFloat(string)\n$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.parse-float.js\n// module id = 286\n// module chunks = 0 1","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.constructor.js\n// module id = 287\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toInteger = require('./_to-integer');\nvar aNumberValue = require('./_a-number-value');\nvar repeat = require('./_string-repeat');\nvar $toFixed = 1.0.toFixed;\nvar floor = Math.floor;\nvar data = [0, 0, 0, 0, 0, 0];\nvar ERROR = 'Number.toFixed: incorrect invocation!';\nvar ZERO = '0';\n\nvar multiply = function (n, c) {\n  var i = -1;\n  var c2 = c;\n  while (++i < 6) {\n    c2 += n * data[i];\n    data[i] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\nvar divide = function (n) {\n  var i = 6;\n  var c = 0;\n  while (--i >= 0) {\n    c += data[i];\n    data[i] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\nvar numToString = function () {\n  var i = 6;\n  var s = '';\n  while (--i >= 0) {\n    if (s !== '' || i === 0 || data[i] !== 0) {\n      var t = String(data[i]);\n      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;\n    }\n  } return s;\n};\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\n$export($export.P + $export.F * (!!$toFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !require('./_fails')(function () {\n  // V8 ~ Android 4.3-\n  $toFixed.call({});\n})), 'Number', {\n  toFixed: function toFixed(fractionDigits) {\n    var x = aNumberValue(this, ERROR);\n    var f = toInteger(fractionDigits);\n    var s = '';\n    var m = ZERO;\n    var e, z, j, k;\n    if (f < 0 || f > 20) throw RangeError(ERROR);\n    // eslint-disable-next-line no-self-compare\n    if (x != x) return 'NaN';\n    if (x <= -1e21 || x >= 1e21) return String(x);\n    if (x < 0) {\n      s = '-';\n      x = -x;\n    }\n    if (x > 1e-21) {\n      e = log(x * pow(2, 69, 1)) - 69;\n      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = f;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        m = numToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        m = numToString() + repeat.call(ZERO, f);\n      }\n    }\n    if (f > 0) {\n      k = m.length;\n      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));\n    } else {\n      m = s + m;\n    } return m;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.to-fixed.js\n// module id = 288\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $fails = require('./_fails');\nvar aNumberValue = require('./_a-number-value');\nvar $toPrecision = 1.0.toPrecision;\n\n$export($export.P + $export.F * ($fails(function () {\n  // IE7-\n  return $toPrecision.call(1, undefined) !== '1';\n}) || !$fails(function () {\n  // V8 ~ Android 4.3-\n  $toPrecision.call({});\n})), 'Number', {\n  toPrecision: function toPrecision(precision) {\n    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');\n    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.to-precision.js\n// module id = 289\n// module chunks = 0 1","// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.epsilon.js\n// module id = 290\n// module chunks = 0 1","// 20.1.2.2 Number.isFinite(number)\nvar $export = require('./_export');\nvar _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it) {\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.is-finite.js\n// module id = 291\n// module chunks = 0 1","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.is-integer.js\n// module id = 292\n// module chunks = 0 1","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.is-nan.js\n// module id = 293\n// module chunks = 0 1","// 20.1.2.5 Number.isSafeInteger(number)\nvar $export = require('./_export');\nvar isInteger = require('./_is-integer');\nvar abs = Math.abs;\n\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number) {\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.is-safe-integer.js\n// module id = 294\n// module chunks = 0 1","// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.max-safe-integer.js\n// module id = 295\n// module chunks = 0 1","// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.min-safe-integer.js\n// module id = 296\n// module chunks = 0 1","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 20.1.2.12 Number.parseFloat(string)\n$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', { parseFloat: $parseFloat });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.parse-float.js\n// module id = 297\n// module chunks = 0 1","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 20.1.2.13 Number.parseInt(string, radix)\n$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', { parseInt: $parseInt });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.number.parse-int.js\n// module id = 298\n// module chunks = 0 1","// 20.2.2.3 Math.acosh(x)\nvar $export = require('./_export');\nvar log1p = require('./_math-log1p');\nvar sqrt = Math.sqrt;\nvar $acosh = Math.acosh;\n\n$export($export.S + $export.F * !($acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  && Math.floor($acosh(Number.MAX_VALUE)) == 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN\n  && $acosh(Infinity) == Infinity\n), 'Math', {\n  acosh: function acosh(x) {\n    return (x = +x) < 1 ? NaN : x > 94906265.62425156\n      ? Math.log(x) + Math.LN2\n      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.acosh.js\n// module id = 299\n// module chunks = 0 1","// 20.2.2.5 Math.asinh(x)\nvar $export = require('./_export');\nvar $asinh = Math.asinh;\n\nfunction asinh(x) {\n  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));\n}\n\n// Tor Browser bug: Math.asinh(0) -> -0\n$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', { asinh: asinh });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.asinh.js\n// module id = 300\n// module chunks = 0 1","// 20.2.2.7 Math.atanh(x)\nvar $export = require('./_export');\nvar $atanh = Math.atanh;\n\n// Tor Browser bug: Math.atanh(-0) -> 0\n$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {\n  atanh: function atanh(x) {\n    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.atanh.js\n// module id = 301\n// module chunks = 0 1","// 20.2.2.9 Math.cbrt(x)\nvar $export = require('./_export');\nvar sign = require('./_math-sign');\n\n$export($export.S, 'Math', {\n  cbrt: function cbrt(x) {\n    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.cbrt.js\n// module id = 302\n// module chunks = 0 1","// 20.2.2.11 Math.clz32(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  clz32: function clz32(x) {\n    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.clz32.js\n// module id = 303\n// module chunks = 0 1","// 20.2.2.12 Math.cosh(x)\nvar $export = require('./_export');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  cosh: function cosh(x) {\n    return (exp(x = +x) + exp(-x)) / 2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.cosh.js\n// module id = 304\n// module chunks = 0 1","// 20.2.2.14 Math.expm1(x)\nvar $export = require('./_export');\nvar $expm1 = require('./_math-expm1');\n\n$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', { expm1: $expm1 });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.expm1.js\n// module id = 305\n// module chunks = 0 1","// 20.2.2.16 Math.fround(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { fround: require('./_math-fround') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.fround.js\n// module id = 306\n// module chunks = 0 1","// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])\nvar $export = require('./_export');\nvar abs = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.hypot.js\n// module id = 307\n// module chunks = 0 1","// 20.2.2.18 Math.imul(x, y)\nvar $export = require('./_export');\nvar $imul = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * require('./_fails')(function () {\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y) {\n    var UINT16 = 0xffff;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.imul.js\n// module id = 308\n// module chunks = 0 1","// 20.2.2.21 Math.log10(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log10: function log10(x) {\n    return Math.log(x) * Math.LOG10E;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.log10.js\n// module id = 309\n// module chunks = 0 1","// 20.2.2.20 Math.log1p(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { log1p: require('./_math-log1p') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.log1p.js\n// module id = 310\n// module chunks = 0 1","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.log2.js\n// module id = 311\n// module chunks = 0 1","// 20.2.2.28 Math.sign(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { sign: require('./_math-sign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.sign.js\n// module id = 312\n// module chunks = 0 1","// 20.2.2.30 Math.sinh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n// V8 near Chromium 38 has a problem with very small numbers\n$export($export.S + $export.F * require('./_fails')(function () {\n  return !Math.sinh(-2e-17) != -2e-17;\n}), 'Math', {\n  sinh: function sinh(x) {\n    return Math.abs(x = +x) < 1\n      ? (expm1(x) - expm1(-x)) / 2\n      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.sinh.js\n// module id = 313\n// module chunks = 0 1","// 20.2.2.33 Math.tanh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  tanh: function tanh(x) {\n    var a = expm1(x = +x);\n    var b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.tanh.js\n// module id = 314\n// module chunks = 0 1","// 20.2.2.34 Math.trunc(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it) {\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.math.trunc.js\n// module id = 315\n// module chunks = 0 1","var $export = require('./_export');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar fromCharCode = String.fromCharCode;\nvar $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars\n    var res = [];\n    var aLen = arguments.length;\n    var i = 0;\n    var code;\n    while (aLen > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.from-code-point.js\n// module id = 316\n// module chunks = 0 1","var $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\n\n$export($export.S, 'String', {\n  // 21.1.2.4 String.raw(callSite, ...substitutions)\n  raw: function raw(callSite) {\n    var tpl = toIObject(callSite.raw);\n    var len = toLength(tpl.length);\n    var aLen = arguments.length;\n    var res = [];\n    var i = 0;\n    while (len > i) {\n      res.push(String(tpl[i++]));\n      if (i < aLen) res.push(String(arguments[i]));\n    } return res.join('');\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.raw.js\n// module id = 317\n// module chunks = 0 1","'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function ($trim) {\n  return function trim() {\n    return $trim(this, 3);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.trim.js\n// module id = 318\n// module chunks = 0 1","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.iterator.js\n// module id = 319\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $at = require('./_string-at')(false);\n$export($export.P, 'String', {\n  // 21.1.3.3 String.prototype.codePointAt(pos)\n  codePointAt: function codePointAt(pos) {\n    return $at(this, pos);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.code-point-at.js\n// module id = 320\n// module chunks = 0 1","// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar ENDS_WITH = 'endsWith';\nvar $endsWith = ''[ENDS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(ENDS_WITH), 'String', {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = context(this, searchString, ENDS_WITH);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : Math.min(toLength(endPosition), len);\n    var search = String(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.ends-with.js\n// module id = 321\n// module chunks = 0 1","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.includes.js\n// module id = 322\n// module chunks = 0 1","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.repeat.js\n// module id = 323\n// module chunks = 0 1","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.starts-with.js\n// module id = 324\n// module chunks = 0 1","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.anchor.js\n// module id = 325\n// module chunks = 0 1","'use strict';\n// B.2.3.3 String.prototype.big()\nrequire('./_string-html')('big', function (createHTML) {\n  return function big() {\n    return createHTML(this, 'big', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.big.js\n// module id = 326\n// module chunks = 0 1","'use strict';\n// B.2.3.4 String.prototype.blink()\nrequire('./_string-html')('blink', function (createHTML) {\n  return function blink() {\n    return createHTML(this, 'blink', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.blink.js\n// module id = 327\n// module chunks = 0 1","'use strict';\n// B.2.3.5 String.prototype.bold()\nrequire('./_string-html')('bold', function (createHTML) {\n  return function bold() {\n    return createHTML(this, 'b', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.bold.js\n// module id = 328\n// module chunks = 0 1","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.fixed.js\n// module id = 329\n// module chunks = 0 1","'use strict';\n// B.2.3.7 String.prototype.fontcolor(color)\nrequire('./_string-html')('fontcolor', function (createHTML) {\n  return function fontcolor(color) {\n    return createHTML(this, 'font', 'color', color);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.fontcolor.js\n// module id = 330\n// module chunks = 0 1","'use strict';\n// B.2.3.8 String.prototype.fontsize(size)\nrequire('./_string-html')('fontsize', function (createHTML) {\n  return function fontsize(size) {\n    return createHTML(this, 'font', 'size', size);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.fontsize.js\n// module id = 331\n// module chunks = 0 1","'use strict';\n// B.2.3.9 String.prototype.italics()\nrequire('./_string-html')('italics', function (createHTML) {\n  return function italics() {\n    return createHTML(this, 'i', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.italics.js\n// module id = 332\n// module chunks = 0 1","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.link.js\n// module id = 333\n// module chunks = 0 1","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.small.js\n// module id = 334\n// module chunks = 0 1","'use strict';\n// B.2.3.12 String.prototype.strike()\nrequire('./_string-html')('strike', function (createHTML) {\n  return function strike() {\n    return createHTML(this, 'strike', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.strike.js\n// module id = 335\n// module chunks = 0 1","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function (createHTML) {\n  return function sub() {\n    return createHTML(this, 'sub', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.sub.js\n// module id = 336\n// module chunks = 0 1","'use strict';\n// B.2.3.14 String.prototype.sup()\nrequire('./_string-html')('sup', function (createHTML) {\n  return function sup() {\n    return createHTML(this, 'sup', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.string.sup.js\n// module id = 337\n// module chunks = 0 1","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.date.now.js\n// module id = 338\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.date.to-json.js\n// module id = 339\n// module chunks = 0 1","// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = require('./_export');\nvar toISOString = require('./_date-to-iso-string');\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {\n  toISOString: toISOString\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.date.to-iso-string.js\n// module id = 340\n// module chunks = 0 1","'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar fails = require('./_fails');\nvar getTime = Date.prototype.getTime;\nvar $toISOString = Date.prototype.toISOString;\n\nvar lz = function (num) {\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\nmodule.exports = (fails(function () {\n  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  $toISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');\n  var d = this;\n  var y = d.getUTCFullYear();\n  var m = d.getUTCMilliseconds();\n  var s = y < 0 ? '-' : y > 9999 ? '+' : '';\n  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n} : $toISOString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_date-to-iso-string.js\n// module id = 341\n// module chunks = 0 1","var DateProto = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar $toString = DateProto[TO_STRING];\nvar getTime = DateProto.getTime;\nif (new Date(NaN) + '' != INVALID_DATE) {\n  require('./_redefine')(DateProto, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.date.to-string.js\n// module id = 342\n// module chunks = 0 1","var TO_PRIMITIVE = require('./_wks')('toPrimitive');\nvar proto = Date.prototype;\n\nif (!(TO_PRIMITIVE in proto)) require('./_hide')(proto, TO_PRIMITIVE, require('./_date-to-primitive'));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.date.to-primitive.js\n// module id = 343\n// module chunks = 0 1","'use strict';\nvar anObject = require('./_an-object');\nvar toPrimitive = require('./_to-primitive');\nvar NUMBER = 'number';\n\nmodule.exports = function (hint) {\n  if (hint !== 'string' && hint !== NUMBER && hint !== 'default') throw TypeError('Incorrect hint');\n  return toPrimitive(anObject(this), hint != NUMBER);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_date-to-primitive.js\n// module id = 344\n// module chunks = 0 1","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.is-array.js\n// module id = 345\n// module chunks = 0 1","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.from.js\n// module id = 346\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar createProperty = require('./_create-property');\n\n// WebKit Array.of isn't generic\n$export($export.S + $export.F * require('./_fails')(function () {\n  function F() { /* empty */ }\n  return !(Array.of.call(F) instanceof F);\n}), 'Array', {\n  // 22.1.2.3 Array.of( ...items)\n  of: function of(/* ...args */) {\n    var index = 0;\n    var aLen = arguments.length;\n    var result = new (typeof this == 'function' ? this : Array)(aLen);\n    while (aLen > index) createProperty(result, index, arguments[index++]);\n    result.length = aLen;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.of.js\n// module id = 347\n// module chunks = 0 1","'use strict';\n// 22.1.3.13 Array.prototype.join(separator)\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar arrayJoin = [].join;\n\n// fallback for not array-like strings\n$export($export.P + $export.F * (require('./_iobject') != Object || !require('./_strict-method')(arrayJoin)), 'Array', {\n  join: function join(separator) {\n    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.join.js\n// module id = 348\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar html = require('./_html');\nvar cof = require('./_cof');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nvar arraySlice = [].slice;\n\n// fallback for not array-like ES3 strings and DOM objects\n$export($export.P + $export.F * require('./_fails')(function () {\n  if (html) arraySlice.call(html);\n}), 'Array', {\n  slice: function slice(begin, end) {\n    var len = toLength(this.length);\n    var klass = cof(this);\n    end = end === undefined ? len : end;\n    if (klass == 'Array') return arraySlice.call(this, begin, end);\n    var start = toAbsoluteIndex(begin, len);\n    var upTo = toAbsoluteIndex(end, len);\n    var size = toLength(upTo - start);\n    var cloned = new Array(size);\n    var i = 0;\n    for (; i < size; i++) cloned[i] = klass == 'String'\n      ? this.charAt(start + i)\n      : this[start + i];\n    return cloned;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.slice.js\n// module id = 349\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.sort.js\n// module id = 350\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $forEach = require('./_array-methods')(0);\nvar STRICT = require('./_strict-method')([].forEach, true);\n\n$export($export.P + $export.F * !STRICT, 'Array', {\n  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\n  forEach: function forEach(callbackfn /* , thisArg */) {\n    return $forEach(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.for-each.js\n// module id = 351\n// module chunks = 0 1","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_array-species-constructor.js\n// module id = 352\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $map = require('./_array-methods')(1);\n\n$export($export.P + $export.F * !require('./_strict-method')([].map, true), 'Array', {\n  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.map.js\n// module id = 353\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $filter = require('./_array-methods')(2);\n\n$export($export.P + $export.F * !require('./_strict-method')([].filter, true), 'Array', {\n  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.filter.js\n// module id = 354\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $some = require('./_array-methods')(3);\n\n$export($export.P + $export.F * !require('./_strict-method')([].some, true), 'Array', {\n  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.some.js\n// module id = 355\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $every = require('./_array-methods')(4);\n\n$export($export.P + $export.F * !require('./_strict-method')([].every, true), 'Array', {\n  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.every.js\n// module id = 356\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $reduce = require('./_array-reduce');\n\n$export($export.P + $export.F * !require('./_strict-method')([].reduce, true), 'Array', {\n  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], false);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.reduce.js\n// module id = 357\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $reduce = require('./_array-reduce');\n\n$export($export.P + $export.F * !require('./_strict-method')([].reduceRight, true), 'Array', {\n  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], true);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.reduce-right.js\n// module id = 358\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $indexOf = require('./_array-includes')(false);\nvar $native = [].indexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? $native.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.index-of.js\n// module id = 359\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.last-index-of.js\n// module id = 360\n// module chunks = 0 1","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { copyWithin: require('./_array-copy-within') });\n\nrequire('./_add-to-unscopables')('copyWithin');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.copy-within.js\n// module id = 361\n// module chunks = 0 1","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.fill.js\n// module id = 362\n// module chunks = 0 1","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.find.js\n// module id = 363\n// module chunks = 0 1","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.find-index.js\n// module id = 364\n// module chunks = 0 1","require('./_set-species')('Array');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.array.species.js\n// module id = 365\n// module chunks = 0 1","var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.constructor.js\n// module id = 366\n// module chunks = 0 1","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.to-string.js\n// module id = 367\n// module chunks = 0 1","// @@match logic\nrequire('./_fix-re-wks')('match', 1, function (defined, MATCH, $match) {\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.match.js\n// module id = 368\n// module chunks = 0 1","// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function (defined, REPLACE, $replace) {\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue) {\n    'use strict';\n    var O = defined(this);\n    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.replace.js\n// module id = 369\n// module chunks = 0 1","// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search) {\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.search.js\n// module id = 370\n// module chunks = 0 1","// @@split logic\nrequire('./_fix-re-wks')('split', 2, function (defined, SPLIT, $split) {\n  'use strict';\n  var isRegExp = require('./_is-regexp');\n  var _split = $split;\n  var $push = [].push;\n  var $SPLIT = 'split';\n  var LENGTH = 'length';\n  var LAST_INDEX = 'lastIndex';\n  if (\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ) {\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function (separator, limit) {\n      var string = String(this);\n      if (separator === undefined && limit === 0) return [];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while (match = separatorCopy.exec(string)) {\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          // eslint-disable-next-line no-loop-func\n          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {\n            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;\n          });\n          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if (output[LENGTH] >= splitLimit) break;\n        }\n        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string[LENGTH]) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {\n    $split = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit) {\n    var O = defined(this);\n    var fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.regexp.split.js\n// module id = 371\n// module chunks = 0 1","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.promise.js\n// module id = 372\n// module chunks = 0 1","'use strict';\nvar weak = require('./_collection-weak');\nvar validate = require('./_validate-collection');\nvar WEAK_SET = 'WeakSet';\n\n// 23.4 WeakSet Objects\nrequire('./_collection')(WEAK_SET, function (get) {\n  return function WeakSet() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.4.3.1 WeakSet.prototype.add(value)\n  add: function add(value) {\n    return weak.def(validate(this, WEAK_SET), value, true);\n  }\n}, weak, false, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.weak-set.js\n// module id = 373\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar $typed = require('./_typed');\nvar buffer = require('./_typed-buffer');\nvar anObject = require('./_an-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nvar isObject = require('./_is-object');\nvar ArrayBuffer = require('./_global').ArrayBuffer;\nvar speciesConstructor = require('./_species-constructor');\nvar $ArrayBuffer = buffer.ArrayBuffer;\nvar $DataView = buffer.DataView;\nvar $isView = $typed.ABV && ArrayBuffer.isView;\nvar $slice = $ArrayBuffer.prototype.slice;\nvar VIEW = $typed.VIEW;\nvar ARRAY_BUFFER = 'ArrayBuffer';\n\n$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), { ArrayBuffer: $ArrayBuffer });\n\n$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {\n  // 24.1.3.1 ArrayBuffer.isView(arg)\n  isView: function isView(it) {\n    return $isView && $isView(it) || isObject(it) && VIEW in it;\n  }\n});\n\n$export($export.P + $export.U + $export.F * require('./_fails')(function () {\n  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;\n}), ARRAY_BUFFER, {\n  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)\n  slice: function slice(start, end) {\n    if ($slice !== undefined && end === undefined) return $slice.call(anObject(this), start); // FF fix\n    var len = anObject(this).byteLength;\n    var first = toAbsoluteIndex(start, len);\n    var fin = toAbsoluteIndex(end === undefined ? len : end, len);\n    var result = new (speciesConstructor(this, $ArrayBuffer))(toLength(fin - first));\n    var viewS = new $DataView(this);\n    var viewT = new $DataView(result);\n    var index = 0;\n    while (first < fin) {\n      viewT.setUint8(index++, viewS.getUint8(first++));\n    } return result;\n  }\n});\n\nrequire('./_set-species')(ARRAY_BUFFER);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.array-buffer.js\n// module id = 374\n// module chunks = 0 1","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.data-view.js\n// module id = 375\n// module chunks = 0 1","require('./_typed-array')('Int8', 1, function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.int8-array.js\n// module id = 376\n// module chunks = 0 1","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.uint8-array.js\n// module id = 377\n// module chunks = 0 1","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8ClampedArray(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.uint8-clamped-array.js\n// module id = 378\n// module chunks = 0 1","require('./_typed-array')('Int16', 2, function (init) {\n  return function Int16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.int16-array.js\n// module id = 379\n// module chunks = 0 1","require('./_typed-array')('Uint16', 2, function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.uint16-array.js\n// module id = 380\n// module chunks = 0 1","require('./_typed-array')('Int32', 4, function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.int32-array.js\n// module id = 381\n// module chunks = 0 1","require('./_typed-array')('Uint32', 4, function (init) {\n  return function Uint32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.uint32-array.js\n// module id = 382\n// module chunks = 0 1","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.float32-array.js\n// module id = 383\n// module chunks = 0 1","require('./_typed-array')('Float64', 8, function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.typed.float64-array.js\n// module id = 384\n// module chunks = 0 1","// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar rApply = (require('./_global').Reflect || {}).apply;\nvar fApply = Function.apply;\n// MS Edge argumentsList argument is optional\n$export($export.S + $export.F * !require('./_fails')(function () {\n  rApply(function () { /* empty */ });\n}), 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList) {\n    var T = aFunction(target);\n    var L = anObject(argumentsList);\n    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.apply.js\n// module id = 385\n// module chunks = 0 1","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.construct.js\n// module id = 386\n// module chunks = 0 1","// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)\nvar dP = require('./_object-dp');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar toPrimitive = require('./_to-primitive');\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\n$export($export.S + $export.F * require('./_fails')(function () {\n  // eslint-disable-next-line no-undef\n  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });\n}), 'Reflect', {\n  defineProperty: function defineProperty(target, propertyKey, attributes) {\n    anObject(target);\n    propertyKey = toPrimitive(propertyKey, true);\n    anObject(attributes);\n    try {\n      dP.f(target, propertyKey, attributes);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.define-property.js\n// module id = 387\n// module chunks = 0 1","// 26.1.4 Reflect.deleteProperty(target, propertyKey)\nvar $export = require('./_export');\nvar gOPD = require('./_object-gopd').f;\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  deleteProperty: function deleteProperty(target, propertyKey) {\n    var desc = gOPD(anObject(target), propertyKey);\n    return desc && !desc.configurable ? false : delete target[propertyKey];\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.delete-property.js\n// module id = 388\n// module chunks = 0 1","'use strict';\n// 26.1.5 Reflect.enumerate(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar Enumerate = function (iterated) {\n  this._t = anObject(iterated); // target\n  this._i = 0;                  // next index\n  var keys = this._k = [];      // keys\n  var key;\n  for (key in iterated) keys.push(key);\n};\nrequire('./_iter-create')(Enumerate, 'Object', function () {\n  var that = this;\n  var keys = that._k;\n  var key;\n  do {\n    if (that._i >= keys.length) return { value: undefined, done: true };\n  } while (!((key = keys[that._i++]) in that._t));\n  return { value: key, done: false };\n});\n\n$export($export.S, 'Reflect', {\n  enumerate: function enumerate(target) {\n    return new Enumerate(target);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.enumerate.js\n// module id = 389\n// module chunks = 0 1","// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\n\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var desc, proto;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', { get: get });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.get.js\n// module id = 390\n// module chunks = 0 1","// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)\nvar gOPD = require('./_object-gopd');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {\n    return gOPD.f(anObject(target), propertyKey);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js\n// module id = 391\n// module chunks = 0 1","// 26.1.8 Reflect.getPrototypeOf(target)\nvar $export = require('./_export');\nvar getProto = require('./_object-gpo');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getPrototypeOf: function getPrototypeOf(target) {\n    return getProto(anObject(target));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.get-prototype-of.js\n// module id = 392\n// module chunks = 0 1","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.has.js\n// module id = 393\n// module chunks = 0 1","// 26.1.10 Reflect.isExtensible(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $isExtensible = Object.isExtensible;\n\n$export($export.S, 'Reflect', {\n  isExtensible: function isExtensible(target) {\n    anObject(target);\n    return $isExtensible ? $isExtensible(target) : true;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.is-extensible.js\n// module id = 394\n// module chunks = 0 1","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', { ownKeys: require('./_own-keys') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.own-keys.js\n// module id = 395\n// module chunks = 0 1","// 26.1.12 Reflect.preventExtensions(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $preventExtensions = Object.preventExtensions;\n\n$export($export.S, 'Reflect', {\n  preventExtensions: function preventExtensions(target) {\n    anObject(target);\n    try {\n      if ($preventExtensions) $preventExtensions(target);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.prevent-extensions.js\n// module id = 396\n// module chunks = 0 1","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar createDesc = require('./_property-desc');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\n\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDesc = gOPD.f(anObject(target), propertyKey);\n  var existingDescriptor, proto;\n  if (!ownDesc) {\n    if (isObject(proto = getPrototypeOf(target))) {\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if (has(ownDesc, 'value')) {\n    if (ownDesc.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = gOPD.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      dP.f(receiver, propertyKey, existingDescriptor);\n    } else dP.f(receiver, propertyKey, createDesc(0, V));\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', { set: set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.set.js\n// module id = 397\n// module chunks = 0 1","// 26.1.14 Reflect.setPrototypeOf(target, proto)\nvar $export = require('./_export');\nvar setProto = require('./_set-proto');\n\nif (setProto) $export($export.S, 'Reflect', {\n  setPrototypeOf: function setPrototypeOf(target, proto) {\n    setProto.check(target, proto);\n    try {\n      setProto.set(target, proto);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es6.reflect.set-prototype-of.js\n// module id = 398\n// module chunks = 0 1","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.array.includes.js\n// module id = 399\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar aFunction = require('./_a-function');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen, A;\n    aFunction(callbackfn);\n    sourceLen = toLength(O.length);\n    A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.array.flat-map.js\n// module id = 400\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar toInteger = require('./_to-integer');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatten: function flatten(/* depthArg = 1 */) {\n    var depthArg = arguments[0];\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatten');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.array.flatten.js\n// module id = 401\n// module chunks = 0 1","'use strict';\n// https://github.com/mathiasbynens/String.prototype.at\nvar $export = require('./_export');\nvar $at = require('./_string-at')(true);\n\n$export($export.P, 'String', {\n  at: function at(pos) {\n    return $at(this, pos);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.at.js\n// module id = 402\n// module chunks = 0 1","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\n$export($export.P + $export.F * /Version\\/10\\.\\d+(\\.\\d+)? Safari\\//.test(userAgent), 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.pad-start.js\n// module id = 403\n// module chunks = 0 1","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\n$export($export.P + $export.F * /Version\\/10\\.\\d+(\\.\\d+)? Safari\\//.test(userAgent), 'String', {\n  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.pad-end.js\n// module id = 404\n// module chunks = 0 1","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimLeft', function ($trim) {\n  return function trimLeft() {\n    return $trim(this, 1);\n  };\n}, 'trimStart');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.trim-left.js\n// module id = 405\n// module chunks = 0 1","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimRight', function ($trim) {\n  return function trimRight() {\n    return $trim(this, 2);\n  };\n}, 'trimEnd');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.trim-right.js\n// module id = 406\n// module chunks = 0 1","'use strict';\n// https://tc39.github.io/String.prototype.matchAll/\nvar $export = require('./_export');\nvar defined = require('./_defined');\nvar toLength = require('./_to-length');\nvar isRegExp = require('./_is-regexp');\nvar getFlags = require('./_flags');\nvar RegExpProto = RegExp.prototype;\n\nvar $RegExpStringIterator = function (regexp, string) {\n  this._r = regexp;\n  this._s = string;\n};\n\nrequire('./_iter-create')($RegExpStringIterator, 'RegExp String', function next() {\n  var match = this._r.exec(this._s);\n  return { value: match, done: match === null };\n});\n\n$export($export.P, 'String', {\n  matchAll: function matchAll(regexp) {\n    defined(this);\n    if (!isRegExp(regexp)) throw TypeError(regexp + ' is not a regexp!');\n    var S = String(this);\n    var flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp);\n    var rx = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);\n    rx.lastIndex = toLength(regexp.lastIndex);\n    return new $RegExpStringIterator(rx, S);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.string.match-all.js\n// module id = 407\n// module chunks = 0 1","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.symbol.async-iterator.js\n// module id = 408\n// module chunks = 0 1","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.symbol.observable.js\n// module id = 409\n// module chunks = 0 1","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.get-own-property-descriptors.js\n// module id = 410\n// module chunks = 0 1","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.values.js\n// module id = 411\n// module chunks = 0 1","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.entries.js\n// module id = 412\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter) {\n    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.define-getter.js\n// module id = 413\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter) {\n    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.define-setter.js\n// module id = 414\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.get;\n    } while (O = getPrototypeOf(O));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.lookup-getter.js\n// module id = 415\n// module chunks = 0 1","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.set;\n    } while (O = getPrototypeOf(O));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.object.lookup-setter.js\n// module id = 416\n// module chunks = 0 1","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.map.to-json.js\n// module id = 417\n// module chunks = 0 1","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.set.to-json.js\n// module id = 418\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.map.of.js\n// module id = 419\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.set.of.js\n// module id = 420\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of\nrequire('./_set-collection-of')('WeakMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.weak-map.of.js\n// module id = 421\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of\nrequire('./_set-collection-of')('WeakSet');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.weak-set.of.js\n// module id = 422\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.map.from.js\n// module id = 423\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.set.from.js\n// module id = 424\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from\nrequire('./_set-collection-from')('WeakMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.weak-map.from.js\n// module id = 425\n// module chunks = 0 1","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from\nrequire('./_set-collection-from')('WeakSet');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.weak-set.from.js\n// module id = 426\n// module chunks = 0 1","// https://github.com/tc39/proposal-global\nvar $export = require('./_export');\n\n$export($export.G, { global: require('./_global') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.global.js\n// module id = 427\n// module chunks = 0 1","// https://github.com/tc39/proposal-global\nvar $export = require('./_export');\n\n$export($export.S, 'System', { global: require('./_global') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.system.global.js\n// module id = 428\n// module chunks = 0 1","// https://github.com/ljharb/proposal-is-error\nvar $export = require('./_export');\nvar cof = require('./_cof');\n\n$export($export.S, 'Error', {\n  isError: function isError(it) {\n    return cof(it) === 'Error';\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.error.is-error.js\n// module id = 429\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  clamp: function clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.clamp.js\n// module id = 430\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { DEG_PER_RAD: Math.PI / 180 });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.deg-per-rad.js\n// module id = 431\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar RAD_PER_DEG = 180 / Math.PI;\n\n$export($export.S, 'Math', {\n  degrees: function degrees(radians) {\n    return radians * RAD_PER_DEG;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.degrees.js\n// module id = 432\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar scale = require('./_math-scale');\nvar fround = require('./_math-fround');\n\n$export($export.S, 'Math', {\n  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {\n    return fround(scale(x, inLow, inHigh, outLow, outHigh));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.fscale.js\n// module id = 433\n// module chunks = 0 1","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  iaddh: function iaddh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.iaddh.js\n// module id = 434\n// module chunks = 0 1","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  isubh: function isubh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.isubh.js\n// module id = 435\n// module chunks = 0 1","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  imulh: function imulh(u, v) {\n    var UINT16 = 0xffff;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >> 16;\n    var v1 = $v >> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.imulh.js\n// module id = 436\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { RAD_PER_DEG: 180 / Math.PI });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.rad-per-deg.js\n// module id = 437\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar DEG_PER_RAD = Math.PI / 180;\n\n$export($export.S, 'Math', {\n  radians: function radians(degrees) {\n    return degrees * DEG_PER_RAD;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.radians.js\n// module id = 438\n// module chunks = 0 1","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { scale: require('./_math-scale') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.scale.js\n// module id = 439\n// module chunks = 0 1","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  umulh: function umulh(u, v) {\n    var UINT16 = 0xffff;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >>> 16;\n    var v1 = $v >>> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.umulh.js\n// module id = 440\n// module chunks = 0 1","// http://jfbastien.github.io/papers/Math.signbit.html\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { signbit: function signbit(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) != x ? x : x == 0 ? 1 / x == Infinity : x > 0;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.math.signbit.js\n// module id = 441\n// module chunks = 0 1","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.promise.finally.js\n// module id = 442\n// module chunks = 0 1","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.promise.try.js\n// module id = 443\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {\n  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.define-metadata.js\n// module id = 444\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar getOrCreateMetadataMap = metadata.map;\nvar store = metadata.store;\n\nmetadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {\n  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);\n  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;\n  if (metadataMap.size) return true;\n  var targetMetadata = store.get(target);\n  targetMetadata['delete'](targetKey);\n  return !!targetMetadata.size || store['delete'](target);\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.delete-metadata.js\n// module id = 445\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nvar ordinaryGetMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\nmetadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.get-metadata.js\n// module id = 446\n// module chunks = 0 1","var Set = require('./es6.set');\nvar from = require('./_array-from-iterable');\nvar metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nvar ordinaryMetadataKeys = function (O, P) {\n  var oKeys = ordinaryOwnMetadataKeys(O, P);\n  var parent = getPrototypeOf(O);\n  if (parent === null) return oKeys;\n  var pKeys = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;\n};\n\nmetadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {\n  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.get-metadata-keys.js\n// module id = 447\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.get-own-metadata.js\n// module id = 448\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {\n  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js\n// module id = 449\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nvar ordinaryHasMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\nmetadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.has-metadata.js\n// module id = 450\n// module chunks = 0 1","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.has-own-metadata.js\n// module id = 451\n// module chunks = 0 1","var $metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar toMetaKey = $metadata.key;\nvar ordinaryDefineOwnMetadata = $metadata.set;\n\n$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {\n  return function decorator(target, targetKey) {\n    ordinaryDefineOwnMetadata(\n      metadataKey, metadataValue,\n      (targetKey !== undefined ? anObject : aFunction)(target),\n      toMetaKey(targetKey)\n    );\n  };\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.reflect.metadata.js\n// module id = 452\n// module chunks = 0 1","// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask\nvar $export = require('./_export');\nvar microtask = require('./_microtask')();\nvar process = require('./_global').process;\nvar isNode = require('./_cof')(process) == 'process';\n\n$export($export.G, {\n  asap: function asap(fn) {\n    var domain = isNode && process.domain;\n    microtask(domain ? domain.bind(fn) : fn);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.asap.js\n// module id = 453\n// module chunks = 0 1","'use strict';\n// https://github.com/zenparsing/es-observable\nvar $export = require('./_export');\nvar global = require('./_global');\nvar core = require('./_core');\nvar microtask = require('./_microtask')();\nvar OBSERVABLE = require('./_wks')('observable');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar anInstance = require('./_an-instance');\nvar redefineAll = require('./_redefine-all');\nvar hide = require('./_hide');\nvar forOf = require('./_for-of');\nvar RETURN = forOf.RETURN;\n\nvar getMethod = function (fn) {\n  return fn == null ? undefined : aFunction(fn);\n};\n\nvar cleanupSubscription = function (subscription) {\n  var cleanup = subscription._c;\n  if (cleanup) {\n    subscription._c = undefined;\n    cleanup();\n  }\n};\n\nvar subscriptionClosed = function (subscription) {\n  return subscription._o === undefined;\n};\n\nvar closeSubscription = function (subscription) {\n  if (!subscriptionClosed(subscription)) {\n    subscription._o = undefined;\n    cleanupSubscription(subscription);\n  }\n};\n\nvar Subscription = function (observer, subscriber) {\n  anObject(observer);\n  this._c = undefined;\n  this._o = observer;\n  observer = new SubscriptionObserver(this);\n  try {\n    var cleanup = subscriber(observer);\n    var subscription = cleanup;\n    if (cleanup != null) {\n      if (typeof cleanup.unsubscribe === 'function') cleanup = function () { subscription.unsubscribe(); };\n      else aFunction(cleanup);\n      this._c = cleanup;\n    }\n  } catch (e) {\n    observer.error(e);\n    return;\n  } if (subscriptionClosed(this)) cleanupSubscription(this);\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe() { closeSubscription(this); }\n});\n\nvar SubscriptionObserver = function (subscription) {\n  this._s = subscription;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value) {\n    var subscription = this._s;\n    if (!subscriptionClosed(subscription)) {\n      var observer = subscription._o;\n      try {\n        var m = getMethod(observer.next);\n        if (m) return m.call(observer, value);\n      } catch (e) {\n        try {\n          closeSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      }\n    }\n  },\n  error: function error(value) {\n    var subscription = this._s;\n    if (subscriptionClosed(subscription)) throw value;\n    var observer = subscription._o;\n    subscription._o = undefined;\n    try {\n      var m = getMethod(observer.error);\n      if (!m) throw value;\n      value = m.call(observer, value);\n    } catch (e) {\n      try {\n        cleanupSubscription(subscription);\n      } finally {\n        throw e;\n      }\n    } cleanupSubscription(subscription);\n    return value;\n  },\n  complete: function complete(value) {\n    var subscription = this._s;\n    if (!subscriptionClosed(subscription)) {\n      var observer = subscription._o;\n      subscription._o = undefined;\n      try {\n        var m = getMethod(observer.complete);\n        value = m ? m.call(observer, value) : undefined;\n      } catch (e) {\n        try {\n          cleanupSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      } cleanupSubscription(subscription);\n      return value;\n    }\n  }\n});\n\nvar $Observable = function Observable(subscriber) {\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\n};\n\nredefineAll($Observable.prototype, {\n  subscribe: function subscribe(observer) {\n    return new Subscription(observer, this._f);\n  },\n  forEach: function forEach(fn) {\n    var that = this;\n    return new (core.Promise || global.Promise)(function (resolve, reject) {\n      aFunction(fn);\n      var subscription = that.subscribe({\n        next: function (value) {\n          try {\n            return fn(value);\n          } catch (e) {\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x) {\n    var C = typeof this === 'function' ? this : $Observable;\n    var method = getMethod(anObject(x)[OBSERVABLE]);\n    if (method) {\n      var observable = anObject(method.call(x));\n      return observable.constructor === C ? observable : new C(function (observer) {\n        return observable.subscribe(observer);\n      });\n    }\n    return new C(function (observer) {\n      var done = false;\n      microtask(function () {\n        if (!done) {\n          try {\n            if (forOf(x, false, function (it) {\n              observer.next(it);\n              if (done) return RETURN;\n            }) === RETURN) return;\n          } catch (e) {\n            if (done) throw e;\n            observer.error(e);\n            return;\n          } observer.complete();\n        }\n      });\n      return function () { done = true; };\n    });\n  },\n  of: function of() {\n    for (var i = 0, l = arguments.length, items = new Array(l); i < l;) items[i] = arguments[i++];\n    return new (typeof this === 'function' ? this : $Observable)(function (observer) {\n      var done = false;\n      microtask(function () {\n        if (!done) {\n          for (var j = 0; j < items.length; ++j) {\n            observer.next(items[j]);\n            if (done) return;\n          } observer.complete();\n        }\n      });\n      return function () { done = true; };\n    });\n  }\n});\n\nhide($Observable.prototype, OBSERVABLE, function () { return this; });\n\n$export($export.G, { Observable: $Observable });\n\nrequire('./_set-species')('Observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/es7.observable.js\n// module id = 454\n// module chunks = 0 1","// ie9- setTimeout & setInterval additional parameters fix\nvar global = require('./_global');\nvar $export = require('./_export');\nvar userAgent = require('./_user-agent');\nvar slice = [].slice;\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar wrap = function (set) {\n  return function (fn, time /* , ...args */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? slice.call(arguments, 2) : false;\n    return set(boundArgs ? function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);\n    } : fn, time);\n  };\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout: wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/web.timers.js\n// module id = 455\n// module chunks = 0 1","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/web.immediate.js\n// module id = 456\n// module chunks = 0 1","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/web.dom.iterable.js\n// module id = 457\n// module chunks = 0 1","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js\n// module id = 458\n// module chunks = 0 1","require('../../modules/core.regexp.escape');\nmodule.exports = require('../../modules/_core').RegExp.escape;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/fn/regexp/escape.js\n// module id = 459\n// module chunks = 0 1","// https://github.com/benjamingr/RexExp.escape\nvar $export = require('./_export');\nvar $re = require('./_replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', { escape: function escape(it) { return $re(it); } });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/core.regexp.escape.js\n// module id = 460\n// module chunks = 0 1","module.exports = function (regExp, replace) {\n  var replacer = replace === Object(replace) ? function (part) {\n    return replace[part];\n  } : replace;\n  return function (it) {\n    return String(it).replace(regExp, replacer);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/core-js/modules/_replacer.js\n// module id = 461\n// module chunks = 0 1","// License headers that will be preserved in distributed bundles.\n/**\n * GeoJS\n * @copyright 2013-2018, Kitware, Inc.\n * @license Apache-2.0\n * @namespace geo\n */\n/*\n * Bundled with the following libraries:\n *\n * vgl\n * @copyright 2014-2016, Kitware, Inc.\n * @license Apache-2.0\n *\n * Proj4js\n * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf\n * @license MIT\n *\n * gl-matrix\n * @copyright 2015, Brandon Jones, Colin MacKenzie IV\n * @license MIT\n *\n * JQuery\n * @copyright jQuery Foundation and other contributors\n * @license MIT\n *\n * earcut\n * @copyright 2016, Mapbox\n * @license ISC\n *\n * kdbush\n * @copyright 2017, Vladimir Agafonkin\n * @license ISC\n */\n\nvar $ = require('jquery');\n\nrequire('./main.styl');\n\nmodule.exports = $.extend({\n  annotation: require('./annotation'),\n  annotationLayer: require('./annotationLayer'),\n  camera: require('./camera'),\n  choroplethFeature: require('./choroplethFeature'),\n  contourFeature: require('./contourFeature'),\n  domRenderer: require('./domRenderer'),\n  event: require('./event'),\n  feature: require('./feature'),\n  featureLayer: require('./featureLayer'),\n  fetchQueue: require('./fetchQueue'),\n  fileReader: require('./fileReader'),\n  geo_action: require('./action'),\n  graphFeature: require('./graphFeature'),\n  heatmapFeature: require('./heatmapFeature'),\n  imageTile: require('./imageTile'),\n  isolineFeature: require('./isolineFeature'),\n  geojsonReader: require('./geojsonReader'),\n  layer: require('./layer'),\n  lineFeature: require('./lineFeature'),\n  map: require('./map'),\n  mapInteractor: require('./mapInteractor'),\n  meshFeature: require('./meshFeature'),\n  object: require('./object'),\n  osmLayer: require('./osmLayer'),\n  pathFeature: require('./pathFeature'),\n  pointFeature: require('./pointFeature'),\n  polygonFeature: require('./polygonFeature'),\n  quadFeature: require('./quadFeature'),\n  pixelmapFeature: require('./pixelmapFeature'),\n  renderer: require('./renderer'),\n  sceneObject: require('./sceneObject'),\n  textFeature: require('./textFeature'),\n  tile: require('./tile'),\n  tileCache: require('./tileCache'),\n  tileLayer: require('./tileLayer'),\n  timestamp: require('./timestamp'),\n  transform: require('./transform'),\n  typedef: require('./typedef'),\n  vectorFeature: require('./vectorFeature'),\n  inherit: require('./inherit'),\n  version: require('./version'),\n  sha: require('./sha'),\n\n  util: require('./util'),\n  jQuery: $,\n  d3: require('./d3'),\n  gl: require('./gl'),\n  canvas: require('./canvas'),\n  gui: require('./ui')\n}, require('./registry'));\n\nif (window && !window.$) {\n  window.$ = $;\n}\nif (window && !window.jQuery) {\n  window.jQuery = $;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/stylus-loader/index.js!./main.styl\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!../node_modules/stylus-loader/index.js!./main.styl\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!../node_modules/stylus-loader/index.js!./main.styl\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.styl\n// module id = 463\n// module chunks = 0 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".geojs-map {\\n  position: relative;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n.geojs-map .geo-attribution {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n  padding-right: 5px;\\n  cursor: auto;\\n  font: 11px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif;\\n  z-index: 1001;\\n  background: rgba(255,255,255,0.7);\\n  clear: both;\\n  display: block;\\n  pointer-events: auto;\\n}\\n.geojs-map .geo-attribution .geo-attribution-layer {\\n  padding-left: 5px;\\n}\\n.geojs-map .canvas-canvas {\\n  display: block;\\n  -webkit-transform-origin: 0px 0px;\\n  -moz-transform-origin: 0px 0px;\\n  -o-transform-origin: 0px 0px;\\n  -ms-transform-origin: 0px 0px;\\n  transform-origin: 0px 0px;\\n}\\n.geojs-map .webgl-canvas {\\n  display: block;\\n}\\n.geojs-map .geojs-layer {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  pointer-events: none;\\n}\\n.geojs-map .geojs-layer.active > * {\\n  pointer-events: auto;\\n}\\n.geojs-map .geo-tile-layer {\\n  -webkit-transform-origin: 0px 0px;\\n  -moz-transform-origin: 0px 0px;\\n  -o-transform-origin: 0px 0px;\\n  -ms-transform-origin: 0px 0px;\\n  transform-origin: 0px 0px;\\n  line-height: 0;\\n  font-size: 0;\\n}\\n.geojs-map.annotation-input {\\n  cursor: crosshair;\\n}\\n.geojs-map.highlight-focus:after {\\n  content: \\\"\\\";\\n  display: block;\\n  position: absolute;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  box-sizing: border-box;\\n  left: 0px;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  border: 3px solid Highlight;\\n  opacity: 1;\\n  -ms-filter: none;\\n  filter: none;\\n  -webkit-transition: opacity 0s;\\n  -moz-transition: opacity 0s;\\n  -o-transition: opacity 0s;\\n  -ms-transition: opacity 0s;\\n  transition: opacity 0s;\\n  visibility: hidden;\\n}\\n.geojs-map.highlight-focus:focus:after {\\n  visibility: visible;\\n  -webkit-transition: opacity 2.5s ease-in;\\n  -moz-transition: opacity 2.5s ease-in;\\n  -o-transition: opacity 2.5s ease-in;\\n  -ms-transition: opacity 2.5s ease-in;\\n  transition: opacity 2.5s ease-in;\\n  opacity: 0;\\n  -ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";\\n  filter: alpha(opacity=0);\\n}\\n.geo-tile-container {\\n  position: absolute;\\n}\\n.geo-tile-container.crop {\\n  overflow: hidden;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!../node_modules/stylus-loader!./main.styl\n// module id = 464\n// module chunks = 0 1","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/style-loader/lib/urls.js\n// module id = 465\n// module chunks = 0 1","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords);\n    if (coords.length === 3) {\n      return [transformedArray.x, transformedArray.y, transformedArray.z];\n    }\n    else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  }\n  else {\n    out = transform(from, to, coords);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if (key === 'x' || key === 'y') {\n        return;\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  }\n  else {\n    obj = {\n      forward: function(coords) {\n        return transformer(fromProj, toProj, coords);\n      },\n      inverse: function(coords) {\n        return transformer(toProj, fromProj, coords);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/core.js\n// module id = 466\n// module chunks = 0 1","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\n var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/parseCode.js\n// module id = 467\n// module chunks = 0 1","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/global.js\n// module id = 468\n// module chunks = 0 1","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/constants/PrimeMeridian.js\n// module id = 469\n// module chunks = 0 1","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/constants/units.js\n// module id = 470\n// module chunks = 0 1","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/wkt-parser/parser.js\n// module id = 471\n// module chunks = 0 1","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/wkt-parser/process.js\n// module id = 472\n// module chunks = 0 1","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/extend.js\n// module id = 473\n// module chunks = 0 1","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections.js\n// module id = 474\n// module chunks = 0 1","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/deriveConstants.js\n// module id = 475\n// module chunks = 0 1","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/constants/Ellipsoid.js\n// module id = 476\n// module chunks = 0 1","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"606.0,23.0,413.0\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"653.0,-212.0,449.0\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/constants/Datum.js\n// module id = 477\n// module chunks = 0 1","import {PJD_3PARAM, PJD_7PARAM, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/datum.js\n// module id = 478\n// module chunks = 0 1","import {PJD_3PARAM, PJD_7PARAM, PJD_NODATUM} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n  // Do we need to go through geocentric coordinates?\n  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source.es, source.a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/datum_transform.js\n// module id = 479\n// module chunks = 0 1","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/datumUtils.js\n// module id = 480\n// module chunks = 0 1","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      t = 'x';\n    }\n    else if (i === 1) {\n      v = yin;\n      t = 'y';\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/adjust_axis.js\n// module id = 481\n// module chunks = 0 1","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/checkSanity.js\n// module id = 482\n// module chunks = 0 1","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/Point.js\n// module id = 483\n// module chunks = 0 1","export {version as default} from '../package.json';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/version.js\n// module id = 484\n// module chunks = 0 1","module.exports = {\"_args\":[[\"proj4@2.5.0\",\".\"]],\"_from\":\"proj4@2.5.0\",\"_id\":\"proj4@2.5.0\",\"_inBundle\":false,\"_integrity\":\"sha512-XZTRT7OPdLzgvtTqL8DG2cEj8lYdovztOwiwpwRSYayOty5Ipf3H68dh/fiL+HKDEyetmQSMhkkMGiJoyziz3w==\",\"_location\":\"/proj4\",\"_phantomChildren\":{},\"_requested\":{\"type\":\"version\",\"registry\":true,\"raw\":\"proj4@2.5.0\",\"name\":\"proj4\",\"escapedName\":\"proj4\",\"rawSpec\":\"2.5.0\",\"saveSpec\":null,\"fetchSpec\":\"2.5.0\"},\"_requiredBy\":[\"/\"],\"_resolved\":\"https://registry.npmjs.org/proj4/-/proj4-2.5.0.tgz\",\"_spec\":\"2.5.0\",\"_where\":\".\",\"author\":\"\",\"bugs\":{\"url\":\"https://github.com/proj4js/proj4js/issues\"},\"contributors\":[{\"name\":\"Mike Adair\",\"email\":\"madair@dmsolutions.ca\"},{\"name\":\"Richard Greenwood\",\"email\":\"rich@greenwoodmap.com\"},{\"name\":\"Calvin Metcalf\",\"email\":\"calvin.metcalf@gmail.com\"},{\"name\":\"Richard Marsden\",\"url\":\"http://www.winwaed.com\"},{\"name\":\"T. Mittan\"},{\"name\":\"D. Steinwand\"},{\"name\":\"S. Nelson\"}],\"dependencies\":{\"mgrs\":\"1.0.0\",\"wkt-parser\":\"^1.2.0\"},\"description\":\"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.\",\"devDependencies\":{\"chai\":\"~4.1.2\",\"curl-amd\":\"github:cujojs/curl\",\"grunt\":\"^1.0.1\",\"grunt-cli\":\"~1.2.0\",\"grunt-contrib-connect\":\"~1.0.2\",\"grunt-contrib-jshint\":\"~1.1.0\",\"grunt-contrib-uglify\":\"~3.1.0\",\"grunt-mocha-phantomjs\":\"~4.0.0\",\"grunt-rollup\":\"^6.0.0\",\"istanbul\":\"~0.4.5\",\"mocha\":\"~4.0.0\",\"rollup\":\"^0.50.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.0\",\"tin\":\"~0.5.0\"},\"directories\":{\"test\":\"test\",\"doc\":\"docs\"},\"homepage\":\"https://github.com/proj4js/proj4js#readme\",\"license\":\"MIT\",\"main\":\"dist/proj4-src.js\",\"module\":\"lib/index.js\",\"name\":\"proj4\",\"repository\":{\"type\":\"git\",\"url\":\"git://github.com/proj4js/proj4js.git\"},\"scripts\":{\"build\":\"grunt\",\"build:tmerc\":\"grunt build:tmerc\",\"test\":\"npm run build && istanbul test _mocha test/test.js\"},\"version\":\"2.5.0\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/package.json\n// module id = 485\n// module chunks = 0 1","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/projs.js\n// module id = 486\n// module chunks = 0 1","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/asinhy.js\n// module id = 487\n// module chunks = 0 1","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/log1py.js\n// module id = 488\n// module chunks = 0 1","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/gatg.js\n// module id = 489\n// module chunks = 0 1","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/clens.js\n// module id = 490\n// module chunks = 0 1","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/clens_cmplx.js\n// module id = 491\n// module chunks = 0 1","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/adjust_zone.js\n// module id = 492\n// module chunks = 0 1","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/srat.js\n// module id = 493\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/iqsfnz.js\n// module id = 494\n// module chunks = 0 1","var map = {\n\t\"./aea.js\": 207,\n\t\"./aeqd.js\": 218,\n\t\"./cass.js\": 205,\n\t\"./cea.js\": 209,\n\t\"./eqc.js\": 210,\n\t\"./eqdc.js\": 216,\n\t\"./equi.js\": 496,\n\t\"./etmerc.js\": 133,\n\t\"./gauss.js\": 199,\n\t\"./gnom.js\": 208,\n\t\"./gstmerc.js\": 497,\n\t\"./krovak.js\": 204,\n\t\"./laea.js\": 206,\n\t\"./lcc.js\": 203,\n\t\"./longlat.js\": 188,\n\t\"./merc.js\": 187,\n\t\"./mill.js\": 213,\n\t\"./moll.js\": 215,\n\t\"./nzmg.js\": 212,\n\t\"./omerc.js\": 202,\n\t\"./ortho.js\": 219,\n\t\"./poly.js\": 211,\n\t\"./qsc.js\": 220,\n\t\"./robin.js\": 221,\n\t\"./sinu.js\": 214,\n\t\"./somerc.js\": 201,\n\t\"./stere.js\": 200,\n\t\"./sterea.js\": 198,\n\t\"./tmerc.js\": 192,\n\t\"./utm.js\": 197,\n\t\"./vandg.js\": 217\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 495;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections .*\\.js$\n// module id = 495\n// module chunks = 0 1","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  ///this.t2;\n}\n\n/* Equirectangular forward equations--mapping lat,long to x,y\n  ---------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon * Math.cos(this.lat0);\n  var y = this.y0 + this.a * lat;\n\n  this.t1 = x;\n  this.t2 = Math.cos(this.lat0);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Equirectangular inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lat = p.y / this.a;\n\n  var lon = adjust_lon(this.long0 + p.x / (this.a * Math.cos(this.lat0)));\n  p.x = lon;\n  p.y = lat;\n}\n\nexport var names = [\"equi\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/equi.js\n// module id = 496\n// module chunks = 0 1","import latiso from '../common/latiso';\nimport sinh from '../common/sinh';\nimport cosh from '../common/cosh';\nimport invlatiso from '../common/invlatiso';\n\nexport function init() {\n\n  // array of:  a, b, lon0, lat0, k0, x0, y0\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n  this.lc = this.long0;\n  this.rs = Math.sqrt(1 + this.e * this.e * Math.pow(Math.cos(this.lat0), 4) / (1 - this.e * this.e));\n  var sinz = Math.sin(this.lat0);\n  var pc = Math.asin(sinz / this.rs);\n  var sinzpc = Math.sin(pc);\n  this.cp = latiso(0, pc, sinzpc) - this.rs * latiso(this.e, this.lat0, sinz);\n  this.n2 = this.k0 * this.a * Math.sqrt(1 - this.e * this.e) / (1 - this.e * this.e * sinz * sinz);\n  this.xs = this.x0;\n  this.ys = this.y0 - this.n2 * pc;\n\n  if (!this.title) {\n    this.title = \"Gauss Schreiber transverse mercator\";\n  }\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var L = this.rs * (lon - this.lc);\n  var Ls = this.cp + (this.rs * latiso(this.e, lat, Math.sin(lat)));\n  var lat1 = Math.asin(Math.sin(L) / cosh(Ls));\n  var Ls1 = latiso(0, lat1, Math.sin(lat1));\n  p.x = this.xs + (this.n2 * Ls1);\n  p.y = this.ys + (this.n2 * Math.atan(sinh(Ls) / Math.cos(L)));\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  var L = Math.atan(sinh((x - this.xs) / this.n2) / Math.cos((y - this.ys) / this.n2));\n  var lat1 = Math.asin(Math.sin((y - this.ys) / this.n2) / cosh((x - this.xs) / this.n2));\n  var LC = latiso(0, lat1, Math.sin(lat1));\n  p.x = this.lc + L / this.rs;\n  p.y = invlatiso(this.e, (LC - this.cp) / this.rs);\n  return p;\n}\n\nexport var names = [\"gstmerg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/projections/gstmerc.js\n// module id = 497\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  if (Math.abs(phi) > HALF_PI) {\n    return Number.NaN;\n  }\n  if (phi === HALF_PI) {\n    return Number.POSITIVE_INFINITY;\n  }\n  if (phi === -1 * HALF_PI) {\n    return Number.NEGATIVE_INFINITY;\n  }\n\n  var con = eccent * sinphi;\n  return Math.log(Math.tan((HALF_PI + phi) / 2)) + eccent * Math.log((1 - con) / (1 + con)) / 2;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/latiso.js\n// module id = 498\n// module chunks = 0 1","import fL from './fL';\n\nexport default function(eccent, ts) {\n  var phi = fL(1, ts);\n  var Iphi = 0;\n  var con = 0;\n  do {\n    Iphi = phi;\n    con = eccent * Math.sin(Iphi);\n    phi = fL(Math.exp(eccent * Math.log((1 + con) / (1 - con)) / 2), ts);\n  } while (Math.abs(phi - Iphi) > 1.0e-12);\n  return phi;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/invlatiso.js\n// module id = 499\n// module chunks = 0 1","import {HALF_PI} from '../constants/values';\n\nexport default function(x, L) {\n  return 2 * Math.atan(x * Math.exp(L)) - HALF_PI;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/proj4/lib/common/fL.js\n// module id = 500\n// module chunks = 0 1","/**\n * Based on the following jquery throttle / debounce plugin:\n *\n * jQuery throttle / debounce - v1.1 - 3/7/2010\n * http://benalman.com/projects/jquery-throttle-debounce-plugin/\n *\n * @copyright 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n *\n * The implementation included here is modified to support a callback\n * method that can accumulate values between actual invocations of\n * the throttled method.\n */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll. If you want to\n * rate-limit execution of a function to a single time see\n * {@link geo.util.debounce}.\n *\n * In this visualization, | is a throttled-function call and X is the actual\n * callback execution:\n *\n * ```\n * Throttled with `no_trailing` specified as false or unspecified:\n * ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\n * X    X    X    X    X    X        X    X    X    X    X    X\n *\n * Throttled with `no_trailing` specified as true:\n * ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\n * X    X    X    X    X             X    X    X    X    X\n * ```\n *\n * This is also used to handle debouncing a function.\n *\n * @alias geo.util.throttle\n * @param {number} delay A zero-or-greater delay in milliseconds. For event\n *    callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param {boolean} [no_trailing=false] If no_trailing is\n *    true, callback will only execute every `delay` milliseconds while the\n *    throttled-function is being called. If no_trailing is false or\n *    unspecified, callback will be executed one final time after the last\n *    throttled-function call. (After the throttled-function has not been\n *    called for `delay` milliseconds, the internal counter is reset)\n * @param {function} callback A function to be executed after `delay`\n *    milliseconds. The `this` context and all arguments are passed through,\n *    as-is, to `callback` when the throttled-function is executed.\n * @param {function} [accumulator] A function to be executed (synchronously)\n *    during **each** call to the wrapped function.  Typically, this\n *    this method is used to accumulate values that the callback uses\n *    when it finally executes.\n * @param {boolean} [debounce_mode] See the `at_begin` parameter of the\n *    {@link geo.util.debounce} function.\n * @returns {function} The throttled version of `callback`.\n *\n * @example\n * var throttled = geo.util.throttle( delay, [ no_trailing, ] callback );\n * $('selector').bind( 'someevent', throttled );\n * $('selector').unbind( 'someevent', throttled );\n */\nvar throttle = function (delay, no_trailing, callback, accumulator, debounce_mode) {\n  // After wrapper has stopped being called, this timeout ensures that\n  // `callback` is executed at the proper times in `throttle` and `end`\n  // debounce modes.\n  var timeout_id,\n\n      // Keep track of the last time `callback` was executed.\n      last_exec = 0;\n\n  // `no_trailing` defaults to falsy.\n  if (typeof no_trailing !== 'boolean') {\n    debounce_mode = accumulator;\n    accumulator = callback;\n    callback = no_trailing;\n    no_trailing = undefined;\n  }\n\n  // accumulator defaults to no-op\n  if (typeof accumulator !== 'function') {\n    debounce_mode = accumulator;\n    accumulator = function () {};\n  }\n\n  // The `wrapper` function encapsulates all of the throttling / debouncing\n  // functionality and when executed will limit the rate at which `callback`\n  // is executed.\n  function wrapper() {\n    var that = this,\n        elapsed = +new Date() - last_exec,\n        args = arguments;\n\n    // Execute `callback` and update the `last_exec` timestamp.\n    function exec() {\n      last_exec = +new Date();\n      callback.apply(that, args);\n    }\n\n    // If `debounce_mode` is true (at_begin) this is used to clear the flag\n    // to allow future `callback` executions.\n    function clear() {\n      timeout_id = undefined;\n    }\n\n    // always call the accumulator first\n    accumulator.apply(that, args);\n\n    if (debounce_mode && !timeout_id) {\n      // Since `wrapper` is being called for the first time and\n      // `debounce_mode` is true (at_begin), execute `callback`.\n      exec();\n    }\n\n    // Clear any existing timeout.\n    void (\n      timeout_id && clearTimeout(timeout_id)\n    );\n\n    if (debounce_mode === undefined && elapsed > delay) {\n      // In throttle mode, if `delay` time has been exceeded, execute\n      // `callback`.\n      exec();\n\n    } else if (no_trailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounce_mode` is true (at_begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounce_mode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeout_id = setTimeout(\n        debounce_mode ?\n          clear :\n          exec,\n        debounce_mode === undefined ?\n          delay - elapsed :\n          delay\n      );\n    }\n  }\n\n  // Return the wrapper function.\n  return wrapper;\n};\n\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end. If you want to\n * simply rate-limit execution of a function, see the <jQuery.throttle>\n * method.\n *\n * In this visualization, | is a debounced-function call and X is the actual\n * callback execution:\n *\n * ::\n *\n *   Debounced with `at_begin` specified as false or unspecified:\n *   ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\n *                            X                                 X\n *\n *   Debounced with `at_begin` specified as true:\n *   ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\n *   X                                 X\n *\n * The bulk of the work is handled by the {@link geo.util.throttle} function.\n *\n * @method geo.util.debounce\n * @param {number} delay A zero-or-greater delay in milliseconds. For event\n *    callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param {boolean} [at_begin=false] If at_begin is false or\n *    unspecified, callback will only be executed `delay` milliseconds after\n *    the last debounced-function call. If at_begin is true, callback will be\n *    executed only at the first debounced-function call. (After the\n *    throttled-function has not been called for `delay` milliseconds, the\n *    internal counter is reset)\n * @param {function} callback A function to be executed after delay milliseconds.\n *    The `this` context and all arguments are passed through, as-is, to\n *    `callback` when the debounced-function is executed.\n * @param {function} [accumulator] A function to be executed (synchronously)\n *    during **each** call to the wrapped function.  Typically, this\n *    this method is used to accumulate values that the callback uses\n *    when it finally executes.\n *\n * @returns {function} A new, debounced, function.\n *\n * @example\n * var debounced = geo.util.debounce( delay, [ at_begin, ] callback );\n * $('selector').bind( 'someevent', debounced );\n * $('selector').unbind( 'someevent', debounced );\n *\n */\nvar debounce = function (delay, at_begin, callback, accumulator) {\n  if (typeof at_begin !== 'boolean') {\n    accumulator = callback;\n    callback = at_begin;\n    at_begin = false;\n  }\n  accumulator = accumulator || function () {};\n  return throttle(delay, false, callback, accumulator, !!at_begin);\n};\n\nmodule.exports = {\n  throttle: throttle,\n  debounce: debounce\n};\n\n\n\n// WEBPACK FOOTER //\n// ./util/throttle.js","/* eslint-disable camelcase */\n/* eslint-disable underscore/prefer-constant */\n\nvar $ = require('jquery');\nvar vgl = require('vgl');\nvar vglRenderer = require('../gl/vglRenderer');\n\nvar _renderWindow, _supported;\n\nmodule.exports = {};\n\n/**\n * Replace vgl.renderer with a mocked version for testing in a non-webGL state.\n * Use restoreVGLRenderer to unmock.  Call vgl.mockCounts() to get the number\n * of times different webGL functions have been called.\n *\n * @param {boolean} [supported=true] If false, then the vgl renderer will\n *      indicate that this is an unsupported browser environment.\n * @alias geo.util.mockVGLRenderer\n */\nmodule.exports.mockVGLRenderer = function mockVGLRenderer(supported) {\n  'use strict';\n  var vgl = require('vgl');\n\n  if (supported === undefined) {\n    supported = true;\n  }\n\n  if (vgl._mocked) {\n    throw new Error('VGL renderer already mocked');\n  }\n\n  var mockCounts = {};\n  var count = function (name) {\n    mockCounts[name] = (mockCounts[name] || 0) + 1;\n  };\n  var noop = function (name) {\n    return function () {\n      count(name);\n    };\n  };\n  var _id = 0,\n      incID = function (name) {\n        return function () {\n          count(name);\n          _id += 1;\n          return _id;\n        };\n      };\n  /* The context largely does nothing. */\n  var default_context = {\n    activeTexture: noop('activeTexture'),\n    attachShader: noop('attachShader'),\n    bindAttribLocation: noop('bindAttribLocation'),\n    bindBuffer: noop('bindBuffer'),\n    bindFramebuffer: noop('bindFramebuffer'),\n    bindTexture: noop('bindTexture'),\n    blendFuncSeparate: noop('blendFuncSeparate'),\n    bufferData: noop('bufferData'),\n    bufferSubData: noop('bufferSubData'),\n    checkFramebufferStatus: function (key) {\n      count('checkFramebufferStatus');\n      if (key === vgl.GL.FRAMEBUFFER) {\n        return vgl.GL.FRAMEBUFFER_COMPLETE;\n      }\n    },\n    clear: noop('clear'),\n    clearColor: noop('clearColor'),\n    clearDepth: noop('clearDepth'),\n    compileShader: noop('compileShader'),\n    createBuffer: incID('createBuffer'),\n    createFramebuffer: noop('createFramebuffer'),\n    createProgram: incID('createProgram'),\n    createShader: incID('createShader'),\n    createTexture: incID('createTexture'),\n    deleteBuffer: noop('deleteBuffer'),\n    deleteProgram: noop('deleteProgram'),\n    deleteShader: noop('deleteShader'),\n    deleteTexture: noop('deleteTexture'),\n    depthFunc: noop('depthFunc'),\n    disable: noop('disable'),\n    disableVertexAttribArray: noop('disableVertexAttribArray'),\n    drawArrays: noop('drawArrays'),\n    enable: noop('enable'),\n    enableVertexAttribArray: noop('enableVertexAttribArray'),\n    finish: noop('finish'),\n    getExtension: incID('getExtension'),\n    getParameter: function (key) {\n      count('getParameter');\n      if (key === vgl.GL.DEPTH_BITS) {\n        return 16;\n      }\n    },\n    getProgramParameter: function (id, key) {\n      count('getProgramParameter');\n      if (key === vgl.GL.LINK_STATUS) {\n        return true;\n      }\n    },\n    getShaderInfoLog: function () {\n      count('getShaderInfoLog');\n      return 'log';\n    },\n    getShaderParameter: function (id, key) {\n      count('getShaderParameter');\n      if (key === vgl.GL.COMPILE_STATUS) {\n        return true;\n      }\n    },\n    getUniformLocation: incID('getUniformLocation'),\n    isEnabled: function (key) {\n      count('isEnabled');\n      if (key === vgl.GL.BLEND) {\n        return true;\n      }\n    },\n    linkProgram: noop('linkProgram'),\n    pixelStorei: noop('pixelStorei'),\n    shaderSource: noop('shaderSource'),\n    texImage2D: noop('texImage2D'),\n    texParameteri: noop('texParameteri'),\n    uniform1iv: noop('uniform1iv'),\n    uniform1fv: noop('uniform1fv'),\n    uniform2fv: noop('uniform2fv'),\n    uniform3fv: noop('uniform3fv'),\n    uniform4fv: noop('uniform4fv'),\n    uniformMatrix3fv: noop('uniformMatrix3fv'),\n    uniformMatrix4fv: noop('uniformMatrix4fv'),\n    useProgram: noop('useProgram'),\n    vertexAttribPointer: noop('vertexAttribPointer'),\n    vertexAttrib3fv: noop('vertexAttrib3fv'),\n    viewport: noop('viewport')\n  };\n\n  _renderWindow = vgl.renderWindow;\n  var mockedRenderWindow = function () {\n    /* Temporarily put back the original definition of renderWindow so that the\n     * class instance will be instantiated correctly. */\n    vgl.renderWindow = _renderWindow;\n    var m_this = new vgl.renderWindow(),\n        m_context;\n    vgl.renderWindow = mockedRenderWindow;\n\n    m_this._setup = function () {\n      var i, renderers = m_this.renderers(),\n          wsize = m_this.windowSize(),\n          wpos = m_this.windowPosition();\n\n      m_context = $.extend({}, default_context);\n\n      for (i = 0; i < renderers.length; i += 1) {\n        if ((renderers[i].width() > wsize[0]) ||\n            renderers[i].width() === 0 ||\n            (renderers[i].height() > wsize[1]) ||\n            renderers[i].height() === 0) {\n          renderers[i].resize(wpos[0], wpos[1], wsize[0], wsize[1]);\n        }\n      }\n      return true;\n    };\n    m_this.context = function () {\n      return m_context;\n    };\n    return m_this;\n  };\n  vgl.renderWindow = mockedRenderWindow;\n\n  _supported = vglRenderer.supported;\n  vglRenderer.supported = function () {\n    return !!supported;\n  };\n\n  vgl._mocked = true;\n  vgl.mockCounts = function () {\n    return mockCounts;\n  };\n};\n\n/**\n * Unmock the vgl renderer.\n * @alias geo.util.restoreVGLRenderer\n */\nmodule.exports.restoreVGLRenderer = function () {\n  if (vgl._mocked) {\n    vgl.renderWindow = _renderWindow;\n    vglRenderer.supported = _supported;\n    delete vgl._mocked;\n    delete vgl.mockCounts;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./util/mockVGL.js","/*** IMPORTS FROM imports-loader ***/\nvar mat4 = require(\"gl-mat4\");\nvar vec4 = require(\"gl-vec4\");\nvar vec3 = require(\"gl-vec3\");\nvar $ = require(\"jquery\");\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define('vgl', [], function () {\n      return (root['vgl'] = factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    root['vgl'] = factory();\n  }\n}(this, function () {\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/* exported vgl, inherit */\n//////////////////////////////////////////////////////////////////////////////\n\nif (typeof ogs === 'undefined') {\n  var ogs = {};\n}\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create namespace for the given name\n *\n * @param ns_string\n * @returns {*|{}}\n */\n//////////////////////////////////////////////////////////////////////////////\nogs.namespace = function (ns_string) {\n  'use strict';\n\n  var parts = ns_string.split('.'), parent = ogs, i;\n\n  // strip redundant leading global\n  if (parts[0] === 'ogs') {\n    parts = parts.slice(1);\n  }\n  for (i = 0; i < parts.length; i += 1) {\n    // create a property if it doesn't exist\n    if (typeof parent[parts[i]] === 'undefined') {\n      parent[parts[i]] = {};\n    }\n    parent = parent[parts[i]];\n  }\n  return parent;\n};\n\n/** vgl namespace */\nvar vgl = ogs.namespace('gl');\nwindow.vgl = vgl;\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Convenient function to define JS inheritance\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.inherit = function (C, P) {\n  'use strict';\n\n  var F = inherit.func();\n  F.prototype = P.prototype;\n  C.prototype = new F();\n  C.prototype.constructor = C;\n};\nvgl.inherit.func = function () {\n  'use strict';\n  return function () {};\n};\n\nwindow.inherit = vgl.inherit;\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Convenient function to get size of an object\n *\n * @param obj\n * @returns {number} *\n */\n//////////////////////////////////////////////////////////////////////////////\nObject.size = function (obj) {\n  'use strict';\n\n  var size = 0, key;\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      size += 1;\n    }\n  }\n  return size;\n};\n\n/* Polyfill for Math.log2 */\nif (!Math.log2) {\n  Math.log2 = function (val) {\n    return Math.log(val) / Math.log(2);\n  };\n}\n\nvgl.version = '0.3.10';\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Wrap GL enums. Currently to get values of the enums we need to create\n * or access the context.\n *\n * Using enums from here:\n * https://github.com/toji/dart-gl-enums/blob/master/lib/gl_enums.dart\n *\n * @class\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.GL = {\n  ACTIVE_ATTRIBUTES : 0x8B89,\n  ACTIVE_TEXTURE : 0x84E0,\n  ACTIVE_UNIFORMS : 0x8B86,\n  ALIASED_LINE_WIDTH_RANGE : 0x846E,\n  ALIASED_POINT_SIZE_RANGE : 0x846D,\n  ALPHA : 0x1906,\n  ALPHA_BITS : 0x0D55,\n  ALWAYS : 0x0207,\n  ARRAY_BUFFER : 0x8892,\n  ARRAY_BUFFER_BINDING : 0x8894,\n  ATTACHED_SHADERS : 0x8B85,\n  BACK : 0x0405,\n  BLEND : 0x0BE2,\n  BLEND_COLOR : 0x8005,\n  BLEND_DST_ALPHA : 0x80CA,\n  BLEND_DST_RGB : 0x80C8,\n  BLEND_EQUATION : 0x8009,\n  BLEND_EQUATION_ALPHA : 0x883D,\n  BLEND_EQUATION_RGB : 0x8009,\n  BLEND_SRC_ALPHA : 0x80CB,\n  BLEND_SRC_RGB : 0x80C9,\n  BLUE_BITS : 0x0D54,\n  BOOL : 0x8B56,\n  BOOL_VEC2 : 0x8B57,\n  BOOL_VEC3 : 0x8B58,\n  BOOL_VEC4 : 0x8B59,\n  BROWSER_DEFAULT_WEBGL : 0x9244,\n  BUFFER_SIZE : 0x8764,\n  BUFFER_USAGE : 0x8765,\n  BYTE : 0x1400,\n  CCW : 0x0901,\n  CLAMP_TO_EDGE : 0x812F,\n  COLOR_ATTACHMENT0 : 0x8CE0,\n  COLOR_BUFFER_BIT : 0x00004000,\n  COLOR_CLEAR_VALUE : 0x0C22,\n  COLOR_WRITEMASK : 0x0C23,\n  COMPILE_STATUS : 0x8B81,\n  COMPRESSED_TEXTURE_FORMATS : 0x86A3,\n  CONSTANT_ALPHA : 0x8003,\n  CONSTANT_COLOR : 0x8001,\n  CONTEXT_LOST_WEBGL : 0x9242,\n  CULL_FACE : 0x0B44,\n  CULL_FACE_MODE : 0x0B45,\n  CURRENT_PROGRAM : 0x8B8D,\n  CURRENT_VERTEX_ATTRIB : 0x8626,\n  CW : 0x0900,\n  DECR : 0x1E03,\n  DECR_WRAP : 0x8508,\n  DELETE_STATUS : 0x8B80,\n  DEPTH_ATTACHMENT : 0x8D00,\n  DEPTH_BITS : 0x0D56,\n  DEPTH_BUFFER_BIT : 0x00000100,\n  DEPTH_CLEAR_VALUE : 0x0B73,\n  DEPTH_COMPONENT : 0x1902,\n  DEPTH_COMPONENT16 : 0x81A5,\n  DEPTH_FUNC : 0x0B74,\n  DEPTH_RANGE : 0x0B70,\n  DEPTH_STENCIL : 0x84F9,\n  DEPTH_STENCIL_ATTACHMENT : 0x821A,\n  DEPTH_TEST : 0x0B71,\n  DEPTH_WRITEMASK : 0x0B72,\n  DITHER : 0x0BD0,\n  DONT_CARE : 0x1100,\n  DST_ALPHA : 0x0304,\n  DST_COLOR : 0x0306,\n  DYNAMIC_DRAW : 0x88E8,\n  ELEMENT_ARRAY_BUFFER : 0x8893,\n  ELEMENT_ARRAY_BUFFER_BINDING : 0x8895,\n  EQUAL : 0x0202,\n  FASTEST : 0x1101,\n  FLOAT : 0x1406,\n  FLOAT_MAT2 : 0x8B5A,\n  FLOAT_MAT3 : 0x8B5B,\n  FLOAT_MAT4 : 0x8B5C,\n  FLOAT_VEC2 : 0x8B50,\n  FLOAT_VEC3 : 0x8B51,\n  FLOAT_VEC4 : 0x8B52,\n  FRAGMENT_SHADER : 0x8B30,\n  FRAMEBUFFER : 0x8D40,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME : 0x8CD1,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE : 0x8CD0,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE : 0x8CD3,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL : 0x8CD2,\n  FRAMEBUFFER_BINDING : 0x8CA6,\n  FRAMEBUFFER_COMPLETE : 0x8CD5,\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT : 0x8CD6,\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS : 0x8CD9,\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT : 0x8CD7,\n  FRAMEBUFFER_UNSUPPORTED : 0x8CDD,\n  FRONT : 0x0404,\n  FRONT_AND_BACK : 0x0408,\n  FRONT_FACE : 0x0B46,\n  FUNC_ADD : 0x8006,\n  FUNC_REVERSE_SUBTRACT : 0x800B,\n  FUNC_SUBTRACT : 0x800A,\n  GENERATE_MIPMAP_HINT : 0x8192,\n  GEQUAL : 0x0206,\n  GREATER : 0x0204,\n  GREEN_BITS : 0x0D53,\n  HIGH_FLOAT : 0x8DF2,\n  HIGH_INT : 0x8DF5,\n  INCR : 0x1E02,\n  INCR_WRAP : 0x8507,\n  INT : 0x1404,\n  INT_VEC2 : 0x8B53,\n  INT_VEC3 : 0x8B54,\n  INT_VEC4 : 0x8B55,\n  INVALID_ENUM : 0x0500,\n  INVALID_FRAMEBUFFER_OPERATION : 0x0506,\n  INVALID_OPERATION : 0x0502,\n  INVALID_VALUE : 0x0501,\n  INVERT : 0x150A,\n  KEEP : 0x1E00,\n  LEQUAL : 0x0203,\n  LESS : 0x0201,\n  LINEAR : 0x2601,\n  LINEAR_MIPMAP_LINEAR : 0x2703,\n  LINEAR_MIPMAP_NEAREST : 0x2701,\n  LINES : 0x0001,\n  LINE_LOOP : 0x0002,\n  LINE_STRIP : 0x0003,\n  LINE_WIDTH : 0x0B21,\n  LINK_STATUS : 0x8B82,\n  LOW_FLOAT : 0x8DF0,\n  LOW_INT : 0x8DF3,\n  LUMINANCE : 0x1909,\n  LUMINANCE_ALPHA : 0x190A,\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS : 0x8B4D,\n  MAX_CUBE_MAP_TEXTURE_SIZE : 0x851C,\n  MAX_FRAGMENT_UNIFORM_VECTORS : 0x8DFD,\n  MAX_RENDERBUFFER_SIZE : 0x84E8,\n  MAX_TEXTURE_IMAGE_UNITS : 0x8872,\n  MAX_TEXTURE_SIZE : 0x0D33,\n  MAX_VARYING_VECTORS : 0x8DFC,\n  MAX_VERTEX_ATTRIBS : 0x8869,\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS : 0x8B4C,\n  MAX_VERTEX_UNIFORM_VECTORS : 0x8DFB,\n  MAX_VIEWPORT_DIMS : 0x0D3A,\n  MEDIUM_FLOAT : 0x8DF1,\n  MEDIUM_INT : 0x8DF4,\n  MIRRORED_REPEAT : 0x8370,\n  NEAREST : 0x2600,\n  NEAREST_MIPMAP_LINEAR : 0x2702,\n  NEAREST_MIPMAP_NEAREST : 0x2700,\n  NEVER : 0x0200,\n  NICEST : 0x1102,\n  NONE : 0,\n  NOTEQUAL : 0x0205,\n  NO_ERROR : 0,\n  ONE : 1,\n  ONE_MINUS_CONSTANT_ALPHA : 0x8004,\n  ONE_MINUS_CONSTANT_COLOR : 0x8002,\n  ONE_MINUS_DST_ALPHA : 0x0305,\n  ONE_MINUS_DST_COLOR : 0x0307,\n  ONE_MINUS_SRC_ALPHA : 0x0303,\n  ONE_MINUS_SRC_COLOR : 0x0301,\n  OUT_OF_MEMORY : 0x0505,\n  PACK_ALIGNMENT : 0x0D05,\n  POINTS : 0x0000,\n  POLYGON_OFFSET_FACTOR : 0x8038,\n  POLYGON_OFFSET_FILL : 0x8037,\n  POLYGON_OFFSET_UNITS : 0x2A00,\n  RED_BITS : 0x0D52,\n  RENDERBUFFER : 0x8D41,\n  RENDERBUFFER_ALPHA_SIZE : 0x8D53,\n  RENDERBUFFER_BINDING : 0x8CA7,\n  RENDERBUFFER_BLUE_SIZE : 0x8D52,\n  RENDERBUFFER_DEPTH_SIZE : 0x8D54,\n  RENDERBUFFER_GREEN_SIZE : 0x8D51,\n  RENDERBUFFER_HEIGHT : 0x8D43,\n  RENDERBUFFER_INTERNAL_FORMAT : 0x8D44,\n  RENDERBUFFER_RED_SIZE : 0x8D50,\n  RENDERBUFFER_STENCIL_SIZE : 0x8D55,\n  RENDERBUFFER_WIDTH : 0x8D42,\n  RENDERER : 0x1F01,\n  REPEAT : 0x2901,\n  REPLACE : 0x1E01,\n  RGB : 0x1907,\n  RGB565 : 0x8D62,\n  RGB5_A1 : 0x8057,\n  RGBA : 0x1908,\n  RGBA4 : 0x8056,\n  SAMPLER_2D : 0x8B5E,\n  SAMPLER_CUBE : 0x8B60,\n  SAMPLES : 0x80A9,\n  SAMPLE_ALPHA_TO_COVERAGE : 0x809E,\n  SAMPLE_BUFFERS : 0x80A8,\n  SAMPLE_COVERAGE : 0x80A0,\n  SAMPLE_COVERAGE_INVERT : 0x80AB,\n  SAMPLE_COVERAGE_VALUE : 0x80AA,\n  SCISSOR_BOX : 0x0C10,\n  SCISSOR_TEST : 0x0C11,\n  SHADER_TYPE : 0x8B4F,\n  SHADING_LANGUAGE_VERSION : 0x8B8C,\n  SHORT : 0x1402,\n  SRC_ALPHA : 0x0302,\n  SRC_ALPHA_SATURATE : 0x0308,\n  SRC_COLOR : 0x0300,\n  STATIC_DRAW : 0x88E4,\n  STENCIL_ATTACHMENT : 0x8D20,\n  STENCIL_BACK_FAIL : 0x8801,\n  STENCIL_BACK_FUNC : 0x8800,\n  STENCIL_BACK_PASS_DEPTH_FAIL : 0x8802,\n  STENCIL_BACK_PASS_DEPTH_PASS : 0x8803,\n  STENCIL_BACK_REF : 0x8CA3,\n  STENCIL_BACK_VALUE_MASK : 0x8CA4,\n  STENCIL_BACK_WRITEMASK : 0x8CA5,\n  STENCIL_BITS : 0x0D57,\n  STENCIL_BUFFER_BIT : 0x00000400,\n  STENCIL_CLEAR_VALUE : 0x0B91,\n  STENCIL_FAIL : 0x0B94,\n  STENCIL_FUNC : 0x0B92,\n  STENCIL_INDEX : 0x1901,\n  STENCIL_INDEX8 : 0x8D48,\n  STENCIL_PASS_DEPTH_FAIL : 0x0B95,\n  STENCIL_PASS_DEPTH_PASS : 0x0B96,\n  STENCIL_REF : 0x0B97,\n  STENCIL_TEST : 0x0B90,\n  STENCIL_VALUE_MASK : 0x0B93,\n  STENCIL_WRITEMASK : 0x0B98,\n  STREAM_DRAW : 0x88E0,\n  SUBPIXEL_BITS : 0x0D50,\n  TEXTURE : 0x1702,\n  TEXTURE0 : 0x84C0,\n  TEXTURE1 : 0x84C1,\n  TEXTURE10 : 0x84CA,\n  TEXTURE11 : 0x84CB,\n  TEXTURE12 : 0x84CC,\n  TEXTURE13 : 0x84CD,\n  TEXTURE14 : 0x84CE,\n  TEXTURE15 : 0x84CF,\n  TEXTURE16 : 0x84D0,\n  TEXTURE17 : 0x84D1,\n  TEXTURE18 : 0x84D2,\n  TEXTURE19 : 0x84D3,\n  TEXTURE2 : 0x84C2,\n  TEXTURE20 : 0x84D4,\n  TEXTURE21 : 0x84D5,\n  TEXTURE22 : 0x84D6,\n  TEXTURE23 : 0x84D7,\n  TEXTURE24 : 0x84D8,\n  TEXTURE25 : 0x84D9,\n  TEXTURE26 : 0x84DA,\n  TEXTURE27 : 0x84DB,\n  TEXTURE28 : 0x84DC,\n  TEXTURE29 : 0x84DD,\n  TEXTURE3 : 0x84C3,\n  TEXTURE30 : 0x84DE,\n  TEXTURE31 : 0x84DF,\n  TEXTURE4 : 0x84C4,\n  TEXTURE5 : 0x84C5,\n  TEXTURE6 : 0x84C6,\n  TEXTURE7 : 0x84C7,\n  TEXTURE8 : 0x84C8,\n  TEXTURE9 : 0x84C9,\n  TEXTURE_2D : 0x0DE1,\n  TEXTURE_BINDING_2D : 0x8069,\n  TEXTURE_BINDING_CUBE_MAP : 0x8514,\n  TEXTURE_CUBE_MAP : 0x8513,\n  TEXTURE_CUBE_MAP_NEGATIVE_X : 0x8516,\n  TEXTURE_CUBE_MAP_NEGATIVE_Y : 0x8518,\n  TEXTURE_CUBE_MAP_NEGATIVE_Z : 0x851A,\n  TEXTURE_CUBE_MAP_POSITIVE_X : 0x8515,\n  TEXTURE_CUBE_MAP_POSITIVE_Y : 0x8517,\n  TEXTURE_CUBE_MAP_POSITIVE_Z : 0x8519,\n  TEXTURE_MAG_FILTER : 0x2800,\n  TEXTURE_MIN_FILTER : 0x2801,\n  TEXTURE_WRAP_S : 0x2802,\n  TEXTURE_WRAP_T : 0x2803,\n  TRIANGLES : 0x0004,\n  TRIANGLE_FAN : 0x0006,\n  TRIANGLE_STRIP : 0x0005,\n  UNPACK_ALIGNMENT : 0x0CF5,\n  UNPACK_COLORSPACE_CONVERSION_WEBGL : 0x9243,\n  UNPACK_FLIP_Y_WEBGL : 0x9240,\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL : 0x9241,\n  UNSIGNED_BYTE : 0x1401,\n  UNSIGNED_INT : 0x1405,\n  UNSIGNED_SHORT : 0x1403,\n  UNSIGNED_SHORT_4_4_4_4 : 0x8033,\n  UNSIGNED_SHORT_5_5_5_1 : 0x8034,\n  UNSIGNED_SHORT_5_6_5 : 0x8363,\n  VALIDATE_STATUS : 0x8B83,\n  VENDOR : 0x1F00,\n  VERSION : 0x1F02,\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING : 0x889F,\n  VERTEX_ATTRIB_ARRAY_ENABLED : 0x8622,\n  VERTEX_ATTRIB_ARRAY_NORMALIZED : 0x886A,\n  VERTEX_ATTRIB_ARRAY_POINTER : 0x8645,\n  VERTEX_ATTRIB_ARRAY_SIZE : 0x8623,\n  VERTEX_ATTRIB_ARRAY_STRIDE : 0x8624,\n  VERTEX_ATTRIB_ARRAY_TYPE : 0x8625,\n  VERTEX_SHADER : 0x8B31,\n  VIEWPORT : 0x0BA2,\n  ZERO : 0\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class timestamp\n *\n * @class\n * @returns {vgl.timestamp}\n */\n//////////////////////////////////////////////////////////////////////////////\nvar m_globalModifiedTime = 0;\n\nvgl.timestamp = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.timestamp)) {\n    return new vgl.timestamp();\n  }\n\n  var m_modifiedTime = 0;\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update modified time\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.modified = function () {\n    m_globalModifiedTime += 1;\n    m_modifiedTime = m_globalModifiedTime;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get modified time\n   *\n   * @returns {number}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.getMTime = function () {\n    return m_modifiedTime;\n  };\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class object\n *\n * @class\n * @returns {vgl.object}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.object = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.object)) {\n    return new vgl.object();\n  }\n\n  /** @private */\n  var m_modifiedTime = vgl.timestamp();\n  m_modifiedTime.modified();\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Mark the object modified\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.modified = function () {\n    m_modifiedTime.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return modified time of the object\n   *\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getMTime = function () {\n    return m_modifiedTime.getMTime();\n  };\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class event\n *\n * @class event\n * @returns {vgl.event}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.event = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.event)) {\n    return new vgl.event();\n  }\n  vgl.object.call(this);\n\n  return this;\n};\n\ninherit(vgl.event, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n *  types\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.event.keyPress = 'vgl.event.keyPress';\nvgl.event.mousePress = 'vgl.event.mousePress';\nvgl.event.mouseRelease = 'vgl.event.mouseRelease';\nvgl.event.contextMenu = 'vgl.event.contextMenu';\nvgl.event.configure = 'vgl.event.configure';\nvgl.event.enable = 'vgl.event.enable';\nvgl.event.mouseWheel = 'vgl.event.mouseWheel';\nvgl.event.keyRelease = 'vgl.event.keyRelease';\nvgl.event.middleButtonPress = 'vgl.event.middleButtonPress';\nvgl.event.startInteraction = 'vgl.event.startInteraction';\nvgl.event.enter = 'vgl.event.enter';\nvgl.event.rightButtonPress = 'vgl.event.rightButtonPress';\nvgl.event.middleButtonRelease = 'vgl.event.middleButtonRelease';\nvgl.event.char = 'vgl.event.char';\nvgl.event.disable = 'vgl.event.disable';\nvgl.event.endInteraction = 'vgl.event.endInteraction';\nvgl.event.mouseMove = 'vgl.event.mouseMove';\nvgl.event.mouseOut = 'vgl.event.mouseOut';\nvgl.event.expose = 'vgl.event.expose';\nvgl.event.timer = 'vgl.event.timer';\nvgl.event.leftButtonPress = 'vgl.event.leftButtonPress';\nvgl.event.leave = 'vgl.event.leave';\nvgl.event.rightButtonRelease = 'vgl.event.rightButtonRelease';\nvgl.event.leftButtonRelease = 'vgl.event.leftButtonRelease';\nvgl.event.click = 'vgl.event.click';\nvgl.event.dblClick = 'vgl.event.dblClick';\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class boundingObject\n *\n * @class\n * @return {vgl.boundingObject}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.boundingObject = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.boundingObject)) {\n    return new vgl.boundingObject();\n  }\n  vgl.object.call(this);\n\n  /** @private */\n  var m_bounds = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0],\n      m_computeBoundsTimestamp = vgl.timestamp(),\n      m_boundsDirtyTimestamp = vgl.timestamp();\n\n  m_computeBoundsTimestamp.modified();\n  m_boundsDirtyTimestamp.modified();\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get current bounds of the object\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bounds = function () {\n    return m_bounds;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if bounds are valid\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasValidBounds = function (bounds) {\n    if (bounds[0] === Number.MAX_VALUE ||\n        bounds[1] === -Number.MAX_VALUE ||\n        bounds[2] === Number.MAX_VALUE ||\n        bounds[3] === -Number.MAX_VALUE ||\n        bounds[4] === Number.MAX_VALUE ||\n        bounds[5] === -Number.MAX_VALUE) {\n      return false;\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set current bounds of the object\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setBounds = function (minX, maxX, minY, maxY, minZ, maxZ) {\n    if (!this.hasValidBounds([minX, maxX, minY, maxY, minZ, maxZ])) {\n      return;\n    }\n\n    m_bounds[0] = minX;\n    m_bounds[1] = maxX;\n    m_bounds[2] = minY;\n    m_bounds[3] = maxY;\n    m_bounds[4] = minZ;\n    m_bounds[5] = maxZ;\n\n    this.modified();\n    m_computeBoundsTimestamp.modified();\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Reset bounds to default values\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetBounds = function () {\n    m_bounds[0] = Number.MAX_VALUE;\n    m_bounds[1] = -Number.MAX_VALUE;\n    m_bounds[2] = Number.MAX_VALUE;\n    m_bounds[3] = -Number.MAX_VALUE;\n    m_bounds[4] = Number.MAX_VALUE;\n    m_bounds[5] = -Number.MAX_VALUE;\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute bounds of the object\n   *\n   * Should be implemented by the concrete class\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return bounds computation modification time\n   *\n   * @returns {vgl.timestamp}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBoundsTimestamp = function () {\n    return m_computeBoundsTimestamp;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return bounds dirty timestamp\n   *\n   * @returns {vgl.timestamp}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.boundsDirtyTimestamp = function () {\n    return m_boundsDirtyTimestamp;\n  };\n\n  this.resetBounds();\n\n  return this;\n};\n\nvgl.boundingObject.ReferenceFrame = {\n  'Relative' : 0,\n  'Absolute' : 1\n};\n\ninherit(vgl.boundingObject, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class node\n *\n * @class\n * @returns {vgl.node}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.node = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.node)) {\n    return new vgl.node();\n  }\n  vgl.boundingObject.call(this);\n\n  /** @private */\n  var m_parent = null,\n      m_material = null,\n      m_visible = true,\n      m_overlay = false;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Accept visitor for scene traversal\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.accept = function (visitor) {\n    visitor.visit(this);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return active material used by the node\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.material = function () {\n    return m_material;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set material to be used the node\n   *\n   * @param material\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setMaterial = function (material) {\n    if (material !== m_material) {\n      m_material = material;\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if the node is visible or node\n   *\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.visible = function () {\n    return m_visible;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Turn ON/OFF visibility of the node\n   *\n   * @param flag\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setVisible = function (flag) {\n    if (flag !== m_visible) {\n      m_visible = flag;\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return current parent of the node\n   *\n   * @returns {null}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parent = function () {\n    return m_parent;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set parent of the node\n   *\n   * @param parent\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setParent = function (parent) {\n    if (parent !== m_parent) {\n      if (m_parent !== null) {\n        m_parent.removeChild(this);\n      }\n      m_parent = parent;\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if the node is an overlay node\n   *\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.overlay = function () {\n    return m_overlay;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set if the node is an overlay node or not\n   *\n   * @param flag\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setOverlay = function (flag) {\n    if (m_overlay !== flag) {\n      m_overlay = flag;\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /*\n   * Traverse parent and their parent and so on\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.ascend = function (visitor) {\n    visitor = visitor; /* unused parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Traverse children\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.traverse = function (visitor) {\n    visitor = visitor; /* unused parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Mark that the bounds are modified\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.boundsModified = function () {\n    // @todo Implement this\n    this.boundsDirtyTimestamp().modified();\n\n    if (m_parent !== null) {\n      m_parent.boundsModified();\n    }\n  };\n\n  return this;\n};\n\ninherit(vgl.node, vgl.boundingObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class groupNode\n *\n * @class\n * @returns {vgl.groupNode}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.groupNode = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.groupNode)) {\n    return new vgl.groupNode();\n  }\n  vgl.node.call(this);\n\n  var m_children = [];\n\n  // Reference to base class methods\n  this.b_setVisible = this.setVisible;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Turn on / off visibility\n   *\n   * @param flag\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setVisible = function (flag) {\n    var i;\n\n    if (this.b_setVisible(flag) !== true) {\n      return false;\n    }\n\n    for (i = 0; i < m_children.length; i += 1) {\n      m_children[i].setVisible(flag);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Make the incoming node as child of the group node\n   *\n   * @param childNode\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addChild = function (childNode) {\n    if (childNode instanceof vgl.node) {\n      if (m_children.indexOf(childNode) === -1) {\n        childNode.setParent(this);\n        m_children.push(childNode);\n        this.boundsDirtyTimestamp().modified();\n        return true;\n      }\n      return false;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove parent-child relationship between the group and incoming node\n   *\n   * @param childNode\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeChild = function (childNode) {\n    if (childNode.parent() === this) {\n      var index = m_children.indexOf(childNode);\n      if (index >= 0) {\n        m_children.splice(index, 1);\n        childNode.setParent(null);\n        this.boundsDirtyTimestamp().modified();\n        return true;\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove parent-child relationship between child nodes and the group node\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeChildren = function () {\n    while (m_children.length) {\n      this.removeChild(m_children[0]);\n    }\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return children of this group node\n   *\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.children = function () {\n    return m_children;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return true if this group node has node as a child, false otherwise.\n   *\n   * @param node\n   * @returns {bool}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasChild = function (node) {\n    var i = 0, child = false;\n\n    for (i = 0; i < m_children.length; i += 1) {\n      if (m_children[i] === node) {\n        child = true;\n        break;\n      }\n    }\n\n    return child;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Accept a visitor and traverse the scene tree\n   *\n   * @param visitor\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.accept = function (visitor) {\n    visitor.visit(this);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Traverse the scene\n   *\n   * @param visitor\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.traverse = function (visitor) {\n    switch (visitor.type()) {\n      case visitor.UpdateVisitor:\n        this.traverseChildrenAndUpdateBounds(visitor);\n        break;\n      case visitor.CullVisitor:\n        this.traverseChildren(visitor);\n        break;\n      default:\n        break;\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Traverse all of the children and update the bounds for each\n   *\n   * @param visitor\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.traverseChildrenAndUpdateBounds = function (visitor) {\n    var i;\n\n    if (this.parent() && this.boundsDirtyTimestamp().getMTime() >\n      this.computeBoundsTimestamp().getMTime()) {\n      // Flag parents bounds dirty.\n      this.parent().boundsDirtyTimestamp().modified();\n    }\n\n    this.computeBounds();\n\n    if (visitor.mode() === visitor.TraverseAllChildren) {\n      for (i = 0; i < m_children.length; i += 1) {\n        m_children[i].accept(visitor);\n        this.updateBounds(m_children[i]);\n      }\n    }\n\n    this.computeBoundsTimestamp().modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Traverse children of the group node\n   *\n   * @param visitor\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.traverseChildren = function (visitor) {\n    var i;\n\n    if (visitor.mode() === visitor.TraverseAllChildren) {\n      for (i = 0; i < m_children.length; i += 1) {\n        m_children[i].accept(visitor);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute bounds for the group node\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n    var i = 0;\n\n    if (this.computeBoundsTimestamp().getMTime() >\n        this.boundsDirtyTimestamp().getMTime()) {\n      return;\n    }\n\n    for (i = 0; i < m_children.length; i += 1) {\n      this.updateBounds(m_children[i]);\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update bounds for the group node\n   *\n   * This method is used internally to update bounds of the group node by\n   * traversing each of its child.\n   *\n   * @param child\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.updateBounds = function (child) {\n    // FIXME: This check should not be required and possibly is incorrect\n    if (child.overlay()) {\n      return;\n    }\n\n    // Make sure that child bounds are up to date\n    child.computeBounds();\n\n    var bounds = this.bounds(),\n        childBounds = child.bounds(),\n        istep = 0,\n        jstep = 0,\n        i;\n\n    for (i = 0; i < 3; i += 1) {\n      istep = i * 2;\n      jstep = i * 2 + 1;\n      if (childBounds[istep] < bounds[istep]) {\n        bounds[istep] = childBounds[istep];\n      }\n      if (childBounds[jstep] > bounds[jstep]) {\n        bounds[jstep] = childBounds[jstep];\n      }\n    }\n\n    this.setBounds(bounds[0], bounds[1], bounds[2], bounds[3],\n                   bounds[4], bounds[5]);\n  };\n\n  return this;\n};\n\ninherit(vgl.groupNode, vgl.node);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec3, mat4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class actor\n *\n * @class\n * @returns {vgl.actor}\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.actor = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.actor)) {\n    return new vgl.actor();\n  }\n  vgl.node.call(this);\n\n  /** @private */\n  var m_this = this,\n      m_transformMatrix = mat4.create(),\n      m_referenceFrame = vgl.boundingObject.ReferenceFrame.Relative,\n      m_mapper = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get transformation matrix used by the actor\n   *\n   * @returns {mat4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.matrix = function () {\n    return m_transformMatrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set transformation matrix for the actor\n   *\n   * @param {mat4} 4X4 transformation matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setMatrix = function (tmatrix) {\n    if (tmatrix !== m_transformMatrix) {\n      m_transformMatrix = tmatrix;\n      m_this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get reference frame for the transformations\n   *\n   * @returns {String} Possible values are Absolute or Relative\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.referenceFrame = function () {\n    return m_referenceFrame;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set reference frame for the transformations\n   *\n   * @param {vgl.boundingObject.ReferenceFrame}\n   * referenceFrame Possible values are (Absolute | Relative)\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setReferenceFrame = function (referenceFrame) {\n    if (referenceFrame !== m_referenceFrame) {\n      m_referenceFrame = referenceFrame;\n      m_this.modified();\n      return true;\n    }\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return mapper where actor gets it behavior and data\n   *\n   * @returns {vgl.mapper}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.mapper = function () {\n    return m_mapper;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Connect an actor to its data source\n   *\n   * @param {vgl.mapper}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setMapper = function (mapper) {\n    if (mapper !== m_mapper) {\n      m_mapper = mapper;\n      m_this.boundsModified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * @todo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.accept = function (visitor) {\n    visitor = visitor; /* ignore this parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * @todo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.ascend = function (visitor) {\n    visitor = visitor; /* ignore this parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute object space to world space matrix\n   * @todo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeLocalToWorldMatrix = function (matrix, visitor) {\n    matrix = matrix; /* ignore this parameter */\n    visitor = visitor; /* ignore this parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute world space to object space matrix\n   * @todo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeWorldToLocalMatrix = function (matrix, visitor) {\n    matrix = matrix; /* ignore this parameter */\n    visitor = visitor; /* ignore this parameter */\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute actor bounds\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n    if (m_mapper === null || m_mapper === undefined) {\n      m_this.resetBounds();\n      return;\n    }\n\n    var computeBoundsTimestamp = m_this.computeBoundsTimestamp(),\n        mapperBounds, minPt, maxPt, newBounds;\n\n    if (m_this.boundsDirtyTimestamp().getMTime() > computeBoundsTimestamp.getMTime() ||\n      m_mapper.boundsDirtyTimestamp().getMTime() > computeBoundsTimestamp.getMTime()) {\n\n      m_mapper.computeBounds();\n      mapperBounds = m_mapper.bounds();\n\n      minPt = [mapperBounds[0], mapperBounds[2], mapperBounds[4]];\n      maxPt = [mapperBounds[1], mapperBounds[3], mapperBounds[5]];\n\n      vec3.transformMat4(minPt, minPt, m_transformMatrix);\n      vec3.transformMat4(maxPt, maxPt, m_transformMatrix);\n\n      newBounds = [\n        minPt[0] > maxPt[0] ? maxPt[0] : minPt[0],\n        minPt[0] > maxPt[0] ? minPt[0] : maxPt[0],\n        minPt[1] > maxPt[1] ? maxPt[1] : minPt[1],\n        minPt[1] > maxPt[1] ? minPt[1] : maxPt[1],\n        minPt[2] > maxPt[2] ? maxPt[2] : minPt[2],\n        minPt[2] > maxPt[2] ? minPt[2] : maxPt[2]\n      ];\n\n      m_this.setBounds(newBounds[0], newBounds[1],\n                     newBounds[2], newBounds[3],\n                     newBounds[4], newBounds[5]);\n\n      computeBoundsTimestamp.modified();\n    }\n  };\n\n  return m_this;\n};\n\ninherit(vgl.actor, vgl.node);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Freeze javascript object\n *\n * @param obj\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.freezeObject = function (obj) {\n  'use strict';\n\n  /**\n   * Freezes an object, using Object.freeze if available, otherwise returns\n   * the object unchanged.  This function should be used in setup code to prevent\n   * errors from completely halting JavaScript execution in legacy browsers.\n   *\n   * @exports freezeObject\n   */\n  var freezedObject = Object.freeze ? Object.freeze(obj) : undefined;\n  if (typeof freezedObject === 'undefined') {\n    return obj;\n  }\n\n  return freezedObject;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Returns the first parameter if not undefined,\n * otherwise the second parameter.\n *\n * @class\n * @returns {vgl.defaultValue}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.defaultValue = function (a, b) {\n  'use strict';\n\n  if (typeof a !== 'undefined') {\n    return a;\n  }\n  return b;\n};\n\nvgl.defaultValue.EMPTY_OBJECT = vgl.freezeObject({});\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class graphicsObject\n *\n * @class\n * @param type\n * @returns {vgl.graphicsObject}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.graphicsObject = function (type) {\n  'use strict';\n\n  type = type; /* unused parameter */\n  if (!(this instanceof vgl.graphicsObject)) {\n    return new vgl.graphicsObject();\n  }\n  vgl.object.call(this);\n\n  var m_this = this;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Setup (initialize) the object\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._setup = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove any resources acquired before deletion\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._cleanup = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind and activate\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bind = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind and deactivate\n   *\n   * @param renderState\n   * @returns {boolean}\n   *\n   * TODO: Change it to unbind (simple)\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.undoBind = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the object\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove the object and release its graphics resources\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.remove = function (renderState) {\n    m_this._cleanup(renderState);\n  };\n\n  return m_this;\n};\n\ninherit(vgl.graphicsObject, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, Uint16Array*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of geojson reader\n *\n * This contains code that reads a geoJSON file and produces rendering\n * primitives from it.\n *\n * @class\n * @returns {vgl.geojsonReader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.geojsonReader = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.geojsonReader)) {\n    return new vgl.geojsonReader();\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read scalars\n   *\n   * @param coordinates\n   * @param geom\n   * @param size_estimate\n   * @param idx\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readScalars = function (coordinates, geom, size_estimate, idx) {\n    var array = null,\n        s = null,\n        r = null,\n        g = null,\n        b = null;\n\n    if (this.m_scalarFormat === 'values' && coordinates.length === 4) {\n      s = coordinates[3];\n      array = geom.sourceData(vgl.vertexAttributeKeys.Scalar);\n\n      if (!array) {\n        array = new vgl.sourceDataSf();\n        if (this.m_scalarRange) {\n          array.setScalarRange(this.m_scalarRange[0], this.m_scalarRange[1]);\n        }\n        if (size_estimate !== undefined) {\n          //array.length = size_estimate; //no, slow on Safari\n          array.data().length = size_estimate;\n        }\n        geom.addSource(array);\n      }\n      if (size_estimate === undefined) {\n        array.pushBack(s);\n      } else {\n        array.insertAt(idx, s);\n      }\n    } else if (this.m_scalarFormat === 'rgb' && coordinates.length === 6) {\n      array = geom.sourceData(vgl.vertexAttributeKeys.Color);\n      if (!array) {\n        array = new vgl.sourceDataC3fv();\n        if (size_estimate !== undefined) {\n          array.length = size_estimate * 3;\n        }\n        geom.addSource(array);\n      }\n      r = coordinates[3];\n      g = coordinates[4];\n      b = coordinates[5];\n      if (size_estimate === undefined) {\n        array.pushBack([r, g, b]);\n      } else {\n        array.insertAt(idx, [r, g, b]);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read point data\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readPoint = function (coordinates) {\n    var geom = new vgl.geometryData(),\n        vglpoints = new vgl.points(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        indices = new Uint16Array(1),\n        x = null,\n        y = null,\n        z = null,\n        i = null;\n\n    geom.addSource(vglcoords);\n    for (i = 0; i < 1; i += 1) {\n      indices[i] = i;\n\n      x = coordinates[0];\n      y = coordinates[1];\n      z = 0.0;\n      if (coordinates.length > 2) {\n        z = coordinates[2];\n      }\n\n      //console.log('read ' + x + ',' + y + ',' + z);\n      vglcoords.pushBack([x, y, z]);\n\n      //attributes\n      this.readScalars(coordinates, geom);\n    }\n\n    vglpoints.setIndices(indices);\n    geom.addPrimitive(vglpoints);\n    geom.setName('aPoint');\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read multipoint data\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readMultiPoint = function (coordinates) {\n    var geom = new vgl.geometryData(),\n        vglpoints = new vgl.points(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        indices = new Uint16Array(coordinates.length),\n        pntcnt = 0,\n        estpntcnt = coordinates.length,\n        x = null,\n        y = null,\n        z = null,\n        i;\n\n    //preallocate with size estimate\n    vglcoords.data().length = estpntcnt * 3; //x,y,z\n\n    for (i = 0; i < coordinates.length; i += 1) {\n      indices[i] = i;\n      x = coordinates[i][0];\n      y = coordinates[i][1];\n      z = 0.0;\n      if (coordinates[i].length > 2) {\n        z = coordinates[i][2];\n      }\n\n      //console.log('read ' + x + ',' + y + ',' + z);\n      vglcoords.insertAt(pntcnt, [x, y, z]);\n\n      //attributes\n      this.readScalars(coordinates[i], geom, estpntcnt, pntcnt);\n\n      pntcnt += 1;\n    }\n\n    vglpoints.setIndices(indices);\n    geom.addPrimitive(vglpoints);\n    geom.addSource(vglcoords);\n    geom.setName('manyPoints');\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read line string data\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readLineString = function (coordinates) {\n    var geom = new vgl.geometryData(),\n        vglline = new vgl.lineStrip(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        indices = [],\n        i = null,\n        x = null,\n        y = null,\n        z = null;\n\n    vglline.setIndicesPerPrimitive(coordinates.length);\n\n    for (i = 0; i < coordinates.length; i += 1) {\n      indices.push(i);\n      x = coordinates[i][0];\n      y = coordinates[i][1];\n      z = 0.0;\n      if (coordinates[i].length > 2) {\n        z = coordinates[i][2];\n      }\n\n      //console.log('read ' + x + ',' + y + ',' + z);\n      vglcoords.pushBack([x, y, z]);\n\n      //attributes\n      this.readScalars(coordinates[i], geom);\n    }\n\n    vglline.setIndices(indices);\n    geom.addPrimitive(vglline);\n    geom.addSource(vglcoords);\n    geom.setName('aLineString');\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read multi line string\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readMultiLineString = function (coordinates) {\n    var geom = new vgl.geometryData(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        pntcnt = 0,\n        //lines should be at least 2 verts long, underest OK\n        estpntcnt = coordinates.length * 2,\n        i = null,\n        j = null,\n        x = null,\n        y = null,\n        z = null,\n        indices = null,\n        vglline = null,\n        thisLineLength = null;\n\n    // Preallocate with size estimate\n    vglcoords.data().length = estpntcnt * 3; //x,y,z\n\n    for (j = 0; j < coordinates.length; j += 1) {\n      indices = [];\n      //console.log('getting line ' + j);\n      vglline = new vgl.lineStrip();\n      thisLineLength = coordinates[j].length;\n      vglline.setIndicesPerPrimitive(thisLineLength);\n      for (i = 0; i < thisLineLength; i += 1) {\n        indices.push(pntcnt);\n        x = coordinates[j][i][0];\n        y = coordinates[j][i][1];\n        z = 0.0;\n        if (coordinates[j][i].length > 2) {\n          z = coordinates[j][i][2];\n        }\n\n        //console.log('read ' + x + ',' + y + ',' + z);\n        vglcoords.insertAt(pntcnt, [x, y, z]);\n\n        //attributes\n        this.readScalars(coordinates[j][i], geom, estpntcnt * 2, pntcnt);\n\n        pntcnt += 1;\n      }\n\n      vglline.setIndices(indices);\n      geom.addPrimitive(vglline);\n    }\n\n    geom.setName('aMultiLineString');\n    geom.addSource(vglcoords);\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read polygon data\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readPolygon = function (coordinates) {\n    //TODO: ignoring holes given in coordinates[1...]\n    //TODO: ignoring convex\n    //TODO: implement ear clipping in VGL instead of this to handle both\n    var geom = new vgl.geometryData(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        x = null,\n        y = null,\n        z = null,\n        thisPolyLength = coordinates[0].length,\n        vl = 1,\n        i = null,\n        indices = null,\n        vgltriangle = null;\n\n    for (i = 0; i < thisPolyLength; i += 1) {\n      x = coordinates[0][i][0];\n      y = coordinates[0][i][1];\n      z = 0.0;\n      if (coordinates[0][i].length > 2) {\n        z = coordinates[0][i][2];\n      }\n\n      //console.log('read ' + x + ',' + y + ',' + z);\n      vglcoords.pushBack([x, y, z]);\n\n      //attributes\n      this.readScalars(coordinates[0][i], geom);\n\n      if (i > 1) {\n        //console.log('Cutting new triangle 0,'+ vl+ ','+ i);\n        indices = new Uint16Array([0, vl, i]);\n        vgltriangle = new vgl.triangles();\n        vgltriangle.setIndices(indices);\n        geom.addPrimitive(vgltriangle);\n        vl = i;\n      }\n    }\n\n    geom.setName('POLY');\n    geom.addSource(vglcoords);\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read multi polygon data\n   *\n   * @param coordinates\n   * @returns {vgl.geometryData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readMultiPolygon = function (coordinates) {\n    var geom = new vgl.geometryData(),\n        vglcoords = new vgl.sourceDataP3fv(),\n        ccount = 0,\n        numPolys = coordinates.length,\n        pntcnt = 0,\n        estpntcnt = numPolys * 3, // assume triangles, underest is fine\n        vgltriangle = new vgl.triangles(),\n        indexes = [],\n        i = null,\n        j = null,\n        x = null,\n        y = null,\n        z = null,\n        thisPolyLength = null,\n        vf = null,\n        vl = null,\n        flip = null,\n        flipped = false,\n        tcount = 0;\n\n    //var time1 = new Date().getTime()\n    //var a = 0;\n    //var b = 0;\n    //var c = 0;\n    //var d = 0;\n\n    //preallocate with size estimate\n    vglcoords.data().length = numPolys * 3; //x,y,z\n    for (j = 0; j < numPolys; j += 1) {\n      //console.log('getting poly ' + j);\n\n      thisPolyLength = coordinates[j][0].length;\n      vf = ccount;\n      vl = ccount + 1;\n      flip = [false, false, false];\n      for (i = 0; i < thisPolyLength; i += 1) {\n        //var timea = new Date().getTime()\n\n        x = coordinates[j][0][i][0];\n        y = coordinates[j][0][i][1];\n        z = 0.0;\n        if (coordinates[j][0][i].length > 2) {\n          z = coordinates[j][0][i][2];\n        }\n        flipped = false;\n        if (x > 180) {\n          flipped = true;\n          x = x - 360;\n        }\n        if (i === 0) {\n          flip[0] = flipped;\n        } else {\n          flip[1 + (i - 1) % 2] = flipped;\n        }\n        //var timeb = new Date().getTime();\n        //console.log('read ' + x + ',' + y + ',' + z);\n\n        vglcoords.insertAt(pntcnt, [x, y, z]);\n        //var timec = new Date().getTime();\n\n        //attributes\n        this.readScalars(coordinates[j][0][i], geom, estpntcnt, pntcnt);\n        pntcnt += 1;\n        //var timed = new Date().getTime()\n\n        if (i > 1) {\n          //if (vl < 50) {\n          //console.log('Cutting new triangle ' + tcount + ':' + vf + ',' +\n          //            vl + ',' + ccount);\n          //console.log(indexes);\n          //}\n          if (flip[0] === flip[1] && flip[1] === flip[2]) {\n            //indexes = indexes.concat([vf,vl,ccount]); //no, very slow in Safari\n            indexes[tcount * 3 + 0] = vf;\n            indexes[tcount * 3 + 1] = vl;\n            indexes[tcount * 3 + 2] = ccount;\n            tcount += 1;\n          }\n          //else {\n          //  //TODO: duplicate triangles that straddle boundary on either side\n          //}\n\n          vl = ccount;\n        }\n        ccount += 1;\n        //var timee = new Date().getTime()\n        //a = a + (timeb-timea)\n        //b = b + (timec-timeb)\n        //c = c + (timed-timec)\n        //d = d + (timee-timed)\n      }\n    }\n    vgltriangle.setIndices(indexes);\n    geom.addPrimitive(vgltriangle);\n\n    //console.log('NUMPOLYS ' + pntcnt);\n    //console.log('RMP: ', a, ',', b, ',', c, ',', d)\n    //var time2 = new Date().getTime()\n\n    geom.setName('aMultiPoly');\n    geom.addSource(vglcoords);\n    //var time3 = new Date().getTime()\n    //console.log('RMP: ', time2-time1, ',', time3-time2)\n\n    return geom;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * @param object\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readGJObjectInt = function (object) {\n    if (!object.hasOwnProperty('type')) {\n      //console.log('uh oh, not a geojson object');\n      return null;\n    }\n\n    //look for properties type annotation\n    if (object.properties &&\n        object.properties.ScalarFormat &&\n        object.properties.ScalarFormat === 'values') {\n      this.m_scalarFormat = 'values';\n      if (object.properties.ScalarRange) {\n        this.m_scalarRange = object.properties.ScalarRange;\n      }\n    }\n    if (object.properties &&\n        object.properties.ScalarFormat &&\n        object.properties.ScalarFormat === 'rgb') {\n      this.m_scalarFormat = 'rgb';\n    }\n\n    //TODO: ignoring 'crs' and 'bbox' and misc meta data on all of these,\n    //best to handle as references into original probably\n    var ret,\n        type = object.type,\n        next = null,\n        nextset = null,\n        i = null;\n\n    switch (type) {\n      case 'Point':\n        //console.log('parsed Point');\n        ret = this.readPoint(object.coordinates);\n        break;\n      case 'MultiPoint':\n        //console.log('parsed MultiPoint');\n        ret = this.readMultiPoint(object.coordinates);\n        break;\n      case 'LineString':\n        //console.log('parsed LineString');\n        ret = this.readLineString(object.coordinates);\n        break;\n      case 'MultiLineString':\n        //console.log('parsed MultiLineString');\n        ret = this.readMultiLineString(object.coordinates);\n        break;\n      case 'Polygon':\n        //console.log('parsed Polygon');\n        ret = this.readPolygon(object.coordinates);\n        break;\n      case 'MultiPolygon':\n        //console.log('parsed MultiPolygon');\n        ret = this.readMultiPolygon(object.coordinates);\n        break;\n      case 'GeometryCollection':\n        //console.log('parsed GeometryCollection');\n        nextset = [];\n        for (i = 0; i < object.geometries.length; i += 1) {\n          next = this.readGJObject(object.geometries[i]);\n          nextset.push(next);\n        }\n        ret = nextset;\n        break;\n      case 'Feature':\n        //console.log('parsed Feature');\n        next = this.readGJObject(object.geometry);\n        ret = next;\n        break;\n      case 'FeatureCollection':\n        //console.log('parsed FeatureCollection');\n        nextset = [];\n        for (i = 0; i < object.features.length; i += 1) {\n          next = this.readGJObject(object.features[i]);\n          nextset.push(next);\n        }\n        ret = nextset;\n        break;\n      default:\n        console.log('Don\\'t understand type ' + type);\n        ret = null;\n        break;\n    }\n    return ret;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * @param object\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readGJObject = function (object) {\n    //var time1, time2;\n    var ret;\n    //time1 = new Date().getTime()\n    ret = this.readGJObjectInt(object);\n    //time2 = new Date().getTime()\n    //console.log('ELAPSED: ', time2-time1)\n    return ret;\n  };\n\n  /**\n   * Linearize geometries\n   *\n   * @param geoms\n   * @param geom\n   */\n  this.linearizeGeoms = function (geoms, geom) {\n    var i = null;\n\n    if (Object.prototype.toString.call(geom) === '[object Array]') {\n      for (i = 0; i < geom.length; i += 1) {\n        this.linearizeGeoms(geoms, geom[i]);\n      }\n    } else {\n      geoms.push(geom);\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Read geometries from geojson object\n   *\n   * @param object\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readGeomObject = function (object) {\n    var geom,\n        geoms = [];\n\n    geom = this.readGJObject(object);\n    this.linearizeGeoms(geoms, geom);\n    return geoms;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Given a buffer get rendering primitives\n   *\n   * @param buffer\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getPrimitives = function (buffer) {\n    //console.log('Parsing geoJSON');\n    if (!buffer) {\n      return [];\n    }\n\n    var obj = JSON.parse(buffer),\n        geom = this.readGJObject(obj),\n        geoms = [];\n\n    this.m_scalarFormat = 'none';\n    this.m_scalarRange = null;\n\n    this.linearizeGeoms(geoms, geom);\n\n    return { 'geoms': geoms,\n             'scalarFormat': this.m_scalarFormat,\n             'scalarRange': this.m_scalarRange };\n  };\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\nvgl.data = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.data)) {\n    return new vgl.data();\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return data type. Should be implemented by the derived class\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.type = function () {\n  };\n};\n\nvgl.data.raster = 0;\nvgl.data.point = 1;\nvgl.data.lineString = 2;\nvgl.data.polygon = 3;\nvgl.data.geometry = 10;\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, Uint16Array, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class primitive\n *\n * @class\n * @return {vgl.primitive}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.primitive = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.primitive)) {\n    return new vgl.primitive();\n  }\n\n  /** @private */\n  var m_indicesPerPrimitive = 0,\n      m_primitiveType = 0,\n      m_indicesValueType = 0,\n      m_indices = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get indices of the primitive\n   *\n   * @returns {null}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.indices = function () {\n    return m_indices;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create indices array for the primitive\n   * @param type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.createIndices = function (type) {\n    void type;\n    // TODO Check for the type\n    m_indices = new Uint16Array();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return the number of indices\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.numberOfIndices = function () {\n    return m_indices.length;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return size of indices in bytes\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.sizeInBytes = function () {\n    return m_indices.length * Uint16Array.BYTES_PER_ELEMENT;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /*\n   * Return primitive type g\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.primitiveType = function () {\n    return m_primitiveType;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set primitive type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPrimitiveType = function (type) {\n    m_primitiveType = type;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return count of indices that form a primitives\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.indicesPerPrimitive = function () {\n    return m_indicesPerPrimitive;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set count of indices that form a primitive\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setIndicesPerPrimitive = function (count) {\n    m_indicesPerPrimitive = count;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return indices value type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.indicesValueType = function () {\n    return m_indicesValueType;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set indices value type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setIndicesValueType = function (type) {\n    m_indicesValueType = type;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set indices from a array\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setIndices = function (indicesArray) {\n    // TODO Check for the type\n    m_indices = new Uint16Array(indicesArray);\n  };\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class triangleStrip\n *\n * @returns {vgl.triangleStrip}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.triangleStrip = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.triangleStrip)) {\n    return new vgl.triangleStrip();\n  }\n\n  vgl.primitive.call(this);\n\n  this.setPrimitiveType(vgl.GL.TRIANGLE_STRIP);\n  this.setIndicesValueType(vgl.GL.UNSIGNED_SHORT);\n  this.setIndicesPerPrimitive(3);\n\n  return this;\n};\n\ninherit(vgl.triangleStrip, vgl.primitive);\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class triangles\n *\n * @returns {vgl.triangles}\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.triangles = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.triangles)) {\n    return new vgl.triangles();\n  }\n  vgl.primitive.call(this);\n\n  this.setPrimitiveType(vgl.GL.TRIANGLES);\n  this.setIndicesValueType(vgl.GL.UNSIGNED_SHORT);\n  this.setIndicesPerPrimitive(3);\n\n  return this;\n};\n\ninherit(vgl.triangles, vgl.primitive);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * create a instance of lines primitive type\n *\n * @returns {vgl.lines}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.lines = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.lines)) {\n    return new vgl.lines();\n  }\n  vgl.primitive.call(this);\n\n  this.setPrimitiveType(vgl.GL.LINES);\n  this.setIndicesValueType(vgl.GL.UNSIGNED_SHORT);\n  this.setIndicesPerPrimitive(2);\n\n  return this;\n};\ninherit(vgl.lines, vgl.primitive);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * create a instance of line strip primitive type\n *\n * @returns {vgl.lineStrip}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.lineStrip = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.lineStrip)) {\n    return new vgl.lineStrip();\n  }\n  vgl.primitive.call(this);\n\n  this.setPrimitiveType(vgl.GL.LINE_STRIP);\n  this.setIndicesValueType(vgl.GL.UNSIGNED_SHORT);\n  this.setIndicesPerPrimitive(2);\n\n  return this;\n};\ninherit(vgl.lineStrip, vgl.primitive);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class points\n *\n * @returns {vgl.points}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.points = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.points)) {\n    return new vgl.points();\n  }\n  vgl.primitive.call(this);\n\n  this.setPrimitiveType(vgl.GL.POINTS);\n  this.setIndicesValueType(vgl.GL.UNSIGNED_SHORT);\n  this.setIndicesPerPrimitive(1);\n\n  return this;\n};\n\ninherit(vgl.points, vgl.primitive);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class vertexDataP3f\n *\n * @returns {vgl.vertexDataP3f}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.vertexDataP3f = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.vertexDataP3f)) {\n    return new vgl.vertexDataP3f();\n  }\n\n  /** @private */\n  this.m_position = [];\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class vertexDataP3N3f\n *\n * @class\n * @returns {vgl.vertexDataP3N3f}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.vertexDataP3N3f = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.vertexDataP3N3f)) {\n    return new vgl.vertexDataP3N3f();\n  }\n\n  this.m_position = [];\n  this.m_normal = [];\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class vertexDataP3T3f\n *\n * @class\n * @returns {vgl.vertexDataP3T3f}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.vertexDataP3T3f = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.vertexDataP3T3f)) {\n    return new vgl.vertexDataP3T3f();\n  }\n\n  this.m_position = [];\n  this.m_texCoordinate = [];\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceData\n * @class\n * @returns {vgl.sourceData}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceData = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceData)) {\n    return new vgl.sourceData(arg);\n  }\n\n  arg = arg || {};\n  var m_attributesMap = {},\n      m_data = [],\n      m_name = arg.name || 'Source ' + new Date().toISOString(),\n\n      ////////////////////////////////////////////////////////////////////////\n      /**\n       * Attribute data for the source\n       */\n      ////////////////////////////////////////////////////////////////////////\n      vglAttributeData = function () {\n        // Number of components per group\n        // Type of data type (GL_FLOAT etc)\n        this.m_numberOfComponents = 0;\n        // Size of data type\n        this.m_dataType = 0;\n        this.m_dataTypeSize = 0;\n        // Specifies whether fixed-point data values should be normalized\n        // (true) or converted directly as fixed-point values (false)\n        // when they are accessed.\n        this.m_normalized = false;\n        // Strides for each attribute.\n        this.m_stride = 0;\n        // Offset\n        this.m_offset = 0;\n      };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return raw data for this source\n   *\n   * @returns {Array or Float32Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.data = function () {\n    return m_data;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return raw data for this source\n   *\n   * @returns {Array or Float32Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getData = function () {\n    return this.data();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * If the raw data is not a Float32Array, convert it to one.  Then, return\n   * raw data for this source\n   *\n   * @returns {Float32Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.dataToFloat32Array = function () {\n    if (!(m_data instanceof Float32Array)) {\n      m_data = new Float32Array(m_data);\n    }\n    return m_data;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set data for this source\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setData = function (data) {\n    if (!(data instanceof Array) && !(data instanceof Float32Array)) {\n      console.log('[error] Requires array');\n      return;\n    }\n    if (data instanceof Float32Array) {\n      m_data = data;\n    } else {\n      m_data = data.slice(0);\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add new attribute data to the source\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addAttribute = function (key, dataType, sizeOfDataType, offset, stride,\n                               noOfComponents, normalized) {\n\n    if (!m_attributesMap.hasOwnProperty(key)) {\n      /* jshint newcap: false */\n      //jscs:disable requireCapitalizedConstructors\n      var newAttr = new vglAttributeData();\n      //jscs:enable requireCapitalizedConstructors\n      /* jshint newcap: true */\n      newAttr.m_dataType = dataType;\n      newAttr.m_dataTypeSize = sizeOfDataType;\n      newAttr.m_offset = offset;\n      newAttr.m_stride = stride;\n      newAttr.m_numberOfComponents = noOfComponents;\n      newAttr.m_normalized = normalized;\n      m_attributesMap[key] = newAttr;\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return size of the source data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.sizeOfArray = function () {\n    return Object.size(m_data);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return length of array\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.lengthOfArray = function () {\n    return m_data.length;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return size of the source data in bytes\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  /*\n    * TODO: code below is probably wrong.\n    *   Example:\n    *            format P3N3f\n    *            m_data = [ 1, 2, 3, 4, 5, 6 ]; // contains one vertex,\n    *                                    // one normal, m_data.length == 6\n    *\n    *       The inner loop computes:\n    *             sizeInBytes += 3 * 4; // for position\n    *             sizeInBytes += 3 * 4; // for normal\n    *\n    *        Then sizeInBytes *= 6; // m_data.length == 6\n    *        which gives sizeInBytes == 144 bytes when it should have been 4*6 = 24\n    */\n  this.sizeInBytes = function () {\n    var sizeInBytes = 0,\n        keys = this.keys(), i;\n\n    for (i = 0; i < keys.length; i += 1) {\n      sizeInBytes += this.attributeNumberOfComponents(keys[i]) *\n                     this.sizeOfAttributeDataType(keys[i]);\n    }\n\n    sizeInBytes *= this.sizeOfArray();\n\n    return sizeInBytes;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if there is attribute exists of a given key type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasKey = function (key) {\n    return m_attributesMap.hasOwnProperty(key);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return keys of all attributes\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.keys = function () {\n    return Object.keys(m_attributesMap);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return number of attributes of source data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.numberOfAttributes = function () {\n    return Object.size(m_attributesMap);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return number of components of the attribute data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.attributeNumberOfComponents = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_numberOfComponents;\n    }\n\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return if the attribute data is normalized\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.normalized = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_normalized;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return size of the attribute data type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.sizeOfAttributeDataType = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_dataTypeSize;\n    }\n\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return attribute data type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.attributeDataType = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_dataType;\n    }\n\n    return undefined;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return attribute offset\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.attributeOffset = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_offset;\n    }\n\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return attribute stride\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.attributeStride = function (key) {\n    if (m_attributesMap.hasOwnProperty(key)) {\n      return m_attributesMap[key].m_stride;\n    }\n\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Virtual function to insert new vertex data at the end\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.pushBack = function (vertexData) {\n    void vertexData;\n    // Should be implemented by the base class\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Insert new data block to the raw data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.insert = function (data) {\n    var i;\n\n    //m_data = m_data.concat(data); //no, slow on Safari\n    /* If we will are given a Float32Array and don't have any other data, use\n     * it directly. */\n    if (!m_data.length && data.length && data instanceof Float32Array) {\n      m_data = data;\n      return;\n    }\n    /* If our internal array is immutable and we will need to change it, create\n     * a regular mutable array from it. */\n    if (!m_data.slice && (m_data.length || !data.slice)) {\n      m_data = Array.prototype.slice.call(m_data);\n    }\n    if (!data.length) {\n      /* data is a singular value, so append it to our array */\n      m_data[m_data.length] = data;\n    } else {\n      /* We don't have any data currently, so it is faster to copy the data\n       * using slice. */\n      if (!m_data.length && data.slice) {\n        m_data = data.slice(0);\n      } else {\n        for (i = 0; i < data.length; i += 1) {\n          m_data[m_data.length] = data[i];\n        }\n      }\n    }\n  };\n\n  this.insertAt = function (index, data) {\n    var i;\n\n    if (!data.length) {\n      m_data[index] = data;\n    } else {\n      for (i = 0; i < data.length; i += 1) {\n        m_data[index * data.length + i] = data[i];\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return name of the source data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.name = function () {\n    return m_name;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set name of the source data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setName = function (name) {\n    m_name = name;\n  };\n\n  return this;\n};\n\nvgl.sourceDataAnyfv = function (size, key, arg) {\n  'use strict';\n  if (!(this instanceof vgl.sourceDataAnyfv)) {\n    return new vgl.sourceDataAnyfv(size, key, arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n  this.addAttribute(key, vgl.GL.FLOAT,\n                    4, 0, size * 4, size, false);\n\n  this.pushBack = function (value) {\n    this.insert(value);\n  };\n\n  return this;\n};\ninherit(vgl.sourceDataAnyfv, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataP3T3f\n *\n * @returns {vgl.sourceDataP3T3f}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataP3T3f = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataP3T3f)) {\n    return new vgl.sourceDataP3T3f(arg);\n  }\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Position, vgl.GL.FLOAT, 4, 0, 6 * 4, 3,\n                    false);\n  this.addAttribute(vgl.vertexAttributeKeys.TextureCoordinate, vgl.GL.FLOAT, 4, 12,\n                    6 * 4, 3, false);\n\n  this.pushBack = function (value) {\n    this.insert(value.m_position);\n    this.insert(value.m_texCoordinate);\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataP3T3f, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataP3N3f\n *\n * @returns {vgl.sourceDataP3N3f}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataP3N3f = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataP3N3f)) {\n    return new vgl.sourceDataP3N3f(arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Position, vgl.GL.FLOAT, 4, 0, 6 * 4, 3,\n                    false);\n  this.addAttribute(vgl.vertexAttributeKeys.Normal, vgl.GL.FLOAT, 4, 12, 6 * 4, 3,\n                    false);\n\n  this.pushBack = function (value) {\n    this.insert(value.m_position);\n    this.insert(value.m_normal);\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataP3N3f, vgl.sourceData);\n\n/////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataP3fv\n *\n * @returns {vgl.sourceDataP3fv}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataP3fv = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataP3fv)) {\n    return new vgl.sourceDataP3fv(arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Position, vgl.GL.FLOAT, 4, 0, 3 * 4, 3,\n                    false);\n\n  this.pushBack = function (value) {\n    this.insert(value);\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataP3fv, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataT2fv\n *\n * @returns {vgl.sourceDataT2fv}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataT2fv = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataT2fv)) {\n    return new vgl.sourceDataT2fv(arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.TextureCoordinate, vgl.GL.FLOAT, 4, 0,\n                    2 * 4, 2, false);\n\n  this.pushBack = function (value) {\n    this.insert(value);\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataT2fv, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataC3fv\n *\n * @returns {vgl.sourceDataC3fv}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataC3fv = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataC3fv)) {\n    return new vgl.sourceDataC3fv(arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Color, vgl.GL.FLOAT, 4, 0, 3 * 4, 3, false);\n\n  this.pushBack = function (value) {\n    this.insert(value);\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataC3fv, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataSf meant to hold scalar float values\n *\n * @class\n * @returns {vgl.sourceDataSf}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataSf = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataSf)) {\n    return new vgl.sourceDataSf(arg);\n  }\n\n  var m_min = null,\n      m_max = null,\n      m_fixedmin = null,\n      m_fixedmax = null;\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Scalar, vgl.GL.FLOAT, 4, 0, 4, 1, false);\n\n  this.pushBack = function (value) {\n    if (m_max === null || value > m_max) {\n      m_max = value;\n    }\n    if (m_min === null || value < m_min) {\n      m_min = value;\n    }\n    //this.insert(value); //no, slow on Safari\n    this.data()[this.data().length] = value;\n  };\n\n  this.insertAt = function (index, value) {\n    if (m_max === null || value > m_max) {\n      m_max = value;\n    }\n    if (m_min === null || value < m_min) {\n      m_min = value;\n    }\n    //call superclass ??\n    //vgl.sourceData.insertAt.call(this, index, value);\n    this.data()[index] = value;\n  };\n\n  this.scalarRange = function () {\n    if (m_fixedmin === null || m_fixedmax === null) {\n      return [m_min, m_max];\n    }\n\n    return [m_fixedmin, m_fixedmax];\n  };\n\n  this.setScalarRange = function (min, max) {\n    m_fixedmin = min;\n    m_fixedmax = max;\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataSf, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class sourceDataDf meant to hold data float values\n *\n * This source array is the best way to pass a array of floats to the shader\n * that has one entry for each of the vertices.\n *\n * @class\n * @returns {vgl.sourceDataDf}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.sourceDataDf = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.sourceDataDf)) {\n    return new vgl.sourceDataDf(arg);\n  }\n\n  vgl.sourceData.call(this, arg);\n\n  this.addAttribute(vgl.vertexAttributeKeys.Scalar, vgl.GL.FLOAT,\n                    4, 0, 4, 1, false);\n\n  this.pushBack = function (value) {\n    this.data()[this.data().length] = value;\n  };\n\n  this.insertAt = function (index, value) {\n    this.data()[index] = value;\n  };\n\n  return this;\n};\n\ninherit(vgl.sourceDataDf, vgl.sourceData);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class geometryData\n *\n * @class\n * @returns {vgl.geometryData}\n */\n/////////////////////////////////////////////////////////////////////////////\nvgl.geometryData = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.geometryData)) {\n    return new vgl.geometryData();\n  }\n  vgl.data.call(this);\n\n  /** @private */\n  var m_name = '',\n      m_primitives = [],\n      m_sources = [],\n      m_bounds = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0],\n      m_computeBoundsTimestamp = vgl.timestamp(),\n      m_boundsDirtyTimestamp = vgl.timestamp();\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return type\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.type = function () {\n    return vgl.data.geometry;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return ID of the geometry data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.name = function () {\n    return m_name;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set name of the geometry data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setName = function (name) {\n    m_name = name;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add new source\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addSource = function (source, sourceName) {\n    // @todo Check if the incoming source has duplicate keys\n\n    if (sourceName !== undefined) {\n      source.setName(sourceName);\n    }\n    // NOTE This might not work on IE8 or lower\n    if (m_sources.indexOf(source) === -1) {\n      m_sources.push(source);\n\n      if (source.hasKey(vgl.vertexAttributeKeys.Position)) {\n        m_boundsDirtyTimestamp.modified();\n      }\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return source for a given index. Returns 0 if not found.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.source = function (index) {\n    if (index < m_sources.length) {\n      return m_sources[index];\n    }\n\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return source with a specified name.  Returns 0 if not found.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.sourceByName = function (sourceName) {\n    for (var i = 0; i < m_sources.length; i += 1) {\n      if (m_sources[i].name() === sourceName) {\n        return m_sources[i];\n      }\n    }\n    return 0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return number of sources\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.numberOfSources = function () {\n    return m_sources.length;\n  };\n\n  /**\n   * Return source data given a key\n   */\n  this.sourceData = function (key) {\n    var i;\n\n    for (i = 0; i < m_sources.length; i += 1) {\n      if (m_sources[i].hasKey(key)) {\n        return m_sources[i];\n      }\n    }\n\n    return null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add new primitive\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addPrimitive = function (primitive) {\n    m_primitives.push(primitive);\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return primitive for a given index. Returns null if not found.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.primitive = function (index) {\n    if (index < m_primitives.length) {\n      return m_primitives[index];\n    }\n\n    return null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return number of primitives\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.numberOfPrimitives = function () {\n    return m_primitives.length;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return bounds [minX, maxX, minY, maxY, minZ, maxZ]\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bounds = function () {\n    if (m_boundsDirtyTimestamp.getMTime() > m_computeBoundsTimestamp.getMTime()) {\n      this.computeBounds();\n    }\n    return m_bounds;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if bounds are dirty or mark them as such.\n   *\n   * @param dirty: true to set bounds as dirty.\n   * Return true if bounds are dirty.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.boundsDirty = function (dirty) {\n    if (dirty) {\n      m_boundsDirtyTimestamp.modified();\n    }\n    return m_boundsDirtyTimestamp.getMTime() > m_computeBoundsTimestamp.getMTime();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Reset bounds\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetBounds = function () {\n    m_bounds[0] = 0.0;\n    m_bounds[1] = 0.0;\n    m_bounds[2] = 0.0;\n    m_bounds[3] = 0.0;\n    m_bounds[4] = 0.0;\n    m_bounds[5] = 0.0;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set bounds\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setBounds = function (minX, maxX, minY, maxY, minZ, maxZ) {\n    m_bounds[0] = minX;\n    m_bounds[1] = maxX;\n    m_bounds[2] = minY;\n    m_bounds[3] = maxY;\n    m_bounds[4] = minZ;\n    m_bounds[5] = maxZ;\n\n    m_computeBoundsTimestamp.modified();\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute bounds\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n    if (m_boundsDirtyTimestamp.getMTime() > m_computeBoundsTimestamp.getMTime()) {\n      var attr = vgl.vertexAttributeKeys.Position,\n          sourceData = this.sourceData(attr),\n          data = sourceData.data(),\n          numberOfComponents = sourceData.attributeNumberOfComponents(attr),\n          stride = sourceData.attributeStride(attr),\n          offset = sourceData.attributeOffset(attr),\n          sizeOfDataType = sourceData.sizeOfAttributeDataType(attr),\n          count = data.length,\n          j, ib, jb, maxv, minv,\n          value = null,\n          vertexIndex;\n\n      // We advance by index, not by byte\n      stride /= sizeOfDataType;\n      offset /= sizeOfDataType;\n\n      this.resetBounds();\n\n      for (j = 0; j < numberOfComponents; j += 1) {\n        ib = j * 2;\n        jb = j * 2 + 1;\n        if (count) {\n          maxv = minv = m_bounds[jb] = data[offset + j];\n        } else {\n          maxv = minv = 0;\n        }\n        for (vertexIndex = offset + stride + j; vertexIndex < count;\n             vertexIndex += stride) {\n          value = data[vertexIndex];\n          if (value > maxv) {\n            maxv = value;\n          }\n          if (value < minv) {\n            minv = value;\n          }\n        }\n        m_bounds[ib] = minv; m_bounds[jb] = maxv;\n      }\n\n      m_computeBoundsTimestamp.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Returns the vertex closest to a given position\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.findClosestVertex = function (point) {\n    var attr = vgl.vertexAttributeKeys.Position,\n        sourceData = this.sourceData(attr),\n        sizeOfDataType = sourceData.sizeOfAttributeDataType(attr),\n        numberOfComponents = sourceData.attributeNumberOfComponents(attr),\n        data = sourceData.data(),\n        stride = sourceData.attributeStride(attr) / sizeOfDataType,\n        offset = sourceData.attributeOffset(attr) / sizeOfDataType,\n        minDist = Number.MAX_VALUE,\n        minIndex = null,\n        vi, vPos, dx, dy, dz, dist, i;\n\n    // assume positions are always triplets\n    if (numberOfComponents !== 3) {\n      console.log('[warning] Find closest vertex assumes three' +\n        'component vertex ');\n    }\n\n    if (!point.z) {\n      point = {x: point.x, y: point.y, z: 0};\n    }\n\n    for (vi = offset, i = 0; vi < data.length; vi += stride, i += 1) {\n      vPos = [data[vi],\n              data[vi + 1],\n              data[vi + 2]];\n\n      dx = vPos[0] - point.x;\n      dy = vPos[1] - point.y;\n      dz = vPos[2] - point.z;\n      dist = Math.sqrt(dx * dx + dy * dy + dz * dz);\n      if (dist < minDist) {\n        minDist = dist;\n        minIndex = i;\n      }\n    }\n    return minIndex;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Returns the requested vertex position\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getPosition = function (index) {\n    var attr = vgl.vertexAttributeKeys.Position,\n        sourceData = this.sourceData(attr),\n        sizeOfDataType = sourceData.sizeOfAttributeDataType(attr),\n        numberOfComponents = sourceData.attributeNumberOfComponents(attr),\n        data = sourceData.data(),\n        stride = sourceData.attributeStride(attr) / sizeOfDataType,\n        offset = sourceData.attributeOffset(attr) / sizeOfDataType;\n\n    // assume positions are always triplets\n    if (numberOfComponents !== 3) {\n      console.log('[warning] getPosition assumes three component data');\n    }\n\n    return [data[offset + index * stride],\n            data[offset + index * stride + 1],\n            data[offset + index * stride + 2]];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Returns the scalar corresponding to a given vertex index\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getScalar = function (index) {\n    var attr = vgl.vertexAttributeKeys.Scalar,\n        sourceData = this.sourceData(attr),\n        sizeOfDataType, data, stride, offset;\n\n    if (!sourceData) {\n      return null;\n    }\n\n    sizeOfDataType = sourceData.sizeOfAttributeDataType(attr);\n    data = sourceData.data();\n    stride = sourceData.attributeStride(attr) / sizeOfDataType;\n    offset = sourceData.attributeOffset(attr) / sizeOfDataType;\n\n    if (index * stride + offset >= data.length) {\n      console.log('access out of bounds in getScalar');\n    }\n\n    return data[index * stride + offset];\n  };\n\n  return this;\n};\n\ninherit(vgl.geometryData, vgl.data);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, Float32Array, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class mapper\n *\n * @class\n * @returns {vgl.mapper}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.mapper = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.mapper)) {\n    return new vgl.mapper(arg);\n  }\n  vgl.boundingObject.call(this);\n\n  /** @private */\n  arg = arg || {};\n\n  var m_color = [0.0, 1.0, 1.0],\n      m_geomData = null,\n      m_buffers = [],\n      m_bufferVertexAttributeMap = {},\n      m_dynamicDraw = arg.dynamicDraw === undefined ? false : arg.dynamicDraw,\n      m_glCompileTimestamp = vgl.timestamp(),\n      m_context = null,\n      m_this = this;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Delete cached VBO if any\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.deleteVertexBufferObjects = function (renderState) {\n    var i;\n    var context = m_context;\n    if (renderState) {\n      context = renderState.m_context;\n    }\n    if (context) {\n      for (i = 0; i < m_buffers.length; i += 1) {\n        context.deleteBuffer(m_buffers[i]);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create new VBO for all its geometryData sources and primitives\n   *\n   * @private\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  function createVertexBufferObjects(renderState) {\n    if (m_geomData) {\n      if (renderState) {\n        m_context = renderState.m_context;\n      }\n      var numberOfSources = m_geomData.numberOfSources(),\n          i, j, k, bufferId = null, keys, ks, numberOfPrimitives, data;\n\n      for (i = 0; i < numberOfSources; i += 1) {\n        bufferId = m_context.createBuffer();\n        m_context.bindBuffer(vgl.GL.ARRAY_BUFFER, bufferId);\n        data = m_geomData.source(i).data();\n        if (!(data instanceof Float32Array)) {\n          data = new Float32Array(data);\n        }\n        m_context.bufferData(vgl.GL.ARRAY_BUFFER, data,\n                      m_dynamicDraw ? vgl.GL.DYNAMIC_DRAW :\n                      vgl.GL.STATIC_DRAW);\n\n        keys = m_geomData.source(i).keys();\n        ks = [];\n\n        for (j = 0; j < keys.length; j += 1) {\n          ks.push(keys[j]);\n        }\n\n        m_bufferVertexAttributeMap[i] = ks;\n        m_buffers[i] = bufferId;\n      }\n\n      numberOfPrimitives = m_geomData.numberOfPrimitives();\n      for (k = 0; k < numberOfPrimitives; k += 1) {\n        bufferId = m_context.createBuffer();\n        m_context.bindBuffer(vgl.GL.ARRAY_BUFFER, bufferId);\n        m_context.bufferData(vgl.GL.ARRAY_BUFFER,\n          m_geomData.primitive(k).indices(), vgl.GL.STATIC_DRAW);\n        m_buffers[i] = bufferId;\n        i += 1;\n      }\n\n      m_glCompileTimestamp.modified();\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Clear cache related to buffers\n   *\n   * @private\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  function cleanUpDrawObjects(renderState) {\n    void renderState;\n    m_bufferVertexAttributeMap = {};\n    m_buffers = [];\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Setup draw objects; Delete old ones and create new ones\n   *\n   * @private\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  function setupDrawObjects(renderState) {\n    // Delete buffer objects from past if any.\n    m_this.deleteVertexBufferObjects(renderState);\n\n    // Clear any cache related to buffers\n    cleanUpDrawObjects(renderState);\n\n    // Now construct the new ones.\n    createVertexBufferObjects(renderState);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute bounds of the data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n    if (m_geomData === null || typeof m_geomData === 'undefined') {\n      this.resetBounds();\n      return;\n    }\n\n    var computeBoundsTimestamp = this.computeBoundsTimestamp(),\n        boundsDirtyTimestamp = this.boundsDirtyTimestamp(),\n        geomBounds = null;\n\n    if (boundsDirtyTimestamp.getMTime() > computeBoundsTimestamp.getMTime()) {\n      geomBounds = m_geomData.bounds();\n\n      this.setBounds(geomBounds[0], geomBounds[1], geomBounds[2],\n        geomBounds[3], geomBounds[4], geomBounds[5]);\n\n      computeBoundsTimestamp.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get solid color of the geometry\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.color = function () {\n    return m_color;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set solid color of the geometry. Default is teal [1.0, 1.0, 1.0]\n   *\n   * @param r Red component of the color [0.0 - 1.0]\n   * @param g Green component of the color [0.0 - 1.0]\n   * @param b Blue component of the color [0.0 - 1.0]\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setColor = function (r, g, b) {\n    m_color[0] = r;\n    m_color[1] = g;\n    m_color[2] = b;\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return stored geometry data if any\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.geometryData = function () {\n    return m_geomData;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Connect mapper to its geometry data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setGeometryData = function (geom) {\n    if (m_geomData !== geom) {\n      m_geomData = geom;\n\n      this.modified();\n      this.boundsDirtyTimestamp().modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update the buffer used for a named source.\n   *\n   * @param {String} sourceName The name of the source to update.\n   * @param {Object[] or Float32Array} values The values to use for the source.\n   *    If not specified, use the source's own buffer.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.updateSourceBuffer = function (sourceName, values, renderState) {\n    if (renderState) {\n      m_context = renderState.m_context;\n    }\n    if (!m_context) {\n      return false;\n    }\n    var bufferIndex = -1;\n    for (var i = 0; i < m_geomData.numberOfSources(); i += 1) {\n      if (m_geomData.source(i).name() === sourceName) {\n        bufferIndex = i;\n        break;\n      }\n    }\n    if (bufferIndex < 0 || bufferIndex >= m_buffers.length) {\n      return false;\n    }\n    if (!values) {\n      values = m_geomData.source(i).dataToFloat32Array();\n    }\n    m_context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_buffers[bufferIndex]);\n    if (values instanceof Float32Array) {\n      m_context.bufferSubData(vgl.GL.ARRAY_BUFFER, 0, values);\n    } else {\n      m_context.bufferSubData(vgl.GL.ARRAY_BUFFER, 0,\n                              new Float32Array(values));\n    }\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get the buffer used for a named source.  If the current buffer isn't a\n   * Float32Array, it is converted to one.  This array can then be modified\n   * directly, after which updateSourceBuffer can be called to update the\n   * GL array.\n   *\n   * @param {String} sourceName The name of the source to update.\n   * @returns {Float32Array} An array used for this source.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getSourceBuffer = function (sourceName) {\n    var source = m_geomData.sourceByName(sourceName);\n    if (!source) {\n      return new Float32Array();\n    }\n    return source.dataToFloat32Array();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the mapper\n   *\n   * @param {object} renderState: the current renderering state object.\n   * @param {boolean} noUndoBindVertexData: if true, do not unbind vertex data.\n   *    This may be desirable if the render function is subclassed.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function (renderState, noUndoBindVertexData) {\n    if (this.getMTime() > m_glCompileTimestamp.getMTime() ||\n        renderState.m_contextChanged) {\n      setupDrawObjects(renderState);\n    }\n    m_context = renderState.m_context;\n\n    // Fixed vertex color\n    m_context.vertexAttrib3fv(vgl.vertexAttributeKeys.Color, this.color());\n\n    // TODO Use renderState\n    var bufferIndex = 0,\n        j = 0, i, noOfPrimitives = null, primitive = null;\n\n    for (i in m_bufferVertexAttributeMap) {\n      if (m_bufferVertexAttributeMap.hasOwnProperty(i)) {\n        m_context.bindBuffer(vgl.GL.ARRAY_BUFFER,\n                             m_buffers[bufferIndex]);\n        for (j = 0; j < m_bufferVertexAttributeMap[i].length; j += 1) {\n          renderState.m_material\n              .bindVertexData(renderState, m_bufferVertexAttributeMap[i][j]);\n        }\n        bufferIndex += 1;\n      }\n    }\n\n    noOfPrimitives = m_geomData.numberOfPrimitives();\n    for (j = 0; j < noOfPrimitives; j += 1, bufferIndex += 1) {\n      primitive = m_geomData.primitive(j);\n      if (!primitive.numberOfIndices()) {\n        continue;\n      }\n      m_context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_buffers[bufferIndex]);\n      switch (primitive.primitiveType()) {\n        case vgl.GL.POINTS:\n          m_context.drawArrays(vgl.GL.POINTS, 0, primitive.numberOfIndices());\n          break;\n        case vgl.GL.LINES:\n          m_context.drawArrays(vgl.GL.LINES, 0, primitive.numberOfIndices());\n          break;\n        case vgl.GL.LINE_STRIP:\n          m_context.drawArrays(vgl.GL.LINE_STRIP, 0, primitive.numberOfIndices());\n          break;\n        case vgl.GL.TRIANGLES:\n          m_context.drawArrays(vgl.GL.TRIANGLES, 0, primitive.numberOfIndices());\n          break;\n        case vgl.GL.TRIANGLE_STRIP:\n          m_context.drawArrays(vgl.GL.TRIANGLE_STRIP, 0, primitive.numberOfIndices());\n          break;\n      }\n      m_context.bindBuffer(vgl.GL.ARRAY_BUFFER, null);\n    }\n\n    /* If we are rendering multiple features in the same context, we must\n     * unbind the vertex data to make sure the next feature has a known state.\n     * This is optional.\n     */\n    if (!noUndoBindVertexData) {\n      this.undoBindVertexData(renderState);\n    }\n  };\n\n  /**\n   * Unbind the vertex data,\n   */\n  this.undoBindVertexData = function (renderState) {\n    var i, j;\n\n    for (i in m_bufferVertexAttributeMap) {\n      if (m_bufferVertexAttributeMap.hasOwnProperty(i)) {\n        for (j = 0; j < m_bufferVertexAttributeMap[i].length; j += 1) {\n          renderState.m_material\n              .undoBindVertexData(renderState, m_bufferVertexAttributeMap[i][j]);\n        }\n      }\n    }\n  };\n\n  return this;\n};\n\ninherit(vgl.mapper, vgl.boundingObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\nvgl.groupMapper = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.groupMapper)) {\n    return new vgl.groupMapper();\n  }\n  vgl.mapper.call(this);\n\n  /** @private */\n  var m_createMappersTimestamp = vgl.timestamp(),\n      m_mappers = [],\n      m_geomDataArray = [];\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return stored geometry data if any\n   *\n   * @param index optional\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.geometryData = function (index) {\n    if (index !== undefined && index < m_geomDataArray.length) {\n      return m_geomDataArray[index];\n    }\n\n    if (m_geomDataArray.length > 0) {\n      return m_geomDataArray[0];\n    }\n\n    return null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Connect mapper to its geometry data\n   *\n   * @param geom {vgl.geomData}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setGeometryData = function (geom) {\n    if (m_geomDataArray.length === 1) {\n      if (m_geomDataArray[0] === geom) {\n        return;\n      }\n    }\n    m_geomDataArray = [];\n    m_geomDataArray.push(geom);\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return stored geometry data array if any\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.geometryDataArray = function () {\n    return m_geomDataArray;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Connect mapper to its geometry data\n   *\n   * @param geoms {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setGeometryDataArray = function (geoms) {\n    if (geoms instanceof Array) {\n      if (m_geomDataArray !== geoms) {\n        m_geomDataArray = [];\n        m_geomDataArray = geoms;\n        this.modified();\n        return true;\n      }\n    } else {\n      console.log('[error] Requies array of geometry data');\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute bounds of the data\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeBounds = function () {\n    if (m_geomDataArray === null ||\n        m_geomDataArray === undefined) {\n      this.resetBounds();\n      return;\n    }\n\n    var computeBoundsTimestamp = this.computeBoundsTimestamp(),\n        boundsDirtyTimestamp = this.boundsDirtyTimestamp(),\n        m_bounds = this.bounds(),\n        geomBounds = null,\n        i = null;\n\n    if (boundsDirtyTimestamp.getMTime() >\n        computeBoundsTimestamp.getMTime()) {\n\n      for (i = 0; i < m_geomDataArray.length; i += 1) {\n        geomBounds = m_geomDataArray[i].bounds();\n\n        if (m_bounds[0] > geomBounds[0]) {\n          m_bounds[0] = geomBounds[0];\n        }\n        if (m_bounds[1] < geomBounds[1]) {\n          m_bounds[1] = geomBounds[1];\n        }\n        if (m_bounds[2] > geomBounds[2]) {\n          m_bounds[2] = geomBounds[2];\n        }\n        if (m_bounds[3] < geomBounds[3]) {\n          m_bounds[3] = geomBounds[3];\n        }\n        if (m_bounds[4] > geomBounds[4]) {\n          m_bounds[4] = geomBounds[4];\n        }\n        if (m_bounds[5] < geomBounds[5]) {\n          m_bounds[5] = geomBounds[5];\n        }\n      }\n\n      this.modified();\n      computeBoundsTimestamp.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the mapper\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function (renderState) {\n    var i = null;\n\n    if (this.getMTime() > m_createMappersTimestamp.getMTime()) {\n      // NOTE Hoping that it will release the graphics resources\n      for (i = 0; i < m_geomDataArray.length; i += 1) {\n        m_mappers.push(vgl.mapper());\n        m_mappers[i].setGeometryData(m_geomDataArray[i]);\n      }\n      m_createMappersTimestamp.modified();\n    }\n\n    for (i = 0; i < m_mappers.length; i += 1) {\n      m_mappers[i].render(renderState);\n    }\n  };\n\n  return this;\n};\n\ninherit(vgl.groupMapper, vgl.mapper);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\nvgl.materialAttributeType = {\n  'Undefined' : 0x0,\n  'ShaderProgram' : 0x1,\n  'Texture' : 0x2,\n  'Blend' : 0x3,\n  'Depth' : 0x4\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class materialAttribute\n *\n * @class\n * @param type\n * @returns {vgl.materialAttribute}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.materialAttribute = function (type) {\n  'use strict';\n\n  if (!(this instanceof vgl.materialAttribute)) {\n    return new vgl.materialAttribute(type);\n  }\n  vgl.graphicsObject.call(this);\n\n  /** @private */\n  var m_this = this,\n      m_type = type,\n      m_enabled = true;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return tyep of the material attribute\n   *\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.type = function () {\n    return m_type;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return if material attribute is enabled or not\n   *\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.enabled = function () {\n    return m_enabled;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind and activate vertex specific data\n   *\n   * @param renderState\n   * @param key\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bindVertexData = function (renderState, key) {\n    renderState = renderState; /* unused parameter */\n    key = key; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind and deactivate vertex specific data\n   *\n   * @param renderState\n   * @param key\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.undoBindVertexData = function (renderState, key) {\n    renderState = renderState; /* unused parameter */\n    key = key; /* unused parameter */\n    return false;\n  };\n\n  return m_this;\n};\n\ninherit(vgl.materialAttribute, vgl.graphicsObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of clas blendFunction\n *\n * @class\n * @param source\n * @param destination\n * @returns {vgl.blendFunction}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.blendFunction = function (source, destination) {\n  'use strict';\n\n  if (!(this instanceof vgl.blendFunction)) {\n    return new vgl.blendFunction(source, destination);\n  }\n\n  /** @private */\n  var m_source = source,\n      m_destination = destination;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Apply blend function to the current state\n   *\n   * @param {vgl.renderState}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.apply = function (renderState) {\n    renderState.m_context.blendFuncSeparate(m_source, m_destination,\n                         vgl.GL.ONE, vgl.GL.ONE_MINUS_SRC_ALPHA);\n  };\n\n  return this;\n};\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class blend\n *\n * @returns {vgl.blend}\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.blend = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.blend)) {\n    return new vgl.blend();\n  }\n  vgl.materialAttribute.call(\n    this, vgl.materialAttributeType.Blend);\n\n  /** @private */\n  var m_wasEnabled = false,\n      m_blendFunction = vgl.blendFunction(vgl.GL.SRC_ALPHA,\n                                          vgl.GL.ONE_MINUS_SRC_ALPHA);\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind blend attribute\n   *\n   * @param {vgl.renderState}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bind = function (renderState) {\n    m_wasEnabled = renderState.m_context.isEnabled(vgl.GL.BLEND);\n\n    if (this.enabled()) {\n      renderState.m_context.enable(vgl.GL.BLEND);\n      m_blendFunction.apply(renderState);\n    } else {\n      renderState.m_context.disable(vgl.GL.BLEND);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind blend attribute\n   *\n   * @param {vgl.renderState}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.undoBind = function (renderState) {\n    if (m_wasEnabled) {\n      renderState.m_context.enable(vgl.GL.BLEND);\n    } else {\n      renderState.m_context.disable(vgl.GL.BLEND);\n    }\n\n    return true;\n  };\n\n  return this;\n};\n\ninherit(vgl.blend, vgl.materialAttribute);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class material\n *\n * @class\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.material = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.material)) {\n    return new vgl.material();\n  }\n  vgl.graphicsObject.call(this);\n\n  // / Private member variables\n  var m_this = this,\n      m_shaderProgram = new vgl.shaderProgram(),\n      m_binNumber = 100,\n      m_textureAttributes = {},\n      m_attributes = {};\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return bin number for the material\n   *\n   * @default 100\n   * @returns {number}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.binNumber = function () {\n    return m_binNumber;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set bin number for the material\n   *\n   * @param binNo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setBinNumber = function (binNo) {\n    m_binNumber = binNo;\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if incoming attribute already exists in the material\n   *\n   * @param attr\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.exists = function (attr) {\n    if (attr.type() === vgl.materialAttributeType.Texture) {\n      return m_textureAttributes.hasOwnProperty(attr.textureUnit());\n    }\n    return m_attributes.hasOwnProperty(attr.type());\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get uniform given a name\n\n   * @param name Uniform name\n   * @returns {vgl.uniform}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.uniform = function (name) {\n    return m_shaderProgram ? m_shaderProgram.uniform(name) : null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get material attribute\n\n   * @param {number} type attribute type\n   * @param {number} textureUnit attribute texture unit if type is Texture.\n   * @returns {vgl.materialAttribute}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.attribute = function (type, textureUnit) {\n    if (m_attributes.hasOwnProperty(type)) {\n      return m_attributes[type];\n    }\n\n    if (type === vgl.materialAttributeType.Texture && m_textureAttributes.hasOwnProperty(textureUnit)) {\n      return m_textureAttributes[textureUnit];\n    }\n\n    return null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set a new attribute for the material\n   *\n   * This method replace any existing attribute except for textures as\n   * materials can have multiple textures.\n   *\n   * @param attr\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setAttribute = function (attr) {\n    if (attr.type() === vgl.materialAttributeType.Texture) {\n      if (m_textureAttributes[attr.textureUnit()] === attr) {\n        return false;\n      }\n      m_textureAttributes[attr.textureUnit()] = attr;\n      m_this.modified();\n      return true;\n    }\n\n    if (m_attributes[attr.type()] === attr) {\n      return false;\n    }\n\n    // Shader is a very special attribute\n    if (attr.type() === vgl.materialAttributeType.ShaderProgram) {\n      m_shaderProgram = attr;\n    }\n\n    m_attributes[attr.type()] = attr;\n    m_this.modified();\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add a new attribute to the material.\n   *\n   * @param attr\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addAttribute = function (attr) {\n    if (m_this.exists(attr)) {\n      return false;\n    }\n\n    if (attr.type() === vgl.materialAttributeType.Texture) {\n      // TODO Currently we don't check if we are replacing or not.\n      // It would be nice to have a flag for it.\n      m_textureAttributes[attr.textureUnit()] = attr;\n      m_this.modified();\n      return true;\n    }\n\n    // Shader is a very special attribute\n    if (attr.type() === vgl.materialAttributeType.ShaderProgram) {\n      m_shaderProgram = attr;\n    }\n\n    m_attributes[attr.type()] = attr;\n    m_this.modified();\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return shader program used by the material\n   *\n   * @returns {vgl.shaderProgram}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.shaderProgram = function () {\n    return m_shaderProgram;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Setup (initialize) the material attribute\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._setup = function (renderState) {\n    void renderState; /* unused parameter */\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove any resources acquired before deletion\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._cleanup = function (renderState) {\n    for (var key in m_attributes) {\n      if (m_attributes.hasOwnProperty(key)) {\n        m_attributes[key]._cleanup(renderState);\n      }\n    }\n\n    for (key in m_textureAttributes) {\n      if (m_textureAttributes.hasOwnProperty(key)) {\n        m_textureAttributes[key]._cleanup(renderState);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind and activate material states\n   *\n   * @param renderState\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bind = function (renderState) {\n    var key = null;\n\n    m_shaderProgram.bind(renderState);\n\n    for (key in m_attributes) {\n      if (m_attributes.hasOwnProperty(key)) {\n        if (m_attributes[key] !== m_shaderProgram) {\n          m_attributes[key].bind(renderState);\n        }\n      }\n    }\n\n    for (key in m_textureAttributes) {\n      if (m_textureAttributes.hasOwnProperty(key)) {\n        m_textureAttributes[key].bind(renderState);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo-bind and de-activate material states\n   *\n   * @param renderState\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.undoBind = function (renderState) {\n    var key = null;\n    for (key in m_attributes) {\n      if (m_attributes.hasOwnProperty(key)) {\n        m_attributes[key].undoBind(renderState);\n      }\n    }\n\n    for (key in m_textureAttributes) {\n      if (m_textureAttributes.hasOwnProperty(key)) {\n        m_textureAttributes[key].undoBind(renderState);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind vertex data\n   *\n   * @param renderState\n   * @param key\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bindVertexData = function (renderState, key) {\n    var i = null;\n\n    for (i in m_attributes) {\n      if (m_attributes.hasOwnProperty(i)) {\n        m_attributes[i].bindVertexData(renderState, key);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind vertex data\n   *\n   * @param renderState\n   * @param key\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.undoBindVertexData = function (renderState, key) {\n    var i = null;\n\n    for (i in m_attributes) {\n      if (m_attributes.hasOwnProperty(i)) {\n        m_attributes[i].undoBindVertexData(renderState, key);\n      }\n    }\n  };\n\n  return m_this;\n};\n\nvgl.material.RenderBin = {\n  'Base' : 0,\n  'Default' : 100,\n  'Opaque' : 100,\n  'Transparent' : 1000,\n  'Overlay' : 10000\n};\n\ninherit(vgl.material, vgl.graphicsObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec2, vec3, vec4, mat4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class renderState\n *\n * @returns {vgl.renderState}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.renderState = function () {\n  'use strict';\n\n  this.m_context = null;\n  this.m_modelViewMatrix = mat4.create();\n  this.m_normalMatrix = mat4.create();\n  this.m_projectionMatrix = null;\n  this.m_material = null;\n  this.m_mapper = null;\n};\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class renderer *\n *\n * @returns {vgl.renderer}\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.renderer = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.renderer)) {\n    return new vgl.renderer(arg);\n  }\n  vgl.graphicsObject.call(this);\n  arg = arg || {};\n\n  /** @private */\n  var m_this = this;\n  m_this.m_renderWindow = null;\n  m_this.m_contextChanged = false;\n  m_this.m_sceneRoot = new vgl.groupNode();\n  m_this.m_camera = new vgl.camera(arg);\n  m_this.m_nearClippingPlaneTolerance = null;\n  m_this.m_x = 0;\n  m_this.m_y = 0;\n  m_this.m_width = 0;\n  m_this.m_height = 0;\n  m_this.m_resizable = true;\n  m_this.m_resetScene = true;\n  m_this.m_layer = 0;\n  m_this.m_renderPasses = null;\n  m_this.m_resetClippingRange = true;\n  m_this.m_depthBits = null;\n\n  m_this.m_camera.addChild(m_this.m_sceneRoot);\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get width of the renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.width = function () {\n    return m_this.m_width;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get height of the renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.height = function () {\n    return m_this.m_height;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get layer this renderer is associated with\n   *\n   * @return {Number}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.layer = function () {\n    return m_this.m_layer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set the layer this renderer is associated with.\n   *\n   * @param layerNo\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setLayer = function (layerNo) {\n    m_this.m_layer = layerNo;\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.isResizable = function () {\n    return m_this.m_resizable;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setResizable = function (r) {\n    m_this.m_resizable = r;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return render window (owner) of the renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.renderWindow = function () {\n    return m_this.m_renderWindow;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set render window for the renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setRenderWindow = function (renWin) {\n    if (m_this.m_renderWindow !== renWin) {\n      if (m_this.m_renderWindow) {\n        m_this.m_renderWindow.removeRenderer(this);\n      }\n      m_this.m_renderWindow = renWin;\n      m_this.m_contextChanged = true;\n      m_this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get background color\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.backgroundColor = function () {\n    return m_this.m_camera.clearColor();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set background color of the renderer\n   *\n   * @param r\n   * @param g\n   * @param b\n   * @param a\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setBackgroundColor = function (r, g, b, a) {\n    m_this.m_camera.setClearColor(r, g, b, a);\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get scene root\n   *\n   * @returns {vgl.groupNode}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.sceneRoot = function () {\n    return m_this.m_sceneRoot;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get main camera of the renderer\n   *\n   * @returns {vgl.camera}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.camera = function () {\n    return m_this.m_camera;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the scene\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function () {\n    var i, renSt, children, actor = null, sortedActors = [],\n        mvMatrixInv = mat4.create(), clearColor = null;\n\n    renSt = new vgl.renderState();\n    renSt.m_renderer = m_this;\n    renSt.m_context = m_this.renderWindow().context();\n    if (!m_this.m_depthBits || m_this.m_contextChanged) {\n      m_this.m_depthBits = renSt.m_context.getParameter(vgl.GL.DEPTH_BITS);\n    }\n    renSt.m_contextChanged = m_this.m_contextChanged;\n\n    if (m_this.m_renderPasses) {\n      for (i = 0; i < m_this.m_renderPasses.length; i += 1) {\n        if (m_this.m_renderPasses[i].render(renSt)) {\n          // Stop the rendering if render pass returns false\n          console.log('returning');\n          m_this.m_renderPasses[i].remove(renSt);\n          return;\n        }\n        m_this.m_renderPasses[i].remove(renSt);\n      }\n    }\n\n    renSt.m_context.enable(vgl.GL.DEPTH_TEST);\n    renSt.m_context.depthFunc(vgl.GL.LEQUAL);\n\n    /*jshint bitwise: false */\n    if (m_this.m_camera.clearMask() & vgl.GL.COLOR_BUFFER_BIT) {\n      clearColor = m_this.m_camera.clearColor();\n      renSt.m_context.clearColor(clearColor[0], clearColor[1],\n                                 clearColor[2], clearColor[3]);\n    }\n\n    if (m_this.m_camera.clearMask() & vgl.GL.DEPTH_BUFFER_BIT) {\n      renSt.m_context.clearDepth(m_this.m_camera.clearDepth());\n    }\n    /*jshint bitwise: true */\n\n    renSt.m_context.clear(m_this.m_camera.clearMask());\n\n    // Set the viewport for this renderer\n    renSt.m_context.viewport(m_this.m_x, m_this.m_y,\n                             m_this.m_width, m_this.m_height);\n\n    children = m_this.m_sceneRoot.children();\n\n    if (children.length > 0 && m_this.m_resetScene) {\n      m_this.resetCamera();\n      m_this.m_resetScene = false;\n    }\n\n    for (i = 0; i < children.length; i += 1) {\n      actor = children[i];\n\n      // Compute the bounds even if the actor is not visible\n      actor.computeBounds();\n\n      // If bin number is < 0, then don't even bother\n      // rendering the data\n      if (actor.visible() && actor.material().binNumber() >= 0) {\n        sortedActors.push([actor.material().binNumber(), actor]);\n      }\n    }\n\n    // Now perform sorting\n    sortedActors.sort(function (a, b) { return a[0] - b[0]; });\n\n    for (i = 0; i < sortedActors.length; i += 1) {\n      actor = sortedActors[i][1];\n      if (actor.referenceFrame() ===\n          vgl.boundingObject.ReferenceFrame.Relative) {\n        var view = m_this.m_camera.viewMatrix();\n        /* If the view matrix is a plain array, keep it as such.  This is\n         * intended to preserve precision, and will only be the case if the\n         * view matrix was created by delibrately setting it as an array. */\n        if (view instanceof Array) {\n          renSt.m_modelViewMatrix = new Array(16);\n        }\n        mat4.multiply(renSt.m_modelViewMatrix, view, actor.matrix());\n        renSt.m_projectionMatrix = m_this.m_camera.projectionMatrix();\n        renSt.m_modelViewAlignment = m_this.m_camera.viewAlignment();\n      } else {\n        renSt.m_modelViewMatrix = actor.matrix();\n        renSt.m_modelViewAlignment = null;\n        renSt.m_projectionMatrix = mat4.create();\n        mat4.ortho(renSt.m_projectionMatrix,\n                   0, m_this.m_width, 0, m_this.m_height, -1, 1);\n      }\n\n      mat4.invert(mvMatrixInv, renSt.m_modelViewMatrix);\n      mat4.transpose(renSt.m_normalMatrix, mvMatrixInv);\n      renSt.m_material = actor.material();\n      renSt.m_mapper = actor.mapper();\n\n      // TODO Fix this shortcut\n      renSt.m_material.bind(renSt);\n      renSt.m_mapper.render(renSt);\n      renSt.m_material.undoBind(renSt);\n    }\n\n    renSt.m_context.finish();\n    m_this.m_contextChanged = false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Automatically set up the camera based on visible actors\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetCamera = function () {\n    m_this.m_camera.computeBounds();\n\n    var vn = m_this.m_camera.directionOfProjection(),\n        visibleBounds = m_this.m_camera.bounds(),\n        center = [\n          (visibleBounds[0] + visibleBounds[1]) / 2.0,\n          (visibleBounds[2] + visibleBounds[3]) / 2.0,\n          (visibleBounds[4] + visibleBounds[5]) / 2.0\n        ],\n        diagonals = [\n          visibleBounds[1] - visibleBounds[0],\n          visibleBounds[3] - visibleBounds[2],\n          visibleBounds[5] - visibleBounds[4]\n        ],\n        radius = 0.0,\n        aspect = m_this.m_camera.viewAspect(),\n        angle = m_this.m_camera.viewAngle(),\n        distance = null,\n        vup = null;\n\n    if (diagonals[0] > diagonals[1]) {\n      if (diagonals[0] > diagonals[2]) {\n        radius = diagonals[0] / 2.0;\n      } else {\n        radius = diagonals[2] / 2.0;\n      }\n    } else {\n      if (diagonals[1] > diagonals[2]) {\n        radius = diagonals[1] / 2.0;\n      } else {\n        radius = diagonals[2] / 2.0;\n      }\n    }\n\n    // @todo Need to figure out what's happening here\n    if (aspect >= 1.0) {\n      angle = 2.0 * Math.atan(Math.tan(angle * 0.5) / aspect);\n    } else {\n      angle = 2.0 * Math.atan(Math.tan(angle * 0.5) * aspect);\n    }\n\n    distance = radius / Math.sin(angle * 0.5);\n    vup = m_this.m_camera.viewUpDirection();\n\n    if (Math.abs(vec3.dot(vup, vn)) > 0.999) {\n      m_this.m_camera.setViewUpDirection(-vup[2], vup[0], vup[1]);\n    }\n\n    m_this.m_camera.setFocalPoint(center[0], center[1], center[2]);\n    m_this.m_camera.setPosition(center[0] + distance * -vn[0],\n      center[1] + distance * -vn[1], center[2] + distance * -vn[2]);\n\n    m_this.resetCameraClippingRange(visibleBounds);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n  * Check whether or not whether or not the bounds are valid\n  */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasValidBounds = function (bounds) {\n    if (bounds[0] === Number.MAX_VALUE ||\n        bounds[1] === -Number.MAX_VALUE ||\n        bounds[2] === Number.MAX_VALUE ||\n        bounds[3] === -Number.MAX_VALUE ||\n        bounds[4] === Number.MAX_VALUE ||\n        bounds[5] === -Number.MAX_VALUE) {\n      return false;\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Recalculate camera's clipping range\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetCameraClippingRange = function (bounds) {\n    if (typeof bounds === 'undefined') {\n      m_this.m_camera.computeBounds();\n      bounds = m_this.m_camera.bounds();\n    }\n\n    if (!m_this.hasValidBounds(bounds)) {\n      return;\n    }\n\n    var vn = m_this.m_camera.viewPlaneNormal(),\n        position = m_this.m_camera.position(),\n        a = -vn[0],\n        b = -vn[1],\n        c = -vn[2],\n        d = -(a * position[0] + b * position[1] + c * position[2]),\n        range = vec2.create(),\n        dist = null,\n        i = null,\n        j = null,\n        k = null;\n\n    if (!m_this.m_resetClippingRange) {\n      return;\n    }\n\n    // Set the max near clipping plane and the min far clipping plane\n    range[0] = a * bounds[0] + b * bounds[2] + c * bounds[4] + d;\n    range[1] = 1e-18;\n\n    // Find the closest / farthest bounding box vertex\n    for (k = 0; k < 2; k += 1) {\n      for (j = 0; j < 2; j += 1) {\n        for (i = 0; i < 2; i += 1) {\n          dist = a * bounds[i] + b * bounds[2 + j] + c * bounds[4 + k] + d;\n          range[0] = (dist < range[0]) ? (dist) : (range[0]);\n          range[1] = (dist > range[1]) ? (dist) : (range[1]);\n        }\n      }\n    }\n\n    // Do not let the range behind the camera throw off the calculation.\n    if (range[0] < 0.0) {\n      range[0] = 0.0;\n    }\n\n    // Give ourselves a little breathing room\n    range[0] = 0.99 * range[0] - (range[1] - range[0]) * 0.5;\n    range[1] = 1.01 * range[1] + (range[1] - range[0]) * 0.5;\n\n    // Make sure near is not bigger than far\n    range[0] = (range[0] >= range[1]) ? (0.01 * range[1]) : (range[0]);\n\n    // Make sure near is at least some fraction of far - this prevents near\n    // from being behind the camera or too close in front. How close is too\n    // close depends on the resolution of the depth buffer.\n    if (!m_this.m_nearClippingPlaneTolerance) {\n      m_this.m_nearClippingPlaneTolerance = 0.01;\n\n      if (m_this.m_depthBits && m_this.m_depthBits > 16) {\n        m_this.m_nearClippingPlaneTolerance = 0.001;\n      }\n    }\n\n    // make sure the front clipping range is not too far from the far clippnig\n    // range, this is to make sure that the zbuffer resolution is effectively\n    // used.\n    if (range[0] < m_this.m_nearClippingPlaneTolerance * range[1]) {\n      range[0] = m_this.m_nearClippingPlaneTolerance * range[1];\n    }\n\n    m_this.m_camera.setClippingRange(range[0], range[1]);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Resize viewport given a width and height\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resize = function (width, height) {\n    if (!width || !height) {\n      return;\n    }\n    // @note: where do m_this.m_x and m_this.m_y come from?\n    m_this.positionAndResize(m_this.m_x, m_this.m_y, width, height);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Resize viewport given a position, width and height\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.positionAndResize = function (x, y, width, height) {\n    var i;\n\n    // TODO move this code to camera\n    if (x < 0 || y < 0 || width <= 0 || height <= 0) {\n      console.log('[error] Invalid position and resize values',\n        x, y, width, height);\n      return;\n    }\n\n    //If we're allowing this renderer to resize ...\n    if (m_this.m_resizable) {\n      m_this.m_width = width;\n      m_this.m_height = height;\n\n      m_this.m_camera.setViewAspect(width / height);\n      m_this.m_camera.setParallelExtents({width: width, height: height});\n      m_this.modified();\n    }\n\n    if (m_this.m_renderPasses) {\n      for (i = 0; i < m_this.m_renderPasses.length; i += 1) {\n        m_this.m_renderPasses[i].resize(width, height);\n        m_this.m_renderPasses[i].renderer().positionAndResize(x, y, width, height);\n      }\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add new actor to the collection\n   *\n   * @param actor\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addActor = function (actor) {\n    if (actor instanceof vgl.actor) {\n      m_this.m_sceneRoot.addChild(actor);\n      m_this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return true if this renderer has this actor attached, false otherwise.\n   *\n   * @param actor\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasActor = function (actor) {\n    return m_this.m_sceneRoot.hasChild(actor);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add an array of actors to the collection\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addActors = function (actors) {\n    var i = null;\n    if (actors instanceof Array) {\n      for (i = 0; i < actors.length; i += 1) {\n        m_this.m_sceneRoot.addChild(actors[i]);\n      }\n      m_this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove the actor from the collection\n   *\n   * @param actor\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeActor = function (actor) {\n    if (m_this.m_sceneRoot.children().indexOf(actor) !== -1) {\n      /* When we remove an actor, free the VBOs of the mapper and mark the\n       * mapper as modified; it will reallocate VBOs as necessary. */\n      if (actor.mapper()) {\n        actor.mapper().deleteVertexBufferObjects();\n        actor.mapper().modified();\n      }\n      m_this.m_sceneRoot.removeChild(actor);\n      m_this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove actors from the collection\n   *\n   * @param actors\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeActors = function (actors) {\n    if (!(actors instanceof Array)) {\n      return false;\n    }\n\n    var i;\n    for (i = 0; i < actors.length; i += 1) {\n      m_this.m_sceneRoot.removeChild(actors[i]);\n    }\n    m_this.modified();\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove all actors for a renderer\n   *\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeAllActors = function () {\n    return m_this.m_sceneRoot.removeChildren();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Transform a point in the world space to display space\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.worldToDisplay = function (worldPt, viewMatrix, projectionMatrix, width,\n                                 height) {\n    var viewProjectionMatrix = mat4.create(),\n        winX = null,\n        winY = null,\n        winZ = null,\n        winW = null,\n        clipPt = null;\n\n    mat4.multiply(viewProjectionMatrix, projectionMatrix, viewMatrix);\n\n    // Transform world to clipping coordinates\n    clipPt = vec4.create();\n    vec4.transformMat4(clipPt, worldPt, viewProjectionMatrix);\n\n    if (clipPt[3] !== 0.0) {\n      clipPt[0] = clipPt[0] / clipPt[3];\n      clipPt[1] = clipPt[1] / clipPt[3];\n      clipPt[2] = clipPt[2] / clipPt[3];\n      clipPt[3] = 1.0;\n    }\n\n    winX = (((clipPt[0]) + 1) / 2.0) * width;\n    // We calculate -point3D.getY() because the screen Y axis is\n    // oriented top->down\n    winY = ((1 - clipPt[1]) / 2.0) * height;\n    winZ = clipPt[2];\n    winW = clipPt[3];\n\n    return vec4.fromValues(winX, winY, winZ, winW);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Transform a point in display space to world space\n   * @param displayPt\n   * @param viewMatrix\n   * @param projectionMatrix\n   * @param width\n   * @param height\n   * @returns {vec4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.displayToWorld = function (displayPt, viewMatrix, projectionMatrix,\n                                 width, height) {\n    var x = (2.0 * displayPt[0] / width) - 1,\n        y = -(2.0 * displayPt[1] / height) + 1,\n        z = displayPt[2],\n        viewProjectionInverse = mat4.create(),\n        worldPt = null;\n\n    mat4.multiply(viewProjectionInverse, projectionMatrix, viewMatrix);\n    mat4.invert(viewProjectionInverse, viewProjectionInverse);\n\n    worldPt = vec4.fromValues(x, y, z, 1);\n    vec4.transformMat4(worldPt, worldPt, viewProjectionInverse);\n    if (worldPt[3] !== 0.0) {\n      worldPt[0] = worldPt[0] / worldPt[3];\n      worldPt[1] = worldPt[1] / worldPt[3];\n      worldPt[2] = worldPt[2] / worldPt[3];\n      worldPt[3] = 1.0;\n    }\n\n    return worldPt;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get the focusDisplayPoint\n   * @returns {vec4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.focusDisplayPoint = function () {\n    var focalPoint = m_this.m_camera.focalPoint(),\n        focusWorldPt = vec4.fromValues(\n        focalPoint[0], focalPoint[1], focalPoint[2], 1);\n\n    return m_this.worldToDisplay(\n      focusWorldPt, m_this.m_camera.viewMatrix(),\n      m_this.m_camera.projectionMatrix(), m_this.m_width, m_this.m_height);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Will the scene be reset.\n   * @returns {bool}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetScene = function () {\n    return m_this.m_resetScene;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * If true the scene will be reset, otherwise the scene will not be\n   * automatically reset.\n   *\n   * @param reset\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setResetScene = function (reset) {\n    if (m_this.m_resetScene !== reset) {\n      m_this.m_resetScene = reset;\n      m_this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Will the clipping range be reset\n   * @returns {bool}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resetClippingRange = function () {\n    return m_this.m_resetClippingRange;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * If true the camera clipping range will be reset, otherwise the scene will\n   * not be automatically reset.\n   *\n   * @param reset\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setResetClippingRange = function (reset) {\n    if (m_this.m_resetClippingRange !== reset) {\n      m_this.m_resetClippingRange = reset;\n      m_this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addRenderPass = function (renPass) {\n    var i;\n\n    if (m_this.m_renderPasses) {\n      for (i = 0; i < m_this.m_renderPasses.length; i += 1) {\n        if (renPass === m_this.m_renderPasses[i]) {\n          return;\n        }\n      }\n    }\n\n    m_this.m_renderPasses = [];\n    m_this.m_renderPasses.push(renPass);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeRenderPass = function (renPass) {\n    renPass = renPass; // TODO Implement this\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._cleanup = function (renderState) {\n    var children = m_this.m_sceneRoot.children();\n    for (var i = 0; i < children.length; i += 1) {\n      var actor = children[i];\n      actor.material()._cleanup(renderState);\n      actor.mapper()._cleanup(renderState);\n    }\n\n    m_this.m_sceneRoot.removeChildren();\n  };\n\n  return m_this;\n};\n\ninherit(vgl.renderer, vgl.graphicsObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class renderWindow\n *\n * @class\n * @returns {vgl.renderWindow}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.renderWindow = function (canvas) {\n  'use strict';\n\n  if (!(this instanceof vgl.renderWindow)) {\n    return new vgl.renderWindow(canvas);\n  }\n  vgl.graphicsObject.call(this);\n\n  /** @private */\n  var m_this = this,\n      m_x = 0,\n      m_y = 0,\n      m_width = 400,\n      m_height = 400,\n      m_canvas = canvas,\n      m_activeRender = null,\n      m_renderers = [],\n      m_context = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get size of the render window\n   *\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.windowSize = function () {\n    return [m_width, m_height];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set size of the render window\n   *\n   * @param width\n   * @param height\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setWindowSize = function (width, height) {\n\n    if (m_width !== width || m_height !== height) {\n      m_width = width;\n      m_height = height;\n\n      m_this.modified();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get window position (top left coordinates)\n   *\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.windowPosition = function () {\n    return [m_x, m_y];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set window position (top left coordinates)\n   *\n   * @param x\n   * @param y\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setWindowPosition = function (x, y) {\n    if ((m_x !== x) || (m_y !== y)) {\n      m_x = x;\n      m_y = y;\n      m_this.modified();\n      return true;\n    }\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return all renderers contained in the render window\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.renderers = function () {\n    return m_renderers;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get active renderer of the the render window\n   *\n   * @returns vgl.renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.activeRenderer = function () {\n    return m_activeRender;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add renderer to the render window\n   *\n   * @param ren\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.addRenderer = function (ren) {\n    if (m_this.hasRenderer(ren) === false) {\n      m_renderers.push(ren);\n      ren.setRenderWindow(m_this);\n      if (m_activeRender === null) {\n        m_activeRender = ren;\n      }\n      if (ren.layer() !== 0) {\n        ren.camera().setClearMask(vgl.GL.DepthBufferBit);\n      }\n      m_this.modified();\n      return true;\n    }\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Remove renderer from the render window\n   *\n   * @param ren\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.removeRenderer = function (ren) {\n    var index = m_renderers.indexOf(ren);\n    if (index !== -1) {\n      if (m_activeRender === ren) {\n        m_activeRender = null;\n      }\n      m_renderers.splice(index, 1);\n      m_this.modified();\n      return true;\n    }\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return a renderer at a given index\n   *\n   * @param index\n   * @returns {vgl.renderer}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getRenderer = function (index) {\n    if (index < m_renderers.length) {\n      return m_renderers[index];\n    }\n\n    console.log('[WARNING] Out of index array');\n    return null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if the renderer exists\n   *\n   * @param ren\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.hasRenderer = function (ren) {\n    var i;\n    for (i = 0; i < m_renderers.length; i += 1) {\n      if (ren === m_renderers[i]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Resize window\n   *\n   * @param width\n   * @param height\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.resize = function (width, height) {\n    m_this.positionAndResize(m_x, m_y, width, height);\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Resize and reposition the window\n   *\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.positionAndResize = function (x, y, width, height) {\n    m_x = x;\n    m_y = y;\n    m_width = width;\n    m_height = height;\n    var i;\n    for (i = 0; i < m_renderers.length; i += 1) {\n      m_renderers[i].positionAndResize(m_x, m_y, m_width, m_height);\n    }\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create the window\n   *\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._setup = function (renderState) {\n    renderState = renderState; /* unused parameter */\n    m_context = null;\n\n    try {\n      // Try to grab the standard context. If it fails, fallback to\n      // experimental.\n      m_context = m_canvas.getContext('webgl') ||\n            m_canvas.getContext('experimental-webgl');\n\n      // Set width and height of renderers if not set already\n      var i;\n      for (i = 0; i < m_renderers.length; i += 1) {\n        if ((m_renderers[i].width() > m_width) ||\n            m_renderers[i].width() === 0 ||\n            (m_renderers[i].height() > m_height) ||\n            m_renderers[i].height() === 0) {\n          m_renderers[i].resize(m_x, m_y, m_width, m_height);\n        }\n      }\n\n      return true;\n    } catch (e) {\n    }\n\n    // If we don't have a GL context, give up now\n    if (!m_context) {\n      console('[ERROR] Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return current GL context\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.context = function () {\n    return m_context;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Delete this window and release any graphics resources\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._cleanup = function (renderState) {\n    var i;\n    for (i = 0; i < m_renderers.length; i += 1) {\n      m_renderers[i]._cleanup(renderState);\n    }\n    vgl.clearCachedShaders(renderState ? renderState.m_context : null);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the scene\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function () {\n    var i;\n    m_renderers.sort(function (a, b) { return a.layer() - b.layer(); });\n    for (i = 0; i < m_renderers.length; i += 1) {\n      m_renderers[i].render();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get the focusDisplayPoint from the activeRenderer\n   * @returns {vec4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.focusDisplayPoint = function () {\n    return m_activeRender.focusDisplayPoint();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Transform a point in display space to world space\n   * @param {Number} x\n   * @param {Number} y\n   * @param {vec4} focusDisplayPoint\n   * @returns {vec4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.displayToWorld = function (x, y, focusDisplayPoint, ren) {\n    ren = ren === undefined ? ren = m_activeRender : ren;\n\n    var camera = ren.camera();\n    if (!focusDisplayPoint) {\n      focusDisplayPoint = ren.focusDisplayPoint();\n    }\n\n    return ren.displayToWorld(\n      vec4.fromValues(x, y, focusDisplayPoint[2], 1.0), camera.viewMatrix(),\n      camera.projectionMatrix(), m_width, m_height);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Transform a point in display space to world space\n   * @param {Number} x\n   * @param {Number} y\n   * @param {vec4} focusDisplayPoint\n   * @returns {vec4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.worldToDisplay = function (x, y, z, ren) {\n    ren = ren === undefined ? ren = m_activeRender : ren;\n    var camera = ren.camera();\n    return ren.worldToDisplay(\n      vec4.fromValues(x, y, z, 1.0), camera.viewMatrix(),\n      camera.projectionMatrix(), m_width, m_height);\n  };\n\n  return m_this;\n};\n\ninherit(vgl.renderWindow, vgl.graphicsObject);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec3, vec4, mat4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class camera\n *\n * @class\n * @returns {vgl.camera}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.camera = function (arg) {\n  'use strict';\n\n  if (!(this instanceof vgl.camera)) {\n    return new vgl.camera(arg);\n  }\n  vgl.groupNode.call(this);\n  arg = arg || {};\n\n  /** @private */\n  var m_viewAngle = (Math.PI * 30) / 180.0,\n      m_position = vec4.fromValues(0.0, 0.0, 1.0, 1.0),\n      m_focalPoint = vec4.fromValues(0.0, 0.0, 0.0, 1.0),\n      m_centerOfRotation = vec3.fromValues(0.0, 0.0, 0.0),\n      m_viewUp = vec4.fromValues(0.0, 1.0, 0.0, 0.0),\n      m_rightDir = vec4.fromValues(1.0, 0.0, 0.0, 0.0),\n      m_near = 0.01,\n      m_far = 10000.0,\n      m_viewAspect = 1.0,\n      m_directionOfProjection = vec4.fromValues(0.0, 0.0, -1.0, 0.0),\n      m_viewPlaneNormal = vec4.fromValues(0.0, 0.0, 1.0, 0.0),\n      m_viewMatrix = mat4.create(),\n      m_projectionMatrix = mat4.create(),\n      m_computeModelViewMatrixTime = vgl.timestamp(),\n      m_computeProjectMatrixTime = vgl.timestamp(),\n      m_left = -1.0,\n      m_right = 1.0,\n      m_top = +1.0,\n      m_bottom = -1.0,\n      m_parallelExtents = {zoom: 1, tilesize: 256},\n      m_enableTranslation = true,\n      m_enableRotation = true,\n      m_enableScale = true,\n      m_enableParallelProjection = false,\n      m_clearColor = [0.0, 0.0, 0.0, 0.0],\n      m_clearDepth = 1.0,\n      /*jshint bitwise: false */\n      m_clearMask = vgl.GL.COLOR_BUFFER_BIT |\n                    vgl.GL.DEPTH_BUFFER_BIT;\n  /*jshint bitwise: true */\n\n  if (arg.parallelProjection !== undefined) {\n    m_enableParallelProjection = arg.parallelProjection ? true : false;\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get view angle of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewAngle = function () {\n    return m_viewAngle;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set view angle of the camera in degrees, which is converted to radians.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewAngleDegrees = function (a) {\n    this.setViewAngle(Math.PI * a / 180.0);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set view angle of the camera in degrees, which is converted to radians.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewAngle = function (a) {\n    if (m_enableScale) {\n      m_viewAngle = a;\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get position of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.position = function () {\n    return m_position;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set position of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPosition = function (x, y, z) {\n    if (m_enableTranslation) {\n      m_position = vec4.fromValues(x, y, z, 1.0);\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get focal point of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.focalPoint = function () {\n    return m_focalPoint;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set focal point of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setFocalPoint = function (x, y, z) {\n    if (m_enableRotation && m_enableTranslation) {\n      m_focalPoint = vec4.fromValues(x, y, z, 1.0);\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get view-up direction of camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewUpDirection = function () {\n    return m_viewUp;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set view-up direction of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewUpDirection = function (x, y, z) {\n    m_viewUp = vec4.fromValues(x, y, z, 0);\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get center of rotation for camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.centerOfRotation = function () {\n    return m_centerOfRotation;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set center of rotation for camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setCenterOfRotation = function (centerOfRotation) {\n    m_centerOfRotation = centerOfRotation;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get clipping range of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.clippingRange = function () {\n    return [m_near, m_far];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set clipping range of the camera\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setClippingRange = function (near, far) {\n    m_near = near;\n    m_far = far;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get view aspect\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewAspect = function () {\n    return m_viewAspect;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set view aspect\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewAspect = function (aspect) {\n    m_viewAspect = aspect;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return active mode for scaling (enabled / disabled)\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.enableScale = function () {\n    return m_enableScale;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Enable/disable scaling\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setEnableScale = function (flag) {\n    if (flag !== m_enableScale) {\n      m_enableScale = flag;\n      this.modified();\n      return true;\n    }\n\n    return m_enableScale;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return active mode for rotation (enabled / disabled)\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.enableRotation = function () {\n    return m_enableRotation;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Enable / disable rotation\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setEnableRotation = function (flag) {\n    if (flag !== m_enableRotation) {\n      m_enableRotation = flag;\n      this.modified();\n      return true;\n    }\n\n    return m_enableRotation;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return active mode for translation (enabled/disabled)\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.enableTranslation = function () {\n    return m_enableTranslation;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Enable / disable translation\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setEnableTranslation = function (flag) {\n    if (flag !== m_enableTranslation) {\n      m_enableTranslation = flag;\n      this.modified();\n      return true;\n    }\n\n    return m_enableTranslation;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return if parallel projection is enabled\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.isEnabledParallelProjection = function () {\n    return m_enableParallelProjection;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Enable / disable parallel projection\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.enableParallelProjection = function (flag) {\n    if (flag !== m_enableParallelProjection) {\n      m_enableParallelProjection = flag;\n      this.modified();\n      return true;\n    }\n\n    return m_enableParallelProjection;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Enable / disable parallel projection\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setEnableParallelProjection = function (flag) {\n    return this.enableParallelProjection(flag);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get parallel projection parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parallelProjection = function () {\n    return {left: m_left, right: m_right, top: m_top, bottom: m_bottom};\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set parallel projection parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setParallelProjection = function (left, right, top, bottom) {\n    m_left = left;\n    m_right = right;\n    m_top = top;\n    m_bottom = bottom;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get parallel projection extents parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parallelExtents = function () {\n    return m_parallelExtents;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set parallel projection extents parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setParallelExtents = function (extents) {\n    var prop = ['width', 'height', 'zoom', 'tilesize'], mod = false, i, key;\n    for (i = 0; i < prop.length; i += 1) {\n      key = prop[i];\n      if (extents[key] !== undefined &&\n          extents[key] !== m_parallelExtents[key]) {\n        m_parallelExtents[key] = extents[key];\n        mod = true;\n      }\n    }\n    if (mod && m_parallelExtents.width && m_parallelExtents.height &&\n        m_parallelExtents.zoom !== undefined && m_parallelExtents.tilesize) {\n      var unitsPerPixel = this.unitsPerPixel(m_parallelExtents.zoom,\n                                             m_parallelExtents.tilesize);\n      m_right = unitsPerPixel * m_parallelExtents.width / 2;\n      m_left = -m_right;\n      m_top = unitsPerPixel * m_parallelExtents.height / 2;\n      m_bottom = -m_top;\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute the units per pixel.\n   *\n   * @param zoom: tile zoom level.\n   * @param tilesize: number of pixels per tile (defaults to 256).\n   * @returns: unitsPerPixel.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.unitsPerPixel = function (zoom, tilesize) {\n    tilesize = tilesize || 256;\n    return 360.0 * Math.pow(2, -zoom) / tilesize;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return direction of projection\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.directionOfProjection = function () {\n    this.computeDirectionOfProjection();\n    return m_directionOfProjection;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return view plane normal direction\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewPlaneNormal = function () {\n    this.computeViewPlaneNormal();\n    return m_viewPlaneNormal;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return view-matrix for the camera This method does not compute the\n   * view-matrix for the camera. It is assumed that a call to computeViewMatrix\n   * has been made earlier.\n   *\n   * @returns {mat4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewMatrix = function () {\n    return this.computeViewMatrix();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set the view-matrix for the camera and mark that it is up to date so that\n   * it won't be recomputed unless something else changes.\n   *\n   * @param {mat4} view: new view matrix.\n   * @param {boolean} preserveType: if true, clone the input using slice.  This\n   *    can be used to ensure the array is a specific precision.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewMatrix = function (view, preserveType) {\n    if (!preserveType) {\n      mat4.copy(m_viewMatrix, view);\n    } else {\n      m_viewMatrix = view.slice();\n    }\n    m_computeModelViewMatrixTime.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return camera projection matrix This method does not compute the\n   * projection-matrix for the camera. It is assumed that a call to\n   * computeProjectionMatrix has been made earlier.\n   *\n   * @returns {mat4}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.projectionMatrix = function () {\n    return this.computeProjectionMatrix();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set the projection-matrix for the camera and mark that it is up to date so\n   * that it won't be recomputed unless something else changes.\n   *\n   * @param {mat4} proj: new projection matrix.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setProjectionMatrix = function (proj) {\n    mat4.copy(m_projectionMatrix, proj);\n    m_computeProjectMatrixTime.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return clear mask used by this camera\n   *\n   * @returns {number}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.clearMask = function () {\n    return m_clearMask;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set clear mask for camera\n   *\n   * @param mask\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setClearMask = function (mask) {\n    m_clearMask = mask;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get clear color (background color) of the camera\n   *\n   * @returns {Array}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.clearColor = function () {\n    return m_clearColor;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set clear color (background color) for the camera\n   *\n   * @param color RGBA\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setClearColor = function (r, g, b, a) {\n    m_clearColor[0] = r;\n    m_clearColor[1] = g;\n    m_clearColor[2] = b;\n    m_clearColor[3] = a;\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   * @returns {{1.0: null}}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.clearDepth = function () {\n    return m_clearDepth;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *\n   * @param depth\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setClearDepth = function (depth) {\n    m_clearDepth = depth;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute direction of projection\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeDirectionOfProjection = function () {\n    vec3.subtract(m_directionOfProjection, m_focalPoint, m_position);\n    vec3.normalize(m_directionOfProjection, m_directionOfProjection);\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute view plane normal\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeViewPlaneNormal = function () {\n    m_viewPlaneNormal[0] = -m_directionOfProjection[0];\n    m_viewPlaneNormal[1] = -m_directionOfProjection[1];\n    m_viewPlaneNormal[2] = -m_directionOfProjection[2];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Move camera closer or further away from the scene\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.zoom = function (d, dir) {\n    if (d === 0) {\n      return;\n    }\n\n    if (!m_enableTranslation) {\n      return;\n    }\n\n    d = d * vec3.distance(m_focalPoint, m_position);\n    if (!dir) {\n      dir = m_directionOfProjection;\n      m_position[0] = m_focalPoint[0] - d * dir[0];\n      m_position[1] = m_focalPoint[1] - d * dir[1];\n      m_position[2] = m_focalPoint[2] - d * dir[2];\n    } else {\n      m_position[0] = m_position[0] + d * dir[0];\n      m_position[1] = m_position[1] + d * dir[1];\n      m_position[2] = m_position[2] + d * dir[2];\n    }\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Move camera sideways\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.pan = function (dx, dy, dz) {\n    if (!m_enableTranslation) {\n      return;\n    }\n\n    m_position[0] += dx;\n    m_position[1] += dy;\n    m_position[2] += dz;\n\n    m_focalPoint[0] += dx;\n    m_focalPoint[1] += dy;\n    m_focalPoint[2] += dz;\n\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute camera coordinate axes\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeOrthogonalAxes = function () {\n    this.computeDirectionOfProjection();\n    vec3.cross(m_rightDir, m_directionOfProjection, m_viewUp);\n    vec3.normalize(m_rightDir, m_rightDir);\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Rotate camera around center of rotation\n   * @param dx Rotation around vertical axis in degrees\n   * @param dy Rotation around horizontal axis in degrees\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.rotate = function (dx, dy) {\n    if (!m_enableRotation) {\n      return;\n    }\n\n    // Convert degrees into radians\n    dx = 0.5 * dx * (Math.PI / 180.0);\n    dy = 0.5 * dy * (Math.PI / 180.0);\n\n    var mat = mat4.create(),\n        inverseCenterOfRotation = new vec3.create();\n\n    mat4.identity(mat);\n\n    inverseCenterOfRotation[0] = -m_centerOfRotation[0];\n    inverseCenterOfRotation[1] = -m_centerOfRotation[1];\n    inverseCenterOfRotation[2] = -m_centerOfRotation[2];\n\n    mat4.translate(mat, mat, m_centerOfRotation);\n    mat4.rotate(mat, mat, dx, m_viewUp);\n    mat4.rotate(mat, mat, dy, m_rightDir);\n    mat4.translate(mat, mat, inverseCenterOfRotation);\n\n    vec4.transformMat4(m_position, m_position, mat);\n    vec4.transformMat4(m_focalPoint, m_focalPoint, mat);\n\n    // Update viewup vector\n    vec4.transformMat4(m_viewUp, m_viewUp, mat);\n    vec4.normalize(m_viewUp, m_viewUp);\n\n    // Update direction of projection\n    this.computeOrthogonalAxes();\n\n    // Mark modified\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute camera view matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeViewMatrix = function () {\n    if (m_computeModelViewMatrixTime.getMTime() < this.getMTime()) {\n      mat4.lookAt(m_viewMatrix, m_position, m_focalPoint, m_viewUp);\n      m_computeModelViewMatrixTime.modified();\n    }\n    return m_viewMatrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Check if the texture should be aligned to the screen.  Alignment only\n   * occurs if the parallel extents contain width, height, and a\n   * close-to-integer zoom level, and if the units-per-pixel value has been\n   * computed.  The camera must either be in parallel projection mode OR must\n   * have a perspective camera which is oriented along the z-axis without any\n   * rotation.\n   *\n   * @returns: either null if no alignment should occur, or an alignment object\n   *           with the rounding value and offsets.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewAlignment = function () {\n    if (!m_enableParallelProjection) {\n      /* If we aren't in parallel projection mode, ensure that the projection\n       * matrix meets strict specifications */\n      var proj = this.projectionMatrix();\n      if (proj[1] || proj[2] || proj[3] || proj[4] || proj[6] || proj[7] ||\n          proj[8] || proj[9] || proj[12] || proj[13] || proj[15]) {\n        return null;\n      }\n    }\n    var unitsPerPixel = this.unitsPerPixel(m_parallelExtents.zoom,\n                                           m_parallelExtents.tilesize);\n    /* If we don't have screen dimensions, we can't know how to align pixels */\n    if (!m_parallelExtents.width || !m_parallelExtents.height ||\n        !unitsPerPixel) {\n      return null;\n    }\n    /* If we aren't at an integer zoom level, we shouldn't align pixels.  If\n     * we are really close to an integer zoom level, that is good enough. */\n    if (parseFloat(m_parallelExtents.zoom.toFixed(6)) !==\n        parseFloat(m_parallelExtents.zoom.toFixed(0))) {\n      return null;\n    }\n    var align = {roundx: unitsPerPixel, roundy: unitsPerPixel, dx: 0, dy: 0};\n    /* If the screen is an odd number of pixels, shift the view center to the\n     * center of a pixel so that the pixels fit discretely across the screen.\n     * If an even number of pixels, align the view center between pixels for\n     * the same reason. */\n    if (m_parallelExtents.width % 2) {\n      align.dx = unitsPerPixel * 0.5;\n    }\n    if (m_parallelExtents.height % 2) {\n      align.dy = unitsPerPixel * 0.5;\n    }\n    return align;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute camera projection matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.computeProjectionMatrix = function () {\n    if (m_computeProjectMatrixTime.getMTime() < this.getMTime()) {\n      if (!m_enableParallelProjection) {\n        mat4.perspective(m_projectionMatrix, m_viewAngle, m_viewAspect, m_near, m_far);\n      } else {\n        mat4.ortho(m_projectionMatrix,\n          m_left, m_right, m_bottom, m_top, m_near, m_far);\n      }\n\n      m_computeProjectMatrixTime.modified();\n    }\n\n    return m_projectionMatrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Convert a zoom level and window size to a camera height.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.zoomToHeight = function (zoom, width, height) {\n    return vgl.zoomToHeight(zoom, width, height, m_viewAngle);\n  };\n\n  this.computeDirectionOfProjection();\n\n  return this;\n};\n\ninherit(vgl.camera, vgl.groupNode);\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Convert a zoom level and window size to a camera height.\n *\n * @param zoom: Zoom level, as used in OSM maps.\n * @param width: width of the window.\n * @param height: height of the window.\n * @returns: perspective camera height.\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.zoomToHeight = function (zoom, width, height, viewAngle) {\n  'use strict';\n  viewAngle = viewAngle || (30 * Math.PI / 180.0);\n  var newZ = 360 * Math.pow(2, -zoom);\n  newZ /= Math.tan(viewAngle / 2) * 2 * 256 / height;\n  return newZ;\n};\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Convert a camera height and window size to a zoom level.\n *\n * @param z: perspective camera height.\n * @param width: width of the window.\n * @param height: height of the window.\n * @returns: zoom level.\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.heightToZoom = function (z, width, height, viewAngle) {\n  'use strict';\n  viewAngle = viewAngle || (30 * Math.PI / 180.0);\n  z *= Math.tan(viewAngle / 2) * 2 * 256 / height;\n  var zoom = -Math.log2(z / 360);\n  return zoom;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit, $*/\n//////////////////////////////////////////////////////////////////////////////\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class interactorStyle\n *\n * @class vgl.interactorStyle\n * interactorStyle is a base class for all interactor styles\n * @returns {vgl.interactorStyle}\n */\n////////////////////////////////////////////////////////////////////////////\nvgl.interactorStyle = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.interactorStyle)) {\n    return new vgl.interactorStyle();\n  }\n  vgl.object.call(this);\n\n  // Private member variables\n  var m_that = this,\n      m_viewer = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return viewer referenced by the interactor style\n   *\n   * @returns {null}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.viewer = function () {\n    return m_viewer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set viewer for the interactor style\n   *\n   * @param viewer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setViewer = function (viewer) {\n    if (viewer !== m_viewer) {\n      m_viewer = viewer;\n      $(m_viewer).on(vgl.event.mousePress, m_that.handleMouseDown);\n      $(m_viewer).on(vgl.event.mouseRelease, m_that.handleMouseUp);\n      $(m_viewer).on(vgl.event.mouseMove, m_that.handleMouseMove);\n      $(m_viewer).on(vgl.event.mouseOut, m_that.handleMouseOut);\n      $(m_viewer).on(vgl.event.mouseWheel, m_that.handleMouseWheel);\n      $(m_viewer).on(vgl.event.keyPress, m_that.handleKeyPress);\n      $(m_viewer).on(vgl.event.mouseContextMenu, m_that.handleContextMenu);\n      $(m_viewer).on(vgl.event.click, m_that.handleClick);\n      $(m_viewer).on(vgl.event.dblClick, m_that.handleDoubleClick);\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse down event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseDown = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse up event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseUp = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseMove = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseOut = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse wheel event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseWheel = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle click event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleClick = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle double click event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleDoubleClick = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle key press event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleKeyPress = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle context menu event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleContextMenu = function (event) {\n    event = event; /* unused parameter */\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Reset to default\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.reset = function () {\n    return true;\n  };\n\n  return this;\n};\n\ninherit(vgl.interactorStyle, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of trackballInteractorStyle\n *\n * @class vgl.trackballInteractorStyle\n * @returns {vgl.trackballInteractorStyle}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.trackballInteractorStyle = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.trackballInteractorStyle)) {\n    return new vgl.trackballInteractorStyle();\n  }\n  vgl.interactorStyle.call(this);\n  var m_that = this,\n      m_leftMouseBtnDown = false,\n      m_rightMouseBtnDown = false,\n      m_midMouseBtnDown = false,\n      m_outsideCanvas,\n      m_currPos = {x: 0, y: 0},\n      m_lastPos = {x: 0, y: 0};\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseMove = function (event) {\n    var width = m_that.viewer().renderWindow().windowSize()[0],\n        height = m_that.viewer().renderWindow().windowSize()[1],\n        ren = m_that.viewer().renderWindow().activeRenderer(),\n        cam = ren.camera(), coords = m_that.viewer().relMouseCoords(event),\n        fp, fdp, fwp, dp1, dp2, wp1, wp2, dx, dy, dz, m_zTrans;\n\n    m_outsideCanvas = false;\n    m_currPos = {x: 0, y: 0};\n\n    if ((coords.x < 0) || (coords.x > width)) {\n      m_currPos.x = 0;\n      m_outsideCanvas = true;\n    } else {\n      m_currPos.x = coords.x;\n    }\n    if ((coords.y < 0) || (coords.y > height)) {\n      m_currPos.y = 0;\n      m_outsideCanvas = true;\n    } else {\n      m_currPos.y = coords.y;\n    }\n    if (m_outsideCanvas === true) {\n      return;\n    }\n\n    fp = cam.focalPoint();\n    fwp = vec4.fromValues(fp[0], fp[1], fp[2], 1);\n    fdp = ren.worldToDisplay(fwp, cam.viewMatrix(),\n                              cam.projectionMatrix(), width, height);\n\n    dp1 = vec4.fromValues(m_currPos.x, m_currPos.y, fdp[2], 1.0);\n    dp2 = vec4.fromValues(m_lastPos.x, m_lastPos.y, fdp[2], 1.0);\n\n    wp1 = ren.displayToWorld(dp1, cam.viewMatrix(), cam.projectionMatrix(),\n                             width, height);\n    wp2 = ren.displayToWorld(dp2, cam.viewMatrix(), cam.projectionMatrix(),\n                             width, height);\n\n    dx = wp1[0] - wp2[0];\n    dy = wp1[1] - wp2[1];\n    dz = wp1[2] - wp2[2];\n\n    if (m_midMouseBtnDown) {\n      cam.pan(-dx, -dy, -dz);\n      m_that.viewer().render();\n    }\n    if (m_leftMouseBtnDown) {\n      cam.rotate((m_lastPos.x - m_currPos.x),\n      (m_lastPos.y - m_currPos.y));\n      ren.resetCameraClippingRange();\n      m_that.viewer().render();\n    }\n    if (m_rightMouseBtnDown) {\n      /// 2.0 is the speed up factor\n      m_zTrans = 2.0 * (m_currPos.y - m_lastPos.y) / height;\n\n      // Calculate zoom scale here\n      if (m_zTrans > 0) {\n        cam.zoom(1 - Math.abs(m_zTrans));\n      } else {\n        cam.zoom(1 + Math.abs(m_zTrans));\n      }\n      ren.resetCameraClippingRange();\n      m_that.viewer().render();\n    }\n    m_lastPos.x = m_currPos.x;\n    m_lastPos.y = m_currPos.y;\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse down event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseDown = function (event) {\n    var coords;\n\n    if (event.button === 0) {\n      m_leftMouseBtnDown = true;\n    }\n    if (event.button === 1) {\n      m_midMouseBtnDown = true;\n    }\n    if (event.button === 2) {\n      m_rightMouseBtnDown = true;\n    }\n    coords = m_that.viewer().relMouseCoords(event);\n    if (coords.x < 0) {\n      m_lastPos.x = 0;\n    } else {\n      m_lastPos.x = coords.x;\n    }\n    if (coords.y < 0) {\n      m_lastPos.y = 0;\n    } else {\n      m_lastPos.y = coords.y;\n    }\n    return false;\n  };\n\n  // @note We never get mouse up from scroll bar: See the bug report here\n  // http://bugs.jquery.com/ticket/8184\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse up event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseUp = function (event) {\n    if (event.button === 0) {\n      m_leftMouseBtnDown = false;\n    }\n    if (event.button === 1) {\n      m_midMouseBtnDown = false;\n    }\n    if (event.button === 2) {\n      m_rightMouseBtnDown = false;\n    }\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse wheel event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseWheel = function (event) {\n    var ren = m_that.viewer().renderWindow().activeRenderer(),\n        cam = ren.camera();\n\n    // TODO Compute zoom factor intelligently\n    if (event.originalEvent.wheelDelta < 0) {\n      cam.zoom(0.9);\n    } else {\n      cam.zoom(1.1);\n    }\n    ren.resetCameraClippingRange();\n    m_that.viewer().render();\n    return true;\n  };\n\n  return this;\n};\ninherit(vgl.trackballInteractorStyle, vgl.interactorStyle);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of pvwInteractorStyle (for ParaViewWeb)\n *\n * @class vgl.pvwInteractorStyle\n * @returns {vgl.pvwInteractorStyle}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.pvwInteractorStyle = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.pvwInteractorStyle)) {\n    return new vgl.pvwInteractorStyle();\n  }\n  vgl.trackballInteractorStyle.call(this);\n  var m_that = this,\n      m_leftMouseButtonDown = false,\n      m_rightMouseButtonDown = false,\n      m_middleMouseButtonDown = false,\n      m_width,\n      m_height,\n      m_renderer,\n      m_camera,\n      m_outsideCanvas,\n      m_coords,\n      m_currentMousePos,\n      m_focalPoint,\n      m_focusWorldPt,\n      m_focusDisplayPt,\n      m_displayPt1,\n      m_displayPt2,\n      m_worldPt1,\n      m_worldPt2,\n      m_dx,\n      m_dy,\n      m_dz,\n      m_zTrans,\n      m_mouseLastPos = {\n        x: 0,\n        y: 0\n      };\n\n  function render() {\n    m_renderer.resetCameraClippingRange();\n    m_that.viewer().render();\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseMove = function (event) {\n    var rens = [], i = null, secCameras = [], deltaxy = null;\n    m_width = m_that.viewer().renderWindow().windowSize()[0];\n    m_height = m_that.viewer().renderWindow().windowSize()[1];\n    m_renderer = m_that.viewer().renderWindow().activeRenderer();\n    m_camera = m_renderer.camera();\n    m_outsideCanvas = false;\n    m_coords = m_that.viewer().relMouseCoords(event);\n    m_currentMousePos = {\n      x: 0,\n      y: 0\n    };\n\n    // Get secondary cameras\n    rens = m_that.viewer().renderWindow().renderers();\n    for (i = 0; i < rens.length; i += 1) {\n      if (m_renderer !== rens[i]) {\n        secCameras.push(rens[i].camera());\n      }\n    }\n\n    if ((m_coords.x < 0) || (m_coords.x > m_width)) {\n      m_currentMousePos.x = 0;\n      m_outsideCanvas = true;\n    } else {\n      m_currentMousePos.x = m_coords.x;\n    }\n    if ((m_coords.y < 0) || (m_coords.y > m_height)) {\n      m_currentMousePos.y = 0;\n      m_outsideCanvas = true;\n    } else {\n      m_currentMousePos.y = m_coords.y;\n    }\n    if (m_outsideCanvas === true) {\n      return;\n    }\n    m_focalPoint = m_camera.focalPoint();\n    m_focusWorldPt = vec4.fromValues(m_focalPoint[0], m_focalPoint[1],\n                                     m_focalPoint[2], 1);\n    m_focusDisplayPt = m_renderer.worldToDisplay(m_focusWorldPt,\n        m_camera.viewMatrix(), m_camera.projectionMatrix(), m_width, m_height);\n    m_displayPt1 = vec4.fromValues(\n      m_currentMousePos.x, m_currentMousePos.y, m_focusDisplayPt[2], 1.0);\n    m_displayPt2 = vec4.fromValues(\n      m_mouseLastPos.x, m_mouseLastPos.y, m_focusDisplayPt[2], 1.0);\n    m_worldPt1 = m_renderer.displayToWorld(\n      m_displayPt1, m_camera.viewMatrix(), m_camera.projectionMatrix(),\n      m_width, m_height);\n    m_worldPt2 = m_renderer.displayToWorld(\n      m_displayPt2, m_camera.viewMatrix(), m_camera.projectionMatrix(),\n      m_width, m_height);\n\n    m_dx = m_worldPt1[0] - m_worldPt2[0];\n    m_dy = m_worldPt1[1] - m_worldPt2[1];\n    m_dz = m_worldPt1[2] - m_worldPt2[2];\n\n    if (m_middleMouseButtonDown) {\n      m_camera.pan(-m_dx, -m_dy, -m_dz);\n      render();\n    }\n    if (m_leftMouseButtonDown) {\n      deltaxy = [(m_mouseLastPos.x - m_currentMousePos.x),\n      (m_mouseLastPos.y - m_currentMousePos.y)];\n      m_camera.rotate(deltaxy[0], deltaxy[1]);\n\n      // Apply rotation to all other cameras\n      for (i = 0; i < secCameras.length; i += 1) {\n        secCameras[i].rotate(deltaxy[0], deltaxy[1]);\n      }\n\n      // Apply rotation to all other cameras\n      for (i = 0; i < rens.length; i += 1) {\n        rens[i].resetCameraClippingRange();\n      }\n      render();\n    }\n    if (m_rightMouseButtonDown) {\n      /// 2.0 is the speed up factor.\n      m_zTrans = 2.0 * (m_currentMousePos.y - m_mouseLastPos.y) / m_height;\n\n      // Calculate zoom scale here\n      if (m_zTrans > 0) {\n        m_camera.zoom(1 - Math.abs(m_zTrans));\n      } else {\n        m_camera.zoom(1 + Math.abs(m_zTrans));\n      }\n      render();\n    }\n    m_mouseLastPos.x = m_currentMousePos.x;\n    m_mouseLastPos.y = m_currentMousePos.y;\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse down event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseDown = function (event) {\n    if (event.button === 0) {\n      m_leftMouseButtonDown = true;\n    }\n    if (event.button === 1) {\n      m_middleMouseButtonDown = true;\n    }\n    if (event.button === 2) {\n      m_rightMouseButtonDown = true;\n    }\n    m_coords = m_that.viewer().relMouseCoords(event);\n    if (m_coords.x < 0) {\n      m_mouseLastPos.x = 0;\n    } else {\n      m_mouseLastPos.x = m_coords.x;\n    }\n    if (m_coords.y < 0) {\n      m_mouseLastPos.y = 0;\n    } else {\n      m_mouseLastPos.y = m_coords.y;\n    }\n    return false;\n  };\n\n  // @note We never get mouse up from scroll bar: See the bug report here\n  // http://bugs.jquery.com/ticket/8184\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse up event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.handleMouseUp = function (event) {\n    if (event.button === 0) {\n      m_leftMouseButtonDown = false;\n    }\n    if (event.button === 1) {\n      m_middleMouseButtonDown = false;\n    }\n    if (event.button === 2) {\n      m_rightMouseButtonDown = false;\n    }\n    return false;\n  };\n\n  return this;\n};\ninherit(vgl.pvwInteractorStyle, vgl.trackballInteractorStyle);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global window, vgl, inherit, $*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class viewer\n *\n * @param canvas\n * @returns {vgl.viewer}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.viewer = function (canvas, options) {\n  'use strict';\n\n  if (!(this instanceof vgl.viewer)) {\n    return new vgl.viewer(canvas, options);\n  }\n\n  vgl.object.call(this);\n\n  var m_that = this,\n      m_canvas = canvas,\n      m_ready = true,\n      m_interactorStyle = null,\n      m_renderer = vgl.renderer(options),\n      m_renderWindow = vgl.renderWindow(m_canvas);\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get canvas of the viewer\n   *\n   * @returns {*}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.canvas = function () {\n    return m_canvas;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Return render window of the viewer\n   *\n   * @returns {vgl.renderWindow}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.renderWindow = function () {\n    return m_renderWindow;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Initialize the viewer\n   *\n   * This is a must call or otherwise render context may not initialized\n   * properly.\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.init = function () {\n    if (m_renderWindow !== null) {\n      m_renderWindow._setup();\n    } else {\n      console.log('[ERROR] No render window attached');\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   *  Remove the viewer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.exit = function (renderState) {\n    if (m_renderWindow !== null) {\n      m_renderWindow._cleanup(renderState);\n    } else {\n      console.log('[ERROR] No render window attached');\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get interactor style of the viewer\n   *\n   * @returns {vgl.interactorStyle}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.interactorStyle = function () {\n    return m_interactorStyle;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set interactor style to be used by the viewer\n   *\n   * @param {vgl.interactorStyle} style\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setInteractorStyle = function (style) {\n    if (style !== m_interactorStyle) {\n      m_interactorStyle = style;\n      m_interactorStyle.setViewer(this);\n      this.modified();\n    }\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse down event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseDown = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      // Only prevent default action for right mouse button\n      if (event.button === 2) {\n        fixedEvent.preventDefault();\n      }\n      fixedEvent.state = 'down';\n      fixedEvent.type = vgl.event.mousePress;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse up event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseUp = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.state = 'up';\n      fixedEvent.type = vgl.event.mouseRelease;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseMove = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.mouseMove;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse wheel scroll\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseWheel = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.mouseWheel;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle mouse move event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleMouseOut = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.mouseOut;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle key press event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleKeyPress = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.keyPress;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return true;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle context menu event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleContextMenu = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.contextMenu;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle click event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleClick = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.click;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Handle double click event\n   *\n   * @param event\n   * @returns {boolean}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.handleDoubleClick = function (event) {\n    if (m_ready === true) {\n      var fixedEvent = $.event.fix(event || window.event);\n      fixedEvent.preventDefault();\n      fixedEvent.type = vgl.event.dblClick;\n      $(m_that).trigger(fixedEvent);\n    }\n\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get mouse coodinates related to canvas\n   *\n   * @param event\n   * @returns {{x: number, y: number}}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.relMouseCoords = function (event) {\n    if (event.pageX === undefined || event.pageY === undefined) {\n      throw 'Missing attributes pageX and pageY on the event';\n    }\n\n    var totalOffsetX = 0,\n        totalOffsetY = 0,\n        canvasX = 0,\n        canvasY = 0,\n        currentElement = m_canvas;\n\n    do {\n      totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n      totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n      currentElement = currentElement.offsetParent;\n    } while (currentElement);\n\n    canvasX = event.pageX - totalOffsetX;\n    canvasY = event.pageY - totalOffsetY;\n\n    return {\n      x: canvasX,\n      y: canvasY\n    };\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function () {\n    m_renderWindow.render();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind canvas mouse events to their default handlers\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.bindEventHandlers = function () {\n    $(m_canvas).on('mousedown', this.handleMouseDown);\n    $(m_canvas).on('mouseup', this.handleMouseUp);\n    $(m_canvas).on('mousemove', this.handleMouseMove);\n    $(m_canvas).on('mousewheel', this.handleMouseWheel);\n    $(m_canvas).on('contextmenu', this.handleContextMenu);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo earlier binded  handlers for canvas mouse events\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.unbindEventHandlers = function () {\n    $(m_canvas).off('mousedown', this.handleMouseDown);\n    $(m_canvas).off('mouseup', this.handleMouseUp);\n    $(m_canvas).off('mousemove', this.handleMouseMove);\n    $(m_canvas).off('mousewheel', this.handleMouseWheel);\n    $(m_canvas).off('contextmenu', this.handleContextMenu);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Initialize\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this._init = function () {\n    this.bindEventHandlers();\n    m_renderWindow.addRenderer(m_renderer);\n  };\n\n  this._init();\n  return this;\n};\n\ninherit(vgl.viewer, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class shader\n *\n * @param type\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.shader = function (type) {\n  'use strict';\n\n  if (!(this instanceof vgl.shader)) {\n    return new vgl.shader(type);\n  }\n  vgl.object.call(this);\n\n  var m_shaderContexts = [],\n      m_shaderType = type,\n      m_shaderSource = '';\n\n  /**\n   * A shader can be associated with multiple contexts.  Each context needs to\n   * be compiled and attached separately.  These are tracked in the\n   * m_shaderContexts array.\n   *\n   * @param renderState a renderState that includes a m_context value.\n   * @return an object with context, compileTimestamp, and, if compiled, a\n   *    shaderHandle entry.\n   */\n  this._getContextEntry = function (renderState) {\n    var context = renderState.m_context, i, entry;\n    for (i = 0; i < m_shaderContexts.length; i += 1) {\n      if (m_shaderContexts[i].context === context) {\n        return m_shaderContexts[i];\n      }\n    }\n    entry = {\n      context: context,\n      compileTimestamp: vgl.timestamp()\n    };\n    m_shaderContexts.push(entry);\n    return entry;\n  };\n\n  /**\n   * Remove the context from the list of tracked contexts.  This allows the\n   * associated shader handle to be GCed.  Does nothing if the context is not\n   * in the list of tracked contexts.\n   *\n   * @param renderState a renderState that includes a m_context value.\n   */\n  this.removeContext = function (renderState) {\n    var context = renderState.m_context, i;\n    for (i = 0; i < m_shaderContexts.length; i += 1) {\n      if (m_shaderContexts[i].context === context) {\n        m_shaderContexts.splice(i, 1);\n        return;\n      }\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get shader handle\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.shaderHandle = function (renderState) {\n    var entry = this._getContextEntry(renderState);\n    return entry.shaderHandle;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get type of the shader\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.shaderType = function () {\n    return m_shaderType;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get shader source\n   *\n   * @returns {string}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.shaderSource = function () {\n    return m_shaderSource;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set shader source\n   *\n   * @param {string} source\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setShaderSource = function (source) {\n    m_shaderSource = source;\n    this.modified();\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compile the shader\n   *\n   * @returns {null}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.compile = function (renderState) {\n    var entry = this._getContextEntry(renderState);\n    if (this.getMTime() < entry.compileTimestamp.getMTime()) {\n      return entry.shaderHandle;\n    }\n\n    renderState.m_context.deleteShader(entry.shaderHandle);\n    entry.shaderHandle = renderState.m_context.createShader(m_shaderType);\n    renderState.m_context.shaderSource(entry.shaderHandle, m_shaderSource);\n    renderState.m_context.compileShader(entry.shaderHandle);\n\n    // See if it compiled successfully\n    if (!renderState.m_context.getShaderParameter(entry.shaderHandle,\n        vgl.GL.COMPILE_STATUS)) {\n      console.log('[ERROR] An error occurred compiling the shaders: ' +\n                  renderState.m_context.getShaderInfoLog(entry.shaderHandle));\n      console.log(m_shaderSource);\n      renderState.m_context.deleteShader(entry.shaderHandle);\n      return null;\n    }\n\n    entry.compileTimestamp.modified();\n\n    return entry.shaderHandle;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Attach shader to the program\n   *\n   * @param programHandle\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.attachShader = function (renderState, programHandle) {\n    renderState.m_context.attachShader(\n        programHandle, this.shaderHandle(renderState));\n  };\n};\n\ninherit(vgl.shader, vgl.object);\n\n/* We can use the same shader multiple times if it is identical.  This caches\n * the last N shaders and will reuse them when possible.  The cache keeps the\n * most recently requested shader at the front.  If you are doing anything more\n * to a shader then creating it and setting its source once, do not use this\n * cache.\n */\n(function () {\n  'use strict';\n  var m_shaderCache = [],\n      m_shaderCacheMaxSize = 10;\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get a shader from the cache.  Create a new shader if necessary using a\n   * specific source.\n   *\n   * @param type One of vgl.GL.*_SHADER\n   * @param context the GL context for the shader.\n   * @param {string} source the source code of the shader.\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  vgl.getCachedShader = function (type, context, source) {\n    for (var i = 0; i < m_shaderCache.length; i += 1) {\n      if (m_shaderCache[i].type === type &&\n          m_shaderCache[i].context === context &&\n          m_shaderCache[i].source === source) {\n        if (i) {\n          m_shaderCache.splice(0, 0, m_shaderCache.splice(i, 1)[0]);\n        }\n        return m_shaderCache[0].shader;\n      }\n    }\n    var shader = new vgl.shader(type);\n    shader.setShaderSource(source);\n    m_shaderCache.unshift({\n      type: type,\n      context: context,\n      source: source,\n      shader: shader\n    });\n    if (m_shaderCache.length >= m_shaderCacheMaxSize) {\n      m_shaderCache.splice(m_shaderCacheMaxSize,\n                           m_shaderCache.length - m_shaderCacheMaxSize);\n    }\n    return shader;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Clear the shader cache.\n   *\n   * @param context the GL context to clear, or null for clear all.\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  vgl.clearCachedShaders = function (context) {\n    for (var i = m_shaderCache.length - 1; i >= 0; i -= 1) {\n      if (context === null || context === undefined ||\n          m_shaderCache[i].context === context) {\n        m_shaderCache.splice(i, 1);\n      }\n    }\n  };\n})();\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit, $*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instace of class shaderProgram\n *\n * @class\n * @returns {vgl.shaderProgram}\n */\n//////////////////////////////////////////////////////////////////////////////\n\nvar getBaseUrl = (function () {\n  'use strict';\n  var baseUrl = '.';\n  var scripts = document.getElementsByTagName('script');\n  /* When run in certain environments, there may be no scripts loaded.  For\n   * instance, jQuery's $.getScript won't add it to a script tag. */\n  if (scripts.length > 0) {\n    var index = scripts.length - 1;\n    var vglScript = scripts[index];\n    index = vglScript.src.lastIndexOf('/');\n    baseUrl = vglScript.src.substring(0, index);\n  }\n  return function () { return baseUrl; };\n})();\n\nvgl.shaderProgram = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.shaderProgram)) {\n    return new vgl.shaderProgram();\n  }\n  vgl.materialAttribute.call(\n    this, vgl.materialAttributeType.ShaderProgram);\n\n  /** @private */\n  var m_this = this,\n      m_programHandle = 0,\n      m_compileTimestamp = vgl.timestamp(),\n      m_bindTimestamp = vgl.timestamp(),\n      m_shaders = [],\n      m_uniforms = [],\n      m_vertexAttributes = {},\n      m_uniformNameToLocation = {},\n      m_vertexAttributeNameToLocation = {};\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create a particular shader type using GLSL shader strings from a file\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.loadFromFile = function (type, sourceUrl) {\n    var shader, success = false;\n    $.ajax({\n      url: sourceUrl,\n      type: 'GET',\n      dataType: 'text',\n      async: false,\n      success: function (result) {\n        //console.log(result);\n        shader = vgl.shader(type);\n        shader.setShaderSource(result);\n        m_this.addShader(shader);\n        success = true;\n      }\n    });\n    return success;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create a particular shader type using GLSL shader strings from a file\n   * relative to VGL load URL.\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.loadShader = function (type, file) {\n    return this.loadFromFile(type, getBaseUrl() + '/shaders/' + file);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Query uniform location in the program\n   *\n   * @param name\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.queryUniformLocation = function (renderState, name) {\n    return renderState.m_context.getUniformLocation(m_programHandle, name);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Query attribute location in the program\n   *\n   * @param name\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.queryAttributeLocation = function (renderState, name) {\n    return renderState.m_context.getAttribLocation(m_programHandle, name);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add a new shader to the program\n   *\n   * @param shader\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.addShader = function (shader) {\n    if (m_shaders.indexOf(shader) > -1) {\n      return false;\n    }\n\n    var i;\n    for (i = m_shaders.length - 2; i >= 0; i -= 1) {\n      if (m_shaders[i].shaderType() === shader.shaderType()) {\n        m_shaders.splice(i, 1);\n      }\n    }\n\n    m_shaders.push(shader);\n    m_this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add a new uniform to the program\n   *\n   * @param uniform\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.addUniform = function (uniform) {\n    if (m_uniforms.indexOf(uniform) > -1) {\n      return false;\n    }\n\n    m_uniforms.push(uniform);\n    m_this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add a new vertex attribute to the program\n   *\n   * @param attr\n   * @param key\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.addVertexAttribute = function (attr, key) {\n    m_vertexAttributes[key] = attr;\n    m_this.modified();\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get uniform location\n   *\n   * This method does not perform any query into the program but relies on\n   * the fact that it depends on a call to queryUniformLocation earlier.\n   *\n   * @param name\n   * @returns {number}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.uniformLocation = function (name) {\n    return m_uniformNameToLocation[name];\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get attribute location\n   *\n   * This method does not perform any query into the program but relies on the\n   * fact that it depends on a call to queryUniformLocation earlier.\n   *\n   * @param name\n   * @returns {number}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.attributeLocation = function (name) {\n    return m_vertexAttributeNameToLocation[name];\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get uniform object using name as the key\n   *\n   * @param name\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.uniform = function (name) {\n    var i;\n    for (i = 0; i < m_uniforms.length; i += 1) {\n      if (m_uniforms[i].name() === name) {\n        return m_uniforms[i];\n      }\n    }\n\n    return null;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update all uniforms\n   *\n   * This method should be used directly unless required\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.updateUniforms = function (renderState) {\n    var i;\n\n    for (i = 0; i < m_uniforms.length; i += 1) {\n      m_uniforms[i].callGL(renderState,\n        m_uniformNameToLocation[m_uniforms[i].name()]);\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Link shader program\n   *\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.link = function (renderState) {\n    renderState.m_context.linkProgram(m_programHandle);\n\n    // If creating the shader program failed, alert\n    if (!renderState.m_context.getProgramParameter(m_programHandle,\n        vgl.GL.LINK_STATUS)) {\n      console.log('[ERROR] Unable to initialize the shader program.');\n      return false;\n    }\n\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Use the shader program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.use = function (renderState) {\n    renderState.m_context.useProgram(m_programHandle);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Peform any initialization required\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this._setup = function (renderState) {\n    if (m_programHandle === 0) {\n      m_programHandle = renderState.m_context.createProgram();\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Peform any clean up required when the program gets deleted\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this._cleanup = function (renderState) {\n    m_this.deleteVertexAndFragment(renderState);\n    m_this.deleteProgram(renderState);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Delete the shader program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.deleteProgram = function (renderState) {\n    renderState.m_context.deleteProgram(m_programHandle);\n    m_programHandle = 0;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Delete vertex and fragment shaders\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.deleteVertexAndFragment = function (renderState) {\n    var i;\n    for (i = 0; i < m_shaders.length; i += 1) {\n      renderState.m_context.detachShader(m_shaders[i].shaderHandle(renderState));\n      renderState.m_context.deleteShader(m_shaders[i].shaderHandle(renderState));\n      m_shaders[i].removeContext(renderState);\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compile and link a shader\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.compileAndLink = function (renderState) {\n    var i;\n\n    if (m_compileTimestamp.getMTime() >= this.getMTime()) {\n      return;\n    }\n\n    m_this._setup(renderState);\n\n    // Compile shaders\n    for (i = 0; i < m_shaders.length; i += 1) {\n      m_shaders[i].compile(renderState);\n      m_shaders[i].attachShader(renderState, m_programHandle);\n    }\n\n    m_this.bindAttributes(renderState);\n\n    // link program\n    if (!m_this.link(renderState)) {\n      console.log('[ERROR] Failed to link Program');\n      m_this._cleanup(renderState);\n    }\n\n    m_compileTimestamp.modified();\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind the program with its shaders\n   *\n   * @param renderState\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.bind = function (renderState) {\n    var i = 0;\n\n    if (m_bindTimestamp.getMTime() < m_this.getMTime()) {\n\n      // Compile shaders\n      m_this.compileAndLink(renderState);\n\n      m_this.use(renderState);\n      m_this.bindUniforms(renderState);\n      m_bindTimestamp.modified();\n    } else {\n      m_this.use(renderState);\n    }\n\n    // Call update callback.\n    for (i = 0; i < m_uniforms.length; i += 1) {\n      m_uniforms[i].update(renderState, m_this);\n    }\n\n    // Now update values to GL.\n    m_this.updateUniforms(renderState);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo binding of the shader program\n   *\n   * @param renderState\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.undoBind = function (renderState) {\n    // REF https://www.khronos.org/opengles/sdk/docs/man/xhtml/glUseProgram.xml\n    // If program is 0, then the current rendering state refers to an invalid\n    // program object, and the results of vertex and fragment shader execution\n    // due to any glDrawArrays or glDrawElements commands are undefined\n    renderState.m_context.useProgram(null);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind vertex data\n   *\n   * @param renderState\n   * @param key\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.bindVertexData = function (renderState, key) {\n    if (m_vertexAttributes.hasOwnProperty(key)) {\n      m_vertexAttributes[key].bindVertexData(renderState, key);\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind vetex data\n   *\n   * @param renderState\n   * @param key\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.undoBindVertexData = function (renderState, key) {\n    if (m_vertexAttributes.hasOwnProperty(key)) {\n      m_vertexAttributes[key].undoBindVertexData(renderState, key);\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind uniforms\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.bindUniforms = function (renderState) {\n    var i;\n    for (i = 0; i < m_uniforms.length; i += 1) {\n      m_uniformNameToLocation[m_uniforms[i].name()] = this\n          .queryUniformLocation(renderState, m_uniforms[i].name());\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind vertex attributes\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.bindAttributes = function (renderState) {\n    var key, name;\n    for (key in m_vertexAttributes) {\n      if (m_vertexAttributes.hasOwnProperty(key)) {\n        name = m_vertexAttributes[key].name();\n        renderState.m_context.bindAttribLocation(m_programHandle, key, name);\n        m_vertexAttributeNameToLocation[name] = key;\n      }\n    }\n  };\n\n  return m_this;\n};\n\ninherit(vgl.shaderProgram, vgl.materialAttribute);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global Uint8Array, vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class texture\n *\n * @class\n * @returns {vgl.texture}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.texture = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.texture)) {\n    return new vgl.texture();\n  }\n  vgl.materialAttribute.call(\n    this, vgl.materialAttributeType.Texture);\n\n  this.m_width = 0;\n  this.m_height = 0;\n  this.m_depth = 0;\n\n  this.m_textureHandle = null;\n  this.m_textureUnit = 0;\n\n  this.m_pixelFormat = vgl.GL.RGBA;\n  this.m_pixelDataType = vgl.GL.UNSIGNED_BYTE;\n  this.m_internalFormat = vgl.GL.RGBA;\n  this.m_nearestPixel = false;\n\n  this.m_image = null;\n\n  var m_setupTimestamp = vgl.timestamp(),\n      m_that = this;\n\n  function activateTextureUnit(renderState) {\n    switch (m_that.m_textureUnit) {\n      case 0:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE0);\n        break;\n      case 1:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE1);\n        break;\n      case 2:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE2);\n        break;\n      case 3:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE3);\n        break;\n      case 4:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE4);\n        break;\n      case 5:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE5);\n        break;\n      case 6:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE6);\n        break;\n      case 7:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE7);\n        break;\n      case 8:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE8);\n        break;\n      case 9:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE9);\n        break;\n      case 10:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE10);\n        break;\n      case 11:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE11);\n        break;\n      case 12:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE12);\n        break;\n      case 13:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE13);\n        break;\n      case 14:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE14);\n        break;\n      case 15:\n        renderState.m_context.activeTexture(vgl.GL.TEXTURE15);\n        break;\n      default:\n        throw '[error] Texture unit ' + m_that.m_textureUnit +\n              ' is not supported';\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create texture, update parameters, and bind data\n   *\n   * @param renderState\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setup = function (renderState) {\n    // Activate the texture unit first\n    activateTextureUnit(renderState);\n\n    renderState.m_context.deleteTexture(this.m_textureHandle);\n    this.m_textureHandle = renderState.m_context.createTexture();\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, this.m_textureHandle);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MIN_FILTER,\n        this.m_nearestPixel ? vgl.GL.NEAREST : vgl.GL.LINEAR);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MAG_FILTER,\n        this.m_nearestPixel ? vgl.GL.NEAREST : vgl.GL.LINEAR);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_S, vgl.GL.CLAMP_TO_EDGE);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_T, vgl.GL.CLAMP_TO_EDGE);\n\n    if (this.m_image !== null) {\n      renderState.m_context.pixelStorei(vgl.GL.UNPACK_ALIGNMENT, 1);\n      renderState.m_context.pixelStorei(vgl.GL.UNPACK_FLIP_Y_WEBGL, true);\n\n      this.updateDimensions();\n      this.computeInternalFormatUsingImage();\n\n      // console.log('m_internalFormat ' + this.m_internalFormat);\n      // console.log('m_pixelFormat ' + this.m_pixelFormat);\n      // console.log('m_pixelDataType ' + this.m_pixelDataType);\n\n      // FOR now support only 2D textures\n      renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D, 0, this.m_internalFormat,\n        this.m_pixelFormat, this.m_pixelDataType, this.m_image);\n    } else {\n      renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D, 0, this.m_internalFormat,\n        this.m_width, this.m_height, 0, this.m_pixelFormat, this.m_pixelDataType, null);\n    }\n\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, null);\n    m_setupTimestamp.modified();\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create texture and if already created use it\n   *\n   * @param renderState\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.bind = function (renderState) {\n    // TODO Call setup via material setup\n    if (this.getMTime() > m_setupTimestamp.getMTime()) {\n      this.setup(renderState);\n    }\n\n    activateTextureUnit(renderState);\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, this.m_textureHandle);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Turn off the use of this texture\n   *\n   * @param renderState\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.undoBind = function (renderState) {\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, null);\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get image used by the texture\n   *\n   * @returns {vgl.image}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.image = function () {\n    return this.m_image;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set image for the texture\n   *\n   * @param {vgl.image} image\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setImage = function (image) {\n    if (image !== null) {\n      this.m_image = image;\n      this.updateDimensions();\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get nearest pixel flag for the texture\n   *\n   * @returns boolean\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.nearestPixel = function () {\n    return this.m_nearestPixel;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set nearest pixel flag for the texture\n   *\n   * @param {boolean} nearest pixel flag\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setNearestPixel = function (nearest) {\n    nearest = nearest ? true : false;\n    if (nearest !== this.m_nearestPixel) {\n      this.m_nearestPixel = nearest;\n      this.modified();\n      return true;\n    }\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get texture unit of the texture\n   *\n   * @returns {number}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.textureUnit = function () {\n    return this.m_textureUnit;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set texture unit of the texture. Default is 0.\n   *\n   * @param {number} unit\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setTextureUnit = function (unit) {\n    if (this.m_textureUnit === unit) {\n      return false;\n    }\n\n    this.m_textureUnit = unit;\n    this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get width of the texture\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.width = function () {\n    return this.m_width;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set width of the texture\n   *\n   * @param {number} width\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setWidth = function (width) {\n    if (m_that.m_width !== width) {\n      m_that.m_width = width;\n      m_that.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get width of the texture\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.height = function () {\n    return m_that.m_height;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set height of the texture\n   *\n   * @param {number} height\n   * @returns {vgl.texture}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setHeight = function (height) {\n    if (m_that.m_height !== height) {\n      m_that.m_height = height;\n      m_that.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get depth of the texture\n   *\n   * @returns {number}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.depth = function () {\n    return this.m_depth;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set depth of the texture\n   *\n   * @param {number} depth\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setDepth = function (depth) {\n    if (this.m_image === null) {\n      return false;\n    }\n\n    this.m_depth = depth;\n    this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get the texture handle (id) of the texture\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.textureHandle = function () {\n    return this.m_textureHandle;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get internal format of the texture\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.internalFormat = function () {\n    return this.m_internalFormat;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set internal format of the texture\n   *\n   * @param internalFormat\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setInternalFormat = function (internalFormat) {\n    if (this.m_internalFormat !== internalFormat) {\n      this.m_internalFormat = internalFormat;\n      this.modified();\n      return true;\n    }\n\n    return false;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get pixel format of the texture\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.pixelFormat = function () {\n    return this.m_pixelFormat;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set pixel format of the texture\n   *\n   * @param pixelFormat\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setPixelFormat = function (pixelFormat) {\n    if (this.m_image === null) {\n      return false;\n    }\n\n    this.m_pixelFormat = pixelFormat;\n    this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get pixel data type\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.pixelDataType = function () {\n    return this.m_pixelDataType;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set pixel data type\n   *\n   * @param pixelDataType\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setPixelDataType = function (pixelDataType) {\n    if (this.m_image === null) {\n      return false;\n    }\n\n    this.m_pixelDataType = pixelDataType;\n\n    this.modified();\n\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Compute internal format of the texture\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.computeInternalFormatUsingImage = function () {\n    // Currently image does not define internal format\n    // and hence it's pixel format is the only way to query\n    // information on how color has been stored.\n    // switch (this.m_image.pixelFormat()) {\n    // case vgl.GL.RGB:\n    // this.m_internalFormat = vgl.GL.RGB;\n    // break;\n    // case vgl.GL.RGBA:\n    // this.m_internalFormat = vgl.GL.RGBA;\n    // break;\n    // case vgl.GL.Luminance:\n    // this.m_internalFormat = vgl.GL.Luminance;\n    // break;\n    // case vgl.GL.LuminanceAlpha:\n    // this.m_internalFormat = vgl.GL.LuminanceAlpha;\n    // break;\n    // // Do nothing when image pixel format is none or undefined.\n    // default:\n    // break;\n    // };\n\n    // TODO Fix this\n    this.m_internalFormat = vgl.GL.RGBA;\n    this.m_pixelFormat = vgl.GL.RGBA;\n    this.m_pixelDataType = vgl.GL.UNSIGNED_BYTE;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update texture dimensions\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.updateDimensions = function () {\n    if (this.m_image !== null) {\n      this.m_width = this.m_image.width;\n      this.m_height = this.m_image.height;\n      this.m_depth = 0; // Only 2D images are supported now\n    }\n  };\n\n  return this;\n};\n\ninherit(vgl.texture, vgl.materialAttribute);\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class lookupTable\n *\n * @class\n * @returns {vgl.lookupTable}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.lookupTable = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.lookupTable)) {\n    return new vgl.lookupTable();\n  }\n  vgl.texture.call(this);\n\n  var m_setupTimestamp = vgl.timestamp(),\n      m_range = [0, 0];\n\n  this.m_colorTable = //paraview bwr colortable\n    [0.07514311, 0.468049805, 1, 1,\n     0.247872569, 0.498782363, 1, 1,\n     0.339526309, 0.528909511, 1, 1,\n     0.409505078, 0.558608486, 1, 1,\n     0.468487184, 0.588057293, 1, 1,\n     0.520796675, 0.617435078, 1, 1,\n     0.568724526, 0.646924167, 1, 1,\n     0.613686735, 0.676713218, 1, 1,\n     0.656658579, 0.707001303, 1, 1,\n     0.698372844, 0.738002964, 1, 1,\n     0.739424025, 0.769954435, 1, 1,\n     0.780330104, 0.803121429, 1, 1,\n     0.821573924, 0.837809045, 1, 1,\n     0.863634967, 0.874374691, 1, 1,\n     0.907017747, 0.913245283, 1, 1,\n     0.936129275, 0.938743558, 0.983038586, 1,\n     0.943467973, 0.943498599, 0.943398095, 1,\n     0.990146732, 0.928791426, 0.917447482, 1,\n     1, 0.88332677, 0.861943246, 1,\n     1, 0.833985467, 0.803839606, 1,\n     1, 0.788626485, 0.750707739, 1,\n     1, 0.746206642, 0.701389973, 1,\n     1, 0.70590052, 0.654994046, 1,\n     1, 0.667019783, 0.610806959, 1,\n     1, 0.6289553, 0.568237474, 1,\n     1, 0.591130233, 0.526775617, 1,\n     1, 0.552955184, 0.485962266, 1,\n     1, 0.513776083, 0.445364274, 1,\n     1, 0.472800903, 0.404551679, 1,\n     1, 0.428977855, 0.363073592, 1,\n     1, 0.380759558, 0.320428137, 1,\n     0.961891484, 0.313155629, 0.265499262, 1,\n     0.916482116, 0.236630659, 0.209939162, 1].map(\n             function (x) { return x * 255; });\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create lookup table, initialize parameters, and bind data to it\n   *\n   * @param {vgl.renderState} renderState\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setup = function (renderState) {\n    if (this.textureUnit() === 0) {\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE0);\n    } else if (this.textureUnit() === 1) {\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE1);\n    }\n\n    renderState.m_context.deleteTexture(this.m_textureHandle);\n    this.m_textureHandle = renderState.m_context.createTexture();\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, this.m_textureHandle);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MIN_FILTER, vgl.GL.LINEAR);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MAG_FILTER, vgl.GL.LINEAR);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_S, vgl.GL.CLAMP_TO_EDGE);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_T, vgl.GL.CLAMP_TO_EDGE);\n    renderState.m_context.pixelStorei(vgl.GL.UNPACK_ALIGNMENT, 1);\n\n    this.m_width = this.m_colorTable.length / 4;\n    this.m_height = 1;\n    this.m_depth = 0;\n    renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D,\n        0, vgl.GL.RGBA, this.m_width, this.m_height, this.m_depth,\n        vgl.GL.RGBA, vgl.GL.UNSIGNED_BYTE, new Uint8Array(this.m_colorTable));\n\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, null);\n    m_setupTimestamp.modified();\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get color table used by the lookup table\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.colorTable = function () {\n    return this.m_colorTable;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set color table used by the lookup table\n   *\n   * @param colors\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setColorTable = function (colors) {\n    if (this.m_colorTable === colors) {\n      return false;\n    }\n\n    this.m_colorTable = colors;\n    this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get scalar range\n   *\n   * @returns {Array}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.range = function () {\n    return m_range;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set scalar range for the lookup table\n   *\n   * @param range\n   * @returns {boolean}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.setRange = function (range) {\n    if (m_range === range) {\n      return false;\n    }\n    m_range = range;\n    this.modified();\n    return true;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Given a [min,max] range update the lookup table range\n   *\n   * @param range\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.updateRange = function (range) {\n    if (!(range instanceof Array)) {\n      console.log('[error] Invalid data type for range. Requires array [min,max]');\n    }\n\n    if (range[0] < m_range[0]) {\n      m_range[0] = range[0];\n      this.modified();\n    }\n\n    if (range[1] > m_range[1]) {\n      m_range[1] = range[1];\n      this.modified();\n    }\n  };\n\n  return this;\n};\n\ninherit(vgl.lookupTable, vgl.texture);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, mat4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class uniform\n *\n * @param type\n * @param name\n * @returns {vgl.uniform} OpenGL uniform encapsulation\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.uniform = function (type, name) {\n  'use strict';\n\n  if (!(this instanceof vgl.uniform)) {\n    return new vgl.uniform(type, name);\n  }\n\n  this.getTypeNumberOfComponents = function (type) {\n    switch (type) {\n      case vgl.GL.FLOAT:\n      case vgl.GL.INT:\n      case vgl.GL.BOOL:\n        return 1;\n\n      case vgl.GL.FLOAT_VEC2:\n      case vgl.GL.INT_VEC2:\n      case vgl.GL.BOOL_VEC2:\n        return 2;\n\n      case vgl.GL.FLOAT_VEC3:\n      case vgl.GL.INT_VEC3:\n      case vgl.GL.BOOL_VEC3:\n        return 3;\n\n      case vgl.GL.FLOAT_VEC4:\n      case vgl.GL.INT_VEC4:\n      case vgl.GL.BOOL_VEC4:\n        return 4;\n\n      case vgl.GL.FLOAT_MAT3:\n        return 9;\n\n      case vgl.GL.FLOAT_MAT4:\n        return 16;\n\n      default:\n        return 0;\n    }\n  };\n\n  var m_type = type,\n      m_name = name,\n      m_dataArray = [];\n\n  m_dataArray.length = this.getTypeNumberOfComponents(m_type);\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get name of the uniform\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.name = function () {\n    return m_name;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get type of the uniform\n   *\n   * @returns {*}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.type = function () {\n    return m_type;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get value of the uniform\n   *\n   * @returns {Array}\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.get = function () {\n    return m_dataArray;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set value of the uniform\n   *\n   * @param value\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.set = function (value) {\n    var i = 0, lendata = m_dataArray.length;\n    if (lendata !== 1) {\n      for (i = 0; i < lendata; i += 1) {\n        m_dataArray[i] = value[i];\n      }\n    } else {\n      m_dataArray[0] = value;\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Call GL and pass updated values to the current shader\n   *\n   * @param location\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.callGL = function (renderState, location) {\n    switch (m_type) {\n      case vgl.GL.BOOL:\n      case vgl.GL.INT:\n        renderState.m_context.uniform1iv(location, m_dataArray);\n        break;\n      case vgl.GL.FLOAT:\n        renderState.m_context.uniform1fv(location, m_dataArray);\n        break;\n      case vgl.GL.BOOL_VEC2:\n      case vgl.GL.INT_VEC2:\n        renderState.m_context.uniform2iv(location, m_dataArray);\n        break;\n      case vgl.GL.FLOAT_VEC2:\n        renderState.m_context.uniform2fv(location, m_dataArray);\n        break;\n      case vgl.GL.BOOL_VEC3:\n      case vgl.GL.INT_VEC3:\n        renderState.m_context.uniform3iv(location, m_dataArray);\n        break;\n      case vgl.GL.FLOAT_VEC3:\n        renderState.m_context.uniform3fv(location, m_dataArray);\n        break;\n      case vgl.GL.BOOL_VEC4:\n      case vgl.GL.INT_VEC4:\n        renderState.m_context.uniform4iv(location, m_dataArray);\n        break;\n      case vgl.GL.FLOAT_VEC4:\n        renderState.m_context.uniform4fv(location, m_dataArray);\n        break;\n      case vgl.GL.FLOAT_MAT3:\n        renderState.m_context.uniformMatrix3fv(location, vgl.GL.FALSE, m_dataArray);\n        break;\n      case vgl.GL.FLOAT_MAT4:\n        renderState.m_context.uniformMatrix4fv(location, vgl.GL.FALSE, m_dataArray);\n        break;\n      default:\n        break;\n    }\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Virtual method to update the uniform\n   *\n   * Should be implemented by the derived class.\n   *\n   * @param renderState\n   * @param program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.update = function (renderState, program) {\n    void renderState; /* unused parameter */\n    void program; /* unused parameter */\n    // Should be implemented by the derived class\n  };\n\n  return this;\n};\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create new instance of class modelViewUniform\n *\n * @param name\n * @returns {vgl.modelViewUniform}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.modelViewUniform = function (name) {\n  'use strict';\n\n  if (!(this instanceof vgl.modelViewUniform)) {\n    return new vgl.modelViewUniform(name);\n  }\n\n  if (!name) {\n    name = 'modelViewMatrix';\n  }\n\n  vgl.uniform.call(this, vgl.GL.FLOAT_MAT4, name);\n\n  this.set(mat4.create());\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update the uniform given a render state and shader program\n   *\n   * @param {vgl.renderState} renderState\n   * @param {vgl.shaderProgram} program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.update = function (renderState, program) {\n    void program; /* unused parameter */\n    this.set(renderState.m_modelViewMatrix);\n  };\n\n  return this;\n};\n\ninherit(vgl.modelViewUniform, vgl.uniform);\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create new instance of class modelViewOriginUniform.\n *\n * @param name\n * @param {array} origin a triplet of floats.\n * @returns {vgl.modelViewUniform}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.modelViewOriginUniform = function (name, origin) {\n  'use strict';\n\n  if (!(this instanceof vgl.modelViewOriginUniform)) {\n    return new vgl.modelViewOriginUniform(name, origin);\n  }\n\n  if (!name) {\n    name = 'modelViewMatrix';\n  }\n  origin = origin || [0, 0, 0];\n\n  var m_origin = [origin[0], origin[1], origin[2] || 0];\n\n  vgl.uniform.call(this, vgl.GL.FLOAT_MAT4, name);\n\n  this.set(mat4.create());\n\n  /**\n   * Change the origin used by the uniform view matrix.\n   *\n   * @param {array} origin a triplet of floats.\n   */\n  this.setOrigin = function (origin) {\n    origin = origin || [0, 0, 0];\n    m_origin = [origin[0], origin[1], origin[2] || 0];\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update the uniform given a render state and shader program.  This offsets\n   * the modelViewMatrix by the origin, and, if the model view should be\n   * aligned, aligns it appropriately.  The alignment must be done after the\n   * origin offset to maintain precision.\n   *\n   * @param {vgl.renderState} renderState\n   * @param {vgl.shaderProgram} program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.update = function (renderState, program) {\n    void program; /* unused parameter */\n    var view = renderState.m_modelViewMatrix;\n    if (renderState.m_modelViewAlignment) {\n      /* adjust alignment before origin.  Otherwise, a changing origin can\n       * affect the rounding choice and result in a 1 pixe jitter. */\n      var align = renderState.m_modelViewAlignment;\n      /* Don't modify the orignal matrix.  If we are in an environment where\n       * you can't slice an Float32Array, switch to a regular array */\n      view = view.slice ? view.slice() : Array.prototype.slice.call(view);\n      /* view[12] and view[13] are the x and y offsets.  align.round is the\n       * units-per-pixel, and align.dx and .dy are either 0 or half the size of\n       * a unit-per-pixel.  The alignment guarantees that the texels are\n       * aligned with screen pixels. */\n      view[12] = Math.round(view[12] / align.roundx) * align.roundx + align.dx;\n      view[13] = Math.round(view[13] / align.roundy) * align.roundy + align.dy;\n    }\n    view = mat4.translate(mat4.create(), view, m_origin);\n    this.set(view);\n  };\n\n  return this;\n};\n\ninherit(vgl.modelViewOriginUniform, vgl.uniform);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class projectionUniform\n *\n * @param name\n * @returns {vgl.projectionUniform}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.projectionUniform = function (name) {\n  'use strict';\n\n  if (!(this instanceof vgl.projectionUniform)) {\n    return new vgl.projectionUniform(name);\n  }\n\n  if (!name) {\n    name = 'projectionMatrix';\n  }\n\n  vgl.uniform.call(this, vgl.GL.FLOAT_MAT4, name);\n\n  this.set(mat4.create());\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update the uniform given a render state and shader program\n   *\n   * @param renderState\n   * @param program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.update = function (renderState, program) {\n    void program; /* unused parameter */\n    this.set(renderState.m_projectionMatrix);\n  };\n\n  return this;\n};\n\ninherit(vgl.projectionUniform, vgl.uniform);\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class floatUniform\n *\n * @param name\n * @param value\n * @returns {vgl.floatUniform}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.floatUniform = function (name, value) {\n  'use strict';\n\n  if (!(this instanceof vgl.floatUniform)) {\n    return new vgl.floatUniform(name, value);\n  }\n\n  if (!name) {\n    name = 'floatUniform';\n  }\n\n  value = value === undefined ? 1.0 : value;\n\n  vgl.uniform.call(this, vgl.GL.FLOAT, name);\n\n  this.set(value);\n};\n\ninherit(vgl.floatUniform, vgl.uniform);\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create new instance of class normalMatrixUniform\n *\n * @param name\n * @returns {vgl.normalMatrixUniform}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.normalMatrixUniform = function (name) {\n  'use strict';\n\n  if (!(this instanceof vgl.normalMatrixUniform)) {\n    return new vgl.normalMatrixUniform(name);\n  }\n\n  if (!name) {\n    name = 'normalMatrix';\n  }\n\n  vgl.uniform.call(this, vgl.GL.FLOAT_MAT4, name);\n\n  this.set(mat4.create());\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Update the uniform given a render state and shader program\n   *\n   * @param {vgl.renderState} renderState\n   * @param {vgl.shaderProgram} program\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.update = function (renderState, program) {\n    void program; /* unused parameter */\n    this.set(renderState.m_normalMatrix);\n  };\n\n  return this;\n};\n\ninherit(vgl.normalMatrixUniform, vgl.uniform);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Keys to identify vertex attributes\n *\n * @type {{Position: number, Normal: number, TextureCoordinate: number,\n *         Color: number, Scalar: number, Scalar2: number, Scalar3: number,\n *         Scalar4: number, Scalar5: number, Scalar6: number, Scalar7: number,\n *         CountAttributeIndex: number}}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.vertexAttributeKeys = {\n  'Position' : 0,\n  'Normal' : 1,\n  'TextureCoordinate' : 2,\n  'Color' : 3,\n  'Scalar': 4,\n  'CountAttributeIndex' : 5\n};\n\nvgl.vertexAttributeKeysIndexed = {\n  'Zero' : 0,\n  'One' : 1,\n  'Two' : 2,\n  'Three' : 3,\n  'Four' : 4,\n  'Five' : 5,\n  'Six' : 6,\n  'Seven' : 7,\n  'Eight' : 8,\n  'Nine' : 9\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of vertexAttribute\n *\n * @param {string} name\n * @returns {vgl.vertexAttribute}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.vertexAttribute = function (name) {\n  'use strict';\n\n  if (!(this instanceof vgl.vertexAttribute)) {\n    return new vgl.vertexAttribute(name);\n  }\n\n  var m_name = name;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get name of the vertex attribute\n   *\n   * @returns {string}\n   */\n  //////////////////////////////////////////////////////////////////////////////\n  this.name = function () {\n    return m_name;\n  };\n\n  //////////////////////////////////////////////////////////////////////////////\n  /**\n   * Bind vertex data to the given render state\n   *\n   * @param {vgl.renderState} renderState\n   * @param {vgl.vertexAttributeKeys} key\n   */\n  //////////////////////////////////////////////////////////////////////////////\n  this.bindVertexData = function (renderState, key) {\n    var geometryData = renderState.m_mapper.geometryData(),\n        sourceData = geometryData.sourceData(key),\n        program = renderState.m_material.shaderProgram();\n\n    renderState.m_context.vertexAttribPointer(program.attributeLocation(\n        m_name), sourceData\n        .attributeNumberOfComponents(key), sourceData.attributeDataType(key),\n                           sourceData.normalized(key), sourceData\n                               .attributeStride(key), sourceData\n                               .attributeOffset(key));\n\n    renderState.m_context.enableVertexAttribArray(program.attributeLocation(m_name));\n  };\n\n  //////////////////////////////////////////////////////////////////////////////\n  /**\n   * Undo bind vertex data for a given render state\n   *\n   * @param {vgl.renderState} renderState\n   * @param {vgl.vertexAttributeKeys} key\n   */\n  //////////////////////////////////////////////////////////////////////////////\n  this.undoBindVertexData = function (renderState, key) {\n    key = key; /* unused parameter */\n\n    var program = renderState.m_material.shaderProgram();\n\n    renderState.m_context.disableVertexAttribArray(program.attributeLocation(m_name));\n  };\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n///////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class source\n *\n * @returns {vgl.source}\n */\n///////////////////////////////////////////////////////////////////////////////\nvgl.source = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.source)) {\n    return new vgl.source();\n  }\n\n  vgl.object.call(this);\n\n  /////////////////////////////////////////////////////////////////////////////\n  /**\n   * Virtual function to create a source instance\n   */\n  /////////////////////////////////////////////////////////////////////////////\n  this.create = function () {\n  };\n\n  return this;\n};\n\ninherit(vgl.source, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class planeSource\n *\n * @class\n * @returns {vgl.planeSource}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.planeSource = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.planeSource)) {\n    return new vgl.planeSource();\n  }\n  vgl.source.call(this);\n\n  var m_origin = [0.0, 0.0, 0.0],\n      m_point1 = [1.0, 0.0, 0.0],\n      m_point2 = [0.0, 1.0, 0.0],\n      m_normal = [0.0, 0.0, 1.0],\n      m_xresolution = 1,\n      m_yresolution = 1,\n      m_geom = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set origin of the plane\n   *\n   * @param x\n   * @param y\n   * @param z\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setOrigin = function (x, y, z) {\n    m_origin[0] = x;\n    m_origin[1] = y;\n    m_origin[2] = z;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set point that defines the first axis of the plane\n   *\n   * @param x\n   * @param y\n   * @param z\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPoint1 = function (x, y, z) {\n    m_point1[0] = x;\n    m_point1[1] = y;\n    m_point1[2] = z;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set point that defines the first axis of the plane\n   *\n   * @param x\n   * @param y\n   * @param z\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPoint2 = function (x, y, z) {\n    m_point2[0] = x;\n    m_point2[1] = y;\n    m_point2[2] = z;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create a plane geometry given input parameters\n   *\n   * @returns {null}\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.create = function () {\n    m_geom = new vgl.geometryData();\n\n    var x = [], tc = [], v1 = [], v2 = [],\n        pts = [], i, j, ii, numPts,\n        posIndex = 0, normIndex = 0, colorIndex = 0, texCoordIndex = 0,\n        positions = [], normals = [], colors = [],\n        texCoords = [], indices = [], tristrip = null,\n        sourcePositions = null, sourceColors = null, sourceTexCoords;\n\n    x.length = 3;\n    tc.length = 2;\n    v1.length = 3;\n    v2.length = 3;\n    pts.length = 3;\n\n    // Check input\n    for (i = 0; i < 3; i += 1) {\n      v1[i] = m_point1[i] - m_origin[i];\n      v2[i] = m_point2[i] - m_origin[i];\n    }\n\n    // TODO Compute center and normal\n    // Set things up; allocate memory\n    numPts = (m_xresolution + 1) * (m_yresolution + 1);\n    positions.length = 3 * numPts;\n    normals.length = 3 * numPts;\n    texCoords.length = 2 * numPts;\n    indices.length = numPts;\n\n    for (i = 0; i < (m_yresolution + 1); i += 1) {\n      tc[1] = i / m_yresolution;\n\n      for (j = 0; j < (m_xresolution + 1); j += 1) {\n        tc[0] = j / m_xresolution;\n\n        for (ii = 0; ii < 3; ii += 1) {\n          x[ii] = m_origin[ii] + tc[0] * v1[ii] + tc[1] * v2[ii];\n        }\n\n        //jshint plusplus: false\n        positions[posIndex++] = x[0];\n        positions[posIndex++] = x[1];\n        positions[posIndex++] = x[2];\n\n        colors[colorIndex++] = 1.0;\n        colors[colorIndex++] = 1.0;\n        colors[colorIndex++] = 1.0;\n\n        normals[normIndex++] = m_normal[0];\n        normals[normIndex++] = m_normal[1];\n        normals[normIndex++] = m_normal[2];\n\n        texCoords[texCoordIndex++] = tc[0];\n        texCoords[texCoordIndex++] = tc[1];\n        //jshint plusplus: true\n      }\n    }\n\n    /// Generate polygon connectivity\n    for (i = 0; i < m_yresolution; i += 1) {\n      for (j = 0; j < m_xresolution; j += 1) {\n        pts[0] = j + i * (m_xresolution + 1);\n        pts[1] = pts[0] + 1;\n        pts[2] = pts[0] + m_xresolution + 2;\n        pts[3] = pts[0] + m_xresolution + 1;\n      }\n    }\n\n    for (i = 0; i < numPts; i += 1) {\n      indices[i] = i;\n    }\n\n    tristrip = new vgl.triangleStrip();\n    tristrip.setIndices(indices);\n\n    sourcePositions = vgl.sourceDataP3fv();\n    sourcePositions.pushBack(positions);\n\n    sourceColors = vgl.sourceDataC3fv();\n    sourceColors.pushBack(colors);\n\n    sourceTexCoords = vgl.sourceDataT2fv();\n    sourceTexCoords.pushBack(texCoords);\n\n    m_geom.addSource(sourcePositions);\n    m_geom.addSource(sourceColors);\n    m_geom.addSource(sourceTexCoords);\n    m_geom.addPrimitive(tristrip);\n\n    return m_geom;\n  };\n};\n\ninherit(vgl.planeSource, vgl.source);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class pointSource\n *\n * @class\n * @returns {vgl.pointSource}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.pointSource = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.pointSource)) {\n    return new vgl.pointSource();\n  }\n  vgl.source.call(this);\n\n  var m_this = this,\n      m_positions = [],\n      m_colors = [],\n      m_textureCoords = [],\n      m_size = [],\n      m_geom = null;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get positions for the points\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getPositions = function () {\n    return m_positions;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set positions for the source\n   *\n   * @param positions\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPositions = function (positions) {\n    if (positions instanceof Array) {\n      m_positions = positions;\n    } else {\n      console\n          .log('[ERROR] Invalid data type for positions. Array is required.');\n    }\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get colors for the points\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getColors = function () {\n    return m_colors;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set colors for the points\n   *\n   * @param colors\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setColors = function (colors) {\n    if (colors instanceof Array) {\n      m_colors = colors;\n    } else {\n      console.log('[ERROR] Invalid data type for colors. Array is required.');\n    }\n\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get size for the points\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getSize = function () {\n    return m_size;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set colors for the points\n   *\n   * @param colors\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setSize = function (size) {\n    m_size = size;\n    this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set texture coordinates for the points\n   *\n   * @param texcoords\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setTextureCoordinates = function (texcoords) {\n    if (texcoords instanceof Array) {\n      m_textureCoords = texcoords;\n    } else {\n      console.log('[ERROR] Invalid data type for ' +\n                  'texture coordinates. Array is required.');\n    }\n    m_this.modified();\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create a point geometry given input parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.create = function () {\n    m_geom = new vgl.geometryData();\n\n    if (m_positions.length % 3 !== 0) {\n      console.log('[ERROR] Invalid length of the points array');\n      return;\n    }\n\n    var numPts = m_positions.length / 3,\n        i = 0,\n        indices = [],\n        pointsPrimitive,\n        sourcePositions,\n        sourceColors,\n        sourceTexCoords,\n        sourceSize;\n\n    indices.length = numPts;\n    for (i = 0; i < numPts; i += 1) {\n      indices[i] = i;\n    }\n\n    /// Generate array of size if needed\n    sourceSize = vgl.sourceDataDf();\n    if (numPts !== m_size.length) {\n      for (i = 0; i < numPts; i += 1) {\n        sourceSize.pushBack(m_size);\n      }\n    } else {\n      sourceSize.setData(m_size);\n    }\n    m_geom.addSource(sourceSize);\n\n    pointsPrimitive = new vgl.points();\n    pointsPrimitive.setIndices(indices);\n\n    sourcePositions = vgl.sourceDataP3fv();\n    sourcePositions.pushBack(m_positions);\n    m_geom.addSource(sourcePositions);\n\n    if ((m_colors.length > 0) && m_colors.length === m_positions.length) {\n      sourceColors = vgl.sourceDataC3fv();\n      sourceColors.pushBack(m_colors);\n      m_geom.addSource(sourceColors);\n    } else if ((m_colors.length > 0) && m_colors.length !== m_positions.length) {\n      console\n          .log('[ERROR] Number of colors are different than number of points');\n    }\n\n    if (m_textureCoords.length > 0 &&\n        m_textureCoords.length === m_positions.length) {\n      sourceTexCoords = vgl.sourceDataT2fv();\n      sourceTexCoords.pushBack(m_textureCoords);\n      m_geom.addSource(sourceTexCoords);\n    } else if (m_textureCoords.length > 0 &&\n        (m_textureCoords.length / 2) !== (m_positions.length / 3)) {\n      console\n          .log('[ERROR] Number of texture coordinates are different than ' +\n               'number of points');\n    }\n\n    m_geom.addPrimitive(pointsPrimitive);\n\n    return m_geom;\n  };\n};\n\ninherit(vgl.pointSource, vgl.source);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class lineSource\n *\n * @class\n * @returns {vgl.lineSource}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.lineSource = function (positions, colors) {\n  'use strict';\n\n  if (!(this instanceof vgl.lineSource)) {\n    return new vgl.lineSource();\n  }\n  vgl.source.call(this);\n\n  var m_positions = positions,\n      m_colors = colors;\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set start positions for the lines\n   *\n   * @param positions\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setPositions = function (positions) {\n    if (positions instanceof Array) {\n      m_positions = positions;\n      this.modified();\n      return true;\n    }\n\n    console\n      .log('[ERROR] Invalid data type for positions. Array is required.');\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Set colors for the lines\n   *\n   * @param colors\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setColors = function (colors) {\n    if (colors instanceof Array) {\n      m_colors = colors;\n      this.modified();\n      return true;\n    }\n\n    console.log('[ERROR] Invalid data type for colors. Array is required.');\n    return false;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create a point geometry given input parameters\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.create = function () {\n    if (!m_positions) {\n      console.log('[error] Invalid positions');\n      return;\n    }\n\n    if (m_positions.length % 3 !== 0) {\n      console.log('[error] Line source requires 3d points');\n      return;\n    }\n\n    if (m_positions.length % 3 !== 0) {\n      console.log('[ERROR] Invalid length of the points array');\n      return;\n    }\n\n    var m_geom = new vgl.geometryData(),\n        numPts = m_positions.length / 3,\n        i,\n        indices = [],\n        linesPrimitive,\n        sourcePositions,\n        sourceColors;\n\n    indices.length = numPts;\n\n    for (i = 0; i < numPts; i += 1) {\n      indices[i] = i;\n    }\n\n    linesPrimitive = new vgl.lines();\n    linesPrimitive.setIndices(indices);\n\n    sourcePositions = vgl.sourceDataP3fv();\n    sourcePositions.pushBack(m_positions);\n    m_geom.addSource(sourcePositions);\n\n    if (m_colors && (m_colors.length > 0) &&\n         m_colors.length === m_positions.length) {\n      sourceColors = vgl.sourceDataC3fv();\n      sourceColors.pushBack(m_colors);\n      m_geom.addSource(sourceColors);\n    } else if (m_colors && (m_colors.length > 0) &&\n             m_colors.length !== m_positions.length) {\n      console\n        .log('[error] Number of colors are different than number of points');\n    }\n\n    m_geom.addPrimitive(linesPrimitive);\n\n    return m_geom;\n  };\n};\n\ninherit(vgl.lineSource, vgl.source);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global document, vgl, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class utils\n *\n * Utility class provides helper functions such as functions to create\n * shaders, geometry etc.\n *\n * @returns {vgl.utils}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.utils)) {\n    return new vgl.utils();\n  }\n  vgl.object.call(this);\n\n  return this;\n};\n\ninherit(vgl.utils, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Helper function to compute power of 2 number\n *\n * @param value\n * @param pow\n *\n * @returns {number}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.computePowerOfTwo = function (value, pow) {\n  'use strict';\n  pow = pow || 1;\n  while (pow < value) {\n    pow *= 2;\n  }\n  return pow;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of default vertex shader that uses a texture\n *\n * Helper function to create default vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createTextureVertexShader = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute vec3 textureCoord;',\n    'uniform mediump float pointSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying highp vec3 iTextureCoord;',\n    'void main(void)',\n    '{',\n    'gl_PointSize = pointSize;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    ' iTextureCoord = textureCoord;', '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of default fragment shader that uses a texture\n *\n * Helper function to create default fragment shader with sampler\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createTextureFragmentShader = function (context) {\n  'use strict';\n  var fragmentShaderSource = [\n    'varying highp vec3 iTextureCoord;',\n    'uniform sampler2D sampler2d;',\n    'uniform mediump float opacity;',\n    'void main(void) {',\n    'gl_FragColor = vec4(texture2D(sampler2d, vec2(iTextureCoord.s, ' +\n                        'iTextureCoord.t)).xyz, opacity);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create variation of createTextureFragmentShader which uses texture alpha\n *\n * Helper function to create default fragment shader with sampler\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createRgbaTextureFragmentShader = function (context) {\n  'use strict';\n  var fragmentShaderSource = [\n    'varying highp vec3 iTextureCoord;',\n    'uniform sampler2D sampler2d;',\n    'uniform mediump float opacity;',\n    'void main(void) {',\n    '  mediump vec4 color = vec4(texture2D(sampler2d, vec2(' +\n                                'iTextureCoord.s, iTextureCoord.t)).xyzw);',\n    '  color.w *= opacity;',\n    '  gl_FragColor = color;',\n    '}'\n  ].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of default vertex shader\n *\n * Helper function to create default vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createVertexShader = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute vec3 vertexColor;',\n    'uniform mediump float pointSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying mediump vec3 iVertexColor;',\n    'varying highp vec3 iTextureCoord;',\n    'void main(void)',\n    '{',\n    'gl_PointSize = pointSize;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    ' iVertexColor = vertexColor;', '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of default vertex shader\n *\n * Helper function to create default vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointVertexShader = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute vec3 vertexColor;',\n    'attribute float vertexSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying mediump vec3 iVertexColor;',\n    'varying highp vec3 iTextureCoord;',\n    'void main(void)',\n    '{',\n    'gl_PointSize =  vertexSize;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    ' iVertexColor = vertexColor;', '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of vertex shader with a solid color\n *\n * Helper function to create default vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createVertexShaderSolidColor = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'uniform mediump float pointSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'void main(void)',\n    '{',\n    'gl_PointSize = pointSize;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of vertex shader that passes values through\n * for color mapping\n *\n * Helper function to create default vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createVertexShaderColorMap = function (context, min, max) {\n  'use strict';\n  min = min; /* unused parameter */\n  max = max; /* unused parameter */\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute float vertexScalar;',\n    'uniform mediump float pointSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'uniform float lutMin;',\n    'uniform float lutMax;',\n    'varying mediump float iVertexScalar;',\n    'void main(void)',\n    '{',\n    'gl_PointSize = pointSize;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    'iVertexScalar = (vertexScalar-lutMin)/(lutMax-lutMin);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of default fragment shader\n *\n * Helper function to create default fragment shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createFragmentShader = function (context) {\n  'use strict';\n  var fragmentShaderSource = ['varying mediump vec3 iVertexColor;',\n                              'uniform mediump float opacity;',\n                              'void main(void) {',\n                              'gl_FragColor = vec4(iVertexColor, opacity);',\n                              '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a Phong vertex shader\n *\n * Helper function to create Phong vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPhongVertexShader = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute highp vec3 vertexPosition;',\n    'attribute mediump vec3 vertexNormal;',\n    'attribute mediump vec3 vertexColor;',\n\n    'uniform highp mat4 projectionMatrix;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 normalMatrix;',\n\n    'varying highp vec4 varPosition;',\n    'varying mediump vec3 varNormal;',\n    'varying mediump vec3 varVertexColor;',\n\n    'void main(void)',\n    '{',\n    'varPosition = modelViewMatrix * vec4(vertexPosition, 1.0);',\n    'gl_Position = projectionMatrix * varPosition;',\n    'varNormal = vec3(normalMatrix * vec4(vertexNormal, 0.0));',\n    'varVertexColor = vertexColor;',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of Phong fragment shader\n *\n * Helper function to create Phong fragment shader\n *\n * NOTE: Shader assumes directional light\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPhongFragmentShader = function (context) {\n  'use strict';\n  var fragmentShaderSource = [\n    'uniform mediump float opacity;',\n    'precision mediump float;',\n    'varying vec3 varNormal;',\n    'varying vec4 varPosition;',\n    'varying mediump vec3 varVertexColor;',\n    'const vec3 lightPos = vec3(0.0, 0.0,10000.0);',\n    'const vec3 ambientColor = vec3(0.01, 0.01, 0.01);',\n    'const vec3 specColor = vec3(0.0, 0.0, 0.0);',\n\n    'void main() {',\n    'vec3 normal = normalize(varNormal);',\n    'vec3 lightDir = normalize(lightPos);',\n    'vec3 reflectDir = -reflect(lightDir, normal);',\n    'vec3 viewDir = normalize(-varPosition.xyz);',\n\n    'float lambertian = max(dot(lightDir, normal), 0.0);',\n    'vec3 color = vec3(0.0);',\n    'if(lambertian > 0.0) {',\n    '  color = lambertian * varVertexColor;',\n    '}',\n    'gl_FragColor = vec4(color * opacity, 1.0 - opacity);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of fragment shader with an assigned constant color.\n *\n * Helper function to create default fragment shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createFragmentShaderSolidColor = function (context, color) {\n  'use strict';\n  var fragmentShaderSource = [\n    'uniform mediump float opacity;',\n    'void main(void) {',\n    'gl_FragColor = vec4(' + color[0] + ',' + color[1] + ',' + color[2] + ', opacity);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of fragment shader that maps values into colors bia lookup table\n *\n * Helper function to create default fragment shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createFragmentShaderColorMap = function (context) {\n  'use strict';\n  var fragmentShaderSource = [\n    'varying mediump float iVertexScalar;',\n    'uniform sampler2D sampler2d;',\n    'uniform mediump float opacity;',\n    'void main(void) {',\n    'gl_FragColor = vec4(texture2D(sampler2d, vec2(iVertexScalar, ' +\n            '0.0)).xyz, opacity);',\n    '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of vertex shader for point sprites\n *\n * Helper function to create default point sprites vertex shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointSpritesVertexShader = function (context) {\n  'use strict';\n  var vertexShaderSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute vec3 vertexColor;',\n    'uniform mediump vec2 pointSize;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'uniform float height;',\n    'varying mediump vec3 iVertexColor;',\n    'varying highp float iVertexScalar;',\n    'void main(void)',\n    '{',\n    'mediump float realPointSize = pointSize.y;',\n    'if (pointSize.x > pointSize.y) {',\n    '  realPointSize = pointSize.x;}',\n    'gl_PointSize = realPointSize ;',\n    'iVertexScalar = vertexPosition.z;',\n    'gl_Position = projectionMatrix * modelViewMatrix * ' +\n            'vec4(vertexPosition.xy, height, 1.0);',\n    ' iVertexColor = vertexColor;', '}'].join('\\n');\n  return vgl.getCachedShader(vgl.GL.VERTEX_SHADER, context,\n                             vertexShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of fragment shader for point sprites\n *\n * Helper function to create default point sprites fragment shader\n *\n * @param context\n * @returns {vgl.shader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointSpritesFragmentShader = function (context) {\n  'use strict';\n  var fragmentShaderSource = [\n    'varying mediump vec3 iVertexColor;',\n    'varying highp float iVertexScalar;',\n    'uniform sampler2D opacityLookup;',\n    'uniform highp float lutMin;',\n    'uniform highp float lutMax;',\n    'uniform sampler2D scalarsToColors;',\n    'uniform int useScalarsToColors;',\n    'uniform int useVertexColors;',\n    'uniform mediump vec2 pointSize;',\n    'uniform mediump float vertexColorWeight;',\n    'void main(void) {',\n    'mediump vec2 realTexCoord;',\n    'if (pointSize.x > pointSize.y) {',\n    '  realTexCoord = vec2(1.0, pointSize.y/pointSize.x) * gl_PointCoord;',\n    '} else {',\n    '  realTexCoord = vec2(pointSize.x/pointSize.y, 1.0) * gl_PointCoord;',\n    '}',\n    'highp float texOpacity = texture2D(opacityLookup, realTexCoord).w;',\n    'if (useScalarsToColors == 1) {',\n    '  gl_FragColor = vec4(texture2D(scalarsToColors, vec2((' +\n            'iVertexScalar - lutMin)/(lutMax - lutMin), 0.0)).xyz, ' +\n            'texOpacity);',\n    '} else if (useVertexColors == 1) {',\n    '  gl_FragColor = vec4(iVertexColor, texOpacity);',\n    '} else {',\n    '  gl_FragColor = vec4(texture2D(opacityLookup, realTexCoord).xyz, texOpacity);',\n    '}}'\n  ].join('\\n');\n  return vgl.getCachedShader(vgl.GL.FRAGMENT_SHADER, context,\n                             fragmentShaderSource);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of texture material\n *\n * Helper function to create a texture material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createTextureMaterial = function (isRgba, origin) {\n  'use strict';\n  var mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createTextureVertexShader(vgl.GL),\n      fragmentShader = null,\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      texCoordVertAttr = new vgl.vertexAttribute('textureCoord'),\n      pointsizeUniform = new vgl.floatUniform('pointSize', 5.0),\n      modelViewUniform,\n      projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n      samplerUniform = new vgl.uniform(vgl.GL.INT, 'sampler2d'),\n      opacityUniform = null;\n  if (origin !== undefined) {\n    modelViewUniform = new vgl.modelViewOriginUniform('modelViewMatrix',\n                                                      origin);\n  } else {\n    modelViewUniform = new vgl.modelViewUniform('modelViewMatrix');\n  }\n\n  samplerUniform.set(0);\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(texCoordVertAttr,\n                          vgl.vertexAttributeKeys.TextureCoordinate);\n  prog.addUniform(pointsizeUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n\n  if (isRgba) {\n    fragmentShader = vgl.utils.createRgbaTextureFragmentShader(vgl.GL);\n  } else {\n    fragmentShader = vgl.utils.createTextureFragmentShader(vgl.GL);\n  }\n  opacityUniform = new vgl.floatUniform('opacity', 1.0);\n  prog.addUniform(opacityUniform);\n\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of geometry material\n *\n * Helper function to create geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createGeometryMaterial = function () {\n  'use strict';\n  var mat = new vgl.material(),\n      prog = new vgl.shaderProgram(),\n      pointSize = 5.0,\n      opacity = 1.0,\n      vertexShader = vgl.utils.createVertexShader(vgl.GL),\n      fragmentShader = vgl.utils.createFragmentShader(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      colorVertAttr = new vgl.vertexAttribute('vertexColor'),\n      pointsizeUniform = new vgl.floatUniform('pointSize', pointSize),\n      opacityUniform = new vgl.floatUniform('opacity', opacity),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix');\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(colorVertAttr, vgl.vertexAttributeKeys.Color);\n  prog.addUniform(pointsizeUniform);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of geometry material\n *\n * Helper function to create geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointGeometryMaterial = function (opacity) {\n  'use strict';\n  opacity = opacity === undefined ? 1.0 : opacity;\n  var mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createPointVertexShader(vgl.GL),\n      fragmentShader = vgl.utils.createFragmentShader(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      colorVertAttr = new vgl.vertexAttribute('vertexColor'),\n      sizeVertAttr = new vgl.vertexAttribute('vertexSize'),\n      opacityUniform = new vgl.floatUniform('opacity', opacity),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix');\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(colorVertAttr, vgl.vertexAttributeKeys.Color);\n  prog.addVertexAttribute(sizeVertAttr, vgl.vertexAttributeKeys.Scalar);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of geometry material with the phong shader\n *\n * Helper function to create color phong shaded geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPhongMaterial = function () {\n  'use strict';\n  var mat = new vgl.material(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createPhongVertexShader(vgl.GL),\n      fragmentShader = vgl.utils.createPhongFragmentShader(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      normalVertAttr = new vgl.vertexAttribute('vertexNormal'),\n      colorVertAttr = new vgl.vertexAttribute('vertexColor'),\n      opacityUniform = new vgl.floatUniform('opacity', 1.0),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      normalUniform = new vgl.normalMatrixUniform('normalMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix');\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(normalVertAttr, vgl.vertexAttributeKeys.Normal);\n  prog.addVertexAttribute(colorVertAttr, vgl.vertexAttributeKeys.Color);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addUniform(normalUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  //mat.addAttribute(blend);\n  mat.addAttribute(prog);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of colored geometry material\n *\n * Helper function to create color geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createColorMaterial = function () {\n  'use strict';\n  var mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createVertexShader(vgl.GL),\n      fragmentShader = vgl.utils.createFragmentShader(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      texCoordVertAttr = new vgl.vertexAttribute('textureCoord'),\n      colorVertAttr = new vgl.vertexAttribute('vertexColor'),\n      pointsizeUniform = new vgl.floatUniform('pointSize', 5.0),\n      opacityUniform = new vgl.floatUniform('opacity', 1.0),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix');\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(colorVertAttr, vgl.vertexAttributeKeys.Color);\n  prog.addVertexAttribute(texCoordVertAttr,\n                          vgl.vertexAttributeKeys.TextureCoordinate);\n  prog.addUniform(pointsizeUniform);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of geometry material\n *\n * Helper function to create geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createColorMappedMaterial = function (lut) {\n  'use strict';\n  if (!lut) {\n    lut = new vgl.lookupTable();\n  }\n\n  var scalarRange = lut.range(),\n      mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createVertexShaderColorMap(\n        vgl.GL, scalarRange[0], scalarRange[1]),\n      fragmentShader = vgl.utils.createFragmentShaderColorMap(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      scalarVertAttr = new vgl.vertexAttribute('vertexScalar'),\n      pointsizeUniform = new vgl.floatUniform('pointSize', 5.0),\n      opacityUniform = new vgl.floatUniform('opacity', 1.0),\n      lutMinUniform = new vgl.floatUniform('lutMin', scalarRange[0]),\n      lutMaxUniform = new vgl.floatUniform('lutMax', scalarRange[1]),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n      samplerUniform = new vgl.uniform(vgl.GL.FLOAT, 'sampler2d'),\n      lookupTable = lut;\n\n  samplerUniform.set(0);\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(scalarVertAttr, vgl.vertexAttributeKeys.Scalar);\n  prog.addUniform(pointsizeUniform);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(lutMinUniform);\n  prog.addUniform(lutMaxUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n  mat.addAttribute(lookupTable);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Update color mapped material\n *\n * @param mat\n * @param scalarRange\n * @param lut\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.updateColorMappedMaterial = function (mat, lut) {\n  'use strict';\n  if (!mat) {\n    console.log('[warning] Invalid material. Nothing to update.');\n    return;\n  }\n\n  if (!lut) {\n    console.log('[warning] Invalid lookup table. Nothing to update.');\n    return;\n  }\n\n  var lutMin = mat.shaderProgram().uniform('lutMin'),\n      lutMax = mat.shaderProgram().uniform('lutMax');\n\n  lutMin.set(lut.range()[0]);\n  lutMax.set(lut.range()[1]);\n\n  // This will replace the existing lookup table\n  mat.setAttribute(lut);\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of solid color material\n *\n * Helper function to create geometry material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createSolidColorMaterial = function (color) {\n  'use strict';\n  if (!color) {\n    color = [1.0, 1.0, 1.0];\n  }\n\n  var mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createVertexShaderSolidColor(vgl.GL),\n      fragmentShader = vgl.utils.createFragmentShaderSolidColor(vgl.GL, color),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      pointsizeUniform = new vgl.floatUniform('pointSize', 5.0),\n      opacityUniform = new vgl.floatUniform('opacity', 1.0),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix');\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addUniform(pointsizeUniform);\n  prog.addUniform(opacityUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of point sprites material\n *\n * Helper function to create point sprites material\n *\n * @returns {vgl.material}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointSpritesMaterial = function (image, lut) {\n  'use strict';\n  var scalarRange = lut === undefined ? [0, 1] : lut.range(),\n      mat = new vgl.material(),\n      blend = new vgl.blend(),\n      prog = new vgl.shaderProgram(),\n      vertexShader = vgl.utils.createPointSpritesVertexShader(vgl.GL),\n      fragmentShader = vgl.utils.createPointSpritesFragmentShader(vgl.GL),\n      posVertAttr = new vgl.vertexAttribute('vertexPosition'),\n      colorVertAttr = new vgl.vertexAttribute('vertexColor'),\n      heightUniform = new vgl.floatUniform('height', 0.0),\n      vertexColorWeightUniform =\n        new vgl.floatUniform('vertexColorWeight', 0.0),\n      lutMinUniform = new vgl.floatUniform('lutMin', scalarRange[0]),\n      lutMaxUniform = new vgl.floatUniform('lutMax', scalarRange[1]),\n      modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n      projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n      samplerUniform = new vgl.uniform(vgl.GL.INT, 'opacityLookup'),\n      scalarsToColors = new vgl.uniform(vgl.GL.INT, 'scalarsToColors'),\n      useScalarsToColors = new vgl.uniform(vgl.GL.INT, 'useScalarsToColors'),\n      useVertexColors = new vgl.uniform(vgl.GL.INT, 'useVertexColors'),\n      pointSize = new vgl.uniform(vgl.GL.FLOAT_VEC2, 'pointSize'),\n      texture = new vgl.texture();\n\n  samplerUniform.set(0);\n  scalarsToColors.set(1);\n  useScalarsToColors.set(0);\n  useVertexColors.set(0);\n  pointSize.set([1.0, 1.0]);\n\n  prog.addVertexAttribute(posVertAttr, vgl.vertexAttributeKeys.Position);\n  prog.addVertexAttribute(colorVertAttr, vgl.vertexAttributeKeys.Color);\n  prog.addUniform(heightUniform);\n  prog.addUniform(vertexColorWeightUniform);\n  prog.addUniform(modelViewUniform);\n  prog.addUniform(projectionUniform);\n  prog.addUniform(samplerUniform);\n  prog.addUniform(useVertexColors);\n  prog.addUniform(useScalarsToColors);\n  prog.addUniform(pointSize);\n  prog.addShader(fragmentShader);\n  prog.addShader(vertexShader);\n  mat.addAttribute(prog);\n  mat.addAttribute(blend);\n\n  if (lut) {\n    prog.addUniform(scalarsToColors);\n    useScalarsToColors.set(1);\n    prog.addUniform(lutMinUniform);\n    prog.addUniform(lutMaxUniform);\n    lut.setTextureUnit(1);\n    mat.addAttribute(lut);\n  }\n\n  texture.setImage(image);\n  texture.setTextureUnit(0);\n  mat.addAttribute(texture);\n  return mat;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of an actor that contains a plane geometry\n *\n * Function to create a plane node This method will create a plane actor\n * with texture coordinates, eventually normal, and plane material.\n *\n * @returns {vgl.actor}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPlane = function (originX, originY, originZ,\n                                 point1X, point1Y, point1Z,\n                                 point2X, point2Y, point2Z) {\n  'use strict';\n  var mapper = new vgl.mapper(),\n      planeSource = new vgl.planeSource(),\n      mat = vgl.utils.createGeometryMaterial(),\n      actor = new vgl.actor();\n\n  planeSource.setOrigin(originX, originY, originZ);\n  planeSource.setPoint1(point1X, point1Y, point1Z);\n  planeSource.setPoint2(point2X, point2Y, point2Z);\n\n  mapper.setGeometryData(planeSource.create());\n  actor.setMapper(mapper);\n  actor.setMaterial(mat);\n\n  return actor;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of an actor that contains a texture plane geometry\n *\n * Helper function to create a plane textured node This method will create\n * a plane actor with texture coordinates, eventually normal, and plane\n * material.\n *\n * @returns {vgl.actor}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createTexturePlane = function (originX, originY, originZ,\n                                        point1X, point1Y, point1Z,\n                                        point2X, point2Y, point2Z,\n                                        isRgba) {\n  'use strict';\n  var mapper = new vgl.mapper(),\n      planeSource = new vgl.planeSource(),\n      mat = vgl.utils.createTextureMaterial(isRgba,\n                                            [originX, originY, originZ]),\n      actor = new vgl.actor();\n\n  planeSource.setPoint1(point1X - originX, point1Y - originY, point1Z - originZ);\n  planeSource.setPoint2(point2X - originX, point2Y - originY, point2Z - originZ);\n  mapper.setGeometryData(planeSource.create());\n\n  actor.setMapper(mapper);\n  actor.setMaterial(mat);\n\n  return actor;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of an actor that contains points\n *\n * Helper function to create a point node This method will create a point\n * actor with texture coordinates, eventually normal, and plane material.\n *\n * @returns {vgl.actor}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPoints = function (positions, size, colors, texcoords, opacity) {\n  'use strict';\n  if (!positions) {\n    console.log('[ERROR] Cannot create points without positions');\n    return null;\n  }\n\n  opacity = opacity === undefined ? 1.0 : opacity;\n  var mapper = new vgl.mapper(),\n      pointSource = new vgl.pointSource(),\n      mat = vgl.utils.createPointGeometryMaterial(opacity),\n      actor = new vgl.actor();\n\n  pointSource.setPositions(positions);\n  if (colors) {\n    pointSource.setColors(colors);\n  }\n\n  if (texcoords) {\n    pointSource.setTextureCoordinates(texcoords);\n  }\n\n  if (size) {\n    pointSource.setSize(size);\n  } else {\n    pointSource.setSize(1.0);\n  }\n\n  mapper.setGeometryData(pointSource.create());\n  actor.setMapper(mapper);\n  actor.setMaterial(mat);\n\n  return actor;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of an actor that contains point sprites\n *\n * Helper function to create a point sprites node This method will create\n * a point sprites actor with texture coordinates, normals, and a point sprites\n * material.\n *\n * @returns {vgl.actor}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createPointSprites = function (image, positions, colors,\n                                              texcoords) {\n  'use strict';\n  if (!image) {\n    console.log('[ERROR] Point sprites requires an image');\n    return null;\n  }\n\n  if (!positions) {\n    console.log('[ERROR] Cannot create points without positions');\n    return null;\n  }\n\n  var mapper = new vgl.mapper(),\n      pointSource = new vgl.pointSource(),\n      mat = vgl.utils.createPointSpritesMaterial(image),\n      actor = new vgl.actor();\n\n  pointSource.setPositions(positions);\n  if (colors) {\n    pointSource.setColors(colors);\n  }\n\n  if (texcoords) {\n    pointSource.setTextureCoordinates(texcoords);\n  }\n\n  mapper.setGeometryData(pointSource.create());\n  actor.setMapper(mapper);\n  actor.setMaterial(mat);\n\n  return actor;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create lines given positions, colors, and desired length\n *\n * @param positions\n * @param colors\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createLines = function (positions, colors) {\n  'use strict';\n  if (!positions) {\n    console.log('[ERROR] Cannot create points without positions');\n    return null;\n  }\n\n  var mapper = new vgl.mapper(),\n      lineSource = new vgl.lineSource(),\n      mat = vgl.utils.createGeometryMaterial(),\n      actor = new vgl.actor();\n\n  lineSource.setPositions(positions);\n  if (colors) {\n    lineSource.setColors(colors);\n  }\n\n  mapper.setGeometryData(lineSource.create());\n  actor.setMapper(mapper);\n  actor.setMaterial(mat);\n\n  return actor;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create color legend\n *\n * @param lookupTable\n * @param width\n * @param height\n * @param origin\n * @param divs\n * @returns {Array}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.createColorLegend = function (varname, lookupTable, origin,\n                                             width, height, countMajor,\n                                             countMinor) {\n  'use strict';\n\n  if (!lookupTable) {\n    console.log('[error] Invalid lookup table');\n    return [];\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  /**\n   * Create labels for the legend\n   *\n   * @param ticks\n   * @param range\n   * @param divs\n   */\n  //////////////////////////////////////////////////////////////////////////////\n  function createLabels(varname, positions, range) {\n    if (!positions) {\n      console.log('[error] Create labels requires positions (x,y,z) array');\n      return;\n    }\n\n    if (positions.length % 3 !== 0) {\n      console.log('[error] Create labels require positions array contain 3d points');\n      return;\n    }\n\n    if (!range) {\n      console.log('[error] Create labels requires Valid range');\n      return;\n    }\n\n    var actor = null,\n        size = vgl.utils.computePowerOfTwo(48),\n        index = 0,\n        actors = [],\n        origin = [],\n        pt1 = [],\n        pt2 = [],\n        delta = (positions[6] - positions[0]),\n        axisLabelOffset = 4, i;\n\n    origin.length = 3;\n    pt1.length = 3;\n    pt2.length = 3;\n\n    // For now just create labels for end points\n    for (i = 0; i < 2; i += 1) {\n      index = i * (positions.length - 3);\n\n      origin[0] = positions[index] - delta;\n      origin[1] = positions[index + 1] - 2 * delta;\n      origin[2] = positions[index + 2];\n\n      pt1[0] = positions[index] + delta;\n      pt1[1] = origin[1];\n      pt1[2] = origin[2];\n\n      pt2[0] = origin[0];\n      pt2[1] = positions[1];\n      pt2[2] = origin[2];\n\n      actor = vgl.utils.createTexturePlane(\n        origin[0], origin[1], origin[2],\n        pt1[0], pt1[1], pt1[2],\n        pt2[0], pt2[1], pt2[2], true);\n\n      actor.setReferenceFrame(vgl.boundingObject.ReferenceFrame.Absolute);\n      actor.material().setBinNumber(vgl.material.RenderBin.Overlay);\n      actor.material().addAttribute(vgl.utils.create2DTexture(\n        range[i].toFixed(2).toString(), 12, null));\n      actors.push(actor);\n    }\n\n    // Create axis label\n    origin[0] = (positions[0] + positions[positions.length - 3] - size) * 0.5;\n    origin[1] = positions[1] + axisLabelOffset;\n    origin[2] = positions[2];\n\n    pt1[0] = origin[0] + size;\n    pt1[1] = origin[1];\n    pt1[2] = origin[2];\n\n    pt2[0] = origin[0];\n    pt2[1] = origin[1] + size;\n    pt2[2] = origin[2];\n\n    actor = vgl.utils.createTexturePlane(\n      origin[0], origin[1], origin[2],\n      pt1[0], pt1[1], pt1[2],\n      pt2[0], pt2[1], pt2[2], true);\n    actor.setReferenceFrame(vgl.boundingObject.ReferenceFrame.Absolute);\n    actor.material().setBinNumber(vgl.material.RenderBin.Overlay);\n    actor.material().addAttribute(vgl.utils.create2DTexture(\n      varname, 24, null));\n    actors.push(actor);\n\n    return actors;\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // TODO Currently we assume that the ticks are laid on x-axis\n  // and this is on a 2D plane (ignoring Z axis. For now lets\n  // not draw minor ticks.\n  /**\n   * Create ticks and labels\n   *\n   * @param originX\n   * @param originY\n   * @param originZ\n   * @param pt1X\n   * @param pt1Y\n   * @param pt1Z\n   * @param pt2X\n   * @param pt2Y\n   * @param pt2Z\n   * @param divs\n   * @param heightMajor\n   * @param heightMinor\n   * @returns {Array} Returns array of vgl.actor\n   */\n  //////////////////////////////////////////////////////////////////////////////\n  function createTicksAndLabels(varname, lut,\n                        originX, originY, originZ,\n                        pt1X, pt1Y, pt1Z,\n                        pt2X, pt2Y, pt2Z,\n                        countMajor, countMinor,\n                        heightMajor, heightMinor) {\n    heightMinor = heightMinor; /* unused parameter */\n    var width = pt2X - pt1X,\n        index = null,\n        delta = width / countMajor,\n        positions = [],\n        actors = [];\n\n    for (index = 0; index <= countMajor; index += 1) {\n      positions.push(pt1X + delta * index);\n      positions.push(pt1Y);\n      positions.push(pt1Z);\n\n      positions.push(pt1X + delta * index);\n      positions.push(pt1Y + heightMajor);\n      positions.push(pt1Z);\n    }\n\n    // TODO: Fix this\n    //actor = vgl.utils.createLines(positions, null);\n    //actor.setReferenceFrame(vgl.boundingObject.ReferenceFrame.Absolute);\n    //actor.material().setBinNumber(vgl.material.RenderBin.Overlay);\n    //actors.push(actor);\n\n    actors = actors.concat(createLabels(varname, positions, lut.range()));\n    return actors;\n  }\n\n  // TODO Currently we create only one type of legend\n  var pt1X = origin[0] + width,\n      pt1Y = origin[1],\n      pt1Z = 0.0,\n      pt2X = origin[0],\n      pt2Y = origin[1] + height,\n      pt2Z = 0.0,\n      actors = [],\n      actor = null,\n      mat = null,\n      group = vgl.groupNode();\n\n  actor = vgl.utils.createTexturePlane(\n    origin[0], origin[1], origin[2],\n    pt1X, pt1Y, pt1Z,\n    pt2X, pt2Y, pt2Z, true\n  );\n\n  mat = actor.material();\n  mat.addAttribute(lookupTable);\n  actor.setMaterial(mat);\n  group.addChild(actor);\n  actor.material().setBinNumber(vgl.material.RenderBin.Overlay);\n  actor.setReferenceFrame(vgl.boundingObject.ReferenceFrame.Absolute);\n  actors.push(actor);\n  actors = actors.concat(createTicksAndLabels(\n                          varname,\n                          lookupTable,\n                          origin[0], origin[1], origin[1],\n                          pt2X, pt1Y, pt1Z,\n                          pt1X, pt1Y, pt1Z,\n                          countMajor, countMinor, 5, 3));\n\n  // TODO This needs to change so that we can return a group node\n  // which should get appended to the scene graph\n  return actors;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create 2D texture by rendering text using canvas2D context\n *\n * @param textToWrite\n * @param textSize\n * @param color\n * @returns {vgl.texture}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.utils.create2DTexture = function (textToWrite, textSize,\n  color, font, alignment, baseline, bold) {\n  'use strict';\n\n  var canvas = document.getElementById('textRendering'),\n      ctx = null,\n      texture = vgl.texture();\n\n  font = font || 'sans-serif';\n  alignment = alignment || 'center';\n  baseline = baseline || 'bottom';\n\n  if (typeof bold === 'undefined') {\n    bold = true;\n  }\n\n  if (!canvas) {\n    canvas = document.createElement('canvas');\n  }\n  ctx = canvas.getContext('2d');\n\n  canvas.setAttribute('id', 'textRendering');\n  canvas.style.display = 'none';\n\n  // Make width and height equal so that we get pretty looking text.\n  canvas.height = vgl.utils.computePowerOfTwo(8 * textSize);\n  canvas.width = canvas.height;\n\n  ctx.fillStyle = 'rgba(0, 0, 0, 0)';\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  // This determines the text colour, it can take a hex value or rgba value\n  // (e.g. rgba(255,0,0,0.5))\n  ctx.fillStyle = 'rgba(200, 85, 10, 1.0)';\n\n  // This determines the alignment of text, e.g. left, center, right\n  ctx.textAlign = alignment;\n\n  // This determines the baseline of the text, e.g. top, middle, bottom\n  ctx.textBaseline = baseline;\n\n  // This determines the size of the text and the font family used\n  ctx.font = 4 * textSize + 'px ' + font;\n  if (bold) {\n    ctx.font = 'bold ' + ctx.font;\n  }\n\n  ctx.fillText(textToWrite, canvas.width / 2, canvas.height / 2, canvas.width);\n\n  texture.setImage(canvas);\n  texture.updateDimensions();\n\n  return texture;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, vec4, inherit*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class picker\n *\n * @class vgl.picker\n * @returns {vgl.picker}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.picker = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.picker)) {\n    return new vgl.picker();\n  }\n  vgl.object.call(this);\n\n  /** @private */\n  var m_actors = [];\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Get actors intersected\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getActors = function () {\n    return m_actors;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Perform pick operation\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.pick = function (selectionX, selectionY, renderer) {\n    // Check if variables are acceptable\n    if (selectionX === undefined) {\n      return 0;\n    }\n    if (selectionY === undefined) {\n      return 0;\n    }\n    if (renderer === undefined) {\n      return 0;\n    }\n\n    // Clean list of actors intersected previously\n    m_actors = [];\n\n    //\n    var camera = renderer.camera(),\n        width = renderer.width(),\n        height = renderer.height(),\n        fpoint = camera.focalPoint(),\n        focusWorldPt = vec4.fromValues(fpoint[0], fpoint[1], fpoint[2], 1.0),\n        focusDisplayPt = renderer.worldToDisplay(\n          focusWorldPt, camera.viewMatrix(),\n        camera.projectionMatrix(), width, height),\n        displayPt = vec4.fromValues(selectionX,\n                      selectionY, focusDisplayPt[2], 1.0),\n        // Convert selection point into world coordinates\n        worldPt = renderer.displayToWorld(displayPt, camera.viewMatrix(),\n                    camera.projectionMatrix(), width, height),\n        cameraPos = camera.position(), ray = [], actors, count, i, bb,\n        tmin, tmax, tymin, tymax, tzmin, tzmax, actor;\n\n    for (i = 0; i < 3; i += 1) {\n      ray[i] = worldPt[i] - cameraPos[i];\n    }\n\n    // Go through all actors and check if intersects\n    actors = renderer.sceneRoot().children();\n    count = 0;\n\n    for (i = 0; i < actors.length; i += 1) {\n      actor = actors[i];\n      if (actor.visible() === true) {\n        bb = actor.bounds();\n        // Ray-aabb intersection - Smits' method\n        if (ray[0] >= 0) {\n          tmin = (bb[0] - cameraPos[0]) / ray[0];\n          tmax = (bb[1] - cameraPos[0]) / ray[0];\n        } else {\n          tmin = (bb[1] - cameraPos[0]) / ray[0];\n          tmax = (bb[0] - cameraPos[0]) / ray[0];\n        }\n        if (ray[1] >= 0) {\n          tymin = (bb[2] - cameraPos[1]) / ray[1];\n          tymax = (bb[3] - cameraPos[1]) / ray[1];\n        } else {\n          tymin = (bb[3] - cameraPos[1]) / ray[1];\n          tymax = (bb[2] - cameraPos[1]) / ray[1];\n        }\n        if ((tmin > tymax) || (tymin > tmax)) {\n          //jscs:disable disallowKeywords\n          continue;\n          //jscs:enable disallowKeywords\n        }\n\n        if (tymin > tmin) {\n          tmin = tymin;\n        }\n        if (tymax < tmax) {\n          tmax = tymax;\n        }\n        if (ray[2] >= 0) {\n          tzmin = (bb[4] - cameraPos[2]) / ray[2];\n          tzmax = (bb[5] - cameraPos[2]) / ray[2];\n        } else {\n          tzmin = (bb[5] - cameraPos[2]) / ray[2];\n          tzmax = (bb[4] - cameraPos[2]) / ray[2];\n        }\n        if ((tmin > tzmax) || (tzmin > tmax)) {\n          //jscs:disable disallowKeywords\n          continue;\n          //jscs:enable disallowKeywords\n        }\n        if (tzmin > tmin) {\n          tmin = tzmin;\n        }\n        if (tzmax < tmax) {\n          tmax = tzmax;\n        }\n\n        m_actors[count] = actor;\n        count += 1;\n      }\n    }\n    return count;\n  };\n\n  return this;\n};\n\ninherit(vgl.picker, vgl.object);\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, $*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of shapefile reader\n *\n * This contains code that reads a shapefile and produces vgl geometries\n *\n * @class\n * @returns {vgl.shapefileReader}\n */\n//////////////////////////////////////////////////////////////////////////////\nvgl.shapefileReader = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.shapefileReader)) {\n    return new vgl.shapefileReader();\n  }\n\n  var m_that = this;\n  var SHP_NULL = 0;\n  var SHP_POINT = 1;\n  var SHP_POLYGON = 5;\n  var SHP_POLYLINE = 3;\n\n  this.int8 = function (data, offset) {\n    return data.charCodeAt(offset);\n  };\n\n  /*jshint bitwise: false */\n  this.bint32 = function (data, offset) {\n    return (\n      ((data.charCodeAt(offset) & 0xff) << 24) +\n        ((data.charCodeAt(offset + 1) & 0xff) << 16) +\n        ((data.charCodeAt(offset + 2) & 0xff) << 8) +\n        (data.charCodeAt(offset + 3) & 0xff)\n    );\n  };\n\n  this.lint32 = function (data, offset) {\n    return (\n      ((data.charCodeAt(offset + 3) & 0xff) << 24) +\n        ((data.charCodeAt(offset + 2) & 0xff) << 16) +\n        ((data.charCodeAt(offset + 1) & 0xff) << 8) +\n        (data.charCodeAt(offset) & 0xff)\n    );\n  };\n\n  this.bint16 = function (data, offset) {\n    return (\n      ((data.charCodeAt(offset) & 0xff) << 8) +\n        (data.charCodeAt(offset + 1) & 0xff)\n    );\n  };\n\n  this.lint16 = function (data, offset) {\n    return (\n      ((data.charCodeAt(offset + 1) & 0xff) << 8) +\n        (data.charCodeAt(offset) & 0xff)\n    );\n  };\n\n  this.ldbl64 = function (data, offset) {\n    var b0 = data.charCodeAt(offset) & 0xff;\n    var b1 = data.charCodeAt(offset + 1) & 0xff;\n    var b2 = data.charCodeAt(offset + 2) & 0xff;\n    var b3 = data.charCodeAt(offset + 3) & 0xff;\n    var b4 = data.charCodeAt(offset + 4) & 0xff;\n    var b5 = data.charCodeAt(offset + 5) & 0xff;\n    var b6 = data.charCodeAt(offset + 6) & 0xff;\n    var b7 = data.charCodeAt(offset + 7) & 0xff;\n\n    var sign = 1 - 2 * (b7 >> 7);\n    var exp = (((b7 & 0x7f) << 4) + ((b6 & 0xf0) >> 4)) - 1023;\n    //var frac = (b6 & 0x0f) * Math.pow (2, -4) + b5 * Math.pow (2, -12) + b4 *\n    // Math.pow (2, -20) + b3 * Math.pow (2, -28) + b2 * Math.pow (2, -36) + b1 *\n    // Math.pow (2, -44) + b0 * Math.pow (2, -52);\n\n    //return sign * (1 + frac) * Math.pow (2, exp);\n    var frac = (b6 & 0x0f) * Math.pow(2, 48) + b5 * Math.pow(2, 40) + b4 *\n                 Math.pow(2, 32) + b3 * Math.pow(2, 24) + b2 *\n                 Math.pow(2, 16) + b1 * Math.pow(2, 8) + b0;\n\n    return sign * (1 + frac * Math.pow(2, -52)) * Math.pow(2, exp);\n  };\n\n  this.lfloat32 = function (data, offset) {\n    var b0 = data.charCodeAt(offset) & 0xff;\n    var b1 = data.charCodeAt(offset + 1) & 0xff;\n    var b2 = data.charCodeAt(offset + 2) & 0xff;\n    var b3 = data.charCodeAt(offset + 3) & 0xff;\n\n    var sign = 1 - 2 * (b3 >> 7);\n    var exp = (((b3 & 0x7f) << 1) + ((b2 & 0xfe) >> 7)) - 127;\n    var frac = (b2 & 0x7f) * Math.pow(2, 16) + b1 * Math.pow(2, 8) + b0;\n\n    return sign * (1 + frac * Math.pow(2, -23)) * Math.pow(2, exp);\n  };\n  /*jshint bitwise: true */\n\n  this.str = function (data, offset, length) {\n    var chars = [];\n    var index = offset;\n    while (index < offset + length) {\n      var c = data[index];\n      if (c.charCodeAt(0) !== 0) {\n        chars.push(c);\n      } else {\n        break;\n      }\n      index += 1;\n    }\n    return chars.join('');\n  };\n\n  this.readHeader = function (data) {\n    var code = this.bint32(data, 0);\n    var length = this.bint32(data, 24);\n    var version = this.lint32(data, 28);\n    var shapetype = this.lint32(data, 32);\n\n    /*\n    var xmin = this.ldbl64(data, 36);\n    var ymin = this.ldbl64(data, 44);\n    var xmax = this.ldbl64(data, 52);\n    var ymax = this.ldbl64(data, 60);\n    */\n    return {\n      code: code,\n      length: length,\n      version: version,\n      shapetype: shapetype\n      // bounds: new Box (vect (xmin, ymin), vect (xmax, ymax))\n    };\n  };\n\n  this.loadShx = function (data) {\n    var indices = [];\n    var appendIndex = function (offset) {\n      indices.push(2 * m_that.bint32(data, offset));\n      return offset + 8;\n    };\n    var offset = 100;\n    while (offset < data.length) {\n      offset = appendIndex(offset);\n    }\n    return indices;\n  };\n\n  this.Shapefile = function (options) {\n    var path = options.path;\n    $.ajax({\n      url: path + '.shx',\n      mimeType: 'text/plain; charset=x-user-defined',\n      success: function (data) {\n        var indices = this.loadShx(data);\n        $.ajax({\n          url: path + '.shp',\n          mimeType: 'text/plain; charset=x-user-defined',\n          success: function (data) {\n            $.ajax({\n              url: path + '.dbf',\n              mimeType: 'text/plain; charset=x-user-defined',\n              success: function (dbf_data) {\n                var layer = this.loadShp(data, dbf_data, indices, options);\n                options.success(layer);\n              }\n            });\n          }\n        });\n      }\n    });\n  };\n\n  this.localShapefile = function (options) {\n    var shxFile = options.shx;\n    var shpFile = options.shp;\n    var dbfFile = options.dbf;\n    var shxReader = new FileReader();\n    shxReader.onloadend = function () {\n      var indices = m_that.loadShx(shxReader.result);\n      var shpReader = new FileReader();\n\n      shpReader.onloadend = function () {\n        var shpData = shpReader.result;\n\n        var dbfReader = new FileReader();\n        dbfReader.onloadend = function () {\n          var dbfData = dbfReader.result;\n          var layer = m_that.loadShp(shpData, dbfData, indices, options);\n          options.success(layer);\n        };\n        dbfReader.readAsBinaryString(dbfFile);\n      };\n      shpReader.readAsBinaryString(shpFile);\n    };\n    shxReader.readAsBinaryString(shxFile);\n  };\n\n  this.loadDBF = function (data) {\n    var readHeader = function (offset) {\n      var name = m_that.str(data, offset, 10);\n      var type = m_that.str(data, offset + 11, 1);\n      var length = m_that.int8(data, offset + 16);\n      return {\n        name: name,\n        type: type,\n        length: length\n      };\n    };\n\n    // Level of the dBASE file\n    var level = m_that.int8(data, 0);\n    if (level === 4) {\n      throw 'Level 7 dBASE not supported';\n    }\n\n    // Date of last update\n    /*\n    var year = m_that.int8(data, 1);\n    var month = m_that.int8(data, 2);\n    var day = m_that.int8(data, 3);\n    */\n\n    var num_entries = m_that.lint32(data, 4);\n    var header_size = m_that.lint16(data, 8);\n    var record_size = m_that.lint16(data, 10);\n\n    var FIELDS_START = 32;\n    var HEADER_LENGTH = 32;\n\n    var header_offset = FIELDS_START;\n    var headers = [];\n    while (header_offset < header_size - 1) {\n      headers.push(readHeader(header_offset));\n      header_offset += HEADER_LENGTH;\n    }\n\n    var records = [];\n    var record_offset = header_size;\n    while (record_offset < header_size + num_entries * record_size) {\n      var declare = m_that.str(data, record_offset, 1);\n      if (declare === '*') {\n        // Record size in the header include the size of the delete indicator\n        record_offset += record_size;\n      } else {\n        // Move offset to the start of the actual data\n        record_offset += 1;\n        var record = {};\n        for (var i = 0; i < headers.length; i += 1) {\n          var header = headers[i];\n          var value;\n          if (header.type === 'C') {\n            value = m_that.str(data, record_offset, header.length).trim();\n          } else if (header.type === 'N') {\n            value = parseFloat(m_that.str(data, record_offset, header.length));\n          }\n          record_offset += header.length;\n          record[header.name] = value;\n        }\n        records.push(record);\n      }\n    }\n    return records;\n  };\n\n  this.loadShp = function (data, dbf_data, indices, options) {\n    options = options; /* unused parameter */\n    var features = [];\n    var readRing = function (offset, start, end) {\n      var ring = [];\n      for (var i = end - 1; i >= start; i -= 1) {\n        var x = m_that.ldbl64(data, offset + 16 * i);\n        var y = m_that.ldbl64(data, offset + 16 * i + 8);\n        ring.push([x, y]);\n      }\n      //if (ring.length <= 3)\n      // return [];\n      return ring;\n    };\n\n    var readRecord = function (offset) {\n      // var index = m_that.bint32(data, offset);\n      // var record_length = m_that.bint32(data, offset + 4);\n      var record_offset = offset + 8;\n      var geom_type = m_that.lint32(data, record_offset);\n      var num_parts, num_points, parts_start, points_start, i,\n          start, end, ring, rings;\n\n      if (geom_type === SHP_NULL) {\n        console.log('NULL Shape');\n        //return offset + 12;\n      } else if (geom_type === SHP_POINT) {\n        var x = m_that.ldbl64(data, record_offset + 4);\n        var y = m_that.ldbl64(data, record_offset + 12);\n\n        features.push({\n          type: 'Point',\n          attr: {},\n          geom: [[x, y]]\n        });\n      } else if (geom_type === SHP_POLYGON) {\n        num_parts = m_that.lint32(data, record_offset + 36);\n        num_points = m_that.lint32(data, record_offset + 40);\n\n        parts_start = offset + 52;\n        points_start = offset + 52 + 4 * num_parts;\n\n        rings = [];\n        for (i = 0; i < num_parts; i += 1) {\n          start = m_that.lint32(data, parts_start + i * 4);\n          if (i + 1 < num_parts) {\n            end = m_that.lint32(data, parts_start + (i + 1) * 4);\n          } else {\n            end = num_points;\n          }\n          ring = readRing(points_start, start, end);\n          rings.push(ring);\n        }\n        features.push({\n          type: 'Polygon',\n          attr: {},\n          geom: [rings]\n        });\n      } else if (geom_type === SHP_POLYLINE) {\n        num_parts = m_that.lint32(data, record_offset + 36);\n        num_points = m_that.lint32(data, record_offset + 40);\n\n        parts_start = offset + 52;\n        points_start = offset + 52 + 4 * num_parts;\n\n        rings = [];\n        for (i = 0; i < num_parts; i += 1) {\n          start = m_that.lint32(data, parts_start + i * 4);\n          if (i + 1 < num_parts) {\n            end = m_that.lint32(data, parts_start + (i + 1) * 4);\n          } else {\n            end = num_points;\n          }\n          ring = readRing(points_start, start, end);\n          rings.push(ring);\n        }\n        features.push({\n          type: 'Polyline',\n          attr: {},\n          geom: [rings]\n        });\n      } else {\n        throw 'Not Implemented: ' + geom_type;\n      }\n      //return offset + 2 * record_length + SHP_HEADER_LEN;\n    };\n\n    var attr = this.loadDBF(dbf_data), i;\n\n    //var offset = 100;\n    //while (offset < length * 2) {\n    // offset = readRecord (offset);\n    //}\n    for (i = 0; i < indices.length; i += 1) {\n      var offset = indices[i];\n      readRecord(offset);\n    }\n\n    var layer = []; //new Layer ();\n\n    for (i = 0; i < features.length; i += 1) {\n      var feature = features[i];\n      feature.attr = attr[i];\n      layer.push(feature);\n    }\n    return layer;\n  };\n\n  return this;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n/**\n * @module vgl\n */\n\n/*global vgl, mat4, unescape, Float32Array, Int8Array, Uint16Array*/\n//////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////\n//\n// vbgModule.vtkReader class\n// This contains code that unpack a json base64 encoded vtkdataset,\n// such as those produced by ParaView's webGL exporter (where much\n// of the code originated from) and convert it to VGL representation.\n//\n//////////////////////////////////////////////////////////////////////////////\n\nvgl.vtkReader = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.vtkReader)) {\n    return new vgl.vtkReader();\n  }\n\n  var m_base64Chars =\n    ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n     'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n     'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',\n     'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\n     '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'],\n      m_reverseBase64Chars = [],\n      m_vtkRenderedList = {},\n      m_vtkObjectCount = 0,\n      m_vtkScene = null,\n      m_node = null,\n      END_OF_INPUT = -1,\n      m_base64Str = '',\n      m_base64Count = 0,\n      m_pos = 0,\n      m_viewer = null,\n      i = 0;\n\n  //initialize the array here if not already done.\n  if (m_reverseBase64Chars.length === 0) {\n    for (i = 0; i < m_base64Chars.length; i += 1) {\n      m_reverseBase64Chars[m_base64Chars[i]] = i;\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * ntos\n   *\n   * @param n\n   * @returns unescaped n\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.ntos = function (n) {\n    var unN;\n\n    unN = n.toString(16);\n    if (unN.length === 1) {\n      unN = '0' + unN;\n    }\n    unN = '%' + unN;\n\n    return unescape(unN);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * readReverseBase64\n   *\n   * @returns\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readReverseBase64 = function () {\n    var nextCharacter;\n\n    if (!m_base64Str) {\n      return END_OF_INPUT;\n    }\n\n    while (true) {\n      if (m_base64Count >= m_base64Str.length) {\n        return END_OF_INPUT;\n      }\n      nextCharacter = m_base64Str.charAt(m_base64Count);\n      m_base64Count += 1;\n\n      if (m_reverseBase64Chars[nextCharacter]) {\n        return m_reverseBase64Chars[nextCharacter];\n      }\n      if (nextCharacter === 'A') {\n        return 0;\n      }\n    }\n\n    return END_OF_INPUT;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * decode64\n   *\n   * @param str\n   * @returns result\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.decode64 = function (str) {\n    var result = '',\n        inBuffer = new Array(4),\n        done = false;\n\n    m_base64Str = str;\n    m_base64Count = 0;\n\n    while (!done &&\n           (inBuffer[0] = this.readReverseBase64()) !== END_OF_INPUT &&\n           (inBuffer[1] = this.readReverseBase64()) !== END_OF_INPUT) {\n      inBuffer[2] = this.readReverseBase64();\n      inBuffer[3] = this.readReverseBase64();\n      /*jshint bitwise: false */\n      result += this.ntos((((inBuffer[0] << 2) & 0xff) | inBuffer[1] >> 4));\n      if (inBuffer[2] !== END_OF_INPUT) {\n        result += this.ntos((((inBuffer[1] << 4) & 0xff) | inBuffer[2] >> 2));\n        if (inBuffer[3] !== END_OF_INPUT) {\n          result += this.ntos((((inBuffer[2] << 6) & 0xff) | inBuffer[3]));\n        } else {\n          done = true;\n        }\n      } else {\n        done = true;\n      }\n      /*jshint bitwise: true */\n    }\n\n    return result;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * readNumber\n   *\n   * @param ss\n   * @returns v\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readNumber = function (ss) {\n    //jshint plusplus: false, bitwise: false\n    var v = ((ss[m_pos++]) +\n             (ss[m_pos++] << 8) +\n             (ss[m_pos++] << 16) +\n             (ss[m_pos++] << 24));\n    //jshint plusplus: true, bitwise: true\n    return v;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * readF3Array\n   *\n   * @param numberOfPoints\n   * @param ss\n   * @returns points\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readF3Array = function (numberOfPoints, ss) {\n    var size = numberOfPoints * 4 * 3, test = new Int8Array(size),\n        points = null, i;\n\n    for (i = 0; i < size; i += 1) {\n      test[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    points = new Float32Array(test.buffer);\n\n    return points;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * readColorArray\n   *\n   * @param numberOfPoints\n   * @param ss\n   * @param vglcolors\n   * @returns points\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.readColorArray = function (numberOfPoints, ss, vglcolors) {\n    var i, idx = 0, tmp = new Array(numberOfPoints * 3);\n    //jshint plusplus: false\n    for (i = 0; i < numberOfPoints; i += 1) {\n      tmp[idx++] = ss[m_pos++] / 255.0;\n      tmp[idx++] = ss[m_pos++] / 255.0;\n      tmp[idx++] = ss[m_pos++] / 255.0;\n      m_pos++;\n    }\n    //jshint plusplus: true\n    vglcolors.insert(tmp);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parseObject\n   *\n   * @param buffer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parseObject = function (vtkObject) {\n    var geom = new vgl.geometryData(), mapper = vgl.mapper(), ss = [],\n        type = null, data = null, size, matrix = null, material = null,\n        actor, colorMapData, shaderProg, opacityUniform, lookupTable,\n        colorTable, windowSize, width, height, position;\n\n    //dehexlify\n    //data = this.decode64(vtkObject.data);\n    data = atob(vtkObject.data);\n    //jshint bitwise: false\n    for (i = 0; i < data.length; i += 1) {\n      ss[i] = data.charCodeAt(i) & 0xff;\n    }\n    //jshint bitwise: true\n\n    //Determine the Object type\n    m_pos = 0;\n    size = this.readNumber(ss);\n    type = String.fromCharCode(ss[m_pos]);\n    m_pos += 1;\n    geom.setName(type);\n\n    // Lines\n    if (type === 'L') {\n      matrix = this.parseLineData(geom, ss);\n      material = vgl.utils.createGeometryMaterial();\n    // Mesh\n    } else if (type === 'M') {\n      matrix = this.parseMeshData(geom, ss);\n      material = vgl.utils.createPhongMaterial();\n    // Points\n    } else if (type === 'P') {\n      matrix = this.parsePointData(geom, ss);\n      material = vgl.utils.createGeometryMaterial();\n    // ColorMap\n    } else if (type === 'C') {\n      colorMapData = this.parseColorMapData(geom, ss, size);\n      colorTable = [];\n\n      for (i = 0; i < colorMapData.colors.length; i += 1) {\n        colorTable.push(colorMapData.colors[i][1]);\n        colorTable.push(colorMapData.colors[i][2]);\n        colorTable.push(colorMapData.colors[i][3]);\n        colorTable.push(colorMapData.colors[i][0] * 255);\n      }\n\n      lookupTable = new vgl.lookupTable();\n      lookupTable.setColorTable(colorTable);\n\n      windowSize = m_viewer.renderWindow().windowSize();\n      width = colorMapData.size[0] * windowSize[0];\n      height = colorMapData.size[1] * windowSize[1];\n\n      position = [colorMapData.position[0] * windowSize[0],\n                  (1 - colorMapData.position[1]) * windowSize[1], 0];\n      position[1] = position[1] - height;\n\n      // For now hardcode the height\n      height = 30;\n\n      return vgl.utils.createColorLegend(colorMapData.title,\n          lookupTable, position, width, height, 3, 0);\n    // Unknown\n    } else {\n      console.log('Ignoring unrecognized encoded data type ' + type);\n    }\n\n    mapper.setGeometryData(geom);\n\n    //default opacity === solid. If were transparent, set it lower.\n    if (vtkObject.hasTransparency) {\n      shaderProg = material.shaderProgram();\n      opacityUniform = shaderProg.uniform('opacity');\n      console.log('opacity ', vtkObject.opacity);\n      opacityUniform.set(vtkObject.opacity);\n      material.setBinNumber(1000);\n    }\n\n    actor = vgl.actor();\n    actor.setMapper(mapper);\n    actor.setMaterial(material);\n    actor.setMatrix(mat4.transpose(mat4.create(), matrix));\n\n    return [actor];\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parseLineData\n   *\n   * @param geom, ss\n   * @returns matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parseLineData = function (geom, ss) {\n    var vglpoints = null, vglcolors = null, vgllines = null,\n        matrix = mat4.create(),\n        numberOfIndex, numberOfPoints, points,\n        temp, index, size, m, i,\n        p = null, idx = 0;\n\n    numberOfPoints = this.readNumber(ss);\n    p = new Array(numberOfPoints * 3);\n\n    //Getting Points\n    vglpoints = new vgl.sourceDataP3fv();\n    points = this.readF3Array(numberOfPoints, ss);\n\n    //jshint plusplus: false\n    for (i = 0; i < numberOfPoints; i += 1) {\n      p[idx++] = points[i * 3];\n      p[idx++] = points[i * 3 + 1];\n      p[idx++] = points[i * 3 + 2];\n    }\n    //jshint plusplus: true\n    vglpoints.insert(p);\n    geom.addSource(vglpoints);\n\n    //Getting Colors\n    vglcolors = new vgl.sourceDataC3fv();\n    this.readColorArray(numberOfPoints, ss, vglcolors);\n    geom.addSource(vglcolors);\n\n    //Getting connectivity\n    vgllines = new vgl.lines();\n    geom.addPrimitive(vgllines);\n    numberOfIndex = this.readNumber(ss);\n\n    temp = new Int8Array(numberOfIndex * 2);\n    for (i = 0; i < numberOfIndex * 2; i += 1) {\n      temp[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    index = new Uint16Array(temp.buffer);\n    vgllines.setIndices(index);\n    vgllines.setPrimitiveType(vgl.GL.LINES);\n\n    //Getting Matrix\n    size = 16 * 4;\n    temp = new Int8Array(size);\n    for (i = 0; i < size; i += 1) {\n      temp[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    m = new Float32Array(temp.buffer);\n    mat4.copy(matrix, m);\n\n    return matrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parseMeshData\n   *\n   * @param geom, ss\n   * @returns matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parseMeshData = function (geom, ss) {\n    var vglpoints = null, vglcolors = null,\n        normals = null, matrix = mat4.create(),\n        vgltriangles = null, numberOfIndex, numberOfPoints,\n        points, temp, index, size, m, i,\n        pn = null, idx = 0;\n\n    numberOfPoints = this.readNumber(ss);\n    pn = new Array(numberOfPoints * 6);\n    //Getting Points\n    vglpoints = new vgl.sourceDataP3N3f();\n    points = this.readF3Array(numberOfPoints, ss);\n\n    //Getting Normals\n    normals = this.readF3Array(numberOfPoints, ss);\n    //jshint plusplus: false\n    for (i = 0; i < numberOfPoints; i += 1) {\n      pn[idx++] = points[i * 3];\n      pn[idx++] = points[i * 3 + 1];\n      pn[idx++] = points[i * 3 + 2];\n      pn[idx++] = normals[i * 3];\n      pn[idx++] = normals[i * 3 + 1];\n      pn[idx++] = normals[i * 3 + 2];\n    }\n    //jshint plusplus: true\n    vglpoints.insert(pn);\n    geom.addSource(vglpoints);\n\n    //Getting Colors\n    vglcolors = new vgl.sourceDataC3fv();\n    this.readColorArray(numberOfPoints, ss, vglcolors);\n    geom.addSource(vglcolors);\n\n    //Getting connectivity\n    temp = [];\n    vgltriangles = new vgl.triangles();\n    numberOfIndex = this.readNumber(ss);\n\n    temp = new Int8Array(numberOfIndex * 2);\n    for (i = 0; i < numberOfIndex * 2; i += 1) {\n      temp[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    index = new Uint16Array(temp.buffer);\n    vgltriangles.setIndices(index);\n    geom.addPrimitive(vgltriangles);\n\n    //Getting Matrix\n    size = 16 * 4;\n    temp = new Int8Array(size);\n    for (i = 0; i < size; i += 1) {\n      temp[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    m = new Float32Array(temp.buffer);\n    mat4.copy(matrix, m);\n\n    return matrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parsePointData\n   *\n   * @param geom, ss\n   * @returns matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parsePointData = function (geom, ss) {\n    var numberOfPoints, points, indices, temp, size,\n        matrix = mat4.create(), vglpoints = null,\n        vglcolors = null, vglVertexes = null, m,\n        p = null, idx = 0;\n\n    numberOfPoints = this.readNumber(ss);\n    p = new Array(numberOfPoints * 3);\n\n    //Getting Points and creating 1:1 connectivity\n    vglpoints = new vgl.sourceDataP3fv();\n    points = this.readF3Array(numberOfPoints, ss);\n\n    indices = new Uint16Array(numberOfPoints);\n\n    //jshint plusplus: false\n    for (i = 0; i < numberOfPoints; i += 1) {\n      indices[i] = i;\n      p[idx++] = points[i * 3];\n      p[idx++] = points[i * 3 + 1];\n      p[idx++] = points[i * 3 + 2];\n    }\n    //jshint plusplus: true\n    vglpoints.insert(p);\n    geom.addSource(vglpoints);\n\n    //Getting Colors\n    vglcolors = new vgl.sourceDataC3fv();\n    this.readColorArray(numberOfPoints, ss, vglcolors);\n    geom.addSource(vglcolors);\n\n    //Getting connectivity\n    vglVertexes = new vgl.points();\n    vglVertexes.setIndices(indices);\n    geom.addPrimitive(vglVertexes);\n\n    //Getting matrix\n    size = 16 * 4;\n    temp = new Int8Array(size);\n    for (i = 0; i < size; i += 1) {\n      temp[i] = ss[m_pos];\n      m_pos += 1;\n    }\n\n    m = new Float32Array(temp.buffer);\n    mat4.copy(matrix, m);\n\n    return matrix;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parseColorMapData\n   *\n   * @param geom, ss\n   * @returns matrix\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parseColorMapData = function (geom, ss, numColors) {\n\n    var tmpArray, size, xrgb, i, c, obj = {};\n\n    // Set number of colors\n    obj.numOfColors = numColors;\n\n    // Getting Position\n    size = 8;\n    tmpArray = new Int8Array(size);\n    for (i = 0; i < size; i += 1) {\n      tmpArray[i] = ss[m_pos];\n      m_pos += 1;\n    }\n    obj.position = new Float32Array(tmpArray.buffer);\n\n    // Getting Size\n    size = 8;\n    tmpArray = new Int8Array(size);\n    for (i = 0; i < size; i += 1) {\n      tmpArray[i] = ss[m_pos];\n      m_pos += 1;\n    }\n    obj.size = new Float32Array(tmpArray.buffer);\n\n    //Getting Colors\n    obj.colors = [];\n    //jshint plusplus: false\n    for (c = 0; c < obj.numOfColors; c += 1) {\n      tmpArray = new Int8Array(4);\n      for (i = 0; i < 4; i += 1) {\n        tmpArray[i] = ss[m_pos];\n        m_pos += 1;\n      }\n\n      xrgb = [\n        new Float32Array(tmpArray.buffer)[0],\n        ss[m_pos++],\n        ss[m_pos++],\n        ss[m_pos++]\n      ];\n      obj.colors[c] = xrgb;\n    }\n\n    obj.orientation = ss[m_pos++];\n    obj.numOfLabels = ss[m_pos++];\n    obj.title = '';\n    while (m_pos < ss.length) {\n      obj.title += String.fromCharCode(ss[m_pos++]);\n    }\n    //jshint plusplus: true\n\n    return obj;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * parseSceneMetadata\n   *\n   * @param data\n   * @returns renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.parseSceneMetadata = function (renderer, layer) {\n\n    var sceneRenderer = m_vtkScene.Renderers[layer],\n        camera = renderer.camera(), bgc, localWidth, localHeight;\n\n    localWidth = (sceneRenderer.size[0] - sceneRenderer.origin[0]) * m_node.width;\n    localHeight = (sceneRenderer.size[1] - sceneRenderer.origin[1]) * m_node.height;\n    renderer.resize(localWidth, localHeight);\n\n    /// We are setting the center to the focal point because of\n    /// a possible paraview web bug. The center of rotation isn't\n    /// getting updated correctly on resetCamera.\n    camera.setCenterOfRotation(\n      [sceneRenderer.LookAt[1], sceneRenderer.LookAt[2],\n       sceneRenderer.LookAt[3]]);\n    camera.setViewAngleDegrees(sceneRenderer.LookAt[0]);\n    camera.setPosition(\n      sceneRenderer.LookAt[7], sceneRenderer.LookAt[8],\n      sceneRenderer.LookAt[9]);\n    camera.setFocalPoint(\n      sceneRenderer.LookAt[1], sceneRenderer.LookAt[2],\n      sceneRenderer.LookAt[3]);\n    camera.setViewUpDirection(\n      sceneRenderer.LookAt[4], sceneRenderer.LookAt[5],\n      sceneRenderer.LookAt[6]);\n\n    if (layer === 0) {\n      bgc = sceneRenderer.Background1;\n      renderer.setBackgroundColor(bgc[0], bgc[1], bgc[2], 1);\n    } else {\n      renderer.setResizable(false);\n    }\n    renderer.setLayer(layer);\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * initScene\n   *\n   * @returns viewer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.initScene = function () {\n    var renderer, layer;\n\n    if (m_vtkScene === null) {\n      return m_viewer;\n    }\n    for (layer = m_vtkScene.Renderers.length - 1; layer >= 0; layer -= 1) {\n\n      renderer = this.getRenderer(layer);\n      this.parseSceneMetadata(renderer, layer);\n    }\n\n    return m_viewer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * createViewer - Creates a viewer object.\n   *\n   * @param\n   *\n   * @returns viewer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.createViewer = function (node) {\n    var interactorStyle;\n\n    if (m_viewer === null) {\n      m_node = node;\n      m_viewer = vgl.viewer(node);\n      m_viewer.init();\n      m_viewer.renderWindow().removeRenderer(m_viewer.renderWindow().activeRenderer());\n      m_viewer.renderWindow().addRenderer(new vgl.depthPeelRenderer());\n      m_vtkRenderedList[0] = m_viewer.renderWindow().activeRenderer();\n      m_viewer.renderWindow().resize(node.width, node.height);\n      interactorStyle = vgl.pvwInteractorStyle();\n      m_viewer.setInteractorStyle(interactorStyle);\n    }\n\n    return m_viewer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * deleteViewer - Deletes the viewer object associated with the reader.\n   *\n   * @returns void\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.deleteViewer = function () {\n    m_vtkRenderedList = {};\n    m_viewer = null;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * updateCanvas -\n   *\n   * @param\n   *\n   * @returns void\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.updateCanvas = function (node) {\n    m_node = node;\n    m_viewer.renderWindow().resize(node.width, node.height);\n\n    return m_viewer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * clearVtkObjectData - Clear out the list of VTK geometry data.\n   *\n   * @param void\n   * @returns void\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.numObjects = function () {\n    return m_vtkObjectCount;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * getRenderer - Gets (or creates) the renderer for a layer.\n   *\n   * @param layer\n   * @returns renderer\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.getRenderer = function (layer) {\n    var renderer;\n\n    renderer = m_vtkRenderedList[layer];\n    if (renderer === null || typeof renderer === 'undefined') {\n      renderer = new vgl.renderer();\n      renderer.setResetScene(false);\n      renderer.setResetClippingRange(false);\n      m_viewer.renderWindow().addRenderer(renderer);\n\n      if (layer !== 0) {\n        renderer.camera().setClearMask(vgl.GL.DepthBufferBit);\n      }\n\n      m_vtkRenderedList[layer] = renderer;\n    }\n\n    return renderer;\n  };\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * setVtkScene - Set the VTK scene data for camera initialization.\n   *\n   * @param scene\n   * @returns void\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.setVtkScene = function (scene) {\n    m_vtkScene = scene;\n  };\n\n  return this;\n};\n\nvgl.DataBuffers = function (initialSize) {\n  'use strict';\n  if (!(this instanceof vgl.DataBuffers)) {\n    return new vgl.DataBuffers(initialSize);\n  }\n\n  var data = {};\n\n  var size;\n  if (!initialSize && initialSize !== 0) {\n    size = 256;\n  } else {\n    size = initialSize;\n  }\n\n  var current = 0;\n\n  var copyArray = function (dst, src, start, count) {\n    if (!dst) {\n      throw 'No destination';\n    }\n    if (!start) {\n      start = 0;\n    }\n    if (!count) {\n      count = src.length;\n    }\n    for (var i = 0; i < count; i += 1) {\n      dst[start + i] = src[i];\n    }\n  };\n\n  var resize = function (min_expand) {\n    var new_size = size;\n    /* If the array would increase substantially, don't just double its\n     * size.  If the array has been increasing gradually, double it as the\n     * expectation is that it will increase again. */\n    if (new_size * 2 < min_expand) {\n      new_size = min_expand;\n    }\n    while (new_size < min_expand) {\n      new_size *= 2;\n    }\n    size = new_size;\n    for (var name in data) {\n      if (data.hasOwnProperty(name)) {\n        var newArray = new Float32Array(new_size * data[name].len);\n        var oldArray = data[name].array;\n        copyArray(newArray, oldArray);\n        data[name].array = newArray;\n        data[name].dirty = true;\n      }\n    }\n  };\n\n  /**\n   * Allocate a buffer with a name and a specific number of components per\n   * entry.  If a buffer with the specified name already exists, it will be\n   * overwritten.\n   *\n   * @param name: the name of the buffer to create or replace.\n   * @param len: number of components per entry.  Most be a positive integer.\n   */\n  this.create = function (name, len) {\n    if (!len || len < 0) {\n      throw 'Length of buffer must be a positive integer';\n    }\n    var array = new Float32Array(size * len);\n    data[name] = {\n      array: array,\n      len: len,\n      dirty: false\n    };\n    return data[name].array;\n  };\n\n  this.alloc = function (num) {\n    if ((current + num) >= size) {\n      resize(current + num);\n    }\n    var start = current;\n    current += num;\n    return start;\n  };\n\n  this.get = function (name) {\n    return data[name].array;\n  };\n\n  this.write = function (name, array, start, count) {\n    if (start + count > size) {\n      throw 'Write would exceed buffer size';\n    }\n    copyArray(data[name].array, array, start * data[name].len, count * data[name].len);\n    data[name].dirty = true;\n  };\n\n  this.repeat = function (name, elem, start, count) {\n    if (start + count > size) {\n      throw 'Repeat would exceed buffer size';\n    }\n    for (var i = 0; i < count; i += 1) {\n      copyArray(data[name].array, elem,\n                 (start + i) * data[name].len, data[name].len);\n    }\n    data[name].dirty = true;\n  };\n\n  this.count = function () {\n    return current;\n  };\n\n  this.data = function (name) {\n    return data[name].array;\n  };\n};\n\n////////////////////////////////////////////////////////////////////////////\n/**\n * Create a new instance of class renderer *\n *\n * @returns {vgl.renderer}\n */\n////////////////////////////////////////////////////////////////////////////\n\nvgl.depthPeelRenderer = function () {\n  'use strict';\n\n  if (!(this instanceof vgl.depthPeelRenderer)) {\n    return new vgl.depthPeelRenderer();\n  }\n  vgl.renderer.call(this);\n\n  var m_this = this, fbo = [], texID = [], depthTexID = [],\n      colorBlenderTexID, colorBlenderFBOID, setupTime = vgl.timestamp(),\n      fpMaterial = vgl.material(), blMaterial = vgl.material(),\n      fiMaterial = vgl.material(), frontPeelShader = null, blendShader = null,\n      finalShader, NUM_PASSES = 6, m_quad = null, fpwidth, fpheight, blwidth, blheight,\n      fiwidth, fiheight, fpopacity, fibackgroundColor;\n\n  function drawFullScreenQuad(renderState, material) {\n    m_quad.setMaterial(material);\n\n    renderState.m_mapper = m_quad.mapper();\n    renderState.m_material = material;\n\n    renderState.m_material.bind(renderState);\n    renderState.m_mapper.render(renderState);\n    renderState.m_material.undoBind(renderState);\n\n    m_quad.setMaterial(null);\n  }\n\n  function initScreenQuad(renderState, width, height) {\n    console.log(width);\n    console.log(height);\n    m_quad = vgl.utils.createPlane(0.0, 0.0, 0.0,\n                                   1.0, 0.0, 0.0,\n                                   0.0, 1.0, 0.0);\n  }\n\n  function initShaders(renderState) {\n    var fpmv, fpproj, fpvertex, fpcolor, fpdepthTex, fpnormal, fpnr,\n        blvertex, blColorSamp, blPrevDepthSamp, blCurrDepthSamp,\n        fivertex, fitempTex;\n\n    // Load the front to back peeling shader\n    fpvertex = new vgl.vertexAttribute('vertexPosition');\n    fpnormal = new vgl.vertexAttribute('vertexNormal');\n    fpcolor = new vgl.vertexAttribute('vertexColor');\n    fpmv = new vgl.modelViewUniform('modelViewMatrix');\n    fpnr = new vgl.modelViewUniform('normalMatrix');\n    fpproj = new vgl.projectionUniform('projectionMatrix');\n    fpwidth = new vgl.floatUniform('width');\n    fpheight = new vgl.floatUniform('height');\n    fpopacity = new vgl.floatUniform('opacity', 1.0);\n    fpdepthTex = new vgl.uniform(vgl.GL.INT, 'depthTexture');\n    fpdepthTex.set(0);\n\n    frontPeelShader = new vgl.shaderProgram();\n    frontPeelShader.loadShader(vgl.GL.VERTEX_SHADER, 'front_peel.vert');\n    frontPeelShader.loadShader(vgl.GL.FRAGMENT_SHADER, 'front_peel.frag');\n\n    frontPeelShader.addUniform(fpmv);\n    frontPeelShader.addUniform(fpnr);\n    frontPeelShader.addUniform(fpproj);\n    frontPeelShader.addUniform(fpdepthTex);\n    frontPeelShader.addUniform(fpwidth);\n    frontPeelShader.addUniform(fpheight);\n    frontPeelShader.addUniform(fpopacity);\n    frontPeelShader.addVertexAttribute(fpvertex, vgl.vertexAttributeKeys.Position);\n    frontPeelShader.addVertexAttribute(fpnormal, vgl.vertexAttributeKeys.Normal);\n    frontPeelShader.addVertexAttribute(fpcolor, vgl.vertexAttributeKeys.Color);\n\n    // Compile and link the shader\n    frontPeelShader.compileAndLink(renderState);\n\n    fpMaterial.addAttribute(frontPeelShader);\n\n    //     //add attributes and uniforms\n    //     frontPeelShader.AddAttribute('vVertex');\n    //     frontPeelShader.AddUniform('MVP');\n    //     frontPeelShader.AddUniform('vColor');\n    //     frontPeelShader.AddUniform('depthTexture');\n    //     //pass constant uniforms at initialization\n    //     glUniform1i(frontPeelShader('depthTexture'), 0);\n    // frontPeelShader.UnUse();\n\n    // Load the blending shader\n    blendShader = new vgl.shaderProgram();\n    blendShader.loadShader(vgl.GL.VERTEX_SHADER, 'blend.vert');\n    blendShader.loadShader(vgl.GL.FRAGMENT_SHADER, 'blend.frag');\n    blColorSamp = new vgl.uniform(vgl.GL.INT, 'currColorTexture');\n    blPrevDepthSamp = new vgl.uniform(vgl.GL.INT, 'prevDepthTexture');\n    blCurrDepthSamp = new vgl.uniform(vgl.GL.INT, 'currDepthTexture');\n\n    blwidth = new vgl.floatUniform('width');\n    blheight = new vgl.floatUniform('height');\n    blColorSamp.set(0);\n    blPrevDepthSamp.set(1);\n    blCurrDepthSamp.set(2);\n\n    blvertex = new vgl.vertexAttribute('vertexPosition');\n\n    blendShader.addUniform(blColorSamp);\n    blendShader.addUniform(blPrevDepthSamp);\n    blendShader.addUniform(blPrevDepthSamp);\n    blendShader.addUniform(blwidth);\n    blendShader.addUniform(blheight);\n    blendShader.addVertexAttribute(blvertex,\n      vgl.vertexAttributeKeys.Position);\n\n    // Compile and link the shader\n    blendShader.compileAndLink(renderState);\n    blMaterial.addAttribute(blendShader);\n\n    //     //add attributes and uniforms\n    //     blendShader.AddAttribute('vVertex');\n    //     blendShader.AddUniform('currColorTexture');\n    //     //pass constant uniforms at initialization\n    //     glUniform1i(blendShader('currColorTexture'), 0);\n    // blendShader.UnUse();\n\n    //Load the final shader\n    finalShader = new vgl.shaderProgram();\n    finalShader.loadShader(vgl.GL.VERTEX_SHADER, 'blend.vert');\n    finalShader.loadShader(vgl.GL.FRAGMENT_SHADER, 'final.frag');\n\n    //fimv = new vgl.modelViewUniform('modelViewMatrix');\n    //fiproj = new vgl.projectionUniform('projectionMatrix');\n    fitempTex = new vgl.uniform(vgl.GL.INT, 'colorTexture');\n    fiwidth = new vgl.floatUniform('width');\n    fiheight = new vgl.floatUniform('height');\n    fibackgroundColor = new vgl.uniform(vgl.GL.FLOAT_VEC3, 'backgroundColor');\n    fitempTex.set(0);\n    fivertex = new vgl.vertexAttribute('vertexPosition');\n\n    //finalShader.addUniform(fimv);\n    //finalShader.addUniform(fiproj);\n    finalShader.addUniform(fitempTex);\n    finalShader.addUniform(fiwidth);\n    finalShader.addUniform(fiheight);\n    finalShader.addUniform(fibackgroundColor);\n    finalShader.addVertexAttribute(fivertex, vgl.vertexAttributeKeys.Position);\n    finalShader.compileAndLink(renderState);\n    fiMaterial.addAttribute(finalShader);\n  }\n\n  function initFBO(renderState, WIDTH, HEIGHT) {\n    var i, textureFloatExt, textureFloatLinearExt, depthTextureExt, filtering;\n\n    // Or browser-appropriate prefix\n    depthTextureExt = renderState.m_context.getExtension('WEBKIT_WEBGL_depth_texture');\n    if (!depthTextureExt) {\n      depthTextureExt = renderState.m_context.getExtension('WEBGL_depth_texture');\n\n      if (!depthTextureExt) {\n        console.log('Depth textures are not supported');\n      }\n    }\n\n    var floatTextureExt = renderState.m_context.getExtension('OES_texture_float');\n    if (!floatTextureExt) {\n      console.log('float textures are not supported');\n    }\n\n    textureFloatExt = renderState.m_context.getExtension('OES_texture_float');\n    if (!textureFloatExt) {\n      console.log('Extension Texture Float is not working');\n      window.alert(':( Sorry, Your browser doesn\\'t support texture float extension.');\n      return;\n    }\n    textureFloatLinearExt = renderState.m_context.getExtension(\n        'OES_texture_float_linear');\n    depthTextureExt = renderState.m_context.getExtension('WEBGL_depth_texture');\n\n    if (!depthTextureExt) {\n      console.log('Extension Depth texture is not working');\n      window.alert(':( Sorry, Your browser doesn\\'t support depth texture extension.');\n      return;\n    }\n\n    filtering = textureFloatLinearExt ? vgl.GL.LINEAR : vgl.GL.NEAREST;\n\n    //FBO initialization function\n    // Generate 2 FBO\n    fbo.push(renderState.m_context.createFramebuffer());\n    fbo.push(renderState.m_context.createFramebuffer());\n\n    // Create two textures\n    texID.push(renderState.m_context.createTexture());\n    texID.push(renderState.m_context.createTexture());\n\n    //The FBO has two depth attachments\n    depthTexID.push(renderState.m_context.createTexture());\n    depthTexID.push(renderState.m_context.createTexture());\n\n    // For each attachment\n    for (i = 0; i < 2; i += 1) {\n      // First initialize the depth texture\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, depthTexID[i]);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MAG_FILTER, vgl.GL.NEAREST);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MIN_FILTER, vgl.GL.NEAREST);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_S, vgl.GL.CLAMP_TO_EDGE);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_T, vgl.GL.CLAMP_TO_EDGE);\n      renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D, 0,\n        vgl.GL.DEPTH_COMPONENT, WIDTH, HEIGHT, 0, vgl.GL.DEPTH_COMPONENT,\n        vgl.GL.UNSIGNED_SHORT, null);\n\n      // Second initialize the color attachment\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, texID[i]);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MAG_FILTER, filtering);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MIN_FILTER, filtering);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_S, vgl.GL.CLAMP_TO_EDGE);\n      renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_T, vgl.GL.CLAMP_TO_EDGE);\n      renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D, 0, vgl.GL.RGBA,\n        WIDTH, HEIGHT, 0, vgl.GL.RGBA, vgl.GL.FLOAT, null);\n\n      // Bind FBO and attach the depth and color attachments\n      renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, fbo[i]);\n      renderState.m_context.framebufferTexture2D(vgl.GL.FRAMEBUFFER,\n        vgl.GL.DEPTH_ATTACHMENT, vgl.GL.TEXTURE_2D, depthTexID[i], 0);\n      renderState.m_context.framebufferTexture2D(vgl.GL.FRAMEBUFFER,\n        vgl.GL.COLOR_ATTACHMENT0, vgl.GL.TEXTURE_2D, texID[i], 0);\n    }\n\n    // Now setup the color attachment for color blend FBO\n    colorBlenderTexID = renderState.m_context.createTexture();\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, colorBlenderTexID);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_S, vgl.GL.CLAMP_TO_EDGE);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_WRAP_T, vgl.GL.CLAMP_TO_EDGE);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MIN_FILTER, vgl.GL.NEAREST);\n    renderState.m_context.texParameteri(vgl.GL.TEXTURE_2D,\n        vgl.GL.TEXTURE_MAG_FILTER, vgl.GL.NEAREST);\n    renderState.m_context.texImage2D(vgl.GL.TEXTURE_2D, 0, vgl.GL.RGBA,\n        WIDTH, HEIGHT, 0, vgl.GL.RGBA, vgl.GL.FLOAT, null);\n\n    // Generate the color blend FBO ID\n    colorBlenderFBOID = renderState.m_context.createFramebuffer();\n    renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, colorBlenderFBOID);\n\n    // Set the depth attachment of previous FBO as depth attachment for this FBO\n    renderState.m_context.framebufferTexture2D(vgl.GL.FRAMEBUFFER,\n        vgl.GL.DEPTH_ATTACHMENT, vgl.GL.TEXTURE_2D, depthTexID[0], 0);\n\n    // Set the color blender texture as the FBO color attachment\n    renderState.m_context.framebufferTexture2D(vgl.GL.FRAMEBUFFER,\n        vgl.GL.COLOR_ATTACHMENT0, vgl.GL.TEXTURE_2D, colorBlenderTexID, 0);\n\n    // Check the FBO completeness status\n    var status = renderState.m_context.checkFramebufferStatus(\n        vgl.GL.FRAMEBUFFER);\n    if (status === vgl.GL.FRAMEBUFFER_COMPLETE) {\n      console.log('FBO setup successful !!! \\n');\n    } else {\n      console.log('Problem with FBO setup');\n    }\n    // Unbind FBO\n    renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, null);\n  }\n\n  function setup(renderState) {\n    if (setupTime.getMTime() < m_this.getMTime()) {\n      initScreenQuad(renderState, m_this.width(), m_this.height());\n      initShaders(renderState, m_this.width(), m_this.height());\n      initFBO(renderState, m_this.width(), m_this.height());\n      setupTime.modified();\n    }\n  }\n\n  function drawScene(renderState, sortedActors, material) {\n\n    var i, actor, mvMatrixInv = mat4.create();\n\n    // // Enable alpha blending with over compositing\n    // gl.enable(vgl.GL.BLEND);\n    // gl.blendFunc(vgl.GL.SRC_ALPHA, vgl.GL.ONE_MINUS_SRC_ALPHA);\n\n    for (i = 0; i < sortedActors.length; i += 1) {\n      actor = sortedActors[i][2];\n\n      if (actor.referenceFrame() ===\n          vgl.boundingObject.ReferenceFrame.Relative) {\n        mat4.multiply(renderState.m_modelViewMatrix, m_this.m_camera.viewMatrix(),\n          actor.matrix());\n        renderState.m_projectionMatrix = m_this.m_camera.projectionMatrix();\n      } else {\n        renderState.m_modelViewMatrix = actor.matrix();\n        renderState.m_projectionMatrix = mat4.create();\n        mat4.ortho(renderState.m_projectionMatrix, 0,\n                   m_this.m_width, 0, m_this.m_height, -1, 1);\n      }\n\n      mat4.invert(mvMatrixInv, renderState.m_modelViewMatrix);\n      mat4.transpose(renderState.m_normalMatrix, mvMatrixInv);\n      renderState.m_mapper = actor.mapper();\n\n      // TODO Fix this shortcut\n      if (!material) {\n        renderState.m_material = actor.material();\n        renderState.m_material.bind(renderState);\n        renderState.m_mapper.render(renderState);\n        renderState.m_material.undoBind(renderState);\n      } else {\n\n        var ou = actor.material().shaderProgram().uniform('opacity');\n        if (ou) {\n          fpopacity.set(ou.get()[0]);\n        } else {\n          fpopacity.set(1.0);\n        }\n        renderState.m_material = material;\n        renderState.m_material.bind(renderState);\n        renderState.m_mapper.render(renderState);\n        renderState.m_material.undoBind(renderState);\n      }\n    }\n  }\n\n  function depthPeelRender(renderState, actors) {\n    var layer;\n\n    fpwidth.set(m_this.width());\n    fpheight.set(m_this.height());\n    blwidth.set(m_this.width());\n    blheight.set(m_this.height());\n    fiwidth.set(m_this.width());\n    fiheight.set(m_this.height());\n\n    // Clear color and depth buffer\n    renderState.m_context.clearColor(0.0, 0.0, 0.0, 0.0);\n    /*jshint bitwise: false */\n    renderState.m_context.clear(vgl.GL.OLOR_BUFFER_BIT | vgl.GL.DEPTH_BUFFER_BIT);\n    /*jshint bitwise: true */\n\n    // Bind the color blending FBO\n    renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, colorBlenderFBOID);\n\n    // 1. In the first pass, we render normally with depth test enabled to\n    // get the nearest surface\n    renderState.m_context.enable(vgl.GL.DEPTH_TEST);\n    renderState.m_context.disable(vgl.GL.BLEND);\n\n    var clearColor = m_this.m_camera.clearColor();\n    renderState.m_context.clearColor(clearColor[0], clearColor[1], clearColor[2], 0.0);\n    /*jshint bitwise: false */\n    renderState.m_context.clear(vgl.GL.COLOR_BUFFER_BIT | vgl.GL.DEPTH_BUFFER_BIT);\n    /*jshint bitwise: true */\n\n    drawScene(renderState, actors);\n\n    // 2. Depth peeling + blending pass\n    var numLayers = (NUM_PASSES - 1) * 2;\n\n    // For each pass\n    for (layer = 1; layer < numLayers; layer += 1) {\n      var currId = layer % 2;\n      var prevId = 1 - currId;\n\n      // Bind the current FBO\n      renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, fbo[currId]);\n\n      // Disbale blending and enable depth testing\n      renderState.m_context.disable(vgl.GL.BLEND);\n      renderState.m_context.enable(vgl.GL.DEPTH_TEST);\n\n      // Bind the depth texture from the previous step\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, depthTexID[prevId]);\n\n      // Set clear color to black\n      renderState.m_context.clearColor(0.0, 0.0, 0.0, 0.0);\n\n      // Clear the color and depth buffers\n      /*jshint bitwise: false */\n      renderState.m_context.clear(vgl.GL.COLOR_BUFFER_BIT | vgl.GL.DEPTH_BUFFER_BIT);\n      /*jshint bitwise: true */\n\n      // Render scene with the front to back peeling shader\n      drawScene(renderState, actors, fpMaterial);\n\n      // Bind the color blender FBO\n      renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, colorBlenderFBOID);\n\n      // Enable blending but disable depth testing\n      renderState.m_context.disable(vgl.GL.DEPTH_TEST);\n      renderState.m_context.enable(vgl.GL.BLEND);\n\n      // Change the blending equation to add\n      renderState.m_context.blendEquation(vgl.GL.FUNC_ADD);\n\n      // Use separate blending function\n      renderState.m_context.blendFuncSeparate(vgl.GL.DST_ALPHA, vgl.GL.ONE,\n          vgl.GL.ZERO, vgl.GL.ONE_MINUS_SRC_ALPHA);\n\n      // Bind the result from the previous iteration as texture\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE0);\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, texID[currId]);\n\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE1);\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, depthTexID[prevId]);\n\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE2);\n      renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, depthTexID[currId]);\n\n      drawFullScreenQuad(renderState, blMaterial);\n\n      renderState.m_context.activeTexture(vgl.GL.TEXTURE0);\n\n      // Disable blending\n      renderState.m_context.disable(vgl.GL.BLEND);\n    }\n\n    // 3. Final render pass\n    //remove the FBO\n    renderState.m_context.bindFramebuffer(vgl.GL.FRAMEBUFFER, null);\n\n    // Disable depth testing and blending\n    renderState.m_context.disable(vgl.GL.DEPTH_TEST);\n    renderState.m_context.disable(vgl.GL.BLEND);\n\n    // Bind the color blender texture\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, colorBlenderTexID);\n\n    fibackgroundColor.set(m_this.m_camera.clearColor());\n\n    // Draw full screen quad\n    drawFullScreenQuad(renderState, fiMaterial);\n\n    renderState.m_context.bindTexture(vgl.GL.TEXTURE_2D, null);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n  /**\n   * Render the scene\n   */\n  ////////////////////////////////////////////////////////////////////////////\n  this.render = function () {\n    var i, renSt, children, actor = null, sortedActors = [];\n\n    renSt = new vgl.renderState();\n    renSt.m_renderer = m_this;\n    renSt.m_context = m_this.renderWindow().context();\n    renSt.m_contextChanged = m_this.m_contextChanged;\n\n    // Set the viewport for this renderer\n    renSt.m_context.viewport(m_this.m_x, m_this.m_y, m_this.m_width, m_this.m_height);\n\n    // Check if we have initialized\n    setup(renSt);\n\n    children = m_this.m_sceneRoot.children();\n\n    if (children.length > 0 && m_this.m_resetScene) {\n      this.resetCamera();\n      m_this.m_resetScene = false;\n    }\n\n    for (i = 0; i < children.length; i += 1) {\n      actor = children[i];\n      actor.computeBounds();\n      if (actor.visible()) {\n        sortedActors.push([actor.material().binNumber(),\n          actor.material().shaderProgram().uniform('opacity').get()[0],\n          actor]);\n      }\n    }\n\n    // Now perform sorting\n    sortedActors.sort(function (a, b) { return a[0] - b[0]; });\n    sortedActors.sort(function (a, b) { return b[1] - a[1]; });\n\n    depthPeelRender(renSt, sortedActors);\n  };\n};\n\ninherit(vgl.depthPeelRenderer, vgl.renderer);\n\nreturn vgl;\n\n}));\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/imports-loader?mat4=gl-mat4,vec4=gl-vec4,vec3=gl-vec3,$=jquery!../node_modules/vgl/vgl.js\n// module id = 503\n// module chunks = 0 1","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/create.js\n// module id = 504\n// module chunks = 0 1","module.exports = clone;\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nfunction clone(a) {\n    var out = new Float32Array(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/clone.js\n// module id = 505\n// module chunks = 0 1","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/copy.js\n// module id = 506\n// module chunks = 0 1","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/transpose.js\n// module id = 507\n// module chunks = 0 1","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/invert.js\n// module id = 508\n// module chunks = 0 1","module.exports = adjoint;\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction adjoint(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/adjoint.js\n// module id = 509\n// module chunks = 0 1","module.exports = determinant;\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nfunction determinant(a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/determinant.js\n// module id = 510\n// module chunks = 0 1","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/multiply.js\n// module id = 511\n// module chunks = 0 1","module.exports = translate;\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nfunction translate(out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/translate.js\n// module id = 512\n// module chunks = 0 1","module.exports = scale;\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nfunction scale(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/scale.js\n// module id = 513\n// module chunks = 0 1","module.exports = rotate;\n\n/**\n * Rotates a mat4 by the given angle\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nfunction rotate(out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < 0.000001) { return null; }\n    \n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/rotate.js\n// module id = 514\n// module chunks = 0 1","module.exports = rotateX;\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateX(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/rotateX.js\n// module id = 515\n// module chunks = 0 1","module.exports = rotateY;\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateY(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/rotateY.js\n// module id = 516\n// module chunks = 0 1","module.exports = rotateZ;\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateZ(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/rotateZ.js\n// module id = 517\n// module chunks = 0 1","module.exports = fromRotation\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotate(dest, dest, rad, axis)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nfunction fromRotation(out, rad, axis) {\n  var s, c, t\n  var x = axis[0]\n  var y = axis[1]\n  var z = axis[2]\n  var len = Math.sqrt(x * x + y * y + z * z)\n\n  if (Math.abs(len) < 0.000001) {\n    return null\n  }\n\n  len = 1 / len\n  x *= len\n  y *= len\n  z *= len\n\n  s = Math.sin(rad)\n  c = Math.cos(rad)\n  t = 1 - c\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c\n  out[1] = y * x * t + z * s\n  out[2] = z * x * t - y * s\n  out[3] = 0\n  out[4] = x * y * t - z * s\n  out[5] = y * y * t + c\n  out[6] = z * y * t + x * s\n  out[7] = 0\n  out[8] = x * z * t + y * s\n  out[9] = y * z * t - x * s\n  out[10] = z * z * t + c\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromRotation.js\n// module id = 518\n// module chunks = 0 1","module.exports = fromRotationTranslation;\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nfunction fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    \n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromRotationTranslation.js\n// module id = 519\n// module chunks = 0 1","module.exports = fromScaling\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.scale(dest, dest, vec)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nfunction fromScaling(out, v) {\n  out[0] = v[0]\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = v[1]\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = v[2]\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromScaling.js\n// module id = 520\n// module chunks = 0 1","module.exports = fromTranslation\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.translate(dest, dest, vec)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nfunction fromTranslation(out, v) {\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = 1\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = 1\n  out[11] = 0\n  out[12] = v[0]\n  out[13] = v[1]\n  out[14] = v[2]\n  out[15] = 1\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromTranslation.js\n// module id = 521\n// module chunks = 0 1","module.exports = fromXRotation\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateX(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromXRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = 1\n    out[1] = 0\n    out[2] = 0\n    out[3] = 0\n    out[4] = 0\n    out[5] = c\n    out[6] = s\n    out[7] = 0\n    out[8] = 0\n    out[9] = -s\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromXRotation.js\n// module id = 522\n// module chunks = 0 1","module.exports = fromYRotation\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateY(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromYRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = 0\n    out[2] = -s\n    out[3] = 0\n    out[4] = 0\n    out[5] = 1\n    out[6] = 0\n    out[7] = 0\n    out[8] = s\n    out[9] = 0\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromYRotation.js\n// module id = 523\n// module chunks = 0 1","module.exports = fromZRotation\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateZ(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromZRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = s\n    out[2] = 0\n    out[3] = 0\n    out[4] = -s\n    out[5] = c\n    out[6] = 0\n    out[7] = 0\n    out[8] = 0\n    out[9] = 0\n    out[10] = 1\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromZRotation.js\n// module id = 524\n// module chunks = 0 1","module.exports = fromQuat;\n\n/**\n * Creates a matrix from a quaternion rotation.\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @returns {mat4} out\n */\nfunction fromQuat(out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/fromQuat.js\n// module id = 525\n// module chunks = 0 1","module.exports = frustum;\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction frustum(out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/frustum.js\n// module id = 526\n// module chunks = 0 1","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/perspective.js\n// module id = 527\n// module chunks = 0 1","module.exports = perspectiveFromFieldOfView;\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI/180.0),\n        downTan = Math.tan(fov.downDegrees * Math.PI/180.0),\n        leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0),\n        rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = ((upTan - downTan) * yScale * 0.5);\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/perspectiveFromFieldOfView.js\n// module id = 528\n// module chunks = 0 1","module.exports = ortho;\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction ortho(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/ortho.js\n// module id = 529\n// module chunks = 0 1","var identity = require('./identity');\n\nmodule.exports = lookAt;\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nfunction lookAt(out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < 0.000001 &&\n        Math.abs(eyey - centery) < 0.000001 &&\n        Math.abs(eyez - centerz) < 0.000001) {\n        return identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/lookAt.js\n// module id = 530\n// module chunks = 0 1","module.exports = str;\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nfunction str(a) {\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n                    a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n                    a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + \n                    a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat4/str.js\n// module id = 531\n// module chunks = 0 1","module.exports = create\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nfunction create () {\n  var out = new Float32Array(4)\n  out[0] = 0\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/create.js\n// module id = 532\n// module chunks = 0 1","module.exports = clone\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nfunction clone (a) {\n  var out = new Float32Array(4)\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/clone.js\n// module id = 533\n// module chunks = 0 1","module.exports = fromValues\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nfunction fromValues (x, y, z, w) {\n  var out = new Float32Array(4)\n  out[0] = x\n  out[1] = y\n  out[2] = z\n  out[3] = w\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/fromValues.js\n// module id = 534\n// module chunks = 0 1","module.exports = copy\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nfunction copy (out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/copy.js\n// module id = 535\n// module chunks = 0 1","module.exports = set\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nfunction set (out, x, y, z, w) {\n  out[0] = x\n  out[1] = y\n  out[2] = z\n  out[3] = w\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/set.js\n// module id = 536\n// module chunks = 0 1","module.exports = add\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction add (out, a, b) {\n  out[0] = a[0] + b[0]\n  out[1] = a[1] + b[1]\n  out[2] = a[2] + b[2]\n  out[3] = a[3] + b[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/add.js\n// module id = 537\n// module chunks = 0 1","module.exports = subtract\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction subtract (out, a, b) {\n  out[0] = a[0] - b[0]\n  out[1] = a[1] - b[1]\n  out[2] = a[2] - b[2]\n  out[3] = a[3] - b[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/subtract.js\n// module id = 538\n// module chunks = 0 1","module.exports = multiply\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction multiply (out, a, b) {\n  out[0] = a[0] * b[0]\n  out[1] = a[1] * b[1]\n  out[2] = a[2] * b[2]\n  out[3] = a[3] * b[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/multiply.js\n// module id = 539\n// module chunks = 0 1","module.exports = divide\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction divide (out, a, b) {\n  out[0] = a[0] / b[0]\n  out[1] = a[1] / b[1]\n  out[2] = a[2] / b[2]\n  out[3] = a[3] / b[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/divide.js\n// module id = 540\n// module chunks = 0 1","module.exports = min\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction min (out, a, b) {\n  out[0] = Math.min(a[0], b[0])\n  out[1] = Math.min(a[1], b[1])\n  out[2] = Math.min(a[2], b[2])\n  out[3] = Math.min(a[3], b[3])\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/min.js\n// module id = 541\n// module chunks = 0 1","module.exports = max\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nfunction max (out, a, b) {\n  out[0] = Math.max(a[0], b[0])\n  out[1] = Math.max(a[1], b[1])\n  out[2] = Math.max(a[2], b[2])\n  out[3] = Math.max(a[3], b[3])\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/max.js\n// module id = 542\n// module chunks = 0 1","module.exports = scaleAndAdd\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nfunction scaleAndAdd (out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale)\n  out[1] = a[1] + (b[1] * scale)\n  out[2] = a[2] + (b[2] * scale)\n  out[3] = a[3] + (b[3] * scale)\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/scaleAndAdd.js\n// module id = 543\n// module chunks = 0 1","module.exports = distance\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance (a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1],\n    z = b[2] - a[2],\n    w = b[3] - a[3]\n  return Math.sqrt(x * x + y * y + z * z + w * w)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/distance.js\n// module id = 544\n// module chunks = 0 1","module.exports = squaredDistance\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nfunction squaredDistance (a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1],\n    z = b[2] - a[2],\n    w = b[3] - a[3]\n  return x * x + y * y + z * z + w * w\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/squaredDistance.js\n// module id = 545\n// module chunks = 0 1","module.exports = length\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nfunction length (a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3]\n  return Math.sqrt(x * x + y * y + z * z + w * w)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/length.js\n// module id = 546\n// module chunks = 0 1","module.exports = squaredLength\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nfunction squaredLength (a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3]\n  return x * x + y * y + z * z + w * w\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/squaredLength.js\n// module id = 547\n// module chunks = 0 1","module.exports = negate\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nfunction negate (out, a) {\n  out[0] = -a[0]\n  out[1] = -a[1]\n  out[2] = -a[2]\n  out[3] = -a[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/negate.js\n// module id = 548\n// module chunks = 0 1","module.exports = inverse\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nfunction inverse (out, a) {\n  out[0] = 1.0 / a[0]\n  out[1] = 1.0 / a[1]\n  out[2] = 1.0 / a[2]\n  out[3] = 1.0 / a[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/inverse.js\n// module id = 549\n// module chunks = 0 1","module.exports = dot\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nfunction dot (a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3]\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/dot.js\n// module id = 550\n// module chunks = 0 1","module.exports = lerp\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nfunction lerp (out, a, b, t) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3]\n  out[0] = ax + t * (b[0] - ax)\n  out[1] = ay + t * (b[1] - ay)\n  out[2] = az + t * (b[2] - az)\n  out[3] = aw + t * (b[3] - aw)\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/lerp.js\n// module id = 551\n// module chunks = 0 1","var vecNormalize = require('./normalize')\nvar vecScale = require('./scale')\n\nmodule.exports = random\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nfunction random (out, scale) {\n  scale = scale || 1.0\n\n  // TODO: This is a pretty awful way of doing this. Find something better.\n  out[0] = Math.random()\n  out[1] = Math.random()\n  out[2] = Math.random()\n  out[3] = Math.random()\n  vecNormalize(out, out)\n  vecScale(out, out, scale)\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/random.js\n// module id = 552\n// module chunks = 0 1","module.exports = transformMat4\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nfunction transformMat4 (out, a, m) {\n  var x = a[0], y = a[1], z = a[2], w = a[3]\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/transformMat4.js\n// module id = 553\n// module chunks = 0 1","module.exports = transformQuat\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nfunction transformQuat (out, a, q) {\n  var x = a[0], y = a[1], z = a[2],\n    qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n    // calculate quat * vec\n    ix = qw * x + qy * z - qz * y,\n    iy = qw * y + qz * x - qx * z,\n    iz = qw * z + qx * y - qy * x,\n    iw = -qx * x - qy * y - qz * z\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx\n  out[3] = a[3]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec4/transformQuat.js\n// module id = 554\n// module chunks = 0 1","module.exports = clone;\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nfunction clone(a) {\n    var out = new Float32Array(3)\n    out[0] = a[0]\n    out[1] = a[1]\n    out[2] = a[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/clone.js\n// module id = 555\n// module chunks = 0 1","module.exports = angle\n\nvar fromValues = require('./fromValues')\nvar normalize = require('./normalize')\nvar dot = require('./dot')\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nfunction angle(a, b) {\n    var tempA = fromValues(a[0], a[1], a[2])\n    var tempB = fromValues(b[0], b[1], b[2])\n \n    normalize(tempA, tempA)\n    normalize(tempB, tempB)\n \n    var cosine = dot(tempA, tempB)\n\n    if(cosine > 1.0){\n        return 0\n    } else {\n        return Math.acos(cosine)\n    }     \n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/angle.js\n// module id = 556\n// module chunks = 0 1","module.exports = copy;\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nfunction copy(out, a) {\n    out[0] = a[0]\n    out[1] = a[1]\n    out[2] = a[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/copy.js\n// module id = 557\n// module chunks = 0 1","module.exports = set;\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nfunction set(out, x, y, z) {\n    out[0] = x\n    out[1] = y\n    out[2] = z\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/set.js\n// module id = 558\n// module chunks = 0 1","module.exports = equals\n\nvar EPSILON = require('./epsilon')\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0]\n  var a1 = a[1]\n  var a2 = a[2]\n  var b0 = b[0]\n  var b1 = b[1]\n  var b2 = b[2]\n  return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)))\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/equals.js\n// module id = 559\n// module chunks = 0 1","module.exports = exactEquals\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2]\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/exactEquals.js\n// module id = 560\n// module chunks = 0 1","module.exports = add;\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction add(out, a, b) {\n    out[0] = a[0] + b[0]\n    out[1] = a[1] + b[1]\n    out[2] = a[2] + b[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/add.js\n// module id = 561\n// module chunks = 0 1","module.exports = require('./subtract')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/sub.js\n// module id = 562\n// module chunks = 0 1","module.exports = require('./multiply')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/mul.js\n// module id = 563\n// module chunks = 0 1","module.exports = require('./divide')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/div.js\n// module id = 564\n// module chunks = 0 1","module.exports = min;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction min(out, a, b) {\n    out[0] = Math.min(a[0], b[0])\n    out[1] = Math.min(a[1], b[1])\n    out[2] = Math.min(a[2], b[2])\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/min.js\n// module id = 565\n// module chunks = 0 1","module.exports = max;\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction max(out, a, b) {\n    out[0] = Math.max(a[0], b[0])\n    out[1] = Math.max(a[1], b[1])\n    out[2] = Math.max(a[2], b[2])\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/max.js\n// module id = 566\n// module chunks = 0 1","module.exports = floor\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nfunction floor(out, a) {\n  out[0] = Math.floor(a[0])\n  out[1] = Math.floor(a[1])\n  out[2] = Math.floor(a[2])\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/floor.js\n// module id = 567\n// module chunks = 0 1","module.exports = ceil\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nfunction ceil(out, a) {\n  out[0] = Math.ceil(a[0])\n  out[1] = Math.ceil(a[1])\n  out[2] = Math.ceil(a[2])\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/ceil.js\n// module id = 568\n// module chunks = 0 1","module.exports = round\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nfunction round(out, a) {\n  out[0] = Math.round(a[0])\n  out[1] = Math.round(a[1])\n  out[2] = Math.round(a[2])\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/round.js\n// module id = 569\n// module chunks = 0 1","module.exports = scale;\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nfunction scale(out, a, b) {\n    out[0] = a[0] * b\n    out[1] = a[1] * b\n    out[2] = a[2] * b\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/scale.js\n// module id = 570\n// module chunks = 0 1","module.exports = scaleAndAdd;\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nfunction scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale)\n    out[1] = a[1] + (b[1] * scale)\n    out[2] = a[2] + (b[2] * scale)\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/scaleAndAdd.js\n// module id = 571\n// module chunks = 0 1","module.exports = require('./distance')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/dist.js\n// module id = 572\n// module chunks = 0 1","module.exports = require('./squaredDistance')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/sqrDist.js\n// module id = 573\n// module chunks = 0 1","module.exports = require('./length')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/len.js\n// module id = 574\n// module chunks = 0 1","module.exports = require('./squaredLength')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/sqrLen.js\n// module id = 575\n// module chunks = 0 1","module.exports = negate;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nfunction negate(out, a) {\n    out[0] = -a[0]\n    out[1] = -a[1]\n    out[2] = -a[2]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/negate.js\n// module id = 576\n// module chunks = 0 1","module.exports = inverse;\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nfunction inverse(out, a) {\n  out[0] = 1.0 / a[0]\n  out[1] = 1.0 / a[1]\n  out[2] = 1.0 / a[2]\n  return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/inverse.js\n// module id = 577\n// module chunks = 0 1","module.exports = cross;\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction cross(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2]\n\n    out[0] = ay * bz - az * by\n    out[1] = az * bx - ax * bz\n    out[2] = ax * by - ay * bx\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/cross.js\n// module id = 578\n// module chunks = 0 1","module.exports = lerp;\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nfunction lerp(out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2]\n    out[0] = ax + t * (b[0] - ax)\n    out[1] = ay + t * (b[1] - ay)\n    out[2] = az + t * (b[2] - az)\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/lerp.js\n// module id = 579\n// module chunks = 0 1","module.exports = random;\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nfunction random(out, scale) {\n    scale = scale || 1.0\n\n    var r = Math.random() * 2.0 * Math.PI\n    var z = (Math.random() * 2.0) - 1.0\n    var zScale = Math.sqrt(1.0-z*z) * scale\n\n    out[0] = Math.cos(r) * zScale\n    out[1] = Math.sin(r) * zScale\n    out[2] = z * scale\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/random.js\n// module id = 580\n// module chunks = 0 1","module.exports = transformMat4;\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat4(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15]\n    w = w || 1.0\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/transformMat4.js\n// module id = 581\n// module chunks = 0 1","module.exports = transformMat3;\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat3(out, a, m) {\n    var x = a[0], y = a[1], z = a[2]\n    out[0] = x * m[0] + y * m[3] + z * m[6]\n    out[1] = x * m[1] + y * m[4] + z * m[7]\n    out[2] = x * m[2] + y * m[5] + z * m[8]\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/transformMat3.js\n// module id = 582\n// module chunks = 0 1","module.exports = transformQuat;\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nfunction transformQuat(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx\n    return out\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/transformQuat.js\n// module id = 583\n// module chunks = 0 1","module.exports = rotateX;\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateX(out, a, b, c){\n    var by = b[1]\n    var bz = b[2]\n\n    // Translate point to the origin\n    var py = a[1] - by\n    var pz = a[2] - bz\n\n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n\n    // perform rotation and translate to correct position\n    out[0] = a[0]\n    out[1] = by + py * cc - pz * sc\n    out[2] = bz + py * sc + pz * cc\n\n    return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/rotateX.js\n// module id = 584\n// module chunks = 0 1","module.exports = rotateY;\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateY(out, a, b, c){\n    var bx = b[0]\n    var bz = b[2]\n\n    // translate point to the origin\n    var px = a[0] - bx\n    var pz = a[2] - bz\n    \n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n  \n    // perform rotation and translate to correct position\n    out[0] = bx + pz * sc + px * cc\n    out[1] = a[1]\n    out[2] = bz + pz * cc - px * sc\n  \n    return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/rotateY.js\n// module id = 585\n// module chunks = 0 1","module.exports = rotateZ;\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateZ(out, a, b, c){\n    var bx = b[0]\n    var by = b[1]\n\n    //Translate point to the origin\n    var px = a[0] - bx\n    var py = a[1] - by\n  \n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n\n    // perform rotation and translate to correct position\n    out[0] = bx + px * cc - py * sc\n    out[1] = by + px * sc + py * cc\n    out[2] = a[2]\n  \n    return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/rotateZ.js\n// module id = 586\n// module chunks = 0 1","module.exports = forEach;\n\nvar vec = require('./create')()\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nfunction forEach(a, stride, offset, count, fn, arg) {\n        var i, l\n        if(!stride) {\n            stride = 3\n        }\n\n        if(!offset) {\n            offset = 0\n        }\n        \n        if(count) {\n            l = Math.min((count * stride) + offset, a.length)\n        } else {\n            l = a.length\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i] \n            vec[1] = a[i+1] \n            vec[2] = a[i+2]\n            fn(vec, vec, arg)\n            a[i] = vec[0] \n            a[i+1] = vec[1] \n            a[i+2] = vec[2]\n        }\n        \n        return a\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-vec3/forEach.js\n// module id = 587\n// module chunks = 0 1","module.exports = adjoint\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @alias mat3.adjoint\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction adjoint(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  out[0] = (a11 * a22 - a12 * a21)\n  out[1] = (a02 * a21 - a01 * a22)\n  out[2] = (a01 * a12 - a02 * a11)\n  out[3] = (a12 * a20 - a10 * a22)\n  out[4] = (a00 * a22 - a02 * a20)\n  out[5] = (a02 * a10 - a00 * a12)\n  out[6] = (a10 * a21 - a11 * a20)\n  out[7] = (a01 * a20 - a00 * a21)\n  out[8] = (a00 * a11 - a01 * a10)\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/adjoint.js\n// module id = 588\n// module chunks = 0 1","module.exports = clone\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @alias mat3.clone\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nfunction clone(a) {\n  var out = new Float32Array(9)\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  out[4] = a[4]\n  out[5] = a[5]\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/clone.js\n// module id = 589\n// module chunks = 0 1","module.exports = copy\n\n/**\n * Copy the values from one mat3 to another\n *\n * @alias mat3.copy\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction copy(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  out[4] = a[4]\n  out[5] = a[5]\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/copy.js\n// module id = 590\n// module chunks = 0 1","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/create.js\n// module id = 591\n// module chunks = 0 1","module.exports = determinant\n\n/**\n * Calculates the determinant of a mat3\n *\n * @alias mat3.determinant\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nfunction determinant(a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  return a00 * (a22 * a11 - a12 * a21)\n       + a01 * (a12 * a20 - a22 * a10)\n       + a02 * (a21 * a10 - a11 * a20)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/determinant.js\n// module id = 592\n// module chunks = 0 1","module.exports = frob\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @alias mat3.frob\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nfunction frob(a) {\n  return Math.sqrt(\n      a[0]*a[0]\n    + a[1]*a[1]\n    + a[2]*a[2]\n    + a[3]*a[3]\n    + a[4]*a[4]\n    + a[5]*a[5]\n    + a[6]*a[6]\n    + a[7]*a[7]\n    + a[8]*a[8]\n  )\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/frob.js\n// module id = 593\n// module chunks = 0 1","module.exports = fromMat2d\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @alias mat3.fromMat2d\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nfunction fromMat2d(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = 0\n\n  out[3] = a[2]\n  out[4] = a[3]\n  out[5] = 0\n\n  out[6] = a[4]\n  out[7] = a[5]\n  out[8] = 1\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/from-mat2.js\n// module id = 594\n// module chunks = 0 1","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/from-mat4.js\n// module id = 595\n// module chunks = 0 1","module.exports = fromQuat\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @alias mat3.fromQuat\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nfunction fromQuat(out, q) {\n  var x = q[0]\n  var y = q[1]\n  var z = q[2]\n  var w = q[3]\n\n  var x2 = x + x\n  var y2 = y + y\n  var z2 = z + z\n\n  var xx = x * x2\n  var yx = y * x2\n  var yy = y * y2\n  var zx = z * x2\n  var zy = z * y2\n  var zz = z * z2\n  var wx = w * x2\n  var wy = w * y2\n  var wz = w * z2\n\n  out[0] = 1 - yy - zz\n  out[3] = yx - wz\n  out[6] = zx + wy\n\n  out[1] = yx + wz\n  out[4] = 1 - xx - zz\n  out[7] = zy - wx\n\n  out[2] = zx - wy\n  out[5] = zy + wx\n  out[8] = 1 - xx - yy\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/from-quat.js\n// module id = 596\n// module chunks = 0 1","module.exports = identity\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @alias mat3.identity\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nfunction identity(out) {\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/identity.js\n// module id = 597\n// module chunks = 0 1","module.exports = invert\n\n/**\n * Inverts a mat3\n *\n * @alias mat3.invert\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction invert(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var b01 = a22 * a11 - a12 * a21\n  var b11 = -a22 * a10 + a12 * a20\n  var b21 = a21 * a10 - a11 * a20\n\n  // Calculate the determinant\n  var det = a00 * b01 + a01 * b11 + a02 * b21\n\n  if (!det) return null\n  det = 1.0 / det\n\n  out[0] = b01 * det\n  out[1] = (-a22 * a01 + a02 * a21) * det\n  out[2] = (a12 * a01 - a02 * a11) * det\n  out[3] = b11 * det\n  out[4] = (a22 * a00 - a02 * a20) * det\n  out[5] = (-a12 * a00 + a02 * a10) * det\n  out[6] = b21 * det\n  out[7] = (-a21 * a00 + a01 * a20) * det\n  out[8] = (a11 * a00 - a01 * a10) * det\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/invert.js\n// module id = 598\n// module chunks = 0 1","module.exports = multiply\n\n/**\n * Multiplies two mat3's\n *\n * @alias mat3.multiply\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nfunction multiply(out, a, b) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var b00 = b[0], b01 = b[1], b02 = b[2]\n  var b10 = b[3], b11 = b[4], b12 = b[5]\n  var b20 = b[6], b21 = b[7], b22 = b[8]\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/multiply.js\n// module id = 599\n// module chunks = 0 1","module.exports = normalFromMat4\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @alias mat3.normalFromMat4\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nfunction normalFromMat4(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3]\n  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7]\n  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11]\n  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15]\n\n  var b00 = a00 * a11 - a01 * a10\n  var b01 = a00 * a12 - a02 * a10\n  var b02 = a00 * a13 - a03 * a10\n  var b03 = a01 * a12 - a02 * a11\n  var b04 = a01 * a13 - a03 * a11\n  var b05 = a02 * a13 - a03 * a12\n  var b06 = a20 * a31 - a21 * a30\n  var b07 = a20 * a32 - a22 * a30\n  var b08 = a20 * a33 - a23 * a30\n  var b09 = a21 * a32 - a22 * a31\n  var b10 = a21 * a33 - a23 * a31\n  var b11 = a22 * a33 - a23 * a32\n\n  // Calculate the determinant\n  var det = b00 * b11\n          - b01 * b10\n          + b02 * b09\n          + b03 * b08\n          - b04 * b07\n          + b05 * b06\n\n  if (!det) return null\n  det = 1.0 / det\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/normal-from-mat4.js\n// module id = 600\n// module chunks = 0 1","module.exports = rotate\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @alias mat3.rotate\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nfunction rotate(out, a, rad) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var s = Math.sin(rad)\n  var c = Math.cos(rad)\n\n  out[0] = c * a00 + s * a10\n  out[1] = c * a01 + s * a11\n  out[2] = c * a02 + s * a12\n\n  out[3] = c * a10 - s * a00\n  out[4] = c * a11 - s * a01\n  out[5] = c * a12 - s * a02\n\n  out[6] = a20\n  out[7] = a21\n  out[8] = a22\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/rotate.js\n// module id = 601\n// module chunks = 0 1","module.exports = scale\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @alias mat3.scale\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nfunction scale(out, a, v) {\n  var x = v[0]\n  var y = v[1]\n\n  out[0] = x * a[0]\n  out[1] = x * a[1]\n  out[2] = x * a[2]\n\n  out[3] = y * a[3]\n  out[4] = y * a[4]\n  out[5] = y * a[5]\n\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/scale.js\n// module id = 602\n// module chunks = 0 1","module.exports = str\n\n/**\n * Returns a string representation of a mat3\n *\n * @alias mat3.str\n * @param {mat3} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nfunction str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n                   a[3] + ', ' + a[4] + ', ' + a[5] + ', ' +\n                   a[6] + ', ' + a[7] + ', ' + a[8] + ')'\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/str.js\n// module id = 603\n// module chunks = 0 1","module.exports = translate\n\n/**\n * Translate a mat3 by the given vector\n *\n * @alias mat3.translate\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nfunction translate(out, a, v) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n  var x = v[0], y = v[1]\n\n  out[0] = a00\n  out[1] = a01\n  out[2] = a02\n\n  out[3] = a10\n  out[4] = a11\n  out[5] = a12\n\n  out[6] = x * a00 + y * a10 + a20\n  out[7] = x * a01 + y * a11 + a21\n  out[8] = x * a02 + y * a12 + a22\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/translate.js\n// module id = 604\n// module chunks = 0 1","module.exports = transpose\n\n/**\n * Transpose the values of a mat3\n *\n * @alias mat3.transpose\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nfunction transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1], a02 = a[2], a12 = a[5]\n    out[1] = a[3]\n    out[2] = a[6]\n    out[3] = a01\n    out[5] = a[7]\n    out[6] = a02\n    out[7] = a12\n  } else {\n    out[0] = a[0]\n    out[1] = a[3]\n    out[2] = a[6]\n    out[3] = a[1]\n    out[4] = a[4]\n    out[5] = a[7]\n    out[6] = a[2]\n    out[7] = a[5]\n    out[8] = a[8]\n  }\n\n  return out\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/gl-mat3/transpose.js\n// module id = 605\n// module chunks = 0 1","'use strict';\n\nvar sort = require('./sort');\nvar range = require('./range');\nvar within = require('./within');\n\nmodule.exports = kdbush;\n\nfunction kdbush(points, getX, getY, nodeSize, ArrayType) {\n    return new KDBush(points, getX, getY, nodeSize, ArrayType);\n}\n\nfunction KDBush(points, getX, getY, nodeSize, ArrayType) {\n    getX = getX || defaultGetX;\n    getY = getY || defaultGetY;\n    ArrayType = ArrayType || Array;\n\n    this.nodeSize = nodeSize || 64;\n    this.points = points;\n\n    this.ids = new ArrayType(points.length);\n    this.coords = new ArrayType(points.length * 2);\n\n    for (var i = 0; i < points.length; i++) {\n        this.ids[i] = i;\n        this.coords[2 * i] = getX(points[i]);\n        this.coords[2 * i + 1] = getY(points[i]);\n    }\n\n    sort(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0);\n}\n\nKDBush.prototype = {\n    range: function (minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    },\n\n    within: function (x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n};\n\nfunction defaultGetX(p) { return p[0]; }\nfunction defaultGetY(p) { return p[1]; }\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/kdbush/src/kdbush.js\n// module id = 606\n// module chunks = 0 1","'use strict';\n\nmodule.exports = sortKD;\n\nfunction sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    var m = Math.floor((left + right) / 2);\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        var t = coords[2 * k + inc];\n        var i = left;\n        var j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/kdbush/src/sort.js\n// module id = 607\n// module chunks = 0 1","'use strict';\n\nmodule.exports = range;\n\nfunction range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var x, y;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/kdbush/src/range.js\n// module id = 608\n// module chunks = 0 1","'use strict';\n\nmodule.exports = within;\n\nfunction within(ids, coords, qx, qy, r, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var r2 = r * r;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        var x = coords[2 * m];\n        var y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    var dx = ax - bx;\n    var dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/kdbush/src/within.js\n// module id = 609\n// module chunks = 0 1","var inherit = require('./inherit');\nvar featureLayer = require('./featureLayer');\nvar geo_annotation = require('./annotation');\nvar geo_event = require('./event');\nvar registry = require('./registry');\nvar transform = require('./transform');\nvar $ = require('jquery');\nvar Mousetrap = require('mousetrap');\nvar textFeature = require('./textFeature');\n\n/**\n * @typedef {object} geo.annotationLayer.labelRecord\n * @property {string} text The text of the label\n * @property {geo.geoPosition} position The position of the label in map gcs\n *    coordinates.\n * @property {geo.textFeature.styleSpec} [style] A {@link geo.textFeature}\n *    style object.\n */\n\n/**\n * Layer to handle direct interactions with different features.  Annotations\n * (features) can be created by calling mode(<name of feature>) or cancelled\n * with mode(null).  There is also an \"edit\" mode which is used when modifying\n * an annotation.\n *\n * @class\n * @alias geo.annotationLayer\n * @extends geo.featureLayer\n * @param {object} [args] Layer options.\n * @param {number} [args.dblClickTime=300] The delay in milliseconds that is\n *    treated as a double-click when working with annotations.\n * @param {number} [args.adjacentPointProximity=5] The minimum distance in\n *    display coordinates (pixels) between two adjacent points when creating a\n *    polygon or line.  A value of 0 requires an exact match.\n * @param {number} [args.continuousPointProximity=5] The minimum distance in\n *    display coordinates (pixels) between two adjacent points when dragging\n *    to create an annotation.  `false` disables continuous drawing mode.\n * @param {number} [args.continuousPointColinearity=1.0deg] The minimum\n *    angle between a series of three points when dragging to not interpret\n *    them as colinear.  Only applies if `continuousPointProximity` is not\n *    `false`.\n * @param {number} [args.finalPointProximity=10] The maximum distance in\n *    display coordinates (pixels) between the starting point and the mouse\n *    coordinates to signal closing a polygon.  A value of 0 requires an exact\n *    match.  A negative value disables closing a polygon by clicking on the\n *    start point.\n * @param {boolean} [args.showLabels=true] Truthy to show feature labels that\n *    are allowed by the associated feature to be shown.\n * @param {boolean} [args.clickToEdit=false] Truthy to allow clicking an\n *    annotation to place it in edit mode.\n * @param {object} [args.defaultLabelStyle] Default styles for labels.\n * @returns {geo.annotationLayer}\n * @fires geo.event.annotation.state\n * @fires geo.event.annotation.coordinates\n * @fires geo.event.annotation.edit_action\n * @fires geo.event.annotation.select_edit_handle\n */\nvar annotationLayer = function (args) {\n  'use strict';\n  if (!(this instanceof annotationLayer)) {\n    return new annotationLayer(args);\n  }\n  featureLayer.call(this, args);\n\n  var mapInteractor = require('./mapInteractor');\n  var timestamp = require('./timestamp');\n  var util = require('./util');\n\n  var m_this = this,\n      s_init = this._init,\n      s_exit = this._exit,\n      s_draw = this.draw,\n      s_update = this._update,\n      m_buildTime = timestamp(),\n      m_options,\n      m_mode = null,\n      m_annotations = [],\n      m_features = [],\n      m_labelFeature,\n      m_labelLayer,\n      m_keyHandler;\n\n  var geojsonStyleProperties = {\n    'closed': {dataType: 'boolean', keys: ['closed', 'close']},\n    'fill': {dataType: 'boolean', keys: ['fill']},\n    'fillColor': {dataType: 'color', keys: ['fillColor', 'fill-color', 'marker-color', 'fill']},\n    'fillOpacity': {dataType: 'opacity', keys: ['fillOpacity', 'fill-opacity']},\n    'lineCap': {dataType: 'text', keys: ['lineCap', 'line-cap']},\n    'lineJoin': {dataType: 'text', keys: ['lineJoin', 'line-join']},\n    'radius': {dataType: 'positive', keys: ['radius']},\n    'scaled': {dataType: 'booleanOrNumber', keys: ['scaled']},\n    'stroke': {dataType: 'boolean', keys: ['stroke']},\n    'strokeColor': {dataType: 'color', keys: ['strokeColor', 'stroke-color', 'stroke']},\n    'strokeOffset': {dataType: 'number', keys: ['strokeOffset', 'stroke-offset']},\n    'strokeOpacity': {dataType: 'opacity', keys: ['strokeOpacity', 'stroke-opacity']},\n    'strokeWidth': {dataType: 'positive', keys: ['strokeWidth', 'stroke-width']}\n  };\n  var textFeatureDataTypes = {\n    offset: 'coordinate2',\n    rotateWithMap: 'boolean',\n    rotation: 'angle',\n    scaleWithMap: 'boolean',\n    scale: 'booleanOrNumber',\n    shadowBlur: 'numberOrBlank',\n    shadowOffset: 'coordinate2',\n    strokeWidth: 'numberOrBlank',\n    visible: 'boolean'\n  };\n  textFeature.usedStyles.forEach(function (key) {\n    geojsonStyleProperties[key] = {\n      option: 'labelStyle',\n      dataType: textFeatureDataTypes[key] || 'text',\n      keys: [\n        key,\n        'label' + key.charAt(0).toUpperCase() + key.slice(1),\n        key.replace(/([A-Z])/g, '-$1').toLowerCase(),\n        'label-' + key.replace(/([A-Z])/g, '-$1').toLowerCase()]\n    };\n  });\n\n  m_options = $.extend(true, {}, {\n    dblClickTime: 300,\n    adjacentPointProximity: 5,  // in pixels, 0 is exact\n    // in pixels; set to continuousPointProximity to false to disable\n    // continuous drawing modes.\n    continuousPointProximity: 5,\n    // in radians, minimum angle between continuous points to interpret them as\n    // being coliner\n    continuousPointColinearity: 1.0 * Math.PI / 180,\n    finalPointProximity: 10,  // in pixels, 0 is exact\n    showLabels: true,\n    clickToEdit: false\n  }, args);\n\n  /**\n   * Process an action event.  If we are in rectangle-creation mode, this\n   * creates a rectangle.\n   *\n   * @param {geo.event} evt The selection event.\n   * @fires geo.event.annotation.edit_action\n   */\n  this._processAction = function (evt) {\n    var update;\n    if (evt.state && evt.state.actionRecord &&\n        evt.state.actionRecord.owner === geo_annotation.actionOwner &&\n        m_this.currentAnnotation) {\n      switch (m_this.mode()) {\n        case m_this.modes.edit:\n          update = m_this.currentAnnotation.processEditAction(evt);\n          if (m_this.currentAnnotation &&\n              m_this.currentAnnotation._editHandle &&\n              m_this.currentAnnotation._editHandle.handle) {\n            m_this.geoTrigger(geo_event.annotation.edit_action, {\n              annotation: m_this.currentAnnotation,\n              handle: m_this.currentAnnotation._editHandle ? m_this.currentAnnotation._editHandle.handle : undefined,\n              action: evt.event\n            });\n            if (evt.event === geo_event.actionup) {\n              m_this._selectEditHandle(\n                {data: m_this.currentAnnotation._editHandle.handle},\n                m_this.currentAnnotation._editHandle.handle.selected);\n            }\n          }\n          break;\n        default:\n          update = m_this.currentAnnotation.processAction(evt);\n          break;\n      }\n    }\n    m_this._updateFromEvent(update);\n  };\n\n  /**\n   * Handle updating the current annotation based on an update state.\n   *\n   * @param {string|undefined} update Truthy to update.  `'done'` if the\n   *    annotation was completed and the mode should return to `null`.\n   *    `'remove'` to remove the current annotation and set the mode to `null`.\n   *    Falsy to do nothing.\n   */\n  this._updateFromEvent = function (update) {\n    switch (update) {\n      case 'remove':\n        m_this.removeAnnotation(m_this.currentAnnotation, false);\n        m_this.mode(null);\n        break;\n      case 'done':\n        m_this.mode(null);\n        break;\n    }\n    if (update) {\n      m_this.modified();\n      m_this.draw();\n    }\n  };\n\n  /**\n   * Handle mouse movement.  If there is a current annotation, the movement\n   * event is sent to it.\n   *\n   * @param {geo.event} evt The mouse move event.\n   */\n  this._handleMouseMove = function (evt) {\n    if (m_this.mode() && m_this.currentAnnotation) {\n      var update = m_this.currentAnnotation.mouseMove(evt);\n      if (update) {\n        m_this.modified();\n        m_this.draw();\n      }\n    }\n  };\n\n  /**\n   * Select or deselect an edit handle.\n   *\n   * @param {geo.event} evt The mouse move event.\n   * @param {boolean} enable Truthy to select the handle, falsy to deselect it.\n   * @returns {this}\n   */\n  this._selectEditHandle = function (evt, enable) {\n    if (!evt.data || !evt.data.editHandle) {\n      return;\n    }\n    $.each(m_features[geo_annotation._editHandleFeatureLevel], function (type, feature) {\n      feature.feature.modified();\n    });\n    m_this.currentAnnotation.selectEditHandle(evt.data, enable);\n    m_this.draw();\n    m_this.map().node().toggleClass('annotation-input', !!enable);\n    m_this.map().interactor().removeAction(\n      undefined, undefined, geo_annotation.actionOwner);\n    if (enable) {\n      var actions = m_this.currentAnnotation.actions(geo_annotation.state.edit);\n      $.each(actions, function (idx, action) {\n        m_this.map().interactor().addAction(action);\n      });\n    }\n    return m_this;\n  };\n\n  /**\n   * Handle mouse on events.  If there is no current annotation and\n   * clickToEdit is enabled, any hovered annotation is highlighted.\n   * event is sent to it.\n   *\n   * @param {geo.event} evt The mouse move event.\n   */\n  this._handleMouseOn = function (evt) {\n    if (!evt.data || !evt.data.annotation) {\n      return;\n    }\n    if (m_this.mode() === m_this.modes.edit && m_this.currentAnnotation) {\n      m_this._selectEditHandle(evt, true);\n      return;\n    }\n    if (m_this.mode() || m_this.currentAnnotation || !m_this.options('clickToEdit')) {\n      return;\n    }\n    evt.data.annotation.state(geo_annotation.state.highlight);\n    m_this.modified();\n    m_this.draw();\n  };\n\n  /**\n   * Handle mouse off events.  If the specific annotation is in the highlight\n   * state, move it back to the done state.\n   *\n   * @param {geo.event} evt The mouse move event.\n   */\n  this._handleMouseOff = function (evt) {\n    if (!evt.data || !evt.data.annotation) {\n      return;\n    }\n    if (m_this.mode() === m_this.modes.edit && evt.data.editHandle && evt.data.selected) {\n      m_this._selectEditHandle(evt, false);\n      return;\n    }\n    if (evt.data.annotation.state() === geo_annotation.state.highlight) {\n      evt.data.annotation.state(geo_annotation.state.done);\n      m_this.modified();\n      m_this.draw();\n    }\n  };\n\n  /**\n   * Handle mouse clicks.  If there is a current annotation, the click event is\n   * sent to it.\n   *\n   * @param {geo.event} evt The mouse click event.\n   */\n  this._handleMouseClick = function (evt) {\n    var retrigger = false, update;\n    if (m_this.mode() === m_this.modes.edit) {\n      if (m_this.map().interactor().hasAction(undefined, undefined, geo_annotation.actionOwner)) {\n        update = m_this.currentAnnotation.mouseClickEdit(evt);\n        m_this._updateFromEvent(update);\n        return;\n      }\n      m_this.mode(null);\n      m_this.draw();\n      $.each(m_features, function (idx, featureLevel) {\n        $.each(featureLevel, function (type, feature) {\n          feature.feature._clearSelectedFeatures();\n        });\n      });\n      retrigger = true;\n    } else if (m_this.mode() && m_this.currentAnnotation) {\n      update = m_this.currentAnnotation.mouseClick(evt);\n      m_this._updateFromEvent(update);\n      retrigger = !m_this.mode();\n    } else if (!m_this.mode() && !m_this.currentAnnotation && m_this.options('clickToEdit')) {\n      var highlighted = m_this.annotations().filter(function (ann) {\n        return ann.state() === geo_annotation.state.highlight;\n      });\n      if (highlighted.length !== 1) {\n        return;\n      }\n      m_this.mode(m_this.modes.edit, highlighted[0]);\n      m_this.draw();\n      retrigger = true;\n    }\n    if (retrigger) {\n      // retrigger mouse move to ensure the correct events are attached\n      m_this.map().interactor().retriggerMouseMove();\n    }\n  };\n\n  /**\n   * Set or get options.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the options object.\n   *    If a string, either set or return the option of that name.  If an\n   *    object, update the options with the object's values.\n   * @param {object} [arg2] If `arg1` is a string and this is defined, set\n   *    the option to this value.\n   * @returns {object|this} If options are set, return the annotation,\n   *    otherwise return the requested option or the set of options.\n   */\n  this.options = function (arg1, arg2) {\n    if (arg1 === undefined) {\n      return m_options;\n    }\n    if (typeof arg1 === 'string' && arg2 === undefined) {\n      return m_options[arg1];\n    }\n    if (arg2 === undefined) {\n      m_options = $.extend(true, m_options, arg1);\n    } else {\n      m_options[arg1] = arg2;\n    }\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Calculate the display distance for two coordinate in the current map.\n   *\n   * @param {geo.geoPosition|geo.screenPosition} coord1 The first coordinates.\n   * @param {string|geo.transform|null} gcs1 `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, `'display'` if the coordinates are\n   *    already in display coordinates, or any other transform.\n   * @param {geo.geoPosition|geo.screenPosition} coord2 the second coordinates.\n   * @param {string|geo.transform|null} [gcs2] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, `'display'` if the coordinates are\n   *    already in display coordinates, or any other transform.\n   * @returns {number} the Euclidian distance between the two coordinates.\n   */\n  this.displayDistance = function (coord1, gcs1, coord2, gcs2) {\n    var map = m_this.map();\n    if (gcs1 !== 'display') {\n      gcs1 = (gcs1 === null ? map.gcs() : (\n        gcs1 === undefined ? map.ingcs() : gcs1));\n      coord1 = map.gcsToDisplay(coord1, gcs1);\n    }\n    if (gcs2 !== 'display') {\n      gcs2 = (gcs2 === null ? map.gcs() : (\n        gcs2 === undefined ? map.ingcs() : gcs2));\n      coord2 = map.gcsToDisplay(coord2, gcs2);\n    }\n    var dist = Math.sqrt(Math.pow(coord1.x - coord2.x, 2) +\n                         Math.pow(coord1.y - coord2.y, 2));\n    return dist;\n  };\n\n  /**\n   * Add an annotation to the layer.  The annotation could be in any state.\n   *\n   * @param {geo.annotation} annotation Te annotation to add.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {this} The current layer.\n   * @fires geo.event.annotation.add_before\n   * @fires geo.event.annotation.add\n   */\n  this.addAnnotation = function (annotation, gcs) {\n    var pos = $.inArray(annotation, m_annotations);\n    if (pos < 0) {\n      m_this.geoTrigger(geo_event.annotation.add_before, {\n        annotation: annotation\n      });\n      m_annotations.push(annotation);\n      annotation.layer(m_this);\n      var map = m_this.map();\n      gcs = (gcs === null ? map.gcs() : (\n        gcs === undefined ? map.ingcs() : gcs));\n      if (gcs !== map.gcs()) {\n        annotation._coordinates(transform.transformCoordinates(\n          gcs, map.gcs(), annotation._coordinates()));\n      }\n      m_this.modified();\n      m_this.draw();\n      m_this.geoTrigger(geo_event.annotation.add, {\n        annotation: annotation\n      });\n    }\n    return m_this;\n  };\n\n  /**\n   * Remove an annotation from the layer.\n   *\n   * @param {geo.annoation} annotation The annotation to remove.\n   * @param {boolean} update If `false`, don't update the layer after removing\n   *    the annotation.\n   * @returns {boolean} `true` if an annotation was removed.\n   * @fires geo.event.annotation.remove\n   */\n  this.removeAnnotation = function (annotation, update) {\n    var pos = $.inArray(annotation, m_annotations);\n    if (pos >= 0) {\n      if (annotation === m_this.currentAnnotation) {\n        m_this.currentAnnotation = null;\n      }\n      annotation._exit();\n      m_annotations.splice(pos, 1);\n      if (update !== false) {\n        m_this.modified();\n        m_this.draw();\n      }\n      m_this.geoTrigger(geo_event.annotation.remove, {\n        annotation: annotation\n      });\n    }\n    return pos >= 0;\n  };\n\n  /**\n   * Remove all annotations from the layer.\n   *\n   * @param {boolean} [skipCreating] If truthy, don't remove annotations that\n   *    are in the create state.\n   * @param {boolean} [update] If `false`, don't update the layer after\n   *    removing the annotation.\n   * @returns {number} The number of annotations that were removed.\n   */\n  this.removeAllAnnotations = function (skipCreating, update) {\n    var removed = 0, annotation, pos = 0;\n    while (pos < m_annotations.length) {\n      annotation = m_annotations[pos];\n      if (skipCreating && annotation.state() === geo_annotation.state.create) {\n        pos += 1;\n        continue;\n      }\n      m_this.removeAnnotation(annotation, false);\n      removed += 1;\n    }\n    if (removed && update !== false) {\n      m_this.modified();\n      m_this.draw();\n    }\n    return removed;\n  };\n\n  /**\n   * Get the list of annotations on the layer.\n   *\n   * @returns {geo.annoation[]} An array of annotations.\n   */\n  this.annotations = function () {\n    return m_annotations.slice();\n  };\n\n  /**\n   * Get an annotation by its id.\n   *\n   * @param {number} id The annotation ID.\n   * @returns {geo.annotation} The selected annotation or `undefined` if none\n   *    matches the id.\n   */\n  this.annotationById = function (id) {\n    if (id !== undefined && id !== null) {\n      id = +id;  /* Cast to int */\n    }\n    var annotations = m_annotations.filter(function (annotation) {\n      return annotation.id() === id;\n    });\n    if (annotations.length) {\n      return annotations[0];\n    }\n  };\n\n  /* A list of special modes */\n  this.modes = {\n    edit: 'edit'\n  };\n\n  /**\n   * Get or set the current mode.\n   *\n   * @param {string|null} [arg] `undefined` to get the current mode, `null` to\n   *    stop creating/editing, `this.modes.edit` (`'edit'`) plus an annotation\n   *    to switch to edit mode, or the name of the type of annotation to\n   *    create.  Available annotations can listed via\n   *    {@link geo.listAnnotations}.\n   * @param {geo.annotation} [editAnnotation] If `arg === this.modes.edit`,\n   *    this is the annotation that should be edited.\n   * @returns {string|null|this} The current mode or the layer.\n   * @fires geo.event.annotation.mode\n   */\n  this.mode = function (arg, editAnnotation) {\n    if (arg === undefined) {\n      return m_mode;\n    }\n    if (arg !== m_mode || (arg === m_this.modes.edit && editAnnotation !== m_this.editAnnotation)) {\n      var createAnnotation, actions,\n          mapNode = m_this.map().node(), oldMode = m_mode;\n      m_mode = arg;\n      mapNode.toggleClass('annotation-input', !!(m_mode && m_mode !== m_this.modes.edit));\n      if (!m_keyHandler) {\n        m_keyHandler = Mousetrap(mapNode[0]);\n      }\n      if (m_mode) {\n        m_keyHandler.bind('esc', function () { m_this.mode(null); });\n      } else {\n        m_keyHandler.unbind('esc');\n      }\n      if (m_this.currentAnnotation) {\n        switch (m_this.currentAnnotation.state()) {\n          case geo_annotation.state.create:\n            m_this.removeAnnotation(m_this.currentAnnotation);\n            break;\n          case geo_annotation.state.edit:\n            m_this.currentAnnotation.state(geo_annotation.state.done);\n            m_this.modified();\n            m_this.draw();\n            break;\n        }\n        m_this.currentAnnotation = null;\n      }\n      switch (m_mode) {\n        case m_this.modes.edit:\n          m_this.currentAnnotation = editAnnotation;\n          m_this.currentAnnotation.state(geo_annotation.state.edit);\n          m_this.modified();\n          break;\n        case 'line':\n          createAnnotation = geo_annotation.lineAnnotation;\n          break;\n        case 'point':\n          createAnnotation = geo_annotation.pointAnnotation;\n          break;\n        case 'polygon':\n          createAnnotation = geo_annotation.polygonAnnotation;\n          break;\n        case 'rectangle':\n          createAnnotation = geo_annotation.rectangleAnnotation;\n          break;\n      }\n      m_this.map().interactor().removeAction(\n        undefined, undefined, geo_annotation.actionOwner);\n      if (createAnnotation) {\n        m_this.currentAnnotation = createAnnotation({\n          state: geo_annotation.state.create,\n          layer: this\n        });\n        m_this.addAnnotation(m_this.currentAnnotation, null);\n        actions = m_this.currentAnnotation.actions(geo_annotation.state.create);\n        $.each(actions, function (idx, action) {\n          m_this.map().interactor().addAction(action);\n        });\n      }\n      m_this.geoTrigger(geo_event.annotation.mode, {\n        mode: m_mode, oldMode: oldMode});\n      if (oldMode === m_this.modes.edit) {\n        m_this.modified();\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Return the current set of annotations as a geojson object.  Alternately,\n   * add a set of annotations from a geojson object.\n   *\n   * @param {string|objectFile} [geojson] If present, add annotations based on\n   *    the given geojson object.  If `undefined`, return the current\n   *    annotations as geojson.  This may be a JSON string, a javascript\n   *    object, or a File object.\n   * @param {boolean|string} [clear] If `true`, when adding annotations, first\n   *    remove all existing objects.  If `'update'`, update existing\n   *    annotations and remove annotations that no longer exist.  If falsy,\n   *    update existing annotations and leave annotations that have not chaged.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @param {boolean} [includeCrs] If truthy, include the coordinate system in\n   *    the output.\n   * @returns {object|number|undefined} If `geojson` was undefined, the current\n   *    annotations is a javascript object that can be converted to geojson\n   *    using JSON.stringify.  If `geojson` is specified, either the number of\n   *    annotations now present upon success, or `undefined` if the value in\n   *    `geojson` was not able to be parsed.\n   */\n  this.geojson = function (geojson, clear, gcs, includeCrs) {\n    if (geojson !== undefined) {\n      var reader = registry.createFileReader('geojsonReader', {layer: m_this});\n      if (!reader.canRead(geojson)) {\n        return;\n      }\n      if (clear === true) {\n        m_this.removeAllAnnotations(true, false);\n      }\n      if (clear === 'update') {\n        $.each(m_this.annotations(), function (idx, annotation) {\n          annotation.options('updated', false);\n        });\n      }\n      reader.read(geojson, function (features) {\n        $.each(features.slice(), function (feature_idx, feature) {\n          m_this._geojsonFeatureToAnnotation(feature, gcs);\n          m_this.deleteFeature(feature);\n        });\n      });\n      if (clear === 'update') {\n        $.each(m_this.annotations(), function (idx, annotation) {\n          if (annotation.options('updated') === false &&\n              annotation.state() === geo_annotation.state.done) {\n            m_this.removeAnnotation(annotation, false);\n          }\n        });\n      }\n      m_this.modified();\n      m_this.draw();\n      return m_annotations.length;\n    }\n    geojson = null;\n    var features = [];\n    $.each(m_annotations, function (annotation_idx, annotation) {\n      var obj = annotation.geojson(gcs, includeCrs);\n      if (obj) {\n        features.push(obj);\n      }\n    });\n    if (features.length) {\n      geojson = {\n        type: 'FeatureCollection',\n        features: features\n      };\n    }\n    return geojson;\n  };\n\n  /**\n   * Convert a feature as parsed by the geojson reader into one or more\n   * annotations.\n   *\n   * @param {geo.feature} feature The feature to convert.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @fires geo.event.annotation.update\n   */\n  this._geojsonFeatureToAnnotation = function (feature, gcs) {\n    var dataList = feature.data(),\n        annotationList = registry.listAnnotations(),\n        map = m_this.map();\n    gcs = (gcs === null ? map.gcs() : (\n      gcs === undefined ? map.ingcs() : gcs));\n    $.each(dataList, function (data_idx, data) {\n      var type = (data.properties || {}).annotationType || feature.featureType,\n          options = $.extend({}, data.properties || {}),\n          position, datagcs, i, existing;\n      if ($.inArray(type, annotationList) < 0) {\n        return;\n      }\n      options.style = options.style || {};\n      options.labelStyle = options.labelStyle || {};\n      delete options.annotationType;\n      // the geoJSON reader can only emit line, polygon, and point\n      switch (feature.featureType) {\n        case 'line':\n          position = feature.line()(data, data_idx);\n          if (!position || position.length < 2) {\n            return;\n          }\n          // make a copy of the position array to avoid mutating the original.\n          position = position.slice();\n          break;\n        case 'polygon':\n          position = feature.polygon()(data, data_idx);\n          if (!position || !position.outer || position.outer.length < 3) {\n            return;\n          }\n          // make a copy of the position array to avoid mutating the original.\n          position = position.outer.slice();\n          if (position[position.length - 1][0] === position[0][0] &&\n              position[position.length - 1][1] === position[0][1]) {\n            position.splice(position.length - 1, 1);\n            if (position.length < 3) {\n              return;\n            }\n          }\n          break;\n        case 'point':\n          position = [feature.position()(data, data_idx)];\n          break;\n      }\n      for (i = 0; i < position.length; i += 1) {\n        position[i] = util.normalizeCoordinates(position[i]);\n      }\n      datagcs = ((data.crs && data.crs.type === 'name' && data.crs.properties &&\n                  data.crs.properties.type === 'proj4' &&\n                  data.crs.properties.name) ? data.crs.properties.name : gcs);\n      if (datagcs !== map.gcs()) {\n        position = transform.transformCoordinates(datagcs, map.gcs(), position);\n      }\n      options.coordinates = position;\n      /* For each style listed in the geojsonStyleProperties object, check if\n       * is given under any of the variety of keys as a valid instance of the\n       * required data type.  If not, use the property from the feature. */\n      $.each(geojsonStyleProperties, function (key, prop) {\n        var value;\n        $.each(prop.keys, function (idx, altkey) {\n          if (value === undefined) {\n            value = m_this.validateAttribute(options[altkey], prop.dataType);\n          }\n        });\n        if (value === undefined) {\n          value = m_this.validateAttribute(\n            feature.style.get(key)(data, data_idx), prop.dataType);\n        }\n        if (value !== undefined) {\n          options[prop.option || 'style'][key] = value;\n        }\n      });\n      /* Delete property keys we have used */\n      $.each(geojsonStyleProperties, function (key, prop) {\n        $.each(prop.keys, function (idx, altkey) {\n          delete options[altkey];\n        });\n      });\n      if (options.annotationId !== undefined) {\n        existing = m_this.annotationById(options.annotationId);\n        if (existing) {\n          delete options.annotationId;\n        }\n      }\n      if (existing && existing.type() === type && existing.state() === geo_annotation.state.done && existing.options('updated') === false) {\n        /* We could change the state of the existing annotation if it differs\n         * from done. */\n        delete options.state;\n        delete options.layer;\n        options.updated = true;\n        existing.options(options);\n        m_this.geoTrigger(geo_event.annotation.update, {\n          annotation: existing\n        });\n      } else {\n        options.state = geo_annotation.state.done;\n        options.layer = m_this;\n        options.updated = 'new';\n        m_this.addAnnotation(registry.createAnnotation(type, options), null);\n      }\n    });\n  };\n\n  /**\n   * Validate a value for an attribute based on a specified data type.  This\n   * returns a sanitized value or `undefined` if the value was invalid.  Data\n   * types include:\n   * - `color`: a css string, `#rrggbb` hex string, `#rgb` hex string, number,\n   *   or object with r, g, b properties in the range of [0-1].\n   * - `opacity`: a floating point number in the range [0, 1].\n   * - `positive`: a floating point number greater than zero.\n   * - `boolean`: a string whose lowercase value is `'false'`, `'off'`, or\n   *   `'no'`, and falsy values are false, all else is true.  `null` and\n   *   `undefined` are still considered invalid values.\n   * - `booleanOrNumber`: a string whose lowercase value is `'false'`, `'off'`,\n   *   `'no'`, `'true'`, `'on'`, or `'yes'`, falsy values that aren't 0, and\n   *   `true` are handled as booleans.  Otherwise, a floating point number that\n   *   isn't NaN or an infinity.\n   * - `coordinate2`: either an object with x and y properties that are\n   *   numbers, or a string of the form <x>[,]<y> with optional whitespace, or\n   *   a JSON encoded object with x and y values, or a JSON encoded list of at\n   *   leasst two numbers.\n   * - `number`: a floating point number that isn't NaN or an infinity.\n   * - `angle`: a number that represents radians.  If followed by one of `deg`,\n   *   `grad`, or `turn`, it is converted to radians.  An empty string is also\n   *   allowed.\n   * - `text`: any text string.\n   * @param {number|string|object|boolean} value The value to validate.\n   * @param {string} dataType The data type for validation.\n   * @returns {number|string|object|boolean|undefined} The sanitized value or\n   *    `undefined`.\n   */\n  this.validateAttribute = function (value, dataType) {\n    var parts;\n\n    if (value === undefined || value === null) {\n      return;\n    }\n    switch (dataType) {\n      case 'angle':\n        if (value === '') {\n          break;\n        }\n        parts = /^\\s*([-.0-9eE]+)\\s*(deg|rad|grad|turn)?\\s*$/.exec(('' + value).toLowerCase());\n        if (!parts || !isFinite(parts[1])) {\n          return;\n        }\n        var factor = (parts[2] === 'grad' ? Math.PI / 200 :\n          (parts[2] === 'deg' ? Math.PI / 180 :\n            (parts[2] === 'turn' ? 2 * Math.PI : 1)));\n        value = +parts[1] * factor;\n        break;\n      case 'boolean':\n        value = !!value && ['false', 'no', 'off'].indexOf(('' + value).toLowerCase()) < 0;\n        break;\n      case 'booleanOrNumber':\n        if ((!value && value !== 0 && value !== '') || ['true', 'false', 'off', 'on', 'no', 'yes'].indexOf(('' + value).toLowerCase()) >= 0) {\n          value = !!value && ['false', 'no', 'off'].indexOf(('' + value).toLowerCase()) < 0;\n        } else {\n          if (!util.isNonNullFinite(value)) {\n            return;\n          }\n          value = +value;\n        }\n        break;\n      case 'coordinate2':\n        if (value === '') {\n          break;\n        }\n        if (value && util.isNonNullFinite(value.x) && util.isNonNullFinite(value.y)) {\n          value.x = +value.x;\n          value.y = +value.y;\n          break;\n        }\n        try { value = JSON.parse(value); } catch (err) { }\n        if (value && util.isNonNullFinite(value.x) && util.isNonNullFinite(value.y)) {\n          value.x = +value.x;\n          value.y = +value.y;\n          break;\n        }\n        if (Array.isArray(value) && util.isNonNullFinite(value[0]) && util.isNonNullFinite(value[1])) {\n          value = {x: +value[0], y: +value[1]};\n          break;\n        }\n        parts = /^\\s*([-.0-9eE]+)(?:\\s+|\\s*,)\\s*([-.0-9eE]+)\\s*$/.exec('' + value);\n        if (!parts || !isFinite(parts[1]) || !isFinite(parts[2])) {\n          return;\n        }\n        value = {x: +parts[1], y: +parts[2]};\n        break;\n      case 'color':\n        value = util.convertColor(value);\n        if (value === undefined || value.r === undefined) {\n          return;\n        }\n        break;\n      case 'number':\n        if (!util.isNonNullFinite(value)) {\n          return;\n        }\n        value = +value;\n        break;\n      case 'numberOrBlank':\n        if (value === '') {\n          break;\n        }\n        if (!util.isNonNullFinite(value)) {\n          return;\n        }\n        value = +value;\n        break;\n      case 'opacity':\n        if (value === '') {\n          return;\n        }\n        value = +value;\n        if (isNaN(value) || value < 0 || value > 1) {\n          return;\n        }\n        break;\n      case 'positive':\n        value = +value;\n        if (!isFinite(value) || value <= 0) {\n          return;\n        }\n        break;\n      case 'text':\n        value = '' + value;\n        break;\n    }\n    return value;\n  };\n\n  /**\n   * Update layer.\n   *\n   * @returns {this} The current layer.\n   */\n  this._update = function () {\n    if (m_this.timestamp() > m_buildTime.timestamp()) {\n      var labels = m_this.options('showLabels') ? [] : null,\n          editable = m_this.options('clickToEdit') || m_this.mode() === m_this.modes.edit;\n      /* Interally, we have a set of feature levels (to provide z-index\n       * support), each of which can have data from multiple annotations.  We\n       * clear the data on each of these features, then build it up from each\n       * annotation.  Eventually, it may be necessary to optimize this and\n       * only update the features that are changed.\n       */\n      $.each(m_features, function (idx, featureLevel) {\n        $.each(featureLevel, function (type, feature) {\n          feature.data = [];\n          delete feature.feature.scaleOnZoom;\n        });\n      });\n      $.each(m_annotations, function (annotation_idx, annotation) {\n        var features = annotation.features();\n        if (labels) {\n          var annotationLabel = annotation.labelRecord();\n          if (annotationLabel) {\n            labels.push(annotationLabel);\n          }\n        }\n        $.each(features, function (idx, featureLevel) {\n          if (m_features[idx] === undefined) {\n            m_features[idx] = {};\n          }\n          $.each(featureLevel, function (type, featureSpec) {\n            /* Create features as needed */\n            if (!m_features[idx][type]) {\n              var feature = m_this.createFeature(type, {\n                gcs: m_this.map().gcs(),\n                selectionAPI: editable\n              });\n              if (!feature) {\n                /* We can't create the desired feature, porbably because of the\n                 * selected renderer.  Issue one warning only. */\n                var key = 'error_feature_' + type;\n                if (!m_this[key]) {\n                  console.warn('Cannot create a ' + type + ' feature for ' +\n                               'annotations.');\n                  m_this[key] = true;\n                }\n                return;\n              }\n              if (editable) {\n                feature.geoOn(geo_event.feature.mouseon, m_this._handleMouseOn);\n                feature.geoOn(geo_event.feature.mouseoff, m_this._handleMouseOff);\n              }\n\n              /* Since each annotation can have separate styles, the styles are\n               * combined together with a meta-style function.  Any style that\n               * could be used should be in this list.  Color styles may be\n               * restricted to {r, g, b} objects for efficiency, but this\n               * hasn't been tested.\n               */\n              var style = {};\n              $.each([\n                'closed', 'fill', 'fillColor', 'fillOpacity', 'line',\n                'lineCap', 'lineJoin', 'polygon', 'position', 'radius',\n                'stroke', 'strokeColor', 'strokeOffset', 'strokeOpacity',\n                'strokeWidth', 'uniformPolygon'\n              ], function (keyidx, key) {\n                var origFunc;\n                if (feature.style()[key] !== undefined) {\n                  origFunc = feature.style.get(key);\n                }\n                style[key] = function (d, i, d2, i2) {\n                  var style = (\n                    (d && d.style) ? d.style : (d && d[2] && d[2].style) ?\n                      d[2].style : d2.style);\n                  var result = style ? style[key] : d;\n                  if (util.isFunction(result)) {\n                    result = result(d, i, d2, i2);\n                  }\n                  if (result === undefined && origFunc) {\n                    result = origFunc(d, i, d2, i2);\n                  }\n                  return result;\n                };\n              });\n              feature.style(style);\n              m_features[idx][type] = {\n                feature: feature,\n                style: style,\n                data: []\n              };\n            } else {\n              feature = m_features[idx][type].feature;\n              // update whether we check for selections on existing features\n              if (feature.selectionAPI() !== !!editable) {\n                feature.selectionAPI(editable);\n                if (editable) {\n                  feature.geoOn(geo_event.feature.mouseon, m_this._handleMouseOn);\n                  feature.geoOn(geo_event.feature.mouseoff, m_this._handleMouseOff);\n                } else {\n                  feature.geoOff(geo_event.feature.mouseon, m_this._handleMouseOn);\n                  feature.geoOff(geo_event.feature.mouseoff, m_this._handleMouseOff);\n                }\n              }\n            }\n            /* Collect the data for each feature */\n            var dataEntry = featureSpec.data || featureSpec;\n            if (!Array.isArray(dataEntry)) {\n              dataEntry = [dataEntry];\n            }\n            dataEntry.forEach(function (dataElement) {\n              dataElement.annotation = annotation;\n              m_features[idx][type].data.push(dataElement);\n              if (featureSpec.scaleOnZoom) {\n                m_features[idx][type].feature.scaleOnZoom = true;\n              }\n            });\n          });\n        });\n      });\n      /* Update the data for each feature */\n      $.each(m_features, function (idx, featureLevel) {\n        $.each(featureLevel, function (type, feature) {\n          feature.feature.data(feature.data);\n        });\n      });\n      m_this._updateLabels(labels);\n      m_buildTime.modified();\n    }\n    s_update.call(m_this, arguments);\n    return m_this;\n  };\n\n  /**\n   * Show or hide annotation labels.  Create or destroy a child layer or a\n   * feature as needed.\n   *\n   * @param {object[]|null} labels The list of labels to display of `null` for\n   *    no labels.\n   * @returns {this} The class instance.\n   * @fires geo.event.annotation.layerAdd\n   */\n  this._updateLabels = function (labels) {\n    if (!labels || !labels.length) {\n      m_this._removeLabelFeature();\n      return m_this;\n    }\n    if (!m_labelFeature) {\n      if (!(registry.registries.features[m_this.rendererName()] || {}).text) {\n        var renderer = registry.rendererForFeatures(['text']);\n        m_labelLayer = registry.createLayer('feature', m_this.map(), {renderer: renderer});\n        m_this.addChild(m_labelLayer);\n        m_labelLayer._update();\n        m_this.geoTrigger(geo_event.layerAdd, {\n          target: m_this,\n          layer: m_labelLayer\n        });\n      }\n      var style = {};\n      textFeature.usedStyles.forEach(function (key) {\n        style[key] = function (d, i) {\n          if (d.style && d.style[key] !== undefined) {\n            return d.style[key];\n          }\n          return (m_this.options('defaultLabelStyle') || {})[key];\n        };\n      });\n      m_labelFeature = (m_labelLayer || m_this).createFeature('text', {\n        style: style,\n        gcs: m_this.map().gcs(),\n        position: function (d) {\n          return d.position;\n        }\n      });\n    }\n    m_labelFeature.data(labels);\n    return m_this;\n  };\n\n  /**\n   * Check if any features are marked that they need to be updated when a zoom\n   * occurs.  If so, mark that feature as modified.\n   */\n  this._handleZoom = function () {\n    var i, features = m_this.features();\n    for (i = 0; i < features.length; i += 1) {\n      if (features[i].scaleOnZoom) {\n        features[i].modified();\n      }\n    }\n  };\n\n  /**\n   * Remove the label feature if it exists.\n   *\n   * @returns {this} The current layer.\n   * @fires geo.event.annotation.layerRemove\n   */\n  this._removeLabelFeature = function () {\n    if (m_labelLayer) {\n      m_labelLayer._exit();\n      m_this.removeChild(m_labelLayer);\n      m_this.geoTrigger(geo_event.layerRemove, {\n        target: m_this,\n        layer: m_labelLayer\n      });\n      m_labelLayer = m_labelFeature = null;\n    }\n    if (m_labelFeature) {\n      m_this.removeFeature(m_labelFeature);\n      m_labelFeature = null;\n    }\n    return m_this;\n  };\n\n  /**\n   * Update if necessary and draw the layer.\n   *\n   * @returns {this} The current layer.\n   */\n  this.draw = function () {\n    m_this._update();\n    s_draw.call(m_this);\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this} The current layer.\n   */\n  this._init = function () {\n    // Call super class init\n    s_init.call(m_this);\n\n    if (!m_this.map().interactor()) {\n      m_this.map().interactor(mapInteractor({actions: []}));\n    }\n    m_this.geoOn(geo_event.actionselection, m_this._processAction);\n    m_this.geoOn(geo_event.actionmove, m_this._processAction);\n    m_this.geoOn(geo_event.actionup, m_this._processAction);\n\n    m_this.geoOn(geo_event.mouseclick, m_this._handleMouseClick);\n    m_this.geoOn(geo_event.mousemove, m_this._handleMouseMove);\n\n    m_this.geoOn(geo_event.zoom, m_this._handleZoom);\n\n    return m_this;\n  };\n\n  /**\n   * Free all resources.\n   *\n   * @returns {this} The current layer.\n   */\n  this._exit = function () {\n    if (m_keyHandler) {\n      m_keyHandler.reset();\n    }\n    m_this._removeLabelFeature();\n    // Call super class exit\n    s_exit.call(m_this);\n    m_annotations = [];\n    m_features = [];\n    return m_this;\n  };\n\n  return m_this;\n};\n\ninherit(annotationLayer, featureLayer);\nregistry.registerLayer('annotation', annotationLayer);\nmodule.exports = annotationLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./annotationLayer.js","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/hammerjs/hammer.js\n// module id = 611\n// module chunks = 0 1","!function() {\n  var d3 = {\n    version: \"3.5.17\"\n  };\n  var d3_arraySlice = [].slice, d3_array = function(list) {\n    return d3_arraySlice.call(list);\n  };\n  var d3_document = this.document;\n  function d3_documentElement(node) {\n    return node && (node.ownerDocument || node.document || node).documentElement;\n  }\n  function d3_window(node) {\n    return node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView);\n  }\n  if (d3_document) {\n    try {\n      d3_array(d3_document.documentElement.childNodes)[0].nodeType;\n    } catch (e) {\n      d3_array = function(list) {\n        var i = list.length, array = new Array(i);\n        while (i--) array[i] = list[i];\n        return array;\n      };\n    }\n  }\n  if (!Date.now) Date.now = function() {\n    return +new Date();\n  };\n  if (d3_document) {\n    try {\n      d3_document.createElement(\"DIV\").style.setProperty(\"opacity\", 0, \"\");\n    } catch (error) {\n      var d3_element_prototype = this.Element.prototype, d3_element_setAttribute = d3_element_prototype.setAttribute, d3_element_setAttributeNS = d3_element_prototype.setAttributeNS, d3_style_prototype = this.CSSStyleDeclaration.prototype, d3_style_setProperty = d3_style_prototype.setProperty;\n      d3_element_prototype.setAttribute = function(name, value) {\n        d3_element_setAttribute.call(this, name, value + \"\");\n      };\n      d3_element_prototype.setAttributeNS = function(space, local, value) {\n        d3_element_setAttributeNS.call(this, space, local, value + \"\");\n      };\n      d3_style_prototype.setProperty = function(name, value, priority) {\n        d3_style_setProperty.call(this, name, value + \"\", priority);\n      };\n    }\n  }\n  d3.ascending = d3_ascending;\n  function d3_ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n  d3.descending = function(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  };\n  d3.min = function(array, f) {\n    var i = -1, n = array.length, a, b;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && a > b) a = b;\n    }\n    return a;\n  };\n  d3.max = function(array, f) {\n    var i = -1, n = array.length, a, b;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b > a) a = b;\n    }\n    return a;\n  };\n  d3.extent = function(array, f) {\n    var i = -1, n = array.length, a, b, c;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = c = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = c = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n    return [ a, c ];\n  };\n  function d3_number(x) {\n    return x === null ? NaN : +x;\n  }\n  function d3_numeric(x) {\n    return !isNaN(x);\n  }\n  d3.sum = function(array, f) {\n    var s = 0, n = array.length, a, i = -1;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = +array[i])) s += a;\n    } else {\n      while (++i < n) if (d3_numeric(a = +f.call(array, array[i], i))) s += a;\n    }\n    return s;\n  };\n  d3.mean = function(array, f) {\n    var s = 0, n = array.length, a, i = -1, j = n;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) s += a; else --j;\n    } else {\n      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) s += a; else --j;\n    }\n    if (j) return s / j;\n  };\n  d3.quantile = function(values, p) {\n    var H = (values.length - 1) * p + 1, h = Math.floor(H), v = +values[h - 1], e = H - h;\n    return e ? v + e * (values[h] - v) : v;\n  };\n  d3.median = function(array, f) {\n    var numbers = [], n = array.length, a, i = -1;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) numbers.push(a);\n    } else {\n      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) numbers.push(a);\n    }\n    if (numbers.length) return d3.quantile(numbers.sort(d3_ascending), .5);\n  };\n  d3.variance = function(array, f) {\n    var n = array.length, m = 0, a, d, s = 0, i = -1, j = 0;\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n    if (j > 1) return s / (j - 1);\n  };\n  d3.deviation = function() {\n    var v = d3.variance.apply(this, arguments);\n    return v ? Math.sqrt(v) : v;\n  };\n  function d3_bisector(compare) {\n    return {\n      left: function(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1; else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid; else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n  var d3_bisect = d3_bisector(d3_ascending);\n  d3.bisectLeft = d3_bisect.left;\n  d3.bisect = d3.bisectRight = d3_bisect.right;\n  d3.bisector = function(f) {\n    return d3_bisector(f.length === 1 ? function(d, x) {\n      return d3_ascending(f(d), x);\n    } : f);\n  };\n  d3.shuffle = function(array, i0, i1) {\n    if ((m = arguments.length) < 3) {\n      i1 = array.length;\n      if (m < 2) i0 = 0;\n    }\n    var m = i1 - i0, t, i;\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0], array[m + i0] = array[i + i0], array[i + i0] = t;\n    }\n    return array;\n  };\n  d3.permute = function(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  };\n  d3.pairs = function(array) {\n    var i = 0, n = array.length - 1, p0, p1 = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [ p0 = p1, p1 = array[++i] ];\n    return pairs;\n  };\n  d3.transpose = function(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = d3.min(matrix, d3_transposeLength), transpose = new Array(m); ++i < m; ) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n; ) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  };\n  function d3_transposeLength(d) {\n    return d.length;\n  }\n  d3.zip = function() {\n    return d3.transpose(arguments);\n  };\n  d3.keys = function(map) {\n    var keys = [];\n    for (var key in map) keys.push(key);\n    return keys;\n  };\n  d3.values = function(map) {\n    var values = [];\n    for (var key in map) values.push(map[key]);\n    return values;\n  };\n  d3.entries = function(map) {\n    var entries = [];\n    for (var key in map) entries.push({\n      key: key,\n      value: map[key]\n    });\n    return entries;\n  };\n  d3.merge = function(arrays) {\n    var n = arrays.length, m, i = -1, j = 0, merged, array;\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n    return merged;\n  };\n  var abs = Math.abs;\n  d3.range = function(start, stop, step) {\n    if (arguments.length < 3) {\n      step = 1;\n      if (arguments.length < 2) {\n        stop = start;\n        start = 0;\n      }\n    }\n    if ((stop - start) / step === Infinity) throw new Error(\"infinite range\");\n    var range = [], k = d3_range_integerScale(abs(step)), i = -1, j;\n    start *= k, stop *= k, step *= k;\n    if (step < 0) while ((j = start + step * ++i) > stop) range.push(j / k); else while ((j = start + step * ++i) < stop) range.push(j / k);\n    return range;\n  };\n  function d3_range_integerScale(x) {\n    var k = 1;\n    while (x * k % 1) k *= 10;\n    return k;\n  }\n  function d3_class(ctor, properties) {\n    for (var key in properties) {\n      Object.defineProperty(ctor.prototype, key, {\n        value: properties[key],\n        enumerable: false\n      });\n    }\n  }\n  d3.map = function(object, f) {\n    var map = new d3_Map();\n    if (object instanceof d3_Map) {\n      object.forEach(function(key, value) {\n        map.set(key, value);\n      });\n    } else if (Array.isArray(object)) {\n      var i = -1, n = object.length, o;\n      if (arguments.length === 1) while (++i < n) map.set(i, object[i]); else while (++i < n) map.set(f.call(object, o = object[i], i), o);\n    } else {\n      for (var key in object) map.set(key, object[key]);\n    }\n    return map;\n  };\n  function d3_Map() {\n    this._ = Object.create(null);\n  }\n  var d3_map_proto = \"__proto__\", d3_map_zero = \"\\x00\";\n  d3_class(d3_Map, {\n    has: d3_map_has,\n    get: function(key) {\n      return this._[d3_map_escape(key)];\n    },\n    set: function(key, value) {\n      return this._[d3_map_escape(key)] = value;\n    },\n    remove: d3_map_remove,\n    keys: d3_map_keys,\n    values: function() {\n      var values = [];\n      for (var key in this._) values.push(this._[key]);\n      return values;\n    },\n    entries: function() {\n      var entries = [];\n      for (var key in this._) entries.push({\n        key: d3_map_unescape(key),\n        value: this._[key]\n      });\n      return entries;\n    },\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function(f) {\n      for (var key in this._) f.call(this, d3_map_unescape(key), this._[key]);\n    }\n  });\n  function d3_map_escape(key) {\n    return (key += \"\") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key;\n  }\n  function d3_map_unescape(key) {\n    return (key += \"\")[0] === d3_map_zero ? key.slice(1) : key;\n  }\n  function d3_map_has(key) {\n    return d3_map_escape(key) in this._;\n  }\n  function d3_map_remove(key) {\n    return (key = d3_map_escape(key)) in this._ && delete this._[key];\n  }\n  function d3_map_keys() {\n    var keys = [];\n    for (var key in this._) keys.push(d3_map_unescape(key));\n    return keys;\n  }\n  function d3_map_size() {\n    var size = 0;\n    for (var key in this._) ++size;\n    return size;\n  }\n  function d3_map_empty() {\n    for (var key in this._) return false;\n    return true;\n  }\n  d3.nest = function() {\n    var nest = {}, keys = [], sortKeys = [], sortValues, rollup;\n    function map(mapType, array, depth) {\n      if (depth >= keys.length) return rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;\n      var i = -1, n = array.length, key = keys[depth++], keyValue, object, setter, valuesByKey = new d3_Map(), values;\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(object = array[i]))) {\n          values.push(object);\n        } else {\n          valuesByKey.set(keyValue, [ object ]);\n        }\n      }\n      if (mapType) {\n        object = mapType();\n        setter = function(keyValue, values) {\n          object.set(keyValue, map(mapType, values, depth));\n        };\n      } else {\n        object = {};\n        setter = function(keyValue, values) {\n          object[keyValue] = map(mapType, values, depth);\n        };\n      }\n      valuesByKey.forEach(setter);\n      return object;\n    }\n    function entries(map, depth) {\n      if (depth >= keys.length) return map;\n      var array = [], sortKey = sortKeys[depth++];\n      map.forEach(function(key, keyMap) {\n        array.push({\n          key: key,\n          values: entries(keyMap, depth)\n        });\n      });\n      return sortKey ? array.sort(function(a, b) {\n        return sortKey(a.key, b.key);\n      }) : array;\n    }\n    nest.map = function(array, mapType) {\n      return map(mapType, array, 0);\n    };\n    nest.entries = function(array) {\n      return entries(map(d3.map, array, 0), 0);\n    };\n    nest.key = function(d) {\n      keys.push(d);\n      return nest;\n    };\n    nest.sortKeys = function(order) {\n      sortKeys[keys.length - 1] = order;\n      return nest;\n    };\n    nest.sortValues = function(order) {\n      sortValues = order;\n      return nest;\n    };\n    nest.rollup = function(f) {\n      rollup = f;\n      return nest;\n    };\n    return nest;\n  };\n  d3.set = function(array) {\n    var set = new d3_Set();\n    if (array) for (var i = 0, n = array.length; i < n; ++i) set.add(array[i]);\n    return set;\n  };\n  function d3_Set() {\n    this._ = Object.create(null);\n  }\n  d3_class(d3_Set, {\n    has: d3_map_has,\n    add: function(key) {\n      this._[d3_map_escape(key += \"\")] = true;\n      return key;\n    },\n    remove: d3_map_remove,\n    values: d3_map_keys,\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function(f) {\n      for (var key in this._) f.call(this, d3_map_unescape(key));\n    }\n  });\n  d3.behavior = {};\n  function d3_identity(d) {\n    return d;\n  }\n  d3.rebind = function(target, source) {\n    var i = 1, n = arguments.length, method;\n    while (++i < n) target[method = arguments[i]] = d3_rebind(target, source, source[method]);\n    return target;\n  };\n  function d3_rebind(target, source, method) {\n    return function() {\n      var value = method.apply(source, arguments);\n      return value === source ? target : value;\n    };\n  }\n  function d3_vendorSymbol(object, name) {\n    if (name in object) return name;\n    name = name.charAt(0).toUpperCase() + name.slice(1);\n    for (var i = 0, n = d3_vendorPrefixes.length; i < n; ++i) {\n      var prefixName = d3_vendorPrefixes[i] + name;\n      if (prefixName in object) return prefixName;\n    }\n  }\n  var d3_vendorPrefixes = [ \"webkit\", \"ms\", \"moz\", \"Moz\", \"o\", \"O\" ];\n  function d3_noop() {}\n  d3.dispatch = function() {\n    var dispatch = new d3_dispatch(), i = -1, n = arguments.length;\n    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    return dispatch;\n  };\n  function d3_dispatch() {}\n  d3_dispatch.prototype.on = function(type, listener) {\n    var i = type.indexOf(\".\"), name = \"\";\n    if (i >= 0) {\n      name = type.slice(i + 1);\n      type = type.slice(0, i);\n    }\n    if (type) return arguments.length < 2 ? this[type].on(name) : this[type].on(name, listener);\n    if (arguments.length === 2) {\n      if (listener == null) for (type in this) {\n        if (this.hasOwnProperty(type)) this[type].on(name, null);\n      }\n      return this;\n    }\n  };\n  function d3_dispatch_event(dispatch) {\n    var listeners = [], listenerByName = new d3_Map();\n    function event() {\n      var z = listeners, i = -1, n = z.length, l;\n      while (++i < n) if (l = z[i].on) l.apply(this, arguments);\n      return dispatch;\n    }\n    event.on = function(name, listener) {\n      var l = listenerByName.get(name), i;\n      if (arguments.length < 2) return l && l.on;\n      if (l) {\n        l.on = null;\n        listeners = listeners.slice(0, i = listeners.indexOf(l)).concat(listeners.slice(i + 1));\n        listenerByName.remove(name);\n      }\n      if (listener) listeners.push(listenerByName.set(name, {\n        on: listener\n      }));\n      return dispatch;\n    };\n    return event;\n  }\n  d3.event = null;\n  function d3_eventPreventDefault() {\n    d3.event.preventDefault();\n  }\n  function d3_eventSource() {\n    var e = d3.event, s;\n    while (s = e.sourceEvent) e = s;\n    return e;\n  }\n  function d3_eventDispatch(target) {\n    var dispatch = new d3_dispatch(), i = 0, n = arguments.length;\n    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    dispatch.of = function(thiz, argumentz) {\n      return function(e1) {\n        try {\n          var e0 = e1.sourceEvent = d3.event;\n          e1.target = target;\n          d3.event = e1;\n          dispatch[e1.type].apply(thiz, argumentz);\n        } finally {\n          d3.event = e0;\n        }\n      };\n    };\n    return dispatch;\n  }\n  d3.requote = function(s) {\n    return s.replace(d3_requote_re, \"\\\\$&\");\n  };\n  var d3_requote_re = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  var d3_subclass = {}.__proto__ ? function(object, prototype) {\n    object.__proto__ = prototype;\n  } : function(object, prototype) {\n    for (var property in prototype) object[property] = prototype[property];\n  };\n  function d3_selection(groups) {\n    d3_subclass(groups, d3_selectionPrototype);\n    return groups;\n  }\n  var d3_select = function(s, n) {\n    return n.querySelector(s);\n  }, d3_selectAll = function(s, n) {\n    return n.querySelectorAll(s);\n  }, d3_selectMatches = function(n, s) {\n    var d3_selectMatcher = n.matches || n[d3_vendorSymbol(n, \"matchesSelector\")];\n    d3_selectMatches = function(n, s) {\n      return d3_selectMatcher.call(n, s);\n    };\n    return d3_selectMatches(n, s);\n  };\n  if (typeof Sizzle === \"function\") {\n    d3_select = function(s, n) {\n      return Sizzle(s, n)[0] || null;\n    };\n    d3_selectAll = Sizzle;\n    d3_selectMatches = Sizzle.matchesSelector;\n  }\n  d3.selection = function() {\n    return d3.select(d3_document.documentElement);\n  };\n  var d3_selectionPrototype = d3.selection.prototype = [];\n  d3_selectionPrototype.select = function(selector) {\n    var subgroups = [], subgroup, subnode, group, node;\n    selector = d3_selection_selector(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n      for (var i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroup.push(subnode = selector.call(node, node.__data__, i, j));\n          if (subnode && \"__data__\" in node) subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_selector(selector) {\n    return typeof selector === \"function\" ? selector : function() {\n      return d3_select(selector, this);\n    };\n  }\n  d3_selectionPrototype.selectAll = function(selector) {\n    var subgroups = [], subgroup, node;\n    selector = d3_selection_selectorAll(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i, j)));\n          subgroup.parentNode = node;\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_selectorAll(selector) {\n    return typeof selector === \"function\" ? selector : function() {\n      return d3_selectAll(selector, this);\n    };\n  }\n  var d3_nsXhtml = \"http://www.w3.org/1999/xhtml\";\n  var d3_nsPrefix = {\n    svg: \"http://www.w3.org/2000/svg\",\n    xhtml: d3_nsXhtml,\n    xlink: \"http://www.w3.org/1999/xlink\",\n    xml: \"http://www.w3.org/XML/1998/namespace\",\n    xmlns: \"http://www.w3.org/2000/xmlns/\"\n  };\n  d3.ns = {\n    prefix: d3_nsPrefix,\n    qualify: function(name) {\n      var i = name.indexOf(\":\"), prefix = name;\n      if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n      return d3_nsPrefix.hasOwnProperty(prefix) ? {\n        space: d3_nsPrefix[prefix],\n        local: name\n      } : name;\n    }\n  };\n  d3_selectionPrototype.attr = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node();\n        name = d3.ns.qualify(name);\n        return name.local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name);\n      }\n      for (value in name) this.each(d3_selection_attr(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_attr(name, value));\n  };\n  function d3_selection_attr(name, value) {\n    name = d3.ns.qualify(name);\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n    function attrConstant() {\n      this.setAttribute(name, value);\n    }\n    function attrConstantNS() {\n      this.setAttributeNS(name.space, name.local, value);\n    }\n    function attrFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttribute(name); else this.setAttribute(name, x);\n    }\n    function attrFunctionNS() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttributeNS(name.space, name.local); else this.setAttributeNS(name.space, name.local, x);\n    }\n    return value == null ? name.local ? attrNullNS : attrNull : typeof value === \"function\" ? name.local ? attrFunctionNS : attrFunction : name.local ? attrConstantNS : attrConstant;\n  }\n  function d3_collapse(s) {\n    return s.trim().replace(/\\s+/g, \" \");\n  }\n  d3_selectionPrototype.classed = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node(), n = (name = d3_selection_classes(name)).length, i = -1;\n        if (value = node.classList) {\n          while (++i < n) if (!value.contains(name[i])) return false;\n        } else {\n          value = node.getAttribute(\"class\");\n          while (++i < n) if (!d3_selection_classedRe(name[i]).test(value)) return false;\n        }\n        return true;\n      }\n      for (value in name) this.each(d3_selection_classed(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_classed(name, value));\n  };\n  function d3_selection_classedRe(name) {\n    return new RegExp(\"(?:^|\\\\s+)\" + d3.requote(name) + \"(?:\\\\s+|$)\", \"g\");\n  }\n  function d3_selection_classes(name) {\n    return (name + \"\").trim().split(/^|\\s+/);\n  }\n  function d3_selection_classed(name, value) {\n    name = d3_selection_classes(name).map(d3_selection_classedName);\n    var n = name.length;\n    function classedConstant() {\n      var i = -1;\n      while (++i < n) name[i](this, value);\n    }\n    function classedFunction() {\n      var i = -1, x = value.apply(this, arguments);\n      while (++i < n) name[i](this, x);\n    }\n    return typeof value === \"function\" ? classedFunction : classedConstant;\n  }\n  function d3_selection_classedName(name) {\n    var re = d3_selection_classedRe(name);\n    return function(node, value) {\n      if (c = node.classList) return value ? c.add(name) : c.remove(name);\n      var c = node.getAttribute(\"class\") || \"\";\n      if (value) {\n        re.lastIndex = 0;\n        if (!re.test(c)) node.setAttribute(\"class\", d3_collapse(c + \" \" + name));\n      } else {\n        node.setAttribute(\"class\", d3_collapse(c.replace(re, \" \")));\n      }\n    };\n  }\n  d3_selectionPrototype.style = function(name, value, priority) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n        for (priority in name) this.each(d3_selection_style(priority, name[priority], value));\n        return this;\n      }\n      if (n < 2) {\n        var node = this.node();\n        return d3_window(node).getComputedStyle(node, null).getPropertyValue(name);\n      }\n      priority = \"\";\n    }\n    return this.each(d3_selection_style(name, value, priority));\n  };\n  function d3_selection_style(name, value, priority) {\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n    function styleConstant() {\n      this.style.setProperty(name, value, priority);\n    }\n    function styleFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.style.removeProperty(name); else this.style.setProperty(name, x, priority);\n    }\n    return value == null ? styleNull : typeof value === \"function\" ? styleFunction : styleConstant;\n  }\n  d3_selectionPrototype.property = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") return this.node()[name];\n      for (value in name) this.each(d3_selection_property(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_property(name, value));\n  };\n  function d3_selection_property(name, value) {\n    function propertyNull() {\n      delete this[name];\n    }\n    function propertyConstant() {\n      this[name] = value;\n    }\n    function propertyFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) delete this[name]; else this[name] = x;\n    }\n    return value == null ? propertyNull : typeof value === \"function\" ? propertyFunction : propertyConstant;\n  }\n  d3_selectionPrototype.text = function(value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function() {\n      var v = value.apply(this, arguments);\n      this.textContent = v == null ? \"\" : v;\n    } : value == null ? function() {\n      this.textContent = \"\";\n    } : function() {\n      this.textContent = value;\n    }) : this.node().textContent;\n  };\n  d3_selectionPrototype.html = function(value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function() {\n      var v = value.apply(this, arguments);\n      this.innerHTML = v == null ? \"\" : v;\n    } : value == null ? function() {\n      this.innerHTML = \"\";\n    } : function() {\n      this.innerHTML = value;\n    }) : this.node().innerHTML;\n  };\n  d3_selectionPrototype.append = function(name) {\n    name = d3_selection_creator(name);\n    return this.select(function() {\n      return this.appendChild(name.apply(this, arguments));\n    });\n  };\n  function d3_selection_creator(name) {\n    function create() {\n      var document = this.ownerDocument, namespace = this.namespaceURI;\n      return namespace === d3_nsXhtml && document.documentElement.namespaceURI === d3_nsXhtml ? document.createElement(name) : document.createElementNS(namespace, name);\n    }\n    function createNS() {\n      return this.ownerDocument.createElementNS(name.space, name.local);\n    }\n    return typeof name === \"function\" ? name : (name = d3.ns.qualify(name)).local ? createNS : create;\n  }\n  d3_selectionPrototype.insert = function(name, before) {\n    name = d3_selection_creator(name);\n    before = d3_selection_selector(before);\n    return this.select(function() {\n      return this.insertBefore(name.apply(this, arguments), before.apply(this, arguments) || null);\n    });\n  };\n  d3_selectionPrototype.remove = function() {\n    return this.each(d3_selectionRemove);\n  };\n  function d3_selectionRemove() {\n    var parent = this.parentNode;\n    if (parent) parent.removeChild(this);\n  }\n  d3_selectionPrototype.data = function(value, key) {\n    var i = -1, n = this.length, group, node;\n    if (!arguments.length) {\n      value = new Array(n = (group = this[0]).length);\n      while (++i < n) {\n        if (node = group[i]) {\n          value[i] = node.__data__;\n        }\n      }\n      return value;\n    }\n    function bind(group, groupData) {\n      var i, n = group.length, m = groupData.length, n0 = Math.min(n, m), updateNodes = new Array(m), enterNodes = new Array(m), exitNodes = new Array(n), node, nodeData;\n      if (key) {\n        var nodeByKeyValue = new d3_Map(), keyValues = new Array(n), keyValue;\n        for (i = -1; ++i < n; ) {\n          if (node = group[i]) {\n            if (nodeByKeyValue.has(keyValue = key.call(node, node.__data__, i))) {\n              exitNodes[i] = node;\n            } else {\n              nodeByKeyValue.set(keyValue, node);\n            }\n            keyValues[i] = keyValue;\n          }\n        }\n        for (i = -1; ++i < m; ) {\n          if (!(node = nodeByKeyValue.get(keyValue = key.call(groupData, nodeData = groupData[i], i)))) {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          } else if (node !== true) {\n            updateNodes[i] = node;\n            node.__data__ = nodeData;\n          }\n          nodeByKeyValue.set(keyValue, true);\n        }\n        for (i = -1; ++i < n; ) {\n          if (i in keyValues && nodeByKeyValue.get(keyValues[i]) !== true) {\n            exitNodes[i] = group[i];\n          }\n        }\n      } else {\n        for (i = -1; ++i < n0; ) {\n          node = group[i];\n          nodeData = groupData[i];\n          if (node) {\n            node.__data__ = nodeData;\n            updateNodes[i] = node;\n          } else {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          }\n        }\n        for (;i < m; ++i) {\n          enterNodes[i] = d3_selection_dataNode(groupData[i]);\n        }\n        for (;i < n; ++i) {\n          exitNodes[i] = group[i];\n        }\n      }\n      enterNodes.update = updateNodes;\n      enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode;\n      enter.push(enterNodes);\n      update.push(updateNodes);\n      exit.push(exitNodes);\n    }\n    var enter = d3_selection_enter([]), update = d3_selection([]), exit = d3_selection([]);\n    if (typeof value === \"function\") {\n      while (++i < n) {\n        bind(group = this[i], value.call(group, group.parentNode.__data__, i));\n      }\n    } else {\n      while (++i < n) {\n        bind(group = this[i], value);\n      }\n    }\n    update.enter = function() {\n      return enter;\n    };\n    update.exit = function() {\n      return exit;\n    };\n    return update;\n  };\n  function d3_selection_dataNode(data) {\n    return {\n      __data__: data\n    };\n  }\n  d3_selectionPrototype.datum = function(value) {\n    return arguments.length ? this.property(\"__data__\", value) : this.property(\"__data__\");\n  };\n  d3_selectionPrototype.filter = function(filter) {\n    var subgroups = [], subgroup, group, node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n      for (var i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_filter(selector) {\n    return function() {\n      return d3_selectMatches(this, selector);\n    };\n  }\n  d3_selectionPrototype.order = function() {\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {\n        if (node = group[i]) {\n          if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n          next = node;\n        }\n      }\n    }\n    return this;\n  };\n  d3_selectionPrototype.sort = function(comparator) {\n    comparator = d3_selection_sortComparator.apply(this, arguments);\n    for (var j = -1, m = this.length; ++j < m; ) this[j].sort(comparator);\n    return this.order();\n  };\n  function d3_selection_sortComparator(comparator) {\n    if (!arguments.length) comparator = d3_ascending;\n    return function(a, b) {\n      return a && b ? comparator(a.__data__, b.__data__) : !a - !b;\n    };\n  }\n  d3_selectionPrototype.each = function(callback) {\n    return d3_selection_each(this, function(node, i, j) {\n      callback.call(node, node.__data__, i, j);\n    });\n  };\n  function d3_selection_each(groups, callback) {\n    for (var j = 0, m = groups.length; j < m; j++) {\n      for (var group = groups[j], i = 0, n = group.length, node; i < n; i++) {\n        if (node = group[i]) callback(node, i, j);\n      }\n    }\n    return groups;\n  }\n  d3_selectionPrototype.call = function(callback) {\n    var args = d3_array(arguments);\n    callback.apply(args[0] = this, args);\n    return this;\n  };\n  d3_selectionPrototype.empty = function() {\n    return !this.node();\n  };\n  d3_selectionPrototype.node = function() {\n    for (var j = 0, m = this.length; j < m; j++) {\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        var node = group[i];\n        if (node) return node;\n      }\n    }\n    return null;\n  };\n  d3_selectionPrototype.size = function() {\n    var n = 0;\n    d3_selection_each(this, function() {\n      ++n;\n    });\n    return n;\n  };\n  function d3_selection_enter(selection) {\n    d3_subclass(selection, d3_selection_enterPrototype);\n    return selection;\n  }\n  var d3_selection_enterPrototype = [];\n  d3.selection.enter = d3_selection_enter;\n  d3.selection.enter.prototype = d3_selection_enterPrototype;\n  d3_selection_enterPrototype.append = d3_selectionPrototype.append;\n  d3_selection_enterPrototype.empty = d3_selectionPrototype.empty;\n  d3_selection_enterPrototype.node = d3_selectionPrototype.node;\n  d3_selection_enterPrototype.call = d3_selectionPrototype.call;\n  d3_selection_enterPrototype.size = d3_selectionPrototype.size;\n  d3_selection_enterPrototype.select = function(selector) {\n    var subgroups = [], subgroup, subnode, upgroup, group, node;\n    for (var j = -1, m = this.length; ++j < m; ) {\n      upgroup = (group = this[j]).update;\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = group.parentNode;\n      for (var i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i, j));\n          subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  d3_selection_enterPrototype.insert = function(name, before) {\n    if (arguments.length < 2) before = d3_selection_enterInsertBefore(this);\n    return d3_selectionPrototype.insert.call(this, name, before);\n  };\n  function d3_selection_enterInsertBefore(enter) {\n    var i0, j0;\n    return function(d, i, j) {\n      var group = enter[j].update, n = group.length, node;\n      if (j != j0) j0 = j, i0 = 0;\n      if (i >= i0) i0 = i + 1;\n      while (!(node = group[i0]) && ++i0 < n) ;\n      return node;\n    };\n  }\n  d3.select = function(node) {\n    var group;\n    if (typeof node === \"string\") {\n      group = [ d3_select(node, d3_document) ];\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = [ node ];\n      group.parentNode = d3_documentElement(node);\n    }\n    return d3_selection([ group ]);\n  };\n  d3.selectAll = function(nodes) {\n    var group;\n    if (typeof nodes === \"string\") {\n      group = d3_array(d3_selectAll(nodes, d3_document));\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = d3_array(nodes);\n      group.parentNode = null;\n    }\n    return d3_selection([ group ]);\n  };\n  d3_selectionPrototype.on = function(type, listener, capture) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof type !== \"string\") {\n        if (n < 2) listener = false;\n        for (capture in type) this.each(d3_selection_on(capture, type[capture], listener));\n        return this;\n      }\n      if (n < 2) return (n = this.node()[\"__on\" + type]) && n._;\n      capture = false;\n    }\n    return this.each(d3_selection_on(type, listener, capture));\n  };\n  function d3_selection_on(type, listener, capture) {\n    var name = \"__on\" + type, i = type.indexOf(\".\"), wrap = d3_selection_onListener;\n    if (i > 0) type = type.slice(0, i);\n    var filter = d3_selection_onFilters.get(type);\n    if (filter) type = filter, wrap = d3_selection_onFilter;\n    function onRemove() {\n      var l = this[name];\n      if (l) {\n        this.removeEventListener(type, l, l.$);\n        delete this[name];\n      }\n    }\n    function onAdd() {\n      var l = wrap(listener, d3_array(arguments));\n      onRemove.call(this);\n      this.addEventListener(type, this[name] = l, l.$ = capture);\n      l._ = listener;\n    }\n    function removeAll() {\n      var re = new RegExp(\"^__on([^.]+)\" + d3.requote(type) + \"$\"), match;\n      for (var name in this) {\n        if (match = name.match(re)) {\n          var l = this[name];\n          this.removeEventListener(match[1], l, l.$);\n          delete this[name];\n        }\n      }\n    }\n    return i ? listener ? onAdd : onRemove : listener ? d3_noop : removeAll;\n  }\n  var d3_selection_onFilters = d3.map({\n    mouseenter: \"mouseover\",\n    mouseleave: \"mouseout\"\n  });\n  if (d3_document) {\n    d3_selection_onFilters.forEach(function(k) {\n      if (\"on\" + k in d3_document) d3_selection_onFilters.remove(k);\n    });\n  }\n  function d3_selection_onListener(listener, argumentz) {\n    return function(e) {\n      var o = d3.event;\n      d3.event = e;\n      argumentz[0] = this.__data__;\n      try {\n        listener.apply(this, argumentz);\n      } finally {\n        d3.event = o;\n      }\n    };\n  }\n  function d3_selection_onFilter(listener, argumentz) {\n    var l = d3_selection_onListener(listener, argumentz);\n    return function(e) {\n      var target = this, related = e.relatedTarget;\n      if (!related || related !== target && !(related.compareDocumentPosition(target) & 8)) {\n        l.call(target, e);\n      }\n    };\n  }\n  var d3_event_dragSelect, d3_event_dragId = 0;\n  function d3_event_dragSuppress(node) {\n    var name = \".dragsuppress-\" + ++d3_event_dragId, click = \"click\" + name, w = d3.select(d3_window(node)).on(\"touchmove\" + name, d3_eventPreventDefault).on(\"dragstart\" + name, d3_eventPreventDefault).on(\"selectstart\" + name, d3_eventPreventDefault);\n    if (d3_event_dragSelect == null) {\n      d3_event_dragSelect = \"onselectstart\" in node ? false : d3_vendorSymbol(node.style, \"userSelect\");\n    }\n    if (d3_event_dragSelect) {\n      var style = d3_documentElement(node).style, select = style[d3_event_dragSelect];\n      style[d3_event_dragSelect] = \"none\";\n    }\n    return function(suppressClick) {\n      w.on(name, null);\n      if (d3_event_dragSelect) style[d3_event_dragSelect] = select;\n      if (suppressClick) {\n        var off = function() {\n          w.on(click, null);\n        };\n        w.on(click, function() {\n          d3_eventPreventDefault();\n          off();\n        }, true);\n        setTimeout(off, 0);\n      }\n    };\n  }\n  d3.mouse = function(container) {\n    return d3_mousePoint(container, d3_eventSource());\n  };\n  var d3_mouse_bug44083 = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;\n  function d3_mousePoint(container, e) {\n    if (e.changedTouches) e = e.changedTouches[0];\n    var svg = container.ownerSVGElement || container;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      if (d3_mouse_bug44083 < 0) {\n        var window = d3_window(container);\n        if (window.scrollX || window.scrollY) {\n          svg = d3.select(\"body\").append(\"svg\").style({\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            margin: 0,\n            padding: 0,\n            border: \"none\"\n          }, \"important\");\n          var ctm = svg[0][0].getScreenCTM();\n          d3_mouse_bug44083 = !(ctm.f || ctm.e);\n          svg.remove();\n        }\n      }\n      if (d3_mouse_bug44083) point.x = e.pageX, point.y = e.pageY; else point.x = e.clientX, \n      point.y = e.clientY;\n      point = point.matrixTransform(container.getScreenCTM().inverse());\n      return [ point.x, point.y ];\n    }\n    var rect = container.getBoundingClientRect();\n    return [ e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop ];\n  }\n  d3.touch = function(container, touches, identifier) {\n    if (arguments.length < 3) identifier = touches, touches = d3_eventSource().changedTouches;\n    if (touches) for (var i = 0, n = touches.length, touch; i < n; ++i) {\n      if ((touch = touches[i]).identifier === identifier) {\n        return d3_mousePoint(container, touch);\n      }\n    }\n  };\n  d3.behavior.drag = function() {\n    var event = d3_eventDispatch(drag, \"drag\", \"dragstart\", \"dragend\"), origin = null, mousedown = dragstart(d3_noop, d3.mouse, d3_window, \"mousemove\", \"mouseup\"), touchstart = dragstart(d3_behavior_dragTouchId, d3.touch, d3_identity, \"touchmove\", \"touchend\");\n    function drag() {\n      this.on(\"mousedown.drag\", mousedown).on(\"touchstart.drag\", touchstart);\n    }\n    function dragstart(id, position, subject, move, end) {\n      return function() {\n        var that = this, target = d3.event.target.correspondingElement || d3.event.target, parent = that.parentNode, dispatch = event.of(that, arguments), dragged = 0, dragId = id(), dragName = \".drag\" + (dragId == null ? \"\" : \"-\" + dragId), dragOffset, dragSubject = d3.select(subject(target)).on(move + dragName, moved).on(end + dragName, ended), dragRestore = d3_event_dragSuppress(target), position0 = position(parent, dragId);\n        if (origin) {\n          dragOffset = origin.apply(that, arguments);\n          dragOffset = [ dragOffset.x - position0[0], dragOffset.y - position0[1] ];\n        } else {\n          dragOffset = [ 0, 0 ];\n        }\n        dispatch({\n          type: \"dragstart\"\n        });\n        function moved() {\n          var position1 = position(parent, dragId), dx, dy;\n          if (!position1) return;\n          dx = position1[0] - position0[0];\n          dy = position1[1] - position0[1];\n          dragged |= dx | dy;\n          position0 = position1;\n          dispatch({\n            type: \"drag\",\n            x: position1[0] + dragOffset[0],\n            y: position1[1] + dragOffset[1],\n            dx: dx,\n            dy: dy\n          });\n        }\n        function ended() {\n          if (!position(parent, dragId)) return;\n          dragSubject.on(move + dragName, null).on(end + dragName, null);\n          dragRestore(dragged);\n          dispatch({\n            type: \"dragend\"\n          });\n        }\n      };\n    }\n    drag.origin = function(x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return drag;\n    };\n    return d3.rebind(drag, event, \"on\");\n  };\n  function d3_behavior_dragTouchId() {\n    return d3.event.changedTouches[0].identifier;\n  }\n  d3.touches = function(container, touches) {\n    if (arguments.length < 2) touches = d3_eventSource().touches;\n    return touches ? d3_array(touches).map(function(touch) {\n      var point = d3_mousePoint(container, touch);\n      point.identifier = touch.identifier;\n      return point;\n    }) : [];\n  };\n  var ε = 1e-6, ε2 = ε * ε, π = Math.PI, τ = 2 * π, τε = τ - ε, halfπ = π / 2, d3_radians = π / 180, d3_degrees = 180 / π;\n  function d3_sgn(x) {\n    return x > 0 ? 1 : x < 0 ? -1 : 0;\n  }\n  function d3_cross2d(a, b, c) {\n    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n  }\n  function d3_acos(x) {\n    return x > 1 ? 0 : x < -1 ? π : Math.acos(x);\n  }\n  function d3_asin(x) {\n    return x > 1 ? halfπ : x < -1 ? -halfπ : Math.asin(x);\n  }\n  function d3_sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n  function d3_cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n  function d3_tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n  function d3_haversin(x) {\n    return (x = Math.sin(x / 2)) * x;\n  }\n  var ρ = Math.SQRT2, ρ2 = 2, ρ4 = 4;\n  d3.interpolateZoom = function(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2], dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, i, S;\n    if (d2 < ε2) {\n      S = Math.log(w1 / w0) / ρ;\n      i = function(t) {\n        return [ ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(ρ * t * S) ];\n      };\n    } else {\n      var d1 = Math.sqrt(d2), b0 = (w1 * w1 - w0 * w0 + ρ4 * d2) / (2 * w0 * ρ2 * d1), b1 = (w1 * w1 - w0 * w0 - ρ4 * d2) / (2 * w1 * ρ2 * d1), r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0), r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / ρ;\n      i = function(t) {\n        var s = t * S, coshr0 = d3_cosh(r0), u = w0 / (ρ2 * d1) * (coshr0 * d3_tanh(ρ * s + r0) - d3_sinh(r0));\n        return [ ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh(ρ * s + r0) ];\n      };\n    }\n    i.duration = S * 1e3;\n    return i;\n  };\n  d3.behavior.zoom = function() {\n    var view = {\n      x: 0,\n      y: 0,\n      k: 1\n    }, translate0, center0, center, size = [ 960, 500 ], scaleExtent = d3_behavior_zoomInfinity, duration = 250, zooming = 0, mousedown = \"mousedown.zoom\", mousemove = \"mousemove.zoom\", mouseup = \"mouseup.zoom\", mousewheelTimer, touchstart = \"touchstart.zoom\", touchtime, event = d3_eventDispatch(zoom, \"zoomstart\", \"zoom\", \"zoomend\"), x0, x1, y0, y1;\n    if (!d3_behavior_zoomWheel) {\n      d3_behavior_zoomWheel = \"onwheel\" in d3_document ? (d3_behavior_zoomDelta = function() {\n        return -d3.event.deltaY * (d3.event.deltaMode ? 120 : 1);\n      }, \"wheel\") : \"onmousewheel\" in d3_document ? (d3_behavior_zoomDelta = function() {\n        return d3.event.wheelDelta;\n      }, \"mousewheel\") : (d3_behavior_zoomDelta = function() {\n        return -d3.event.detail;\n      }, \"MozMousePixelScroll\");\n    }\n    function zoom(g) {\n      g.on(mousedown, mousedowned).on(d3_behavior_zoomWheel + \".zoom\", mousewheeled).on(\"dblclick.zoom\", dblclicked).on(touchstart, touchstarted);\n    }\n    zoom.event = function(g) {\n      g.each(function() {\n        var dispatch = event.of(this, arguments), view1 = view;\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.zoom\", function() {\n            view = this.__chart__ || {\n              x: 0,\n              y: 0,\n              k: 1\n            };\n            zoomstarted(dispatch);\n          }).tween(\"zoom:zoom\", function() {\n            var dx = size[0], dy = size[1], cx = center0 ? center0[0] : dx / 2, cy = center0 ? center0[1] : dy / 2, i = d3.interpolateZoom([ (cx - view.x) / view.k, (cy - view.y) / view.k, dx / view.k ], [ (cx - view1.x) / view1.k, (cy - view1.y) / view1.k, dx / view1.k ]);\n            return function(t) {\n              var l = i(t), k = dx / l[2];\n              this.__chart__ = view = {\n                x: cx - l[0] * k,\n                y: cy - l[1] * k,\n                k: k\n              };\n              zoomed(dispatch);\n            };\n          }).each(\"interrupt.zoom\", function() {\n            zoomended(dispatch);\n          }).each(\"end.zoom\", function() {\n            zoomended(dispatch);\n          });\n        } else {\n          this.__chart__ = view;\n          zoomstarted(dispatch);\n          zoomed(dispatch);\n          zoomended(dispatch);\n        }\n      });\n    };\n    zoom.translate = function(_) {\n      if (!arguments.length) return [ view.x, view.y ];\n      view = {\n        x: +_[0],\n        y: +_[1],\n        k: view.k\n      };\n      rescale();\n      return zoom;\n    };\n    zoom.scale = function(_) {\n      if (!arguments.length) return view.k;\n      view = {\n        x: view.x,\n        y: view.y,\n        k: null\n      };\n      scaleTo(+_);\n      rescale();\n      return zoom;\n    };\n    zoom.scaleExtent = function(_) {\n      if (!arguments.length) return scaleExtent;\n      scaleExtent = _ == null ? d3_behavior_zoomInfinity : [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.center = function(_) {\n      if (!arguments.length) return center;\n      center = _ && [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.size = function(_) {\n      if (!arguments.length) return size;\n      size = _ && [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.duration = function(_) {\n      if (!arguments.length) return duration;\n      duration = +_;\n      return zoom;\n    };\n    zoom.x = function(z) {\n      if (!arguments.length) return x1;\n      x1 = z;\n      x0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n    zoom.y = function(z) {\n      if (!arguments.length) return y1;\n      y1 = z;\n      y0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n    function location(p) {\n      return [ (p[0] - view.x) / view.k, (p[1] - view.y) / view.k ];\n    }\n    function point(l) {\n      return [ l[0] * view.k + view.x, l[1] * view.k + view.y ];\n    }\n    function scaleTo(s) {\n      view.k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], s));\n    }\n    function translateTo(p, l) {\n      l = point(l);\n      view.x += p[0] - l[0];\n      view.y += p[1] - l[1];\n    }\n    function zoomTo(that, p, l, k) {\n      that.__chart__ = {\n        x: view.x,\n        y: view.y,\n        k: view.k\n      };\n      scaleTo(Math.pow(2, k));\n      translateTo(center0 = p, l);\n      that = d3.select(that);\n      if (duration > 0) that = that.transition().duration(duration);\n      that.call(zoom.event);\n    }\n    function rescale() {\n      if (x1) x1.domain(x0.range().map(function(x) {\n        return (x - view.x) / view.k;\n      }).map(x0.invert));\n      if (y1) y1.domain(y0.range().map(function(y) {\n        return (y - view.y) / view.k;\n      }).map(y0.invert));\n    }\n    function zoomstarted(dispatch) {\n      if (!zooming++) dispatch({\n        type: \"zoomstart\"\n      });\n    }\n    function zoomed(dispatch) {\n      rescale();\n      dispatch({\n        type: \"zoom\",\n        scale: view.k,\n        translate: [ view.x, view.y ]\n      });\n    }\n    function zoomended(dispatch) {\n      if (!--zooming) dispatch({\n        type: \"zoomend\"\n      }), center0 = null;\n    }\n    function mousedowned() {\n      var that = this, dispatch = event.of(that, arguments), dragged = 0, subject = d3.select(d3_window(that)).on(mousemove, moved).on(mouseup, ended), location0 = location(d3.mouse(that)), dragRestore = d3_event_dragSuppress(that);\n      d3_selection_interrupt.call(that);\n      zoomstarted(dispatch);\n      function moved() {\n        dragged = 1;\n        translateTo(d3.mouse(that), location0);\n        zoomed(dispatch);\n      }\n      function ended() {\n        subject.on(mousemove, null).on(mouseup, null);\n        dragRestore(dragged);\n        zoomended(dispatch);\n      }\n    }\n    function touchstarted() {\n      var that = this, dispatch = event.of(that, arguments), locations0 = {}, distance0 = 0, scale0, zoomName = \".zoom-\" + d3.event.changedTouches[0].identifier, touchmove = \"touchmove\" + zoomName, touchend = \"touchend\" + zoomName, targets = [], subject = d3.select(that), dragRestore = d3_event_dragSuppress(that);\n      started();\n      zoomstarted(dispatch);\n      subject.on(mousedown, null).on(touchstart, started);\n      function relocate() {\n        var touches = d3.touches(that);\n        scale0 = view.k;\n        touches.forEach(function(t) {\n          if (t.identifier in locations0) locations0[t.identifier] = location(t);\n        });\n        return touches;\n      }\n      function started() {\n        var target = d3.event.target;\n        d3.select(target).on(touchmove, moved).on(touchend, ended);\n        targets.push(target);\n        var changed = d3.event.changedTouches;\n        for (var i = 0, n = changed.length; i < n; ++i) {\n          locations0[changed[i].identifier] = null;\n        }\n        var touches = relocate(), now = Date.now();\n        if (touches.length === 1) {\n          if (now - touchtime < 500) {\n            var p = touches[0];\n            zoomTo(that, p, locations0[p.identifier], Math.floor(Math.log(view.k) / Math.LN2) + 1);\n            d3_eventPreventDefault();\n          }\n          touchtime = now;\n        } else if (touches.length > 1) {\n          var p = touches[0], q = touches[1], dx = p[0] - q[0], dy = p[1] - q[1];\n          distance0 = dx * dx + dy * dy;\n        }\n      }\n      function moved() {\n        var touches = d3.touches(that), p0, l0, p1, l1;\n        d3_selection_interrupt.call(that);\n        for (var i = 0, n = touches.length; i < n; ++i, l1 = null) {\n          p1 = touches[i];\n          if (l1 = locations0[p1.identifier]) {\n            if (l0) break;\n            p0 = p1, l0 = l1;\n          }\n        }\n        if (l1) {\n          var distance1 = (distance1 = p1[0] - p0[0]) * distance1 + (distance1 = p1[1] - p0[1]) * distance1, scale1 = distance0 && Math.sqrt(distance1 / distance0);\n          p0 = [ (p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2 ];\n          l0 = [ (l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2 ];\n          scaleTo(scale1 * scale0);\n        }\n        touchtime = null;\n        translateTo(p0, l0);\n        zoomed(dispatch);\n      }\n      function ended() {\n        if (d3.event.touches.length) {\n          var changed = d3.event.changedTouches;\n          for (var i = 0, n = changed.length; i < n; ++i) {\n            delete locations0[changed[i].identifier];\n          }\n          for (var identifier in locations0) {\n            return void relocate();\n          }\n        }\n        d3.selectAll(targets).on(zoomName, null);\n        subject.on(mousedown, mousedowned).on(touchstart, touchstarted);\n        dragRestore();\n        zoomended(dispatch);\n      }\n    }\n    function mousewheeled() {\n      var dispatch = event.of(this, arguments);\n      if (mousewheelTimer) clearTimeout(mousewheelTimer); else d3_selection_interrupt.call(this), \n      translate0 = location(center0 = center || d3.mouse(this)), zoomstarted(dispatch);\n      mousewheelTimer = setTimeout(function() {\n        mousewheelTimer = null;\n        zoomended(dispatch);\n      }, 50);\n      d3_eventPreventDefault();\n      scaleTo(Math.pow(2, d3_behavior_zoomDelta() * .002) * view.k);\n      translateTo(center0, translate0);\n      zoomed(dispatch);\n    }\n    function dblclicked() {\n      var p = d3.mouse(this), k = Math.log(view.k) / Math.LN2;\n      zoomTo(this, p, location(p), d3.event.shiftKey ? Math.ceil(k) - 1 : Math.floor(k) + 1);\n    }\n    return d3.rebind(zoom, event, \"on\");\n  };\n  var d3_behavior_zoomInfinity = [ 0, Infinity ], d3_behavior_zoomDelta, d3_behavior_zoomWheel;\n  d3.color = d3_color;\n  function d3_color() {}\n  d3_color.prototype.toString = function() {\n    return this.rgb() + \"\";\n  };\n  d3.hsl = d3_hsl;\n  function d3_hsl(h, s, l) {\n    return this instanceof d3_hsl ? void (this.h = +h, this.s = +s, this.l = +l) : arguments.length < 2 ? h instanceof d3_hsl ? new d3_hsl(h.h, h.s, h.l) : d3_rgb_parse(\"\" + h, d3_rgb_hsl, d3_hsl) : new d3_hsl(h, s, l);\n  }\n  var d3_hslPrototype = d3_hsl.prototype = new d3_color();\n  d3_hslPrototype.brighter = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, this.l / k);\n  };\n  d3_hslPrototype.darker = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, k * this.l);\n  };\n  d3_hslPrototype.rgb = function() {\n    return d3_hsl_rgb(this.h, this.s, this.l);\n  };\n  function d3_hsl_rgb(h, s, l) {\n    var m1, m2;\n    h = isNaN(h) ? 0 : (h %= 360) < 0 ? h + 360 : h;\n    s = isNaN(s) ? 0 : s < 0 ? 0 : s > 1 ? 1 : s;\n    l = l < 0 ? 0 : l > 1 ? 1 : l;\n    m2 = l <= .5 ? l * (1 + s) : l + s - l * s;\n    m1 = 2 * l - m2;\n    function v(h) {\n      if (h > 360) h -= 360; else if (h < 0) h += 360;\n      if (h < 60) return m1 + (m2 - m1) * h / 60;\n      if (h < 180) return m2;\n      if (h < 240) return m1 + (m2 - m1) * (240 - h) / 60;\n      return m1;\n    }\n    function vv(h) {\n      return Math.round(v(h) * 255);\n    }\n    return new d3_rgb(vv(h + 120), vv(h), vv(h - 120));\n  }\n  d3.hcl = d3_hcl;\n  function d3_hcl(h, c, l) {\n    return this instanceof d3_hcl ? void (this.h = +h, this.c = +c, this.l = +l) : arguments.length < 2 ? h instanceof d3_hcl ? new d3_hcl(h.h, h.c, h.l) : h instanceof d3_lab ? d3_lab_hcl(h.l, h.a, h.b) : d3_lab_hcl((h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : new d3_hcl(h, c, l);\n  }\n  var d3_hclPrototype = d3_hcl.prototype = new d3_color();\n  d3_hclPrototype.brighter = function(k) {\n    return new d3_hcl(this.h, this.c, Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)));\n  };\n  d3_hclPrototype.darker = function(k) {\n    return new d3_hcl(this.h, this.c, Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)));\n  };\n  d3_hclPrototype.rgb = function() {\n    return d3_hcl_lab(this.h, this.c, this.l).rgb();\n  };\n  function d3_hcl_lab(h, c, l) {\n    if (isNaN(h)) h = 0;\n    if (isNaN(c)) c = 0;\n    return new d3_lab(l, Math.cos(h *= d3_radians) * c, Math.sin(h) * c);\n  }\n  d3.lab = d3_lab;\n  function d3_lab(l, a, b) {\n    return this instanceof d3_lab ? void (this.l = +l, this.a = +a, this.b = +b) : arguments.length < 2 ? l instanceof d3_lab ? new d3_lab(l.l, l.a, l.b) : l instanceof d3_hcl ? d3_hcl_lab(l.h, l.c, l.l) : d3_rgb_lab((l = d3_rgb(l)).r, l.g, l.b) : new d3_lab(l, a, b);\n  }\n  var d3_lab_K = 18;\n  var d3_lab_X = .95047, d3_lab_Y = 1, d3_lab_Z = 1.08883;\n  var d3_labPrototype = d3_lab.prototype = new d3_color();\n  d3_labPrototype.brighter = function(k) {\n    return new d3_lab(Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n  d3_labPrototype.darker = function(k) {\n    return new d3_lab(Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n  d3_labPrototype.rgb = function() {\n    return d3_lab_rgb(this.l, this.a, this.b);\n  };\n  function d3_lab_rgb(l, a, b) {\n    var y = (l + 16) / 116, x = y + a / 500, z = y - b / 200;\n    x = d3_lab_xyz(x) * d3_lab_X;\n    y = d3_lab_xyz(y) * d3_lab_Y;\n    z = d3_lab_xyz(z) * d3_lab_Z;\n    return new d3_rgb(d3_xyz_rgb(3.2404542 * x - 1.5371385 * y - .4985314 * z), d3_xyz_rgb(-.969266 * x + 1.8760108 * y + .041556 * z), d3_xyz_rgb(.0556434 * x - .2040259 * y + 1.0572252 * z));\n  }\n  function d3_lab_hcl(l, a, b) {\n    return l > 0 ? new d3_hcl(Math.atan2(b, a) * d3_degrees, Math.sqrt(a * a + b * b), l) : new d3_hcl(NaN, NaN, l);\n  }\n  function d3_lab_xyz(x) {\n    return x > .206893034 ? x * x * x : (x - 4 / 29) / 7.787037;\n  }\n  function d3_xyz_lab(x) {\n    return x > .008856 ? Math.pow(x, 1 / 3) : 7.787037 * x + 4 / 29;\n  }\n  function d3_xyz_rgb(r) {\n    return Math.round(255 * (r <= .00304 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055));\n  }\n  d3.rgb = d3_rgb;\n  function d3_rgb(r, g, b) {\n    return this instanceof d3_rgb ? void (this.r = ~~r, this.g = ~~g, this.b = ~~b) : arguments.length < 2 ? r instanceof d3_rgb ? new d3_rgb(r.r, r.g, r.b) : d3_rgb_parse(\"\" + r, d3_rgb, d3_hsl_rgb) : new d3_rgb(r, g, b);\n  }\n  function d3_rgbNumber(value) {\n    return new d3_rgb(value >> 16, value >> 8 & 255, value & 255);\n  }\n  function d3_rgbString(value) {\n    return d3_rgbNumber(value) + \"\";\n  }\n  var d3_rgbPrototype = d3_rgb.prototype = new d3_color();\n  d3_rgbPrototype.brighter = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    var r = this.r, g = this.g, b = this.b, i = 30;\n    if (!r && !g && !b) return new d3_rgb(i, i, i);\n    if (r && r < i) r = i;\n    if (g && g < i) g = i;\n    if (b && b < i) b = i;\n    return new d3_rgb(Math.min(255, r / k), Math.min(255, g / k), Math.min(255, b / k));\n  };\n  d3_rgbPrototype.darker = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_rgb(k * this.r, k * this.g, k * this.b);\n  };\n  d3_rgbPrototype.hsl = function() {\n    return d3_rgb_hsl(this.r, this.g, this.b);\n  };\n  d3_rgbPrototype.toString = function() {\n    return \"#\" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b);\n  };\n  function d3_rgb_hex(v) {\n    return v < 16 ? \"0\" + Math.max(0, v).toString(16) : Math.min(255, v).toString(16);\n  }\n  function d3_rgb_parse(format, rgb, hsl) {\n    var r = 0, g = 0, b = 0, m1, m2, color;\n    m1 = /([a-z]+)\\((.*)\\)/.exec(format = format.toLowerCase());\n    if (m1) {\n      m2 = m1[2].split(\",\");\n      switch (m1[1]) {\n       case \"hsl\":\n        {\n          return hsl(parseFloat(m2[0]), parseFloat(m2[1]) / 100, parseFloat(m2[2]) / 100);\n        }\n\n       case \"rgb\":\n        {\n          return rgb(d3_rgb_parseNumber(m2[0]), d3_rgb_parseNumber(m2[1]), d3_rgb_parseNumber(m2[2]));\n        }\n      }\n    }\n    if (color = d3_rgb_names.get(format)) {\n      return rgb(color.r, color.g, color.b);\n    }\n    if (format != null && format.charAt(0) === \"#\" && !isNaN(color = parseInt(format.slice(1), 16))) {\n      if (format.length === 4) {\n        r = (color & 3840) >> 4;\n        r = r >> 4 | r;\n        g = color & 240;\n        g = g >> 4 | g;\n        b = color & 15;\n        b = b << 4 | b;\n      } else if (format.length === 7) {\n        r = (color & 16711680) >> 16;\n        g = (color & 65280) >> 8;\n        b = color & 255;\n      }\n    }\n    return rgb(r, g, b);\n  }\n  function d3_rgb_hsl(r, g, b) {\n    var min = Math.min(r /= 255, g /= 255, b /= 255), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / 2;\n    if (d) {\n      s = l < .5 ? d / (max + min) : d / (2 - max - min);\n      if (r == max) h = (g - b) / d + (g < b ? 6 : 0); else if (g == max) h = (b - r) / d + 2; else h = (r - g) / d + 4;\n      h *= 60;\n    } else {\n      h = NaN;\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new d3_hsl(h, s, l);\n  }\n  function d3_rgb_lab(r, g, b) {\n    r = d3_rgb_xyz(r);\n    g = d3_rgb_xyz(g);\n    b = d3_rgb_xyz(b);\n    var x = d3_xyz_lab((.4124564 * r + .3575761 * g + .1804375 * b) / d3_lab_X), y = d3_xyz_lab((.2126729 * r + .7151522 * g + .072175 * b) / d3_lab_Y), z = d3_xyz_lab((.0193339 * r + .119192 * g + .9503041 * b) / d3_lab_Z);\n    return d3_lab(116 * y - 16, 500 * (x - y), 200 * (y - z));\n  }\n  function d3_rgb_xyz(r) {\n    return (r /= 255) <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4);\n  }\n  function d3_rgb_parseNumber(c) {\n    var f = parseFloat(c);\n    return c.charAt(c.length - 1) === \"%\" ? Math.round(f * 2.55) : f;\n  }\n  var d3_rgb_names = d3.map({\n    aliceblue: 15792383,\n    antiquewhite: 16444375,\n    aqua: 65535,\n    aquamarine: 8388564,\n    azure: 15794175,\n    beige: 16119260,\n    bisque: 16770244,\n    black: 0,\n    blanchedalmond: 16772045,\n    blue: 255,\n    blueviolet: 9055202,\n    brown: 10824234,\n    burlywood: 14596231,\n    cadetblue: 6266528,\n    chartreuse: 8388352,\n    chocolate: 13789470,\n    coral: 16744272,\n    cornflowerblue: 6591981,\n    cornsilk: 16775388,\n    crimson: 14423100,\n    cyan: 65535,\n    darkblue: 139,\n    darkcyan: 35723,\n    darkgoldenrod: 12092939,\n    darkgray: 11119017,\n    darkgreen: 25600,\n    darkgrey: 11119017,\n    darkkhaki: 12433259,\n    darkmagenta: 9109643,\n    darkolivegreen: 5597999,\n    darkorange: 16747520,\n    darkorchid: 10040012,\n    darkred: 9109504,\n    darksalmon: 15308410,\n    darkseagreen: 9419919,\n    darkslateblue: 4734347,\n    darkslategray: 3100495,\n    darkslategrey: 3100495,\n    darkturquoise: 52945,\n    darkviolet: 9699539,\n    deeppink: 16716947,\n    deepskyblue: 49151,\n    dimgray: 6908265,\n    dimgrey: 6908265,\n    dodgerblue: 2003199,\n    firebrick: 11674146,\n    floralwhite: 16775920,\n    forestgreen: 2263842,\n    fuchsia: 16711935,\n    gainsboro: 14474460,\n    ghostwhite: 16316671,\n    gold: 16766720,\n    goldenrod: 14329120,\n    gray: 8421504,\n    green: 32768,\n    greenyellow: 11403055,\n    grey: 8421504,\n    honeydew: 15794160,\n    hotpink: 16738740,\n    indianred: 13458524,\n    indigo: 4915330,\n    ivory: 16777200,\n    khaki: 15787660,\n    lavender: 15132410,\n    lavenderblush: 16773365,\n    lawngreen: 8190976,\n    lemonchiffon: 16775885,\n    lightblue: 11393254,\n    lightcoral: 15761536,\n    lightcyan: 14745599,\n    lightgoldenrodyellow: 16448210,\n    lightgray: 13882323,\n    lightgreen: 9498256,\n    lightgrey: 13882323,\n    lightpink: 16758465,\n    lightsalmon: 16752762,\n    lightseagreen: 2142890,\n    lightskyblue: 8900346,\n    lightslategray: 7833753,\n    lightslategrey: 7833753,\n    lightsteelblue: 11584734,\n    lightyellow: 16777184,\n    lime: 65280,\n    limegreen: 3329330,\n    linen: 16445670,\n    magenta: 16711935,\n    maroon: 8388608,\n    mediumaquamarine: 6737322,\n    mediumblue: 205,\n    mediumorchid: 12211667,\n    mediumpurple: 9662683,\n    mediumseagreen: 3978097,\n    mediumslateblue: 8087790,\n    mediumspringgreen: 64154,\n    mediumturquoise: 4772300,\n    mediumvioletred: 13047173,\n    midnightblue: 1644912,\n    mintcream: 16121850,\n    mistyrose: 16770273,\n    moccasin: 16770229,\n    navajowhite: 16768685,\n    navy: 128,\n    oldlace: 16643558,\n    olive: 8421376,\n    olivedrab: 7048739,\n    orange: 16753920,\n    orangered: 16729344,\n    orchid: 14315734,\n    palegoldenrod: 15657130,\n    palegreen: 10025880,\n    paleturquoise: 11529966,\n    palevioletred: 14381203,\n    papayawhip: 16773077,\n    peachpuff: 16767673,\n    peru: 13468991,\n    pink: 16761035,\n    plum: 14524637,\n    powderblue: 11591910,\n    purple: 8388736,\n    rebeccapurple: 6697881,\n    red: 16711680,\n    rosybrown: 12357519,\n    royalblue: 4286945,\n    saddlebrown: 9127187,\n    salmon: 16416882,\n    sandybrown: 16032864,\n    seagreen: 3050327,\n    seashell: 16774638,\n    sienna: 10506797,\n    silver: 12632256,\n    skyblue: 8900331,\n    slateblue: 6970061,\n    slategray: 7372944,\n    slategrey: 7372944,\n    snow: 16775930,\n    springgreen: 65407,\n    steelblue: 4620980,\n    tan: 13808780,\n    teal: 32896,\n    thistle: 14204888,\n    tomato: 16737095,\n    turquoise: 4251856,\n    violet: 15631086,\n    wheat: 16113331,\n    white: 16777215,\n    whitesmoke: 16119285,\n    yellow: 16776960,\n    yellowgreen: 10145074\n  });\n  d3_rgb_names.forEach(function(key, value) {\n    d3_rgb_names.set(key, d3_rgbNumber(value));\n  });\n  function d3_functor(v) {\n    return typeof v === \"function\" ? v : function() {\n      return v;\n    };\n  }\n  d3.functor = d3_functor;\n  d3.xhr = d3_xhrType(d3_identity);\n  function d3_xhrType(response) {\n    return function(url, mimeType, callback) {\n      if (arguments.length === 2 && typeof mimeType === \"function\") callback = mimeType, \n      mimeType = null;\n      return d3_xhr(url, mimeType, response, callback);\n    };\n  }\n  function d3_xhr(url, mimeType, response, callback) {\n    var xhr = {}, dispatch = d3.dispatch(\"beforesend\", \"progress\", \"load\", \"error\"), headers = {}, request = new XMLHttpRequest(), responseType = null;\n    if (this.XDomainRequest && !(\"withCredentials\" in request) && /^(http(s)?:)?\\/\\//.test(url)) request = new XDomainRequest();\n    \"onload\" in request ? request.onload = request.onerror = respond : request.onreadystatechange = function() {\n      request.readyState > 3 && respond();\n    };\n    function respond() {\n      var status = request.status, result;\n      if (!status && d3_xhrHasResponse(request) || status >= 200 && status < 300 || status === 304) {\n        try {\n          result = response.call(xhr, request);\n        } catch (e) {\n          dispatch.error.call(xhr, e);\n          return;\n        }\n        dispatch.load.call(xhr, result);\n      } else {\n        dispatch.error.call(xhr, request);\n      }\n    }\n    request.onprogress = function(event) {\n      var o = d3.event;\n      d3.event = event;\n      try {\n        dispatch.progress.call(xhr, request);\n      } finally {\n        d3.event = o;\n      }\n    };\n    xhr.header = function(name, value) {\n      name = (name + \"\").toLowerCase();\n      if (arguments.length < 2) return headers[name];\n      if (value == null) delete headers[name]; else headers[name] = value + \"\";\n      return xhr;\n    };\n    xhr.mimeType = function(value) {\n      if (!arguments.length) return mimeType;\n      mimeType = value == null ? null : value + \"\";\n      return xhr;\n    };\n    xhr.responseType = function(value) {\n      if (!arguments.length) return responseType;\n      responseType = value;\n      return xhr;\n    };\n    xhr.response = function(value) {\n      response = value;\n      return xhr;\n    };\n    [ \"get\", \"post\" ].forEach(function(method) {\n      xhr[method] = function() {\n        return xhr.send.apply(xhr, [ method ].concat(d3_array(arguments)));\n      };\n    });\n    xhr.send = function(method, data, callback) {\n      if (arguments.length === 2 && typeof data === \"function\") callback = data, data = null;\n      request.open(method, url, true);\n      if (mimeType != null && !(\"accept\" in headers)) headers[\"accept\"] = mimeType + \",*/*\";\n      if (request.setRequestHeader) for (var name in headers) request.setRequestHeader(name, headers[name]);\n      if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);\n      if (responseType != null) request.responseType = responseType;\n      if (callback != null) xhr.on(\"error\", callback).on(\"load\", function(request) {\n        callback(null, request);\n      });\n      dispatch.beforesend.call(xhr, request);\n      request.send(data == null ? null : data);\n      return xhr;\n    };\n    xhr.abort = function() {\n      request.abort();\n      return xhr;\n    };\n    d3.rebind(xhr, dispatch, \"on\");\n    return callback == null ? xhr : xhr.get(d3_xhr_fixCallback(callback));\n  }\n  function d3_xhr_fixCallback(callback) {\n    return callback.length === 1 ? function(error, request) {\n      callback(error == null ? request : null);\n    } : callback;\n  }\n  function d3_xhrHasResponse(request) {\n    var type = request.responseType;\n    return type && type !== \"text\" ? request.response : request.responseText;\n  }\n  d3.dsv = function(delimiter, mimeType) {\n    var reFormat = new RegExp('[\"' + delimiter + \"\\n]\"), delimiterCode = delimiter.charCodeAt(0);\n    function dsv(url, row, callback) {\n      if (arguments.length < 3) callback = row, row = null;\n      var xhr = d3_xhr(url, mimeType, row == null ? response : typedResponse(row), callback);\n      xhr.row = function(_) {\n        return arguments.length ? xhr.response((row = _) == null ? response : typedResponse(_)) : row;\n      };\n      return xhr;\n    }\n    function response(request) {\n      return dsv.parse(request.responseText);\n    }\n    function typedResponse(f) {\n      return function(request) {\n        return dsv.parse(request.responseText, f);\n      };\n    }\n    dsv.parse = function(text, f) {\n      var o;\n      return dsv.parseRows(text, function(row, i) {\n        if (o) return o(row, i - 1);\n        var a = new Function(\"d\", \"return {\" + row.map(function(name, i) {\n          return JSON.stringify(name) + \": d[\" + i + \"]\";\n        }).join(\",\") + \"}\");\n        o = f ? function(row, i) {\n          return f(a(row), i);\n        } : a;\n      });\n    };\n    dsv.parseRows = function(text, f) {\n      var EOL = {}, EOF = {}, rows = [], N = text.length, I = 0, n = 0, t, eol;\n      function token() {\n        if (I >= N) return EOF;\n        if (eol) return eol = false, EOL;\n        var j = I;\n        if (text.charCodeAt(j) === 34) {\n          var i = j;\n          while (i++ < N) {\n            if (text.charCodeAt(i) === 34) {\n              if (text.charCodeAt(i + 1) !== 34) break;\n              ++i;\n            }\n          }\n          I = i + 2;\n          var c = text.charCodeAt(i + 1);\n          if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(i + 2) === 10) ++I;\n          } else if (c === 10) {\n            eol = true;\n          }\n          return text.slice(j + 1, i).replace(/\"\"/g, '\"');\n        }\n        while (I < N) {\n          var c = text.charCodeAt(I++), k = 1;\n          if (c === 10) eol = true; else if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(I) === 10) ++I, ++k;\n          } else if (c !== delimiterCode) continue;\n          return text.slice(j, I - k);\n        }\n        return text.slice(j);\n      }\n      while ((t = token()) !== EOF) {\n        var a = [];\n        while (t !== EOL && t !== EOF) {\n          a.push(t);\n          t = token();\n        }\n        if (f && (a = f(a, n++)) == null) continue;\n        rows.push(a);\n      }\n      return rows;\n    };\n    dsv.format = function(rows) {\n      if (Array.isArray(rows[0])) return dsv.formatRows(rows);\n      var fieldSet = new d3_Set(), fields = [];\n      rows.forEach(function(row) {\n        for (var field in row) {\n          if (!fieldSet.has(field)) {\n            fields.push(fieldSet.add(field));\n          }\n        }\n      });\n      return [ fields.map(formatValue).join(delimiter) ].concat(rows.map(function(row) {\n        return fields.map(function(field) {\n          return formatValue(row[field]);\n        }).join(delimiter);\n      })).join(\"\\n\");\n    };\n    dsv.formatRows = function(rows) {\n      return rows.map(formatRow).join(\"\\n\");\n    };\n    function formatRow(row) {\n      return row.map(formatValue).join(delimiter);\n    }\n    function formatValue(text) {\n      return reFormat.test(text) ? '\"' + text.replace(/\\\"/g, '\"\"') + '\"' : text;\n    }\n    return dsv;\n  };\n  d3.csv = d3.dsv(\",\", \"text/csv\");\n  d3.tsv = d3.dsv(\"\t\", \"text/tab-separated-values\");\n  var d3_timer_queueHead, d3_timer_queueTail, d3_timer_interval, d3_timer_timeout, d3_timer_frame = this[d3_vendorSymbol(this, \"requestAnimationFrame\")] || function(callback) {\n    setTimeout(callback, 17);\n  };\n  d3.timer = function() {\n    d3_timer.apply(this, arguments);\n  };\n  function d3_timer(callback, delay, then) {\n    var n = arguments.length;\n    if (n < 2) delay = 0;\n    if (n < 3) then = Date.now();\n    var time = then + delay, timer = {\n      c: callback,\n      t: time,\n      n: null\n    };\n    if (d3_timer_queueTail) d3_timer_queueTail.n = timer; else d3_timer_queueHead = timer;\n    d3_timer_queueTail = timer;\n    if (!d3_timer_interval) {\n      d3_timer_timeout = clearTimeout(d3_timer_timeout);\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n    return timer;\n  }\n  function d3_timer_step() {\n    var now = d3_timer_mark(), delay = d3_timer_sweep() - now;\n    if (delay > 24) {\n      if (isFinite(delay)) {\n        clearTimeout(d3_timer_timeout);\n        d3_timer_timeout = setTimeout(d3_timer_step, delay);\n      }\n      d3_timer_interval = 0;\n    } else {\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n  }\n  d3.timer.flush = function() {\n    d3_timer_mark();\n    d3_timer_sweep();\n  };\n  function d3_timer_mark() {\n    var now = Date.now(), timer = d3_timer_queueHead;\n    while (timer) {\n      if (now >= timer.t && timer.c(now - timer.t)) timer.c = null;\n      timer = timer.n;\n    }\n    return now;\n  }\n  function d3_timer_sweep() {\n    var t0, t1 = d3_timer_queueHead, time = Infinity;\n    while (t1) {\n      if (t1.c) {\n        if (t1.t < time) time = t1.t;\n        t1 = (t0 = t1).n;\n      } else {\n        t1 = t0 ? t0.n = t1.n : d3_timer_queueHead = t1.n;\n      }\n    }\n    d3_timer_queueTail = t0;\n    return time;\n  }\n  function d3_format_precision(x, p) {\n    return p - (x ? Math.ceil(Math.log(x) / Math.LN10) : 1);\n  }\n  d3.round = function(x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n  };\n  var d3_formatPrefixes = [ \"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"µ\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\" ].map(d3_formatPrefix);\n  d3.formatPrefix = function(value, precision) {\n    var i = 0;\n    if (value = +value) {\n      if (value < 0) value *= -1;\n      if (precision) value = d3.round(value, d3_format_precision(value, precision));\n      i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n      i = Math.max(-24, Math.min(24, Math.floor((i - 1) / 3) * 3));\n    }\n    return d3_formatPrefixes[8 + i / 3];\n  };\n  function d3_formatPrefix(d, i) {\n    var k = Math.pow(10, abs(8 - i) * 3);\n    return {\n      scale: i > 8 ? function(d) {\n        return d / k;\n      } : function(d) {\n        return d * k;\n      },\n      symbol: d\n    };\n  }\n  function d3_locale_numberFormat(locale) {\n    var locale_decimal = locale.decimal, locale_thousands = locale.thousands, locale_grouping = locale.grouping, locale_currency = locale.currency, formatGroup = locale_grouping && locale_thousands ? function(value, width) {\n      var i = value.length, t = [], j = 0, g = locale_grouping[0], length = 0;\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = locale_grouping[j = (j + 1) % locale_grouping.length];\n      }\n      return t.reverse().join(locale_thousands);\n    } : d3_identity;\n    return function(specifier) {\n      var match = d3_format_re.exec(specifier), fill = match[1] || \" \", align = match[2] || \">\", sign = match[3] || \"-\", symbol = match[4] || \"\", zfill = match[5], width = +match[6], comma = match[7], precision = match[8], type = match[9], scale = 1, prefix = \"\", suffix = \"\", integer = false, exponent = true;\n      if (precision) precision = +precision.substring(1);\n      if (zfill || fill === \"0\" && align === \"=\") {\n        zfill = fill = \"0\";\n        align = \"=\";\n      }\n      switch (type) {\n       case \"n\":\n        comma = true;\n        type = \"g\";\n        break;\n\n       case \"%\":\n        scale = 100;\n        suffix = \"%\";\n        type = \"f\";\n        break;\n\n       case \"p\":\n        scale = 100;\n        suffix = \"%\";\n        type = \"r\";\n        break;\n\n       case \"b\":\n       case \"o\":\n       case \"x\":\n       case \"X\":\n        if (symbol === \"#\") prefix = \"0\" + type.toLowerCase();\n\n       case \"c\":\n        exponent = false;\n\n       case \"d\":\n        integer = true;\n        precision = 0;\n        break;\n\n       case \"s\":\n        scale = -1;\n        type = \"r\";\n        break;\n      }\n      if (symbol === \"$\") prefix = locale_currency[0], suffix = locale_currency[1];\n      if (type == \"r\" && !precision) type = \"g\";\n      if (precision != null) {\n        if (type == \"g\") precision = Math.max(1, Math.min(21, precision)); else if (type == \"e\" || type == \"f\") precision = Math.max(0, Math.min(20, precision));\n      }\n      type = d3_format_types.get(type) || d3_format_typeDefault;\n      var zcomma = zfill && comma;\n      return function(value) {\n        var fullSuffix = suffix;\n        if (integer && value % 1) return \"\";\n        var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, \"-\") : sign === \"-\" ? \"\" : sign;\n        if (scale < 0) {\n          var unit = d3.formatPrefix(value, precision);\n          value = unit.scale(value);\n          fullSuffix = unit.symbol + suffix;\n        } else {\n          value *= scale;\n        }\n        value = type(value, precision);\n        var i = value.lastIndexOf(\".\"), before, after;\n        if (i < 0) {\n          var j = exponent ? value.lastIndexOf(\"e\") : -1;\n          if (j < 0) before = value, after = \"\"; else before = value.substring(0, j), after = value.substring(j);\n        } else {\n          before = value.substring(0, i);\n          after = locale_decimal + value.substring(i + 1);\n        }\n        if (!zfill && comma) before = formatGroup(before, Infinity);\n        var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length), padding = length < width ? new Array(length = width - length + 1).join(fill) : \"\";\n        if (zcomma) before = formatGroup(padding + before, padding.length ? width - after.length : Infinity);\n        negative += prefix;\n        value = before + after;\n        return (align === \"<\" ? negative + value + padding : align === \">\" ? padding + negative + value : align === \"^\" ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;\n      };\n    };\n  }\n  var d3_format_re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n  var d3_format_types = d3.map({\n    b: function(x) {\n      return x.toString(2);\n    },\n    c: function(x) {\n      return String.fromCharCode(x);\n    },\n    o: function(x) {\n      return x.toString(8);\n    },\n    x: function(x) {\n      return x.toString(16);\n    },\n    X: function(x) {\n      return x.toString(16).toUpperCase();\n    },\n    g: function(x, p) {\n      return x.toPrecision(p);\n    },\n    e: function(x, p) {\n      return x.toExponential(p);\n    },\n    f: function(x, p) {\n      return x.toFixed(p);\n    },\n    r: function(x, p) {\n      return (x = d3.round(x, d3_format_precision(x, p))).toFixed(Math.max(0, Math.min(20, d3_format_precision(x * (1 + 1e-15), p))));\n    }\n  });\n  function d3_format_typeDefault(x) {\n    return x + \"\";\n  }\n  var d3_time = d3.time = {}, d3_date = Date;\n  function d3_date_utc() {\n    this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]);\n  }\n  d3_date_utc.prototype = {\n    getDate: function() {\n      return this._.getUTCDate();\n    },\n    getDay: function() {\n      return this._.getUTCDay();\n    },\n    getFullYear: function() {\n      return this._.getUTCFullYear();\n    },\n    getHours: function() {\n      return this._.getUTCHours();\n    },\n    getMilliseconds: function() {\n      return this._.getUTCMilliseconds();\n    },\n    getMinutes: function() {\n      return this._.getUTCMinutes();\n    },\n    getMonth: function() {\n      return this._.getUTCMonth();\n    },\n    getSeconds: function() {\n      return this._.getUTCSeconds();\n    },\n    getTime: function() {\n      return this._.getTime();\n    },\n    getTimezoneOffset: function() {\n      return 0;\n    },\n    valueOf: function() {\n      return this._.valueOf();\n    },\n    setDate: function() {\n      d3_time_prototype.setUTCDate.apply(this._, arguments);\n    },\n    setDay: function() {\n      d3_time_prototype.setUTCDay.apply(this._, arguments);\n    },\n    setFullYear: function() {\n      d3_time_prototype.setUTCFullYear.apply(this._, arguments);\n    },\n    setHours: function() {\n      d3_time_prototype.setUTCHours.apply(this._, arguments);\n    },\n    setMilliseconds: function() {\n      d3_time_prototype.setUTCMilliseconds.apply(this._, arguments);\n    },\n    setMinutes: function() {\n      d3_time_prototype.setUTCMinutes.apply(this._, arguments);\n    },\n    setMonth: function() {\n      d3_time_prototype.setUTCMonth.apply(this._, arguments);\n    },\n    setSeconds: function() {\n      d3_time_prototype.setUTCSeconds.apply(this._, arguments);\n    },\n    setTime: function() {\n      d3_time_prototype.setTime.apply(this._, arguments);\n    }\n  };\n  var d3_time_prototype = Date.prototype;\n  function d3_time_interval(local, step, number) {\n    function round(date) {\n      var d0 = local(date), d1 = offset(d0, 1);\n      return date - d0 < d1 - date ? d0 : d1;\n    }\n    function ceil(date) {\n      step(date = local(new d3_date(date - 1)), 1);\n      return date;\n    }\n    function offset(date, k) {\n      step(date = new d3_date(+date), k);\n      return date;\n    }\n    function range(t0, t1, dt) {\n      var time = ceil(t0), times = [];\n      if (dt > 1) {\n        while (time < t1) {\n          if (!(number(time) % dt)) times.push(new Date(+time));\n          step(time, 1);\n        }\n      } else {\n        while (time < t1) times.push(new Date(+time)), step(time, 1);\n      }\n      return times;\n    }\n    function range_utc(t0, t1, dt) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = t0;\n        return range(utc, t1, dt);\n      } finally {\n        d3_date = Date;\n      }\n    }\n    local.floor = local;\n    local.round = round;\n    local.ceil = ceil;\n    local.offset = offset;\n    local.range = range;\n    var utc = local.utc = d3_time_interval_utc(local);\n    utc.floor = utc;\n    utc.round = d3_time_interval_utc(round);\n    utc.ceil = d3_time_interval_utc(ceil);\n    utc.offset = d3_time_interval_utc(offset);\n    utc.range = range_utc;\n    return local;\n  }\n  function d3_time_interval_utc(method) {\n    return function(date, k) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = date;\n        return method(utc, k)._;\n      } finally {\n        d3_date = Date;\n      }\n    };\n  }\n  d3_time.year = d3_time_interval(function(date) {\n    date = d3_time.day(date);\n    date.setMonth(0, 1);\n    return date;\n  }, function(date, offset) {\n    date.setFullYear(date.getFullYear() + offset);\n  }, function(date) {\n    return date.getFullYear();\n  });\n  d3_time.years = d3_time.year.range;\n  d3_time.years.utc = d3_time.year.utc.range;\n  d3_time.day = d3_time_interval(function(date) {\n    var day = new d3_date(2e3, 0);\n    day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n    return day;\n  }, function(date, offset) {\n    date.setDate(date.getDate() + offset);\n  }, function(date) {\n    return date.getDate() - 1;\n  });\n  d3_time.days = d3_time.day.range;\n  d3_time.days.utc = d3_time.day.utc.range;\n  d3_time.dayOfYear = function(date) {\n    var year = d3_time.year(date);\n    return Math.floor((date - year - (date.getTimezoneOffset() - year.getTimezoneOffset()) * 6e4) / 864e5);\n  };\n  [ \"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\" ].forEach(function(day, i) {\n    i = 7 - i;\n    var interval = d3_time[day] = d3_time_interval(function(date) {\n      (date = d3_time.day(date)).setDate(date.getDate() - (date.getDay() + i) % 7);\n      return date;\n    }, function(date, offset) {\n      date.setDate(date.getDate() + Math.floor(offset) * 7);\n    }, function(date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7) - (day !== i);\n    });\n    d3_time[day + \"s\"] = interval.range;\n    d3_time[day + \"s\"].utc = interval.utc.range;\n    d3_time[day + \"OfYear\"] = function(date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7);\n    };\n  });\n  d3_time.week = d3_time.sunday;\n  d3_time.weeks = d3_time.sunday.range;\n  d3_time.weeks.utc = d3_time.sunday.utc.range;\n  d3_time.weekOfYear = d3_time.sundayOfYear;\n  function d3_locale_timeFormat(locale) {\n    var locale_dateTime = locale.dateTime, locale_date = locale.date, locale_time = locale.time, locale_periods = locale.periods, locale_days = locale.days, locale_shortDays = locale.shortDays, locale_months = locale.months, locale_shortMonths = locale.shortMonths;\n    function d3_time_format(template) {\n      var n = template.length;\n      function format(date) {\n        var string = [], i = -1, j = 0, c, p, f;\n        while (++i < n) {\n          if (template.charCodeAt(i) === 37) {\n            string.push(template.slice(j, i));\n            if ((p = d3_time_formatPads[c = template.charAt(++i)]) != null) c = template.charAt(++i);\n            if (f = d3_time_formats[c]) c = f(date, p == null ? c === \"e\" ? \" \" : \"0\" : p);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n        string.push(template.slice(j, i));\n        return string.join(\"\");\n      }\n      format.parse = function(string) {\n        var d = {\n          y: 1900,\n          m: 0,\n          d: 1,\n          H: 0,\n          M: 0,\n          S: 0,\n          L: 0,\n          Z: null\n        }, i = d3_time_parse(d, template, string, 0);\n        if (i != string.length) return null;\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n        var localZ = d.Z != null && d3_date !== d3_date_utc, date = new (localZ ? d3_date_utc : d3_date)();\n        if (\"j\" in d) date.setFullYear(d.y, 0, d.j); else if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          date.setFullYear(d.y, 0, 1);\n          date.setFullYear(d.y, 0, \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (date.getDay() + 5) % 7 : d.w + d.U * 7 - (date.getDay() + 6) % 7);\n        } else date.setFullYear(d.y, d.m, d.d);\n        date.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L);\n        return localZ ? date._ : date;\n      };\n      format.toString = function() {\n        return template;\n      };\n      return format;\n    }\n    function d3_time_parse(date, template, string, j) {\n      var c, p, t, i = 0, n = template.length, m = string.length;\n      while (i < n) {\n        if (j >= m) return -1;\n        c = template.charCodeAt(i++);\n        if (c === 37) {\n          t = template.charAt(i++);\n          p = d3_time_parsers[t in d3_time_formatPads ? template.charAt(i++) : t];\n          if (!p || (j = p(date, string, j)) < 0) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n      return j;\n    }\n    d3_time_format.utc = function(template) {\n      var local = d3_time_format(template);\n      function format(date) {\n        try {\n          d3_date = d3_date_utc;\n          var utc = new d3_date();\n          utc._ = date;\n          return local(utc);\n        } finally {\n          d3_date = Date;\n        }\n      }\n      format.parse = function(string) {\n        try {\n          d3_date = d3_date_utc;\n          var date = local.parse(string);\n          return date && date._;\n        } finally {\n          d3_date = Date;\n        }\n      };\n      format.toString = local.toString;\n      return format;\n    };\n    d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti;\n    var d3_time_periodLookup = d3.map(), d3_time_dayRe = d3_time_formatRe(locale_days), d3_time_dayLookup = d3_time_formatLookup(locale_days), d3_time_dayAbbrevRe = d3_time_formatRe(locale_shortDays), d3_time_dayAbbrevLookup = d3_time_formatLookup(locale_shortDays), d3_time_monthRe = d3_time_formatRe(locale_months), d3_time_monthLookup = d3_time_formatLookup(locale_months), d3_time_monthAbbrevRe = d3_time_formatRe(locale_shortMonths), d3_time_monthAbbrevLookup = d3_time_formatLookup(locale_shortMonths);\n    locale_periods.forEach(function(p, i) {\n      d3_time_periodLookup.set(p.toLowerCase(), i);\n    });\n    var d3_time_formats = {\n      a: function(d) {\n        return locale_shortDays[d.getDay()];\n      },\n      A: function(d) {\n        return locale_days[d.getDay()];\n      },\n      b: function(d) {\n        return locale_shortMonths[d.getMonth()];\n      },\n      B: function(d) {\n        return locale_months[d.getMonth()];\n      },\n      c: d3_time_format(locale_dateTime),\n      d: function(d, p) {\n        return d3_time_formatPad(d.getDate(), p, 2);\n      },\n      e: function(d, p) {\n        return d3_time_formatPad(d.getDate(), p, 2);\n      },\n      H: function(d, p) {\n        return d3_time_formatPad(d.getHours(), p, 2);\n      },\n      I: function(d, p) {\n        return d3_time_formatPad(d.getHours() % 12 || 12, p, 2);\n      },\n      j: function(d, p) {\n        return d3_time_formatPad(1 + d3_time.dayOfYear(d), p, 3);\n      },\n      L: function(d, p) {\n        return d3_time_formatPad(d.getMilliseconds(), p, 3);\n      },\n      m: function(d, p) {\n        return d3_time_formatPad(d.getMonth() + 1, p, 2);\n      },\n      M: function(d, p) {\n        return d3_time_formatPad(d.getMinutes(), p, 2);\n      },\n      p: function(d) {\n        return locale_periods[+(d.getHours() >= 12)];\n      },\n      S: function(d, p) {\n        return d3_time_formatPad(d.getSeconds(), p, 2);\n      },\n      U: function(d, p) {\n        return d3_time_formatPad(d3_time.sundayOfYear(d), p, 2);\n      },\n      w: function(d) {\n        return d.getDay();\n      },\n      W: function(d, p) {\n        return d3_time_formatPad(d3_time.mondayOfYear(d), p, 2);\n      },\n      x: d3_time_format(locale_date),\n      X: d3_time_format(locale_time),\n      y: function(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 100, p, 2);\n      },\n      Y: function(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 1e4, p, 4);\n      },\n      Z: d3_time_zone,\n      \"%\": function() {\n        return \"%\";\n      }\n    };\n    var d3_time_parsers = {\n      a: d3_time_parseWeekdayAbbrev,\n      A: d3_time_parseWeekday,\n      b: d3_time_parseMonthAbbrev,\n      B: d3_time_parseMonth,\n      c: d3_time_parseLocaleFull,\n      d: d3_time_parseDay,\n      e: d3_time_parseDay,\n      H: d3_time_parseHour24,\n      I: d3_time_parseHour24,\n      j: d3_time_parseDayOfYear,\n      L: d3_time_parseMilliseconds,\n      m: d3_time_parseMonthNumber,\n      M: d3_time_parseMinutes,\n      p: d3_time_parseAmPm,\n      S: d3_time_parseSeconds,\n      U: d3_time_parseWeekNumberSunday,\n      w: d3_time_parseWeekdayNumber,\n      W: d3_time_parseWeekNumberMonday,\n      x: d3_time_parseLocaleDate,\n      X: d3_time_parseLocaleTime,\n      y: d3_time_parseYear,\n      Y: d3_time_parseFullYear,\n      Z: d3_time_parseZone,\n      \"%\": d3_time_parseLiteralPercent\n    };\n    function d3_time_parseWeekdayAbbrev(date, string, i) {\n      d3_time_dayAbbrevRe.lastIndex = 0;\n      var n = d3_time_dayAbbrevRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseWeekday(date, string, i) {\n      d3_time_dayRe.lastIndex = 0;\n      var n = d3_time_dayRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseMonthAbbrev(date, string, i) {\n      d3_time_monthAbbrevRe.lastIndex = 0;\n      var n = d3_time_monthAbbrevRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseMonth(date, string, i) {\n      d3_time_monthRe.lastIndex = 0;\n      var n = d3_time_monthRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseLocaleFull(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.c.toString(), string, i);\n    }\n    function d3_time_parseLocaleDate(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.x.toString(), string, i);\n    }\n    function d3_time_parseLocaleTime(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.X.toString(), string, i);\n    }\n    function d3_time_parseAmPm(date, string, i) {\n      var n = d3_time_periodLookup.get(string.slice(i, i += 2).toLowerCase());\n      return n == null ? -1 : (date.p = n, i);\n    }\n    return d3_time_format;\n  }\n  var d3_time_formatPads = {\n    \"-\": \"\",\n    _: \" \",\n    \"0\": \"0\"\n  }, d3_time_numberRe = /^\\s*\\d+/, d3_time_percentRe = /^%/;\n  function d3_time_formatPad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\", string = (sign ? -value : value) + \"\", length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n  function d3_time_formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(d3.requote).join(\"|\") + \")\", \"i\");\n  }\n  function d3_time_formatLookup(names) {\n    var map = new d3_Map(), i = -1, n = names.length;\n    while (++i < n) map.set(names[i].toLowerCase(), i);\n    return map;\n  }\n  function d3_time_parseWeekdayNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 1));\n    return n ? (date.w = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseWeekNumberSunday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.U = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseWeekNumberMonday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.W = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseFullYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 4));\n    return n ? (date.y = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.y = d3_time_expandYear(+n[0]), i + n[0].length) : -1;\n  }\n  function d3_time_parseZone(date, string, i) {\n    return /^[+-]\\d{4}$/.test(string = string.slice(i, i + 5)) ? (date.Z = -string, \n    i + 5) : -1;\n  }\n  function d3_time_expandYear(d) {\n    return d + (d > 68 ? 1900 : 2e3);\n  }\n  function d3_time_parseMonthNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.m = n[0] - 1, i + n[0].length) : -1;\n  }\n  function d3_time_parseDay(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.d = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseDayOfYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.j = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseHour24(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.H = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseMinutes(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.M = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseSeconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.S = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseMilliseconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.L = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_zone(d) {\n    var z = d.getTimezoneOffset(), zs = z > 0 ? \"-\" : \"+\", zh = abs(z) / 60 | 0, zm = abs(z) % 60;\n    return zs + d3_time_formatPad(zh, \"0\", 2) + d3_time_formatPad(zm, \"0\", 2);\n  }\n  function d3_time_parseLiteralPercent(date, string, i) {\n    d3_time_percentRe.lastIndex = 0;\n    var n = d3_time_percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n  function d3_time_formatMulti(formats) {\n    var n = formats.length, i = -1;\n    while (++i < n) formats[i][0] = this(formats[i][0]);\n    return function(date) {\n      var i = 0, f = formats[i];\n      while (!f[1](date)) f = formats[++i];\n      return f[0](date);\n    };\n  }\n  d3.locale = function(locale) {\n    return {\n      numberFormat: d3_locale_numberFormat(locale),\n      timeFormat: d3_locale_timeFormat(locale)\n    };\n  };\n  var d3_locale_enUS = d3.locale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [ 3 ],\n    currency: [ \"$\", \"\" ],\n    dateTime: \"%a %b %e %X %Y\",\n    date: \"%m/%d/%Y\",\n    time: \"%H:%M:%S\",\n    periods: [ \"AM\", \"PM\" ],\n    days: [ \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\" ],\n    shortDays: [ \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\" ],\n    months: [ \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\" ],\n    shortMonths: [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ]\n  });\n  d3.format = d3_locale_enUS.numberFormat;\n  d3.geo = {};\n  function d3_adder() {}\n  d3_adder.prototype = {\n    s: 0,\n    t: 0,\n    add: function(y) {\n      d3_adderSum(y, this.t, d3_adderTemp);\n      d3_adderSum(d3_adderTemp.s, this.s, this);\n      if (this.s) this.t += d3_adderTemp.t; else this.s = d3_adderTemp.t;\n    },\n    reset: function() {\n      this.s = this.t = 0;\n    },\n    valueOf: function() {\n      return this.s;\n    }\n  };\n  var d3_adderTemp = new d3_adder();\n  function d3_adderSum(a, b, o) {\n    var x = o.s = a + b, bv = x - a, av = x - bv;\n    o.t = a - av + (b - bv);\n  }\n  d3.geo.stream = function(object, listener) {\n    if (object && d3_geo_streamObjectType.hasOwnProperty(object.type)) {\n      d3_geo_streamObjectType[object.type](object, listener);\n    } else {\n      d3_geo_streamGeometry(object, listener);\n    }\n  };\n  function d3_geo_streamGeometry(geometry, listener) {\n    if (geometry && d3_geo_streamGeometryType.hasOwnProperty(geometry.type)) {\n      d3_geo_streamGeometryType[geometry.type](geometry, listener);\n    }\n  }\n  var d3_geo_streamObjectType = {\n    Feature: function(feature, listener) {\n      d3_geo_streamGeometry(feature.geometry, listener);\n    },\n    FeatureCollection: function(object, listener) {\n      var features = object.features, i = -1, n = features.length;\n      while (++i < n) d3_geo_streamGeometry(features[i].geometry, listener);\n    }\n  };\n  var d3_geo_streamGeometryType = {\n    Sphere: function(object, listener) {\n      listener.sphere();\n    },\n    Point: function(object, listener) {\n      object = object.coordinates;\n      listener.point(object[0], object[1], object[2]);\n    },\n    MultiPoint: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) object = coordinates[i], listener.point(object[0], object[1], object[2]);\n    },\n    LineString: function(object, listener) {\n      d3_geo_streamLine(object.coordinates, listener, 0);\n    },\n    MultiLineString: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) d3_geo_streamLine(coordinates[i], listener, 0);\n    },\n    Polygon: function(object, listener) {\n      d3_geo_streamPolygon(object.coordinates, listener);\n    },\n    MultiPolygon: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) d3_geo_streamPolygon(coordinates[i], listener);\n    },\n    GeometryCollection: function(object, listener) {\n      var geometries = object.geometries, i = -1, n = geometries.length;\n      while (++i < n) d3_geo_streamGeometry(geometries[i], listener);\n    }\n  };\n  function d3_geo_streamLine(coordinates, listener, closed) {\n    var i = -1, n = coordinates.length - closed, coordinate;\n    listener.lineStart();\n    while (++i < n) coordinate = coordinates[i], listener.point(coordinate[0], coordinate[1], coordinate[2]);\n    listener.lineEnd();\n  }\n  function d3_geo_streamPolygon(coordinates, listener) {\n    var i = -1, n = coordinates.length;\n    listener.polygonStart();\n    while (++i < n) d3_geo_streamLine(coordinates[i], listener, 1);\n    listener.polygonEnd();\n  }\n  d3.geo.area = function(object) {\n    d3_geo_areaSum = 0;\n    d3.geo.stream(object, d3_geo_area);\n    return d3_geo_areaSum;\n  };\n  var d3_geo_areaSum, d3_geo_areaRingSum = new d3_adder();\n  var d3_geo_area = {\n    sphere: function() {\n      d3_geo_areaSum += 4 * π;\n    },\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function() {\n      d3_geo_areaRingSum.reset();\n      d3_geo_area.lineStart = d3_geo_areaRingStart;\n    },\n    polygonEnd: function() {\n      var area = 2 * d3_geo_areaRingSum;\n      d3_geo_areaSum += area < 0 ? 4 * π + area : area;\n      d3_geo_area.lineStart = d3_geo_area.lineEnd = d3_geo_area.point = d3_noop;\n    }\n  };\n  function d3_geo_areaRingStart() {\n    var λ00, φ00, λ0, cosφ0, sinφ0;\n    d3_geo_area.point = function(λ, φ) {\n      d3_geo_area.point = nextPoint;\n      λ0 = (λ00 = λ) * d3_radians, cosφ0 = Math.cos(φ = (φ00 = φ) * d3_radians / 2 + π / 4), \n      sinφ0 = Math.sin(φ);\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      φ = φ * d3_radians / 2 + π / 4;\n      var dλ = λ - λ0, sdλ = dλ >= 0 ? 1 : -1, adλ = sdλ * dλ, cosφ = Math.cos(φ), sinφ = Math.sin(φ), k = sinφ0 * sinφ, u = cosφ0 * cosφ + k * Math.cos(adλ), v = k * sdλ * Math.sin(adλ);\n      d3_geo_areaRingSum.add(Math.atan2(v, u));\n      λ0 = λ, cosφ0 = cosφ, sinφ0 = sinφ;\n    }\n    d3_geo_area.lineEnd = function() {\n      nextPoint(λ00, φ00);\n    };\n  }\n  function d3_geo_cartesian(spherical) {\n    var λ = spherical[0], φ = spherical[1], cosφ = Math.cos(φ);\n    return [ cosφ * Math.cos(λ), cosφ * Math.sin(λ), Math.sin(φ) ];\n  }\n  function d3_geo_cartesianDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n  }\n  function d3_geo_cartesianCross(a, b) {\n    return [ a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0] ];\n  }\n  function d3_geo_cartesianAdd(a, b) {\n    a[0] += b[0];\n    a[1] += b[1];\n    a[2] += b[2];\n  }\n  function d3_geo_cartesianScale(vector, k) {\n    return [ vector[0] * k, vector[1] * k, vector[2] * k ];\n  }\n  function d3_geo_cartesianNormalize(d) {\n    var l = Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n    d[0] /= l;\n    d[1] /= l;\n    d[2] /= l;\n  }\n  function d3_geo_spherical(cartesian) {\n    return [ Math.atan2(cartesian[1], cartesian[0]), d3_asin(cartesian[2]) ];\n  }\n  function d3_geo_sphericalEqual(a, b) {\n    return abs(a[0] - b[0]) < ε && abs(a[1] - b[1]) < ε;\n  }\n  d3.geo.bounds = function() {\n    var λ0, φ0, λ1, φ1, λ_, λ__, φ__, p0, dλSum, ranges, range;\n    var bound = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        bound.point = ringPoint;\n        bound.lineStart = ringStart;\n        bound.lineEnd = ringEnd;\n        dλSum = 0;\n        d3_geo_area.polygonStart();\n      },\n      polygonEnd: function() {\n        d3_geo_area.polygonEnd();\n        bound.point = point;\n        bound.lineStart = lineStart;\n        bound.lineEnd = lineEnd;\n        if (d3_geo_areaRingSum < 0) λ0 = -(λ1 = 180), φ0 = -(φ1 = 90); else if (dλSum > ε) φ1 = 90; else if (dλSum < -ε) φ0 = -90;\n        range[0] = λ0, range[1] = λ1;\n      }\n    };\n    function point(λ, φ) {\n      ranges.push(range = [ λ0 = λ, λ1 = λ ]);\n      if (φ < φ0) φ0 = φ;\n      if (φ > φ1) φ1 = φ;\n    }\n    function linePoint(λ, φ) {\n      var p = d3_geo_cartesian([ λ * d3_radians, φ * d3_radians ]);\n      if (p0) {\n        var normal = d3_geo_cartesianCross(p0, p), equatorial = [ normal[1], -normal[0], 0 ], inflection = d3_geo_cartesianCross(equatorial, normal);\n        d3_geo_cartesianNormalize(inflection);\n        inflection = d3_geo_spherical(inflection);\n        var dλ = λ - λ_, s = dλ > 0 ? 1 : -1, λi = inflection[0] * d3_degrees * s, antimeridian = abs(dλ) > 180;\n        if (antimeridian ^ (s * λ_ < λi && λi < s * λ)) {\n          var φi = inflection[1] * d3_degrees;\n          if (φi > φ1) φ1 = φi;\n        } else if (λi = (λi + 360) % 360 - 180, antimeridian ^ (s * λ_ < λi && λi < s * λ)) {\n          var φi = -inflection[1] * d3_degrees;\n          if (φi < φ0) φ0 = φi;\n        } else {\n          if (φ < φ0) φ0 = φ;\n          if (φ > φ1) φ1 = φ;\n        }\n        if (antimeridian) {\n          if (λ < λ_) {\n            if (angle(λ0, λ) > angle(λ0, λ1)) λ1 = λ;\n          } else {\n            if (angle(λ, λ1) > angle(λ0, λ1)) λ0 = λ;\n          }\n        } else {\n          if (λ1 >= λ0) {\n            if (λ < λ0) λ0 = λ;\n            if (λ > λ1) λ1 = λ;\n          } else {\n            if (λ > λ_) {\n              if (angle(λ0, λ) > angle(λ0, λ1)) λ1 = λ;\n            } else {\n              if (angle(λ, λ1) > angle(λ0, λ1)) λ0 = λ;\n            }\n          }\n        }\n      } else {\n        point(λ, φ);\n      }\n      p0 = p, λ_ = λ;\n    }\n    function lineStart() {\n      bound.point = linePoint;\n    }\n    function lineEnd() {\n      range[0] = λ0, range[1] = λ1;\n      bound.point = point;\n      p0 = null;\n    }\n    function ringPoint(λ, φ) {\n      if (p0) {\n        var dλ = λ - λ_;\n        dλSum += abs(dλ) > 180 ? dλ + (dλ > 0 ? 360 : -360) : dλ;\n      } else λ__ = λ, φ__ = φ;\n      d3_geo_area.point(λ, φ);\n      linePoint(λ, φ);\n    }\n    function ringStart() {\n      d3_geo_area.lineStart();\n    }\n    function ringEnd() {\n      ringPoint(λ__, φ__);\n      d3_geo_area.lineEnd();\n      if (abs(dλSum) > ε) λ0 = -(λ1 = 180);\n      range[0] = λ0, range[1] = λ1;\n      p0 = null;\n    }\n    function angle(λ0, λ1) {\n      return (λ1 -= λ0) < 0 ? λ1 + 360 : λ1;\n    }\n    function compareRanges(a, b) {\n      return a[0] - b[0];\n    }\n    function withinRange(x, range) {\n      return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n    }\n    return function(feature) {\n      φ1 = λ1 = -(λ0 = φ0 = Infinity);\n      ranges = [];\n      d3.geo.stream(feature, bound);\n      var n = ranges.length;\n      if (n) {\n        ranges.sort(compareRanges);\n        for (var i = 1, a = ranges[0], b, merged = [ a ]; i < n; ++i) {\n          b = ranges[i];\n          if (withinRange(b[0], a) || withinRange(b[1], a)) {\n            if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n            if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n          } else {\n            merged.push(a = b);\n          }\n        }\n        var best = -Infinity, dλ;\n        for (var n = merged.length - 1, i = 0, a = merged[n], b; i <= n; a = b, ++i) {\n          b = merged[i];\n          if ((dλ = angle(a[1], b[0])) > best) best = dλ, λ0 = b[0], λ1 = a[1];\n        }\n      }\n      ranges = range = null;\n      return λ0 === Infinity || φ0 === Infinity ? [ [ NaN, NaN ], [ NaN, NaN ] ] : [ [ λ0, φ0 ], [ λ1, φ1 ] ];\n    };\n  }();\n  d3.geo.centroid = function(object) {\n    d3_geo_centroidW0 = d3_geo_centroidW1 = d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n    d3.geo.stream(object, d3_geo_centroid);\n    var x = d3_geo_centroidX2, y = d3_geo_centroidY2, z = d3_geo_centroidZ2, m = x * x + y * y + z * z;\n    if (m < ε2) {\n      x = d3_geo_centroidX1, y = d3_geo_centroidY1, z = d3_geo_centroidZ1;\n      if (d3_geo_centroidW1 < ε) x = d3_geo_centroidX0, y = d3_geo_centroidY0, z = d3_geo_centroidZ0;\n      m = x * x + y * y + z * z;\n      if (m < ε2) return [ NaN, NaN ];\n    }\n    return [ Math.atan2(y, x) * d3_degrees, d3_asin(z / Math.sqrt(m)) * d3_degrees ];\n  };\n  var d3_geo_centroidW0, d3_geo_centroidW1, d3_geo_centroidX0, d3_geo_centroidY0, d3_geo_centroidZ0, d3_geo_centroidX1, d3_geo_centroidY1, d3_geo_centroidZ1, d3_geo_centroidX2, d3_geo_centroidY2, d3_geo_centroidZ2;\n  var d3_geo_centroid = {\n    sphere: d3_noop,\n    point: d3_geo_centroidPoint,\n    lineStart: d3_geo_centroidLineStart,\n    lineEnd: d3_geo_centroidLineEnd,\n    polygonStart: function() {\n      d3_geo_centroid.lineStart = d3_geo_centroidRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_centroid.lineStart = d3_geo_centroidLineStart;\n    }\n  };\n  function d3_geo_centroidPoint(λ, φ) {\n    λ *= d3_radians;\n    var cosφ = Math.cos(φ *= d3_radians);\n    d3_geo_centroidPointXYZ(cosφ * Math.cos(λ), cosφ * Math.sin(λ), Math.sin(φ));\n  }\n  function d3_geo_centroidPointXYZ(x, y, z) {\n    ++d3_geo_centroidW0;\n    d3_geo_centroidX0 += (x - d3_geo_centroidX0) / d3_geo_centroidW0;\n    d3_geo_centroidY0 += (y - d3_geo_centroidY0) / d3_geo_centroidW0;\n    d3_geo_centroidZ0 += (z - d3_geo_centroidZ0) / d3_geo_centroidW0;\n  }\n  function d3_geo_centroidLineStart() {\n    var x0, y0, z0;\n    d3_geo_centroid.point = function(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians);\n      x0 = cosφ * Math.cos(λ);\n      y0 = cosφ * Math.sin(λ);\n      z0 = Math.sin(φ);\n      d3_geo_centroid.point = nextPoint;\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians), x = cosφ * Math.cos(λ), y = cosφ * Math.sin(λ), z = Math.sin(φ), w = Math.atan2(Math.sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n  function d3_geo_centroidLineEnd() {\n    d3_geo_centroid.point = d3_geo_centroidPoint;\n  }\n  function d3_geo_centroidRingStart() {\n    var λ00, φ00, x0, y0, z0;\n    d3_geo_centroid.point = function(λ, φ) {\n      λ00 = λ, φ00 = φ;\n      d3_geo_centroid.point = nextPoint;\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians);\n      x0 = cosφ * Math.cos(λ);\n      y0 = cosφ * Math.sin(λ);\n      z0 = Math.sin(φ);\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n    d3_geo_centroid.lineEnd = function() {\n      nextPoint(λ00, φ00);\n      d3_geo_centroid.lineEnd = d3_geo_centroidLineEnd;\n      d3_geo_centroid.point = d3_geo_centroidPoint;\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians), x = cosφ * Math.cos(λ), y = cosφ * Math.sin(λ), z = Math.sin(φ), cx = y0 * z - z0 * y, cy = z0 * x - x0 * z, cz = x0 * y - y0 * x, m = Math.sqrt(cx * cx + cy * cy + cz * cz), u = x0 * x + y0 * y + z0 * z, v = m && -d3_acos(u) / m, w = Math.atan2(m, u);\n      d3_geo_centroidX2 += v * cx;\n      d3_geo_centroidY2 += v * cy;\n      d3_geo_centroidZ2 += v * cz;\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n  function d3_geo_compose(a, b) {\n    function compose(x, y) {\n      return x = a(x, y), b(x[0], x[1]);\n    }\n    if (a.invert && b.invert) compose.invert = function(x, y) {\n      return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n    };\n    return compose;\n  }\n  function d3_true() {\n    return true;\n  }\n  function d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener) {\n    var subject = [], clip = [];\n    segments.forEach(function(segment) {\n      if ((n = segment.length - 1) <= 0) return;\n      var n, p0 = segment[0], p1 = segment[n];\n      if (d3_geo_sphericalEqual(p0, p1)) {\n        listener.lineStart();\n        for (var i = 0; i < n; ++i) listener.point((p0 = segment[i])[0], p0[1]);\n        listener.lineEnd();\n        return;\n      }\n      var a = new d3_geo_clipPolygonIntersection(p0, segment, null, true), b = new d3_geo_clipPolygonIntersection(p0, null, a, false);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n      a = new d3_geo_clipPolygonIntersection(p1, segment, null, false);\n      b = new d3_geo_clipPolygonIntersection(p1, null, a, true);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n    });\n    clip.sort(compare);\n    d3_geo_clipPolygonLinkCircular(subject);\n    d3_geo_clipPolygonLinkCircular(clip);\n    if (!subject.length) return;\n    for (var i = 0, entry = clipStartInside, n = clip.length; i < n; ++i) {\n      clip[i].e = entry = !entry;\n    }\n    var start = subject[0], points, point;\n    while (1) {\n      var current = start, isSubject = true;\n      while (current.v) if ((current = current.n) === start) return;\n      points = current.z;\n      listener.lineStart();\n      do {\n        current.v = current.o.v = true;\n        if (current.e) {\n          if (isSubject) {\n            for (var i = 0, n = points.length; i < n; ++i) listener.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.n.x, 1, listener);\n          }\n          current = current.n;\n        } else {\n          if (isSubject) {\n            points = current.p.z;\n            for (var i = points.length - 1; i >= 0; --i) listener.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.p.x, -1, listener);\n          }\n          current = current.p;\n        }\n        current = current.o;\n        points = current.z;\n        isSubject = !isSubject;\n      } while (!current.v);\n      listener.lineEnd();\n    }\n  }\n  function d3_geo_clipPolygonLinkCircular(array) {\n    if (!(n = array.length)) return;\n    var n, i = 0, a = array[0], b;\n    while (++i < n) {\n      a.n = b = array[i];\n      b.p = a;\n      a = b;\n    }\n    a.n = b = array[0];\n    b.p = a;\n  }\n  function d3_geo_clipPolygonIntersection(point, points, other, entry) {\n    this.x = point;\n    this.z = points;\n    this.o = other;\n    this.e = entry;\n    this.v = false;\n    this.n = this.p = null;\n  }\n  function d3_geo_clip(pointVisible, clipLine, interpolate, clipStart) {\n    return function(rotate, listener) {\n      var line = clipLine(listener), rotatedClipStart = rotate.invert(clipStart[0], clipStart[1]);\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          clip.point = pointRing;\n          clip.lineStart = ringStart;\n          clip.lineEnd = ringEnd;\n          segments = [];\n          polygon = [];\n        },\n        polygonEnd: function() {\n          clip.point = point;\n          clip.lineStart = lineStart;\n          clip.lineEnd = lineEnd;\n          segments = d3.merge(segments);\n          var clipStartInside = d3_geo_pointInPolygon(rotatedClipStart, polygon);\n          if (segments.length) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            d3_geo_clipPolygon(segments, d3_geo_clipSort, clipStartInside, interpolate, listener);\n          } else if (clipStartInside) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n            interpolate(null, null, 1, listener);\n            listener.lineEnd();\n          }\n          if (polygonStarted) listener.polygonEnd(), polygonStarted = false;\n          segments = polygon = null;\n        },\n        sphere: function() {\n          listener.polygonStart();\n          listener.lineStart();\n          interpolate(null, null, 1, listener);\n          listener.lineEnd();\n          listener.polygonEnd();\n        }\n      };\n      function point(λ, φ) {\n        var point = rotate(λ, φ);\n        if (pointVisible(λ = point[0], φ = point[1])) listener.point(λ, φ);\n      }\n      function pointLine(λ, φ) {\n        var point = rotate(λ, φ);\n        line.point(point[0], point[1]);\n      }\n      function lineStart() {\n        clip.point = pointLine;\n        line.lineStart();\n      }\n      function lineEnd() {\n        clip.point = point;\n        line.lineEnd();\n      }\n      var segments;\n      var buffer = d3_geo_clipBufferListener(), ringListener = clipLine(buffer), polygonStarted = false, polygon, ring;\n      function pointRing(λ, φ) {\n        ring.push([ λ, φ ]);\n        var point = rotate(λ, φ);\n        ringListener.point(point[0], point[1]);\n      }\n      function ringStart() {\n        ringListener.lineStart();\n        ring = [];\n      }\n      function ringEnd() {\n        pointRing(ring[0][0], ring[0][1]);\n        ringListener.lineEnd();\n        var clean = ringListener.clean(), ringSegments = buffer.buffer(), segment, n = ringSegments.length;\n        ring.pop();\n        polygon.push(ring);\n        ring = null;\n        if (!n) return;\n        if (clean & 1) {\n          segment = ringSegments[0];\n          var n = segment.length - 1, i = -1, point;\n          if (n > 0) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n            while (++i < n) listener.point((point = segment[i])[0], point[1]);\n            listener.lineEnd();\n          }\n          return;\n        }\n        if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n        segments.push(ringSegments.filter(d3_geo_clipSegmentLength1));\n      }\n      return clip;\n    };\n  }\n  function d3_geo_clipSegmentLength1(segment) {\n    return segment.length > 1;\n  }\n  function d3_geo_clipBufferListener() {\n    var lines = [], line;\n    return {\n      lineStart: function() {\n        lines.push(line = []);\n      },\n      point: function(λ, φ) {\n        line.push([ λ, φ ]);\n      },\n      lineEnd: d3_noop,\n      buffer: function() {\n        var buffer = lines;\n        lines = [];\n        line = null;\n        return buffer;\n      },\n      rejoin: function() {\n        if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n      }\n    };\n  }\n  function d3_geo_clipSort(a, b) {\n    return ((a = a.x)[0] < 0 ? a[1] - halfπ - ε : halfπ - a[1]) - ((b = b.x)[0] < 0 ? b[1] - halfπ - ε : halfπ - b[1]);\n  }\n  var d3_geo_clipAntimeridian = d3_geo_clip(d3_true, d3_geo_clipAntimeridianLine, d3_geo_clipAntimeridianInterpolate, [ -π, -π / 2 ]);\n  function d3_geo_clipAntimeridianLine(listener) {\n    var λ0 = NaN, φ0 = NaN, sλ0 = NaN, clean;\n    return {\n      lineStart: function() {\n        listener.lineStart();\n        clean = 1;\n      },\n      point: function(λ1, φ1) {\n        var sλ1 = λ1 > 0 ? π : -π, dλ = abs(λ1 - λ0);\n        if (abs(dλ - π) < ε) {\n          listener.point(λ0, φ0 = (φ0 + φ1) / 2 > 0 ? halfπ : -halfπ);\n          listener.point(sλ0, φ0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(sλ1, φ0);\n          listener.point(λ1, φ0);\n          clean = 0;\n        } else if (sλ0 !== sλ1 && dλ >= π) {\n          if (abs(λ0 - sλ0) < ε) λ0 -= sλ0 * ε;\n          if (abs(λ1 - sλ1) < ε) λ1 -= sλ1 * ε;\n          φ0 = d3_geo_clipAntimeridianIntersect(λ0, φ0, λ1, φ1);\n          listener.point(sλ0, φ0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(sλ1, φ0);\n          clean = 0;\n        }\n        listener.point(λ0 = λ1, φ0 = φ1);\n        sλ0 = sλ1;\n      },\n      lineEnd: function() {\n        listener.lineEnd();\n        λ0 = φ0 = NaN;\n      },\n      clean: function() {\n        return 2 - clean;\n      }\n    };\n  }\n  function d3_geo_clipAntimeridianIntersect(λ0, φ0, λ1, φ1) {\n    var cosφ0, cosφ1, sinλ0_λ1 = Math.sin(λ0 - λ1);\n    return abs(sinλ0_λ1) > ε ? Math.atan((Math.sin(φ0) * (cosφ1 = Math.cos(φ1)) * Math.sin(λ1) - Math.sin(φ1) * (cosφ0 = Math.cos(φ0)) * Math.sin(λ0)) / (cosφ0 * cosφ1 * sinλ0_λ1)) : (φ0 + φ1) / 2;\n  }\n  function d3_geo_clipAntimeridianInterpolate(from, to, direction, listener) {\n    var φ;\n    if (from == null) {\n      φ = direction * halfπ;\n      listener.point(-π, φ);\n      listener.point(0, φ);\n      listener.point(π, φ);\n      listener.point(π, 0);\n      listener.point(π, -φ);\n      listener.point(0, -φ);\n      listener.point(-π, -φ);\n      listener.point(-π, 0);\n      listener.point(-π, φ);\n    } else if (abs(from[0] - to[0]) > ε) {\n      var s = from[0] < to[0] ? π : -π;\n      φ = direction * s / 2;\n      listener.point(-s, φ);\n      listener.point(0, φ);\n      listener.point(s, φ);\n    } else {\n      listener.point(to[0], to[1]);\n    }\n  }\n  function d3_geo_pointInPolygon(point, polygon) {\n    var meridian = point[0], parallel = point[1], meridianNormal = [ Math.sin(meridian), -Math.cos(meridian), 0 ], polarAngle = 0, winding = 0;\n    d3_geo_areaRingSum.reset();\n    for (var i = 0, n = polygon.length; i < n; ++i) {\n      var ring = polygon[i], m = ring.length;\n      if (!m) continue;\n      var point0 = ring[0], λ0 = point0[0], φ0 = point0[1] / 2 + π / 4, sinφ0 = Math.sin(φ0), cosφ0 = Math.cos(φ0), j = 1;\n      while (true) {\n        if (j === m) j = 0;\n        point = ring[j];\n        var λ = point[0], φ = point[1] / 2 + π / 4, sinφ = Math.sin(φ), cosφ = Math.cos(φ), dλ = λ - λ0, sdλ = dλ >= 0 ? 1 : -1, adλ = sdλ * dλ, antimeridian = adλ > π, k = sinφ0 * sinφ;\n        d3_geo_areaRingSum.add(Math.atan2(k * sdλ * Math.sin(adλ), cosφ0 * cosφ + k * Math.cos(adλ)));\n        polarAngle += antimeridian ? dλ + sdλ * τ : dλ;\n        if (antimeridian ^ λ0 >= meridian ^ λ >= meridian) {\n          var arc = d3_geo_cartesianCross(d3_geo_cartesian(point0), d3_geo_cartesian(point));\n          d3_geo_cartesianNormalize(arc);\n          var intersection = d3_geo_cartesianCross(meridianNormal, arc);\n          d3_geo_cartesianNormalize(intersection);\n          var φarc = (antimeridian ^ dλ >= 0 ? -1 : 1) * d3_asin(intersection[2]);\n          if (parallel > φarc || parallel === φarc && (arc[0] || arc[1])) {\n            winding += antimeridian ^ dλ >= 0 ? 1 : -1;\n          }\n        }\n        if (!j++) break;\n        λ0 = λ, sinφ0 = sinφ, cosφ0 = cosφ, point0 = point;\n      }\n    }\n    return (polarAngle < -ε || polarAngle < ε && d3_geo_areaRingSum < -ε) ^ winding & 1;\n  }\n  function d3_geo_clipCircle(radius) {\n    var cr = Math.cos(radius), smallRadius = cr > 0, notHemisphere = abs(cr) > ε, interpolate = d3_geo_circleInterpolate(radius, 6 * d3_radians);\n    return d3_geo_clip(visible, clipLine, interpolate, smallRadius ? [ 0, -radius ] : [ -π, radius - π ]);\n    function visible(λ, φ) {\n      return Math.cos(λ) * Math.cos(φ) > cr;\n    }\n    function clipLine(listener) {\n      var point0, c0, v0, v00, clean;\n      return {\n        lineStart: function() {\n          v00 = v0 = false;\n          clean = 1;\n        },\n        point: function(λ, φ) {\n          var point1 = [ λ, φ ], point2, v = visible(λ, φ), c = smallRadius ? v ? 0 : code(λ, φ) : v ? code(λ + (λ < 0 ? π : -π), φ) : 0;\n          if (!point0 && (v00 = v0 = v)) listener.lineStart();\n          if (v !== v0) {\n            point2 = intersect(point0, point1);\n            if (d3_geo_sphericalEqual(point0, point2) || d3_geo_sphericalEqual(point1, point2)) {\n              point1[0] += ε;\n              point1[1] += ε;\n              v = visible(point1[0], point1[1]);\n            }\n          }\n          if (v !== v0) {\n            clean = 0;\n            if (v) {\n              listener.lineStart();\n              point2 = intersect(point1, point0);\n              listener.point(point2[0], point2[1]);\n            } else {\n              point2 = intersect(point0, point1);\n              listener.point(point2[0], point2[1]);\n              listener.lineEnd();\n            }\n            point0 = point2;\n          } else if (notHemisphere && point0 && smallRadius ^ v) {\n            var t;\n            if (!(c & c0) && (t = intersect(point1, point0, true))) {\n              clean = 0;\n              if (smallRadius) {\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n              } else {\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n              }\n            }\n          }\n          if (v && (!point0 || !d3_geo_sphericalEqual(point0, point1))) {\n            listener.point(point1[0], point1[1]);\n          }\n          point0 = point1, v0 = v, c0 = c;\n        },\n        lineEnd: function() {\n          if (v0) listener.lineEnd();\n          point0 = null;\n        },\n        clean: function() {\n          return clean | (v00 && v0) << 1;\n        }\n      };\n    }\n    function intersect(a, b, two) {\n      var pa = d3_geo_cartesian(a), pb = d3_geo_cartesian(b);\n      var n1 = [ 1, 0, 0 ], n2 = d3_geo_cartesianCross(pa, pb), n2n2 = d3_geo_cartesianDot(n2, n2), n1n2 = n2[0], determinant = n2n2 - n1n2 * n1n2;\n      if (!determinant) return !two && a;\n      var c1 = cr * n2n2 / determinant, c2 = -cr * n1n2 / determinant, n1xn2 = d3_geo_cartesianCross(n1, n2), A = d3_geo_cartesianScale(n1, c1), B = d3_geo_cartesianScale(n2, c2);\n      d3_geo_cartesianAdd(A, B);\n      var u = n1xn2, w = d3_geo_cartesianDot(A, u), uu = d3_geo_cartesianDot(u, u), t2 = w * w - uu * (d3_geo_cartesianDot(A, A) - 1);\n      if (t2 < 0) return;\n      var t = Math.sqrt(t2), q = d3_geo_cartesianScale(u, (-w - t) / uu);\n      d3_geo_cartesianAdd(q, A);\n      q = d3_geo_spherical(q);\n      if (!two) return q;\n      var λ0 = a[0], λ1 = b[0], φ0 = a[1], φ1 = b[1], z;\n      if (λ1 < λ0) z = λ0, λ0 = λ1, λ1 = z;\n      var δλ = λ1 - λ0, polar = abs(δλ - π) < ε, meridian = polar || δλ < ε;\n      if (!polar && φ1 < φ0) z = φ0, φ0 = φ1, φ1 = z;\n      if (meridian ? polar ? φ0 + φ1 > 0 ^ q[1] < (abs(q[0] - λ0) < ε ? φ0 : φ1) : φ0 <= q[1] && q[1] <= φ1 : δλ > π ^ (λ0 <= q[0] && q[0] <= λ1)) {\n        var q1 = d3_geo_cartesianScale(u, (-w + t) / uu);\n        d3_geo_cartesianAdd(q1, A);\n        return [ q, d3_geo_spherical(q1) ];\n      }\n    }\n    function code(λ, φ) {\n      var r = smallRadius ? radius : π - radius, code = 0;\n      if (λ < -r) code |= 1; else if (λ > r) code |= 2;\n      if (φ < -r) code |= 4; else if (φ > r) code |= 8;\n      return code;\n    }\n  }\n  function d3_geom_clipLine(x0, y0, x1, y1) {\n    return function(line) {\n      var a = line.a, b = line.b, ax = a.x, ay = a.y, bx = b.x, by = b.y, t0 = 0, t1 = 1, dx = bx - ax, dy = by - ay, r;\n      r = x0 - ax;\n      if (!dx && r > 0) return;\n      r /= dx;\n      if (dx < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dx > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n      r = x1 - ax;\n      if (!dx && r < 0) return;\n      r /= dx;\n      if (dx < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dx > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n      r = y0 - ay;\n      if (!dy && r > 0) return;\n      r /= dy;\n      if (dy < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dy > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n      r = y1 - ay;\n      if (!dy && r < 0) return;\n      r /= dy;\n      if (dy < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dy > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n      if (t0 > 0) line.a = {\n        x: ax + t0 * dx,\n        y: ay + t0 * dy\n      };\n      if (t1 < 1) line.b = {\n        x: ax + t1 * dx,\n        y: ay + t1 * dy\n      };\n      return line;\n    };\n  }\n  var d3_geo_clipExtentMAX = 1e9;\n  d3.geo.clipExtent = function() {\n    var x0, y0, x1, y1, stream, clip, clipExtent = {\n      stream: function(output) {\n        if (stream) stream.valid = false;\n        stream = clip(output);\n        stream.valid = true;\n        return stream;\n      },\n      extent: function(_) {\n        if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];\n        clip = d3_geo_clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]);\n        if (stream) stream.valid = false, stream = null;\n        return clipExtent;\n      }\n    };\n    return clipExtent.extent([ [ 0, 0 ], [ 960, 500 ] ]);\n  };\n  function d3_geo_clipExtent(x0, y0, x1, y1) {\n    return function(listener) {\n      var listener_ = listener, bufferListener = d3_geo_clipBufferListener(), clipLine = d3_geom_clipLine(x0, y0, x1, y1), segments, polygon, ring;\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          listener = bufferListener;\n          segments = [];\n          polygon = [];\n          clean = true;\n        },\n        polygonEnd: function() {\n          listener = listener_;\n          segments = d3.merge(segments);\n          var clipStartInside = insidePolygon([ x0, y1 ]), inside = clean && clipStartInside, visible = segments.length;\n          if (inside || visible) {\n            listener.polygonStart();\n            if (inside) {\n              listener.lineStart();\n              interpolate(null, null, 1, listener);\n              listener.lineEnd();\n            }\n            if (visible) {\n              d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener);\n            }\n            listener.polygonEnd();\n          }\n          segments = polygon = ring = null;\n        }\n      };\n      function insidePolygon(p) {\n        var wn = 0, n = polygon.length, y = p[1];\n        for (var i = 0; i < n; ++i) {\n          for (var j = 1, v = polygon[i], m = v.length, a = v[0], b; j < m; ++j) {\n            b = v[j];\n            if (a[1] <= y) {\n              if (b[1] > y && d3_cross2d(a, b, p) > 0) ++wn;\n            } else {\n              if (b[1] <= y && d3_cross2d(a, b, p) < 0) --wn;\n            }\n            a = b;\n          }\n        }\n        return wn !== 0;\n      }\n      function interpolate(from, to, direction, listener) {\n        var a = 0, a1 = 0;\n        if (from == null || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoints(from, to) < 0 ^ direction > 0) {\n          do {\n            listener.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n          } while ((a = (a + direction + 4) % 4) !== a1);\n        } else {\n          listener.point(to[0], to[1]);\n        }\n      }\n      function pointVisible(x, y) {\n        return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n      }\n      function point(x, y) {\n        if (pointVisible(x, y)) listener.point(x, y);\n      }\n      var x__, y__, v__, x_, y_, v_, first, clean;\n      function lineStart() {\n        clip.point = linePoint;\n        if (polygon) polygon.push(ring = []);\n        first = true;\n        v_ = false;\n        x_ = y_ = NaN;\n      }\n      function lineEnd() {\n        if (segments) {\n          linePoint(x__, y__);\n          if (v__ && v_) bufferListener.rejoin();\n          segments.push(bufferListener.buffer());\n        }\n        clip.point = point;\n        if (v_) listener.lineEnd();\n      }\n      function linePoint(x, y) {\n        x = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, x));\n        y = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, y));\n        var v = pointVisible(x, y);\n        if (polygon) ring.push([ x, y ]);\n        if (first) {\n          x__ = x, y__ = y, v__ = v;\n          first = false;\n          if (v) {\n            listener.lineStart();\n            listener.point(x, y);\n          }\n        } else {\n          if (v && v_) listener.point(x, y); else {\n            var l = {\n              a: {\n                x: x_,\n                y: y_\n              },\n              b: {\n                x: x,\n                y: y\n              }\n            };\n            if (clipLine(l)) {\n              if (!v_) {\n                listener.lineStart();\n                listener.point(l.a.x, l.a.y);\n              }\n              listener.point(l.b.x, l.b.y);\n              if (!v) listener.lineEnd();\n              clean = false;\n            } else if (v) {\n              listener.lineStart();\n              listener.point(x, y);\n              clean = false;\n            }\n          }\n        }\n        x_ = x, y_ = y, v_ = v;\n      }\n      return clip;\n    };\n    function corner(p, direction) {\n      return abs(p[0] - x0) < ε ? direction > 0 ? 0 : 3 : abs(p[0] - x1) < ε ? direction > 0 ? 2 : 1 : abs(p[1] - y0) < ε ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2;\n    }\n    function compare(a, b) {\n      return comparePoints(a.x, b.x);\n    }\n    function comparePoints(a, b) {\n      var ca = corner(a, 1), cb = corner(b, 1);\n      return ca !== cb ? ca - cb : ca === 0 ? b[1] - a[1] : ca === 1 ? a[0] - b[0] : ca === 2 ? a[1] - b[1] : b[0] - a[0];\n    }\n  }\n  function d3_geo_conic(projectAt) {\n    var φ0 = 0, φ1 = π / 3, m = d3_geo_projectionMutator(projectAt), p = m(φ0, φ1);\n    p.parallels = function(_) {\n      if (!arguments.length) return [ φ0 / π * 180, φ1 / π * 180 ];\n      return m(φ0 = _[0] * π / 180, φ1 = _[1] * π / 180);\n    };\n    return p;\n  }\n  function d3_geo_conicEqualArea(φ0, φ1) {\n    var sinφ0 = Math.sin(φ0), n = (sinφ0 + Math.sin(φ1)) / 2, C = 1 + sinφ0 * (2 * n - sinφ0), ρ0 = Math.sqrt(C) / n;\n    function forward(λ, φ) {\n      var ρ = Math.sqrt(C - 2 * n * Math.sin(φ)) / n;\n      return [ ρ * Math.sin(λ *= n), ρ0 - ρ * Math.cos(λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = ρ0 - y;\n      return [ Math.atan2(x, ρ0_y) / n, d3_asin((C - (x * x + ρ0_y * ρ0_y) * n * n) / (2 * n)) ];\n    };\n    return forward;\n  }\n  (d3.geo.conicEqualArea = function() {\n    return d3_geo_conic(d3_geo_conicEqualArea);\n  }).raw = d3_geo_conicEqualArea;\n  d3.geo.albers = function() {\n    return d3.geo.conicEqualArea().rotate([ 96, 0 ]).center([ -.6, 38.7 ]).parallels([ 29.5, 45.5 ]).scale(1070);\n  };\n  d3.geo.albersUsa = function() {\n    var lower48 = d3.geo.albers();\n    var alaska = d3.geo.conicEqualArea().rotate([ 154, 0 ]).center([ -2, 58.5 ]).parallels([ 55, 65 ]);\n    var hawaii = d3.geo.conicEqualArea().rotate([ 157, 0 ]).center([ -3, 19.9 ]).parallels([ 8, 18 ]);\n    var point, pointStream = {\n      point: function(x, y) {\n        point = [ x, y ];\n      }\n    }, lower48Point, alaskaPoint, hawaiiPoint;\n    function albersUsa(coordinates) {\n      var x = coordinates[0], y = coordinates[1];\n      point = null;\n      (lower48Point(x, y), point) || (alaskaPoint(x, y), point) || hawaiiPoint(x, y);\n      return point;\n    }\n    albersUsa.invert = function(coordinates) {\n      var k = lower48.scale(), t = lower48.translate(), x = (coordinates[0] - t[0]) / k, y = (coordinates[1] - t[1]) / k;\n      return (y >= .12 && y < .234 && x >= -.425 && x < -.214 ? alaska : y >= .166 && y < .234 && x >= -.214 && x < -.115 ? hawaii : lower48).invert(coordinates);\n    };\n    albersUsa.stream = function(stream) {\n      var lower48Stream = lower48.stream(stream), alaskaStream = alaska.stream(stream), hawaiiStream = hawaii.stream(stream);\n      return {\n        point: function(x, y) {\n          lower48Stream.point(x, y);\n          alaskaStream.point(x, y);\n          hawaiiStream.point(x, y);\n        },\n        sphere: function() {\n          lower48Stream.sphere();\n          alaskaStream.sphere();\n          hawaiiStream.sphere();\n        },\n        lineStart: function() {\n          lower48Stream.lineStart();\n          alaskaStream.lineStart();\n          hawaiiStream.lineStart();\n        },\n        lineEnd: function() {\n          lower48Stream.lineEnd();\n          alaskaStream.lineEnd();\n          hawaiiStream.lineEnd();\n        },\n        polygonStart: function() {\n          lower48Stream.polygonStart();\n          alaskaStream.polygonStart();\n          hawaiiStream.polygonStart();\n        },\n        polygonEnd: function() {\n          lower48Stream.polygonEnd();\n          alaskaStream.polygonEnd();\n          hawaiiStream.polygonEnd();\n        }\n      };\n    };\n    albersUsa.precision = function(_) {\n      if (!arguments.length) return lower48.precision();\n      lower48.precision(_);\n      alaska.precision(_);\n      hawaii.precision(_);\n      return albersUsa;\n    };\n    albersUsa.scale = function(_) {\n      if (!arguments.length) return lower48.scale();\n      lower48.scale(_);\n      alaska.scale(_ * .35);\n      hawaii.scale(_);\n      return albersUsa.translate(lower48.translate());\n    };\n    albersUsa.translate = function(_) {\n      if (!arguments.length) return lower48.translate();\n      var k = lower48.scale(), x = +_[0], y = +_[1];\n      lower48Point = lower48.translate(_).clipExtent([ [ x - .455 * k, y - .238 * k ], [ x + .455 * k, y + .238 * k ] ]).stream(pointStream).point;\n      alaskaPoint = alaska.translate([ x - .307 * k, y + .201 * k ]).clipExtent([ [ x - .425 * k + ε, y + .12 * k + ε ], [ x - .214 * k - ε, y + .234 * k - ε ] ]).stream(pointStream).point;\n      hawaiiPoint = hawaii.translate([ x - .205 * k, y + .212 * k ]).clipExtent([ [ x - .214 * k + ε, y + .166 * k + ε ], [ x - .115 * k - ε, y + .234 * k - ε ] ]).stream(pointStream).point;\n      return albersUsa;\n    };\n    return albersUsa.scale(1070);\n  };\n  var d3_geo_pathAreaSum, d3_geo_pathAreaPolygon, d3_geo_pathArea = {\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function() {\n      d3_geo_pathAreaPolygon = 0;\n      d3_geo_pathArea.lineStart = d3_geo_pathAreaRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_pathArea.lineStart = d3_geo_pathArea.lineEnd = d3_geo_pathArea.point = d3_noop;\n      d3_geo_pathAreaSum += abs(d3_geo_pathAreaPolygon / 2);\n    }\n  };\n  function d3_geo_pathAreaRingStart() {\n    var x00, y00, x0, y0;\n    d3_geo_pathArea.point = function(x, y) {\n      d3_geo_pathArea.point = nextPoint;\n      x00 = x0 = x, y00 = y0 = y;\n    };\n    function nextPoint(x, y) {\n      d3_geo_pathAreaPolygon += y0 * x - x0 * y;\n      x0 = x, y0 = y;\n    }\n    d3_geo_pathArea.lineEnd = function() {\n      nextPoint(x00, y00);\n    };\n  }\n  var d3_geo_pathBoundsX0, d3_geo_pathBoundsY0, d3_geo_pathBoundsX1, d3_geo_pathBoundsY1;\n  var d3_geo_pathBounds = {\n    point: d3_geo_pathBoundsPoint,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n  function d3_geo_pathBoundsPoint(x, y) {\n    if (x < d3_geo_pathBoundsX0) d3_geo_pathBoundsX0 = x;\n    if (x > d3_geo_pathBoundsX1) d3_geo_pathBoundsX1 = x;\n    if (y < d3_geo_pathBoundsY0) d3_geo_pathBoundsY0 = y;\n    if (y > d3_geo_pathBoundsY1) d3_geo_pathBoundsY1 = y;\n  }\n  function d3_geo_pathBuffer() {\n    var pointCircle = d3_geo_pathBufferCircle(4.5), buffer = [];\n    var stream = {\n      point: point,\n      lineStart: function() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function(_) {\n        pointCircle = d3_geo_pathBufferCircle(_);\n        return stream;\n      },\n      result: function() {\n        if (buffer.length) {\n          var result = buffer.join(\"\");\n          buffer = [];\n          return result;\n        }\n      }\n    };\n    function point(x, y) {\n      buffer.push(\"M\", x, \",\", y, pointCircle);\n    }\n    function pointLineStart(x, y) {\n      buffer.push(\"M\", x, \",\", y);\n      stream.point = pointLine;\n    }\n    function pointLine(x, y) {\n      buffer.push(\"L\", x, \",\", y);\n    }\n    function lineEnd() {\n      stream.point = point;\n    }\n    function lineEndPolygon() {\n      buffer.push(\"Z\");\n    }\n    return stream;\n  }\n  function d3_geo_pathBufferCircle(radius) {\n    return \"m0,\" + radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius + \"z\";\n  }\n  var d3_geo_pathCentroid = {\n    point: d3_geo_pathCentroidPoint,\n    lineStart: d3_geo_pathCentroidLineStart,\n    lineEnd: d3_geo_pathCentroidLineEnd,\n    polygonStart: function() {\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidLineStart;\n      d3_geo_pathCentroid.lineEnd = d3_geo_pathCentroidLineEnd;\n    }\n  };\n  function d3_geo_pathCentroidPoint(x, y) {\n    d3_geo_centroidX0 += x;\n    d3_geo_centroidY0 += y;\n    ++d3_geo_centroidZ0;\n  }\n  function d3_geo_pathCentroidLineStart() {\n    var x0, y0;\n    d3_geo_pathCentroid.point = function(x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    };\n    function nextPoint(x, y) {\n      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n  }\n  function d3_geo_pathCentroidLineEnd() {\n    d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n  }\n  function d3_geo_pathCentroidRingStart() {\n    var x00, y00, x0, y0;\n    d3_geo_pathCentroid.point = function(x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x00 = x0 = x, y00 = y0 = y);\n    };\n    function nextPoint(x, y) {\n      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      z = y0 * x - x0 * y;\n      d3_geo_centroidX2 += z * (x0 + x);\n      d3_geo_centroidY2 += z * (y0 + y);\n      d3_geo_centroidZ2 += z * 3;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n    d3_geo_pathCentroid.lineEnd = function() {\n      nextPoint(x00, y00);\n    };\n  }\n  function d3_geo_pathContext(context) {\n    var pointRadius = 4.5;\n    var stream = {\n      point: point,\n      lineStart: function() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function(_) {\n        pointRadius = _;\n        return stream;\n      },\n      result: d3_noop\n    };\n    function point(x, y) {\n      context.moveTo(x + pointRadius, y);\n      context.arc(x, y, pointRadius, 0, τ);\n    }\n    function pointLineStart(x, y) {\n      context.moveTo(x, y);\n      stream.point = pointLine;\n    }\n    function pointLine(x, y) {\n      context.lineTo(x, y);\n    }\n    function lineEnd() {\n      stream.point = point;\n    }\n    function lineEndPolygon() {\n      context.closePath();\n    }\n    return stream;\n  }\n  function d3_geo_resample(project) {\n    var δ2 = .5, cosMinDistance = Math.cos(30 * d3_radians), maxDepth = 16;\n    function resample(stream) {\n      return (maxDepth ? resampleRecursive : resampleNone)(stream);\n    }\n    function resampleNone(stream) {\n      return d3_geo_transformPoint(stream, function(x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      });\n    }\n    function resampleRecursive(stream) {\n      var λ00, φ00, x00, y00, a00, b00, c00, λ0, x0, y0, a0, b0, c0;\n      var resample = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          stream.polygonStart();\n          resample.lineStart = ringStart;\n        },\n        polygonEnd: function() {\n          stream.polygonEnd();\n          resample.lineStart = lineStart;\n        }\n      };\n      function point(x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      }\n      function lineStart() {\n        x0 = NaN;\n        resample.point = linePoint;\n        stream.lineStart();\n      }\n      function linePoint(λ, φ) {\n        var c = d3_geo_cartesian([ λ, φ ]), p = project(λ, φ);\n        resampleLineTo(x0, y0, λ0, a0, b0, c0, x0 = p[0], y0 = p[1], λ0 = λ, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n        stream.point(x0, y0);\n      }\n      function lineEnd() {\n        resample.point = point;\n        stream.lineEnd();\n      }\n      function ringStart() {\n        lineStart();\n        resample.point = ringPoint;\n        resample.lineEnd = ringEnd;\n      }\n      function ringPoint(λ, φ) {\n        linePoint(λ00 = λ, φ00 = φ), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n        resample.point = linePoint;\n      }\n      function ringEnd() {\n        resampleLineTo(x0, y0, λ0, a0, b0, c0, x00, y00, λ00, a00, b00, c00, maxDepth, stream);\n        resample.lineEnd = lineEnd;\n        lineEnd();\n      }\n      return resample;\n    }\n    function resampleLineTo(x0, y0, λ0, a0, b0, c0, x1, y1, λ1, a1, b1, c1, depth, stream) {\n      var dx = x1 - x0, dy = y1 - y0, d2 = dx * dx + dy * dy;\n      if (d2 > 4 * δ2 && depth--) {\n        var a = a0 + a1, b = b0 + b1, c = c0 + c1, m = Math.sqrt(a * a + b * b + c * c), φ2 = Math.asin(c /= m), λ2 = abs(abs(c) - 1) < ε || abs(λ0 - λ1) < ε ? (λ0 + λ1) / 2 : Math.atan2(b, a), p = project(λ2, φ2), x2 = p[0], y2 = p[1], dx2 = x2 - x0, dy2 = y2 - y0, dz = dy * dx2 - dx * dy2;\n        if (dz * dz / d2 > δ2 || abs((dx * dx2 + dy * dy2) / d2 - .5) > .3 || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) {\n          resampleLineTo(x0, y0, λ0, a0, b0, c0, x2, y2, λ2, a /= m, b /= m, c, depth, stream);\n          stream.point(x2, y2);\n          resampleLineTo(x2, y2, λ2, a, b, c, x1, y1, λ1, a1, b1, c1, depth, stream);\n        }\n      }\n    }\n    resample.precision = function(_) {\n      if (!arguments.length) return Math.sqrt(δ2);\n      maxDepth = (δ2 = _ * _) > 0 && 16;\n      return resample;\n    };\n    return resample;\n  }\n  d3.geo.path = function() {\n    var pointRadius = 4.5, projection, context, projectStream, contextStream, cacheStream;\n    function path(object) {\n      if (object) {\n        if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n        if (!cacheStream || !cacheStream.valid) cacheStream = projectStream(contextStream);\n        d3.geo.stream(object, cacheStream);\n      }\n      return contextStream.result();\n    }\n    path.area = function(object) {\n      d3_geo_pathAreaSum = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathArea));\n      return d3_geo_pathAreaSum;\n    };\n    path.centroid = function(object) {\n      d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathCentroid));\n      return d3_geo_centroidZ2 ? [ d3_geo_centroidX2 / d3_geo_centroidZ2, d3_geo_centroidY2 / d3_geo_centroidZ2 ] : d3_geo_centroidZ1 ? [ d3_geo_centroidX1 / d3_geo_centroidZ1, d3_geo_centroidY1 / d3_geo_centroidZ1 ] : d3_geo_centroidZ0 ? [ d3_geo_centroidX0 / d3_geo_centroidZ0, d3_geo_centroidY0 / d3_geo_centroidZ0 ] : [ NaN, NaN ];\n    };\n    path.bounds = function(object) {\n      d3_geo_pathBoundsX1 = d3_geo_pathBoundsY1 = -(d3_geo_pathBoundsX0 = d3_geo_pathBoundsY0 = Infinity);\n      d3.geo.stream(object, projectStream(d3_geo_pathBounds));\n      return [ [ d3_geo_pathBoundsX0, d3_geo_pathBoundsY0 ], [ d3_geo_pathBoundsX1, d3_geo_pathBoundsY1 ] ];\n    };\n    path.projection = function(_) {\n      if (!arguments.length) return projection;\n      projectStream = (projection = _) ? _.stream || d3_geo_pathProjectStream(_) : d3_identity;\n      return reset();\n    };\n    path.context = function(_) {\n      if (!arguments.length) return context;\n      contextStream = (context = _) == null ? new d3_geo_pathBuffer() : new d3_geo_pathContext(_);\n      if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n      return reset();\n    };\n    path.pointRadius = function(_) {\n      if (!arguments.length) return pointRadius;\n      pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n      return path;\n    };\n    function reset() {\n      cacheStream = null;\n      return path;\n    }\n    return path.projection(d3.geo.albersUsa()).context(null);\n  };\n  function d3_geo_pathProjectStream(project) {\n    var resample = d3_geo_resample(function(x, y) {\n      return project([ x * d3_degrees, y * d3_degrees ]);\n    });\n    return function(stream) {\n      return d3_geo_projectionRadians(resample(stream));\n    };\n  }\n  d3.geo.transform = function(methods) {\n    return {\n      stream: function(stream) {\n        var transform = new d3_geo_transform(stream);\n        for (var k in methods) transform[k] = methods[k];\n        return transform;\n      }\n    };\n  };\n  function d3_geo_transform(stream) {\n    this.stream = stream;\n  }\n  d3_geo_transform.prototype = {\n    point: function(x, y) {\n      this.stream.point(x, y);\n    },\n    sphere: function() {\n      this.stream.sphere();\n    },\n    lineStart: function() {\n      this.stream.lineStart();\n    },\n    lineEnd: function() {\n      this.stream.lineEnd();\n    },\n    polygonStart: function() {\n      this.stream.polygonStart();\n    },\n    polygonEnd: function() {\n      this.stream.polygonEnd();\n    }\n  };\n  function d3_geo_transformPoint(stream, point) {\n    return {\n      point: point,\n      sphere: function() {\n        stream.sphere();\n      },\n      lineStart: function() {\n        stream.lineStart();\n      },\n      lineEnd: function() {\n        stream.lineEnd();\n      },\n      polygonStart: function() {\n        stream.polygonStart();\n      },\n      polygonEnd: function() {\n        stream.polygonEnd();\n      }\n    };\n  }\n  d3.geo.projection = d3_geo_projection;\n  d3.geo.projectionMutator = d3_geo_projectionMutator;\n  function d3_geo_projection(project) {\n    return d3_geo_projectionMutator(function() {\n      return project;\n    })();\n  }\n  function d3_geo_projectionMutator(projectAt) {\n    var project, rotate, projectRotate, projectResample = d3_geo_resample(function(x, y) {\n      x = project(x, y);\n      return [ x[0] * k + δx, δy - x[1] * k ];\n    }), k = 150, x = 480, y = 250, λ = 0, φ = 0, δλ = 0, δφ = 0, δγ = 0, δx, δy, preclip = d3_geo_clipAntimeridian, postclip = d3_identity, clipAngle = null, clipExtent = null, stream;\n    function projection(point) {\n      point = projectRotate(point[0] * d3_radians, point[1] * d3_radians);\n      return [ point[0] * k + δx, δy - point[1] * k ];\n    }\n    function invert(point) {\n      point = projectRotate.invert((point[0] - δx) / k, (δy - point[1]) / k);\n      return point && [ point[0] * d3_degrees, point[1] * d3_degrees ];\n    }\n    projection.stream = function(output) {\n      if (stream) stream.valid = false;\n      stream = d3_geo_projectionRadians(preclip(rotate, projectResample(postclip(output))));\n      stream.valid = true;\n      return stream;\n    };\n    projection.clipAngle = function(_) {\n      if (!arguments.length) return clipAngle;\n      preclip = _ == null ? (clipAngle = _, d3_geo_clipAntimeridian) : d3_geo_clipCircle((clipAngle = +_) * d3_radians);\n      return invalidate();\n    };\n    projection.clipExtent = function(_) {\n      if (!arguments.length) return clipExtent;\n      clipExtent = _;\n      postclip = _ ? d3_geo_clipExtent(_[0][0], _[0][1], _[1][0], _[1][1]) : d3_identity;\n      return invalidate();\n    };\n    projection.scale = function(_) {\n      if (!arguments.length) return k;\n      k = +_;\n      return reset();\n    };\n    projection.translate = function(_) {\n      if (!arguments.length) return [ x, y ];\n      x = +_[0];\n      y = +_[1];\n      return reset();\n    };\n    projection.center = function(_) {\n      if (!arguments.length) return [ λ * d3_degrees, φ * d3_degrees ];\n      λ = _[0] % 360 * d3_radians;\n      φ = _[1] % 360 * d3_radians;\n      return reset();\n    };\n    projection.rotate = function(_) {\n      if (!arguments.length) return [ δλ * d3_degrees, δφ * d3_degrees, δγ * d3_degrees ];\n      δλ = _[0] % 360 * d3_radians;\n      δφ = _[1] % 360 * d3_radians;\n      δγ = _.length > 2 ? _[2] % 360 * d3_radians : 0;\n      return reset();\n    };\n    d3.rebind(projection, projectResample, \"precision\");\n    function reset() {\n      projectRotate = d3_geo_compose(rotate = d3_geo_rotation(δλ, δφ, δγ), project);\n      var center = project(λ, φ);\n      δx = x - center[0] * k;\n      δy = y + center[1] * k;\n      return invalidate();\n    }\n    function invalidate() {\n      if (stream) stream.valid = false, stream = null;\n      return projection;\n    }\n    return function() {\n      project = projectAt.apply(this, arguments);\n      projection.invert = project.invert && invert;\n      return reset();\n    };\n  }\n  function d3_geo_projectionRadians(stream) {\n    return d3_geo_transformPoint(stream, function(x, y) {\n      stream.point(x * d3_radians, y * d3_radians);\n    });\n  }\n  function d3_geo_equirectangular(λ, φ) {\n    return [ λ, φ ];\n  }\n  (d3.geo.equirectangular = function() {\n    return d3_geo_projection(d3_geo_equirectangular);\n  }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular;\n  d3.geo.rotation = function(rotate) {\n    rotate = d3_geo_rotation(rotate[0] % 360 * d3_radians, rotate[1] * d3_radians, rotate.length > 2 ? rotate[2] * d3_radians : 0);\n    function forward(coordinates) {\n      coordinates = rotate(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    }\n    forward.invert = function(coordinates) {\n      coordinates = rotate.invert(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    };\n    return forward;\n  };\n  function d3_geo_identityRotation(λ, φ) {\n    return [ λ > π ? λ - τ : λ < -π ? λ + τ : λ, φ ];\n  }\n  d3_geo_identityRotation.invert = d3_geo_equirectangular;\n  function d3_geo_rotation(δλ, δφ, δγ) {\n    return δλ ? δφ || δγ ? d3_geo_compose(d3_geo_rotationλ(δλ), d3_geo_rotationφγ(δφ, δγ)) : d3_geo_rotationλ(δλ) : δφ || δγ ? d3_geo_rotationφγ(δφ, δγ) : d3_geo_identityRotation;\n  }\n  function d3_geo_forwardRotationλ(δλ) {\n    return function(λ, φ) {\n      return λ += δλ, [ λ > π ? λ - τ : λ < -π ? λ + τ : λ, φ ];\n    };\n  }\n  function d3_geo_rotationλ(δλ) {\n    var rotation = d3_geo_forwardRotationλ(δλ);\n    rotation.invert = d3_geo_forwardRotationλ(-δλ);\n    return rotation;\n  }\n  function d3_geo_rotationφγ(δφ, δγ) {\n    var cosδφ = Math.cos(δφ), sinδφ = Math.sin(δφ), cosδγ = Math.cos(δγ), sinδγ = Math.sin(δγ);\n    function rotation(λ, φ) {\n      var cosφ = Math.cos(φ), x = Math.cos(λ) * cosφ, y = Math.sin(λ) * cosφ, z = Math.sin(φ), k = z * cosδφ + x * sinδφ;\n      return [ Math.atan2(y * cosδγ - k * sinδγ, x * cosδφ - z * sinδφ), d3_asin(k * cosδγ + y * sinδγ) ];\n    }\n    rotation.invert = function(λ, φ) {\n      var cosφ = Math.cos(φ), x = Math.cos(λ) * cosφ, y = Math.sin(λ) * cosφ, z = Math.sin(φ), k = z * cosδγ - y * sinδγ;\n      return [ Math.atan2(y * cosδγ + z * sinδγ, x * cosδφ + k * sinδφ), d3_asin(k * cosδφ - x * sinδφ) ];\n    };\n    return rotation;\n  }\n  d3.geo.circle = function() {\n    var origin = [ 0, 0 ], angle, precision = 6, interpolate;\n    function circle() {\n      var center = typeof origin === \"function\" ? origin.apply(this, arguments) : origin, rotate = d3_geo_rotation(-center[0] * d3_radians, -center[1] * d3_radians, 0).invert, ring = [];\n      interpolate(null, null, 1, {\n        point: function(x, y) {\n          ring.push(x = rotate(x, y));\n          x[0] *= d3_degrees, x[1] *= d3_degrees;\n        }\n      });\n      return {\n        type: \"Polygon\",\n        coordinates: [ ring ]\n      };\n    }\n    circle.origin = function(x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return circle;\n    };\n    circle.angle = function(x) {\n      if (!arguments.length) return angle;\n      interpolate = d3_geo_circleInterpolate((angle = +x) * d3_radians, precision * d3_radians);\n      return circle;\n    };\n    circle.precision = function(_) {\n      if (!arguments.length) return precision;\n      interpolate = d3_geo_circleInterpolate(angle * d3_radians, (precision = +_) * d3_radians);\n      return circle;\n    };\n    return circle.angle(90);\n  };\n  function d3_geo_circleInterpolate(radius, precision) {\n    var cr = Math.cos(radius), sr = Math.sin(radius);\n    return function(from, to, direction, listener) {\n      var step = direction * precision;\n      if (from != null) {\n        from = d3_geo_circleAngle(cr, from);\n        to = d3_geo_circleAngle(cr, to);\n        if (direction > 0 ? from < to : from > to) from += direction * τ;\n      } else {\n        from = radius + direction * τ;\n        to = radius - .5 * step;\n      }\n      for (var point, t = from; direction > 0 ? t > to : t < to; t -= step) {\n        listener.point((point = d3_geo_spherical([ cr, -sr * Math.cos(t), -sr * Math.sin(t) ]))[0], point[1]);\n      }\n    };\n  }\n  function d3_geo_circleAngle(cr, point) {\n    var a = d3_geo_cartesian(point);\n    a[0] -= cr;\n    d3_geo_cartesianNormalize(a);\n    var angle = d3_acos(-a[1]);\n    return ((-a[2] < 0 ? -angle : angle) + 2 * Math.PI - ε) % (2 * Math.PI);\n  }\n  d3.geo.distance = function(a, b) {\n    var Δλ = (b[0] - a[0]) * d3_radians, φ0 = a[1] * d3_radians, φ1 = b[1] * d3_radians, sinΔλ = Math.sin(Δλ), cosΔλ = Math.cos(Δλ), sinφ0 = Math.sin(φ0), cosφ0 = Math.cos(φ0), sinφ1 = Math.sin(φ1), cosφ1 = Math.cos(φ1), t;\n    return Math.atan2(Math.sqrt((t = cosφ1 * sinΔλ) * t + (t = cosφ0 * sinφ1 - sinφ0 * cosφ1 * cosΔλ) * t), sinφ0 * sinφ1 + cosφ0 * cosφ1 * cosΔλ);\n  };\n  d3.geo.graticule = function() {\n    var x1, x0, X1, X0, y1, y0, Y1, Y0, dx = 10, dy = dx, DX = 90, DY = 360, x, y, X, Y, precision = 2.5;\n    function graticule() {\n      return {\n        type: \"MultiLineString\",\n        coordinates: lines()\n      };\n    }\n    function lines() {\n      return d3.range(Math.ceil(X0 / DX) * DX, X1, DX).map(X).concat(d3.range(Math.ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(d3.range(Math.ceil(x0 / dx) * dx, x1, dx).filter(function(x) {\n        return abs(x % DX) > ε;\n      }).map(x)).concat(d3.range(Math.ceil(y0 / dy) * dy, y1, dy).filter(function(y) {\n        return abs(y % DY) > ε;\n      }).map(y));\n    }\n    graticule.lines = function() {\n      return lines().map(function(coordinates) {\n        return {\n          type: \"LineString\",\n          coordinates: coordinates\n        };\n      });\n    };\n    graticule.outline = function() {\n      return {\n        type: \"Polygon\",\n        coordinates: [ X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1)) ]\n      };\n    };\n    graticule.extent = function(_) {\n      if (!arguments.length) return graticule.minorExtent();\n      return graticule.majorExtent(_).minorExtent(_);\n    };\n    graticule.majorExtent = function(_) {\n      if (!arguments.length) return [ [ X0, Y0 ], [ X1, Y1 ] ];\n      X0 = +_[0][0], X1 = +_[1][0];\n      Y0 = +_[0][1], Y1 = +_[1][1];\n      if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n      if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.minorExtent = function(_) {\n      if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];\n      x0 = +_[0][0], x1 = +_[1][0];\n      y0 = +_[0][1], y1 = +_[1][1];\n      if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n      if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.step = function(_) {\n      if (!arguments.length) return graticule.minorStep();\n      return graticule.majorStep(_).minorStep(_);\n    };\n    graticule.majorStep = function(_) {\n      if (!arguments.length) return [ DX, DY ];\n      DX = +_[0], DY = +_[1];\n      return graticule;\n    };\n    graticule.minorStep = function(_) {\n      if (!arguments.length) return [ dx, dy ];\n      dx = +_[0], dy = +_[1];\n      return graticule;\n    };\n    graticule.precision = function(_) {\n      if (!arguments.length) return precision;\n      precision = +_;\n      x = d3_geo_graticuleX(y0, y1, 90);\n      y = d3_geo_graticuleY(x0, x1, precision);\n      X = d3_geo_graticuleX(Y0, Y1, 90);\n      Y = d3_geo_graticuleY(X0, X1, precision);\n      return graticule;\n    };\n    return graticule.majorExtent([ [ -180, -90 + ε ], [ 180, 90 - ε ] ]).minorExtent([ [ -180, -80 - ε ], [ 180, 80 + ε ] ]);\n  };\n  function d3_geo_graticuleX(y0, y1, dy) {\n    var y = d3.range(y0, y1 - ε, dy).concat(y1);\n    return function(x) {\n      return y.map(function(y) {\n        return [ x, y ];\n      });\n    };\n  }\n  function d3_geo_graticuleY(x0, x1, dx) {\n    var x = d3.range(x0, x1 - ε, dx).concat(x1);\n    return function(y) {\n      return x.map(function(x) {\n        return [ x, y ];\n      });\n    };\n  }\n  function d3_source(d) {\n    return d.source;\n  }\n  function d3_target(d) {\n    return d.target;\n  }\n  d3.geo.greatArc = function() {\n    var source = d3_source, source_, target = d3_target, target_;\n    function greatArc() {\n      return {\n        type: \"LineString\",\n        coordinates: [ source_ || source.apply(this, arguments), target_ || target.apply(this, arguments) ]\n      };\n    }\n    greatArc.distance = function() {\n      return d3.geo.distance(source_ || source.apply(this, arguments), target_ || target.apply(this, arguments));\n    };\n    greatArc.source = function(_) {\n      if (!arguments.length) return source;\n      source = _, source_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n    greatArc.target = function(_) {\n      if (!arguments.length) return target;\n      target = _, target_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n    greatArc.precision = function() {\n      return arguments.length ? greatArc : 0;\n    };\n    return greatArc;\n  };\n  d3.geo.interpolate = function(source, target) {\n    return d3_geo_interpolate(source[0] * d3_radians, source[1] * d3_radians, target[0] * d3_radians, target[1] * d3_radians);\n  };\n  function d3_geo_interpolate(x0, y0, x1, y1) {\n    var cy0 = Math.cos(y0), sy0 = Math.sin(y0), cy1 = Math.cos(y1), sy1 = Math.sin(y1), kx0 = cy0 * Math.cos(x0), ky0 = cy0 * Math.sin(x0), kx1 = cy1 * Math.cos(x1), ky1 = cy1 * Math.sin(x1), d = 2 * Math.asin(Math.sqrt(d3_haversin(y1 - y0) + cy0 * cy1 * d3_haversin(x1 - x0))), k = 1 / Math.sin(d);\n    var interpolate = d ? function(t) {\n      var B = Math.sin(t *= d) * k, A = Math.sin(d - t) * k, x = A * kx0 + B * kx1, y = A * ky0 + B * ky1, z = A * sy0 + B * sy1;\n      return [ Math.atan2(y, x) * d3_degrees, Math.atan2(z, Math.sqrt(x * x + y * y)) * d3_degrees ];\n    } : function() {\n      return [ x0 * d3_degrees, y0 * d3_degrees ];\n    };\n    interpolate.distance = d;\n    return interpolate;\n  }\n  d3.geo.length = function(object) {\n    d3_geo_lengthSum = 0;\n    d3.geo.stream(object, d3_geo_length);\n    return d3_geo_lengthSum;\n  };\n  var d3_geo_lengthSum;\n  var d3_geo_length = {\n    sphere: d3_noop,\n    point: d3_noop,\n    lineStart: d3_geo_lengthLineStart,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n  function d3_geo_lengthLineStart() {\n    var λ0, sinφ0, cosφ0;\n    d3_geo_length.point = function(λ, φ) {\n      λ0 = λ * d3_radians, sinφ0 = Math.sin(φ *= d3_radians), cosφ0 = Math.cos(φ);\n      d3_geo_length.point = nextPoint;\n    };\n    d3_geo_length.lineEnd = function() {\n      d3_geo_length.point = d3_geo_length.lineEnd = d3_noop;\n    };\n    function nextPoint(λ, φ) {\n      var sinφ = Math.sin(φ *= d3_radians), cosφ = Math.cos(φ), t = abs((λ *= d3_radians) - λ0), cosΔλ = Math.cos(t);\n      d3_geo_lengthSum += Math.atan2(Math.sqrt((t = cosφ * Math.sin(t)) * t + (t = cosφ0 * sinφ - sinφ0 * cosφ * cosΔλ) * t), sinφ0 * sinφ + cosφ0 * cosφ * cosΔλ);\n      λ0 = λ, sinφ0 = sinφ, cosφ0 = cosφ;\n    }\n  }\n  function d3_geo_azimuthal(scale, angle) {\n    function azimuthal(λ, φ) {\n      var cosλ = Math.cos(λ), cosφ = Math.cos(φ), k = scale(cosλ * cosφ);\n      return [ k * cosφ * Math.sin(λ), k * Math.sin(φ) ];\n    }\n    azimuthal.invert = function(x, y) {\n      var ρ = Math.sqrt(x * x + y * y), c = angle(ρ), sinc = Math.sin(c), cosc = Math.cos(c);\n      return [ Math.atan2(x * sinc, ρ * cosc), Math.asin(ρ && y * sinc / ρ) ];\n    };\n    return azimuthal;\n  }\n  var d3_geo_azimuthalEqualArea = d3_geo_azimuthal(function(cosλcosφ) {\n    return Math.sqrt(2 / (1 + cosλcosφ));\n  }, function(ρ) {\n    return 2 * Math.asin(ρ / 2);\n  });\n  (d3.geo.azimuthalEqualArea = function() {\n    return d3_geo_projection(d3_geo_azimuthalEqualArea);\n  }).raw = d3_geo_azimuthalEqualArea;\n  var d3_geo_azimuthalEquidistant = d3_geo_azimuthal(function(cosλcosφ) {\n    var c = Math.acos(cosλcosφ);\n    return c && c / Math.sin(c);\n  }, d3_identity);\n  (d3.geo.azimuthalEquidistant = function() {\n    return d3_geo_projection(d3_geo_azimuthalEquidistant);\n  }).raw = d3_geo_azimuthalEquidistant;\n  function d3_geo_conicConformal(φ0, φ1) {\n    var cosφ0 = Math.cos(φ0), t = function(φ) {\n      return Math.tan(π / 4 + φ / 2);\n    }, n = φ0 === φ1 ? Math.sin(φ0) : Math.log(cosφ0 / Math.cos(φ1)) / Math.log(t(φ1) / t(φ0)), F = cosφ0 * Math.pow(t(φ0), n) / n;\n    if (!n) return d3_geo_mercator;\n    function forward(λ, φ) {\n      if (F > 0) {\n        if (φ < -halfπ + ε) φ = -halfπ + ε;\n      } else {\n        if (φ > halfπ - ε) φ = halfπ - ε;\n      }\n      var ρ = F / Math.pow(t(φ), n);\n      return [ ρ * Math.sin(n * λ), F - ρ * Math.cos(n * λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = F - y, ρ = d3_sgn(n) * Math.sqrt(x * x + ρ0_y * ρ0_y);\n      return [ Math.atan2(x, ρ0_y) / n, 2 * Math.atan(Math.pow(F / ρ, 1 / n)) - halfπ ];\n    };\n    return forward;\n  }\n  (d3.geo.conicConformal = function() {\n    return d3_geo_conic(d3_geo_conicConformal);\n  }).raw = d3_geo_conicConformal;\n  function d3_geo_conicEquidistant(φ0, φ1) {\n    var cosφ0 = Math.cos(φ0), n = φ0 === φ1 ? Math.sin(φ0) : (cosφ0 - Math.cos(φ1)) / (φ1 - φ0), G = cosφ0 / n + φ0;\n    if (abs(n) < ε) return d3_geo_equirectangular;\n    function forward(λ, φ) {\n      var ρ = G - φ;\n      return [ ρ * Math.sin(n * λ), G - ρ * Math.cos(n * λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = G - y;\n      return [ Math.atan2(x, ρ0_y) / n, G - d3_sgn(n) * Math.sqrt(x * x + ρ0_y * ρ0_y) ];\n    };\n    return forward;\n  }\n  (d3.geo.conicEquidistant = function() {\n    return d3_geo_conic(d3_geo_conicEquidistant);\n  }).raw = d3_geo_conicEquidistant;\n  var d3_geo_gnomonic = d3_geo_azimuthal(function(cosλcosφ) {\n    return 1 / cosλcosφ;\n  }, Math.atan);\n  (d3.geo.gnomonic = function() {\n    return d3_geo_projection(d3_geo_gnomonic);\n  }).raw = d3_geo_gnomonic;\n  function d3_geo_mercator(λ, φ) {\n    return [ λ, Math.log(Math.tan(π / 4 + φ / 2)) ];\n  }\n  d3_geo_mercator.invert = function(x, y) {\n    return [ x, 2 * Math.atan(Math.exp(y)) - halfπ ];\n  };\n  function d3_geo_mercatorProjection(project) {\n    var m = d3_geo_projection(project), scale = m.scale, translate = m.translate, clipExtent = m.clipExtent, clipAuto;\n    m.scale = function() {\n      var v = scale.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n    m.translate = function() {\n      var v = translate.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n    m.clipExtent = function(_) {\n      var v = clipExtent.apply(m, arguments);\n      if (v === m) {\n        if (clipAuto = _ == null) {\n          var k = π * scale(), t = translate();\n          clipExtent([ [ t[0] - k, t[1] - k ], [ t[0] + k, t[1] + k ] ]);\n        }\n      } else if (clipAuto) {\n        v = null;\n      }\n      return v;\n    };\n    return m.clipExtent(null);\n  }\n  (d3.geo.mercator = function() {\n    return d3_geo_mercatorProjection(d3_geo_mercator);\n  }).raw = d3_geo_mercator;\n  var d3_geo_orthographic = d3_geo_azimuthal(function() {\n    return 1;\n  }, Math.asin);\n  (d3.geo.orthographic = function() {\n    return d3_geo_projection(d3_geo_orthographic);\n  }).raw = d3_geo_orthographic;\n  var d3_geo_stereographic = d3_geo_azimuthal(function(cosλcosφ) {\n    return 1 / (1 + cosλcosφ);\n  }, function(ρ) {\n    return 2 * Math.atan(ρ);\n  });\n  (d3.geo.stereographic = function() {\n    return d3_geo_projection(d3_geo_stereographic);\n  }).raw = d3_geo_stereographic;\n  function d3_geo_transverseMercator(λ, φ) {\n    return [ Math.log(Math.tan(π / 4 + φ / 2)), -λ ];\n  }\n  d3_geo_transverseMercator.invert = function(x, y) {\n    return [ -y, 2 * Math.atan(Math.exp(x)) - halfπ ];\n  };\n  (d3.geo.transverseMercator = function() {\n    var projection = d3_geo_mercatorProjection(d3_geo_transverseMercator), center = projection.center, rotate = projection.rotate;\n    projection.center = function(_) {\n      return _ ? center([ -_[1], _[0] ]) : (_ = center(), [ _[1], -_[0] ]);\n    };\n    projection.rotate = function(_) {\n      return _ ? rotate([ _[0], _[1], _.length > 2 ? _[2] + 90 : 90 ]) : (_ = rotate(), \n      [ _[0], _[1], _[2] - 90 ]);\n    };\n    return rotate([ 0, 0, 90 ]);\n  }).raw = d3_geo_transverseMercator;\n  d3.geom = {};\n  function d3_geom_pointX(d) {\n    return d[0];\n  }\n  function d3_geom_pointY(d) {\n    return d[1];\n  }\n  d3.geom.hull = function(vertices) {\n    var x = d3_geom_pointX, y = d3_geom_pointY;\n    if (arguments.length) return hull(vertices);\n    function hull(data) {\n      if (data.length < 3) return [];\n      var fx = d3_functor(x), fy = d3_functor(y), i, n = data.length, points = [], flippedPoints = [];\n      for (i = 0; i < n; i++) {\n        points.push([ +fx.call(this, data[i], i), +fy.call(this, data[i], i), i ]);\n      }\n      points.sort(d3_geom_hullOrder);\n      for (i = 0; i < n; i++) flippedPoints.push([ points[i][0], -points[i][1] ]);\n      var upper = d3_geom_hullUpper(points), lower = d3_geom_hullUpper(flippedPoints);\n      var skipLeft = lower[0] === upper[0], skipRight = lower[lower.length - 1] === upper[upper.length - 1], polygon = [];\n      for (i = upper.length - 1; i >= 0; --i) polygon.push(data[points[upper[i]][2]]);\n      for (i = +skipLeft; i < lower.length - skipRight; ++i) polygon.push(data[points[lower[i]][2]]);\n      return polygon;\n    }\n    hull.x = function(_) {\n      return arguments.length ? (x = _, hull) : x;\n    };\n    hull.y = function(_) {\n      return arguments.length ? (y = _, hull) : y;\n    };\n    return hull;\n  };\n  function d3_geom_hullUpper(points) {\n    var n = points.length, hull = [ 0, 1 ], hs = 2;\n    for (var i = 2; i < n; i++) {\n      while (hs > 1 && d3_cross2d(points[hull[hs - 2]], points[hull[hs - 1]], points[i]) <= 0) --hs;\n      hull[hs++] = i;\n    }\n    return hull.slice(0, hs);\n  }\n  function d3_geom_hullOrder(a, b) {\n    return a[0] - b[0] || a[1] - b[1];\n  }\n  d3.geom.polygon = function(coordinates) {\n    d3_subclass(coordinates, d3_geom_polygonPrototype);\n    return coordinates;\n  };\n  var d3_geom_polygonPrototype = d3.geom.polygon.prototype = [];\n  d3_geom_polygonPrototype.area = function() {\n    var i = -1, n = this.length, a, b = this[n - 1], area = 0;\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      area += a[1] * b[0] - a[0] * b[1];\n    }\n    return area * .5;\n  };\n  d3_geom_polygonPrototype.centroid = function(k) {\n    var i = -1, n = this.length, x = 0, y = 0, a, b = this[n - 1], c;\n    if (!arguments.length) k = -1 / (6 * this.area());\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      c = a[0] * b[1] - b[0] * a[1];\n      x += (a[0] + b[0]) * c;\n      y += (a[1] + b[1]) * c;\n    }\n    return [ x * k, y * k ];\n  };\n  d3_geom_polygonPrototype.clip = function(subject) {\n    var input, closed = d3_geom_polygonClosed(subject), i = -1, n = this.length - d3_geom_polygonClosed(this), j, m, a = this[n - 1], b, c, d;\n    while (++i < n) {\n      input = subject.slice();\n      subject.length = 0;\n      b = this[i];\n      c = input[(m = input.length - closed) - 1];\n      j = -1;\n      while (++j < m) {\n        d = input[j];\n        if (d3_geom_polygonInside(d, a, b)) {\n          if (!d3_geom_polygonInside(c, a, b)) {\n            subject.push(d3_geom_polygonIntersect(c, d, a, b));\n          }\n          subject.push(d);\n        } else if (d3_geom_polygonInside(c, a, b)) {\n          subject.push(d3_geom_polygonIntersect(c, d, a, b));\n        }\n        c = d;\n      }\n      if (closed) subject.push(subject[0]);\n      a = b;\n    }\n    return subject;\n  };\n  function d3_geom_polygonInside(p, a, b) {\n    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0]);\n  }\n  function d3_geom_polygonIntersect(c, d, a, b) {\n    var x1 = c[0], x3 = a[0], x21 = d[0] - x1, x43 = b[0] - x3, y1 = c[1], y3 = a[1], y21 = d[1] - y1, y43 = b[1] - y3, ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);\n    return [ x1 + ua * x21, y1 + ua * y21 ];\n  }\n  function d3_geom_polygonClosed(coordinates) {\n    var a = coordinates[0], b = coordinates[coordinates.length - 1];\n    return !(a[0] - b[0] || a[1] - b[1]);\n  }\n  var d3_geom_voronoiEdges, d3_geom_voronoiCells, d3_geom_voronoiBeaches, d3_geom_voronoiBeachPool = [], d3_geom_voronoiFirstCircle, d3_geom_voronoiCircles, d3_geom_voronoiCirclePool = [];\n  function d3_geom_voronoiBeach() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.edge = this.site = this.circle = null;\n  }\n  function d3_geom_voronoiCreateBeach(site) {\n    var beach = d3_geom_voronoiBeachPool.pop() || new d3_geom_voronoiBeach();\n    beach.site = site;\n    return beach;\n  }\n  function d3_geom_voronoiDetachBeach(beach) {\n    d3_geom_voronoiDetachCircle(beach);\n    d3_geom_voronoiBeaches.remove(beach);\n    d3_geom_voronoiBeachPool.push(beach);\n    d3_geom_voronoiRedBlackNode(beach);\n  }\n  function d3_geom_voronoiRemoveBeach(beach) {\n    var circle = beach.circle, x = circle.x, y = circle.cy, vertex = {\n      x: x,\n      y: y\n    }, previous = beach.P, next = beach.N, disappearing = [ beach ];\n    d3_geom_voronoiDetachBeach(beach);\n    var lArc = previous;\n    while (lArc.circle && abs(x - lArc.circle.x) < ε && abs(y - lArc.circle.cy) < ε) {\n      previous = lArc.P;\n      disappearing.unshift(lArc);\n      d3_geom_voronoiDetachBeach(lArc);\n      lArc = previous;\n    }\n    disappearing.unshift(lArc);\n    d3_geom_voronoiDetachCircle(lArc);\n    var rArc = next;\n    while (rArc.circle && abs(x - rArc.circle.x) < ε && abs(y - rArc.circle.cy) < ε) {\n      next = rArc.N;\n      disappearing.push(rArc);\n      d3_geom_voronoiDetachBeach(rArc);\n      rArc = next;\n    }\n    disappearing.push(rArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var nArcs = disappearing.length, iArc;\n    for (iArc = 1; iArc < nArcs; ++iArc) {\n      rArc = disappearing[iArc];\n      lArc = disappearing[iArc - 1];\n      d3_geom_voronoiSetEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n    }\n    lArc = disappearing[0];\n    rArc = disappearing[nArcs - 1];\n    rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, rArc.site, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n  function d3_geom_voronoiAddBeach(site) {\n    var x = site.x, directrix = site.y, lArc, rArc, dxl, dxr, node = d3_geom_voronoiBeaches._;\n    while (node) {\n      dxl = d3_geom_voronoiLeftBreakPoint(node, directrix) - x;\n      if (dxl > ε) node = node.L; else {\n        dxr = x - d3_geom_voronoiRightBreakPoint(node, directrix);\n        if (dxr > ε) {\n          if (!node.R) {\n            lArc = node;\n            break;\n          }\n          node = node.R;\n        } else {\n          if (dxl > -ε) {\n            lArc = node.P;\n            rArc = node;\n          } else if (dxr > -ε) {\n            lArc = node;\n            rArc = node.N;\n          } else {\n            lArc = rArc = node;\n          }\n          break;\n        }\n      }\n    }\n    var newArc = d3_geom_voronoiCreateBeach(site);\n    d3_geom_voronoiBeaches.insert(lArc, newArc);\n    if (!lArc && !rArc) return;\n    if (lArc === rArc) {\n      d3_geom_voronoiDetachCircle(lArc);\n      rArc = d3_geom_voronoiCreateBeach(lArc.site);\n      d3_geom_voronoiBeaches.insert(newArc, rArc);\n      newArc.edge = rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      d3_geom_voronoiAttachCircle(lArc);\n      d3_geom_voronoiAttachCircle(rArc);\n      return;\n    }\n    if (!rArc) {\n      newArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      return;\n    }\n    d3_geom_voronoiDetachCircle(lArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var lSite = lArc.site, ax = lSite.x, ay = lSite.y, bx = site.x - ax, by = site.y - ay, rSite = rArc.site, cx = rSite.x - ax, cy = rSite.y - ay, d = 2 * (bx * cy - by * cx), hb = bx * bx + by * by, hc = cx * cx + cy * cy, vertex = {\n      x: (cy * hb - by * hc) / d + ax,\n      y: (bx * hc - cx * hb) / d + ay\n    };\n    d3_geom_voronoiSetEdgeEnd(rArc.edge, lSite, rSite, vertex);\n    newArc.edge = d3_geom_voronoiCreateEdge(lSite, site, null, vertex);\n    rArc.edge = d3_geom_voronoiCreateEdge(site, rSite, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n  function d3_geom_voronoiLeftBreakPoint(arc, directrix) {\n    var site = arc.site, rfocx = site.x, rfocy = site.y, pby2 = rfocy - directrix;\n    if (!pby2) return rfocx;\n    var lArc = arc.P;\n    if (!lArc) return -Infinity;\n    site = lArc.site;\n    var lfocx = site.x, lfocy = site.y, plby2 = lfocy - directrix;\n    if (!plby2) return lfocx;\n    var hl = lfocx - rfocx, aby2 = 1 / pby2 - 1 / plby2, b = hl / plby2;\n    if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n    return (rfocx + lfocx) / 2;\n  }\n  function d3_geom_voronoiRightBreakPoint(arc, directrix) {\n    var rArc = arc.N;\n    if (rArc) return d3_geom_voronoiLeftBreakPoint(rArc, directrix);\n    var site = arc.site;\n    return site.y === directrix ? site.x : Infinity;\n  }\n  function d3_geom_voronoiCell(site) {\n    this.site = site;\n    this.edges = [];\n  }\n  d3_geom_voronoiCell.prototype.prepare = function() {\n    var halfEdges = this.edges, iHalfEdge = halfEdges.length, edge;\n    while (iHalfEdge--) {\n      edge = halfEdges[iHalfEdge].edge;\n      if (!edge.b || !edge.a) halfEdges.splice(iHalfEdge, 1);\n    }\n    halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);\n    return halfEdges.length;\n  };\n  function d3_geom_voronoiCloseCells(extent) {\n    var x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], x2, y2, x3, y3, cells = d3_geom_voronoiCells, iCell = cells.length, cell, iHalfEdge, halfEdges, nHalfEdges, start, end;\n    while (iCell--) {\n      cell = cells[iCell];\n      if (!cell || !cell.prepare()) continue;\n      halfEdges = cell.edges;\n      nHalfEdges = halfEdges.length;\n      iHalfEdge = 0;\n      while (iHalfEdge < nHalfEdges) {\n        end = halfEdges[iHalfEdge].end(), x3 = end.x, y3 = end.y;\n        start = halfEdges[++iHalfEdge % nHalfEdges].start(), x2 = start.x, y2 = start.y;\n        if (abs(x3 - x2) > ε || abs(y3 - y2) > ε) {\n          halfEdges.splice(iHalfEdge, 0, new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site, end, abs(x3 - x0) < ε && y1 - y3 > ε ? {\n            x: x0,\n            y: abs(x2 - x0) < ε ? y2 : y1\n          } : abs(y3 - y1) < ε && x1 - x3 > ε ? {\n            x: abs(y2 - y1) < ε ? x2 : x1,\n            y: y1\n          } : abs(x3 - x1) < ε && y3 - y0 > ε ? {\n            x: x1,\n            y: abs(x2 - x1) < ε ? y2 : y0\n          } : abs(y3 - y0) < ε && x3 - x0 > ε ? {\n            x: abs(y2 - y0) < ε ? x2 : x0,\n            y: y0\n          } : null), cell.site, null));\n          ++nHalfEdges;\n        }\n      }\n    }\n  }\n  function d3_geom_voronoiHalfEdgeOrder(a, b) {\n    return b.angle - a.angle;\n  }\n  function d3_geom_voronoiCircle() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.x = this.y = this.arc = this.site = this.cy = null;\n  }\n  function d3_geom_voronoiAttachCircle(arc) {\n    var lArc = arc.P, rArc = arc.N;\n    if (!lArc || !rArc) return;\n    var lSite = lArc.site, cSite = arc.site, rSite = rArc.site;\n    if (lSite === rSite) return;\n    var bx = cSite.x, by = cSite.y, ax = lSite.x - bx, ay = lSite.y - by, cx = rSite.x - bx, cy = rSite.y - by;\n    var d = 2 * (ax * cy - ay * cx);\n    if (d >= -ε2) return;\n    var ha = ax * ax + ay * ay, hc = cx * cx + cy * cy, x = (cy * ha - ay * hc) / d, y = (ax * hc - cx * ha) / d, cy = y + by;\n    var circle = d3_geom_voronoiCirclePool.pop() || new d3_geom_voronoiCircle();\n    circle.arc = arc;\n    circle.site = cSite;\n    circle.x = x + bx;\n    circle.y = cy + Math.sqrt(x * x + y * y);\n    circle.cy = cy;\n    arc.circle = circle;\n    var before = null, node = d3_geom_voronoiCircles._;\n    while (node) {\n      if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {\n        if (node.L) node = node.L; else {\n          before = node.P;\n          break;\n        }\n      } else {\n        if (node.R) node = node.R; else {\n          before = node;\n          break;\n        }\n      }\n    }\n    d3_geom_voronoiCircles.insert(before, circle);\n    if (!before) d3_geom_voronoiFirstCircle = circle;\n  }\n  function d3_geom_voronoiDetachCircle(arc) {\n    var circle = arc.circle;\n    if (circle) {\n      if (!circle.P) d3_geom_voronoiFirstCircle = circle.N;\n      d3_geom_voronoiCircles.remove(circle);\n      d3_geom_voronoiCirclePool.push(circle);\n      d3_geom_voronoiRedBlackNode(circle);\n      arc.circle = null;\n    }\n  }\n  function d3_geom_voronoiClipEdges(extent) {\n    var edges = d3_geom_voronoiEdges, clip = d3_geom_clipLine(extent[0][0], extent[0][1], extent[1][0], extent[1][1]), i = edges.length, e;\n    while (i--) {\n      e = edges[i];\n      if (!d3_geom_voronoiConnectEdge(e, extent) || !clip(e) || abs(e.a.x - e.b.x) < ε && abs(e.a.y - e.b.y) < ε) {\n        e.a = e.b = null;\n        edges.splice(i, 1);\n      }\n    }\n  }\n  function d3_geom_voronoiConnectEdge(edge, extent) {\n    var vb = edge.b;\n    if (vb) return true;\n    var va = edge.a, x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], lSite = edge.l, rSite = edge.r, lx = lSite.x, ly = lSite.y, rx = rSite.x, ry = rSite.y, fx = (lx + rx) / 2, fy = (ly + ry) / 2, fm, fb;\n    if (ry === ly) {\n      if (fx < x0 || fx >= x1) return;\n      if (lx > rx) {\n        if (!va) va = {\n          x: fx,\n          y: y0\n        }; else if (va.y >= y1) return;\n        vb = {\n          x: fx,\n          y: y1\n        };\n      } else {\n        if (!va) va = {\n          x: fx,\n          y: y1\n        }; else if (va.y < y0) return;\n        vb = {\n          x: fx,\n          y: y0\n        };\n      }\n    } else {\n      fm = (lx - rx) / (ry - ly);\n      fb = fy - fm * fx;\n      if (fm < -1 || fm > 1) {\n        if (lx > rx) {\n          if (!va) va = {\n            x: (y0 - fb) / fm,\n            y: y0\n          }; else if (va.y >= y1) return;\n          vb = {\n            x: (y1 - fb) / fm,\n            y: y1\n          };\n        } else {\n          if (!va) va = {\n            x: (y1 - fb) / fm,\n            y: y1\n          }; else if (va.y < y0) return;\n          vb = {\n            x: (y0 - fb) / fm,\n            y: y0\n          };\n        }\n      } else {\n        if (ly < ry) {\n          if (!va) va = {\n            x: x0,\n            y: fm * x0 + fb\n          }; else if (va.x >= x1) return;\n          vb = {\n            x: x1,\n            y: fm * x1 + fb\n          };\n        } else {\n          if (!va) va = {\n            x: x1,\n            y: fm * x1 + fb\n          }; else if (va.x < x0) return;\n          vb = {\n            x: x0,\n            y: fm * x0 + fb\n          };\n        }\n      }\n    }\n    edge.a = va;\n    edge.b = vb;\n    return true;\n  }\n  function d3_geom_voronoiEdge(lSite, rSite) {\n    this.l = lSite;\n    this.r = rSite;\n    this.a = this.b = null;\n  }\n  function d3_geom_voronoiCreateEdge(lSite, rSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, rSite);\n    d3_geom_voronoiEdges.push(edge);\n    if (va) d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, va);\n    if (vb) d3_geom_voronoiSetEdgeEnd(edge, rSite, lSite, vb);\n    d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, lSite, rSite));\n    d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, rSite, lSite));\n    return edge;\n  }\n  function d3_geom_voronoiCreateBorderEdge(lSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, null);\n    edge.a = va;\n    edge.b = vb;\n    d3_geom_voronoiEdges.push(edge);\n    return edge;\n  }\n  function d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, vertex) {\n    if (!edge.a && !edge.b) {\n      edge.a = vertex;\n      edge.l = lSite;\n      edge.r = rSite;\n    } else if (edge.l === rSite) {\n      edge.b = vertex;\n    } else {\n      edge.a = vertex;\n    }\n  }\n  function d3_geom_voronoiHalfEdge(edge, lSite, rSite) {\n    var va = edge.a, vb = edge.b;\n    this.edge = edge;\n    this.site = lSite;\n    this.angle = rSite ? Math.atan2(rSite.y - lSite.y, rSite.x - lSite.x) : edge.l === lSite ? Math.atan2(vb.x - va.x, va.y - vb.y) : Math.atan2(va.x - vb.x, vb.y - va.y);\n  }\n  d3_geom_voronoiHalfEdge.prototype = {\n    start: function() {\n      return this.edge.l === this.site ? this.edge.a : this.edge.b;\n    },\n    end: function() {\n      return this.edge.l === this.site ? this.edge.b : this.edge.a;\n    }\n  };\n  function d3_geom_voronoiRedBlackTree() {\n    this._ = null;\n  }\n  function d3_geom_voronoiRedBlackNode(node) {\n    node.U = node.C = node.L = node.R = node.P = node.N = null;\n  }\n  d3_geom_voronoiRedBlackTree.prototype = {\n    insert: function(after, node) {\n      var parent, grandpa, uncle;\n      if (after) {\n        node.P = after;\n        node.N = after.N;\n        if (after.N) after.N.P = node;\n        after.N = node;\n        if (after.R) {\n          after = after.R;\n          while (after.L) after = after.L;\n          after.L = node;\n        } else {\n          after.R = node;\n        }\n        parent = after;\n      } else if (this._) {\n        after = d3_geom_voronoiRedBlackFirst(this._);\n        node.P = null;\n        node.N = after;\n        after.P = after.L = node;\n        parent = after;\n      } else {\n        node.P = node.N = null;\n        this._ = node;\n        parent = null;\n      }\n      node.L = node.R = null;\n      node.U = parent;\n      node.C = true;\n      after = node;\n      while (parent && parent.C) {\n        grandpa = parent.U;\n        if (parent === grandpa.L) {\n          uncle = grandpa.R;\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.R) {\n              d3_geom_voronoiRedBlackRotateLeft(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, grandpa);\n          }\n        } else {\n          uncle = grandpa.L;\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.L) {\n              d3_geom_voronoiRedBlackRotateRight(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, grandpa);\n          }\n        }\n        parent = after.U;\n      }\n      this._.C = false;\n    },\n    remove: function(node) {\n      if (node.N) node.N.P = node.P;\n      if (node.P) node.P.N = node.N;\n      node.N = node.P = null;\n      var parent = node.U, sibling, left = node.L, right = node.R, next, red;\n      if (!left) next = right; else if (!right) next = left; else next = d3_geom_voronoiRedBlackFirst(right);\n      if (parent) {\n        if (parent.L === node) parent.L = next; else parent.R = next;\n      } else {\n        this._ = next;\n      }\n      if (left && right) {\n        red = next.C;\n        next.C = node.C;\n        next.L = left;\n        left.U = next;\n        if (next !== right) {\n          parent = next.U;\n          next.U = node.U;\n          node = next.R;\n          parent.L = node;\n          next.R = right;\n          right.U = next;\n        } else {\n          next.U = parent;\n          parent = next;\n          node = next.R;\n        }\n      } else {\n        red = node.C;\n        node = next;\n      }\n      if (node) node.U = parent;\n      if (red) return;\n      if (node && node.C) {\n        node.C = false;\n        return;\n      }\n      do {\n        if (node === this._) break;\n        if (node === parent.L) {\n          sibling = parent.R;\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            sibling = parent.R;\n          }\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.R || !sibling.R.C) {\n              sibling.L.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateRight(this, sibling);\n              sibling = parent.R;\n            }\n            sibling.C = parent.C;\n            parent.C = sibling.R.C = false;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            node = this._;\n            break;\n          }\n        } else {\n          sibling = parent.L;\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            sibling = parent.L;\n          }\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.L || !sibling.L.C) {\n              sibling.R.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateLeft(this, sibling);\n              sibling = parent.L;\n            }\n            sibling.C = parent.C;\n            parent.C = sibling.L.C = false;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            node = this._;\n            break;\n          }\n        }\n        sibling.C = true;\n        node = parent;\n        parent = parent.U;\n      } while (!node.C);\n      if (node) node.C = false;\n    }\n  };\n  function d3_geom_voronoiRedBlackRotateLeft(tree, node) {\n    var p = node, q = node.R, parent = p.U;\n    if (parent) {\n      if (parent.L === p) parent.L = q; else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n    q.U = parent;\n    p.U = q;\n    p.R = q.L;\n    if (p.R) p.R.U = p;\n    q.L = p;\n  }\n  function d3_geom_voronoiRedBlackRotateRight(tree, node) {\n    var p = node, q = node.L, parent = p.U;\n    if (parent) {\n      if (parent.L === p) parent.L = q; else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n    q.U = parent;\n    p.U = q;\n    p.L = q.R;\n    if (p.L) p.L.U = p;\n    q.R = p;\n  }\n  function d3_geom_voronoiRedBlackFirst(node) {\n    while (node.L) node = node.L;\n    return node;\n  }\n  function d3_geom_voronoi(sites, bbox) {\n    var site = sites.sort(d3_geom_voronoiVertexOrder).pop(), x0, y0, circle;\n    d3_geom_voronoiEdges = [];\n    d3_geom_voronoiCells = new Array(sites.length);\n    d3_geom_voronoiBeaches = new d3_geom_voronoiRedBlackTree();\n    d3_geom_voronoiCircles = new d3_geom_voronoiRedBlackTree();\n    while (true) {\n      circle = d3_geom_voronoiFirstCircle;\n      if (site && (!circle || site.y < circle.y || site.y === circle.y && site.x < circle.x)) {\n        if (site.x !== x0 || site.y !== y0) {\n          d3_geom_voronoiCells[site.i] = new d3_geom_voronoiCell(site);\n          d3_geom_voronoiAddBeach(site);\n          x0 = site.x, y0 = site.y;\n        }\n        site = sites.pop();\n      } else if (circle) {\n        d3_geom_voronoiRemoveBeach(circle.arc);\n      } else {\n        break;\n      }\n    }\n    if (bbox) d3_geom_voronoiClipEdges(bbox), d3_geom_voronoiCloseCells(bbox);\n    var diagram = {\n      cells: d3_geom_voronoiCells,\n      edges: d3_geom_voronoiEdges\n    };\n    d3_geom_voronoiBeaches = d3_geom_voronoiCircles = d3_geom_voronoiEdges = d3_geom_voronoiCells = null;\n    return diagram;\n  }\n  function d3_geom_voronoiVertexOrder(a, b) {\n    return b.y - a.y || b.x - a.x;\n  }\n  d3.geom.voronoi = function(points) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, fx = x, fy = y, clipExtent = d3_geom_voronoiClipExtent;\n    if (points) return voronoi(points);\n    function voronoi(data) {\n      var polygons = new Array(data.length), x0 = clipExtent[0][0], y0 = clipExtent[0][1], x1 = clipExtent[1][0], y1 = clipExtent[1][1];\n      d3_geom_voronoi(sites(data), clipExtent).cells.forEach(function(cell, i) {\n        var edges = cell.edges, site = cell.site, polygon = polygons[i] = edges.length ? edges.map(function(e) {\n          var s = e.start();\n          return [ s.x, s.y ];\n        }) : site.x >= x0 && site.x <= x1 && site.y >= y0 && site.y <= y1 ? [ [ x0, y1 ], [ x1, y1 ], [ x1, y0 ], [ x0, y0 ] ] : [];\n        polygon.point = data[i];\n      });\n      return polygons;\n    }\n    function sites(data) {\n      return data.map(function(d, i) {\n        return {\n          x: Math.round(fx(d, i) / ε) * ε,\n          y: Math.round(fy(d, i) / ε) * ε,\n          i: i\n        };\n      });\n    }\n    voronoi.links = function(data) {\n      return d3_geom_voronoi(sites(data)).edges.filter(function(edge) {\n        return edge.l && edge.r;\n      }).map(function(edge) {\n        return {\n          source: data[edge.l.i],\n          target: data[edge.r.i]\n        };\n      });\n    };\n    voronoi.triangles = function(data) {\n      var triangles = [];\n      d3_geom_voronoi(sites(data)).cells.forEach(function(cell, i) {\n        var site = cell.site, edges = cell.edges.sort(d3_geom_voronoiHalfEdgeOrder), j = -1, m = edges.length, e0, s0, e1 = edges[m - 1].edge, s1 = e1.l === site ? e1.r : e1.l;\n        while (++j < m) {\n          e0 = e1;\n          s0 = s1;\n          e1 = edges[j].edge;\n          s1 = e1.l === site ? e1.r : e1.l;\n          if (i < s0.i && i < s1.i && d3_geom_voronoiTriangleArea(site, s0, s1) < 0) {\n            triangles.push([ data[i], data[s0.i], data[s1.i] ]);\n          }\n        }\n      });\n      return triangles;\n    };\n    voronoi.x = function(_) {\n      return arguments.length ? (fx = d3_functor(x = _), voronoi) : x;\n    };\n    voronoi.y = function(_) {\n      return arguments.length ? (fy = d3_functor(y = _), voronoi) : y;\n    };\n    voronoi.clipExtent = function(_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent;\n      clipExtent = _ == null ? d3_geom_voronoiClipExtent : _;\n      return voronoi;\n    };\n    voronoi.size = function(_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent && clipExtent[1];\n      return voronoi.clipExtent(_ && [ [ 0, 0 ], _ ]);\n    };\n    return voronoi;\n  };\n  var d3_geom_voronoiClipExtent = [ [ -1e6, -1e6 ], [ 1e6, 1e6 ] ];\n  function d3_geom_voronoiTriangleArea(a, b, c) {\n    return (a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y);\n  }\n  d3.geom.delaunay = function(vertices) {\n    return d3.geom.voronoi().triangles(vertices);\n  };\n  d3.geom.quadtree = function(points, x1, y1, x2, y2) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, compat;\n    if (compat = arguments.length) {\n      x = d3_geom_quadtreeCompatX;\n      y = d3_geom_quadtreeCompatY;\n      if (compat === 3) {\n        y2 = y1;\n        x2 = x1;\n        y1 = x1 = 0;\n      }\n      return quadtree(points);\n    }\n    function quadtree(data) {\n      var d, fx = d3_functor(x), fy = d3_functor(y), xs, ys, i, n, x1_, y1_, x2_, y2_;\n      if (x1 != null) {\n        x1_ = x1, y1_ = y1, x2_ = x2, y2_ = y2;\n      } else {\n        x2_ = y2_ = -(x1_ = y1_ = Infinity);\n        xs = [], ys = [];\n        n = data.length;\n        if (compat) for (i = 0; i < n; ++i) {\n          d = data[i];\n          if (d.x < x1_) x1_ = d.x;\n          if (d.y < y1_) y1_ = d.y;\n          if (d.x > x2_) x2_ = d.x;\n          if (d.y > y2_) y2_ = d.y;\n          xs.push(d.x);\n          ys.push(d.y);\n        } else for (i = 0; i < n; ++i) {\n          var x_ = +fx(d = data[i], i), y_ = +fy(d, i);\n          if (x_ < x1_) x1_ = x_;\n          if (y_ < y1_) y1_ = y_;\n          if (x_ > x2_) x2_ = x_;\n          if (y_ > y2_) y2_ = y_;\n          xs.push(x_);\n          ys.push(y_);\n        }\n      }\n      var dx = x2_ - x1_, dy = y2_ - y1_;\n      if (dx > dy) y2_ = y1_ + dx; else x2_ = x1_ + dy;\n      function insert(n, d, x, y, x1, y1, x2, y2) {\n        if (isNaN(x) || isNaN(y)) return;\n        if (n.leaf) {\n          var nx = n.x, ny = n.y;\n          if (nx != null) {\n            if (abs(nx - x) + abs(ny - y) < .01) {\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            } else {\n              var nPoint = n.point;\n              n.x = n.y = n.point = null;\n              insertChild(n, nPoint, nx, ny, x1, y1, x2, y2);\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            }\n          } else {\n            n.x = x, n.y = y, n.point = d;\n          }\n        } else {\n          insertChild(n, d, x, y, x1, y1, x2, y2);\n        }\n      }\n      function insertChild(n, d, x, y, x1, y1, x2, y2) {\n        var xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym, i = below << 1 | right;\n        n.leaf = false;\n        n = n.nodes[i] || (n.nodes[i] = d3_geom_quadtreeNode());\n        if (right) x1 = xm; else x2 = xm;\n        if (below) y1 = ym; else y2 = ym;\n        insert(n, d, x, y, x1, y1, x2, y2);\n      }\n      var root = d3_geom_quadtreeNode();\n      root.add = function(d) {\n        insert(root, d, +fx(d, ++i), +fy(d, i), x1_, y1_, x2_, y2_);\n      };\n      root.visit = function(f) {\n        d3_geom_quadtreeVisit(f, root, x1_, y1_, x2_, y2_);\n      };\n      root.find = function(point) {\n        return d3_geom_quadtreeFind(root, point[0], point[1], x1_, y1_, x2_, y2_);\n      };\n      i = -1;\n      if (x1 == null) {\n        while (++i < n) {\n          insert(root, data[i], xs[i], ys[i], x1_, y1_, x2_, y2_);\n        }\n        --i;\n      } else data.forEach(root.add);\n      xs = ys = data = d = null;\n      return root;\n    }\n    quadtree.x = function(_) {\n      return arguments.length ? (x = _, quadtree) : x;\n    };\n    quadtree.y = function(_) {\n      return arguments.length ? (y = _, quadtree) : y;\n    };\n    quadtree.extent = function(_) {\n      if (!arguments.length) return x1 == null ? null : [ [ x1, y1 ], [ x2, y2 ] ];\n      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = +_[0][0], y1 = +_[0][1], x2 = +_[1][0], \n      y2 = +_[1][1];\n      return quadtree;\n    };\n    quadtree.size = function(_) {\n      if (!arguments.length) return x1 == null ? null : [ x2 - x1, y2 - y1 ];\n      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = y1 = 0, x2 = +_[0], y2 = +_[1];\n      return quadtree;\n    };\n    return quadtree;\n  };\n  function d3_geom_quadtreeCompatX(d) {\n    return d.x;\n  }\n  function d3_geom_quadtreeCompatY(d) {\n    return d.y;\n  }\n  function d3_geom_quadtreeNode() {\n    return {\n      leaf: true,\n      nodes: [],\n      point: null,\n      x: null,\n      y: null\n    };\n  }\n  function d3_geom_quadtreeVisit(f, node, x1, y1, x2, y2) {\n    if (!f(node, x1, y1, x2, y2)) {\n      var sx = (x1 + x2) * .5, sy = (y1 + y2) * .5, children = node.nodes;\n      if (children[0]) d3_geom_quadtreeVisit(f, children[0], x1, y1, sx, sy);\n      if (children[1]) d3_geom_quadtreeVisit(f, children[1], sx, y1, x2, sy);\n      if (children[2]) d3_geom_quadtreeVisit(f, children[2], x1, sy, sx, y2);\n      if (children[3]) d3_geom_quadtreeVisit(f, children[3], sx, sy, x2, y2);\n    }\n  }\n  function d3_geom_quadtreeFind(root, x, y, x0, y0, x3, y3) {\n    var minDistance2 = Infinity, closestPoint;\n    (function find(node, x1, y1, x2, y2) {\n      if (x1 > x3 || y1 > y3 || x2 < x0 || y2 < y0) return;\n      if (point = node.point) {\n        var point, dx = x - node.x, dy = y - node.y, distance2 = dx * dx + dy * dy;\n        if (distance2 < minDistance2) {\n          var distance = Math.sqrt(minDistance2 = distance2);\n          x0 = x - distance, y0 = y - distance;\n          x3 = x + distance, y3 = y + distance;\n          closestPoint = point;\n        }\n      }\n      var children = node.nodes, xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym;\n      for (var i = below << 1 | right, j = i + 4; i < j; ++i) {\n        if (node = children[i & 3]) switch (i & 3) {\n         case 0:\n          find(node, x1, y1, xm, ym);\n          break;\n\n         case 1:\n          find(node, xm, y1, x2, ym);\n          break;\n\n         case 2:\n          find(node, x1, ym, xm, y2);\n          break;\n\n         case 3:\n          find(node, xm, ym, x2, y2);\n          break;\n        }\n      }\n    })(root, x0, y0, x3, y3);\n    return closestPoint;\n  }\n  d3.interpolateRgb = d3_interpolateRgb;\n  function d3_interpolateRgb(a, b) {\n    a = d3.rgb(a);\n    b = d3.rgb(b);\n    var ar = a.r, ag = a.g, ab = a.b, br = b.r - ar, bg = b.g - ag, bb = b.b - ab;\n    return function(t) {\n      return \"#\" + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t));\n    };\n  }\n  d3.interpolateObject = d3_interpolateObject;\n  function d3_interpolateObject(a, b) {\n    var i = {}, c = {}, k;\n    for (k in a) {\n      if (k in b) {\n        i[k] = d3_interpolate(a[k], b[k]);\n      } else {\n        c[k] = a[k];\n      }\n    }\n    for (k in b) {\n      if (!(k in a)) {\n        c[k] = b[k];\n      }\n    }\n    return function(t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n  d3.interpolateNumber = d3_interpolateNumber;\n  function d3_interpolateNumber(a, b) {\n    a = +a, b = +b;\n    return function(t) {\n      return a * (1 - t) + b * t;\n    };\n  }\n  d3.interpolateString = d3_interpolateString;\n  function d3_interpolateString(a, b) {\n    var bi = d3_interpolate_numberA.lastIndex = d3_interpolate_numberB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];\n    a = a + \"\", b = b + \"\";\n    while ((am = d3_interpolate_numberA.exec(a)) && (bm = d3_interpolate_numberB.exec(b))) {\n      if ((bs = bm.index) > bi) {\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) {\n        if (s[i]) s[i] += bm; else s[++i] = bm;\n      } else {\n        s[++i] = null;\n        q.push({\n          i: i,\n          x: d3_interpolateNumber(am, bm)\n        });\n      }\n      bi = d3_interpolate_numberB.lastIndex;\n    }\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; else s[++i] = bs;\n    }\n    return s.length < 2 ? q[0] ? (b = q[0].x, function(t) {\n      return b(t) + \"\";\n    }) : function() {\n      return b;\n    } : (b = q.length, function(t) {\n      for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    });\n  }\n  var d3_interpolate_numberA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g, d3_interpolate_numberB = new RegExp(d3_interpolate_numberA.source, \"g\");\n  d3.interpolate = d3_interpolate;\n  function d3_interpolate(a, b) {\n    var i = d3.interpolators.length, f;\n    while (--i >= 0 && !(f = d3.interpolators[i](a, b))) ;\n    return f;\n  }\n  d3.interpolators = [ function(a, b) {\n    var t = typeof b;\n    return (t === \"string\" ? d3_rgb_names.has(b.toLowerCase()) || /^(#|rgb\\(|hsl\\()/i.test(b) ? d3_interpolateRgb : d3_interpolateString : b instanceof d3_color ? d3_interpolateRgb : Array.isArray(b) ? d3_interpolateArray : t === \"object\" && isNaN(b) ? d3_interpolateObject : d3_interpolateNumber)(a, b);\n  } ];\n  d3.interpolateArray = d3_interpolateArray;\n  function d3_interpolateArray(a, b) {\n    var x = [], c = [], na = a.length, nb = b.length, n0 = Math.min(a.length, b.length), i;\n    for (i = 0; i < n0; ++i) x.push(d3_interpolate(a[i], b[i]));\n    for (;i < na; ++i) c[i] = a[i];\n    for (;i < nb; ++i) c[i] = b[i];\n    return function(t) {\n      for (i = 0; i < n0; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n  var d3_ease_default = function() {\n    return d3_identity;\n  };\n  var d3_ease = d3.map({\n    linear: d3_ease_default,\n    poly: d3_ease_poly,\n    quad: function() {\n      return d3_ease_quad;\n    },\n    cubic: function() {\n      return d3_ease_cubic;\n    },\n    sin: function() {\n      return d3_ease_sin;\n    },\n    exp: function() {\n      return d3_ease_exp;\n    },\n    circle: function() {\n      return d3_ease_circle;\n    },\n    elastic: d3_ease_elastic,\n    back: d3_ease_back,\n    bounce: function() {\n      return d3_ease_bounce;\n    }\n  });\n  var d3_ease_mode = d3.map({\n    \"in\": d3_identity,\n    out: d3_ease_reverse,\n    \"in-out\": d3_ease_reflect,\n    \"out-in\": function(f) {\n      return d3_ease_reflect(d3_ease_reverse(f));\n    }\n  });\n  d3.ease = function(name) {\n    var i = name.indexOf(\"-\"), t = i >= 0 ? name.slice(0, i) : name, m = i >= 0 ? name.slice(i + 1) : \"in\";\n    t = d3_ease.get(t) || d3_ease_default;\n    m = d3_ease_mode.get(m) || d3_identity;\n    return d3_ease_clamp(m(t.apply(null, d3_arraySlice.call(arguments, 1))));\n  };\n  function d3_ease_clamp(f) {\n    return function(t) {\n      return t <= 0 ? 0 : t >= 1 ? 1 : f(t);\n    };\n  }\n  function d3_ease_reverse(f) {\n    return function(t) {\n      return 1 - f(1 - t);\n    };\n  }\n  function d3_ease_reflect(f) {\n    return function(t) {\n      return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));\n    };\n  }\n  function d3_ease_quad(t) {\n    return t * t;\n  }\n  function d3_ease_cubic(t) {\n    return t * t * t;\n  }\n  function d3_ease_cubicInOut(t) {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    var t2 = t * t, t3 = t2 * t;\n    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n  }\n  function d3_ease_poly(e) {\n    return function(t) {\n      return Math.pow(t, e);\n    };\n  }\n  function d3_ease_sin(t) {\n    return 1 - Math.cos(t * halfπ);\n  }\n  function d3_ease_exp(t) {\n    return Math.pow(2, 10 * (t - 1));\n  }\n  function d3_ease_circle(t) {\n    return 1 - Math.sqrt(1 - t * t);\n  }\n  function d3_ease_elastic(a, p) {\n    var s;\n    if (arguments.length < 2) p = .45;\n    if (arguments.length) s = p / τ * Math.asin(1 / a); else a = 1, s = p / 4;\n    return function(t) {\n      return 1 + a * Math.pow(2, -10 * t) * Math.sin((t - s) * τ / p);\n    };\n  }\n  function d3_ease_back(s) {\n    if (!s) s = 1.70158;\n    return function(t) {\n      return t * t * ((s + 1) * t - s);\n    };\n  }\n  function d3_ease_bounce(t) {\n    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;\n  }\n  d3.interpolateHcl = d3_interpolateHcl;\n  function d3_interpolateHcl(a, b) {\n    a = d3.hcl(a);\n    b = d3.hcl(b);\n    var ah = a.h, ac = a.c, al = a.l, bh = b.h - ah, bc = b.c - ac, bl = b.l - al;\n    if (isNaN(bc)) bc = 0, ac = isNaN(ac) ? b.c : ac;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;\n    return function(t) {\n      return d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + \"\";\n    };\n  }\n  d3.interpolateHsl = d3_interpolateHsl;\n  function d3_interpolateHsl(a, b) {\n    a = d3.hsl(a);\n    b = d3.hsl(b);\n    var ah = a.h, as = a.s, al = a.l, bh = b.h - ah, bs = b.s - as, bl = b.l - al;\n    if (isNaN(bs)) bs = 0, as = isNaN(as) ? b.s : as;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;\n    return function(t) {\n      return d3_hsl_rgb(ah + bh * t, as + bs * t, al + bl * t) + \"\";\n    };\n  }\n  d3.interpolateLab = d3_interpolateLab;\n  function d3_interpolateLab(a, b) {\n    a = d3.lab(a);\n    b = d3.lab(b);\n    var al = a.l, aa = a.a, ab = a.b, bl = b.l - al, ba = b.a - aa, bb = b.b - ab;\n    return function(t) {\n      return d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + \"\";\n    };\n  }\n  d3.interpolateRound = d3_interpolateRound;\n  function d3_interpolateRound(a, b) {\n    b -= a;\n    return function(t) {\n      return Math.round(a + b * t);\n    };\n  }\n  d3.transform = function(string) {\n    var g = d3_document.createElementNS(d3.ns.prefix.svg, \"g\");\n    return (d3.transform = function(string) {\n      if (string != null) {\n        g.setAttribute(\"transform\", string);\n        var t = g.transform.baseVal.consolidate();\n      }\n      return new d3_transform(t ? t.matrix : d3_transformIdentity);\n    })(string);\n  };\n  function d3_transform(m) {\n    var r0 = [ m.a, m.b ], r1 = [ m.c, m.d ], kx = d3_transformNormalize(r0), kz = d3_transformDot(r0, r1), ky = d3_transformNormalize(d3_transformCombine(r1, r0, -kz)) || 0;\n    if (r0[0] * r1[1] < r1[0] * r0[1]) {\n      r0[0] *= -1;\n      r0[1] *= -1;\n      kx *= -1;\n      kz *= -1;\n    }\n    this.rotate = (kx ? Math.atan2(r0[1], r0[0]) : Math.atan2(-r1[0], r1[1])) * d3_degrees;\n    this.translate = [ m.e, m.f ];\n    this.scale = [ kx, ky ];\n    this.skew = ky ? Math.atan2(kz, ky) * d3_degrees : 0;\n  }\n  d3_transform.prototype.toString = function() {\n    return \"translate(\" + this.translate + \")rotate(\" + this.rotate + \")skewX(\" + this.skew + \")scale(\" + this.scale + \")\";\n  };\n  function d3_transformDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n  }\n  function d3_transformNormalize(a) {\n    var k = Math.sqrt(d3_transformDot(a, a));\n    if (k) {\n      a[0] /= k;\n      a[1] /= k;\n    }\n    return k;\n  }\n  function d3_transformCombine(a, b, k) {\n    a[0] += k * b[0];\n    a[1] += k * b[1];\n    return a;\n  }\n  var d3_transformIdentity = {\n    a: 1,\n    b: 0,\n    c: 0,\n    d: 1,\n    e: 0,\n    f: 0\n  };\n  d3.interpolateTransform = d3_interpolateTransform;\n  function d3_interpolateTransformPop(s) {\n    return s.length ? s.pop() + \",\" : \"\";\n  }\n  function d3_interpolateTranslate(ta, tb, s, q) {\n    if (ta[0] !== tb[0] || ta[1] !== tb[1]) {\n      var i = s.push(\"translate(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ta[0], tb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ta[1], tb[1])\n      });\n    } else if (tb[0] || tb[1]) {\n      s.push(\"translate(\" + tb + \")\");\n    }\n  }\n  function d3_interpolateRotate(ra, rb, s, q) {\n    if (ra !== rb) {\n      if (ra - rb > 180) rb += 360; else if (rb - ra > 180) ra += 360;\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"rotate(\", null, \")\") - 2,\n        x: d3_interpolateNumber(ra, rb)\n      });\n    } else if (rb) {\n      s.push(d3_interpolateTransformPop(s) + \"rotate(\" + rb + \")\");\n    }\n  }\n  function d3_interpolateSkew(wa, wb, s, q) {\n    if (wa !== wb) {\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"skewX(\", null, \")\") - 2,\n        x: d3_interpolateNumber(wa, wb)\n      });\n    } else if (wb) {\n      s.push(d3_interpolateTransformPop(s) + \"skewX(\" + wb + \")\");\n    }\n  }\n  function d3_interpolateScale(ka, kb, s, q) {\n    if (ka[0] !== kb[0] || ka[1] !== kb[1]) {\n      var i = s.push(d3_interpolateTransformPop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ka[0], kb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ka[1], kb[1])\n      });\n    } else if (kb[0] !== 1 || kb[1] !== 1) {\n      s.push(d3_interpolateTransformPop(s) + \"scale(\" + kb + \")\");\n    }\n  }\n  function d3_interpolateTransform(a, b) {\n    var s = [], q = [];\n    a = d3.transform(a), b = d3.transform(b);\n    d3_interpolateTranslate(a.translate, b.translate, s, q);\n    d3_interpolateRotate(a.rotate, b.rotate, s, q);\n    d3_interpolateSkew(a.skew, b.skew, s, q);\n    d3_interpolateScale(a.scale, b.scale, s, q);\n    a = b = null;\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  }\n  function d3_uninterpolateNumber(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function(x) {\n      return (x - a) / b;\n    };\n  }\n  function d3_uninterpolateClamp(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function(x) {\n      return Math.max(0, Math.min(1, (x - a) / b));\n    };\n  }\n  d3.layout = {};\n  d3.layout.bundle = function() {\n    return function(links) {\n      var paths = [], i = -1, n = links.length;\n      while (++i < n) paths.push(d3_layout_bundlePath(links[i]));\n      return paths;\n    };\n  };\n  function d3_layout_bundlePath(link) {\n    var start = link.source, end = link.target, lca = d3_layout_bundleLeastCommonAncestor(start, end), points = [ start ];\n    while (start !== lca) {\n      start = start.parent;\n      points.push(start);\n    }\n    var k = points.length;\n    while (end !== lca) {\n      points.splice(k, 0, end);\n      end = end.parent;\n    }\n    return points;\n  }\n  function d3_layout_bundleAncestors(node) {\n    var ancestors = [], parent = node.parent;\n    while (parent != null) {\n      ancestors.push(node);\n      node = parent;\n      parent = parent.parent;\n    }\n    ancestors.push(node);\n    return ancestors;\n  }\n  function d3_layout_bundleLeastCommonAncestor(a, b) {\n    if (a === b) return a;\n    var aNodes = d3_layout_bundleAncestors(a), bNodes = d3_layout_bundleAncestors(b), aNode = aNodes.pop(), bNode = bNodes.pop(), sharedNode = null;\n    while (aNode === bNode) {\n      sharedNode = aNode;\n      aNode = aNodes.pop();\n      bNode = bNodes.pop();\n    }\n    return sharedNode;\n  }\n  d3.layout.chord = function() {\n    var chord = {}, chords, groups, matrix, n, padding = 0, sortGroups, sortSubgroups, sortChords;\n    function relayout() {\n      var subgroups = {}, groupSums = [], groupIndex = d3.range(n), subgroupIndex = [], k, x, x0, i, j;\n      chords = [];\n      groups = [];\n      k = 0, i = -1;\n      while (++i < n) {\n        x = 0, j = -1;\n        while (++j < n) {\n          x += matrix[i][j];\n        }\n        groupSums.push(x);\n        subgroupIndex.push(d3.range(n));\n        k += x;\n      }\n      if (sortGroups) {\n        groupIndex.sort(function(a, b) {\n          return sortGroups(groupSums[a], groupSums[b]);\n        });\n      }\n      if (sortSubgroups) {\n        subgroupIndex.forEach(function(d, i) {\n          d.sort(function(a, b) {\n            return sortSubgroups(matrix[i][a], matrix[i][b]);\n          });\n        });\n      }\n      k = (τ - padding * n) / k;\n      x = 0, i = -1;\n      while (++i < n) {\n        x0 = x, j = -1;\n        while (++j < n) {\n          var di = groupIndex[i], dj = subgroupIndex[di][j], v = matrix[di][dj], a0 = x, a1 = x += v * k;\n          subgroups[di + \"-\" + dj] = {\n            index: di,\n            subindex: dj,\n            startAngle: a0,\n            endAngle: a1,\n            value: v\n          };\n        }\n        groups[di] = {\n          index: di,\n          startAngle: x0,\n          endAngle: x,\n          value: groupSums[di]\n        };\n        x += padding;\n      }\n      i = -1;\n      while (++i < n) {\n        j = i - 1;\n        while (++j < n) {\n          var source = subgroups[i + \"-\" + j], target = subgroups[j + \"-\" + i];\n          if (source.value || target.value) {\n            chords.push(source.value < target.value ? {\n              source: target,\n              target: source\n            } : {\n              source: source,\n              target: target\n            });\n          }\n        }\n      }\n      if (sortChords) resort();\n    }\n    function resort() {\n      chords.sort(function(a, b) {\n        return sortChords((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2);\n      });\n    }\n    chord.matrix = function(x) {\n      if (!arguments.length) return matrix;\n      n = (matrix = x) && matrix.length;\n      chords = groups = null;\n      return chord;\n    };\n    chord.padding = function(x) {\n      if (!arguments.length) return padding;\n      padding = x;\n      chords = groups = null;\n      return chord;\n    };\n    chord.sortGroups = function(x) {\n      if (!arguments.length) return sortGroups;\n      sortGroups = x;\n      chords = groups = null;\n      return chord;\n    };\n    chord.sortSubgroups = function(x) {\n      if (!arguments.length) return sortSubgroups;\n      sortSubgroups = x;\n      chords = null;\n      return chord;\n    };\n    chord.sortChords = function(x) {\n      if (!arguments.length) return sortChords;\n      sortChords = x;\n      if (chords) resort();\n      return chord;\n    };\n    chord.chords = function() {\n      if (!chords) relayout();\n      return chords;\n    };\n    chord.groups = function() {\n      if (!groups) relayout();\n      return groups;\n    };\n    return chord;\n  };\n  d3.layout.force = function() {\n    var force = {}, event = d3.dispatch(\"start\", \"tick\", \"end\"), timer, size = [ 1, 1 ], drag, alpha, friction = .9, linkDistance = d3_layout_forceLinkDistance, linkStrength = d3_layout_forceLinkStrength, charge = -30, chargeDistance2 = d3_layout_forceChargeDistance2, gravity = .1, theta2 = .64, nodes = [], links = [], distances, strengths, charges;\n    function repulse(node) {\n      return function(quad, x1, _, x2) {\n        if (quad.point !== node) {\n          var dx = quad.cx - node.x, dy = quad.cy - node.y, dw = x2 - x1, dn = dx * dx + dy * dy;\n          if (dw * dw / theta2 < dn) {\n            if (dn < chargeDistance2) {\n              var k = quad.charge / dn;\n              node.px -= dx * k;\n              node.py -= dy * k;\n            }\n            return true;\n          }\n          if (quad.point && dn && dn < chargeDistance2) {\n            var k = quad.pointCharge / dn;\n            node.px -= dx * k;\n            node.py -= dy * k;\n          }\n        }\n        return !quad.charge;\n      };\n    }\n    force.tick = function() {\n      if ((alpha *= .99) < .005) {\n        timer = null;\n        event.end({\n          type: \"end\",\n          alpha: alpha = 0\n        });\n        return true;\n      }\n      var n = nodes.length, m = links.length, q, i, o, s, t, l, k, x, y;\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        s = o.source;\n        t = o.target;\n        x = t.x - s.x;\n        y = t.y - s.y;\n        if (l = x * x + y * y) {\n          l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l;\n          x *= l;\n          y *= l;\n          t.x -= x * (k = s.weight + t.weight ? s.weight / (s.weight + t.weight) : .5);\n          t.y -= y * k;\n          s.x += x * (k = 1 - k);\n          s.y += y * k;\n        }\n      }\n      if (k = alpha * gravity) {\n        x = size[0] / 2;\n        y = size[1] / 2;\n        i = -1;\n        if (k) while (++i < n) {\n          o = nodes[i];\n          o.x += (x - o.x) * k;\n          o.y += (y - o.y) * k;\n        }\n      }\n      if (charge) {\n        d3_layout_forceAccumulate(q = d3.geom.quadtree(nodes), alpha, charges);\n        i = -1;\n        while (++i < n) {\n          if (!(o = nodes[i]).fixed) {\n            q.visit(repulse(o));\n          }\n        }\n      }\n      i = -1;\n      while (++i < n) {\n        o = nodes[i];\n        if (o.fixed) {\n          o.x = o.px;\n          o.y = o.py;\n        } else {\n          o.x -= (o.px - (o.px = o.x)) * friction;\n          o.y -= (o.py - (o.py = o.y)) * friction;\n        }\n      }\n      event.tick({\n        type: \"tick\",\n        alpha: alpha\n      });\n    };\n    force.nodes = function(x) {\n      if (!arguments.length) return nodes;\n      nodes = x;\n      return force;\n    };\n    force.links = function(x) {\n      if (!arguments.length) return links;\n      links = x;\n      return force;\n    };\n    force.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return force;\n    };\n    force.linkDistance = function(x) {\n      if (!arguments.length) return linkDistance;\n      linkDistance = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.distance = force.linkDistance;\n    force.linkStrength = function(x) {\n      if (!arguments.length) return linkStrength;\n      linkStrength = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.friction = function(x) {\n      if (!arguments.length) return friction;\n      friction = +x;\n      return force;\n    };\n    force.charge = function(x) {\n      if (!arguments.length) return charge;\n      charge = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.chargeDistance = function(x) {\n      if (!arguments.length) return Math.sqrt(chargeDistance2);\n      chargeDistance2 = x * x;\n      return force;\n    };\n    force.gravity = function(x) {\n      if (!arguments.length) return gravity;\n      gravity = +x;\n      return force;\n    };\n    force.theta = function(x) {\n      if (!arguments.length) return Math.sqrt(theta2);\n      theta2 = x * x;\n      return force;\n    };\n    force.alpha = function(x) {\n      if (!arguments.length) return alpha;\n      x = +x;\n      if (alpha) {\n        if (x > 0) {\n          alpha = x;\n        } else {\n          timer.c = null, timer.t = NaN, timer = null;\n          event.end({\n            type: \"end\",\n            alpha: alpha = 0\n          });\n        }\n      } else if (x > 0) {\n        event.start({\n          type: \"start\",\n          alpha: alpha = x\n        });\n        timer = d3_timer(force.tick);\n      }\n      return force;\n    };\n    force.start = function() {\n      var i, n = nodes.length, m = links.length, w = size[0], h = size[1], neighbors, o;\n      for (i = 0; i < n; ++i) {\n        (o = nodes[i]).index = i;\n        o.weight = 0;\n      }\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        if (typeof o.source == \"number\") o.source = nodes[o.source];\n        if (typeof o.target == \"number\") o.target = nodes[o.target];\n        ++o.source.weight;\n        ++o.target.weight;\n      }\n      for (i = 0; i < n; ++i) {\n        o = nodes[i];\n        if (isNaN(o.x)) o.x = position(\"x\", w);\n        if (isNaN(o.y)) o.y = position(\"y\", h);\n        if (isNaN(o.px)) o.px = o.x;\n        if (isNaN(o.py)) o.py = o.y;\n      }\n      distances = [];\n      if (typeof linkDistance === \"function\") for (i = 0; i < m; ++i) distances[i] = +linkDistance.call(this, links[i], i); else for (i = 0; i < m; ++i) distances[i] = linkDistance;\n      strengths = [];\n      if (typeof linkStrength === \"function\") for (i = 0; i < m; ++i) strengths[i] = +linkStrength.call(this, links[i], i); else for (i = 0; i < m; ++i) strengths[i] = linkStrength;\n      charges = [];\n      if (typeof charge === \"function\") for (i = 0; i < n; ++i) charges[i] = +charge.call(this, nodes[i], i); else for (i = 0; i < n; ++i) charges[i] = charge;\n      function position(dimension, size) {\n        if (!neighbors) {\n          neighbors = new Array(n);\n          for (j = 0; j < n; ++j) {\n            neighbors[j] = [];\n          }\n          for (j = 0; j < m; ++j) {\n            var o = links[j];\n            neighbors[o.source.index].push(o.target);\n            neighbors[o.target.index].push(o.source);\n          }\n        }\n        var candidates = neighbors[i], j = -1, l = candidates.length, x;\n        while (++j < l) if (!isNaN(x = candidates[j][dimension])) return x;\n        return Math.random() * size;\n      }\n      return force.resume();\n    };\n    force.resume = function() {\n      return force.alpha(.1);\n    };\n    force.stop = function() {\n      return force.alpha(0);\n    };\n    force.drag = function() {\n      if (!drag) drag = d3.behavior.drag().origin(d3_identity).on(\"dragstart.force\", d3_layout_forceDragstart).on(\"drag.force\", dragmove).on(\"dragend.force\", d3_layout_forceDragend);\n      if (!arguments.length) return drag;\n      this.on(\"mouseover.force\", d3_layout_forceMouseover).on(\"mouseout.force\", d3_layout_forceMouseout).call(drag);\n    };\n    function dragmove(d) {\n      d.px = d3.event.x, d.py = d3.event.y;\n      force.resume();\n    }\n    return d3.rebind(force, event, \"on\");\n  };\n  function d3_layout_forceDragstart(d) {\n    d.fixed |= 2;\n  }\n  function d3_layout_forceDragend(d) {\n    d.fixed &= ~6;\n  }\n  function d3_layout_forceMouseover(d) {\n    d.fixed |= 4;\n    d.px = d.x, d.py = d.y;\n  }\n  function d3_layout_forceMouseout(d) {\n    d.fixed &= ~4;\n  }\n  function d3_layout_forceAccumulate(quad, alpha, charges) {\n    var cx = 0, cy = 0;\n    quad.charge = 0;\n    if (!quad.leaf) {\n      var nodes = quad.nodes, n = nodes.length, i = -1, c;\n      while (++i < n) {\n        c = nodes[i];\n        if (c == null) continue;\n        d3_layout_forceAccumulate(c, alpha, charges);\n        quad.charge += c.charge;\n        cx += c.charge * c.cx;\n        cy += c.charge * c.cy;\n      }\n    }\n    if (quad.point) {\n      if (!quad.leaf) {\n        quad.point.x += Math.random() - .5;\n        quad.point.y += Math.random() - .5;\n      }\n      var k = alpha * charges[quad.point.index];\n      quad.charge += quad.pointCharge = k;\n      cx += k * quad.point.x;\n      cy += k * quad.point.y;\n    }\n    quad.cx = cx / quad.charge;\n    quad.cy = cy / quad.charge;\n  }\n  var d3_layout_forceLinkDistance = 20, d3_layout_forceLinkStrength = 1, d3_layout_forceChargeDistance2 = Infinity;\n  d3.layout.hierarchy = function() {\n    var sort = d3_layout_hierarchySort, children = d3_layout_hierarchyChildren, value = d3_layout_hierarchyValue;\n    function hierarchy(root) {\n      var stack = [ root ], nodes = [], node;\n      root.depth = 0;\n      while ((node = stack.pop()) != null) {\n        nodes.push(node);\n        if ((childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {\n          var n, childs, child;\n          while (--n >= 0) {\n            stack.push(child = childs[n]);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n          if (value) node.value = 0;\n          node.children = childs;\n        } else {\n          if (value) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          delete node.children;\n        }\n      }\n      d3_layout_hierarchyVisitAfter(root, function(node) {\n        var childs, parent;\n        if (sort && (childs = node.children)) childs.sort(sort);\n        if (value && (parent = node.parent)) parent.value += node.value;\n      });\n      return nodes;\n    }\n    hierarchy.sort = function(x) {\n      if (!arguments.length) return sort;\n      sort = x;\n      return hierarchy;\n    };\n    hierarchy.children = function(x) {\n      if (!arguments.length) return children;\n      children = x;\n      return hierarchy;\n    };\n    hierarchy.value = function(x) {\n      if (!arguments.length) return value;\n      value = x;\n      return hierarchy;\n    };\n    hierarchy.revalue = function(root) {\n      if (value) {\n        d3_layout_hierarchyVisitBefore(root, function(node) {\n          if (node.children) node.value = 0;\n        });\n        d3_layout_hierarchyVisitAfter(root, function(node) {\n          var parent;\n          if (!node.children) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          if (parent = node.parent) parent.value += node.value;\n        });\n      }\n      return root;\n    };\n    return hierarchy;\n  };\n  function d3_layout_hierarchyRebind(object, hierarchy) {\n    d3.rebind(object, hierarchy, \"sort\", \"children\", \"value\");\n    object.nodes = object;\n    object.links = d3_layout_hierarchyLinks;\n    return object;\n  }\n  function d3_layout_hierarchyVisitBefore(node, callback) {\n    var nodes = [ node ];\n    while ((node = nodes.pop()) != null) {\n      callback(node);\n      if ((children = node.children) && (n = children.length)) {\n        var n, children;\n        while (--n >= 0) nodes.push(children[n]);\n      }\n    }\n  }\n  function d3_layout_hierarchyVisitAfter(node, callback) {\n    var nodes = [ node ], nodes2 = [];\n    while ((node = nodes.pop()) != null) {\n      nodes2.push(node);\n      if ((children = node.children) && (n = children.length)) {\n        var i = -1, n, children;\n        while (++i < n) nodes.push(children[i]);\n      }\n    }\n    while ((node = nodes2.pop()) != null) {\n      callback(node);\n    }\n  }\n  function d3_layout_hierarchyChildren(d) {\n    return d.children;\n  }\n  function d3_layout_hierarchyValue(d) {\n    return d.value;\n  }\n  function d3_layout_hierarchySort(a, b) {\n    return b.value - a.value;\n  }\n  function d3_layout_hierarchyLinks(nodes) {\n    return d3.merge(nodes.map(function(parent) {\n      return (parent.children || []).map(function(child) {\n        return {\n          source: parent,\n          target: child\n        };\n      });\n    }));\n  }\n  d3.layout.partition = function() {\n    var hierarchy = d3.layout.hierarchy(), size = [ 1, 1 ];\n    function position(node, x, dx, dy) {\n      var children = node.children;\n      node.x = x;\n      node.y = node.depth * dy;\n      node.dx = dx;\n      node.dy = dy;\n      if (children && (n = children.length)) {\n        var i = -1, n, c, d;\n        dx = node.value ? dx / node.value : 0;\n        while (++i < n) {\n          position(c = children[i], x, d = c.value * dx, dy);\n          x += d;\n        }\n      }\n    }\n    function depth(node) {\n      var children = node.children, d = 0;\n      if (children && (n = children.length)) {\n        var i = -1, n;\n        while (++i < n) d = Math.max(d, depth(children[i]));\n      }\n      return 1 + d;\n    }\n    function partition(d, i) {\n      var nodes = hierarchy.call(this, d, i);\n      position(nodes[0], 0, size[0], size[1] / depth(nodes[0]));\n      return nodes;\n    }\n    partition.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return partition;\n    };\n    return d3_layout_hierarchyRebind(partition, hierarchy);\n  };\n  d3.layout.pie = function() {\n    var value = Number, sort = d3_layout_pieSortByValue, startAngle = 0, endAngle = τ, padAngle = 0;\n    function pie(data) {\n      var n = data.length, values = data.map(function(d, i) {\n        return +value.call(pie, d, i);\n      }), a = +(typeof startAngle === \"function\" ? startAngle.apply(this, arguments) : startAngle), da = (typeof endAngle === \"function\" ? endAngle.apply(this, arguments) : endAngle) - a, p = Math.min(Math.abs(da) / n, +(typeof padAngle === \"function\" ? padAngle.apply(this, arguments) : padAngle)), pa = p * (da < 0 ? -1 : 1), sum = d3.sum(values), k = sum ? (da - n * pa) / sum : 0, index = d3.range(n), arcs = [], v;\n      if (sort != null) index.sort(sort === d3_layout_pieSortByValue ? function(i, j) {\n        return values[j] - values[i];\n      } : function(i, j) {\n        return sort(data[i], data[j]);\n      });\n      index.forEach(function(i) {\n        arcs[i] = {\n          data: data[i],\n          value: v = values[i],\n          startAngle: a,\n          endAngle: a += v * k + pa,\n          padAngle: p\n        };\n      });\n      return arcs;\n    }\n    pie.value = function(_) {\n      if (!arguments.length) return value;\n      value = _;\n      return pie;\n    };\n    pie.sort = function(_) {\n      if (!arguments.length) return sort;\n      sort = _;\n      return pie;\n    };\n    pie.startAngle = function(_) {\n      if (!arguments.length) return startAngle;\n      startAngle = _;\n      return pie;\n    };\n    pie.endAngle = function(_) {\n      if (!arguments.length) return endAngle;\n      endAngle = _;\n      return pie;\n    };\n    pie.padAngle = function(_) {\n      if (!arguments.length) return padAngle;\n      padAngle = _;\n      return pie;\n    };\n    return pie;\n  };\n  var d3_layout_pieSortByValue = {};\n  d3.layout.stack = function() {\n    var values = d3_identity, order = d3_layout_stackOrderDefault, offset = d3_layout_stackOffsetZero, out = d3_layout_stackOut, x = d3_layout_stackX, y = d3_layout_stackY;\n    function stack(data, index) {\n      if (!(n = data.length)) return data;\n      var series = data.map(function(d, i) {\n        return values.call(stack, d, i);\n      });\n      var points = series.map(function(d) {\n        return d.map(function(v, i) {\n          return [ x.call(stack, v, i), y.call(stack, v, i) ];\n        });\n      });\n      var orders = order.call(stack, points, index);\n      series = d3.permute(series, orders);\n      points = d3.permute(points, orders);\n      var offsets = offset.call(stack, points, index);\n      var m = series[0].length, n, i, j, o;\n      for (j = 0; j < m; ++j) {\n        out.call(stack, series[0][j], o = offsets[j], points[0][j][1]);\n        for (i = 1; i < n; ++i) {\n          out.call(stack, series[i][j], o += points[i - 1][j][1], points[i][j][1]);\n        }\n      }\n      return data;\n    }\n    stack.values = function(x) {\n      if (!arguments.length) return values;\n      values = x;\n      return stack;\n    };\n    stack.order = function(x) {\n      if (!arguments.length) return order;\n      order = typeof x === \"function\" ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault;\n      return stack;\n    };\n    stack.offset = function(x) {\n      if (!arguments.length) return offset;\n      offset = typeof x === \"function\" ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero;\n      return stack;\n    };\n    stack.x = function(z) {\n      if (!arguments.length) return x;\n      x = z;\n      return stack;\n    };\n    stack.y = function(z) {\n      if (!arguments.length) return y;\n      y = z;\n      return stack;\n    };\n    stack.out = function(z) {\n      if (!arguments.length) return out;\n      out = z;\n      return stack;\n    };\n    return stack;\n  };\n  function d3_layout_stackX(d) {\n    return d.x;\n  }\n  function d3_layout_stackY(d) {\n    return d.y;\n  }\n  function d3_layout_stackOut(d, y0, y) {\n    d.y0 = y0;\n    d.y = y;\n  }\n  var d3_layout_stackOrders = d3.map({\n    \"inside-out\": function(data) {\n      var n = data.length, i, j, max = data.map(d3_layout_stackMaxIndex), sums = data.map(d3_layout_stackReduceSum), index = d3.range(n).sort(function(a, b) {\n        return max[a] - max[b];\n      }), top = 0, bottom = 0, tops = [], bottoms = [];\n      for (i = 0; i < n; ++i) {\n        j = index[i];\n        if (top < bottom) {\n          top += sums[j];\n          tops.push(j);\n        } else {\n          bottom += sums[j];\n          bottoms.push(j);\n        }\n      }\n      return bottoms.reverse().concat(tops);\n    },\n    reverse: function(data) {\n      return d3.range(data.length).reverse();\n    },\n    \"default\": d3_layout_stackOrderDefault\n  });\n  var d3_layout_stackOffsets = d3.map({\n    silhouette: function(data) {\n      var n = data.length, m = data[0].length, sums = [], max = 0, i, j, o, y0 = [];\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];\n        if (o > max) max = o;\n        sums.push(o);\n      }\n      for (j = 0; j < m; ++j) {\n        y0[j] = (max - sums[j]) / 2;\n      }\n      return y0;\n    },\n    wiggle: function(data) {\n      var n = data.length, x = data[0], m = x.length, i, j, k, s1, s2, s3, dx, o, o0, y0 = [];\n      y0[0] = o = o0 = 0;\n      for (j = 1; j < m; ++j) {\n        for (i = 0, s1 = 0; i < n; ++i) s1 += data[i][j][1];\n        for (i = 0, s2 = 0, dx = x[j][0] - x[j - 1][0]; i < n; ++i) {\n          for (k = 0, s3 = (data[i][j][1] - data[i][j - 1][1]) / (2 * dx); k < i; ++k) {\n            s3 += (data[k][j][1] - data[k][j - 1][1]) / dx;\n          }\n          s2 += s3 * data[i][j][1];\n        }\n        y0[j] = o -= s1 ? s2 / s1 * dx : 0;\n        if (o < o0) o0 = o;\n      }\n      for (j = 0; j < m; ++j) y0[j] -= o0;\n      return y0;\n    },\n    expand: function(data) {\n      var n = data.length, m = data[0].length, k = 1 / n, i, j, o, y0 = [];\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];\n        if (o) for (i = 0; i < n; i++) data[i][j][1] /= o; else for (i = 0; i < n; i++) data[i][j][1] = k;\n      }\n      for (j = 0; j < m; ++j) y0[j] = 0;\n      return y0;\n    },\n    zero: d3_layout_stackOffsetZero\n  });\n  function d3_layout_stackOrderDefault(data) {\n    return d3.range(data.length);\n  }\n  function d3_layout_stackOffsetZero(data) {\n    var j = -1, m = data[0].length, y0 = [];\n    while (++j < m) y0[j] = 0;\n    return y0;\n  }\n  function d3_layout_stackMaxIndex(array) {\n    var i = 1, j = 0, v = array[0][1], k, n = array.length;\n    for (;i < n; ++i) {\n      if ((k = array[i][1]) > v) {\n        j = i;\n        v = k;\n      }\n    }\n    return j;\n  }\n  function d3_layout_stackReduceSum(d) {\n    return d.reduce(d3_layout_stackSum, 0);\n  }\n  function d3_layout_stackSum(p, d) {\n    return p + d[1];\n  }\n  d3.layout.histogram = function() {\n    var frequency = true, valuer = Number, ranger = d3_layout_histogramRange, binner = d3_layout_histogramBinSturges;\n    function histogram(data, i) {\n      var bins = [], values = data.map(valuer, this), range = ranger.call(this, values, i), thresholds = binner.call(this, range, values, i), bin, i = -1, n = values.length, m = thresholds.length - 1, k = frequency ? 1 : 1 / n, x;\n      while (++i < m) {\n        bin = bins[i] = [];\n        bin.dx = thresholds[i + 1] - (bin.x = thresholds[i]);\n        bin.y = 0;\n      }\n      if (m > 0) {\n        i = -1;\n        while (++i < n) {\n          x = values[i];\n          if (x >= range[0] && x <= range[1]) {\n            bin = bins[d3.bisect(thresholds, x, 1, m) - 1];\n            bin.y += k;\n            bin.push(data[i]);\n          }\n        }\n      }\n      return bins;\n    }\n    histogram.value = function(x) {\n      if (!arguments.length) return valuer;\n      valuer = x;\n      return histogram;\n    };\n    histogram.range = function(x) {\n      if (!arguments.length) return ranger;\n      ranger = d3_functor(x);\n      return histogram;\n    };\n    histogram.bins = function(x) {\n      if (!arguments.length) return binner;\n      binner = typeof x === \"number\" ? function(range) {\n        return d3_layout_histogramBinFixed(range, x);\n      } : d3_functor(x);\n      return histogram;\n    };\n    histogram.frequency = function(x) {\n      if (!arguments.length) return frequency;\n      frequency = !!x;\n      return histogram;\n    };\n    return histogram;\n  };\n  function d3_layout_histogramBinSturges(range, values) {\n    return d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + 1));\n  }\n  function d3_layout_histogramBinFixed(range, n) {\n    var x = -1, b = +range[0], m = (range[1] - b) / n, f = [];\n    while (++x <= n) f[x] = m * x + b;\n    return f;\n  }\n  function d3_layout_histogramRange(values) {\n    return [ d3.min(values), d3.max(values) ];\n  }\n  d3.layout.pack = function() {\n    var hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort), padding = 0, size = [ 1, 1 ], radius;\n    function pack(d, i) {\n      var nodes = hierarchy.call(this, d, i), root = nodes[0], w = size[0], h = size[1], r = radius == null ? Math.sqrt : typeof radius === \"function\" ? radius : function() {\n        return radius;\n      };\n      root.x = root.y = 0;\n      d3_layout_hierarchyVisitAfter(root, function(d) {\n        d.r = +r(d.value);\n      });\n      d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n      if (padding) {\n        var dr = padding * (radius ? 1 : Math.max(2 * root.r / w, 2 * root.r / h)) / 2;\n        d3_layout_hierarchyVisitAfter(root, function(d) {\n          d.r += dr;\n        });\n        d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n        d3_layout_hierarchyVisitAfter(root, function(d) {\n          d.r -= dr;\n        });\n      }\n      d3_layout_packTransform(root, w / 2, h / 2, radius ? 1 : 1 / Math.max(2 * root.r / w, 2 * root.r / h));\n      return nodes;\n    }\n    pack.size = function(_) {\n      if (!arguments.length) return size;\n      size = _;\n      return pack;\n    };\n    pack.radius = function(_) {\n      if (!arguments.length) return radius;\n      radius = _ == null || typeof _ === \"function\" ? _ : +_;\n      return pack;\n    };\n    pack.padding = function(_) {\n      if (!arguments.length) return padding;\n      padding = +_;\n      return pack;\n    };\n    return d3_layout_hierarchyRebind(pack, hierarchy);\n  };\n  function d3_layout_packSort(a, b) {\n    return a.value - b.value;\n  }\n  function d3_layout_packInsert(a, b) {\n    var c = a._pack_next;\n    a._pack_next = b;\n    b._pack_prev = a;\n    b._pack_next = c;\n    c._pack_prev = b;\n  }\n  function d3_layout_packSplice(a, b) {\n    a._pack_next = b;\n    b._pack_prev = a;\n  }\n  function d3_layout_packIntersects(a, b) {\n    var dx = b.x - a.x, dy = b.y - a.y, dr = a.r + b.r;\n    return .999 * dr * dr > dx * dx + dy * dy;\n  }\n  function d3_layout_packSiblings(node) {\n    if (!(nodes = node.children) || !(n = nodes.length)) return;\n    var nodes, xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, a, b, c, i, j, k, n;\n    function bound(node) {\n      xMin = Math.min(node.x - node.r, xMin);\n      xMax = Math.max(node.x + node.r, xMax);\n      yMin = Math.min(node.y - node.r, yMin);\n      yMax = Math.max(node.y + node.r, yMax);\n    }\n    nodes.forEach(d3_layout_packLink);\n    a = nodes[0];\n    a.x = -a.r;\n    a.y = 0;\n    bound(a);\n    if (n > 1) {\n      b = nodes[1];\n      b.x = b.r;\n      b.y = 0;\n      bound(b);\n      if (n > 2) {\n        c = nodes[2];\n        d3_layout_packPlace(a, b, c);\n        bound(c);\n        d3_layout_packInsert(a, c);\n        a._pack_prev = c;\n        d3_layout_packInsert(c, b);\n        b = a._pack_next;\n        for (i = 3; i < n; i++) {\n          d3_layout_packPlace(a, b, c = nodes[i]);\n          var isect = 0, s1 = 1, s2 = 1;\n          for (j = b._pack_next; j !== b; j = j._pack_next, s1++) {\n            if (d3_layout_packIntersects(j, c)) {\n              isect = 1;\n              break;\n            }\n          }\n          if (isect == 1) {\n            for (k = a._pack_prev; k !== j._pack_prev; k = k._pack_prev, s2++) {\n              if (d3_layout_packIntersects(k, c)) {\n                break;\n              }\n            }\n          }\n          if (isect) {\n            if (s1 < s2 || s1 == s2 && b.r < a.r) d3_layout_packSplice(a, b = j); else d3_layout_packSplice(a = k, b);\n            i--;\n          } else {\n            d3_layout_packInsert(a, c);\n            b = c;\n            bound(c);\n          }\n        }\n      }\n    }\n    var cx = (xMin + xMax) / 2, cy = (yMin + yMax) / 2, cr = 0;\n    for (i = 0; i < n; i++) {\n      c = nodes[i];\n      c.x -= cx;\n      c.y -= cy;\n      cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));\n    }\n    node.r = cr;\n    nodes.forEach(d3_layout_packUnlink);\n  }\n  function d3_layout_packLink(node) {\n    node._pack_next = node._pack_prev = node;\n  }\n  function d3_layout_packUnlink(node) {\n    delete node._pack_next;\n    delete node._pack_prev;\n  }\n  function d3_layout_packTransform(node, x, y, k) {\n    var children = node.children;\n    node.x = x += k * node.x;\n    node.y = y += k * node.y;\n    node.r *= k;\n    if (children) {\n      var i = -1, n = children.length;\n      while (++i < n) d3_layout_packTransform(children[i], x, y, k);\n    }\n  }\n  function d3_layout_packPlace(a, b, c) {\n    var db = a.r + c.r, dx = b.x - a.x, dy = b.y - a.y;\n    if (db && (dx || dy)) {\n      var da = b.r + c.r, dc = dx * dx + dy * dy;\n      da *= da;\n      db *= db;\n      var x = .5 + (db - da) / (2 * dc), y = Math.sqrt(Math.max(0, 2 * da * (db + dc) - (db -= dc) * db - da * da)) / (2 * dc);\n      c.x = a.x + x * dx + y * dy;\n      c.y = a.y + x * dy - y * dx;\n    } else {\n      c.x = a.x + db;\n      c.y = a.y;\n    }\n  }\n  d3.layout.tree = function() {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = null;\n    function tree(d, i) {\n      var nodes = hierarchy.call(this, d, i), root0 = nodes[0], root1 = wrapTree(root0);\n      d3_layout_hierarchyVisitAfter(root1, firstWalk), root1.parent.m = -root1.z;\n      d3_layout_hierarchyVisitBefore(root1, secondWalk);\n      if (nodeSize) d3_layout_hierarchyVisitBefore(root0, sizeNode); else {\n        var left = root0, right = root0, bottom = root0;\n        d3_layout_hierarchyVisitBefore(root0, function(node) {\n          if (node.x < left.x) left = node;\n          if (node.x > right.x) right = node;\n          if (node.depth > bottom.depth) bottom = node;\n        });\n        var tx = separation(left, right) / 2 - left.x, kx = size[0] / (right.x + separation(right, left) / 2 + tx), ky = size[1] / (bottom.depth || 1);\n        d3_layout_hierarchyVisitBefore(root0, function(node) {\n          node.x = (node.x + tx) * kx;\n          node.y = node.depth * ky;\n        });\n      }\n      return nodes;\n    }\n    function wrapTree(root0) {\n      var root1 = {\n        A: null,\n        children: [ root0 ]\n      }, queue = [ root1 ], node1;\n      while ((node1 = queue.pop()) != null) {\n        for (var children = node1.children, child, i = 0, n = children.length; i < n; ++i) {\n          queue.push((children[i] = child = {\n            _: children[i],\n            parent: node1,\n            children: (child = children[i].children) && child.slice() || [],\n            A: null,\n            a: null,\n            z: 0,\n            m: 0,\n            c: 0,\n            s: 0,\n            t: null,\n            i: i\n          }).a = child);\n        }\n      }\n      return root1.children[0];\n    }\n    function firstWalk(v) {\n      var children = v.children, siblings = v.parent.children, w = v.i ? siblings[v.i - 1] : null;\n      if (children.length) {\n        d3_layout_treeShift(v);\n        var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n        if (w) {\n          v.z = w.z + separation(v._, w._);\n          v.m = v.z - midpoint;\n        } else {\n          v.z = midpoint;\n        }\n      } else if (w) {\n        v.z = w.z + separation(v._, w._);\n      }\n      v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n    }\n    function secondWalk(v) {\n      v._.x = v.z + v.parent.m;\n      v.m += v.parent.m;\n    }\n    function apportion(v, w, ancestor) {\n      if (w) {\n        var vip = v, vop = v, vim = w, vom = vip.parent.children[0], sip = vip.m, sop = vop.m, sim = vim.m, som = vom.m, shift;\n        while (vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim && vip) {\n          vom = d3_layout_treeLeft(vom);\n          vop = d3_layout_treeRight(vop);\n          vop.a = v;\n          shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n          if (shift > 0) {\n            d3_layout_treeMove(d3_layout_treeAncestor(vim, v, ancestor), v, shift);\n            sip += shift;\n            sop += shift;\n          }\n          sim += vim.m;\n          sip += vip.m;\n          som += vom.m;\n          sop += vop.m;\n        }\n        if (vim && !d3_layout_treeRight(vop)) {\n          vop.t = vim;\n          vop.m += sim - sop;\n        }\n        if (vip && !d3_layout_treeLeft(vom)) {\n          vom.t = vip;\n          vom.m += sip - som;\n          ancestor = v;\n        }\n      }\n      return ancestor;\n    }\n    function sizeNode(node) {\n      node.x *= size[0];\n      node.y = node.depth * size[1];\n    }\n    tree.separation = function(x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return tree;\n    };\n    tree.size = function(x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null ? sizeNode : null;\n      return tree;\n    };\n    tree.nodeSize = function(x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) == null ? null : sizeNode;\n      return tree;\n    };\n    return d3_layout_hierarchyRebind(tree, hierarchy);\n  };\n  function d3_layout_treeSeparation(a, b) {\n    return a.parent == b.parent ? 1 : 2;\n  }\n  function d3_layout_treeLeft(v) {\n    var children = v.children;\n    return children.length ? children[0] : v.t;\n  }\n  function d3_layout_treeRight(v) {\n    var children = v.children, n;\n    return (n = children.length) ? children[n - 1] : v.t;\n  }\n  function d3_layout_treeMove(wm, wp, shift) {\n    var change = shift / (wp.i - wm.i);\n    wp.c -= change;\n    wp.s += shift;\n    wm.c += change;\n    wp.z += shift;\n    wp.m += shift;\n  }\n  function d3_layout_treeShift(v) {\n    var shift = 0, change = 0, children = v.children, i = children.length, w;\n    while (--i >= 0) {\n      w = children[i];\n      w.z += shift;\n      w.m += shift;\n      shift += w.s + (change += w.c);\n    }\n  }\n  function d3_layout_treeAncestor(vim, v, ancestor) {\n    return vim.a.parent === v.parent ? vim.a : ancestor;\n  }\n  d3.layout.cluster = function() {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = false;\n    function cluster(d, i) {\n      var nodes = hierarchy.call(this, d, i), root = nodes[0], previousNode, x = 0;\n      d3_layout_hierarchyVisitAfter(root, function(node) {\n        var children = node.children;\n        if (children && children.length) {\n          node.x = d3_layout_clusterX(children);\n          node.y = d3_layout_clusterY(children);\n        } else {\n          node.x = previousNode ? x += separation(node, previousNode) : 0;\n          node.y = 0;\n          previousNode = node;\n        }\n      });\n      var left = d3_layout_clusterLeft(root), right = d3_layout_clusterRight(root), x0 = left.x - separation(left, right) / 2, x1 = right.x + separation(right, left) / 2;\n      d3_layout_hierarchyVisitAfter(root, nodeSize ? function(node) {\n        node.x = (node.x - root.x) * size[0];\n        node.y = (root.y - node.y) * size[1];\n      } : function(node) {\n        node.x = (node.x - x0) / (x1 - x0) * size[0];\n        node.y = (1 - (root.y ? node.y / root.y : 1)) * size[1];\n      });\n      return nodes;\n    }\n    cluster.separation = function(x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return cluster;\n    };\n    cluster.size = function(x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null;\n      return cluster;\n    };\n    cluster.nodeSize = function(x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) != null;\n      return cluster;\n    };\n    return d3_layout_hierarchyRebind(cluster, hierarchy);\n  };\n  function d3_layout_clusterY(children) {\n    return 1 + d3.max(children, function(child) {\n      return child.y;\n    });\n  }\n  function d3_layout_clusterX(children) {\n    return children.reduce(function(x, child) {\n      return x + child.x;\n    }, 0) / children.length;\n  }\n  function d3_layout_clusterLeft(node) {\n    var children = node.children;\n    return children && children.length ? d3_layout_clusterLeft(children[0]) : node;\n  }\n  function d3_layout_clusterRight(node) {\n    var children = node.children, n;\n    return children && (n = children.length) ? d3_layout_clusterRight(children[n - 1]) : node;\n  }\n  d3.layout.treemap = function() {\n    var hierarchy = d3.layout.hierarchy(), round = Math.round, size = [ 1, 1 ], padding = null, pad = d3_layout_treemapPadNull, sticky = false, stickies, mode = \"squarify\", ratio = .5 * (1 + Math.sqrt(5));\n    function scale(children, k) {\n      var i = -1, n = children.length, child, area;\n      while (++i < n) {\n        area = (child = children[i]).value * (k < 0 ? 0 : k);\n        child.area = isNaN(area) || area <= 0 ? 0 : area;\n      }\n    }\n    function squarify(node) {\n      var children = node.children;\n      if (children && children.length) {\n        var rect = pad(node), row = [], remaining = children.slice(), child, best = Infinity, score, u = mode === \"slice\" ? rect.dx : mode === \"dice\" ? rect.dy : mode === \"slice-dice\" ? node.depth & 1 ? rect.dy : rect.dx : Math.min(rect.dx, rect.dy), n;\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n        while ((n = remaining.length) > 0) {\n          row.push(child = remaining[n - 1]);\n          row.area += child.area;\n          if (mode !== \"squarify\" || (score = worst(row, u)) <= best) {\n            remaining.pop();\n            best = score;\n          } else {\n            row.area -= row.pop().area;\n            position(row, u, rect, false);\n            u = Math.min(rect.dx, rect.dy);\n            row.length = row.area = 0;\n            best = Infinity;\n          }\n        }\n        if (row.length) {\n          position(row, u, rect, true);\n          row.length = row.area = 0;\n        }\n        children.forEach(squarify);\n      }\n    }\n    function stickify(node) {\n      var children = node.children;\n      if (children && children.length) {\n        var rect = pad(node), remaining = children.slice(), child, row = [];\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n        while (child = remaining.pop()) {\n          row.push(child);\n          row.area += child.area;\n          if (child.z != null) {\n            position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length);\n            row.length = row.area = 0;\n          }\n        }\n        children.forEach(stickify);\n      }\n    }\n    function worst(row, u) {\n      var s = row.area, r, rmax = 0, rmin = Infinity, i = -1, n = row.length;\n      while (++i < n) {\n        if (!(r = row[i].area)) continue;\n        if (r < rmin) rmin = r;\n        if (r > rmax) rmax = r;\n      }\n      s *= s;\n      u *= u;\n      return s ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : Infinity;\n    }\n    function position(row, u, rect, flush) {\n      var i = -1, n = row.length, x = rect.x, y = rect.y, v = u ? round(row.area / u) : 0, o;\n      if (u == rect.dx) {\n        if (flush || v > rect.dy) v = rect.dy;\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dy = v;\n          x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : 0);\n        }\n        o.z = true;\n        o.dx += rect.x + rect.dx - x;\n        rect.y += v;\n        rect.dy -= v;\n      } else {\n        if (flush || v > rect.dx) v = rect.dx;\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dx = v;\n          y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : 0);\n        }\n        o.z = false;\n        o.dy += rect.y + rect.dy - y;\n        rect.x += v;\n        rect.dx -= v;\n      }\n    }\n    function treemap(d) {\n      var nodes = stickies || hierarchy(d), root = nodes[0];\n      root.x = root.y = 0;\n      if (root.value) root.dx = size[0], root.dy = size[1]; else root.dx = root.dy = 0;\n      if (stickies) hierarchy.revalue(root);\n      scale([ root ], root.dx * root.dy / root.value);\n      (stickies ? stickify : squarify)(root);\n      if (sticky) stickies = nodes;\n      return nodes;\n    }\n    treemap.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return treemap;\n    };\n    treemap.padding = function(x) {\n      if (!arguments.length) return padding;\n      function padFunction(node) {\n        var p = x.call(treemap, node, node.depth);\n        return p == null ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, typeof p === \"number\" ? [ p, p, p, p ] : p);\n      }\n      function padConstant(node) {\n        return d3_layout_treemapPad(node, x);\n      }\n      var type;\n      pad = (padding = x) == null ? d3_layout_treemapPadNull : (type = typeof x) === \"function\" ? padFunction : type === \"number\" ? (x = [ x, x, x, x ], \n      padConstant) : padConstant;\n      return treemap;\n    };\n    treemap.round = function(x) {\n      if (!arguments.length) return round != Number;\n      round = x ? Math.round : Number;\n      return treemap;\n    };\n    treemap.sticky = function(x) {\n      if (!arguments.length) return sticky;\n      sticky = x;\n      stickies = null;\n      return treemap;\n    };\n    treemap.ratio = function(x) {\n      if (!arguments.length) return ratio;\n      ratio = x;\n      return treemap;\n    };\n    treemap.mode = function(x) {\n      if (!arguments.length) return mode;\n      mode = x + \"\";\n      return treemap;\n    };\n    return d3_layout_hierarchyRebind(treemap, hierarchy);\n  };\n  function d3_layout_treemapPadNull(node) {\n    return {\n      x: node.x,\n      y: node.y,\n      dx: node.dx,\n      dy: node.dy\n    };\n  }\n  function d3_layout_treemapPad(node, padding) {\n    var x = node.x + padding[3], y = node.y + padding[0], dx = node.dx - padding[1] - padding[3], dy = node.dy - padding[0] - padding[2];\n    if (dx < 0) {\n      x += dx / 2;\n      dx = 0;\n    }\n    if (dy < 0) {\n      y += dy / 2;\n      dy = 0;\n    }\n    return {\n      x: x,\n      y: y,\n      dx: dx,\n      dy: dy\n    };\n  }\n  d3.random = {\n    normal: function(µ, σ) {\n      var n = arguments.length;\n      if (n < 2) σ = 1;\n      if (n < 1) µ = 0;\n      return function() {\n        var x, y, r;\n        do {\n          x = Math.random() * 2 - 1;\n          y = Math.random() * 2 - 1;\n          r = x * x + y * y;\n        } while (!r || r > 1);\n        return µ + σ * x * Math.sqrt(-2 * Math.log(r) / r);\n      };\n    },\n    logNormal: function() {\n      var random = d3.random.normal.apply(d3, arguments);\n      return function() {\n        return Math.exp(random());\n      };\n    },\n    bates: function(m) {\n      var random = d3.random.irwinHall(m);\n      return function() {\n        return random() / m;\n      };\n    },\n    irwinHall: function(m) {\n      return function() {\n        for (var s = 0, j = 0; j < m; j++) s += Math.random();\n        return s;\n      };\n    }\n  };\n  d3.scale = {};\n  function d3_scaleExtent(domain) {\n    var start = domain[0], stop = domain[domain.length - 1];\n    return start < stop ? [ start, stop ] : [ stop, start ];\n  }\n  function d3_scaleRange(scale) {\n    return scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());\n  }\n  function d3_scale_bilinear(domain, range, uninterpolate, interpolate) {\n    var u = uninterpolate(domain[0], domain[1]), i = interpolate(range[0], range[1]);\n    return function(x) {\n      return i(u(x));\n    };\n  }\n  function d3_scale_nice(domain, nice) {\n    var i0 = 0, i1 = domain.length - 1, x0 = domain[i0], x1 = domain[i1], dx;\n    if (x1 < x0) {\n      dx = i0, i0 = i1, i1 = dx;\n      dx = x0, x0 = x1, x1 = dx;\n    }\n    domain[i0] = nice.floor(x0);\n    domain[i1] = nice.ceil(x1);\n    return domain;\n  }\n  function d3_scale_niceStep(step) {\n    return step ? {\n      floor: function(x) {\n        return Math.floor(x / step) * step;\n      },\n      ceil: function(x) {\n        return Math.ceil(x / step) * step;\n      }\n    } : d3_scale_niceIdentity;\n  }\n  var d3_scale_niceIdentity = {\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n  function d3_scale_polylinear(domain, range, uninterpolate, interpolate) {\n    var u = [], i = [], j = 0, k = Math.min(domain.length, range.length) - 1;\n    if (domain[k] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n    while (++j <= k) {\n      u.push(uninterpolate(domain[j - 1], domain[j]));\n      i.push(interpolate(range[j - 1], range[j]));\n    }\n    return function(x) {\n      var j = d3.bisect(domain, x, 1, k) - 1;\n      return i[j](u[j](x));\n    };\n  }\n  d3.scale.linear = function() {\n    return d3_scale_linear([ 0, 1 ], [ 0, 1 ], d3_interpolate, false);\n  };\n  function d3_scale_linear(domain, range, interpolate, clamp) {\n    var output, input;\n    function rescale() {\n      var linear = Math.min(domain.length, range.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear, uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;\n      output = linear(domain, range, uninterpolate, interpolate);\n      input = linear(range, domain, uninterpolate, d3_interpolate);\n      return scale;\n    }\n    function scale(x) {\n      return output(x);\n    }\n    scale.invert = function(y) {\n      return input(y);\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(Number);\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.rangeRound = function(x) {\n      return scale.range(x).interpolate(d3_interpolateRound);\n    };\n    scale.clamp = function(x) {\n      if (!arguments.length) return clamp;\n      clamp = x;\n      return rescale();\n    };\n    scale.interpolate = function(x) {\n      if (!arguments.length) return interpolate;\n      interpolate = x;\n      return rescale();\n    };\n    scale.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    scale.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    scale.nice = function(m) {\n      d3_scale_linearNice(domain, m);\n      return rescale();\n    };\n    scale.copy = function() {\n      return d3_scale_linear(domain, range, interpolate, clamp);\n    };\n    return rescale();\n  }\n  function d3_scale_linearRebind(scale, linear) {\n    return d3.rebind(scale, linear, \"range\", \"rangeRound\", \"interpolate\", \"clamp\");\n  }\n  function d3_scale_linearNice(domain, m) {\n    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));\n    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));\n    return domain;\n  }\n  function d3_scale_linearTickRange(domain, m) {\n    if (m == null) m = 10;\n    var extent = d3_scaleExtent(domain), span = extent[1] - extent[0], step = Math.pow(10, Math.floor(Math.log(span / m) / Math.LN10)), err = m / span * step;\n    if (err <= .15) step *= 10; else if (err <= .35) step *= 5; else if (err <= .75) step *= 2;\n    extent[0] = Math.ceil(extent[0] / step) * step;\n    extent[1] = Math.floor(extent[1] / step) * step + step * .5;\n    extent[2] = step;\n    return extent;\n  }\n  function d3_scale_linearTicks(domain, m) {\n    return d3.range.apply(d3, d3_scale_linearTickRange(domain, m));\n  }\n  function d3_scale_linearTickFormat(domain, m, format) {\n    var range = d3_scale_linearTickRange(domain, m);\n    if (format) {\n      var match = d3_format_re.exec(format);\n      match.shift();\n      if (match[8] === \"s\") {\n        var prefix = d3.formatPrefix(Math.max(abs(range[0]), abs(range[1])));\n        if (!match[7]) match[7] = \".\" + d3_scale_linearPrecision(prefix.scale(range[2]));\n        match[8] = \"f\";\n        format = d3.format(match.join(\"\"));\n        return function(d) {\n          return format(prefix.scale(d)) + prefix.symbol;\n        };\n      }\n      if (!match[7]) match[7] = \".\" + d3_scale_linearFormatPrecision(match[8], range);\n      format = match.join(\"\");\n    } else {\n      format = \",.\" + d3_scale_linearPrecision(range[2]) + \"f\";\n    }\n    return d3.format(format);\n  }\n  var d3_scale_linearFormatSignificant = {\n    s: 1,\n    g: 1,\n    p: 1,\n    r: 1,\n    e: 1\n  };\n  function d3_scale_linearPrecision(value) {\n    return -Math.floor(Math.log(value) / Math.LN10 + .01);\n  }\n  function d3_scale_linearFormatPrecision(type, range) {\n    var p = d3_scale_linearPrecision(range[2]);\n    return type in d3_scale_linearFormatSignificant ? Math.abs(p - d3_scale_linearPrecision(Math.max(abs(range[0]), abs(range[1])))) + +(type !== \"e\") : p - (type === \"%\") * 2;\n  }\n  d3.scale.log = function() {\n    return d3_scale_log(d3.scale.linear().domain([ 0, 1 ]), 10, true, [ 1, 10 ]);\n  };\n  function d3_scale_log(linear, base, positive, domain) {\n    function log(x) {\n      return (positive ? Math.log(x < 0 ? 0 : x) : -Math.log(x > 0 ? 0 : -x)) / Math.log(base);\n    }\n    function pow(x) {\n      return positive ? Math.pow(base, x) : -Math.pow(base, -x);\n    }\n    function scale(x) {\n      return linear(log(x));\n    }\n    scale.invert = function(x) {\n      return pow(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      positive = x[0] >= 0;\n      linear.domain((domain = x.map(Number)).map(log));\n      return scale;\n    };\n    scale.base = function(_) {\n      if (!arguments.length) return base;\n      base = +_;\n      linear.domain(domain.map(log));\n      return scale;\n    };\n    scale.nice = function() {\n      var niced = d3_scale_nice(domain.map(log), positive ? Math : d3_scale_logNiceNegative);\n      linear.domain(niced);\n      domain = niced.map(pow);\n      return scale;\n    };\n    scale.ticks = function() {\n      var extent = d3_scaleExtent(domain), ticks = [], u = extent[0], v = extent[1], i = Math.floor(log(u)), j = Math.ceil(log(v)), n = base % 1 ? 2 : base;\n      if (isFinite(j - i)) {\n        if (positive) {\n          for (;i < j; i++) for (var k = 1; k < n; k++) ticks.push(pow(i) * k);\n          ticks.push(pow(i));\n        } else {\n          ticks.push(pow(i));\n          for (;i++ < j; ) for (var k = n - 1; k > 0; k--) ticks.push(pow(i) * k);\n        }\n        for (i = 0; ticks[i] < u; i++) {}\n        for (j = ticks.length; ticks[j - 1] > v; j--) {}\n        ticks = ticks.slice(i, j);\n      }\n      return ticks;\n    };\n    scale.tickFormat = function(n, format) {\n      if (!arguments.length) return d3_scale_logFormat;\n      if (arguments.length < 2) format = d3_scale_logFormat; else if (typeof format !== \"function\") format = d3.format(format);\n      var k = Math.max(1, base * n / scale.ticks().length);\n      return function(d) {\n        var i = d / pow(Math.round(log(d)));\n        if (i * base < base - .5) i *= base;\n        return i <= k ? format(d) : \"\";\n      };\n    };\n    scale.copy = function() {\n      return d3_scale_log(linear.copy(), base, positive, domain);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  var d3_scale_logFormat = d3.format(\".0e\"), d3_scale_logNiceNegative = {\n    floor: function(x) {\n      return -Math.ceil(-x);\n    },\n    ceil: function(x) {\n      return -Math.floor(-x);\n    }\n  };\n  d3.scale.pow = function() {\n    return d3_scale_pow(d3.scale.linear(), 1, [ 0, 1 ]);\n  };\n  function d3_scale_pow(linear, exponent, domain) {\n    var powp = d3_scale_powPow(exponent), powb = d3_scale_powPow(1 / exponent);\n    function scale(x) {\n      return linear(powp(x));\n    }\n    scale.invert = function(x) {\n      return powb(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      linear.domain((domain = x.map(Number)).map(powp));\n      return scale;\n    };\n    scale.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    scale.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    scale.nice = function(m) {\n      return scale.domain(d3_scale_linearNice(domain, m));\n    };\n    scale.exponent = function(x) {\n      if (!arguments.length) return exponent;\n      powp = d3_scale_powPow(exponent = x);\n      powb = d3_scale_powPow(1 / exponent);\n      linear.domain(domain.map(powp));\n      return scale;\n    };\n    scale.copy = function() {\n      return d3_scale_pow(linear.copy(), exponent, domain);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  function d3_scale_powPow(e) {\n    return function(x) {\n      return x < 0 ? -Math.pow(-x, e) : Math.pow(x, e);\n    };\n  }\n  d3.scale.sqrt = function() {\n    return d3.scale.pow().exponent(.5);\n  };\n  d3.scale.ordinal = function() {\n    return d3_scale_ordinal([], {\n      t: \"range\",\n      a: [ [] ]\n    });\n  };\n  function d3_scale_ordinal(domain, ranger) {\n    var index, range, rangeBand;\n    function scale(x) {\n      return range[((index.get(x) || (ranger.t === \"range\" ? index.set(x, domain.push(x)) : NaN)) - 1) % range.length];\n    }\n    function steps(start, step) {\n      return d3.range(domain.length).map(function(i) {\n        return start + step * i;\n      });\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = [];\n      index = new d3_Map();\n      var i = -1, n = x.length, xi;\n      while (++i < n) if (!index.has(xi = x[i])) index.set(xi, domain.push(xi));\n      return scale[ranger.t].apply(scale, ranger.a);\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      rangeBand = 0;\n      ranger = {\n        t: \"range\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangePoints = function(x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = (start + stop) / 2, \n      0) : (stop - start) / (domain.length - 1 + padding);\n      range = steps(start + step * padding / 2, step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangePoints\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeRoundPoints = function(x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = stop = Math.round((start + stop) / 2), \n      0) : (stop - start) / (domain.length - 1 + padding) | 0;\n      range = steps(start + Math.round(step * padding / 2 + (stop - start - (domain.length - 1 + padding) * step) / 2), step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangeRoundPoints\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeBands = function(x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = (stop - start) / (domain.length - padding + 2 * outerPadding);\n      range = steps(start + step * outerPadding, step);\n      if (reverse) range.reverse();\n      rangeBand = step * (1 - padding);\n      ranger = {\n        t: \"rangeBands\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeRoundBands = function(x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = Math.floor((stop - start) / (domain.length - padding + 2 * outerPadding));\n      range = steps(start + Math.round((stop - start - (domain.length - padding) * step) / 2), step);\n      if (reverse) range.reverse();\n      rangeBand = Math.round(step * (1 - padding));\n      ranger = {\n        t: \"rangeRoundBands\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeBand = function() {\n      return rangeBand;\n    };\n    scale.rangeExtent = function() {\n      return d3_scaleExtent(ranger.a[0]);\n    };\n    scale.copy = function() {\n      return d3_scale_ordinal(domain, ranger);\n    };\n    return scale.domain(domain);\n  }\n  d3.scale.category10 = function() {\n    return d3.scale.ordinal().range(d3_category10);\n  };\n  d3.scale.category20 = function() {\n    return d3.scale.ordinal().range(d3_category20);\n  };\n  d3.scale.category20b = function() {\n    return d3.scale.ordinal().range(d3_category20b);\n  };\n  d3.scale.category20c = function() {\n    return d3.scale.ordinal().range(d3_category20c);\n  };\n  var d3_category10 = [ 2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175 ].map(d3_rgbString);\n  var d3_category20 = [ 2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725 ].map(d3_rgbString);\n  var d3_category20b = [ 3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654 ].map(d3_rgbString);\n  var d3_category20c = [ 3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081 ].map(d3_rgbString);\n  d3.scale.quantile = function() {\n    return d3_scale_quantile([], []);\n  };\n  function d3_scale_quantile(domain, range) {\n    var thresholds;\n    function rescale() {\n      var k = 0, q = range.length;\n      thresholds = [];\n      while (++k < q) thresholds[k - 1] = d3.quantile(domain, k / q);\n      return scale;\n    }\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3.bisect(thresholds, x)];\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(d3_number).filter(d3_numeric).sort(d3_ascending);\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.quantiles = function() {\n      return thresholds;\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      return y < 0 ? [ NaN, NaN ] : [ y > 0 ? thresholds[y - 1] : domain[0], y < thresholds.length ? thresholds[y] : domain[domain.length - 1] ];\n    };\n    scale.copy = function() {\n      return d3_scale_quantile(domain, range);\n    };\n    return rescale();\n  }\n  d3.scale.quantize = function() {\n    return d3_scale_quantize(0, 1, [ 0, 1 ]);\n  };\n  function d3_scale_quantize(x0, x1, range) {\n    var kx, i;\n    function scale(x) {\n      return range[Math.max(0, Math.min(i, Math.floor(kx * (x - x0))))];\n    }\n    function rescale() {\n      kx = range.length / (x1 - x0);\n      i = range.length - 1;\n      return scale;\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return [ x0, x1 ];\n      x0 = +x[0];\n      x1 = +x[x.length - 1];\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      y = y < 0 ? NaN : y / kx + x0;\n      return [ y, y + 1 / kx ];\n    };\n    scale.copy = function() {\n      return d3_scale_quantize(x0, x1, range);\n    };\n    return rescale();\n  }\n  d3.scale.threshold = function() {\n    return d3_scale_threshold([ .5 ], [ 0, 1 ]);\n  };\n  function d3_scale_threshold(domain, range) {\n    function scale(x) {\n      if (x <= x) return range[d3.bisect(domain, x)];\n    }\n    scale.domain = function(_) {\n      if (!arguments.length) return domain;\n      domain = _;\n      return scale;\n    };\n    scale.range = function(_) {\n      if (!arguments.length) return range;\n      range = _;\n      return scale;\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      return [ domain[y - 1], domain[y] ];\n    };\n    scale.copy = function() {\n      return d3_scale_threshold(domain, range);\n    };\n    return scale;\n  }\n  d3.scale.identity = function() {\n    return d3_scale_identity([ 0, 1 ]);\n  };\n  function d3_scale_identity(domain) {\n    function identity(x) {\n      return +x;\n    }\n    identity.invert = identity;\n    identity.domain = identity.range = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(identity);\n      return identity;\n    };\n    identity.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    identity.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    identity.copy = function() {\n      return d3_scale_identity(domain);\n    };\n    return identity;\n  }\n  d3.svg = {};\n  function d3_zero() {\n    return 0;\n  }\n  d3.svg.arc = function() {\n    var innerRadius = d3_svg_arcInnerRadius, outerRadius = d3_svg_arcOuterRadius, cornerRadius = d3_zero, padRadius = d3_svg_arcAuto, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle, padAngle = d3_svg_arcPadAngle;\n    function arc() {\n      var r0 = Math.max(0, +innerRadius.apply(this, arguments)), r1 = Math.max(0, +outerRadius.apply(this, arguments)), a0 = startAngle.apply(this, arguments) - halfπ, a1 = endAngle.apply(this, arguments) - halfπ, da = Math.abs(a1 - a0), cw = a0 > a1 ? 0 : 1;\n      if (r1 < r0) rc = r1, r1 = r0, r0 = rc;\n      if (da >= τε) return circleSegment(r1, cw) + (r0 ? circleSegment(r0, 1 - cw) : \"\") + \"Z\";\n      var rc, cr, rp, ap, p0 = 0, p1 = 0, x0, y0, x1, y1, x2, y2, x3, y3, path = [];\n      if (ap = (+padAngle.apply(this, arguments) || 0) / 2) {\n        rp = padRadius === d3_svg_arcAuto ? Math.sqrt(r0 * r0 + r1 * r1) : +padRadius.apply(this, arguments);\n        if (!cw) p1 *= -1;\n        if (r1) p1 = d3_asin(rp / r1 * Math.sin(ap));\n        if (r0) p0 = d3_asin(rp / r0 * Math.sin(ap));\n      }\n      if (r1) {\n        x0 = r1 * Math.cos(a0 + p1);\n        y0 = r1 * Math.sin(a0 + p1);\n        x1 = r1 * Math.cos(a1 - p1);\n        y1 = r1 * Math.sin(a1 - p1);\n        var l1 = Math.abs(a1 - a0 - 2 * p1) <= π ? 0 : 1;\n        if (p1 && d3_svg_arcSweep(x0, y0, x1, y1) === cw ^ l1) {\n          var h1 = (a0 + a1) / 2;\n          x0 = r1 * Math.cos(h1);\n          y0 = r1 * Math.sin(h1);\n          x1 = y1 = null;\n        }\n      } else {\n        x0 = y0 = 0;\n      }\n      if (r0) {\n        x2 = r0 * Math.cos(a1 - p0);\n        y2 = r0 * Math.sin(a1 - p0);\n        x3 = r0 * Math.cos(a0 + p0);\n        y3 = r0 * Math.sin(a0 + p0);\n        var l0 = Math.abs(a0 - a1 + 2 * p0) <= π ? 0 : 1;\n        if (p0 && d3_svg_arcSweep(x2, y2, x3, y3) === 1 - cw ^ l0) {\n          var h0 = (a0 + a1) / 2;\n          x2 = r0 * Math.cos(h0);\n          y2 = r0 * Math.sin(h0);\n          x3 = y3 = null;\n        }\n      } else {\n        x2 = y2 = 0;\n      }\n      if (da > ε && (rc = Math.min(Math.abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments))) > .001) {\n        cr = r0 < r1 ^ cw ? 0 : 1;\n        var rc1 = rc, rc0 = rc;\n        if (da < π) {\n          var oc = x3 == null ? [ x2, y2 ] : x1 == null ? [ x0, y0 ] : d3_geom_polygonIntersect([ x0, y0 ], [ x3, y3 ], [ x1, y1 ], [ x2, y2 ]), ax = x0 - oc[0], ay = y0 - oc[1], bx = x1 - oc[0], by = y1 - oc[1], kc = 1 / Math.sin(Math.acos((ax * bx + ay * by) / (Math.sqrt(ax * ax + ay * ay) * Math.sqrt(bx * bx + by * by))) / 2), lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = Math.min(rc, (r0 - lc) / (kc - 1));\n          rc1 = Math.min(rc, (r1 - lc) / (kc + 1));\n        }\n        if (x1 != null) {\n          var t30 = d3_svg_arcCornerTangents(x3 == null ? [ x2, y2 ] : [ x3, y3 ], [ x0, y0 ], r1, rc1, cw), t12 = d3_svg_arcCornerTangents([ x1, y1 ], [ x2, y2 ], r1, rc1, cw);\n          if (rc === rc1) {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t30[1], \"A\", r1, \",\", r1, \" 0 \", 1 - cw ^ d3_svg_arcSweep(t30[1][0], t30[1][1], t12[1][0], t12[1][1]), \",\", cw, \" \", t12[1], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t12[0]);\n          } else {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 1,\", cr, \" \", t12[0]);\n          }\n        } else {\n          path.push(\"M\", x0, \",\", y0);\n        }\n        if (x3 != null) {\n          var t03 = d3_svg_arcCornerTangents([ x0, y0 ], [ x3, y3 ], r0, -rc0, cw), t21 = d3_svg_arcCornerTangents([ x2, y2 ], x1 == null ? [ x0, y0 ] : [ x1, y1 ], r0, -rc0, cw);\n          if (rc === rc0) {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t21[1], \"A\", r0, \",\", r0, \" 0 \", cw ^ d3_svg_arcSweep(t21[1][0], t21[1][1], t03[1][0], t03[1][1]), \",\", 1 - cw, \" \", t03[1], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          } else {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          }\n        } else {\n          path.push(\"L\", x2, \",\", y2);\n        }\n      } else {\n        path.push(\"M\", x0, \",\", y0);\n        if (x1 != null) path.push(\"A\", r1, \",\", r1, \" 0 \", l1, \",\", cw, \" \", x1, \",\", y1);\n        path.push(\"L\", x2, \",\", y2);\n        if (x3 != null) path.push(\"A\", r0, \",\", r0, \" 0 \", l0, \",\", 1 - cw, \" \", x3, \",\", y3);\n      }\n      path.push(\"Z\");\n      return path.join(\"\");\n    }\n    function circleSegment(r1, cw) {\n      return \"M0,\" + r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + -r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + r1;\n    }\n    arc.innerRadius = function(v) {\n      if (!arguments.length) return innerRadius;\n      innerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.outerRadius = function(v) {\n      if (!arguments.length) return outerRadius;\n      outerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.cornerRadius = function(v) {\n      if (!arguments.length) return cornerRadius;\n      cornerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.padRadius = function(v) {\n      if (!arguments.length) return padRadius;\n      padRadius = v == d3_svg_arcAuto ? d3_svg_arcAuto : d3_functor(v);\n      return arc;\n    };\n    arc.startAngle = function(v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return arc;\n    };\n    arc.endAngle = function(v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return arc;\n    };\n    arc.padAngle = function(v) {\n      if (!arguments.length) return padAngle;\n      padAngle = d3_functor(v);\n      return arc;\n    };\n    arc.centroid = function() {\n      var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2, a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - halfπ;\n      return [ Math.cos(a) * r, Math.sin(a) * r ];\n    };\n    return arc;\n  };\n  var d3_svg_arcAuto = \"auto\";\n  function d3_svg_arcInnerRadius(d) {\n    return d.innerRadius;\n  }\n  function d3_svg_arcOuterRadius(d) {\n    return d.outerRadius;\n  }\n  function d3_svg_arcStartAngle(d) {\n    return d.startAngle;\n  }\n  function d3_svg_arcEndAngle(d) {\n    return d.endAngle;\n  }\n  function d3_svg_arcPadAngle(d) {\n    return d && d.padAngle;\n  }\n  function d3_svg_arcSweep(x0, y0, x1, y1) {\n    return (x0 - x1) * y0 - (y0 - y1) * x0 > 0 ? 0 : 1;\n  }\n  function d3_svg_arcCornerTangents(p0, p1, r1, rc, cw) {\n    var x01 = p0[0] - p1[0], y01 = p0[1] - p1[1], lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01), ox = lo * y01, oy = -lo * x01, x1 = p0[0] + ox, y1 = p0[1] + oy, x2 = p1[0] + ox, y2 = p1[1] + oy, x3 = (x1 + x2) / 2, y3 = (y1 + y2) / 2, dx = x2 - x1, dy = y2 - y1, d2 = dx * dx + dy * dy, r = r1 - rc, D = x1 * y2 - x2 * y1, d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D)), cx0 = (D * dy - dx * d) / d2, cy0 = (-D * dx - dy * d) / d2, cx1 = (D * dy + dx * d) / d2, cy1 = (-D * dx + dy * d) / d2, dx0 = cx0 - x3, dy0 = cy0 - y3, dx1 = cx1 - x3, dy1 = cy1 - y3;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n    return [ [ cx0 - ox, cy0 - oy ], [ cx0 * r1 / r, cy0 * r1 / r ] ];\n  }\n  function d3_svg_line(projection) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, tension = .7;\n    function line(data) {\n      var segments = [], points = [], i = -1, n = data.length, d, fx = d3_functor(x), fy = d3_functor(y);\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points), tension));\n      }\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points.push([ +fx.call(this, d, i), +fy.call(this, d, i) ]);\n        } else if (points.length) {\n          segment();\n          points = [];\n        }\n      }\n      if (points.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n    line.x = function(_) {\n      if (!arguments.length) return x;\n      x = _;\n      return line;\n    };\n    line.y = function(_) {\n      if (!arguments.length) return y;\n      y = _;\n      return line;\n    };\n    line.defined = function(_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return line;\n    };\n    line.interpolate = function(_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      return line;\n    };\n    line.tension = function(_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return line;\n    };\n    return line;\n  }\n  d3.svg.line = function() {\n    return d3_svg_line(d3_identity);\n  };\n  var d3_svg_lineInterpolators = d3.map({\n    linear: d3_svg_lineLinear,\n    \"linear-closed\": d3_svg_lineLinearClosed,\n    step: d3_svg_lineStep,\n    \"step-before\": d3_svg_lineStepBefore,\n    \"step-after\": d3_svg_lineStepAfter,\n    basis: d3_svg_lineBasis,\n    \"basis-open\": d3_svg_lineBasisOpen,\n    \"basis-closed\": d3_svg_lineBasisClosed,\n    bundle: d3_svg_lineBundle,\n    cardinal: d3_svg_lineCardinal,\n    \"cardinal-open\": d3_svg_lineCardinalOpen,\n    \"cardinal-closed\": d3_svg_lineCardinalClosed,\n    monotone: d3_svg_lineMonotone\n  });\n  d3_svg_lineInterpolators.forEach(function(key, value) {\n    value.key = key;\n    value.closed = /-closed$/.test(key);\n  });\n  function d3_svg_lineLinear(points) {\n    return points.length > 1 ? points.join(\"L\") : points + \"Z\";\n  }\n  function d3_svg_lineLinearClosed(points) {\n    return points.join(\"L\") + \"Z\";\n  }\n  function d3_svg_lineStep(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"H\", (p[0] + (p = points[i])[0]) / 2, \"V\", p[1]);\n    if (n > 1) path.push(\"H\", p[0]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineStepBefore(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"V\", (p = points[i])[1], \"H\", p[0]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineStepAfter(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"H\", (p = points[i])[0], \"V\", p[1]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineCardinalOpen(points, tension) {\n    return points.length < 4 ? d3_svg_lineLinear(points) : points[1] + d3_svg_lineHermite(points.slice(1, -1), d3_svg_lineCardinalTangents(points, tension));\n  }\n  function d3_svg_lineCardinalClosed(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinearClosed(points) : points[0] + d3_svg_lineHermite((points.push(points[0]), \n    points), d3_svg_lineCardinalTangents([ points[points.length - 2] ].concat(points, [ points[1] ]), tension));\n  }\n  function d3_svg_lineCardinal(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension));\n  }\n  function d3_svg_lineHermite(points, tangents) {\n    if (tangents.length < 1 || points.length != tangents.length && points.length != tangents.length + 2) {\n      return d3_svg_lineLinear(points);\n    }\n    var quad = points.length != tangents.length, path = \"\", p0 = points[0], p = points[1], t0 = tangents[0], t = t0, pi = 1;\n    if (quad) {\n      path += \"Q\" + (p[0] - t0[0] * 2 / 3) + \",\" + (p[1] - t0[1] * 2 / 3) + \",\" + p[0] + \",\" + p[1];\n      p0 = points[1];\n      pi = 2;\n    }\n    if (tangents.length > 1) {\n      t = tangents[1];\n      p = points[pi];\n      pi++;\n      path += \"C\" + (p0[0] + t0[0]) + \",\" + (p0[1] + t0[1]) + \",\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n      for (var i = 2; i < tangents.length; i++, pi++) {\n        p = points[pi];\n        t = tangents[i];\n        path += \"S\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n      }\n    }\n    if (quad) {\n      var lp = points[pi];\n      path += \"Q\" + (p[0] + t[0] * 2 / 3) + \",\" + (p[1] + t[1] * 2 / 3) + \",\" + lp[0] + \",\" + lp[1];\n    }\n    return path;\n  }\n  function d3_svg_lineCardinalTangents(points, tension) {\n    var tangents = [], a = (1 - tension) / 2, p0, p1 = points[0], p2 = points[1], i = 1, n = points.length;\n    while (++i < n) {\n      p0 = p1;\n      p1 = p2;\n      p2 = points[i];\n      tangents.push([ a * (p2[0] - p0[0]), a * (p2[1] - p0[1]) ]);\n    }\n    return tangents;\n  }\n  function d3_svg_lineBasis(points) {\n    if (points.length < 3) return d3_svg_lineLinear(points);\n    var i = 1, n = points.length, pi = points[0], x0 = pi[0], y0 = pi[1], px = [ x0, x0, x0, (pi = points[1])[0] ], py = [ y0, y0, y0, pi[1] ], path = [ x0, \",\", y0, \"L\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];\n    points.push(points[n - 1]);\n    while (++i <= n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    points.pop();\n    path.push(\"L\", pi);\n    return path.join(\"\");\n  }\n  function d3_svg_lineBasisOpen(points) {\n    if (points.length < 4) return d3_svg_lineLinear(points);\n    var path = [], i = -1, n = points.length, pi, px = [ 0 ], py = [ 0 ];\n    while (++i < 3) {\n      pi = points[i];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n    path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + \",\" + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py));\n    --i;\n    while (++i < n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    return path.join(\"\");\n  }\n  function d3_svg_lineBasisClosed(points) {\n    var path, i = -1, n = points.length, m = n + 4, pi, px = [], py = [];\n    while (++i < 4) {\n      pi = points[i % n];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n    path = [ d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];\n    --i;\n    while (++i < m) {\n      pi = points[i % n];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    return path.join(\"\");\n  }\n  function d3_svg_lineBundle(points, tension) {\n    var n = points.length - 1;\n    if (n) {\n      var x0 = points[0][0], y0 = points[0][1], dx = points[n][0] - x0, dy = points[n][1] - y0, i = -1, p, t;\n      while (++i <= n) {\n        p = points[i];\n        t = i / n;\n        p[0] = tension * p[0] + (1 - tension) * (x0 + t * dx);\n        p[1] = tension * p[1] + (1 - tension) * (y0 + t * dy);\n      }\n    }\n    return d3_svg_lineBasis(points);\n  }\n  function d3_svg_lineDot4(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n  }\n  var d3_svg_lineBasisBezier1 = [ 0, 2 / 3, 1 / 3, 0 ], d3_svg_lineBasisBezier2 = [ 0, 1 / 3, 2 / 3, 0 ], d3_svg_lineBasisBezier3 = [ 0, 1 / 6, 2 / 3, 1 / 6 ];\n  function d3_svg_lineBasisBezier(path, x, y) {\n    path.push(\"C\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, y));\n  }\n  function d3_svg_lineSlope(p0, p1) {\n    return (p1[1] - p0[1]) / (p1[0] - p0[0]);\n  }\n  function d3_svg_lineFiniteDifferences(points) {\n    var i = 0, j = points.length - 1, m = [], p0 = points[0], p1 = points[1], d = m[0] = d3_svg_lineSlope(p0, p1);\n    while (++i < j) {\n      m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + 1]))) / 2;\n    }\n    m[i] = d;\n    return m;\n  }\n  function d3_svg_lineMonotoneTangents(points) {\n    var tangents = [], d, a, b, s, m = d3_svg_lineFiniteDifferences(points), i = -1, j = points.length - 1;\n    while (++i < j) {\n      d = d3_svg_lineSlope(points[i], points[i + 1]);\n      if (abs(d) < ε) {\n        m[i] = m[i + 1] = 0;\n      } else {\n        a = m[i] / d;\n        b = m[i + 1] / d;\n        s = a * a + b * b;\n        if (s > 9) {\n          s = d * 3 / Math.sqrt(s);\n          m[i] = s * a;\n          m[i + 1] = s * b;\n        }\n      }\n    }\n    i = -1;\n    while (++i <= j) {\n      s = (points[Math.min(j, i + 1)][0] - points[Math.max(0, i - 1)][0]) / (6 * (1 + m[i] * m[i]));\n      tangents.push([ s || 0, m[i] * s || 0 ]);\n    }\n    return tangents;\n  }\n  function d3_svg_lineMonotone(points) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineMonotoneTangents(points));\n  }\n  d3.svg.line.radial = function() {\n    var line = d3_svg_line(d3_svg_lineRadial);\n    line.radius = line.x, delete line.x;\n    line.angle = line.y, delete line.y;\n    return line;\n  };\n  function d3_svg_lineRadial(points) {\n    var point, i = -1, n = points.length, r, a;\n    while (++i < n) {\n      point = points[i];\n      r = point[0];\n      a = point[1] - halfπ;\n      point[0] = r * Math.cos(a);\n      point[1] = r * Math.sin(a);\n    }\n    return points;\n  }\n  function d3_svg_area(projection) {\n    var x0 = d3_geom_pointX, x1 = d3_geom_pointX, y0 = 0, y1 = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, interpolateReverse = interpolate, L = \"L\", tension = .7;\n    function area(data) {\n      var segments = [], points0 = [], points1 = [], i = -1, n = data.length, d, fx0 = d3_functor(x0), fy0 = d3_functor(y0), fx1 = x0 === x1 ? function() {\n        return x;\n      } : d3_functor(x1), fy1 = y0 === y1 ? function() {\n        return y;\n      } : d3_functor(y1), x, y;\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), \"Z\");\n      }\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points0.push([ x = +fx0.call(this, d, i), y = +fy0.call(this, d, i) ]);\n          points1.push([ +fx1.call(this, d, i), +fy1.call(this, d, i) ]);\n        } else if (points0.length) {\n          segment();\n          points0 = [];\n          points1 = [];\n        }\n      }\n      if (points0.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n    area.x = function(_) {\n      if (!arguments.length) return x1;\n      x0 = x1 = _;\n      return area;\n    };\n    area.x0 = function(_) {\n      if (!arguments.length) return x0;\n      x0 = _;\n      return area;\n    };\n    area.x1 = function(_) {\n      if (!arguments.length) return x1;\n      x1 = _;\n      return area;\n    };\n    area.y = function(_) {\n      if (!arguments.length) return y1;\n      y0 = y1 = _;\n      return area;\n    };\n    area.y0 = function(_) {\n      if (!arguments.length) return y0;\n      y0 = _;\n      return area;\n    };\n    area.y1 = function(_) {\n      if (!arguments.length) return y1;\n      y1 = _;\n      return area;\n    };\n    area.defined = function(_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return area;\n    };\n    area.interpolate = function(_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      interpolateReverse = interpolate.reverse || interpolate;\n      L = interpolate.closed ? \"M\" : \"L\";\n      return area;\n    };\n    area.tension = function(_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return area;\n    };\n    return area;\n  }\n  d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter;\n  d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore;\n  d3.svg.area = function() {\n    return d3_svg_area(d3_identity);\n  };\n  d3.svg.area.radial = function() {\n    var area = d3_svg_area(d3_svg_lineRadial);\n    area.radius = area.x, delete area.x;\n    area.innerRadius = area.x0, delete area.x0;\n    area.outerRadius = area.x1, delete area.x1;\n    area.angle = area.y, delete area.y;\n    area.startAngle = area.y0, delete area.y0;\n    area.endAngle = area.y1, delete area.y1;\n    return area;\n  };\n  d3.svg.chord = function() {\n    var source = d3_source, target = d3_target, radius = d3_svg_chordRadius, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle;\n    function chord(d, i) {\n      var s = subgroup(this, source, d, i), t = subgroup(this, target, d, i);\n      return \"M\" + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (equals(s, t) ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + \"Z\";\n    }\n    function subgroup(self, f, d, i) {\n      var subgroup = f.call(self, d, i), r = radius.call(self, subgroup, i), a0 = startAngle.call(self, subgroup, i) - halfπ, a1 = endAngle.call(self, subgroup, i) - halfπ;\n      return {\n        r: r,\n        a0: a0,\n        a1: a1,\n        p0: [ r * Math.cos(a0), r * Math.sin(a0) ],\n        p1: [ r * Math.cos(a1), r * Math.sin(a1) ]\n      };\n    }\n    function equals(a, b) {\n      return a.a0 == b.a0 && a.a1 == b.a1;\n    }\n    function arc(r, p, a) {\n      return \"A\" + r + \",\" + r + \" 0 \" + +(a > π) + \",1 \" + p;\n    }\n    function curve(r0, p0, r1, p1) {\n      return \"Q 0,0 \" + p1;\n    }\n    chord.radius = function(v) {\n      if (!arguments.length) return radius;\n      radius = d3_functor(v);\n      return chord;\n    };\n    chord.source = function(v) {\n      if (!arguments.length) return source;\n      source = d3_functor(v);\n      return chord;\n    };\n    chord.target = function(v) {\n      if (!arguments.length) return target;\n      target = d3_functor(v);\n      return chord;\n    };\n    chord.startAngle = function(v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return chord;\n    };\n    chord.endAngle = function(v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return chord;\n    };\n    return chord;\n  };\n  function d3_svg_chordRadius(d) {\n    return d.radius;\n  }\n  d3.svg.diagonal = function() {\n    var source = d3_source, target = d3_target, projection = d3_svg_diagonalProjection;\n    function diagonal(d, i) {\n      var p0 = source.call(this, d, i), p3 = target.call(this, d, i), m = (p0.y + p3.y) / 2, p = [ p0, {\n        x: p0.x,\n        y: m\n      }, {\n        x: p3.x,\n        y: m\n      }, p3 ];\n      p = p.map(projection);\n      return \"M\" + p[0] + \"C\" + p[1] + \" \" + p[2] + \" \" + p[3];\n    }\n    diagonal.source = function(x) {\n      if (!arguments.length) return source;\n      source = d3_functor(x);\n      return diagonal;\n    };\n    diagonal.target = function(x) {\n      if (!arguments.length) return target;\n      target = d3_functor(x);\n      return diagonal;\n    };\n    diagonal.projection = function(x) {\n      if (!arguments.length) return projection;\n      projection = x;\n      return diagonal;\n    };\n    return diagonal;\n  };\n  function d3_svg_diagonalProjection(d) {\n    return [ d.x, d.y ];\n  }\n  d3.svg.diagonal.radial = function() {\n    var diagonal = d3.svg.diagonal(), projection = d3_svg_diagonalProjection, projection_ = diagonal.projection;\n    diagonal.projection = function(x) {\n      return arguments.length ? projection_(d3_svg_diagonalRadialProjection(projection = x)) : projection;\n    };\n    return diagonal;\n  };\n  function d3_svg_diagonalRadialProjection(projection) {\n    return function() {\n      var d = projection.apply(this, arguments), r = d[0], a = d[1] - halfπ;\n      return [ r * Math.cos(a), r * Math.sin(a) ];\n    };\n  }\n  d3.svg.symbol = function() {\n    var type = d3_svg_symbolType, size = d3_svg_symbolSize;\n    function symbol(d, i) {\n      return (d3_svg_symbols.get(type.call(this, d, i)) || d3_svg_symbolCircle)(size.call(this, d, i));\n    }\n    symbol.type = function(x) {\n      if (!arguments.length) return type;\n      type = d3_functor(x);\n      return symbol;\n    };\n    symbol.size = function(x) {\n      if (!arguments.length) return size;\n      size = d3_functor(x);\n      return symbol;\n    };\n    return symbol;\n  };\n  function d3_svg_symbolSize() {\n    return 64;\n  }\n  function d3_svg_symbolType() {\n    return \"circle\";\n  }\n  function d3_svg_symbolCircle(size) {\n    var r = Math.sqrt(size / π);\n    return \"M0,\" + r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + -r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + r + \"Z\";\n  }\n  var d3_svg_symbols = d3.map({\n    circle: d3_svg_symbolCircle,\n    cross: function(size) {\n      var r = Math.sqrt(size / 5) / 2;\n      return \"M\" + -3 * r + \",\" + -r + \"H\" + -r + \"V\" + -3 * r + \"H\" + r + \"V\" + -r + \"H\" + 3 * r + \"V\" + r + \"H\" + r + \"V\" + 3 * r + \"H\" + -r + \"V\" + r + \"H\" + -3 * r + \"Z\";\n    },\n    diamond: function(size) {\n      var ry = Math.sqrt(size / (2 * d3_svg_symbolTan30)), rx = ry * d3_svg_symbolTan30;\n      return \"M0,\" + -ry + \"L\" + rx + \",0\" + \" 0,\" + ry + \" \" + -rx + \",0\" + \"Z\";\n    },\n    square: function(size) {\n      var r = Math.sqrt(size) / 2;\n      return \"M\" + -r + \",\" + -r + \"L\" + r + \",\" + -r + \" \" + r + \",\" + r + \" \" + -r + \",\" + r + \"Z\";\n    },\n    \"triangle-down\": function(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + ry + \"L\" + rx + \",\" + -ry + \" \" + -rx + \",\" + -ry + \"Z\";\n    },\n    \"triangle-up\": function(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + -ry + \"L\" + rx + \",\" + ry + \" \" + -rx + \",\" + ry + \"Z\";\n    }\n  });\n  d3.svg.symbolTypes = d3_svg_symbols.keys();\n  var d3_svg_symbolSqrt3 = Math.sqrt(3), d3_svg_symbolTan30 = Math.tan(30 * d3_radians);\n  d3_selectionPrototype.transition = function(name) {\n    var id = d3_transitionInheritId || ++d3_transitionId, ns = d3_transitionNamespace(name), subgroups = [], subgroup, node, transition = d3_transitionInherit || {\n      time: Date.now(),\n      ease: d3_ease_cubicInOut,\n      delay: 0,\n      duration: 250\n    };\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) d3_transitionNode(node, i, ns, id, transition);\n        subgroup.push(node);\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_selectionPrototype.interrupt = function(name) {\n    return this.each(name == null ? d3_selection_interrupt : d3_selection_interruptNS(d3_transitionNamespace(name)));\n  };\n  var d3_selection_interrupt = d3_selection_interruptNS(d3_transitionNamespace());\n  function d3_selection_interruptNS(ns) {\n    return function() {\n      var lock, activeId, active;\n      if ((lock = this[ns]) && (active = lock[activeId = lock.active])) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        if (--lock.count) delete lock[activeId]; else delete this[ns];\n        lock.active += .5;\n        active.event && active.event.interrupt.call(this, this.__data__, active.index);\n      }\n    };\n  }\n  function d3_transition(groups, ns, id) {\n    d3_subclass(groups, d3_transitionPrototype);\n    groups.namespace = ns;\n    groups.id = id;\n    return groups;\n  }\n  var d3_transitionPrototype = [], d3_transitionId = 0, d3_transitionInheritId, d3_transitionInherit;\n  d3_transitionPrototype.call = d3_selectionPrototype.call;\n  d3_transitionPrototype.empty = d3_selectionPrototype.empty;\n  d3_transitionPrototype.node = d3_selectionPrototype.node;\n  d3_transitionPrototype.size = d3_selectionPrototype.size;\n  d3.transition = function(selection, name) {\n    return selection && selection.transition ? d3_transitionInheritId ? selection.transition(name) : selection : d3.selection().transition(selection);\n  };\n  d3.transition.prototype = d3_transitionPrototype;\n  d3_transitionPrototype.select = function(selector) {\n    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnode, node;\n    selector = d3_selection_selector(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if ((node = group[i]) && (subnode = selector.call(node, node.__data__, i, j))) {\n          if (\"__data__\" in node) subnode.__data__ = node.__data__;\n          d3_transitionNode(subnode, i, ns, id, node[ns][id]);\n          subgroup.push(subnode);\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_transitionPrototype.selectAll = function(selector) {\n    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnodes, node, subnode, transition;\n    selector = d3_selection_selectorAll(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          transition = node[ns][id];\n          subnodes = selector.call(node, node.__data__, i, j);\n          subgroups.push(subgroup = []);\n          for (var k = -1, o = subnodes.length; ++k < o; ) {\n            if (subnode = subnodes[k]) d3_transitionNode(subnode, k, ns, id, transition);\n            subgroup.push(subnode);\n          }\n        }\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_transitionPrototype.filter = function(filter) {\n    var subgroups = [], subgroup, group, node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n    return d3_transition(subgroups, this.namespace, this.id);\n  };\n  d3_transitionPrototype.tween = function(name, tween) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 2) return this.node()[ns][id].tween.get(name);\n    return d3_selection_each(this, tween == null ? function(node) {\n      node[ns][id].tween.remove(name);\n    } : function(node) {\n      node[ns][id].tween.set(name, tween);\n    });\n  };\n  function d3_transition_tween(groups, name, value, tween) {\n    var id = groups.id, ns = groups.namespace;\n    return d3_selection_each(groups, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].tween.set(name, tween(value.call(node, node.__data__, i, j)));\n    } : (value = tween(value), function(node) {\n      node[ns][id].tween.set(name, value);\n    }));\n  }\n  d3_transitionPrototype.attr = function(nameNS, value) {\n    if (arguments.length < 2) {\n      for (value in nameNS) this.attr(value, nameNS[value]);\n      return this;\n    }\n    var interpolate = nameNS == \"transform\" ? d3_interpolateTransform : d3_interpolate, name = d3.ns.qualify(nameNS);\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n    function attrTween(b) {\n      return b == null ? attrNull : (b += \"\", function() {\n        var a = this.getAttribute(name), i;\n        return a !== b && (i = interpolate(a, b), function(t) {\n          this.setAttribute(name, i(t));\n        });\n      });\n    }\n    function attrTweenNS(b) {\n      return b == null ? attrNullNS : (b += \"\", function() {\n        var a = this.getAttributeNS(name.space, name.local), i;\n        return a !== b && (i = interpolate(a, b), function(t) {\n          this.setAttributeNS(name.space, name.local, i(t));\n        });\n      });\n    }\n    return d3_transition_tween(this, \"attr.\" + nameNS, value, name.local ? attrTweenNS : attrTween);\n  };\n  d3_transitionPrototype.attrTween = function(nameNS, tween) {\n    var name = d3.ns.qualify(nameNS);\n    function attrTween(d, i) {\n      var f = tween.call(this, d, i, this.getAttribute(name));\n      return f && function(t) {\n        this.setAttribute(name, f(t));\n      };\n    }\n    function attrTweenNS(d, i) {\n      var f = tween.call(this, d, i, this.getAttributeNS(name.space, name.local));\n      return f && function(t) {\n        this.setAttributeNS(name.space, name.local, f(t));\n      };\n    }\n    return this.tween(\"attr.\" + nameNS, name.local ? attrTweenNS : attrTween);\n  };\n  d3_transitionPrototype.style = function(name, value, priority) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n        for (priority in name) this.style(priority, name[priority], value);\n        return this;\n      }\n      priority = \"\";\n    }\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n    function styleString(b) {\n      return b == null ? styleNull : (b += \"\", function() {\n        var a = d3_window(this).getComputedStyle(this, null).getPropertyValue(name), i;\n        return a !== b && (i = d3_interpolate(a, b), function(t) {\n          this.style.setProperty(name, i(t), priority);\n        });\n      });\n    }\n    return d3_transition_tween(this, \"style.\" + name, value, styleString);\n  };\n  d3_transitionPrototype.styleTween = function(name, tween, priority) {\n    if (arguments.length < 3) priority = \"\";\n    function styleTween(d, i) {\n      var f = tween.call(this, d, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(name));\n      return f && function(t) {\n        this.style.setProperty(name, f(t), priority);\n      };\n    }\n    return this.tween(\"style.\" + name, styleTween);\n  };\n  d3_transitionPrototype.text = function(value) {\n    return d3_transition_tween(this, \"text\", value, d3_transition_text);\n  };\n  function d3_transition_text(b) {\n    if (b == null) b = \"\";\n    return function() {\n      this.textContent = b;\n    };\n  }\n  d3_transitionPrototype.remove = function() {\n    var ns = this.namespace;\n    return this.each(\"end.transition\", function() {\n      var p;\n      if (this[ns].count < 2 && (p = this.parentNode)) p.removeChild(this);\n    });\n  };\n  d3_transitionPrototype.ease = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].ease;\n    if (typeof value !== \"function\") value = d3.ease.apply(d3, arguments);\n    return d3_selection_each(this, function(node) {\n      node[ns][id].ease = value;\n    });\n  };\n  d3_transitionPrototype.delay = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].delay;\n    return d3_selection_each(this, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].delay = +value.call(node, node.__data__, i, j);\n    } : (value = +value, function(node) {\n      node[ns][id].delay = value;\n    }));\n  };\n  d3_transitionPrototype.duration = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].duration;\n    return d3_selection_each(this, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].duration = Math.max(1, value.call(node, node.__data__, i, j));\n    } : (value = Math.max(1, value), function(node) {\n      node[ns][id].duration = value;\n    }));\n  };\n  d3_transitionPrototype.each = function(type, listener) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 2) {\n      var inherit = d3_transitionInherit, inheritId = d3_transitionInheritId;\n      try {\n        d3_transitionInheritId = id;\n        d3_selection_each(this, function(node, i, j) {\n          d3_transitionInherit = node[ns][id];\n          type.call(node, node.__data__, i, j);\n        });\n      } finally {\n        d3_transitionInherit = inherit;\n        d3_transitionInheritId = inheritId;\n      }\n    } else {\n      d3_selection_each(this, function(node) {\n        var transition = node[ns][id];\n        (transition.event || (transition.event = d3.dispatch(\"start\", \"end\", \"interrupt\"))).on(type, listener);\n      });\n    }\n    return this;\n  };\n  d3_transitionPrototype.transition = function() {\n    var id0 = this.id, id1 = ++d3_transitionId, ns = this.namespace, subgroups = [], subgroup, group, node, transition;\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if (node = group[i]) {\n          transition = node[ns][id0];\n          d3_transitionNode(node, i, ns, id1, {\n            time: transition.time,\n            ease: transition.ease,\n            delay: transition.delay + transition.duration,\n            duration: transition.duration\n          });\n        }\n        subgroup.push(node);\n      }\n    }\n    return d3_transition(subgroups, ns, id1);\n  };\n  function d3_transitionNamespace(name) {\n    return name == null ? \"__transition__\" : \"__transition_\" + name + \"__\";\n  }\n  function d3_transitionNode(node, i, ns, id, inherit) {\n    var lock = node[ns] || (node[ns] = {\n      active: 0,\n      count: 0\n    }), transition = lock[id], time, timer, duration, ease, tweens;\n    function schedule(elapsed) {\n      var delay = transition.delay;\n      timer.t = delay + time;\n      if (delay <= elapsed) return start(elapsed - delay);\n      timer.c = start;\n    }\n    function start(elapsed) {\n      var activeId = lock.active, active = lock[activeId];\n      if (active) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        --lock.count;\n        delete lock[activeId];\n        active.event && active.event.interrupt.call(node, node.__data__, active.index);\n      }\n      for (var cancelId in lock) {\n        if (+cancelId < id) {\n          var cancel = lock[cancelId];\n          cancel.timer.c = null;\n          cancel.timer.t = NaN;\n          --lock.count;\n          delete lock[cancelId];\n        }\n      }\n      timer.c = tick;\n      d3_timer(function() {\n        if (timer.c && tick(elapsed || 1)) {\n          timer.c = null;\n          timer.t = NaN;\n        }\n        return 1;\n      }, 0, time);\n      lock.active = id;\n      transition.event && transition.event.start.call(node, node.__data__, i);\n      tweens = [];\n      transition.tween.forEach(function(key, value) {\n        if (value = value.call(node, node.__data__, i)) {\n          tweens.push(value);\n        }\n      });\n      ease = transition.ease;\n      duration = transition.duration;\n    }\n    function tick(elapsed) {\n      var t = elapsed / duration, e = ease(t), n = tweens.length;\n      while (n > 0) {\n        tweens[--n].call(node, e);\n      }\n      if (t >= 1) {\n        transition.event && transition.event.end.call(node, node.__data__, i);\n        if (--lock.count) delete lock[id]; else delete node[ns];\n        return 1;\n      }\n    }\n    if (!transition) {\n      time = inherit.time;\n      timer = d3_timer(schedule, 0, time);\n      transition = lock[id] = {\n        tween: new d3_Map(),\n        time: time,\n        timer: timer,\n        delay: inherit.delay,\n        duration: inherit.duration,\n        ease: inherit.ease,\n        index: i\n      };\n      inherit = null;\n      ++lock.count;\n    }\n  }\n  d3.svg.axis = function() {\n    var scale = d3.scale.linear(), orient = d3_svg_axisDefaultOrient, innerTickSize = 6, outerTickSize = 6, tickPadding = 3, tickArguments_ = [ 10 ], tickValues = null, tickFormat_;\n    function axis(g) {\n      g.each(function() {\n        var g = d3.select(this);\n        var scale0 = this.__chart__ || scale, scale1 = this.__chart__ = scale.copy();\n        var ticks = tickValues == null ? scale1.ticks ? scale1.ticks.apply(scale1, tickArguments_) : scale1.domain() : tickValues, tickFormat = tickFormat_ == null ? scale1.tickFormat ? scale1.tickFormat.apply(scale1, tickArguments_) : d3_identity : tickFormat_, tick = g.selectAll(\".tick\").data(ticks, scale1), tickEnter = tick.enter().insert(\"g\", \".domain\").attr(\"class\", \"tick\").style(\"opacity\", ε), tickExit = d3.transition(tick.exit()).style(\"opacity\", ε).remove(), tickUpdate = d3.transition(tick.order()).style(\"opacity\", 1), tickSpacing = Math.max(innerTickSize, 0) + tickPadding, tickTransform;\n        var range = d3_scaleRange(scale1), path = g.selectAll(\".domain\").data([ 0 ]), pathUpdate = (path.enter().append(\"path\").attr(\"class\", \"domain\"), \n        d3.transition(path));\n        tickEnter.append(\"line\");\n        tickEnter.append(\"text\");\n        var lineEnter = tickEnter.select(\"line\"), lineUpdate = tickUpdate.select(\"line\"), text = tick.select(\"text\").text(tickFormat), textEnter = tickEnter.select(\"text\"), textUpdate = tickUpdate.select(\"text\"), sign = orient === \"top\" || orient === \"left\" ? -1 : 1, x1, x2, y1, y2;\n        if (orient === \"bottom\" || orient === \"top\") {\n          tickTransform = d3_svg_axisX, x1 = \"x\", y1 = \"y\", x2 = \"x2\", y2 = \"y2\";\n          text.attr(\"dy\", sign < 0 ? \"0em\" : \".71em\").style(\"text-anchor\", \"middle\");\n          pathUpdate.attr(\"d\", \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize);\n        } else {\n          tickTransform = d3_svg_axisY, x1 = \"y\", y1 = \"x\", x2 = \"y2\", y2 = \"x2\";\n          text.attr(\"dy\", \".32em\").style(\"text-anchor\", sign < 0 ? \"end\" : \"start\");\n          pathUpdate.attr(\"d\", \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize);\n        }\n        lineEnter.attr(y2, sign * innerTickSize);\n        textEnter.attr(y1, sign * tickSpacing);\n        lineUpdate.attr(x2, 0).attr(y2, sign * innerTickSize);\n        textUpdate.attr(x1, 0).attr(y1, sign * tickSpacing);\n        if (scale1.rangeBand) {\n          var x = scale1, dx = x.rangeBand() / 2;\n          scale0 = scale1 = function(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, scale0);\n        }\n        tickEnter.call(tickTransform, scale0, scale1);\n        tickUpdate.call(tickTransform, scale1, scale1);\n      });\n    }\n    axis.scale = function(x) {\n      if (!arguments.length) return scale;\n      scale = x;\n      return axis;\n    };\n    axis.orient = function(x) {\n      if (!arguments.length) return orient;\n      orient = x in d3_svg_axisOrients ? x + \"\" : d3_svg_axisDefaultOrient;\n      return axis;\n    };\n    axis.ticks = function() {\n      if (!arguments.length) return tickArguments_;\n      tickArguments_ = d3_array(arguments);\n      return axis;\n    };\n    axis.tickValues = function(x) {\n      if (!arguments.length) return tickValues;\n      tickValues = x;\n      return axis;\n    };\n    axis.tickFormat = function(x) {\n      if (!arguments.length) return tickFormat_;\n      tickFormat_ = x;\n      return axis;\n    };\n    axis.tickSize = function(x) {\n      var n = arguments.length;\n      if (!n) return innerTickSize;\n      innerTickSize = +x;\n      outerTickSize = +arguments[n - 1];\n      return axis;\n    };\n    axis.innerTickSize = function(x) {\n      if (!arguments.length) return innerTickSize;\n      innerTickSize = +x;\n      return axis;\n    };\n    axis.outerTickSize = function(x) {\n      if (!arguments.length) return outerTickSize;\n      outerTickSize = +x;\n      return axis;\n    };\n    axis.tickPadding = function(x) {\n      if (!arguments.length) return tickPadding;\n      tickPadding = +x;\n      return axis;\n    };\n    axis.tickSubdivide = function() {\n      return arguments.length && axis;\n    };\n    return axis;\n  };\n  var d3_svg_axisDefaultOrient = \"bottom\", d3_svg_axisOrients = {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  };\n  function d3_svg_axisX(selection, x0, x1) {\n    selection.attr(\"transform\", function(d) {\n      var v0 = x0(d);\n      return \"translate(\" + (isFinite(v0) ? v0 : x1(d)) + \",0)\";\n    });\n  }\n  function d3_svg_axisY(selection, y0, y1) {\n    selection.attr(\"transform\", function(d) {\n      var v0 = y0(d);\n      return \"translate(0,\" + (isFinite(v0) ? v0 : y1(d)) + \")\";\n    });\n  }\n  d3.svg.brush = function() {\n    var event = d3_eventDispatch(brush, \"brushstart\", \"brush\", \"brushend\"), x = null, y = null, xExtent = [ 0, 0 ], yExtent = [ 0, 0 ], xExtentDomain, yExtentDomain, xClamp = true, yClamp = true, resizes = d3_svg_brushResizes[0];\n    function brush(g) {\n      g.each(function() {\n        var g = d3.select(this).style(\"pointer-events\", \"all\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\").on(\"mousedown.brush\", brushstart).on(\"touchstart.brush\", brushstart);\n        var background = g.selectAll(\".background\").data([ 0 ]);\n        background.enter().append(\"rect\").attr(\"class\", \"background\").style(\"visibility\", \"hidden\").style(\"cursor\", \"crosshair\");\n        g.selectAll(\".extent\").data([ 0 ]).enter().append(\"rect\").attr(\"class\", \"extent\").style(\"cursor\", \"move\");\n        var resize = g.selectAll(\".resize\").data(resizes, d3_identity);\n        resize.exit().remove();\n        resize.enter().append(\"g\").attr(\"class\", function(d) {\n          return \"resize \" + d;\n        }).style(\"cursor\", function(d) {\n          return d3_svg_brushCursor[d];\n        }).append(\"rect\").attr(\"x\", function(d) {\n          return /[ew]$/.test(d) ? -3 : null;\n        }).attr(\"y\", function(d) {\n          return /^[ns]/.test(d) ? -3 : null;\n        }).attr(\"width\", 6).attr(\"height\", 6).style(\"visibility\", \"hidden\");\n        resize.style(\"display\", brush.empty() ? \"none\" : null);\n        var gUpdate = d3.transition(g), backgroundUpdate = d3.transition(background), range;\n        if (x) {\n          range = d3_scaleRange(x);\n          backgroundUpdate.attr(\"x\", range[0]).attr(\"width\", range[1] - range[0]);\n          redrawX(gUpdate);\n        }\n        if (y) {\n          range = d3_scaleRange(y);\n          backgroundUpdate.attr(\"y\", range[0]).attr(\"height\", range[1] - range[0]);\n          redrawY(gUpdate);\n        }\n        redraw(gUpdate);\n      });\n    }\n    brush.event = function(g) {\n      g.each(function() {\n        var event_ = event.of(this, arguments), extent1 = {\n          x: xExtent,\n          y: yExtent,\n          i: xExtentDomain,\n          j: yExtentDomain\n        }, extent0 = this.__chart__ || extent1;\n        this.__chart__ = extent1;\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.brush\", function() {\n            xExtentDomain = extent0.i;\n            yExtentDomain = extent0.j;\n            xExtent = extent0.x;\n            yExtent = extent0.y;\n            event_({\n              type: \"brushstart\"\n            });\n          }).tween(\"brush:brush\", function() {\n            var xi = d3_interpolateArray(xExtent, extent1.x), yi = d3_interpolateArray(yExtent, extent1.y);\n            xExtentDomain = yExtentDomain = null;\n            return function(t) {\n              xExtent = extent1.x = xi(t);\n              yExtent = extent1.y = yi(t);\n              event_({\n                type: \"brush\",\n                mode: \"resize\"\n              });\n            };\n          }).each(\"end.brush\", function() {\n            xExtentDomain = extent1.i;\n            yExtentDomain = extent1.j;\n            event_({\n              type: \"brush\",\n              mode: \"resize\"\n            });\n            event_({\n              type: \"brushend\"\n            });\n          });\n        } else {\n          event_({\n            type: \"brushstart\"\n          });\n          event_({\n            type: \"brush\",\n            mode: \"resize\"\n          });\n          event_({\n            type: \"brushend\"\n          });\n        }\n      });\n    };\n    function redraw(g) {\n      g.selectAll(\".resize\").attr(\"transform\", function(d) {\n        return \"translate(\" + xExtent[+/e$/.test(d)] + \",\" + yExtent[+/^s/.test(d)] + \")\";\n      });\n    }\n    function redrawX(g) {\n      g.select(\".extent\").attr(\"x\", xExtent[0]);\n      g.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\", xExtent[1] - xExtent[0]);\n    }\n    function redrawY(g) {\n      g.select(\".extent\").attr(\"y\", yExtent[0]);\n      g.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\", yExtent[1] - yExtent[0]);\n    }\n    function brushstart() {\n      var target = this, eventTarget = d3.select(d3.event.target), event_ = event.of(target, arguments), g = d3.select(target), resizing = eventTarget.datum(), resizingX = !/^(n|s)$/.test(resizing) && x, resizingY = !/^(e|w)$/.test(resizing) && y, dragging = eventTarget.classed(\"extent\"), dragRestore = d3_event_dragSuppress(target), center, origin = d3.mouse(target), offset;\n      var w = d3.select(d3_window(target)).on(\"keydown.brush\", keydown).on(\"keyup.brush\", keyup);\n      if (d3.event.changedTouches) {\n        w.on(\"touchmove.brush\", brushmove).on(\"touchend.brush\", brushend);\n      } else {\n        w.on(\"mousemove.brush\", brushmove).on(\"mouseup.brush\", brushend);\n      }\n      g.interrupt().selectAll(\"*\").interrupt();\n      if (dragging) {\n        origin[0] = xExtent[0] - origin[0];\n        origin[1] = yExtent[0] - origin[1];\n      } else if (resizing) {\n        var ex = +/w$/.test(resizing), ey = +/^n/.test(resizing);\n        offset = [ xExtent[1 - ex] - origin[0], yExtent[1 - ey] - origin[1] ];\n        origin[0] = xExtent[ex];\n        origin[1] = yExtent[ey];\n      } else if (d3.event.altKey) center = origin.slice();\n      g.style(\"pointer-events\", \"none\").selectAll(\".resize\").style(\"display\", null);\n      d3.select(\"body\").style(\"cursor\", eventTarget.style(\"cursor\"));\n      event_({\n        type: \"brushstart\"\n      });\n      brushmove();\n      function keydown() {\n        if (d3.event.keyCode == 32) {\n          if (!dragging) {\n            center = null;\n            origin[0] -= xExtent[1];\n            origin[1] -= yExtent[1];\n            dragging = 2;\n          }\n          d3_eventPreventDefault();\n        }\n      }\n      function keyup() {\n        if (d3.event.keyCode == 32 && dragging == 2) {\n          origin[0] += xExtent[1];\n          origin[1] += yExtent[1];\n          dragging = 0;\n          d3_eventPreventDefault();\n        }\n      }\n      function brushmove() {\n        var point = d3.mouse(target), moved = false;\n        if (offset) {\n          point[0] += offset[0];\n          point[1] += offset[1];\n        }\n        if (!dragging) {\n          if (d3.event.altKey) {\n            if (!center) center = [ (xExtent[0] + xExtent[1]) / 2, (yExtent[0] + yExtent[1]) / 2 ];\n            origin[0] = xExtent[+(point[0] < center[0])];\n            origin[1] = yExtent[+(point[1] < center[1])];\n          } else center = null;\n        }\n        if (resizingX && move1(point, x, 0)) {\n          redrawX(g);\n          moved = true;\n        }\n        if (resizingY && move1(point, y, 1)) {\n          redrawY(g);\n          moved = true;\n        }\n        if (moved) {\n          redraw(g);\n          event_({\n            type: \"brush\",\n            mode: dragging ? \"move\" : \"resize\"\n          });\n        }\n      }\n      function move1(point, scale, i) {\n        var range = d3_scaleRange(scale), r0 = range[0], r1 = range[1], position = origin[i], extent = i ? yExtent : xExtent, size = extent[1] - extent[0], min, max;\n        if (dragging) {\n          r0 -= position;\n          r1 -= size + position;\n        }\n        min = (i ? yClamp : xClamp) ? Math.max(r0, Math.min(r1, point[i])) : point[i];\n        if (dragging) {\n          max = (min += position) + size;\n        } else {\n          if (center) position = Math.max(r0, Math.min(r1, 2 * center[i] - min));\n          if (position < min) {\n            max = min;\n            min = position;\n          } else {\n            max = position;\n          }\n        }\n        if (extent[0] != min || extent[1] != max) {\n          if (i) yExtentDomain = null; else xExtentDomain = null;\n          extent[0] = min;\n          extent[1] = max;\n          return true;\n        }\n      }\n      function brushend() {\n        brushmove();\n        g.style(\"pointer-events\", \"all\").selectAll(\".resize\").style(\"display\", brush.empty() ? \"none\" : null);\n        d3.select(\"body\").style(\"cursor\", null);\n        w.on(\"mousemove.brush\", null).on(\"mouseup.brush\", null).on(\"touchmove.brush\", null).on(\"touchend.brush\", null).on(\"keydown.brush\", null).on(\"keyup.brush\", null);\n        dragRestore();\n        event_({\n          type: \"brushend\"\n        });\n      }\n    }\n    brush.x = function(z) {\n      if (!arguments.length) return x;\n      x = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n    brush.y = function(z) {\n      if (!arguments.length) return y;\n      y = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n    brush.clamp = function(z) {\n      if (!arguments.length) return x && y ? [ xClamp, yClamp ] : x ? xClamp : y ? yClamp : null;\n      if (x && y) xClamp = !!z[0], yClamp = !!z[1]; else if (x) xClamp = !!z; else if (y) yClamp = !!z;\n      return brush;\n    };\n    brush.extent = function(z) {\n      var x0, x1, y0, y1, t;\n      if (!arguments.length) {\n        if (x) {\n          if (xExtentDomain) {\n            x0 = xExtentDomain[0], x1 = xExtentDomain[1];\n          } else {\n            x0 = xExtent[0], x1 = xExtent[1];\n            if (x.invert) x0 = x.invert(x0), x1 = x.invert(x1);\n            if (x1 < x0) t = x0, x0 = x1, x1 = t;\n          }\n        }\n        if (y) {\n          if (yExtentDomain) {\n            y0 = yExtentDomain[0], y1 = yExtentDomain[1];\n          } else {\n            y0 = yExtent[0], y1 = yExtent[1];\n            if (y.invert) y0 = y.invert(y0), y1 = y.invert(y1);\n            if (y1 < y0) t = y0, y0 = y1, y1 = t;\n          }\n        }\n        return x && y ? [ [ x0, y0 ], [ x1, y1 ] ] : x ? [ x0, x1 ] : y && [ y0, y1 ];\n      }\n      if (x) {\n        x0 = z[0], x1 = z[1];\n        if (y) x0 = x0[0], x1 = x1[0];\n        xExtentDomain = [ x0, x1 ];\n        if (x.invert) x0 = x(x0), x1 = x(x1);\n        if (x1 < x0) t = x0, x0 = x1, x1 = t;\n        if (x0 != xExtent[0] || x1 != xExtent[1]) xExtent = [ x0, x1 ];\n      }\n      if (y) {\n        y0 = z[0], y1 = z[1];\n        if (x) y0 = y0[1], y1 = y1[1];\n        yExtentDomain = [ y0, y1 ];\n        if (y.invert) y0 = y(y0), y1 = y(y1);\n        if (y1 < y0) t = y0, y0 = y1, y1 = t;\n        if (y0 != yExtent[0] || y1 != yExtent[1]) yExtent = [ y0, y1 ];\n      }\n      return brush;\n    };\n    brush.clear = function() {\n      if (!brush.empty()) {\n        xExtent = [ 0, 0 ], yExtent = [ 0, 0 ];\n        xExtentDomain = yExtentDomain = null;\n      }\n      return brush;\n    };\n    brush.empty = function() {\n      return !!x && xExtent[0] == xExtent[1] || !!y && yExtent[0] == yExtent[1];\n    };\n    return d3.rebind(brush, event, \"on\");\n  };\n  var d3_svg_brushCursor = {\n    n: \"ns-resize\",\n    e: \"ew-resize\",\n    s: \"ns-resize\",\n    w: \"ew-resize\",\n    nw: \"nwse-resize\",\n    ne: \"nesw-resize\",\n    se: \"nwse-resize\",\n    sw: \"nesw-resize\"\n  };\n  var d3_svg_brushResizes = [ [ \"n\", \"e\", \"s\", \"w\", \"nw\", \"ne\", \"se\", \"sw\" ], [ \"e\", \"w\" ], [ \"n\", \"s\" ], [] ];\n  var d3_time_format = d3_time.format = d3_locale_enUS.timeFormat;\n  var d3_time_formatUtc = d3_time_format.utc;\n  var d3_time_formatIso = d3_time_formatUtc(\"%Y-%m-%dT%H:%M:%S.%LZ\");\n  d3_time_format.iso = Date.prototype.toISOString && +new Date(\"2000-01-01T00:00:00.000Z\") ? d3_time_formatIsoNative : d3_time_formatIso;\n  function d3_time_formatIsoNative(date) {\n    return date.toISOString();\n  }\n  d3_time_formatIsoNative.parse = function(string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  };\n  d3_time_formatIsoNative.toString = d3_time_formatIso.toString;\n  d3_time.second = d3_time_interval(function(date) {\n    return new d3_date(Math.floor(date / 1e3) * 1e3);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 1e3);\n  }, function(date) {\n    return date.getSeconds();\n  });\n  d3_time.seconds = d3_time.second.range;\n  d3_time.seconds.utc = d3_time.second.utc.range;\n  d3_time.minute = d3_time_interval(function(date) {\n    return new d3_date(Math.floor(date / 6e4) * 6e4);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 6e4);\n  }, function(date) {\n    return date.getMinutes();\n  });\n  d3_time.minutes = d3_time.minute.range;\n  d3_time.minutes.utc = d3_time.minute.utc.range;\n  d3_time.hour = d3_time_interval(function(date) {\n    var timezone = date.getTimezoneOffset() / 60;\n    return new d3_date((Math.floor(date / 36e5 - timezone) + timezone) * 36e5);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 36e5);\n  }, function(date) {\n    return date.getHours();\n  });\n  d3_time.hours = d3_time.hour.range;\n  d3_time.hours.utc = d3_time.hour.utc.range;\n  d3_time.month = d3_time_interval(function(date) {\n    date = d3_time.day(date);\n    date.setDate(1);\n    return date;\n  }, function(date, offset) {\n    date.setMonth(date.getMonth() + offset);\n  }, function(date) {\n    return date.getMonth();\n  });\n  d3_time.months = d3_time.month.range;\n  d3_time.months.utc = d3_time.month.utc.range;\n  function d3_time_scale(linear, methods, format) {\n    function scale(x) {\n      return linear(x);\n    }\n    scale.invert = function(x) {\n      return d3_time_scaleDate(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return linear.domain().map(d3_time_scaleDate);\n      linear.domain(x);\n      return scale;\n    };\n    function tickMethod(extent, count) {\n      var span = extent[1] - extent[0], target = span / count, i = d3.bisect(d3_time_scaleSteps, target);\n      return i == d3_time_scaleSteps.length ? [ methods.year, d3_scale_linearTickRange(extent.map(function(d) {\n        return d / 31536e6;\n      }), count)[2] ] : !i ? [ d3_time_scaleMilliseconds, d3_scale_linearTickRange(extent, count)[2] ] : methods[target / d3_time_scaleSteps[i - 1] < d3_time_scaleSteps[i] / target ? i - 1 : i];\n    }\n    scale.nice = function(interval, skip) {\n      var domain = scale.domain(), extent = d3_scaleExtent(domain), method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" && tickMethod(extent, interval);\n      if (method) interval = method[0], skip = method[1];\n      function skipped(date) {\n        return !isNaN(date) && !interval.range(date, d3_time_scaleDate(+date + 1), skip).length;\n      }\n      return scale.domain(d3_scale_nice(domain, skip > 1 ? {\n        floor: function(date) {\n          while (skipped(date = interval.floor(date))) date = d3_time_scaleDate(date - 1);\n          return date;\n        },\n        ceil: function(date) {\n          while (skipped(date = interval.ceil(date))) date = d3_time_scaleDate(+date + 1);\n          return date;\n        }\n      } : interval));\n    };\n    scale.ticks = function(interval, skip) {\n      var extent = d3_scaleExtent(scale.domain()), method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" ? tickMethod(extent, interval) : !interval.range && [ {\n        range: interval\n      }, skip ];\n      if (method) interval = method[0], skip = method[1];\n      return interval.range(extent[0], d3_time_scaleDate(+extent[1] + 1), skip < 1 ? 1 : skip);\n    };\n    scale.tickFormat = function() {\n      return format;\n    };\n    scale.copy = function() {\n      return d3_time_scale(linear.copy(), methods, format);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  function d3_time_scaleDate(t) {\n    return new Date(t);\n  }\n  var d3_time_scaleSteps = [ 1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6 ];\n  var d3_time_scaleLocalMethods = [ [ d3_time.second, 1 ], [ d3_time.second, 5 ], [ d3_time.second, 15 ], [ d3_time.second, 30 ], [ d3_time.minute, 1 ], [ d3_time.minute, 5 ], [ d3_time.minute, 15 ], [ d3_time.minute, 30 ], [ d3_time.hour, 1 ], [ d3_time.hour, 3 ], [ d3_time.hour, 6 ], [ d3_time.hour, 12 ], [ d3_time.day, 1 ], [ d3_time.day, 2 ], [ d3_time.week, 1 ], [ d3_time.month, 1 ], [ d3_time.month, 3 ], [ d3_time.year, 1 ] ];\n  var d3_time_scaleLocalFormat = d3_time_format.multi([ [ \".%L\", function(d) {\n    return d.getMilliseconds();\n  } ], [ \":%S\", function(d) {\n    return d.getSeconds();\n  } ], [ \"%I:%M\", function(d) {\n    return d.getMinutes();\n  } ], [ \"%I %p\", function(d) {\n    return d.getHours();\n  } ], [ \"%a %d\", function(d) {\n    return d.getDay() && d.getDate() != 1;\n  } ], [ \"%b %d\", function(d) {\n    return d.getDate() != 1;\n  } ], [ \"%B\", function(d) {\n    return d.getMonth();\n  } ], [ \"%Y\", d3_true ] ]);\n  var d3_time_scaleMilliseconds = {\n    range: function(start, stop, step) {\n      return d3.range(Math.ceil(start / step) * step, +stop, step).map(d3_time_scaleDate);\n    },\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n  d3_time_scaleLocalMethods.year = d3_time.year;\n  d3_time.scale = function() {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat);\n  };\n  var d3_time_scaleUtcMethods = d3_time_scaleLocalMethods.map(function(m) {\n    return [ m[0].utc, m[1] ];\n  });\n  var d3_time_scaleUtcFormat = d3_time_formatUtc.multi([ [ \".%L\", function(d) {\n    return d.getUTCMilliseconds();\n  } ], [ \":%S\", function(d) {\n    return d.getUTCSeconds();\n  } ], [ \"%I:%M\", function(d) {\n    return d.getUTCMinutes();\n  } ], [ \"%I %p\", function(d) {\n    return d.getUTCHours();\n  } ], [ \"%a %d\", function(d) {\n    return d.getUTCDay() && d.getUTCDate() != 1;\n  } ], [ \"%b %d\", function(d) {\n    return d.getUTCDate() != 1;\n  } ], [ \"%B\", function(d) {\n    return d.getUTCMonth();\n  } ], [ \"%Y\", d3_true ] ]);\n  d3_time_scaleUtcMethods.year = d3_time.year.utc;\n  d3_time.scale.utc = function() {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleUtcMethods, d3_time_scaleUtcFormat);\n  };\n  d3.text = d3_xhrType(function(request) {\n    return request.responseText;\n  });\n  d3.json = function(url, callback) {\n    return d3_xhr(url, \"application/json\", d3_json, callback);\n  };\n  function d3_json(request) {\n    return JSON.parse(request.responseText);\n  }\n  d3.html = function(url, callback) {\n    return d3_xhr(url, \"text/html\", d3_html, callback);\n  };\n  function d3_html(request) {\n    var range = d3_document.createRange();\n    range.selectNode(d3_document.body);\n    return range.createContextualFragment(request.responseText);\n  }\n  d3.xml = d3_xhrType(function(request) {\n    return request.responseXML;\n  });\n  if (typeof define === \"function\" && define.amd) this.d3 = d3, define(d3); else if (typeof module === \"object\" && module.exports) module.exports = d3; else this.d3 = d3;\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/d3/d3.js\n// module id = 612\n// module chunks = 0 1","var inherit = require('./inherit');\nvar renderer = require('./renderer');\nvar registerRenderer = require('./registry').registerRenderer;\n\n/**\n * Create a new instance of class domRenderer.\n *\n * @class\n * @alias geo.domRenderer\n * @extends geo.renderer\n * @param {object} arg Options for the renderer.\n * @param {geo.layer} [arg.layer] Layer associated with the renderer.\n * @param {HTMLElement} [arg.canvas] Canvas element associated with the\n *   renderer.\n * @returns {geo.domRenderer}\n */\nvar domRenderer = function (arg) {\n  'use strict';\n\n  if (!(this instanceof domRenderer)) {\n    return new domRenderer(arg);\n  }\n  renderer.call(this, arg);\n\n  arg = arg || {};\n\n  var m_this = this;\n\n  /**\n   * Get API used by the renderer.\n   *\n   * @returns {string} 'dom'.\n   */\n  this.api = function () {\n    return 'dom';\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    var layer = m_this.layer().node();\n\n    if (!m_this.canvas() && layer && layer.length) {\n      // The renderer and the UI Layer share the same canvas\n      // at least for now. This renderer is essentially a noop renderer\n      // designed for backwards compatibility\n      m_this.canvas(layer[0]);\n    }\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(domRenderer, renderer);\nregisterRenderer('dom', domRenderer);\nmodule.exports = domRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./domRenderer.js","var inherit = require('./inherit');\nvar registerFileReader = require('./registry').registerFileReader;\nvar fileReader = require('./fileReader');\n\n/**\n * Object specification for a geojsonReader.\n *\n * @typedef {geo.fileReader.spec} geo.geojsonReader.spec\n * @extends geo.fileReader.spec\n * @property {geo.pointFeature.styleSpec} [pointStyle] Default style for\n *   points.\n * @property {geo.pointFeature.styleSpec} [lineStyle] Default style for lines.\n * @property {geo.pointFeature.styleSpec} [polygonStyle] Default style for\n *   polygons.\n */\n\n/**\n * Create a new instance of class geo.geojsonReader.\n *\n * @class\n * @alias geo.geojsonReader\n * @extends geo.fileReader\n * @param {geo.fileReader.spec} arg\n * @returns {geo.geojsonReader}\n */\nvar geojsonReader = function (arg) {\n  'use strict';\n  if (!(this instanceof geojsonReader)) {\n    return new geojsonReader(arg);\n  }\n\n  var $ = require('jquery');\n  var convertColor = require('./util').convertColor;\n\n  var m_this = this,\n      m_options = {\n        ...arg,\n        pointStyle: {\n          fill: true,\n          fillColor: '#ff7800',\n          fillOpacity: 0.8,\n          stroke: true,\n          strokeColor: '#000',\n          strokeWidth: 1,\n          strokeOpacity: 1,\n          radius: 8,\n          ...arg.pointStyle\n        },\n        lineStyle: {\n          strokeColor: '#ff7800',\n          strokeWidth: 4,\n          strokeOpacity: 0.5,\n          strokeOffset: 0,\n          lineCap: 'butt',\n          lineJoin: 'miter',\n          closed: false,\n          ...arg.lineStyle\n        },\n        polygonStyle: {\n          fill: true,\n          fillColor: '#b0de5c',\n          fillOpacity: 0.8,\n          stroke: true,\n          strokeColor: '#999999',\n          strokeWidth: 2,\n          strokeOpacity: 1,\n          ...arg.polygonStyle\n        }\n      };\n\n  fileReader.call(this, m_options);\n\n  /**\n   * Tells the caller if it can handle the given file by returning a boolean.\n   *\n   * @param {File|Blob|string|object} file This is either a `File` object, a\n   *    `Blob` object, a string representation of a file, or an object\n   *    representing data from a file.\n   * @returns {boolean} `true` if this reader can read a file.\n   */\n  this.canRead = function (file) {\n    if (file instanceof File || file instanceof Blob) {\n      return !!(file.type === 'application/json' || (file.name && file.name.match(/\\.json$/)));\n    } else if (typeof file === 'string') {\n      try {\n        JSON.parse(file);\n      } catch (e) {\n        return false;\n      }\n      return true;\n    }\n    try {\n      if (Array.isArray(m_this._featureArray(file))) {\n        return true;\n      }\n    } catch (e) {}\n    return false;\n  };\n\n  /**\n   * Read or parse a file or object, then call a done function.\n   *\n   * @param {File|Blob|string|object} file This is either a `File` object, a\n   *    `Blob` object, a string representation of a file, or an object\n   *    representing data from a file.\n   * @param {function} done A callback function when the read is complete.\n   *    This is called with `false` on error or the object that was read but\n   *    not yet parsed.\n   * @param {function} [progress] A function which is passed `ProgressEvent`\n   *    information from a `FileReader`.  This includes `loaded` and `total`\n   *    each with a number of bytes.\n   */\n  this._readObject = function (file, done, progress) {\n    var object;\n    function onDone(fileString) {\n      // if fileString is not a JSON string, expect it to be a URL.\n      try {\n        object = JSON.parse(fileString);\n        done(object);\n      } catch (err) {\n        if (!object) {\n          $.ajax({\n            type: 'GET',\n            url: fileString,\n            dataType: 'text'\n          }).done(function (data) {\n            try {\n              object = JSON.parse(data);\n              done(object);\n            } catch (err) {\n              if (!object) {\n                done(false);\n              }\n            }\n          }).fail(function () {\n            done(false);\n          });\n        }\n      }\n    }\n\n    if (file instanceof File || file instanceof Blob) {\n      m_this._getString(file, onDone, progress);\n    } else if (typeof file === 'string') {\n      onDone(file);\n    } else {\n      done(file);\n    }\n  };\n\n  /**\n   * Return an array of normalized geojson features.  This turns bare\n   * geometries into features and multi-geometry features into single geometry\n   * features.\n   *\n   * Returns an array of Point, LineString, or Polygon features.\n   * @param {geojson.object} spec A parsed geojson object.\n   * @returns {geojson.FeatureObject[]} An array of feature objects, none of\n   *    which include multi-geometries, and none have empty geometries.\n   */\n  this._featureArray = function (spec) {\n    var features, normalized = [];\n    switch (spec.type) {\n      case 'FeatureCollection':\n        features = spec.features;\n        break;\n\n      case 'Feature':\n        features = [spec];\n        break;\n\n      case 'GeometryCollection':\n        features = spec.geometries.map(function (g) {\n          return {\n            type: 'Feature',\n            geometry: g,\n            properties: {}\n          };\n        });\n        break;\n\n      case 'Point':\n      case 'LineString':\n      case 'Polygon':\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        features = [{\n          type: 'Feature',\n          geometry: spec,\n          properties: {}\n        }];\n        break;\n\n      default:\n        throw new Error('Invalid json type');\n    }\n\n    // flatten multi features\n    features.forEach(function (feature) {\n      Array.prototype.push.apply(normalized, m_this._feature(feature));\n    });\n\n    // remove features with empty geometries\n    normalized = normalized.filter(function (feature) {\n      return feature.geometry &&\n        feature.geometry.coordinates &&\n        feature.geometry.coordinates.length;\n    });\n    return normalized;\n  };\n\n  /**\n   * Normalize a feature object turning multi geometry features into an array\n   * of features, and single geometry features into an array containing one\n   * feature.\n   *\n   * @param {geojson.object} spec A parsed geojson object.\n   * @returns {geojson.FeatureObject[]} An array of feature objects, none of\n   *    which include multi-geometries.\n   */\n  this._feature = function (spec) {\n    if (spec.type !== 'Feature') {\n      throw new Error('Invalid feature object');\n    }\n    switch (spec.geometry.type) {\n      case 'Point':\n      case 'LineString':\n      case 'Polygon':\n        return [spec];\n\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        return spec.geometry.coordinates.map(function (c) {\n          return {\n            type: 'Feature',\n            geometry: {\n              type: spec.geometry.type.replace('Multi', ''),\n              coordinates: c\n            },\n            properties: spec.properties\n          };\n        });\n\n      default:\n        throw new Error('Invalid geometry type');\n    }\n  };\n\n  /**\n   * Convert from a geojson position array into a geojs position object.\n   *\n   * @param {number[]} p A coordinate in the form of an array with two or three\n   *    components.\n   * @returns {geo.geoPosition}\n   */\n  this._position = function (p) {\n    return {\n      x: p[0],\n      y: p[1],\n      z: p[2] || 0\n    };\n  };\n\n  /**\n   * Defines a style accessor the returns the given value of the property\n   * object or a default value.\n   *\n   * @param {string} prop The property name.\n   * @param {object} _default The default value.\n   * @returns {function} A style function for the property.\n   */\n  this._style = function (prop, _default) {\n    var isColor = prop.toLowerCase().match(/color$/);\n    if (isColor) {\n      _default = convertColor(_default);\n    }\n    return function (v, j, d, i) {\n      var p;\n      if (d !== undefined && d.properties) {\n        p = d.properties;\n      } else {\n        p = v.properties;\n      }\n      if (p !== undefined && p.hasOwnProperty(prop)) {\n        return isColor ? convertColor(p[prop]) : p[prop];\n      }\n      return _default;\n    };\n  };\n\n  /**\n   * Reads the file and optionally calls a function when finished.  The `done`\n   * function is called with a list of {@link geo.feature} on success or\n   * `false` on failure.\n   *\n   * @param {File|Blob|string|object} file This is either a `File` object, a\n   *    `Blob` object, a string representation of a file, or an object\n   *    representing data from a file.\n   * @param {function} [done] An optional callback function when the read is\n   *    complete.  This is called with `false` on error or the object that was\n   *    read and parsed by the reader.\n   * @param {function} [progress] A function which is passed `ProgressEvent`\n   *    information from a `FileReader`.  This includes `loaded` and `total`\n   *    each with a number of bytes.\n   * @returns {Promise} A `Promise` that resolves with a list of\n   *    {@link geo.feature} or is rejected if the reader fails.\n   */\n  this.read = function (file, done, progress) {\n    var promise = new Promise(function (resolve, reject) {\n      /**\n       * Given a parsed GeoJSON object, convert it into features on the\n       * reader's layer.\n       *\n       * @param {geojson.object|false} object Either a parse GeoJSON object or\n       *    `false` for an error.\n       */\n      function _done(object) {\n        if (object === false) {\n          if (done) {\n            done(object);\n          }\n          reject(new Error('Failed to parse GeoJSON'));\n          return;\n        }\n        let features, allFeatures = [], points, lines, polygons, feature;\n\n        try {\n          features = m_this._featureArray(object);\n        } catch (err) {\n          reject(err);\n          return;\n        }\n\n        // process points\n        points = features.filter(f => f.geometry.type === 'Point');\n        if (points.length) {\n          feature = m_this.layer().createFeature('point');\n          if (feature) {\n            feature\n              .data(points)\n              .position(d => m_this._position(d.geometry.coordinates))\n              // create an object with each property in m_options.pointStyle,\n              // mapping the values through the _style function.\n              .style(\n                [{}].concat(Object.keys(m_options.pointStyle)).reduce(\n                  (styleObj, key) => ({\n                    [key]: m_this._style(key, m_options.pointStyle[key]),\n                    ...styleObj\n                  }\n                  ))\n              );\n            allFeatures.push(feature);\n          }\n        }\n\n        // process lines\n        lines = features.filter(f => f.geometry.type === 'LineString');\n        if (lines.length) {\n          feature = m_this.layer().createFeature('line');\n          if (feature) {\n            feature\n              .data(lines)\n              .line(d => d.geometry.coordinates)\n              .position(m_this._position)\n              // create an object with each property in m_options.lineStyle,\n              // mapping the values through the _style function.\n              .style(\n                [{}].concat(Object.keys(m_options.lineStyle)).reduce(\n                  (styleObj, key) => ({\n                    [key]: m_this._style(key, m_options.lineStyle[key]),\n                    ...styleObj\n                  }\n                  ))\n              );\n            allFeatures.push(feature);\n          }\n        }\n\n        // process polygons\n        polygons = features.filter(f => f.geometry.type === 'Polygon');\n        if (polygons.length) {\n          feature = m_this.layer().createFeature('polygon');\n          if (feature) {\n            feature\n              .data(polygons)\n              .polygon((d, i) => ({\n                outer: d.geometry.coordinates[0],\n                inner: d.geometry.coordinates.slice(1)\n              }))\n              .position(m_this._position)\n              // create an object with each property in m_options.polygonStyle,\n              // mapping the values through the _style function.\n              .style(\n                [{}].concat(Object.keys(m_options.polygonStyle)).reduce(\n                  (styleObj, key) => ({\n                    [key]: m_this._style(key, m_options.polygonStyle[key]),\n                    ...styleObj\n                  }\n                  ))\n              );\n            allFeatures.push(feature);\n          }\n        }\n        if (done) {\n          done(allFeatures);\n        }\n        resolve(allFeatures);\n      }\n\n      m_this._readObject(file, _done, progress);\n    });\n    this.addPromise(promise);\n    return promise;\n  };\n};\n\ninherit(geojsonReader, fileReader);\nregisterFileReader('geojsonReader', geojsonReader);\n// Also register under an alternate name\nregisterFileReader('jsonReader', geojsonReader);\nmodule.exports = geojsonReader;\n\n\n\n// WEBPACK FOOTER //\n// ./geojsonReader.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar sceneObject = require('./sceneObject');\n\n/**\n * Creates a new map object.\n *\n * @class\n * @alias geo.map\n * @extends geo.sceneObject\n *\n * @param {object} arg Options object\n *\n * @param {string} arg.node DOM selector for the map container.\n *   *** Always required ***\n *\n * @param {string|geo.transform} [arg.gcs='EPSG:3857']\n *   The main coordinate system of the map (this is often web Mercator).\n *   * Required when using a domain/CS different from OSM *\n * @param {string|geo.transform} [arg.ingcs='EPSG:4326']\n *   The default coordinate system of interface calls (this is often latitude\n *   and longitude).\n * @param {number} [arg.unitsPerPixel=156543] GCS to pixel unit scaling at zoom\n *   0 (i.e. meters per pixel or degrees per pixel).\n * @param {object?} [arg.maxBounds] The maximum visible map bounds.\n * @param {number} [arg.maxBounds.left=-20037508] The left bound.\n * @param {number} [arg.maxBounds.right=20037508] The right bound.\n * @param {number} [arg.maxBounds.bottom=-20037508] The bottom bound.\n * @param {number} [arg.maxBounds.top=20037508] The top bound.\n * @param {number} [arg.maxBounds.gcs=arg.ingcs] The coordinate system for the\n *   bounds.\n *\n * @param {number} [arg.zoom=4] Initial zoom.\n * @param {object?} [arg.center] Initial map center.\n * @param {number} arg.center.x=0\n * @param {number} arg.center.y=0\n * @param {number} [arg.rotation=0] Initial clockwise rotation in radians.\n * @param {number?} [arg.width] The map width (default node width).\n * @param {number?} [arg.height] The map height (default node height).\n *\n * @param {number} [arg.min=0] Minimum zoom level (though fitting to the\n *   viewport may make it so this is smaller than the smallest possible value).\n * @param {number} [arg.max=16] Maximum zoom level.\n * @param {boolean} [arg.discreteZoom=false] If `true`, only allow integer zoom\n *   levels.  `false` for any zoom level.\n * @param {boolean|function} [arg.allowRotation=true] `false` prevents\n *   rotation, `true` allows any rotation.  If a function, the function is\n *   called with a rotation (angle in radians) and returns a valid rotation\n *   (this can be used to constrain the rotation to a range or specific to\n *   values).\n *\n * @param {geo.camera?} [arg.camera] The camera to control the view.\n * @param {geo.mapInteractor?} [arg.interactor] The UI event handler.  If\n *   `undefined`, a default interactor is created and used.  If `null`, no\n *   interactor is attached to the map.\n * @param {array} [arg.animationQueue] An array used to synchronize animations.\n *   If specified, this should be an empty array or the same array as passed to\n *   other map instances.\n * @param {boolean} [arg.autoResize=true] Adjust map size on window resize.\n * @param {boolean} [arg.clampBoundsX=false] Prevent panning outside of the\n *   maximum bounds in the horizontal direction.\n * @param {boolean} [arg.clampBoundsY=true] Prevent panning outside of the\n *   maximum bounds in the vertical direction.\n * @param {boolean} [arg.clampZoom=true] Prevent zooming out so that the map\n *   area is smaller than the window.\n *\n * @returns {geo.map}\n */\nvar map = function (arg) {\n  'use strict';\n  if (!(this instanceof map)) {\n    return new map(arg);\n  }\n  arg = arg || {};\n\n  if (arg.node === undefined || arg.node === null) {\n    console.warn('map creation requires a node');\n    return this;\n  }\n\n  sceneObject.call(this, arg);\n\n  var camera = require('./camera');\n  var transform = require('./transform');\n  var util = require('./util');\n  var registry = require('./registry');\n  var geo_event = require('./event');\n  var mapInteractor = require('./mapInteractor');\n  var uiLayer = require('./ui/uiLayer');\n\n  /**\n   * Private member variables\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      // See https://en.wikipedia.org/wiki/Web_Mercator\n      // phiMax = 180 / Math.PI * (2 * Math.atan(Math.exp(Math.PI)) - Math.PI / 2),\n      m_node = $(arg.node),\n      m_width = arg.width || m_node.width() || 512,\n      m_height = arg.height || m_node.height() || 512,\n      m_gcs = arg.gcs === undefined ? 'EPSG:3857' : arg.gcs,\n      m_ingcs = arg.ingcs === undefined ? 'EPSG:4326' : arg.ingcs,\n      m_center = {x: 0, y: 0},\n      m_zoom = arg.zoom === undefined ? 4 : arg.zoom,\n      m_rotation = arg.rotation ? arg.rotation : 0,\n      m_fileReader = null,\n      m_interactor = null,\n      m_validZoomRange = {min: 0, max: 16, origMin: 0},\n      m_transition = null,\n      m_queuedTransition = null,\n      m_discreteZoom = arg.discreteZoom ? true : false,\n      m_allowRotation = (\n        typeof arg.allowRotation === 'function' ?\n          arg.allowRotation : (arg.allowRotation === undefined ?\n            true : !!arg.allowRotation)),\n      m_maxBounds = arg.maxBounds || {},\n      m_camera = arg.camera || camera(),\n      m_unitsPerPixel,\n      m_clampBoundsX,\n      m_clampBoundsY,\n      m_clampZoom,\n      m_animationQueue = arg.animationQueue || [],\n      m_autoResize = arg.autoResize === undefined ? true : arg.autoResize,\n      m_origin;\n\n  /* Compute the maximum bounds on our map projection.  By default, x ranges\n   * from [-180, 180] in the interface projection, and y matches the x range in\n   * the map (not the interface) projection.  For images, this might be\n   * [0, width] and [0, height] instead. */\n  var mcx = ((m_maxBounds.left || 0) + (m_maxBounds.right || 0)) / 2,\n      mcy = ((m_maxBounds.bottom || 0) + (m_maxBounds.top || 0)) / 2;\n  m_maxBounds.left = transform.transformCoordinates(m_maxBounds.gcs || m_ingcs, m_gcs, {\n    x: m_maxBounds.left !== undefined ? m_maxBounds.left : -180, y: mcy\n  }).x;\n  m_maxBounds.right = transform.transformCoordinates(m_maxBounds.gcs || m_ingcs, m_gcs, {\n    x: m_maxBounds.right !== undefined ? m_maxBounds.right : 180, y: mcy\n  }).x;\n  m_maxBounds.top = (m_maxBounds.top !== undefined ?\n    transform.transformCoordinates(m_maxBounds.gcs || m_ingcs, m_gcs, {\n      x: mcx, y: m_maxBounds.top}).y : m_maxBounds.right);\n  m_maxBounds.bottom = (m_maxBounds.bottom !== undefined ?\n    transform.transformCoordinates(m_maxBounds.gcs || m_ingcs, m_gcs, {\n      x: mcx, y: m_maxBounds.bottom}).y : m_maxBounds.left);\n  m_unitsPerPixel = (arg.unitsPerPixel || (\n    m_maxBounds.right - m_maxBounds.left) / 256);\n\n  m_camera.viewport = {\n    width: m_width,\n    height: m_height,\n    left: m_node.offset().left,\n    top: m_node.offset().top\n  };\n  arg.center = util.normalizeCoordinates(arg.center);\n  m_clampBoundsX = arg.clampBoundsX === undefined ? false : arg.clampBoundsX;\n  m_clampBoundsY = arg.clampBoundsY === undefined ? true : arg.clampBoundsY;\n  m_clampZoom = arg.clampZoom === undefined ? true : arg.clampZoom;\n\n  /**\n   * Get/set the number of world space units per display pixel at the given\n   * zoom level.\n   *\n   * @param {number} [zoom=0] The target zoom level.\n   * @param {number?} [unit] If present, set the `unitsPerPixel` at the\n   *   specified zoom level.  Otherwise return the current value.\n   * @returns {number|this}\n   */\n  this.unitsPerPixel = function (zoom, unit) {\n    zoom = zoom || 0;\n    if (unit) {\n      // get the units at level 0\n      m_unitsPerPixel = Math.pow(2, zoom) * unit;\n\n      // redraw all the things\n      m_this.draw();\n      return m_this;\n    }\n    return Math.pow(2, -zoom) * m_unitsPerPixel;\n  };\n\n  /**\n   * Get/set the animation queue.  Two maps can share a single animation queue\n   * to ensure synchronized animations.  When setting, the animation queue will\n   * merge values from the existing queue into the new queue.\n   *\n   * @param {array} [queue] The animation queue to use.\n   * @returns {array|this} The current animation queue or the current map.\n   */\n  this.animationQueue = function (queue) {\n    if (queue === undefined) {\n      return m_animationQueue;\n    }\n    if (queue !== m_animationQueue) {\n      if (m_animationQueue.length) {\n        /* If the specified queue already has data in, don't copy the 0th\n         * element of the existing queue, since the 0th element is always the\n         * actual requestAnimationFrame reference.  In this case, cancel the\n         * existing requestAnimationFrame.  By using a property of window,\n         * tests can override this if needed. */\n        if (queue.length && queue[0] !== m_animationQueue[0]) {\n          window['cancelAnimationFrame'](m_animationQueue[0]);\n        }\n        for (var i = queue.length ? 1 : 0; i < m_animationQueue.length; i += 1) {\n          queue.push(m_animationQueue[i]);\n        }\n      }\n      m_animationQueue = queue;\n    }\n    return this;\n  };\n\n  /**\n   * Get/set the autoResize flag.\n   *\n   * @param {boolean} [autoResize] Truthy to automaticaly resize the map when\n   *    the size of the browser window changes.\n   * @returns {boolean|this} The current state of autoResize or the current map.\n   */\n  this.autoResize = function (autoResize) {\n    if (autoResize === undefined) {\n      return m_autoResize;\n    }\n    if (autoResize !== m_autoResize) {\n      $(window).off('resize', resizeSelf);\n      m_autoResize = autoResize;\n      if (m_autoResize) {\n        $(window).on('resize', resizeSelf);\n      }\n    }\n    return this;\n  };\n\n  /**\n   * Get/set the `clampBoundsX` setting.  If changed, adjust the bounds of the\n   * map as needed.\n   *\n   * @param {boolean} [clamp] The new clamp value.\n   * @returns {boolean|this}\n   */\n  this.clampBoundsX = function (clamp) {\n    if (clamp === undefined) {\n      return m_clampBoundsX;\n    }\n    if (clamp !== m_clampBoundsX) {\n      m_clampBoundsX = !!clamp;\n      m_this.pan({x: 0, y: 0});\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/set the `clampBoundsY` setting.  If changed, adjust the bounds of the\n   * map as needed.\n   *\n   * @param {boolean} [clamp] The new clamp value.\n   * @returns {boolean|this}\n   */\n  this.clampBoundsY = function (clamp) {\n    if (clamp === undefined) {\n      return m_clampBoundsY;\n    }\n    if (clamp !== m_clampBoundsY) {\n      m_clampBoundsY = !!clamp;\n      m_this.pan({x: 0, y: 0});\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/set the `clampZoom` setting.  If changed, adjust the bounds of the map\n   * as needed.\n   *\n   * @param {boolean} [clamp] The new clamp value.\n   * @returns {boolean|this}\n   */\n  this.clampZoom = function (clamp) {\n    if (clamp === undefined) {\n      return m_clampZoom;\n    }\n    if (clamp !== m_clampZoom) {\n      m_clampZoom = !!clamp;\n      reset_minimum_zoom();\n      m_this.zoom(m_zoom);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get/set the `allowRotation` setting.  If changed, adjust the map as\n   * needed.\n   *\n   * @param {boolean|function} [allowRotation] The new `allowRotation` value.\n   *    `false` prevents rotation, `true` allows any rotation.  If a function,\n   *    the function is called with a rotation (angle in radians) and returns a\n   *    valid rotation (this can be used to constrain the rotation to a range\n   *    or to specific values).\n   * @returns {boolean|function|this}\n   */\n  this.allowRotation = function (allowRotation) {\n    if (allowRotation === undefined) {\n      return m_allowRotation;\n    }\n    if (typeof allowRotation !== 'function') {\n      allowRotation = !!allowRotation;\n    }\n    if (allowRotation !== m_allowRotation) {\n      m_allowRotation = allowRotation;\n      m_this.rotation(m_rotation);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get the map's world coordinate origin in gcs coordinates.\n   *\n   * @returns {geo.geoPosition}\n   */\n  this.origin = function () {\n    return $.extend({}, m_origin);\n  };\n\n  /**\n   * Get the camera.\n   *\n   * @returns {geo.camera}\n   */\n  this.camera = function () {\n    return m_camera;\n  };\n\n  /**\n   * Get or set the map gcs.  This is the coordinate system used in drawing the\n   * map.\n   *\n   * @param {string} [arg] If `undefined`, return the current gcs.  Otherwise,\n   *    a new value for the gcs.\n   * @returns {string|this} A string used by {@link geo.transform}.\n   */\n  this.gcs = function (arg) {\n    if (arg === undefined) {\n      return m_gcs;\n    }\n    if (arg !== m_gcs) {\n      var oldCenter = m_this.center(undefined, undefined);\n      m_gcs = arg;\n      reset_minimum_zoom();\n      var newZoom = fix_zoom(m_zoom);\n      if (newZoom !== m_zoom) {\n        m_this.zoom(newZoom);\n      }\n      m_this.center(oldCenter, undefined);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get or set the map interface gcs.  This is the coordinate system used when\n   * getting or setting map bounds, center, and other values.\n   *\n   * @param {string} [arg] If `undefined`, returtn the current interface gcs.\n   *    Otherwise, a new value for the interface gcs.\n   * @returns {string|this} A string used by {@link geo.transform}.\n   */\n  this.ingcs = function (arg) {\n    if (arg === undefined) {\n      return m_ingcs;\n    }\n    m_ingcs = arg;\n    return m_this;\n  };\n\n  /**\n   * Get root DOM node of the map.\n   *\n   * @returns {object}\n   */\n  this.node = function () {\n    return m_node;\n  };\n\n  /**\n   * Get/Set zoom level of the map.\n   *\n   * @param {number} [val] If `undefined`, return the current zoom level.\n   *    Otherwise, the new zoom level to set.\n   * @param {object} [origin] If present, specifies the center of the zoom;\n   *    otherwise the map's display center is used.\n   * @param {geo.geoPosition} origin.geo The gcs coordinates of the zoom\n   *    center.\n   * @param {geo.screenPosition} origin.map The display coordinates of the zoom\n   *    center.\n   * @param {boolean} [ignoreDiscreteZoom] If `true`, ignore the discreteZoom\n   *    option when determining the new view.\n   * @returns {number|this}\n   * @fires geo.event.zoom\n   * @fires geo.event.pan\n   */\n  this.zoom = function (val, origin, ignoreDiscreteZoom) {\n    if (val === undefined) {\n      return m_zoom;\n    }\n    var evt, bounds;\n    /* If we are zooming around a point, ignore the clamp bounds */\n    var aroundPoint = (origin && (origin.mapgcs || origin.geo) && origin.map);\n    var ignoreClampBounds = aroundPoint;\n\n    /* The ignoreDiscreteZoom flag is intended to allow non-integer zoom values\n     * during animation. */\n    val = fix_zoom(val, ignoreDiscreteZoom);\n    if (val === m_zoom) {\n      return m_this;\n    }\n\n    m_zoom = val;\n\n    bounds = m_this.boundsFromZoomAndCenter(\n      val, m_center, m_rotation, null, ignoreDiscreteZoom, ignoreClampBounds);\n    m_this.modified();\n\n    camera_bounds(bounds, m_rotation);\n    evt = {\n      zoomLevel: m_zoom,\n      screenPosition: origin ? origin.map : undefined\n    };\n    m_this.geoTrigger(geo_event.zoom, evt);\n\n    if (aroundPoint) {\n      var shifted = m_this.gcsToDisplay(origin.mapgcs || origin.geo,\n                                        origin.mapgcs ? null : undefined);\n      m_this.pan({x: origin.map.x - shifted.x, y: origin.map.y - shifted.y},\n                 ignoreDiscreteZoom, true);\n    } else {\n      m_this.pan({x: 0, y: 0}, ignoreDiscreteZoom);\n    }\n    return m_this;\n  };\n\n  /**\n   * Pan the map by a number of display pixels.\n   *\n   * @param {object} delta Amount to pan in display pixels.\n   * @param {number} delta.x Horizontal distance on the display.\n   * @param {number} delta.y Vertical distance on the display.\n   * @param {boolean} [ignoreDiscreteZoom] If `true`, ignore the `discreteZoom`\n   *    option when determining the new view.\n   * @param {boolean|'limited'} [ignoreClampBounds] If `true` ignore the\n   *    `clampBoundsX` and `clampBoundsY` options when determining the new\n   *    view.  When `'limited'`, the `clampBoundsX` and `clampBoundsY` options\n   *    are selectively enforced so that the map will not end up more out of\n   *    bounds than its current state.\n   * @returns {this}\n   * @fires geo.event.pan\n   */\n  this.pan = function (delta, ignoreDiscreteZoom, ignoreClampBounds) {\n    var evt = {\n      screenDelta: delta\n    };\n\n    if (delta.x || delta.y) {\n      var unit = m_this.unitsPerPixel(m_zoom);\n\n      var sinr = Math.sin(m_rotation), cosr = Math.cos(m_rotation);\n      m_camera.pan({\n        x: (delta.x * cosr - (-delta.y) * sinr) * unit,\n        y: (delta.x * sinr + (-delta.y) * cosr) * unit\n      });\n    }\n    /* If m_clampBoundsX or m_clampBoundsY is true, clamp the pan */\n    var bounds = m_camera.bounds;\n    bounds = fix_bounds(\n      bounds, m_rotation, ignoreClampBounds === 'limited' ? {\n        x: delta.x, y: delta.y, unit: unit} : undefined,\n      ignoreClampBounds === true);\n    if (bounds !== m_camera.bounds) {\n      var panPos = m_this.gcsToDisplay({\n        x: m_camera.bounds.left, y: m_camera.bounds.top}, null);\n      bounds = m_this.boundsFromZoomAndCenter(m_zoom, {\n        x: (bounds.left + bounds.right) / 2,\n        y: (bounds.top + bounds.bottom) / 2\n      }, m_rotation, null, ignoreDiscreteZoom, true);\n      camera_bounds(bounds, m_rotation);\n      var clampPos = m_this.gcsToDisplay({\n        x: m_camera.bounds.left, y: m_camera.bounds.top}, null);\n      evt.screenDelta.x += clampPos.x - panPos.x;\n      evt.screenDelta.y += clampPos.y - panPos.y;\n    }\n\n    m_center = m_camera.displayToWorld({\n      x: m_width / 2,\n      y: m_height / 2\n    });\n\n    m_this.geoTrigger(geo_event.pan, evt);\n\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get/set the map rotation.  The rotation is performed around the current\n   * view center.  Rotation mostly ignores `clampBoundsX`, as the behavior\n   * feels peculiar otherwise.\n   *\n   * @param {number} rotation Absolute angle in radians (positive is\n   *    clockwise).\n   * @param {object} [origin] If specified, rotate about this origin.\n   * @param {geo.geoPosition} origin.geo The gcs coordinates of the\n   *    rotation center.\n   * @param {geo.screenPosition} origin.map The display coordinates of the\n   *    rotation center.\n   * @param {boolean} [ignoreRotationFunc] If `true`, don't constrain the\n   *    rotation.\n   * @returns {number|this}\n   * @fires geo.event.rotate\n   * @fires geo.event.pan\n   */\n  this.rotation = function (rotation, origin, ignoreRotationFunc) {\n    if (rotation === undefined) {\n      return m_rotation;\n    }\n    var aroundPoint = (origin && origin.geo && origin.map);\n\n    rotation = fix_rotation(rotation, ignoreRotationFunc);\n    if (rotation === m_rotation) {\n      return m_this;\n    }\n    m_rotation = rotation;\n\n    var bounds = m_this.boundsFromZoomAndCenter(\n      m_zoom, m_center, m_rotation, null, ignoreRotationFunc, true);\n    m_this.modified();\n\n    camera_bounds(bounds, m_rotation);\n\n    var evt = {\n      rotation: m_rotation,\n      screenPosition: origin ? origin.map : undefined\n    };\n\n    m_this.geoTrigger(geo_event.rotate, evt);\n\n    if (aroundPoint) {\n      var shifted = m_this.gcsToDisplay(origin.geo);\n      m_this.pan({x: origin.map.x - shifted.x, y: origin.map.y - shifted.y},\n                 undefined, true);\n    } else {\n      m_this.pan({x: 0, y: 0}, undefined, true);\n    }\n    /* Changing the rotation can change our minimum zoom */\n    reset_minimum_zoom();\n    m_this.zoom(m_zoom, undefined, ignoreRotationFunc);\n    return m_this;\n  };\n\n  /**\n   * Set center of the map to the given geographic coordinates, or get the\n   * current center.  Uses bare objects {x: 0, y: 0}.\n   *\n   * @param {geo.geoPosition} coordinates If specified, the new center of the\n   *    map.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.  If setting the\n   *    center, it is converted from this gcs to the map projection.  The\n   *    returned center is converted from the map projection to this gcs.\n   * @param {boolean} [ignoreDiscreteZoom] If `true`, ignore the `discreteZoom`\n   *    option when determining the new view.\n   * @param {boolean|'limited'} [ignoreClampBounds] If `true` ignore the\n   *    `clampBoundsX` and `clampBoundsY` options when determining the new\n   *    view.  When `'limited'`, the `clampBoundsX` and `clampBoundsY` options\n   *    are selectively enforced so that the map will not end up more out of\n   *    bounds than its current state.\n   * @returns {geo.geoPosition|this}\n   * @fires geo.event.pan\n   */\n  this.center = function (coordinates, gcs, ignoreDiscreteZoom, ignoreClampBounds) {\n    var center;\n    if (coordinates === undefined) {\n      center = $.extend({}, m_this.worldToGcs(m_center, gcs));\n      return center;\n    }\n\n    // get the screen coordinates of the new center\n    center = m_this.gcsToWorld(coordinates, gcs);\n\n    camera_bounds(m_this.boundsFromZoomAndCenter(\n      m_zoom, center, m_rotation, null, ignoreDiscreteZoom,\n      ignoreClampBounds), m_rotation);\n    m_this.modified();\n    // trigger a pan event\n    m_this.geoTrigger(geo_event.pan, {\n      screenDelta: {x: 0, y: 0}\n    });\n    return m_this;\n  };\n\n  /**\n   * Add a layer to the map.\n   *\n   * @param {string} layerName The type of layer to add to the map.\n   * @param {object} arg Parameters for the new layer.\n   * @returns {geo.layer}\n   * @fires geo.event.layerAdd\n   */\n  this.createLayer = function (layerName, arg) {\n    arg = arg || {};\n    var newLayer = registry.createLayer(\n      layerName, m_this, arg);\n\n    if (newLayer) {\n      m_this.addChild(newLayer);\n      m_this.children().forEach(function (c) {\n        if (c instanceof uiLayer) {\n          c.moveToTop();\n        }\n      });\n      newLayer._update();\n      m_this.modified();\n\n      m_this.geoTrigger(geo_event.layerAdd, {\n        target: m_this,\n        layer: newLayer\n      });\n    }\n\n    return newLayer;\n  };\n\n  /**\n   * Remove a layer from the map.\n   *\n   * @param {geo.layer?} layer Layer to remove from the map.\n   * @returns {geo.layer}\n   * @fires geo.event.layerRemove\n   */\n  this.deleteLayer = function (layer) {\n\n    if (layer !== null && layer !== undefined) {\n      layer._exit();\n      m_this.removeChild(layer);\n\n      m_this.modified();\n\n      m_this.geoTrigger(geo_event.layerRemove, {\n        target: m_this,\n        layer: layer\n      });\n    }\n\n    // Return deleted layer (similar to createLayer) as in the future\n    // we may provide extension of this method to support deletion of\n    // layer using id or some sort.\n    return layer;\n  };\n\n  /**\n   * Get or set the size of the map.\n   *\n   * @param {geo.screenSize} [arg] Size in pixels.\n   * @returns {geo.screenSize|this} The size in pixels or the map object.\n   * @fires geo.event.resize\n   */\n  this.size = function (arg) {\n    if (arg === undefined) {\n      return {\n        width: m_width,\n        height: m_height\n      };\n    }\n    // store the original center and restore it after the resize\n    var oldCenter = m_this.center();\n    m_width = arg.width || m_width;\n    m_height = arg.height || m_height;\n\n    reset_minimum_zoom();\n    var newZoom = fix_zoom(m_zoom);\n    if (newZoom !== m_zoom) {\n      m_this.zoom(newZoom);\n    }\n    m_this.camera().viewport = {\n      width: m_width,\n      height: m_height,\n      left: m_node.offset().left,\n      top: m_node.offset().top\n    };\n    m_this.center(oldCenter);\n\n    m_this.geoTrigger(geo_event.resize, {\n      target: m_this,\n      width: m_width,\n      height: m_height\n    });\n\n    m_this.modified();\n    return m_this;\n  };\n\n  /**\n   * Get the rotated size of the map.  This is the width and height of the\n   * non-rotated area necessary to enclose the rotated area in pixels.\n   *\n   * @returns {geo.screenSize} The size that fits the rotated map.\n   */\n  this.rotatedSize = function () {\n    if (!this.rotation()) {\n      return {\n        width: m_width,\n        height: m_height\n      };\n    }\n    var bds = rotate_bounds_center(\n      {x: 0, y: 0}, {width: m_width, height: m_height}, this.rotation());\n    return {\n      width: Math.abs(bds.right - bds.left),\n      height: Math.abs(bds.top - bds.bottom)\n    };\n  };\n\n  /**\n   * Convert from gcs coordinates to map world coordinates.\n   *\n   * @param {geo.geoPosition|geo.geoPosition[]} c The input coordinate to\n   *    convert.\n   * @param {string|geo.transform|null} [gcs] Input gcs.  `undefined` to use\n   *    the interface gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.worldPosition|geo.worldPosition[]} World space coordinates.\n   */\n  this.gcsToWorld = function (c, gcs) {\n    if (Array.isArray(c)) {\n      return c.map(function (pt) { return m_this.gcsToWorld(pt, gcs); });\n    }\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    if (gcs !== m_gcs) {\n      c = transform.transformCoordinates(gcs, m_gcs, c);\n    }\n    if (m_origin.x || m_origin.y || m_origin.z) {\n      c = transform.affineForward(\n        {origin: m_origin},\n        [c]\n      )[0];\n    } else if (!('z' in c)) {\n      c = {x: c.x, y: c.y, z: 0};\n    }\n    return c;\n  };\n\n  /**\n   * Convert from map world coordinates to gcs coordinates.\n   *\n   * @param {geo.worldPosition|geo.worldPosition[]} c The input coordinate to\n   *    convert.\n   * @param {string|geo.transform|null} [gcs] output gcs.  `undefined` to use\n   *    the interface gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.geoPosition|geo.geoPosition[]} GCS space coordinates.\n   */\n  this.worldToGcs = function (c, gcs) {\n    if (Array.isArray(c)) {\n      return c.map(function (pt) { return m_this.worldToGcs(pt, gcs); });\n    }\n    if (m_origin.x || m_origin.y || m_origin.z) {\n      c = transform.affineInverse(\n        {origin: m_origin},\n        [c]\n      )[0];\n    } else if (!('z' in c)) {\n      c = {x: c.x, y: c.y, z: 0};\n    }\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    if (gcs !== m_gcs) {\n      c = transform.transformCoordinates(m_gcs, gcs, c);\n    }\n    return c;\n  };\n\n  /**\n   * Convert from gcs coordinates to display coordinates.  This is identical to\n   * calling `gcsToWorld` and then `worldToDisplay`.\n   *\n   * @param {geo.geoPosition|geo.geoPosition[]} c The input coordinate to\n   *    convert.\n   * @param {string|geo.transform|null} [gcs] Input gcs.  `undefined` to use\n   *    the interface gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.screenPosition|geo.screenPosition[]} Display space\n   *    coordinates.\n   */\n  this.gcsToDisplay = function (c, gcs) {\n    c = m_this.gcsToWorld(c, gcs);\n    return m_this.worldToDisplay(c);\n  };\n\n  /**\n   * Convert from world coordinates to display coordinates using the attached\n   * camera.\n   *\n   * @param {geo.worldPosition|geo.worldPosition[]} c The input coordinate to\n   *    convert.\n   * @returns {geo.screenPosition|geo.screenPosition[]} Display space\n   *    coordinates.\n   */\n  this.worldToDisplay = function (c) {\n    if (Array.isArray(c)) {\n      return c.map(function (pt) { return m_camera.worldToDisplay(pt); });\n    }\n    return m_camera.worldToDisplay(c);\n  };\n\n  /**\n   * Convert from display to gcs coordinates.  This is identical to calling\n   * `displayToWorld` and then `worldToGcs`.\n   *\n   * @param {geo.screenPosition|geo.screenPosition[]} c The input display\n   *    coordinate to convert.\n   * @param {string|geo.transform|null} [gcs] Output gcs.  `undefined` to use\n   *    the interface gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.geoPosition|geoPosition[]} GCS space coordinates.\n   */\n  this.displayToGcs = function (c, gcs) {\n    c = m_this.displayToWorld(c); // done via camera\n    return m_this.worldToGcs(c, gcs);\n  };\n\n  /**\n   * Convert from display coordinates to world coordinates using the attached\n   * camera.\n   *\n   * @param {geo.screenPosition|geo.screenPosition[]} c The input coordinate to\n   *    convert.\n   * @returns {geo.worldPosition|geo.worldPosition[]} World space coordinates.\n   */\n  this.displayToWorld = function (c) {\n    if (Array.isArray(c)) {\n      return c.map(function (pt) { return m_camera.displayToWorld(pt); });\n    }\n    return m_camera.displayToWorld(c);\n  };\n\n  /**\n   * Redraw the map and all its layers.\n   *\n   * @returns {this} The map object.\n   * @fires geo.event.draw\n   * @fires geo.event.drawEnd\n   */\n  this.draw = function () {\n    var i, layers = m_this.children();\n\n    m_this.geoTrigger(geo_event.draw, {\n      target: m_this\n    });\n\n    m_this._update();\n\n    for (i = 0; i < layers.length; i += 1) {\n      layers[i].draw();\n    }\n\n    m_this.geoTrigger(geo_event.drawEnd, {\n      target: m_this\n    });\n\n    return m_this;\n  };\n\n  /**\n   * Get, set, or create and set a file reader to a layer in the map to be used\n   * as a drop target.\n   *\n   * @param {string|object} [readerOrName] `undefined` to get the current\n   *    reader, an instance of a file reader to set the reader, or a name to\n   *    create a file reader.\n   * @param {object} [opts] options Parameters for creating a file reader when\n   *    the reader is specified by name.  If this includes `layer`, use that\n   *    layer, otherwise create a layer using these options.\n   * @returns {geo.fileReader|this}\n   */\n  this.fileReader = function (readerOrName, opts) {\n    if (readerOrName === undefined) {\n      return m_fileReader;\n    }\n    if (typeof readerOrName === 'string') {\n      opts = opts || {};\n      if (!opts.layer) {\n        opts.layer = m_this.createLayer('feature', $.extend({}, opts));\n      }\n      opts.renderer = opts.layer.renderer().api();\n      m_fileReader = registry.createFileReader(readerOrName, opts);\n    } else {\n      m_fileReader = readerOrName;\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize the map.\n   *\n   * @returns {this} The map object.\n   */\n  this._init = function () {\n\n    if (m_node === undefined || m_node === null) {\n      throw new Error('Map require DIV node');\n    }\n\n    if (m_node.data('data-geojs-map') && $.isFunction(m_node.data('data-geojs-map').exit)) {\n      m_node.data('data-geojs-map').exit();\n    }\n    m_node.addClass('geojs-map');\n    m_node.data('data-geojs-map', m_this);\n    return m_this;\n  };\n\n  /**\n   * Update map.  This updates all layers of the map.\n   *\n   * @param {object} [request] Optional information about the source of this\n   *    update request.  This could be an event, for instance.  It is passed\n   *    to individual layer's `_update` function.\n   * @returns {this} The map object.\n   */\n  this._update = function (request) {\n    var i, layers = m_this.children();\n    for (i = 0; i < layers.length; i += 1) {\n      layers[i]._update(request);\n    }\n    return m_this;\n  };\n\n  /**\n   * Exit this map.  This removes all layers, destroys current interactor, and\n   * empties the associated DOM node.\n   */\n  this.exit = function () {\n    var i, layers = m_this.children();\n    for (i = layers.length - 1; i >= 0; i -= 1) {\n      layers[i]._exit();\n      m_this.removeChild(layers[i]);\n    }\n    if (m_this.interactor()) {\n      m_this.interactor().destroy();\n      m_this.interactor(null);\n    }\n    // if the animation queue was shared, this clears it\n    m_animationQueue = [];\n    m_this.node().data('data-geojs-map', null);\n    m_this.node().off('.geo');\n    /* make sure the map node has nothing left in it */\n    m_this.node().empty();\n    $(window).off('resize', resizeSelf);\n    s_exit();\n  };\n\n  /**\n   * Get or set the map interactor.\n   *\n   * @param {geo.mapInteractor} [arg] If specified, the map interactor to set.\n   * @returns {geo.mapInteractor|this} The current map interactor or the map\n   *    object.\n   */\n  this.interactor = function (arg) {\n    if (arg === undefined) {\n      return m_interactor;\n    }\n    if (m_interactor && m_interactor !== arg) {\n      m_interactor.destroy();\n    }\n    m_interactor = arg;\n\n    // this makes it possible to set a null interactor\n    // i.e. map.interactor(null);\n    if (m_interactor) {\n      /* If we set a map interactor, make sure we have a tabindex */\n      if (!m_node.attr('tabindex')) {\n        m_node.attr('tabindex', 0);\n      }\n      m_interactor.map(m_this);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get or set the min/max zoom range.\n   *\n   * @param {object} [arg] The zoom range.\n   * @param {number} [arg.min] The minimum zoom level.\n   * @param {number} [arg.max] The maximum zoom level.\n   * @param {boolean} [noRefresh] If `true`, don't update the map if the zoom\n   *    level has changed.\n   * @returns {object|this} The current zoom range or the map object.  The\n   *    `min` value is the minimum value that the map can go to based on the\n   *    current dimensions and settings, the `origMin` value is the value that\n   *    was specified via this function or when the map was created.\n   */\n  this.zoomRange = function (arg, noRefresh) {\n    if (arg === undefined) {\n      return $.extend({}, m_validZoomRange);\n    }\n    if (arg.max !== undefined) {\n      m_validZoomRange.max = arg.max;\n    }\n    if (arg.min !== undefined) {\n      m_validZoomRange.min = m_validZoomRange.origMin = arg.min;\n    }\n    reset_minimum_zoom();\n    if (!noRefresh) {\n      m_this.zoom(m_zoom);\n    }\n    return m_this;\n  };\n\n  /**\n   * Get the current transition or start an animated zoom/pan/rotate.  If a\n   * second transition is requested while a transition is already in progress,\n   * a new transition is created that is functionally from wherever the map has\n   * moved to (possibly partway through the first transition) going to the end\n   * point of the new transition.\n   *\n   * @param {object} [opts] Options for a transition, or `undefined` to get the\n   *    current transition.\n   * @param {geo.geoPosition} [opts.center] A new map center.\n   * @param {number} [opts.zoom] A new map zoom level.\n   * @param {geo.geoPosition} [opts.zoomOrigin] An origin to use when zooming\n   *    to a new zoom level.\n   * @param {number} [opts.rotation] A new map rotation.\n   * @param {number} [opts.duration=1000] Transition duration in milliseconds.\n   * @param {function} [opts.ease] Easing function for the transition.  This is\n   *    in the style of a d3 easing function.\n   * @param {function} [opts.interp] Function to use when interpolating\n   *    between values.  This gets passed two arrays, the start and end values\n   *    for [`x`, `y`, `z` or `zoom`, `rotation`], and returns a function that,\n   *    when passed a time value returns an array of the interpolated [`x`,\n   *    `y`, `z` or `zoom`, `rotation`] values.\n   * @param {boolean} [opts.zCoord] If `true`, convert zoom values to z values\n   *    for interpolation.\n   * @param {function} [opts.done] If specified, call this function when a\n   *    transition completes.  The function is called with an object that\n   *    contains `cancel`: a boolean if the transition was canceled, `source`:\n   *    a value based on what canceled a transition, `transition`: the current\n   *    transition that just completed, `next`: a boolean if another transition\n   *    follows immediately.\n   * @param {string|geo.transform|null} [gcs] Input gcs.  `undefined` to use\n   *    the interface gcs, `null` to use the map gcs, or any other transform.\n   *    Applies only to `opts.center` and to converting zoom values to height,\n   *    if specified.\n   * @param {number} [animTime] The animation frame time (from a\n   *    `window.requestAnimationFrame` callback).  Used if a new transition is\n   *    requested because the current transition has completed to keep things\n   *    synchronized.\n   * @returns {geo.map}\n   * @fires geo.event.transitionstart\n   * @fires geo.event.transitionend\n   * @fires geo.event.transitioncancel\n   */\n  this.transition = function (opts, gcs, animTime) {\n\n    if (opts === undefined) {\n      return m_transition;\n    }\n\n    if (m_transition) {\n      /* The queued transition needs to combine the current transition's\n       * endpoint, any other queued transition, and the new transition to be\n       * complete. */\n      var transitionEnd = $.extend(true, {}, m_transition.end);\n      if (transitionEnd.center && m_gcs !== m_ingcs) {\n        transitionEnd.center = transform.transformCoordinates(\n          m_gcs, m_ingcs, transitionEnd.center);\n      }\n      m_queuedTransition = $.extend(\n        {}, transitionEnd || {}, m_queuedTransition || {}, opts);\n      return m_this;\n    }\n\n    /* Basic linear interpolation between two values. */\n    function interp1(p0, p1, t) {\n      return p0 + (p1 - p0) * t;\n    }\n    /**\n     * Generate an interpolation function that interpolates all array entries.\n     *\n     * @param {array} p0 An array of numbers to interpolate from.\n     * @param {array} p1 An array of numbers to interpolate to.\n     * @returns {function} A function that, given `t`, returns an array of\n     *      interpolated values.\n     * @private\n     */\n    function defaultInterp(p0, p1) {\n      return function (t) {\n        var result = [];\n        $.each(p0, function (idx) {\n          result.push(interp1(p0[idx], p1[idx], t));\n        });\n        return result;\n      };\n    }\n\n    var units = m_this.unitsPerPixel(0);\n\n    // Transform zoom level into z-coordinate and inverse.\n    function zoom2z(z) {\n      return Math.pow(2, -(z + 1)) * units * m_height;\n    }\n    function z2zoom(z) {\n      return -Math.log2(z / units / m_height) - 1;\n    }\n\n    var defaultOpts = {\n      center: undefined,\n      zoom: m_this.zoom(),\n      rotation: m_this.rotation(),\n      duration: 1000,\n      ease: function (t) {\n        return t;\n      },\n      interp: defaultInterp,\n      done: null,\n      zCoord: true\n    };\n\n    if (opts.center) {\n      gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n      opts = $.extend(true, {}, opts);\n      opts.center = util.normalizeCoordinates(opts.center);\n      if (gcs !== m_gcs) {\n        opts.center = transform.transformCoordinates(gcs, m_gcs, opts.center);\n      }\n    }\n    opts = $.extend(true, {}, defaultOpts, opts);\n\n    m_transition = {\n      start: {\n        center: m_this.center(undefined, null),\n        zoom: m_this.zoom(),\n        rotation: m_this.rotation()\n      },\n      end: {\n        center: opts.center,\n        zoom: fix_zoom(opts.zoom),\n        rotation: fix_rotation(opts.rotation, undefined, true)\n      },\n      ease: opts.ease,\n      zCoord: opts.zCoord,\n      done: opts.done,\n      duration: opts.duration,\n      zoomOrigin: opts.zoomOrigin\n    };\n\n    m_transition.interp = opts.interp([\n      m_transition.start.center.x,\n      m_transition.start.center.y,\n      opts.zCoord ? zoom2z(m_transition.start.zoom) : m_transition.start.zoom,\n      m_transition.start.rotation\n    ], [\n      m_transition.end.center ? m_transition.end.center.x : m_transition.start.center.x,\n      m_transition.end.center ? m_transition.end.center.y : m_transition.start.center.y,\n      opts.zCoord ? zoom2z(m_transition.end.zoom) : m_transition.end.zoom,\n      m_transition.end.rotation\n    ]);\n\n    /**\n     * Process an animation from during a transition.\n     *\n     * @param {number} time The animation frame time.  Used to ensure multiple\n     *      transitions are smooth.\n     * @private\n     */\n    function anim(time) {\n      var done = m_transition.done,\n          next = m_queuedTransition;\n      if (m_transition.cancel === true) {\n        /* Finish cancelling a transition. */\n        m_this.geoTrigger(geo_event.transitioncancel, opts);\n        if (done) {\n          done({\n            cancel: true,\n            source: m_transition.cancelSource,\n            transition: m_transition\n          });\n        }\n        m_transition = null;\n        /* There will only be a queuedTransition if it was created after this\n         * transition was cancelled */\n        if (m_queuedTransition) {\n          next = m_queuedTransition;\n          m_queuedTransition = null;\n          m_this.transition(next, undefined, time);\n        }\n        return;\n      }\n\n      if (!m_transition.start.time) {\n        m_transition.start.time = time;\n        m_transition.end.time = time + opts.duration;\n      }\n      m_transition.time = time - m_transition.start.time;\n      if (time >= m_transition.end.time || next) {\n        if (!next) {\n          if (m_transition.end.center) {\n            var needZoom = m_zoom !== fix_zoom(m_transition.end.zoom);\n            m_this.center(m_transition.end.center, null, needZoom, needZoom);\n          }\n          m_this.zoom(m_transition.end.zoom, m_transition.zoomOrigin);\n          m_this.rotation(fix_rotation(m_transition.end.rotation));\n        }\n\n        m_this.geoTrigger(geo_event.transitionend, opts);\n\n        if (done) {\n          done({next: !!next});\n        }\n\n        m_transition = null;\n        if (m_queuedTransition) {\n          next = m_queuedTransition;\n          m_queuedTransition = null;\n          m_this.transition(next, undefined, time);\n        }\n\n        return;\n      }\n\n      var z = m_transition.ease(\n        (time - m_transition.start.time) / opts.duration\n      );\n\n      var p = m_transition.interp(z);\n      if (m_transition.zCoord) {\n        p[2] = z2zoom(p[2]);\n      }\n      if (fix_zoom(p[2], true) === m_zoom) {\n        m_this.center({\n          x: p[0],\n          y: p[1]\n        }, null, true, true);\n      } else {\n        m_center = m_this.gcsToWorld({x: p[0], y: p[1]}, null, true, true);\n        m_this.zoom(p[2], m_transition.zoomOrigin, true);\n      }\n      m_this.rotation(p[3], undefined, true);\n\n      m_this.scheduleAnimationFrame(anim);\n    }\n\n    m_this.geoTrigger(geo_event.transitionstart, opts);\n\n    if (geo_event.cancelNavigation) {\n      m_transition = null;\n      m_this.geoTrigger(geo_event.transitionend, opts);\n      return m_this;\n    } else if (geo_event.cancelAnimation) {\n      // run the navigation synchronously\n      opts.duration = 0;\n      anim(0);\n    } else if (animTime) {\n      anim(animTime);\n    } else {\n      m_this.scheduleAnimationFrame(anim);\n    }\n    return m_this;\n  };\n\n  /**\n   * Cancel any existing transition.  The transition will send a cancel event\n   * at the next animation frame, but no further activity occurs.\n   *\n   * @param {string} [source] Optional cause of the cancel.  This can be any\n   *    value, but something like `(method name).(action)` is recommended to\n   *    allow other functions to determine the source and cause of the\n   *    transition being canceled.\n   * @returns {boolean} `true` if a transition was in progress.\n   * @fires geo.event.transitioncancel\n   */\n  this.transitionCancel = function (source) {\n    if (m_transition && (m_transition.cancel !== true || m_queuedTransition)) {\n      m_transition.cancel = true;\n      m_transition.cancelSource = source || m_transition.cancelSource || '';\n      m_queuedTransition = null;\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Get/set the locations of the current map edges.  When set, the left-top\n   * and right-bottom corners are transformed to the map's gcs and then used\n   * to set the bounds.\n   *\n   * @param {geo.geoBounds} [bds] The requested map bounds.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.  If setting the\n   *    bounds, they are converted from this gcs to the map projection.  The\n   *    returned bounds are converted from the map projection to this gcs.\n   * @returns {geo.geoBounds} The actual new map bounds.\n   */\n  this.bounds = function (bds, gcs) {\n    var nav;\n\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    if (bds !== undefined) {\n      if (gcs !== m_gcs) {\n        var trans = transform.transformCoordinates(gcs, m_gcs, [{\n          x: bds.left, y: bds.top}, {x: bds.right, y: bds.bottom}]);\n        bds = {\n          left: trans[0].x,\n          top: trans[0].y,\n          right: trans[1].x,\n          bottom: trans[1].y\n        };\n      }\n      bds = fix_bounds(bds, m_rotation);\n      nav = m_this.zoomAndCenterFromBounds(bds, m_rotation, null);\n\n      // This might have consequences in terms of bounds/zoom clamping.\n      // What behavior do we expect from this method in that case?\n      m_this.zoom(nav.zoom);\n      m_this.center(nav.center, null);\n    }\n\n    return m_this.boundsFromZoomAndCenter(m_zoom, m_center, m_rotation, gcs,\n                                          true);\n  };\n\n  /**\n   * Get/set the maximum view area of the map.  If the map wraps, this is the\n   * unwrapped area.\n   *\n   * @param {geo.geoBounds} [bounds] The map bounds.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.  If setting the\n   *    bounds, they are converted from this gcs to the map projection.  The\n   *    returned bounds are converted from the map projection to this gcs.\n   * @returns {geo.geoBounds|this} The map maximum bounds or the map object.\n   */\n  this.maxBounds = function (bounds, gcs) {\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    if (bounds === undefined) {\n      return {\n        left: transform.transformCoordinates(m_gcs, gcs, {\n          x: m_maxBounds.left, y: 0}).x,\n        right: transform.transformCoordinates(m_gcs, gcs, {\n          x: m_maxBounds.right, y: 0}).x,\n        bottom: transform.transformCoordinates(m_gcs, gcs, {\n          x: 0, y: m_maxBounds.bottom}).y,\n        top: transform.transformCoordinates(m_gcs, gcs, {\n          x: 0, y: m_maxBounds.top}).y\n      };\n    }\n    var cx = ((bounds.left || 0) + (bounds.right || 0)) / 2,\n        cy = ((bounds.bottom || 0) + (bounds.top || 0)) / 2;\n    if (bounds.left !== undefined) {\n      m_maxBounds.left = transform.transformCoordinates(gcs, m_gcs, {\n        x: bounds.left, y: cy}).x;\n    }\n    if (bounds.right !== undefined) {\n      m_maxBounds.right = transform.transformCoordinates(gcs, m_gcs, {\n        x: bounds.right, y: cy}).x;\n    }\n    if (bounds.bottom !== undefined) {\n      m_maxBounds.bottom = transform.transformCoordinates(gcs, m_gcs, {\n        x: cx, y: bounds.bottom}).y;\n    }\n    if (bounds.top !== undefined) {\n      m_maxBounds.top = transform.transformCoordinates(gcs, m_gcs, {\n        x: cx, y: bounds.top}).y;\n    }\n    reset_minimum_zoom();\n    m_this.zoom(m_zoom);\n    m_this.pan({x: 0, y: 0});\n    return this;\n  };\n\n  /**\n   * Get the center zoom level necessary to display the given bounds.\n   *\n   * @param {geo.geoBounds} bounds The requested map bounds.  `right` must be\n   *    greater than `left` and `bottom` must be greater than `top` in the\n   *    map's gcs (after conversion from the provided gcs).\n   * @param {number} rotation Rotation in clockwise radians.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @returns {geo.zoomAndCenter}\n   */\n  this.zoomAndCenterFromBounds = function (bounds, rotation, gcs) {\n    var center, zoom;\n\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    if (gcs !== m_gcs) {\n      var trans = transform.transformCoordinates(gcs, m_gcs, [{\n        x: bounds.left, y: bounds.top}, {x: bounds.right, y: bounds.bottom}]);\n      bounds = {\n        left: trans[0].x,\n        top: trans[0].y,\n        right: trans[1].x,\n        bottom: trans[1].y\n      };\n    }\n    if (bounds.left >= bounds.right || bounds.bottom >= bounds.top) {\n      throw new Error('Invalid bounds provided');\n    }\n\n    // calculate the zoom to fit the bounds\n    zoom = fix_zoom(calculate_zoom(bounds, rotation));\n\n    // clamp bounds if necessary\n    bounds = fix_bounds(bounds, rotation);\n\n    /* This relies on having the map projection coordinates be uniform\n     * regardless of location.  If not, the center will not be correct. */\n    // calculate new center\n    center = {\n      x: (bounds.left + bounds.right) / 2 - m_origin.x,\n      y: (bounds.top + bounds.bottom) / 2 - m_origin.y\n    };\n    if (gcs !== m_gcs) {\n      center = transform.transformCoordinates(m_gcs, gcs, center);\n    }\n    return {\n      zoom: zoom,\n      center: center\n    };\n  };\n\n  /**\n   * Get the bounds that will be displayed with the given zoom and center.\n   *\n   * Note: the bounds may not have the requested zoom and center due to map\n   * restrictions.\n   *\n   * @param {number} zoom The requested zoom level.\n   * @param {geo.geoPosition} center The requested center.\n   * @param {number} rotation The requested rotation in clockwise radians.\n   * @param {string|geo.transform|null} [gcs] `undefined` to use the interface\n   *    gcs, `null` to use the map gcs, or any other transform.\n   * @param {boolean} ignoreDiscreteZoom If `true`, ignore the `discreteZoom`\n   *    option when determining the new view.\n   * @param {boolean} [ignoreClampBounds] If `true` and `clampBoundsX` or\n   *    `clampBoundsY` is set, allow the bounds to be less clamped.\n   *    The map's `maxBounds` can be shifted so that they lie no further than\n   *    the center of the bounds (rather than being forced to be at the edge).\n   * @returns {geo.geoBounds}\n   */\n  this.boundsFromZoomAndCenter = function (zoom, center, rotation, gcs, ignoreDiscreteZoom, ignoreClampBounds) {\n    var width, height, halfw, halfh, bounds, units;\n\n    gcs = (gcs === null ? m_gcs : (gcs === undefined ? m_ingcs : gcs));\n    // preprocess the arguments\n    zoom = fix_zoom(zoom, ignoreDiscreteZoom);\n    units = m_this.unitsPerPixel(zoom);\n    center = m_this.gcsToWorld(center, null);\n\n    // get half the width and height in world coordinates\n    width = m_width * units;\n    height = m_height * units;\n    halfw = width / 2;\n    halfh = height / 2;\n\n    // calculate the bounds.  This is only valid if the map projection has\n    // uniform units in each direction.  If not, then worldToGcs should be\n    // used.\n\n    if (rotation) {\n      center.x += m_origin.x;\n      center.y += m_origin.y;\n      bounds = rotate_bounds_center(\n        center, {width: width, height: height}, rotation);\n      // correct the bounds when clamping is enabled\n      bounds.width = width;\n      bounds.height = height;\n      bounds = fix_bounds(bounds, rotation, undefined, ignoreClampBounds);\n    } else {\n      bounds = {\n        left: center.x - halfw + m_origin.x,\n        right: center.x + halfw + m_origin.x,\n        bottom: center.y - halfh + m_origin.y,\n        top: center.y + halfh + m_origin.y\n      };\n      // correct the bounds when clamping is enabled\n      bounds = fix_bounds(bounds, 0, undefined, ignoreClampBounds);\n    }\n    if (gcs !== m_gcs) {\n      var bds = transform.transformCoordinates(\n        m_gcs, gcs,\n        [[bounds.left, bounds.top], [bounds.right, bounds.bottom]]);\n      bounds = {\n        left: bds[0][0], top: bds[0][1], right: bds[1][0], bottom: bds[1][1]\n      };\n    }\n    /* Add the original width and height of the viewport before rotation. */\n    bounds.width = width;\n    bounds.height = height;\n    return bounds;\n  };\n\n  /**\n   * Get/set the discrete zoom flag.  If `true`, the map will snap to integer\n   * zoom levels.\n   *\n   * @param {boolean} [discreteZoom] If specified, the new discrete zoom flag.\n   * @returns {boolean|this} The current discrete zoom flag or the map object.\n   */\n  this.discreteZoom = function (discreteZoom) {\n    if (discreteZoom === undefined) {\n      return m_discreteZoom;\n    }\n    discreteZoom = discreteZoom ? true : false;\n    if (m_discreteZoom !== discreteZoom) {\n      m_discreteZoom = discreteZoom;\n      if (m_discreteZoom) {\n        m_this.zoom(Math.round(m_this.zoom()));\n      }\n      if (m_this.interactor()) {\n        m_this.interactor().options({discreteZoom: m_discreteZoom});\n      }\n    }\n    return m_this;\n  };\n\n  /**\n   * Get the layers contained in the map.\n   * Alias of {@link geo.sceneObject#children}.\n   * @method\n   */\n  this.layers = this.children;\n\n  /**\n   * Update the attribution notice displayed on the bottom right corner of\n   * the map.  The content of this notice is managed by individual layers.\n   * This method queries all of the visible layers and joins the individual\n   * attribution notices into a single element.  By default, this method\n   * is called on each of the following events:\n   *\n   *   * {@link geo.event.layerAdd}\n   *   * {@link geo.event.layerRemove}\n   *\n   * In addition, layers should call this method when their own attribution\n   * notices have changed.  Users, in general, should not need to call this.\n   *\n   * @returns {this} Chainable.\n   */\n  this.updateAttribution = function () {\n    // clear any existing attribution content\n    m_this.node().find('.geo-attribution').remove();\n\n    // generate a new attribution node\n    var $a = $('<div/>')\n      .addClass('geo-attribution')\n      .on('mousedown', function (evt) {\n        evt.stopPropagation();\n      });\n\n    // append content from each layer\n    m_this.children().forEach(function (layer) {\n      var content = layer.attribution();\n      if (content) {\n        $('<span/>')\n          .addClass('geo-attribution-layer')\n          .html(content)\n          .appendTo($a);\n      }\n    });\n\n    /* Only add the element if there is at least one attribution */\n    if ($('span', $a).length) {\n      $a.appendTo(m_this.node());\n    }\n    return m_this;\n  };\n\n  /**\n   * Get a screen-shot of all or some of the canvas layers of map.  Note that\n   * webGL layers are rerendered, even if\n   *   `window.overrideContextAttributes.preserveDrawingBuffer = true;`\n   * is set before creating the map object.  Chrome, at least, may not keep the\n   * drawing buffers if the tab loses focus (and returning focus won't\n   * necessarily rerender).\n   *\n   * @param {geo.layer|geo.layer[]|false|object} [layers] Either a layer, a\n   *    list of layers, falsy to get all layers, or an object that contains\n   *    optional values of `layers`, `type`, `encoderOptions`, and additional\n   *    values listed in the `opts` parameter (this last form allows a single\n   *    argument for the function).\n   * @param {string} [type='image/png'] See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL\n   *    canvas.toDataURL}.  Use `'canvas'` to return the canvas element (this\n   *    can be used to get the results as a blob, which can be faster for some\n   *    operations but is not supported as widely).\n   * @param {number} [encoderOptions] See {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL\n   *    canvas.toDataURL}.\n   * @param {object} [opts] Additional screenshot options.\n   * @param {false|string|CanvasRenderingContext2D.fillStyle}\n   *    [opts.background='white'] If `false` or `null`, don't prefill the\n   *    background.  Otherwise, a css color or\n   *    `CanvasRenderingContext2D.fillStyle` to fill the initial canvas.  This\n   *    could match the background of the browser page, for instance.\n   * @param {boolean|'idle'} [opts.wait=false] If `'idle'`, wait for the map to\n   *    be idle and one additional animation frame to occur.  If truthy, wait\n   *    for an animation frame to occur.  Otherwise, take the screenshot as\n   *    soon as possible.\n   * @param {boolean|null} [opts.attribution=null] If `null` or unspecified,\n   *    include the attribution only if all layers are used.  If false, never\n   *    include the attribution.  If `true`, always include it.\n   * @returns {deferred} A jQuery Deferred object.  The done function receives\n   *    either a data URL or an `HTMLCanvasElement` with the result.\n   * @fires geo.event.screenshot.ready\n   */\n  this.screenshot = function (layers, type, encoderOptions, opts) {\n    var defer;\n\n    if (layers && !Array.isArray(layers) && !layers.renderer) {\n      type = type || layers.type;\n      encoderOptions = encoderOptions || layers.encoderOptions;\n      opts = opts || layers;\n      layers = layers.layers;\n    }\n    opts = opts || {};\n    /* if asked to wait, return a Deferred that will do so, calling the\n     * screenshot function without waiting once it is done. */\n    if (opts.wait) {\n      var optsWithoutWait = $.extend({}, opts, {wait: false});\n      defer = $.Deferred();\n\n      var waitForRAF = function () {\n        window.requestAnimationFrame(function () {\n          defer.resolve();\n        });\n      };\n\n      if (opts.wait === 'idle') {\n        m_this.onIdle(waitForRAF);\n      } else {\n        waitForRAF();\n      }\n      return defer.then(function () {\n        return m_this.screenshot(layers, type, encoderOptions, optsWithoutWait);\n      });\n    }\n    defer = $.when();\n    // ensure layers is a list of all the layers we want to include\n    if (!layers) {\n      layers = m_this.layers();\n      if (opts.attribution === null || opts.attribution === undefined) {\n        opts.attribution = true;\n      }\n    } else if (!Array.isArray(layers)) {\n      layers = [layers];\n    }\n    // filter to only the included layers\n    layers = layers.filter(function (l) {\n      return m_this.layers().indexOf(l) >= 0 &&\n             l.opacity() > 0 && (!l.visible || l.visible());\n    });\n    // sort layers by z-index\n    layers = layers.sort(\n      function (a, b) { return (a.zIndex() - b.zIndex()); }\n    );\n    // create a new canvas element\n    var result = document.createElement('canvas');\n    result.width = m_width;\n    result.height = m_height;\n    var context = result.getContext('2d');\n    // optionally start with a white or custom background\n    if (opts.background !== false && opts.background !== null) {\n      var background = opts.background;\n      if (opts.background === undefined) {\n        /* If we are using the map's current background, start with white as a\n         * fallback, then fill with the backgrounds of all parents and the map\n         * node.  Since each may be partially transparent, this is required to\n         * match the web page's color.  It won't use background patterns. */\n        context.fillStyle = 'white';\n        context.fillRect(0, 0, result.width, result.height);\n        m_this.node().parents().get().reverse().forEach(function (elem) {\n          background = window.getComputedStyle(elem).backgroundColor;\n          if (background && background !== 'transparent') {\n            context.fillStyle = background;\n            context.fillRect(0, 0, result.width, result.height);\n          }\n        });\n        background = window.getComputedStyle(m_this.node()[0]).backgroundColor;\n      }\n      if (background && background !== 'transparent') {\n        context.fillStyle = background;\n        context.fillRect(0, 0, result.width, result.height);\n      }\n    }\n    // for each layer, copy to our new canvas.\n    layers.forEach(function (layer) {\n      var opacity = layer.opacity();\n      layer.node().children('canvas').each(function () {\n        var canvasElem = $(this);\n        defer = defer.then(function () {\n          if (layer.renderer().api() === 'vgl') {\n            layer.renderer()._renderFrame();\n          }\n          drawLayerImageToContext(context, opacity, canvasElem, canvasElem[0]);\n        });\n      });\n      if (layer.node().children().not('canvas').length || !layer.node().children().length) {\n        defer = defer.then(function () {\n          return util.htmlToImage(layer.node(), 1).done(function (img) {\n            drawLayerImageToContext(context, 1, $([]), img);\n          });\n        });\n      }\n    });\n    if (opts.attribution) {\n      m_this.node().find('.geo-attribution').each(function () {\n        var attrElem = $(this);\n        defer = defer.then(function () {\n          return util.htmlToImage(attrElem, 1).done(function (img) {\n            drawLayerImageToContext(context, 1, $([]), img);\n          });\n        });\n      });\n    }\n    defer = defer.then(function () {\n      var canvas = result;\n      if (type !== 'canvas') {\n        try {\n          result = result.toDataURL(type, encoderOptions);\n        } catch (err) {\n          console.warn('Failed to convert screenshot to output', err);\n          var failure = $.Deferred();\n          failure.reject();\n          return failure;\n        }\n      }\n      m_this.geoTrigger(geo_event.screenshot.ready, {\n        canvas: canvas,\n        screenshot: result\n      });\n      return result;\n    });\n    return defer;\n  };\n\n  /**\n   * Instead of each function using `window.requestAnimationFrame`, schedule\n   * all such frames through this function.  This allows the callbacks to be\n   * reordered or removed as needed and reduces overhead in Chrome a small\n   * amount.  Also, if the animation queue is shared between map instances, the\n   * callbacks will be called in a single time slice, providing better\n   * synchronization.\n   *\n   * @param {function} callback Function to call during the animation frame.\n   *    It is called with an animation epoch, exactly as\n   *    `requestAnimationFrame`.\n   * @param {boolean|'remove'} [action=false] Falsy to only add the callback if\n   *    it is not already scheduled.  `'remove'` to remove the callback (use\n   *    this instead of `cancelAnimationFrame`).  Any other truthy value moves\n   *    the callback to the end of the list.\n   * @returns {number} An integer as returned by\n   *    `window.requestAnimationFrame`.\n   */\n  this.scheduleAnimationFrame = function (callback, action) {\n    if (!m_animationQueue.length) {\n      /* By refering to requestAnimationFrame as a property of window, versus\n       * explicitly using window.requestAnimationFrame, we prevent the\n       * stripping of 'window' off of the reference and allow our tests to\n       * override this if needed. */\n      m_animationQueue.push(window['requestAnimationFrame'](processAnimationFrame));\n    }\n    var pos = m_animationQueue.indexOf(callback, 1);\n    if (pos >= 0) {\n      if (!action) {\n        return;\n      }\n      m_animationQueue.splice(pos, 1);\n      if (action === 'remove') {\n        return;\n      }\n    }\n    m_animationQueue.push(callback);\n    return m_animationQueue[0];\n  };\n\n  /**\n   * Draw a layer image to a canvas context.  The layer's opacity and transform\n   * are applied.  This is used as part of making a screenshot.\n   *\n   * @param {context} context The 2d canvas context to draw into.\n   * @param {number} opacity The opacity in the range [0, 1].\n   * @param {object} elem A jQuery element that might have a transform.\n   * @param {HTMLImageObject} img The image or canvas to draw to the canvas.\n   * @private\n   */\n  function drawLayerImageToContext(context, opacity, elem, img) {\n    context.globalAlpha = opacity;\n    var transform = elem.css('transform');\n    // if the canvas is being transformed, apply the same transformation\n    if (transform && transform.substr(0, 7) === 'matrix(') {\n      context.setTransform.apply(context, transform.substr(7, transform.length - 8).split(',').map(parseFloat));\n    } else {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    context.drawImage(img, 0, 0);\n  }\n\n  /**\n   * Sevice the callback during an animation frame.  This uses splice to modify\n   * the `animationQueue` to allow multiple map instances to share the queue.\n   * @private\n   */\n  function processAnimationFrame() {\n    var queue = m_animationQueue.splice(0, m_animationQueue.length);\n\n    /* The first entry is the reference to the window.requestAnimationFrame. */\n    for (var i = 1; i < queue.length; i += 1) {\n      try {\n        queue[i].apply(this, arguments);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }\n\n  /*\n   * The following are some private methods for interacting with the camera.\n   * In order to hide the complexity of dealing with map aspect ratios,\n   * clamping behavior, resetting zoom levels on resize, etc. from the\n   * layers, the map handles camera movements directly.  This requires\n   * passing all camera movement events through the map initially.  The\n   * map uses these methods to fix up the events according to the constraints\n   * of the display and passes the event to the layers.\n   */\n  /**\n   * Calculate the scaling factor to fit the given map bounds into the viewport\n   * with the correct aspect ratio.\n   *\n   * @param {geo.geoBounds} bounds A desired bounds.\n   * @returns {object} Multiplicative aspect ratio correction with x and y\n   *    values.\n   * @private\n   */\n  function camera_scaling(bounds) {\n    var width = bounds.right - bounds.left,\n        height = bounds.top - bounds.bottom,\n        ar_bds = Math.abs(width / height),\n        ar_vp = m_width / m_height,\n        sclx, scly;\n\n    if (ar_bds > ar_vp) {\n      // fit left and right\n      sclx = 1;\n\n      // grow top and bottom\n      scly = ar_bds / ar_vp;\n    } else {\n      // fit top and bottom\n      scly = 1;\n\n      // grow left and right\n      sclx = ar_vp / ar_bds;\n    }\n    return {x: sclx, y: scly};\n  }\n\n  /**\n   * Adjust a set of bounds based on a rotation.  If a rotation exists, the\n   * returned bounds are typically larger than the source bounds.\n   *\n   * @param {geo.geoBounds} bounds Bounds to adjust.\n   * @param {number} rotation Angle in radians (positive is clockwise).\n   * @returns {geo.geoBounds}\n   * @private\n   */\n  function rotate_bounds(bounds, rotation) {\n    if (rotation) {\n      var center = {\n        x: (bounds.left + bounds.right) / 2,\n        y: (bounds.top + bounds.bottom) / 2\n      };\n      var size = {\n        width: Math.abs(bounds.left - bounds.right),\n        height: Math.abs(bounds.top - bounds.bottom)\n      };\n      bounds = rotate_bounds_center(center, size, rotation);\n    }\n    return bounds;\n  }\n\n  /**\n   * Generate a set of bounds based on a center point, a width and height, and\n   * a rotation.\n   *\n   * @param {geo.geoPosition} center\n   * @param {object} size Size of the screen in map gcs.\n   * @param {number} size.width\n   * @param {number} size.height\n   * @param {number} rotation Angle in radians (positive is clockwise).\n   * @returns {geo.geoBounds}\n   * @private\n   */\n  function rotate_bounds_center(center, size, rotation) {\n    // calculate the half width and height\n    var width = size.width / 2, height = size.height / 2;\n    var sinr = Math.sin(rotation), cosr = Math.cos(rotation);\n    var ul = {}, ur = {}, ll = {}, lr = {};\n    ul.x = center.x + (-width) * cosr - (-height) * sinr;\n    ul.y = center.y + (-width) * sinr + (-height) * cosr;\n    ur.x = center.x + width * cosr - (-height) * sinr;\n    ur.y = center.y + width * sinr + (-height) * cosr;\n    ll.x = center.x + (-width) * cosr - height * sinr;\n    ll.y = center.y + (-width) * sinr + height * cosr;\n    lr.x = center.x + width * cosr - height * sinr;\n    lr.y = center.y + width * sinr + height * cosr;\n    return {\n      left: Math.min(ul.x, ur.x, ll.x, lr.x),\n      right: Math.max(ul.x, ur.x, ll.x, lr.x),\n      bottom: Math.min(ul.y, ur.y, ll.y, lr.y),\n      top: Math.max(ul.y, ur.y, ll.y, lr.y)\n    };\n  }\n\n  /**\n   * Calculate the minimum zoom level to fit the given bounds inside the view\n   * port using the view port size, the given bounds, and the number of units\n   * per pixel.  The method sets the valid zoom bounds as well as the current\n   * zoom level to be within that range.\n   *\n   * @param {geo.geoBounds} bounds Bounds to fit to the screen.\n   * @param {number} [rotation] Rotation in radians.  If unspecified, use the\n   *    current map rotation.\n   * @returns {number} The necessary zoom level.\n   * @private\n   */\n  function calculate_zoom(bounds, rotation) {\n    if (rotation === undefined) {\n      rotation = m_rotation;\n    }\n    bounds = rotate_bounds(bounds, rotation);\n    // compare the aspect ratios of the viewport and bounds\n    var scl = camera_scaling(bounds), z;\n\n    if (scl.y > scl.x) {\n      // left to right matches exactly\n      // center map vertically and have blank borders on the\n      // top and bottom (or repeat tiles)\n      z = -Math.log2(\n        Math.abs(bounds.right - bounds.left) * scl.x /\n        (m_width * m_unitsPerPixel)\n      );\n    } else {\n      // top to bottom matches exactly, blank border on the\n      // left and right (or repeat tiles)\n      z = -Math.log2(\n        Math.abs(bounds.top - bounds.bottom) * scl.y /\n        (m_height * m_unitsPerPixel)\n      );\n    }\n    return z;\n  }\n\n  /**\n   * Reset the minimum zoom level given the current window size.\n   * @private\n   */\n  function reset_minimum_zoom() {\n    if (m_clampZoom) {\n      m_validZoomRange.min = Math.max(\n        m_validZoomRange.origMin, calculate_zoom(m_maxBounds));\n    } else {\n      m_validZoomRange.min = m_validZoomRange.origMin;\n    }\n  }\n\n  /**\n   * Return the nearest valid zoom level to the requested zoom.\n   * @param {number} zoom A zoom level to adjust to current settings\n   * @param {boolean} ignoreDiscreteZoom If `true`, ignore the `discreteZoom`\n   *    option when determining the new view.\n   * @returns {number} The zoom level clamped to the allowed zoom range and\n   *    with other settings applied.\n   * @private\n   */\n  function fix_zoom(zoom, ignoreDiscreteZoom) {\n    zoom = Math.round(zoom * 1e6) / 1e6;\n    zoom = Math.max(\n      Math.min(\n        m_validZoomRange.max,\n        zoom\n      ),\n      m_validZoomRange.min\n    );\n    if (m_discreteZoom && !ignoreDiscreteZoom) {\n      zoom = Math.round(zoom);\n      if (zoom < m_validZoomRange.min) {\n        zoom = Math.ceil(m_validZoomRange.min);\n      }\n    }\n    return zoom;\n  }\n\n  /**\n   * Return a valid rotation angle.\n   *\n   * @param {number} rotation Proposed rotation.\n   * @param {boolean} ignoreRotationFunc If truthy and rotations are allowed,\n   *    allow any rotation.  Otherwise, the rotation is passed through the\n   *    `allowRotation` function.\n   * @param {boolean} noRangeLimit If falsy, ensure that the rotation is in the\n   *    range [0, 2*PI).  If it is very close to zero, it is snapped to zero.\n   *    If true, the rotation can have any value.\n   * @returns {number} the validated rotation\n   * @private\n   */\n  function fix_rotation(rotation, ignoreRotationFunc, noRangeLimit) {\n    if (!m_allowRotation) {\n      return 0;\n    }\n    if (!ignoreRotationFunc && typeof m_allowRotation === 'function') {\n      rotation = m_allowRotation(rotation);\n    }\n    /* Ensure that the rotation is in the range [0, 2pi) */\n    if (!noRangeLimit) {\n      var range = Math.PI * 2;\n      rotation = (rotation % range) + (rotation >= 0 ? 0 : range);\n      if (Math.min(Math.abs(rotation), Math.abs(rotation - range)) < 0.00001) {\n        rotation = 0;\n      }\n    }\n    return rotation;\n  }\n\n  /**\n   * Return the nearest valid bounds maintaining the width and height.  Does\n   * nothing if `clampBoundsX` and `clampBoundsY` are false.  If a delta is\n   * specified, will only clamp if the out-of-bounds condition would be worse.\n   * If `ignoreClampBounds` is true, clamping is applied only to prevent more\n   * than half the image from being off screen.\n   *\n   * @param {geo.geoBounds} bounds The new bounds to apply in map gcs\n   *    coordinates.\n   * @param {number} [rotation] The angle of rotation in radians.  May be falsy\n   *    to have no rotation.\n   * @param {object} [delta] If present, the shift in position in screen\n   *    coordinates.  Bounds will only be adjusted if the bounds would be\n   *    more out of position after the shift.\n   * @param {number} delta.x\n   * @param {number} delta.y\n   * @param {number} delta.unit Units per pixel at the current zoom level.\n   * @param {boolean} [ignoreClampBounds] If `true` and `clampBoundsX` or\n   *    `clampBoundsY` are set, allow the bounds to be less clamped.\n   *    Specifically, the map's `maxBounds` can be shifted so that they lie no\n   *    further than the center of the bounds (rather than being forced to be\n   *    at the edge).\n   * @returns {geo.geoBounds} The adjusted bounds.  This may be the same object\n   *    passed in `bounds`.\n   * @private\n   */\n  function fix_bounds(bounds, rotation, delta, ignoreClampBounds) {\n    if (!m_clampBoundsX && !m_clampBoundsY) {\n      return bounds;\n    }\n    var dx, dy, maxBounds = m_maxBounds;\n    if (rotation) {\n      maxBounds = $.extend({}, m_maxBounds);\n      /* When rotated, expand the maximum bounds so that they will allow the\n       * corners to be visible.  We know the rotated bounding box, plus the\n       * original maximum bounds.  To fit the corners of the maximum bounds, we\n       * can expand the total bounds by the same factor that the rotated\n       * bounding box is expanded from the non-rotated bounding box (for a\n       * small rotation, this is sin(rotation) * (original bounding box height)\n       * in the width).  This feels like appropriate behaviour with one of the\n       * two bounds clamped.  With both, it seems mildly peculiar. */\n      var bw = Math.abs(bounds.right - bounds.left),\n          bh = Math.abs(bounds.top - bounds.bottom),\n          absinr = Math.abs(Math.sin(rotation)),\n          abcosr = Math.abs(Math.cos(rotation)),\n          ow, oh;\n      if (bounds.width && bounds.height) {\n        ow = bounds.width;\n        oh = bounds.height;\n      } else if (Math.abs(absinr - abcosr) < 0.0005) {\n        /* If we are close to a 45 degree rotation, it is ill-determined to\n         * compute the original (pre-rotation) bounds width and height.  In\n         * this case, assume that we are using the map's aspect ratio. */\n        if (m_width && m_height) {\n          var aspect = Math.abs(m_width / m_height);\n          var fac = Math.pow(1 + Math.pow(aspect, 2), 0.5);\n          ow = Math.max(bw, bh) / fac;\n          oh = ow * aspect;\n        } else {\n          /* Fallback if we don't have width or height */\n          ow = bw * abcosr;\n          oh = bh * absinr;\n        }\n      } else {\n        /* Compute the pre-rotation (original) bounds width and height */\n        ow = (abcosr * bw - absinr * bh) / (abcosr * abcosr - absinr * absinr);\n        oh = (abcosr * bh - absinr * bw) / (abcosr * abcosr - absinr * absinr);\n      }\n      /* Our maximum bounds are expanded based on the projected length of a\n       * tilted side of the original bounding box in the rotated bounding box.\n       * To handle all rotations, take the minimum difference in width or\n       * height. */\n      var bdx = bw - Math.max(abcosr * ow, absinr * oh),\n          bdy = bh - Math.max(abcosr * oh, absinr * ow);\n      maxBounds.left -= bdx;\n      maxBounds.right += bdx;\n      maxBounds.top += bdy;\n      maxBounds.bottom -= bdy;\n    }\n    if (ignoreClampBounds) {\n      maxBounds = {\n        left: maxBounds.left - (bounds.right - bounds.left) / 2,\n        right: maxBounds.right + (bounds.right - bounds.left) / 2,\n        top: maxBounds.top - (bounds.bottom - bounds.top) / 2,\n        bottom: maxBounds.bottom + (bounds.bottom - bounds.top) / 2\n      };\n    }\n    if (m_clampBoundsX) {\n      if (bounds.right - bounds.left > maxBounds.right - maxBounds.left) {\n        dx = maxBounds.left - ((bounds.right - bounds.left - (\n          maxBounds.right - maxBounds.left)) / 2) - bounds.left;\n      } else if (bounds.left < maxBounds.left) {\n        dx = maxBounds.left - bounds.left;\n      } else if (bounds.right > maxBounds.right) {\n        dx = maxBounds.right - bounds.right;\n      }\n      if (dx && (!delta || delta.x * dx > 0)) {\n        if (delta && Math.abs(dx) > Math.abs(delta.x * delta.unit)) {\n          dx = Math.abs(delta.x * delta.unit) * dx / Math.abs(dx);\n        }\n        bounds = {\n          left: bounds.left += dx,\n          right: bounds.right += dx,\n          top: bounds.top,\n          bottom: bounds.bottom\n        };\n      }\n    }\n    if (m_clampBoundsY) {\n      if (bounds.top - bounds.bottom > maxBounds.top - maxBounds.bottom) {\n        dy = maxBounds.bottom - ((bounds.top - bounds.bottom - (\n          maxBounds.top - maxBounds.bottom)) / 2) - bounds.bottom;\n      } else if (bounds.top > maxBounds.top) {\n        dy = maxBounds.top - bounds.top;\n      } else if (bounds.bottom < maxBounds.bottom) {\n        dy = maxBounds.bottom - bounds.bottom;\n      }\n      if (dy && (!delta || -delta.y * dy > 0)) {\n        if (delta && Math.abs(dy) > Math.abs(delta.y * delta.unit)) {\n          dy = Math.abs(delta.y * delta.unit) * dy / Math.abs(dy);\n        }\n        bounds = {\n          top: bounds.top += dy,\n          bottom: bounds.bottom += dy,\n          left: bounds.left,\n          right: bounds.right\n        };\n      }\n    }\n    return bounds;\n  }\n\n  /**\n   * Call the camera bounds method with the given bounds, but correct for the\n   * viewport aspect ratio.\n   *\n   * @param {geo.geoBounds} bounds The bounds for the camera.  If a rotation\n   *    is specified, the bounds need to also contain the map gcs width and\n   *    height.\n   * @param {number} [rotation] The map rotation in radians.\n   * @private\n   */\n  function camera_bounds(bounds, rotation) {\n    m_camera.rotation = rotation || 0;\n    /* When dealing with rotation, use the original width and height of the\n     * bounds, as the rotation will have expanded them. */\n    if (bounds.width && bounds.height && rotation) {\n      var cx = (bounds.left + bounds.right) / 2,\n          cy = (bounds.top + bounds.bottom) / 2;\n      m_camera.viewFromCenterSizeRotation({x: cx, y: cy}, bounds, rotation);\n    } else {\n      m_camera.bounds = bounds;\n    }\n    /* Update the center to what was set. */\n    m_center = {\n      x: (m_camera.bounds.left + m_camera.bounds.right) / 2,\n      y: (m_camera.bounds.top + m_camera.bounds.bottom) / 2\n    };\n  }\n\n  /**\n   * Resize the map based on the size of the associated DOM node.\n   * @private\n   */\n  function resizeSelf() {\n    m_this.size({width: m_node.width(), height: m_node.height()});\n  }\n\n  /*\n   * All the methods are now defined.  From here, we are initializing all\n   * internal variables and event handlers.\n   */\n\n  this._init(arg);\n\n  // set up drag/drop handling\n  this.node().on('dragover.geo', function (e) {\n    var evt = e.originalEvent;\n\n    if (m_this.fileReader()) {\n      evt.stopPropagation();\n      evt.preventDefault();\n      evt.dataTransfer.dropEffect = 'copy';\n    }\n  })\n  .on('drop.geo', function (e) {\n    var evt = e.originalEvent, reader = m_this.fileReader(),\n        i, file;\n\n    function done() {\n      m_this.draw();\n    }\n\n    if (reader) {\n      evt.stopPropagation();\n      evt.preventDefault();\n\n      for (i = 0; i < evt.dataTransfer.files.length; i += 1) {\n        file = evt.dataTransfer.files[i];\n        if (reader.canRead(file)) {\n          reader.read(file, done); // to do: trigger event on done\n        }\n      }\n    }\n  });\n\n  /*\n   * The map coordinates for the default world map, where c = half\n   * circumference at equator in meters, o = origin:\n   *   (-c, c) + o                   (c, c) + o\n   *            (center.x, center.y) + o            <-- center of viewport\n   *   (-c, -c) + o                  (c, -c) + o\n   */\n  // Set the world origin\n  m_origin = {x: 0, y: 0};\n\n  // Fix the zoom level (minimum and initial)\n  this.zoomRange(arg, true);\n  m_zoom = fix_zoom(m_zoom);\n  m_rotation = fix_rotation(m_rotation);\n  // Now update to the correct center and zoom level\n  this.center($.extend({}, arg.center || m_center), undefined);\n\n  if (arg.interactor !== null) {\n    this.interactor(arg.interactor || mapInteractor({discreteZoom: m_discreteZoom}));\n  }\n\n  if (m_autoResize) {\n    $(window).on('resize', resizeSelf);\n  }\n\n  // attach attribution updates to layer events\n  m_this.geoOn([\n    geo_event.layerAdd,\n    geo_event.layerRemove\n  ], m_this.updateAttribution);\n\n  return this;\n};\n\n/**\n * Create a map from an object.  Any errors in the creation\n * of the map will result in returning `null`.\n *\n * @param {geo.map.spec} spec The object specification.\n * @returns {geo.map|null}\n */\nmap.create = function (spec) {\n  'use strict';\n\n  var _map = map(spec),\n      layer = require('./layer');\n\n  /* If the spec is bad, we still end up with an object, but it won't have a\n   * zoom function */\n  if (!_map || !_map.zoom) {\n    console.warn('Could not create map.');\n    return null;\n  }\n\n  spec.data = spec.data || [];\n  spec.layers = spec.layers || [];\n\n  spec.layers.forEach(function (l) {\n    l.data = l.data || spec.data;\n    l.layer = layer.create(_map, l);\n  });\n\n  return _map;\n};\n\ninherit(map, sceneObject);\nmodule.exports = map;\n\n\n\n// WEBPACK FOOTER //\n// ./map.js","var $ = require('jquery');\nvar inherit = require('./inherit');\nvar tileLayer = require('./tileLayer');\nvar registry = require('./registry');\nvar quadFeature = require('./quadFeature');\n\n/**\n * Create a new instance of osmLayer.  This is a {@link geo.tileLayer} with\n * an OSM url and attribution defaults and with the tiles centered on the\n * origin.\n *\n * @class\n * @alias geo.osmLayer\n * @extends geo.tileLayer\n *\n * @param {object} arg\n * @param {number} [arg.mapOpacity] If specified, and `arg.opacity` is not\n *    specified, use this as the layer opacity.\n */\nvar osmLayer = function (arg) {\n\n  var imageTile = require('./imageTile');\n\n  if (!(this instanceof osmLayer)) {\n    return new osmLayer(arg);\n  }\n  if (arg.mapOpacity !== undefined && arg.opacity === undefined) {\n    arg.opacity = arg.mapOpacity;\n  }\n  tileLayer.call(this, arg);\n\n  /* mapOpacity is just another name for the layer opacity. */\n  this.mapOpacity = this.opacity;\n\n  /**\n   * Returns an instantiated imageTile object with the given indices.  This\n   * method always returns a new tile object.  Use `_getTileCached` to use\n   * the caching layer.\n   *\n   * @param {object} index The tile index.\n   * @param {number} index.x\n   * @param {number} index.y\n   * @param {number} index.level\n   * @param {object} source The tile index used for constructing the url.\n   * @param {number} source.x\n   * @param {number} source.y\n   * @param {number} source.level\n   * @returns {geo.tile}\n   */\n  this._getTile = function (index, source) {\n    var urlParams = source || index;\n    return imageTile({\n      index: index,\n      size: {x: this._options.tileWidth, y: this._options.tileHeight},\n      queue: this._queue,\n      overlap: this._options.tileOverlap,\n      scale: this._options.tileScale,\n      url: this._options.url.call(\n        this, urlParams.x, urlParams.y, urlParams.level || 0,\n        this._options.subdomains),\n      crossDomain: this._options.crossDomain\n    });\n  }.bind(this);\n};\n\n/**\n * This object contains the default options used to initialize the osmLayer.\n */\nosmLayer.defaults = $.extend({}, tileLayer.defaults, {\n  tileOffset : function (level) {\n    var s = Math.pow(2, level - 1) * 256;\n    return {x: s, y: s};\n  },\n  url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  attribution: 'Tile data &copy; <a href=\"http://osm.org/copyright\">' +\n    'OpenStreetMap</a> contributors'\n});\n\ninherit(osmLayer, tileLayer);\n/* By default, ask to support image quads.  If the user needs full\n * reprojection, they will need to require the\n * quadFeature.capabilities.imageFull feature */\nregistry.registerLayer('osm', osmLayer, [quadFeature.capabilities.image]);\n\nmodule.exports = osmLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./osmLayer.js","/*\n * Type definitions for jsdoc.\n */\n\n/**\n * General object specification for map types.  Any additional values in the\n * object are passed to the map constructor.\n *\n * @typedef geo.map.spec\n * @type {object}\n * @property {object[]} [data=[]] The default data array to apply to each\n *      feature if none exists.\n * @property {geo.layer.spec[]} [layers=[]] Layers to create.\n */\n\n/**\n * General representation of rectangular bounds in world coordinates.\n *\n * @typedef geo.geoBounds\n * @type {object}\n * @property {number} left Horizontal coordinate of the top-left corner.\n * @property {number} top Vertical coordinate of the top-left corner.\n * @property {number} right Horizontal coordinate of the bottom-right corner.\n * @property {number} bottom Vertical coordinate of the bottom-right corner.\n */\n\n/**\n * A location and zoom value.\n *\n * @typedef geo.zoomAndCenter\n * @type {object}\n * @property {geo.geoPosition} center The center coordinates.\n * @property {number} zoom The zoom level.\n */\n\n/**\n * General representation of rectangular bounds in pixel coordinates.\n *\n * @typedef geo.screenBounds\n * @type {object}\n * @property {geo.screenPosition} upperLeft Upper left corner.\n * @property {geo.screenPosition} upperRight Upper right corner.\n * @property {geo.screenPosition} lowerLeft Lower left corner.\n * @property {geo.screenPosition} lowerRight Lower right corner.\n */\n\n/**\n * General representation of a point on the screen.\n *\n * @typedef geo.screenPosition\n * @type {object}\n * @property {number} x Horizontal coordinate in pixels.\n * @property {number} y Vertical coordinate in pixels.\n */\n\n/**\n * General represention of a point on the earth.  The coordinates are most\n * commonly in longitude and latitude, but the coordinate system is changed\n * by the interface gcs.\n *\n * @typedef geo.geoPosition\n * @type {object}\n * @property {number} x Horizontal coordinate, often degrees longitude.\n * @property {number} y Vertical coordinate, often degrees latitude.\n * @property {number} [z=0] Altitude coordinate.\n */\n\n/**\n * General represention of a two-dimensional point in any coordinate system.\n *\n * @typedef geo.point2D\n * @type {object}\n * @property {number} x Horizontal coordinate.\n * @property {number} y Vertical coordinate.\n */\n\n/**\n * Represention of a point on the map.  The coordinates are in the map's\n * reference system, possibly with an affine transformation.\n *\n * @typedef geo.worldPosition\n * @type {object}\n * @property {number} x Horizontal coordinate in map coordinates.\n * @property {number} y Vertical coordinate in map coordinates.\n * @property {number} [z=0] Altitude coordinate, often zero.\n */\n\n/**\n * Represention of a size in pixels.\n *\n * @typedef geo.screenSize\n * @type {object}\n * @property {number} width Width in pixels.\n * @property {number} height Height in pixels.\n */\n\n/**\n * The status of all mouse buttons.\n *\n * @typedef geo.mouseButtons\n * @type {object}\n * @property {boolean} left True if the left mouse button is down.\n * @property {boolean} right True if the right mouse button is down.\n * @property {boolean} middle True if the middle mouse button is down.\n */\n\n/**\n * The status of all modifier keys.  These are usually copied from the\n * standard DOM events.\n *\n * @typedef geo.modifierKeys\n * @type {object}\n * @property {boolean} alt True if the alt or option key is down.\n * @property {boolean} ctrl True if the control key is down.\n * @property {boolean} shift True if the shift key is down.\n * @property {boolean} meta True if the meta, windows, or command key\n *      is down.\n */\n\n/**\n * The state of the mouse.\n *\n * @typedef geo.mouseState\n * @type {object}\n * @property {geo.screenPosition} page Mouse location in pixel space relative\n *      to the entire browser window.\n * @property {geo.screenPosition} map Mouse location in pixel space relative to\n *      the map DOM node.\n * @property {geo.geoPosition} geo Mouse location in interface gcs space.\n * @property {geo.geoPosition} mapgcs Mouse location in gcs space.\n * @property {geo.mouseButtons} buttons The current state of the mouse buttons.\n * @property {geo.modifierKeys} modifiers The current state of all modifier\n *      keys.\n * @property {Date} time The timestamp the event took place.\n * @property {number} deltaTime The time in milliseconds since the last mouse\n *      event.\n * @property {geo.screenPosition} velocity The velocity of the mouse pointer\n *      in pixels per millisecond.\n */\n\n/**\n * The current brush selection (this is when a rectangular area is selected by\n * dragging).\n *\n * @typedef geo.brushSelection\n * @type {object}\n * @property {geo.screenBounds} display The selection bounds in pixel space.\n * @property {object} gcs The selection bounds in the map's gcs.\n * @property {geo.geoPosition} gcs.upperLeft Upper left corner.\n * @property {geo.geoPosition} gcs.upperRight Upper right corner.\n * @property {geo.geoPosition} gcs.lowerLeft Lower left corner.\n * @property {geo.geoPosition} gcs.lowerRight Lower right corner.\n * @property {geo.mouseState} mouse The current mouse state.\n * @property {geo.mouseState} origin The mouse state at the start of the\n *      brush action.\n */\n\n/**\n * The conditions that are necessary to make an action occur.\n *\n * @typedef geo.actionRecord\n * @type {object}\n * @property {string} action The name of the action, from (@link geo.action}.\n * @property {string} [owner] A name of an owning process that can be used to\n *      locate or filter actions.\n * @property {string} [name] A human-readable name that can be used to locate\n *      or filter actions.\n * @property {string|object} input The name of an input that is used for the\n *      action, or an object with input names as keys and boolean values of\n *      inputs that are required to occur or required to not occur to trigger\n *      the action.  Input names include `left`, `right`, `middle` (for mouse\n *      buttons), `wheel` (the mouse wheel), `pan` (touch pan), `rotate` (touch\n *      rotate).\n * @property {string|object} [modifiers] The name of a modifier key or an\n *      object with modifiers as the keys and boolean values.  The listed\n *      modifiers must be set or unset depending on the boolean value.\n *      Modifiers include `shift`, `ctrl`, `alt`, and `meta`.\n * @property {boolean|string} [selectionRectangle] If truthy, a selection\n *      rectangle is shown during the action.  If a string, the name of an\n *      event that is triggered when the selection is complete.\n */\n\n/**\n * The current action state a map interactor.\n *\n * @typedef geo.actionState\n * @type {object}\n * @property {string} action Name of the action that is being handled.\n * @property {geo.actionRecord} actionRecord The action record which triggered\n *      the current action.\n * @property {string} [origAction] The name of an action that triggered this\n *      action.\n * @property {geo.mouseState} origin The mouse state at the start of the\n *      action.\n * @property {number} initialZoom The zoom level at the start of the action.\n * @property {number} initialRotation The map's rotation in radians at the\n *      start of the action.\n * @property {number} initialEventRotation The rotation reported by the\n *      event that triggered this action.  For example, this could be the\n *      angle between two multi-touch points.\n * @property {object} delta The total movement of during the action in gcs\n *      coordinates.\n * @property {number} delta.x The horizontal movement during the action.\n * @property {number} delta.y The vertical movement during the action.\n * @property {boolean} boundDocumentHandlers `true` if the mouse is down and\n *      being tracked.\n * @property {Date} [start] The time when the action started.\n * @property {function} [handler] A function to call on every animation from\n *      while the action is occurring.\n * @property {geo.mouseState} [momentum] The mouse location when a momentum\n *      action starts.\n * @property {boolean} [zoomrotateAllowRotation] Truthy if enough movement has\n *      occurred that rotations are allowed.\n * @property {boolean} [zoomrotateAllowZoom] Truthy if enough movement has\n *      occurred that zooms are allowed.\n * @property {boolean} [zoomrotateAllowPan] Truthy if enough movement has\n *      occurred that pans are allowed.\n * @property {number} [lastRotationDelta] When rotating, the last amount that\n *      was rotated from the start of the action.  This is used to debounce\n *      jitter on touch events.\n * @property {geo.geoPosition} [initialEventGeo] The position of the mouse\n *      when significant movement first occurred.\n */\n\n/**\n * A color value.  Although opacity can be specified, it is not always used.\n * When a string is specified, any of the following forms can be used:\n *   - CSS color name\n *   - `#rrggbb` The color specified in hexadecmial with each channel on a\n *     scale between 0 and 255 (`ff`).  Case insensitive.\n *   - `#rrggbbaa` The color and opacity specified in hexadecmial with each\n *     channel on a scale between 0 and 255 (`ff`).  Case insensitive.\n *   - `#rgb` The color specified in hexadecmial with each channel on a scale\n *     between 0 and 15 (`f`).  Case insensitive.\n *   - `#rgba` The color and opacity specified in hexadecmial with each channel\n *      on a scale between 0 and 15 (`f`).  Case insensitive.\n *   - `rgb(R, G, B)`, `rgb(R, G, B, A)`, `rgba(R, G, B)`, `rgba(R, G, B, A)`\n *     The color with the values of each color channel specified as numeric\n *     values between 0 and 255 or as percent (between 0 and 100) if a percent\n *     `%` follows the number.  The alpha (opacity) channel is optional and can\n *     either be a number between 0 and 1 or a percent.  White space may appear\n *     before and after numbers, and between the number and a percent symbol.\n *     Commas are not required.  A slash may be used as a separator before the\n *     alpha value instead of a comma.  The numbers conform to the CSS number\n *     specification, and can be signed floating-point values, possibly with\n *     exponents.\n *   - `hsl(H, S, L)`, `hsl(H, S, L, A)`, `hsla(H, S, L)`, `hsla(H, S, L, A)`\n *     Hue, saturation, and lightness with optional alpha (opacity).  Hue is a\n *     number between 0 and 360 and is interpretted as degrees unless an angle\n *     unit is specified.  CSS units of `deg`, `grad`, `rad`, and `turn` are\n *     supported.  Saturation and lightness are percentages between 0 and 100\n *     and *must* be followed by a percent `%` symbol.  The alpha (opacity)\n *     channel is optional and is specified as with `rgba(R, G, B, A)`.\n *   - `transparent` Black with 0 opacity.\n *\n * See {@link https://developer.mozilla.org/en-US/docs/Web/CSS/color_value} for\n * more details on CSS color values.\n *\n * @typedef geo.geoColor\n * @type {geo.geoColorObject|string}\n */\n\n/**\n * A color value represented as an object.  Although opacity can be specified,\n * it is not always used.\n *\n * @typedef {object} geo.geoColorObject\n * @property {number} r The red intensity on a scale of [0-1].\n * @property {number} g The green intensity on a scale of [0-1].\n * @property {number} b The blue intensity on a scale of [0-1].\n * @property {number} [a] The opacity on a scale of [0-1].  If unspecified and\n *      used, it should be treated as 1.\n */\n\n/**\n * Polygon as a flat array.  An array of vertices.  The polygon has no holes.\n * The first and last point of may be the same.\n *\n * @typedef {geo.geoPosition[]} geo.polygonFlat\n */\n\n/**\n * Polygon as a object.  The polygon may have holes.\n *\n * @typedef {object} geo.polygonObject\n * @property {geo.geoPosition[]} outer An array of vertices defining the\n *   outside of the polygon.  The first and last point of may be the same.\n * @property {Array.<geo.geoPosition[]>} [inner] An array of holes, each of\n *   which is an array of vertices.  The first and last point of may be the\n *  same.\n */\n\n/**\n * Polygon.\n *\n * @typedef {geo.polygonFlat|geo.polygonObject} geo.polygon\n */\n\n\n\n// WEBPACK FOOTER //\n// ./typedef.js","/* global GEO_VERSION */\n\n/**\n * The current geojs version.\n *\n * @alias geo.version\n * @constant\n * @type {string}\n */\nmodule.exports = GEO_VERSION;\n\n\n\n// WEBPACK FOOTER //\n// ./version.js","/* global GEO_SHA */\n\n/**\n * The current geojs git SHA.\n *\n * @alias geo.sha\n * @constant\n * @type {string}\n */\nmodule.exports = GEO_SHA;\n\n\n\n// WEBPACK FOOTER //\n// ./sha.js","var geo_event = require('../event.js');\ngeo_event.d3 = {\n  rescale: require('./rescale')\n};\n\n/**\n * @namespace geo.d3\n */\nmodule.exports = {\n  graphFeature: require('./graphFeature'),\n  lineFeature: require('./lineFeature'),\n  object: require('./object'),\n  pathFeature: require('./pathFeature'),\n  pointFeature: require('./pointFeature'),\n  quadFeature: require('./quadFeature'),\n  renderer: require('./d3Renderer'),\n  tileLayer: require('./tileLayer'),\n  uniqueID: require('./uniqueID'),\n  vectorFeature: require('./vectorFeature')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./d3/index.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar graphFeature = require('../graphFeature');\n\n/**\n * @class\n * @alias geo.d3.graphFeature\n * @extends geo.graphFeature\n */\nvar d3_graphFeature = function (arg) {\n  'use strict';\n\n  var m_this = this;\n\n  if (!(this instanceof d3_graphFeature)) {\n    return new d3_graphFeature(arg);\n  }\n  graphFeature.call(this, arg);\n\n  /**\n  *  Returns a d3 selection for the graph elements\n  */\n  this.select = function () {\n    var renderer = m_this.renderer(),\n        selection = {},\n        node = m_this.nodeFeature(),\n        links = m_this.linkFeatures();\n    selection.nodes = renderer.select(node._d3id());\n    selection.links = links.map(function (link) {\n      return renderer.select(link._d3id());\n    });\n    return selection;\n  };\n\n  return this;\n};\n\ninherit(d3_graphFeature, graphFeature);\n\nregisterFeature('d3', 'graph', d3_graphFeature);\n\nmodule.exports = d3_graphFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/graphFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar lineFeature = require('../lineFeature');\n\n/**\n * Create a new instance of class lineFeature.\n *\n * @class\n * @alias geo.d3.lineFeature\n * @extends geo.lineFeature\n * @extends geo.d3.object\n * @param {geo.lineFeature.spec} arg\n * @returns {geo.d3.lineFeature}\n */\nvar d3_lineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof d3_lineFeature)) {\n    return new d3_lineFeature(arg);\n  }\n\n  var d3 = require('./d3Renderer').d3;\n  var object = require('./object');\n  var timestamp = require('../timestamp');\n  var util = require('../util');\n\n  arg = arg || {};\n  lineFeature.call(this, arg);\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      m_buildTime = timestamp(),\n      m_maxIdx = 0,\n      s_update = this._update;\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.lineFeature.spec} arg The feature specification.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n    return m_this;\n  };\n\n  /**\n   * Build.  Create the necessary elements to render lines.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    var data = m_this.data() || [],\n        s_style = m_this.style(),\n        m_renderer = m_this.renderer(),\n        pos_func = m_this.position(),\n        line, i;\n\n    s_update.call(m_this);\n    s_style.fill = function () { return false; };\n\n    data.forEach(function (item, idx) {\n      var m_style;\n      var ln = m_this.line()(item, idx);\n\n      var style = {}, key;\n      function wrapStyle(func) {\n        if (util.isFunction(func)) {\n          return function () {\n            return func(ln[0], 0, item, idx);\n          };\n        } else {\n          return func;\n        }\n      }\n      for (key in s_style) {\n        if (s_style.hasOwnProperty(key)) {\n          style[key] = wrapStyle(s_style[key]);\n        }\n      }\n\n      line = d3.svg.line()\n          .x(function (d) { return m_this.featureGcsToDisplay(d).x; })\n          .y(function (d) { return m_this.featureGcsToDisplay(d).y; })\n          .interpolate(m_this.style.get('closed')(item, idx) && ln.length > 2 ?\n            'linear-closed' : 'linear');\n      // item is an object representing a single line\n      // m_this.line()(item) is an array of coordinates\n      m_style = {\n        data: [ln.map(function (d, i) { return pos_func(d, i, item, idx); })],\n        append: 'path',\n        attributes: {\n          d: line\n        },\n        id: m_this._d3id() + idx,\n        classes: ['d3LineFeature', 'd3SubLine-' + idx],\n        visible: m_this.visible,\n        style: style\n      };\n\n      m_renderer._drawFeatures(m_style);\n    });\n    for (i = data.length; i < m_maxIdx; i += 1) {\n      m_renderer._removeFeature(m_this._d3id() + i);\n    }\n    m_maxIdx = data.length;\n\n    m_buildTime.modified();\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update.  Rebuild if necessary.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.timestamp() >= m_buildTime.timestamp()) {\n      m_this._build();\n    }\n\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(d3_lineFeature, lineFeature);\n\n// Now register it\nvar capabilities = {};\ncapabilities[lineFeature.capabilities.basic] = true;\ncapabilities[lineFeature.capabilities.multicolor] = false;\n\nregisterFeature('d3', 'line', d3_lineFeature, capabilities);\n\nmodule.exports = d3_lineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/lineFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar pathFeature = require('../pathFeature');\n\n/**\n * Create a new instance of class pathFeature\n *\n * @class\n * @alias geo.d3.pathFeature\n * @extends geo.pathFeature\n * @extends geo.d3.object\n * @returns {geo.d3.pathFeature}\n */\nvar d3_pathFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof d3_pathFeature)) {\n    return new d3_pathFeature(arg);\n  }\n\n  var $ = require('jquery');\n  var d3 = require('./d3Renderer').d3;\n  var object = require('./object');\n  var timestamp = require('../timestamp');\n\n  arg = arg || {};\n  pathFeature.call(this, arg);\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      m_buildTime = timestamp(),\n      s_update = this._update,\n      m_style = {};\n\n  m_style.style = {};\n\n  /**\n   * Initialize\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n    return m_this;\n  };\n\n  /**\n   * Build\n   *\n   * @override\n   */\n  this._build = function () {\n    var data = m_this.data() || [],\n        s_style = m_this.style(),\n        tmp, diag;\n    s_update.call(m_this);\n\n    diag = function (d) {\n      var p = {\n        source: d.source,\n        target: d.target\n      };\n      return d3.svg.diagonal()(p);\n    };\n    tmp = [];\n    data.forEach(function (d, i) {\n      var src, trg;\n      if (i < data.length - 1) {\n        src = d;\n        trg = data[i + 1];\n        tmp.push({\n          source: m_this.featureGcsToDisplay(src),\n          target: m_this.featureGcsToDisplay(trg)\n        });\n      }\n    });\n    m_style.data = tmp;\n    m_style.attributes = {\n      d: diag\n    };\n\n    m_style.id = m_this._d3id();\n    m_style.append = 'path';\n    m_style.classes = ['d3PathFeature'];\n    m_style.style = $.extend({\n      'fill': function () { return false; },\n      'fillColor': function () { return { r: 0, g: 0, b: 0 }; }\n    }, s_style);\n    m_style.visible = m_this.visible;\n\n    m_this.renderer()._drawFeatures(m_style);\n\n    m_buildTime.modified();\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update\n   *\n   * @override\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.dataTime().timestamp() >= m_buildTime.timestamp()) {\n      m_this._build();\n    }\n\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(d3_pathFeature, pathFeature);\n\nregisterFeature('d3', 'path', d3_pathFeature);\n\nmodule.exports = d3_pathFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/pathFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar pointFeature = require('../pointFeature');\n\n/**\n *\n * Create a new instance of d3.pointFeature.\n *\n * @class\n * @alias geo.d3.pointFeature\n * @extends geo.pointFeature\n * @extends geo.d3.object\n * @param {geo.pointFeature.spec} arg\n * @returns {geo.d3.pointFeature}\n */\nvar d3_pointFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof d3_pointFeature)) {\n    return new d3_pointFeature(arg);\n  }\n\n  var d3_object = require('./object');\n  var timestamp = require('../timestamp');\n\n  arg = arg || {};\n  pointFeature.call(this, arg);\n  d3_object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      s_update = this._update,\n      m_buildTime = timestamp(),\n      m_style = {};\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.pointFeature.spec} arg The feature specification.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n    return m_this;\n  };\n\n  /**\n   * Build.  Create the necessary elements to render points.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    var data = m_this.data(),\n        s_style = m_this.style.get(),\n        m_renderer = m_this.renderer(),\n        pos_func = m_this.position();\n\n    // call super-method\n    s_update.call(m_this);\n\n    // default to empty data array\n    if (!data) { data = []; }\n\n    // fill in d3 renderer style object defaults\n    m_style.id = m_this._d3id();\n    m_style.data = data;\n    m_style.append = 'circle';\n    m_style.attributes = {\n      r: m_renderer._convertScale(s_style.radius),\n      cx: function (d) {\n        return m_this.featureGcsToDisplay(pos_func(d)).x;\n      },\n      cy: function (d) {\n        return m_this.featureGcsToDisplay(pos_func(d)).y;\n      }\n    };\n    m_style.style = s_style;\n    m_style.classes = ['d3PointFeature'];\n    m_style.visible = m_this.visible;\n\n    // pass to renderer to draw\n    m_this.renderer()._drawFeatures(m_style);\n\n    // update time stamps\n    m_buildTime.modified();\n    m_this.updateTime().modified();\n    return m_this;\n  };\n  /**\n   * Update.  Rebuild if necessary.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.timestamp() >= m_buildTime.timestamp()) {\n      m_this._build();\n    }\n\n    return m_this;\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(d3_pointFeature, pointFeature);\n\n// Now register it\nregisterFeature('d3', 'point', d3_pointFeature);\n\nmodule.exports = d3_pointFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/pointFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar quadFeature = require('../quadFeature');\n\n/**\n * Create a new instance of class quadFeature.\n *\n * @class\n * @alias geo.d3.quadFeature\n * @param {geo.quadFeature.spec} arg Options object.\n * @extends geo.quadFeature\n * @returns {geo.d3.quadFeature}\n */\nvar d3_quadFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof d3_quadFeature)) {\n    return new d3_quadFeature(arg);\n  }\n\n  var $ = require('jquery');\n  var d3 = require('./d3Renderer').d3;\n  var object = require('./object');\n\n  quadFeature.call(this, arg);\n  object.call(this);\n\n  var m_this = this,\n      s_exit = this._exit,\n      s_init = this._init,\n      s_update = this._update,\n      m_quads;\n\n  /**\n   * Build this feature.\n   */\n  this._build = function () {\n    if (!this.position()) {\n      return;\n    }\n    var renderer = this.renderer(),\n        map = renderer.layer().map();\n\n    m_quads = this._generateQuads();\n\n    var data = [];\n    $.each(m_quads.clrQuads, function (idx, quad) {\n      data.push({type: 'clr', quad: quad, zIndex: quad.pos[2]});\n    });\n    $.each(m_quads.imgQuads, function (idx, quad) {\n      if (quad.image) {\n        data.push({type: 'img', quad: quad, zIndex: quad.pos[2]});\n      }\n    });\n\n    var feature = {\n      id: this._d3id(),\n      data: data,\n      dataIndex: function (d) {\n        return d.quad.quadId;\n      },\n      append: function (d) {\n        var ns = this.namespaceURI,\n            element = d.type === 'clr' ? 'polygon' : 'image';\n        return (\n          ns ? document.createElementNS(ns, element) :\n            document.createElement(element));\n      },\n      attributes: {\n        fill: function (d) {\n          if (d.type === 'clr') {\n            return d3.rgb(255 * d.quad.color.r, 255 * d.quad.color.g,\n                          255 * d.quad.color.b);\n          }\n          /* set some styles here */\n          if (d.quad.opacity !== 1) {\n            d3.select(this).style('opacity', d.quad.opacity);\n          }\n        },\n        height: function (d) {\n          return d.type === 'clr' ? undefined : 1;\n        },\n        points: function (d) {\n          if (d.type === 'clr' && !d.points) {\n            var points = [], i;\n            for (i = 0; i < d.quad.pos.length; i += 3) {\n              var p = {\n                x: d.quad.pos[i],\n                y: d.quad.pos[i + 1],\n                z: d.quad.pos[i + 2]\n              };\n              /* We don't use 'p = m_this.featureGcsToDisplay(p);' because the\n               * quads have already been converted to the map's gcs (no longer\n               * the feature's gcs or map's ingcs). */\n              p = map.gcsToDisplay(p, null);\n              p = renderer.baseToLocal(p);\n              points.push('' + p.x + ',' + p.y);\n            }\n            d.points = (points[0] + ' ' + points[1] + ' ' + points[3] + ' ' +\n                        points[2]);\n          }\n          return d.type === 'clr' ? d.points : undefined;\n        },\n        preserveAspectRatio: function (d) {\n          return d.type === 'clr' ? undefined : 'none';\n        },\n        reference: function (d) {\n          return d.quad.reference;\n        },\n        stroke: false,\n        transform: function (d) {\n          if (d.type === 'img' && d.quad.image && !d.svgTransform) {\n            var pos = [], area, maxarea = -1, maxv, i, imgscale,\n                imgw = d.quad.image.width, imgh = d.quad.image.height;\n            for (i = 0; i < d.quad.pos.length; i += 3) {\n              var p = {\n                x: d.quad.pos[i],\n                y: d.quad.pos[i + 1],\n                z: d.quad.pos[i + 2]\n              };\n              /* We don't use 'p = m_this.featureGcsToDisplay(p);' because the\n               * quads have already been converted to the map's gcs (no longer\n               * the feature's gcs or map's ingcs). */\n              p = map.gcsToDisplay(p, null);\n              p = renderer.baseToLocal(p);\n              pos.push(p);\n            }\n            /* We can only fit three corners of the quad to the image, but we\n             * get to pick which three.  We choose to always include the\n             * largest of the triangles formed by a set of three vertices.  The\n             * image is always rendered as a parallelogram, so it may be larger\n             * than desired, and, for convex quads, miss some of the intended\n             * area. */\n            for (i = 0; i < 4; i += 1) {\n              area = Math.abs(\n                pos[(i + 1) % 4].x * (pos[(i + 2) % 4].y - pos[(i + 3) % 4].y) +\n                pos[(i + 2) % 4].x * (pos[(i + 3) % 4].y - pos[(i + 1) % 4].y) +\n                pos[(i + 3) % 4].x * (pos[(i + 1) % 4].y - pos[(i + 2) % 4].y)) / 2;\n              if (area > maxarea) {\n                maxarea = area;\n                maxv = i;\n              }\n            }\n            d.svgTransform = [\n              maxv === 3 || maxv === 2 ? pos[1].x - pos[0].x : pos[3].x - pos[2].x,\n              maxv === 3 || maxv === 2 ? pos[1].y - pos[0].y : pos[3].y - pos[2].y,\n              maxv === 0 || maxv === 2 ? pos[1].x - pos[3].x : pos[0].x - pos[2].x,\n              maxv === 0 || maxv === 2 ? pos[1].y - pos[3].y : pos[0].y - pos[2].y,\n              maxv === 2 ? pos[3].x + pos[0].x - pos[1].x : pos[2].x,\n              maxv === 2 ? pos[3].y + pos[0].y - pos[1].y : pos[2].y\n            ];\n            if (Math.abs(d.svgTransform[1] / imgw) < 1e-6 &&\n                Math.abs(d.svgTransform[2] / imgh) < 1e-6) {\n              imgscale = d.svgTransform[0] / imgw;\n              d.svgTransform[4] = Math.round(d.svgTransform[4] / imgscale) * imgscale;\n              imgscale = d.svgTransform[3] / imgh;\n              d.svgTransform[5] = Math.round(d.svgTransform[5] / imgscale) * imgscale;\n            }\n          }\n          return (\n            (d.type !== 'img' || !d.quad.image) ? undefined :\n              'matrix(' + d.svgTransform.join(' ') + ')');\n        },\n        width: function (d) {\n          return d.type === 'clr' ? undefined : 1;\n        },\n        x: function (d) {\n          return d.type === 'clr' ? undefined : 0;\n        },\n        'xlink:href': function (d) {\n          return (\n            (d.type === 'clr' || !d.quad.image) ? undefined : d.quad.image.src);\n        },\n        y: function (d) {\n          return d.type === 'clr' ? undefined : 0;\n        }\n      },\n      style: {\n        fillOpacity: function (d) {\n          return d.type === 'clr' ? d.quad.opacity : undefined;\n        }\n      },\n      onlyRenderNew: !this.style('previewColor') && !this.style('previewImage'),\n      sortByZ: true,\n      visible: m_this.visible,\n      classes: ['d3QuadFeature']\n    };\n    renderer._drawFeatures(feature);\n\n    this.buildTime().modified();\n  };\n\n  /**\n   * Update the feature.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.buildTime().timestamp() <= m_this.dataTime().timestamp() ||\n        m_this.buildTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   */\n  this._init = function () {\n    s_init.call(m_this, arg);\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    s_exit.call(m_this);\n  };\n\n  m_this._init(arg);\n  return this;\n};\n\ninherit(d3_quadFeature, quadFeature);\n\n// Now register it\nvar capabilities = {};\ncapabilities[quadFeature.capabilities.color] = true;\ncapabilities[quadFeature.capabilities.image] = true;\ncapabilities[quadFeature.capabilities.imageCrop] = false;\ncapabilities[quadFeature.capabilities.imageFixedScale] = false;\ncapabilities[quadFeature.capabilities.imageFull] = false;\ncapabilities[quadFeature.capabilities.canvas] = false;\ncapabilities[quadFeature.capabilities.video] = false;\n\nregisterFeature('d3', 'quad', d3_quadFeature, capabilities);\nmodule.exports = d3_quadFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/quadFeature.js","var registerLayerAdjustment = require('../registry').registerLayerAdjustment;\n\nvar d3_tileLayer = function () {\n  'use strict';\n  var m_this = this,\n      s_init = this._init,\n      s_exit = this._exit,\n      m_quadFeature,\n      m_nextTileId = 0,\n      m_tiles = [];\n\n  this._drawTile = function (tile) {\n    if (!m_quadFeature) {\n      return;\n    }\n    var bounds = m_this._tileBounds(tile),\n        level = tile.index.level || 0,\n        to = this._tileOffset(level),\n        quad = {};\n    quad.ul = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.ll = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    quad.ur = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.lr = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    quad.ul.z = quad.ll.z = quad.ur.z = quad.lr.z = level * m_this._levelZIncrement;\n    m_nextTileId += 1;\n    quad.id = m_nextTileId;\n    tile.quadId = quad.id;\n    quad.image = tile.image;\n    quad.reference = tile.toString();\n    m_tiles.push(quad);\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n    m_this.draw();\n  };\n\n  /* Remove the tile feature. */\n  this._remove = function (tile) {\n    if (tile.quadId !== undefined && m_quadFeature) {\n      for (var i = 0; i < m_tiles.length; i += 1) {\n        if (m_tiles[i].id === tile.quadId) {\n          m_tiles.splice(i, 1);\n          break;\n        }\n      }\n      m_quadFeature.data(m_tiles);\n      m_quadFeature._update();\n      m_this.draw();\n    }\n  };\n\n  /**\n   * Clean up the layer.\n   */\n  this._exit = function () {\n    m_this.deleteFeature(m_quadFeature);\n    m_quadFeature = null;\n    m_tiles = [];\n    s_exit.apply(m_this, arguments);\n  };\n\n  /* Initialize the tile layer.  This creates a series of sublayers so that\n   * the different layers will stack in the proper order.\n   */\n  this._init = function () {\n    s_init.apply(m_this, arguments);\n    m_quadFeature = this.createFeature('quad', {\n      previewColor: m_this._options.previewColor,\n      previewImage: m_this._options.previewImage\n    });\n    m_quadFeature.geoTrigger = undefined;\n    m_quadFeature.gcs(m_this._options.gcs || m_this.map().gcs());\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n  };\n\n  this._getSubLayer = function () {};\n  this._updateSubLayers = undefined;\n};\n\nregisterLayerAdjustment('d3', 'tile', d3_tileLayer);\nmodule.exports = d3_tileLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/tileLayer.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar vectorFeature = require('../vectorFeature');\n\n/**\n * Create a new instance of vectorFeature\n *\n * @class\n * @alias geo.d3.vectorFeature\n * @extends geo.vectorFeature\n * @extends geo.d3.object\n * @returns {geo.d3.vectorFeature}\n */\nvar d3_vectorFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof d3_vectorFeature)) {\n    return new d3_vectorFeature(arg);\n  }\n\n  var object = require('./object');\n  var timestamp = require('../timestamp');\n  var d3 = require('./d3Renderer').d3;\n\n  arg = arg || {};\n  vectorFeature.call(this, arg);\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_init = this._init,\n      s_exit = this._exit,\n      s_update = this._update,\n      m_buildTime = timestamp(),\n      m_style = {};\n\n  /**\n   * Generate a unique ID for a marker definition\n   * @private\n   * @param {object} d Unused datum (for d3 compat)\n   * @param {number} i The marker index\n   * @param {string} position The marker's vector position (head or tail)\n   */\n  function markerID(d, i, position) {\n    return m_this._d3id() + '_marker_' + i + '_' + position;\n  }\n\n  /**\n   * Add marker styles for vector arrows.\n   * @private\n   * @param {object[]} data The vector data array\n   * @param {function} stroke The stroke accessor\n   * @param {function} opacity The opacity accessor\n   * @param {function} originStyle The marker style for the vector head\n   * @param {function} endStyle The marker style for the vector tail\n   */\n  function updateMarkers(data, stroke, opacity, originStyle, endStyle) {\n\n    var markerConfigs = {\n      'arrow': {\n        attrs: {'class': 'geo-vector-arrow geo-vector-marker', 'viewBox': '0 0 10 10', 'refX': '1', 'refY': '5', 'markerHeight': '5', 'markerWidth': '5', 'orient': 'auto'},\n        path: 'M 0 0 L 10 5 L 0 10 z'\n      },\n      'point': {\n        attrs: {'class': 'geo-vector-point geo-vector-marker', 'viewBox': '0 0 12 12', 'refX': '6', 'refY': '6', 'markerHeight': '8', 'markerWidth': '8', 'orient': 'auto'},\n        path: 'M 6 3 A 3 3 0 1 1 5.99999 3 Z'\n      },\n      'bar': {\n        attrs: {'class': 'geo-vector-bar geo-vector-marker', 'viewBox': '0 0 10 10', 'refX': '0', 'refY': '5', 'markerHeight': '6', 'markerWidth': '6', 'orient': 'auto'},\n        path: 'M 0 0 L 2 0 L 2 10 L 0 10 z'\n      },\n      'wedge': {\n        attrs: {'class': 'geo-vector-wedge geo-vector-marker', 'viewBox': '0 0 10 10', 'refX': '10', 'refY': '5', 'markerHeight': '5', 'markerWidth': '5', 'orient': 'auto'},\n        path: 'M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0'\n      }\n    };\n\n    //this allows for multiple VectorFeatures in a layer\n    var markerGroup = m_this.renderer()._definitions()\n      .selectAll('g.marker-group#' + m_this._d3id())\n      .data(data.length ? [1] : []);\n\n    markerGroup\n      .enter()\n      .append('g')\n      .attr('id', m_this._d3id)\n      .attr('class', 'marker-group');\n\n    markerGroup.exit().remove();\n\n    var markers = data.reduce(function (markers, d, i) {\n      var head = markerConfigs[endStyle(d, i)];\n      var tail = markerConfigs[originStyle(d, i)];\n      if (head) {\n        markers.push({\n          data: d,\n          dataIndex: i,\n          head: true\n        });\n      }\n      if (tail) {\n        markers.push({\n          data: d,\n          dataIndex: i,\n          head: false\n        });\n      }\n      return markers;\n    }, []);\n\n    var sel = markerGroup\n      .selectAll('marker.geo-vector-marker')\n      .data(markers);\n\n    sel.enter()\n      .append('marker')\n      .append('path');\n\n    var renderer = m_this.renderer();\n\n    sel\n      .each(function (d) {\n        var marker = d3.select(this);\n        var markerData = d.head ? markerConfigs[endStyle(d.data, d.dataIndex)] : markerConfigs[originStyle(d.data, d.dataIndex)];\n        Object.keys(markerData.attrs).map(function (attrName) {\n          marker.attr(attrName, markerData.attrs[attrName]);\n        });\n      })\n      .attr('id', function (d) {\n        return markerID(d.data, d.dataIndex, d.head ? 'head' : 'tail');\n      })\n      .style('stroke', function (d) {\n        return renderer._convertColor(stroke)(d.data, d.dataIndex);\n      })\n      .style('fill', function (d) {\n        return renderer._convertColor(stroke)(d.data, d.dataIndex);\n      })\n      .style('opacity', function (d) {\n        return opacity(d.data, d.dataIndex);\n      })\n      .select('path')\n      .attr('d', function (d) {\n        return d.head ? markerConfigs[endStyle(d.data, d.dataIndex)].path : markerConfigs[originStyle(d.data, d.dataIndex)].path;\n      });\n\n    sel.exit().remove();\n  }\n\n  /**\n   * Initialize\n   * @protected\n   */\n  this._init = function (arg) {\n    s_init.call(m_this, arg);\n    return m_this;\n  };\n\n  /**\n   * Build\n   * @protected\n   */\n  this._build = function () {\n    var data = m_this.data(),\n        s_style = m_this.style.get(),\n        m_renderer = m_this.renderer(),\n        orig_func = m_this.origin(),\n        size_func = m_this.delta(),\n        cache = [],\n        scale = m_this.style('scale'),\n        max = Number.NEGATIVE_INFINITY;\n\n    // call super-method\n    s_update.call(m_this);\n\n    // default to empty data array\n    if (!data) { data = []; }\n\n    // cache the georeferencing\n    cache = data.map(function (d, i) {\n      var origin = m_this.featureGcsToDisplay(orig_func(d, i)),\n          delta = size_func(d, i);\n      max = Math.max(max, delta.x * delta.x + delta.y * delta.y);\n      return {\n        x1: origin.x,\n        y1: origin.y,\n        dx: delta.x,\n        dy: -delta.y\n      };\n    });\n\n    max = Math.sqrt(max);\n    if (!scale) {\n      scale = 75 / max;\n    }\n\n    function getScale() {\n      return scale / m_renderer.scaleFactor();\n    }\n\n    // fill in d3 renderer style object defaults\n    m_style.id = m_this._d3id();\n    m_style.data = data;\n    m_style.append = 'line';\n    m_style.attributes = {\n      x1: function (d, i) {\n        return cache[i].x1;\n      },\n      y1: function (d, i) {\n        return cache[i].y1;\n      },\n      x2: function (d, i) {\n        return cache[i].x1 + getScale() * cache[i].dx;\n      },\n      y2: function (d, i) {\n        return cache[i].y1 + getScale() * cache[i].dy;\n      },\n      'marker-start': function (d, i) {\n        return 'url(#' + markerID(d, i, 'tail') + ')';\n      },\n      'marker-end': function (d, i) {\n        return 'url(#' + markerID(d, i, 'head') + ')';\n      }\n    };\n    m_style.style = {\n      stroke: function () { return true; },\n      strokeColor: s_style.strokeColor,\n      strokeWidth: s_style.strokeWidth,\n      strokeOpacity: s_style.strokeOpacity,\n      originStyle: s_style.originStyle,\n      endStyle: s_style.endStyle\n    };\n    m_style.classes = ['d3VectorFeature'];\n    m_style.visible = m_this.visible;\n\n    // Add markers to the defition list\n    updateMarkers(data, s_style.strokeColor, s_style.strokeOpacity, s_style.originStyle, s_style.endStyle);\n\n    // pass to renderer to draw\n    m_this.renderer()._drawFeatures(m_style);\n\n    // update time stamps\n    m_buildTime.modified();\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update\n   * @protected\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.timestamp() >= m_buildTime.timestamp()) {\n      m_this._build();\n    } else {\n      updateMarkers(\n        m_style.data,\n        m_style.style.strokeColor,\n        m_style.style.strokeOpacity,\n        m_style.style.originStyle,\n        m_style.style.endStyle\n      );\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Exit\n   * @protected\n   */\n  this._exit = function () {\n    s_exit.call(m_this);\n    m_style = {};\n    updateMarkers([], null, null, null, null);\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(d3_vectorFeature, vectorFeature);\n\n// Now register it\nregisterFeature('d3', 'vector', d3_vectorFeature);\nmodule.exports = d3_vectorFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./d3/vectorFeature.js","/**\n * @namespace geo.gl\n */\nmodule.exports = {\n  choroplethFeature: require('./choroplethFeature'),\n  contourFeature: require('./contourFeature'),\n  isolineFeature: require('./isolineFeature'),\n  lineFeature: require('./lineFeature'),\n  pointFeature: require('./pointFeature'),\n  polygonFeature: require('./polygonFeature'),\n  quadFeature: require('./quadFeature'),\n  tileLayer: require('./tileLayer'),\n  vglRenderer: require('./vglRenderer')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./gl/index.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar choroplethFeature = require('../choroplethFeature');\n\n/**\n * Create a new instance of choroplethFeature.\n *\n * @class\n * @alias geo.gl.choroplethFeature\n * @extends geo.choroplethFeature\n * @param {geo.choroplethFeature.spec} arg\n * @returns {geo.gl.choroplethFeature}\n */\nvar gl_choroplethFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof gl_choroplethFeature)) {\n    return new gl_choroplethFeature(arg);\n  }\n  arg = arg || {};\n  choroplethFeature.call(this, arg);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_gl_polygons = null,\n      s_exit = this._exit,\n      s_draw = this.draw,\n      s_update = this._update;\n\n  /**\n   * Draw each of the polygons associated with this feature.\n   *\n   * @returns {this}\n   */\n  this.draw = function () {\n    m_this._update();\n    if (m_gl_polygons) {\n      for (var idx = 0; idx < m_gl_polygons.length; idx += 1) {\n        m_gl_polygons[idx].draw();\n      }\n    }\n    s_draw();\n    return m_this;\n  };\n\n  /**\n   * Build.\n   *\n   * @returns {geo.featurePolygon[]}\n   */\n  this._build = function () {\n    m_this.buildTime().modified();\n    m_gl_polygons = m_this.createChoropleth();\n    return m_gl_polygons;\n  };\n\n  /**\n   * Update the choropleth if the data was updated since the last build or the\n   * feature was updated.\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() <= m_this.timestamp()) {\n      m_this._wipePolygons();\n      m_this._build();\n    }\n    m_this.updateTime().modified();\n  };\n\n  /**\n   * Destroy polygon sub-features.\n   */\n  this._wipePolygons = function () {\n    if (m_gl_polygons) {\n      m_gl_polygons.map(function (polygon) {\n        return polygon._exit();\n      });\n    }\n    m_gl_polygons = null;\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    m_this._wipePolygons();\n    s_exit();\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(gl_choroplethFeature, choroplethFeature);\n\n// Now register it\nregisterFeature('vgl', 'choropleth', gl_choroplethFeature);\nmodule.exports = gl_choroplethFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/choroplethFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar contourFeature = require('../contourFeature');\n\n/**\n * Create a new instance of contourFeature.\n *\n * @class\n * @alias geo.gl.contourFeature\n * @extends geo.contourFeature\n * @param {geo.contourFeature.spec} arg\n * @returns {geo.gl.contourFeature}\n */\nvar gl_contourFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof gl_contourFeature)) {\n    return new gl_contourFeature(arg);\n  }\n  arg = arg || {};\n  contourFeature.call(this, arg);\n\n  var vgl = require('vgl');\n  var transform = require('../transform');\n  var util = require('../util');\n  var object = require('./object');\n\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      m_textureUnit = 7,\n      m_actor = null,\n      m_mapper = null,\n      m_material = null,\n      m_texture = null,\n      m_minColorUniform = null,\n      m_maxColorUniform = null,\n      m_stepsUniform = null,\n      m_steppedUniform = null,\n      m_dynamicDraw = arg.dynamicDraw === undefined ? false : arg.dynamicDraw,\n      s_init = this._init,\n      s_update = this._update;\n\n  function createVertexShader() {\n    var vertexShaderSource = [\n          '#ifdef GL_ES',\n          '  precision highp float;',\n          '#endif',\n          'attribute vec3 pos;',\n          'attribute float value;',\n          'attribute float opacity;',\n          'uniform mat4 modelViewMatrix;',\n          'uniform mat4 projectionMatrix;',\n          'varying float valueVar;',\n          'varying float opacityVar;',\n\n          'void main(void)',\n          '{',\n          /* Don't use z values; something is rotten in one of our matrices */\n          '  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);',\n          '  if (scrPos.w != 0.0) {',\n          '    scrPos = scrPos / scrPos.w;',\n          '  }',\n          '  valueVar = value;',\n          '  opacityVar = opacity;',\n          '  gl_Position = scrPos;',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.VERTEX_SHADER);\n    shader.setShaderSource(vertexShaderSource);\n    return shader;\n  }\n\n  function createFragmentShader() {\n    var fragmentShaderSource = [\n          '#ifdef GL_ES',\n          '  precision highp float;',\n          '#endif',\n          'uniform vec4 minColor;',\n          'uniform vec4 maxColor;',\n          'uniform float steps;',\n          'uniform bool stepped;',\n          'uniform sampler2D sampler2d;',\n          'varying float valueVar;',\n          'varying float opacityVar;',\n          'void main () {',\n          '  vec4 clr;',\n          '  if (valueVar < 0.0) {',\n          '    clr = minColor;',\n          '  } else if (valueVar > steps) {',\n          '    clr = maxColor;',\n          '  } else {',\n          '    float step;',\n          '    if (stepped) {',\n          '      step = floor(valueVar) + 0.5;',\n          '      if (step > steps) {',\n          '        step = steps - 0.5;',\n          '      }',\n          '    } else {',\n          '      step = valueVar;',\n          '    }',\n          // our texture is padded on either end by a repeated value to ensure\n          // we interpolate smoothly at the ends.\n          '    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));',\n          '  }',\n          '  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.FRAGMENT_SHADER);\n    shader.setShaderSource(fragmentShaderSource);\n    return shader;\n  }\n\n  /* Create the contours.  This calls the base class to generate the geometry,\n   * color map, and other parameters.  The generated geoemtry is then loaded\n   * into the various gl uniforms and buffers.\n   */\n  function createGLContours() {\n    var contour = m_this._createContours(),\n        numPts = contour.elements.length,\n        colorTable = [],\n        i, i3, j, j3,\n        posBuf, opacityBuf, valueBuf, indicesBuf,\n        geom = m_mapper.geometryData();\n\n    m_minColorUniform.set([\n      contour.minColor.r,\n      contour.minColor.g,\n      contour.minColor.b,\n      contour.minColor.a]);\n    m_maxColorUniform.set([\n      contour.maxColor.r,\n      contour.maxColor.g,\n      contour.maxColor.b,\n      contour.maxColor.a]);\n    m_stepsUniform.set(contour.colorMap.length);\n    m_steppedUniform.set(contour.stepped);\n    // pad the colortable by repeating the end colors an extra time to ensure\n    // interpolation never goes off of the colormap.\n    for (i = -1; i < contour.colorMap.length + 1; i += 1) {\n      j = Math.max(0, Math.min(contour.colorMap.length - 1, i));\n      colorTable.push(contour.colorMap[j].r * 255);\n      colorTable.push(contour.colorMap[j].g * 255);\n      colorTable.push(contour.colorMap[j].b * 255);\n      colorTable.push(contour.colorMap[j].a * 255);\n    }\n    m_texture.setColorTable(colorTable);\n    contour.pos = transform.transformCoordinates(\n      m_this.gcs(), m_this.layer().map().gcs(), contour.pos, 3);\n    posBuf = util.getGeomBuffer(geom, 'pos', numPts * 3);\n    opacityBuf = util.getGeomBuffer(geom, 'opacity', numPts);\n    valueBuf = util.getGeomBuffer(geom, 'value', numPts);\n    for (i = i3 = 0; i < numPts; i += 1, i3 += 3) {\n      j = contour.elements[i];\n      j3 = j * 3;\n      posBuf[i3] = contour.pos[j3];\n      posBuf[i3 + 1] = contour.pos[j3 + 1];\n      posBuf[i3 + 2] = contour.pos[j3 + 2];\n      opacityBuf[i] = contour.opacity[j];\n      valueBuf[i] = contour.value[j];\n    }\n    indicesBuf = geom.primitive(0).indices();\n    if (!(indicesBuf instanceof Uint16Array) || indicesBuf.length !== numPts) {\n      indicesBuf = new Uint16Array(numPts);\n      geom.primitive(0).setIndices(indicesBuf);\n    }\n    geom.boundsDirty(true);\n    m_mapper.modified();\n    m_mapper.boundsDirtyTimestamp().modified();\n  }\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.contourFeature.spec} arg The contour feature specification.\n   */\n  this._init = function (arg) {\n    var blend = vgl.blend(),\n        prog = vgl.shaderProgram(),\n        mat = vgl.material(),\n        tex = vgl.lookupTable(),\n        geom = vgl.geometryData(),\n        modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n        projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n        samplerUniform = new vgl.uniform(vgl.GL.INT, 'sampler2d'),\n        vertexShader = createVertexShader(),\n        fragmentShader = createFragmentShader(),\n        posAttr = vgl.vertexAttribute('pos'),\n        valueAttr = vgl.vertexAttribute('value'),\n        opacityAttr = vgl.vertexAttribute('opacity'),\n        sourcePositions = vgl.sourceDataP3fv({'name': 'pos'}),\n        sourceValues = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.One, {'name': 'value'}),\n        sourceOpacity = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Two, {'name': 'opacity'}),\n        primitive = new vgl.triangles();\n\n    s_init.call(m_this, arg);\n    m_mapper = vgl.mapper({dynamicDraw: m_dynamicDraw});\n\n    prog.addVertexAttribute(posAttr, vgl.vertexAttributeKeys.Position);\n    prog.addVertexAttribute(valueAttr, vgl.vertexAttributeKeysIndexed.One);\n    prog.addVertexAttribute(opacityAttr, vgl.vertexAttributeKeysIndexed.Two);\n\n    prog.addUniform(modelViewUniform);\n    prog.addUniform(projectionUniform);\n    m_minColorUniform = new vgl.uniform(vgl.GL.FLOAT_VEC4, 'minColor');\n    prog.addUniform(m_minColorUniform);\n    m_maxColorUniform = new vgl.uniform(vgl.GL.FLOAT_VEC4, 'maxColor');\n    prog.addUniform(m_maxColorUniform);\n    /* steps is always an integer, but it is more efficient if we use a float\n     */\n    m_stepsUniform = new vgl.uniform(vgl.GL.FLOAT, 'steps');\n    prog.addUniform(m_stepsUniform);\n    m_steppedUniform = new vgl.uniform(vgl.GL.BOOL, 'stepped');\n    prog.addUniform(m_steppedUniform);\n\n    prog.addShader(fragmentShader);\n    prog.addShader(vertexShader);\n\n    prog.addUniform(samplerUniform);\n    tex.setTextureUnit(m_textureUnit);\n    samplerUniform.set(m_textureUnit);\n\n    m_material = mat;\n    m_material.addAttribute(prog);\n    m_material.addAttribute(blend);\n    m_texture = tex;\n    m_material.addAttribute(m_texture);\n\n    m_actor = vgl.actor();\n    m_actor.setMaterial(m_material);\n    m_actor.setMapper(m_mapper);\n\n    geom.addSource(sourcePositions);\n    geom.addSource(sourceValues);\n    geom.addSource(sourceOpacity);\n    geom.addPrimitive(primitive);\n    m_mapper.setGeometryData(geom);\n  };\n\n  /**\n   * Build.\n   */\n  this._build = function () {\n    if (m_actor) {\n      m_this.renderer().contextRenderer().removeActor(m_actor);\n    }\n\n    createGLContours();\n\n    m_this.renderer().contextRenderer().addActor(m_actor);\n    m_this.buildTime().modified();\n  };\n\n  /**\n   * Update.\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() <= m_this.timestamp()) {\n      m_this._build();\n    }\n\n    m_actor.setVisible(m_this.visible());\n    m_actor.material().setBinNumber(m_this.bin());\n    m_this.updateTime().modified();\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    m_this.renderer().contextRenderer().removeActor(m_actor);\n    s_exit();\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(gl_contourFeature, contourFeature);\n\n// Now register it\nregisterFeature('vgl', 'contour', gl_contourFeature);\n\nmodule.exports = gl_contourFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/contourFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar isolineFeature = require('../isolineFeature');\n\n/**\n * Create a new instance of isolineFeature.\n *\n * @class\n * @alias geo.gl.isolineFeature\n * @extends geo.isolineFeature\n * @param {geo.isolineFeature.spec} arg\n * @returns {geo.gl.isolineFeature}\n */\nvar gl_isolineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof gl_isolineFeature)) {\n    return new gl_isolineFeature(arg);\n  }\n  arg = arg || {};\n  isolineFeature.call(this, arg);\n\n  var object = require('./object');\n  object.call(this);\n\n  this._init(arg);\n  return this;\n};\n\ninherit(gl_isolineFeature, isolineFeature);\n\n// Now register it\nregisterFeature('vgl', 'isoline', gl_isolineFeature);\nmodule.exports = gl_isolineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/isolineFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar lineFeature = require('../lineFeature');\n\nvar MAX_MITER_LIMIT = 100;\n\n/* Flags are passed to the vertex shader in a float.  Since a 32-bit float has\n * 24 bits of mantissa, including the sign bit, a maximum of 23 bits of flags\n * can be passed in a float without loss or complication. */\n/* vertex flags specify which direction a vertex needs to be offset */\nvar flagsVertex = {  // uses 2 bits\n  corner: 0,\n  near: 1,\n  far: 3\n};\nvar flagsLineCap = {  // uses 3 bits with flagsLineJoin\n  butt: 0,\n  square: 1,\n  round: 2\n};\nvar flagsLineJoin = {  // uses 3 bits with flagsLineCap\n  passthrough: 3,\n  miter: 4,\n  bevel: 5,\n  round: 6,\n  'miter-clip': 7\n};\nvar flagsNearLineShift = 2, flagsFarLineShift = 5;\nvar flagsNearOffsetShift = 8;  // uses 11 bits\n/* Fixed flags */\nvar flagsDebug = {  // uses 1 bit\n  normal: 0,\n  debug: 1\n};\n\n/**\n * Create a new instance of lineFeature.\n *\n * @class\n * @alias geo.gl.lineFeature\n * @extends geo.lineFeature\n * @param {geo.lineFeature.spec} arg\n * @returns {geo.gl.lineFeature}\n */\nvar gl_lineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof gl_lineFeature)) {\n    return new gl_lineFeature(arg);\n  }\n  arg = arg || {};\n  lineFeature.call(this, arg);\n\n  var vgl = require('vgl');\n  var transform = require('../transform');\n  var util = require('../util');\n  var object = require('./object');\n\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      m_actor,\n      m_mapper,\n      m_material,\n      m_pixelWidthUnif,\n      m_aspectUniform,\n      m_miterLimitUniform,\n      m_antialiasingUniform,\n      m_flagsUniform,\n      m_dynamicDraw = arg.dynamicDraw === undefined ? false : arg.dynamicDraw,\n      m_geometry,\n      s_init = this._init,\n      s_update = this._update;\n\n  /**\n   * Create the vertex shader for lines.\n   *\n   * @returns {vgl.shader}\n   */\n  function createVertexShader() {\n    var vertexShaderSource = [\n          '#ifdef GL_ES',\n          '  precision highp float;',\n          '#endif',\n          'attribute vec3 pos;',\n          'attribute vec3 prev;',\n          'attribute vec3 next;',\n          'attribute vec3 far;',\n          'attribute float flags;',\n\n          'attribute vec3 strokeColor;',\n          'attribute float strokeOpacity;',\n          'attribute float strokeWidth;',\n\n          'uniform mat4 modelViewMatrix;',\n          'uniform mat4 projectionMatrix;',\n          'uniform float pixelWidth;',\n          'uniform float aspect;',\n          'uniform float miterLimit;',\n          'uniform float antialiasing;',\n\n          'varying vec4 strokeColorVar;',\n          'varying vec4 subpos;',  /* px, py, length - px, width */\n          'varying vec4 info;',  /* near mode, far mode, offset */\n          'varying vec4 angles;', /* near angle cos, sin, far angle cos, sin */\n\n          'const float PI = 3.14159265358979323846264;',\n\n          'vec4 viewCoord(vec3 c) {',\n          '  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);',\n          '  if (result.w != 0.0)  result = result / result.w;',\n          '  return result;',\n          '}',\n\n          'float atan2(float y, float x) {',\n          '  if (x > 0.0)  return atan(y / x);',\n          '  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;',\n          '  if (x < 0.0)  return atan(y / x) - PI;',\n          '  return sign(y) * 0.5 * PI;',\n          '}',\n\n          'void main(void)',\n          '{',\n          /* If any vertex has been deliberately set to a negative opacity,\n           * skip doing computations on it. */\n          '  if (strokeOpacity < 0.0) {',\n          '    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);',\n          '    return;',\n          '  }',\n          /* convert coordinates.  We have four values, since we need to\n           * calculate the angles between the lines formed by prev-pos and\n           * pos-next, and between pos-next and next-far, plus know the angle\n           *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n          '  vec4 A = viewCoord(prev);',\n          '  vec4 B = viewCoord(pos);',\n          '  vec4 C = viewCoord(next);',\n          '  vec4 D = viewCoord(far);',\n          // calculate line segment vector and angle\n          '  vec2 deltaCB = C.xy - B.xy;',\n          '  if (deltaCB == vec2(0.0, 0.0)) {',\n          '    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);',\n          '    return;',\n          '  }',\n          '  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);',\n          // values we need to pass along\n          '  strokeColorVar = vec4(strokeColor, strokeOpacity);',\n          // extract values from our flags field\n          '  int vertex = int(mod(flags, 4.0));',\n          '  int nearMode = int(mod(floor(flags / 4.0), 8.0));',\n          '  int farMode = int(mod(floor(flags / 32.0), 8.0));',\n          // we use 11 bits of the flags for the offset, where -1023 to 1023\n          // maps to -1 to 1.  The 11 bits are a signed value, so simply\n          // selecting the bits will result in an unsigned values that may be\n          // greater than 1, in which case we have to subtract appropriately.\n          '  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;',\n          '  if (offset > 1.0)  offset -= 2048.0 / 1023.0;',\n          // by default, offset by the width and don't extend lines.  Later,\n          // calculate line extensions based on end cap and end join modes\n          '  float yOffset = strokeWidth + antialiasing;',\n          '  if (vertex == 0 || vertex == 2)  yOffset *= -1.0;',\n          '  yOffset += strokeWidth * offset;',\n          '  float xOffset = 0.0;',\n          // end caps\n          '  if (nearMode == 0) {',\n          '    xOffset = antialiasing;',\n          '  } else if (nearMode == 1 || nearMode == 2) {',\n          '    xOffset = strokeWidth + antialiasing;',\n          '  }',\n\n          // If joining lines, calculate the angles in screen space formed by\n          // the near end (A-B-C) and far end (B-C-D), and determine how much\n          // space is needed for the particular join.\n          //   This could be changed: if the lines are not a uniform width and\n          // offset, then the functional join angle is not simply half the\n          // angle between the two lines, but rather half the angle of the\n          // inside edge of the the two lines.\n          '  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;',  // of half angles\n          // handle near end\n          '  if (nearMode >= 4) {',\n          '    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);',\n          '    if (A.xy == B.xy)  angleBA = angleCB;',\n          '    float angleABC = angleCB - angleBA;',\n          // ensure angle is in the range [-PI, PI], then take the half angle\n          '    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;',\n          '    cosABC = cos(angleABC);  sinABC = sin(angleABC);',\n          // if this angle is close to flat, pass-through the join\n          '    if (nearMode >= 4 && cosABC > 0.999999) {',\n          '      nearMode = 3;',\n          '    }',\n          // miter, miter-clip\n          '    if (nearMode == 4 || nearMode == 7) {',\n          '      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {',\n          '        if (nearMode == 4) {',\n          '          nearMode = 5;',\n          '        } else {',\n          '          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;',\n          '        }',\n          '      } else {',\n          // we add an extra 1.0 to the xOffset to make sure that fragment\n          // shader is doing the clipping\n          '        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;',\n          '        nearMode = 4;',\n          '      }',\n          '    }',\n          // bevel or round join\n          '    if (nearMode == 5 || nearMode == 6) {',\n          '      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;',\n          '    }',\n          '  }',\n\n          // handle far end\n          '  if (farMode >= 4) {',\n          '    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);',\n          '    if (D.xy == C.xy)  angleDC = angleCB;',\n          '    float angleBCD = angleDC - angleCB;',\n          // ensure angle is in the range [-PI, PI], then take the half angle\n          '    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;',\n          '    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);',\n          // if this angle is close to flat, pass-through the join\n          '    if (farMode >= 4 && cosBCD > 0.999999) {',\n          '      farMode = 3;',\n          '    }',\n          // miter, miter-clip\n          '    if (farMode == 4 || farMode == 7) {',\n          '      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {',\n          '        if (farMode == 4)  farMode = 5;',\n          '      } else {',\n          '        farMode = 4;',\n          '      }',\n          '    }',\n          '  }',\n\n          // compute the location of a vertex to include everything that might\n          // need to be rendered\n          '  xOffset *= -1.0;',\n          '  gl_Position = vec4(',\n          '    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,',\n          '    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,',\n          '    B.z, 1.0);',\n          // store other values needed to determine which pixels to plot.\n          '  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;',\n\n          '  if (vertex == 0 || vertex == 1) {',\n          '    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);',\n          '    info = vec4(float(nearMode), float(farMode), offset, 0.0);',\n          '    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);',\n          '  } else {',\n          '    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);',\n          '    info = vec4(float(farMode), float(nearMode), -offset, 0.0);',\n          '    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);',\n          '  }',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.VERTEX_SHADER);\n    shader.setShaderSource(vertexShaderSource);\n    return shader;\n  }\n\n  /**\n   * Create the fragment shader for lines.\n   *\n   * @param {boolean} [allowDebug] If truthy, include code that can render\n   *    in debug mode.  This is mildly less efficient, even if debugging is\n   *    not turned on.\n   * @returns {vgl.shader}\n   */\n  function createFragmentShader(allowDebug) {\n    var fragmentShaderSource = [\n          '#ifdef GL_ES',\n          '  #ifdef GL_FRAGMENT_PRECISION_HIGH',\n          '    precision highp float;',\n          '  #else',\n          '    precision mediump float;',\n          '  #endif',\n          '#endif',\n          'varying vec4 strokeColorVar;',\n          'varying vec4 subpos;',\n          'varying vec4 info;',\n          'varying vec4 angles;',\n          'uniform float antialiasing;',\n          'uniform float miterLimit;',\n          'uniform float fixedFlags;',\n          'void main () {',\n          '  vec4 color = strokeColorVar;',\n          allowDebug ? '  bool debug = bool(mod(fixedFlags, 2.0));' : '',\n          '  float opacity = 1.0;',\n          '  int nearMode = int(floor(info.x + 0.5));',\n          '  int farMode = int(floor(info.y + 0.5));',\n          '  float cosABC = angles.x;',\n          '  float sinABC = angles.y;',\n          '  float cosBCD = angles.z;',\n          '  float sinBCD = angles.w;',\n          // never render on the opposite side of a miter.  This uses a bit of\n          // slop, via pow(smoothstep()) instead of step(), since there are\n          // precision issues in this calculation.  This doesn't wholy solve\n          // the precision issue; sometimes pixels are missed or double\n          // rendered along the inside seam of a miter.\n          '  if (nearMode >= 4) {',\n          '    float dist = cosABC * subpos.x - sinABC * subpos.y;',\n          '    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));',\n          '    if (opacity == 0.0) {',\n          allowDebug ? 'if (debug) {color.r=255.0/255.0;gl_FragColor=color;return;}' : '',\n          '      discard;',\n          '    }',\n          '  }',\n          '  if (farMode >= 4) {',\n          '    float dist = cosBCD * subpos.z - sinBCD * subpos.y;',\n          '    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));',\n          '    if (opacity == 0.0) {',\n          allowDebug ? 'if (debug) {color.r=254.0/255.0;gl_FragColor=color;return;}' : '',\n          '      discard;',\n          '    }',\n          '  }',\n          // butt or square cap\n          '  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));',\n          '  }',\n          '  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));',\n          '  }',\n          // round cap\n          '  if (nearMode == 2 && subpos.x <= 0.0) {',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));',\n          '  }',\n          '  if (farMode == 2 && subpos.z <= 0.0) {',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));',\n          '  }',\n          // bevel and clip joins\n          '  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {',\n          '    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);',\n          '    float w = subpos.w * (1.0 - info.z * sign(sinABC));',\n          '    float maxDist;',\n          '    if (nearMode == 5)  maxDist = cosABC * w;',\n          '    else                maxDist = miterLimit * w;',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));',\n          '  }',\n          '  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {',\n          '    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);',\n          '    float w = subpos.w * (1.0 - info.z * sign(sinBCD));',\n          '    float maxDist;',\n          '    if (farMode == 5)  maxDist = cosBCD * w;',\n          '    else               maxDist = miterLimit * w;',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));',\n          '  }',\n          // round join\n          '  if (nearMode == 6 && subpos.x <= 0.0) {',\n          '    float w = subpos.w * (1.0 - info.z * sign(sinABC));',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));',\n          '  }',\n          '  if (farMode == 6 && subpos.z <= 0.0) {',\n          '    float w = subpos.w * (1.0 - info.z * sign(sinBCD));',\n          '    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));',\n          '  }',\n          // antialias along main edges\n          '  if (antialiasing > 0.0) {',\n          '    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {',\n          '      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));',\n          '    }',\n          '    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {',\n          '      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));',\n          '    }',\n          '  }',\n          '  if (opacity == 0.0) {',\n          allowDebug ? 'if (debug) {color.r=253.0/255.0;gl_FragColor=color;return;}' : '',\n          '    discard;',\n          '  }',\n          '  color.a *= opacity;',\n          '  gl_FragColor = color;',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.FRAGMENT_SHADER);\n    shader.setShaderSource(fragmentShaderSource);\n    return shader;\n  }\n\n  /**\n   * Create and style the data needed to render the lines.\n   *\n   * @param {boolean} onlyStyle if true, use the existing geoemtry and just\n   *    recalculate the style.\n   */\n  function createGLLines(onlyStyle) {\n    var data = m_this.data(),\n        d, i, j, k, v, v2, lidx,\n        numSegments = 0, len,\n        lineItemList, lineItem, lineItemData,\n        vert = [{}, {}], v1 = vert[1],\n        pos, posIdx3, firstpos, firstPosIdx3,\n        strokeWidthFunc = m_this.style.get('strokeWidth'), strokeWidthVal,\n        strokeColorFunc = m_this.style.get('strokeColor'), strokeColorVal,\n        strokeOpacityFunc = m_this.style.get('strokeOpacity'), strokeOpacityVal,\n        lineCapFunc = m_this.style.get('lineCap'), lineCapVal,\n        lineJoinFunc = m_this.style.get('lineJoin'), lineJoinVal,\n        strokeOffsetFunc = m_this.style.get('strokeOffset'), strokeOffsetVal,\n        miterLimit = m_this.style.get('miterLimit')(data),\n        antialiasing = m_this.style.get('antialiasing')(data) || 0,\n        order = m_this.featureVertices(),\n        orderLen = order.length,\n        posBuf, prevBuf, nextBuf, farBuf, flagsBuf, indicesBuf,\n        fixedFlags = (flagsDebug[m_this.style.get('debug')(data) ? 'debug' : 'normal'] || 0),\n        strokeWidthBuf, strokeColorBuf, strokeOpacityBuf,\n        dest, dest3,\n        geom = m_mapper.geometryData(),\n        closedFunc = m_this.style.get('closed'), closedVal, closed = [],\n        updateFlags = true;\n\n    closedVal = util.isFunction(m_this.style('closed')) ? undefined : (closedFunc() || false);\n    lineCapVal = util.isFunction(m_this.style('lineCap')) ? undefined : (lineCapFunc() || 'butt');\n    lineJoinVal = util.isFunction(m_this.style('lineJoin')) ? undefined : (lineJoinFunc() || 'miter');\n    strokeColorVal = util.isFunction(m_this.style('strokeColor')) ? undefined : strokeColorFunc();\n    strokeOffsetVal = util.isFunction(m_this.style('strokeOffset')) ? undefined : (strokeOffsetFunc() || 0);\n    strokeOpacityVal = util.isFunction(m_this.style('strokeOpacity')) ? undefined : strokeOpacityFunc();\n    strokeWidthVal = util.isFunction(m_this.style('strokeWidth')) ? undefined : strokeWidthFunc();\n\n    if (miterLimit !== undefined) {\n      /* We impose a limit no matter what, since otherwise the growth is\n       * unbounded.  Values less than 1 make no sense, since we are using the\n       * SVG definition of miter length. */\n      m_miterLimitUniform.set(Math.max(1, Math.min(MAX_MITER_LIMIT, miterLimit)));\n    }\n    m_flagsUniform.set(fixedFlags);\n    m_antialiasingUniform.set(antialiasing);\n\n    if (!onlyStyle) {\n      var position = [],\n          posFunc = m_this.position();\n      lineItemList = new Array(data.length);\n      for (i = 0; i < data.length; i += 1) {\n        d = data[i];\n        lineItem = m_this.line()(d, i);\n        lineItemList[i] = lineItem;\n        if (lineItem.length < 2) {\n          continue;\n        }\n        numSegments += lineItem.length - 1;\n        for (j = 0; j < lineItem.length; j += 1) {\n          pos = posFunc(lineItem[j], j, d, i);\n          position.push(pos.x);\n          position.push(pos.y);\n          position.push(pos.z || 0.0);\n          if (!j) {\n            firstpos = pos;\n          }\n        }\n        if (lineItem.length > 2 && (closedVal === undefined ? closedFunc(d, i) : closedVal)) {\n          /* line is closed */\n          if (pos.x !== firstpos.x || pos.y !== firstpos.y ||\n              pos.z !== firstpos.z) {\n            numSegments += 1;\n            closed[i] = 2;  /* first and last points are distinct */\n          } else {\n            closed[i] = 1;  /* first point is repeated as last point */\n          }\n        }\n      }\n\n      position = transform.transformCoordinates(\n        m_this.gcs(), m_this.layer().map().gcs(), position, 3);\n      len = numSegments * orderLen;\n      posBuf = util.getGeomBuffer(geom, 'pos', len * 3);\n      prevBuf = util.getGeomBuffer(geom, 'prev', len * 3);\n      nextBuf = util.getGeomBuffer(geom, 'next', len * 3);\n      farBuf = util.getGeomBuffer(geom, 'far', len * 3);\n\n      indicesBuf = geom.primitive(0).indices();\n      if (!(indicesBuf instanceof Uint16Array) || indicesBuf.length !== len) {\n        indicesBuf = new Uint16Array(len);\n        geom.primitive(0).setIndices(indicesBuf);\n      }\n      // save some information to be reused when we update only style\n      m_geometry = {\n        numSegments: numSegments,\n        closed: closed,\n        lineItemList: lineItemList,\n        lineCapVal: lineCapVal,\n        lineJoinVal: lineJoinVal,\n        strokeOffsetVal: strokeOffsetVal\n      };\n    } else {\n      numSegments = m_geometry.numSegments;\n      closed = m_geometry.closed;\n      lineItemList = m_geometry.lineItemList;\n      len = numSegments * orderLen;\n      updateFlags = (\n        (lineCapVal !== m_geometry.lineCapVal || lineCapVal === undefined) ||\n        (lineJoinVal !== m_geometry.lineJoinVal || lineJoinVal === undefined) ||\n        (strokeOffsetVal !== m_geometry.strokeOffsetVal || strokeOffsetVal === undefined)\n      );\n    }\n\n    flagsBuf = util.getGeomBuffer(geom, 'flags', len);\n    strokeWidthBuf = util.getGeomBuffer(geom, 'strokeWidth', len);\n    strokeColorBuf = util.getGeomBuffer(geom, 'strokeColor', len * 3);\n    strokeOpacityBuf = util.getGeomBuffer(geom, 'strokeOpacity', len);\n\n    for (i = posIdx3 = dest = dest3 = 0; i < data.length; i += 1) {\n      lineItem = lineItemList[i];\n      if (lineItem.length < 2) {\n        continue;\n      }\n      d = data[i];\n      firstPosIdx3 = posIdx3;\n      for (j = 0; j < lineItem.length + (closed[i] === 2 ? 1 : 0); j += 1, posIdx3 += 3) {\n        lidx = j;\n        if (j === lineItem.length) {\n          lidx = 0;\n          posIdx3 -= 3;\n        }\n        lineItemData = lineItem[lidx];\n        /* swap entries in vert so that vert[0] is the first vertex, and\n         * vert[1] will be reused for the second vertex */\n        if (j) {\n          v1 = vert[0];\n          vert[0] = vert[1];\n          vert[1] = v1;\n        }\n        if (!onlyStyle) {\n          v1.pos = j === lidx ? posIdx3 : firstPosIdx3;\n          v1.prev = lidx ? posIdx3 - 3 : (closed[i] ?\n            firstPosIdx3 + (lineItem.length - 3 + closed[i]) * 3 : posIdx3);\n          v1.next = j + 1 < lineItem.length ? posIdx3 + 3 : (closed[i] ?\n            (j !== lidx ? firstPosIdx3 + 3 : firstPosIdx3 + 6 - closed[i] * 3) :\n            posIdx3);\n        }\n        v1.strokeWidth = strokeWidthVal === undefined ? strokeWidthFunc(lineItemData, lidx, d, i) : strokeWidthVal;\n        v1.strokeColor = strokeColorVal === undefined ? strokeColorFunc(lineItemData, lidx, d, i) : strokeColorVal;\n        v1.strokeOpacity = strokeOpacityVal === undefined ? strokeOpacityFunc(lineItemData, lidx, d, i) : strokeOpacityVal;\n        if (updateFlags) {\n          v1.strokeOffset = (strokeOffsetVal === undefined ? strokeOffsetFunc(lineItemData, lidx, d, i) : strokeOffsetVal) || 0;\n          if (v1.strokeOffset) {\n            /* we use 11 bits to store the offset, and we want to store values\n             * from -1 to 1, so multiply our values by 1023, and use some bit\n             * manipulation to ensure that it is packed properly */\n            v1.posStrokeOffset = Math.round(2048 + 1023 * Math.min(1, Math.max(-1, v1.strokeOffset))) & 0x7FF;\n            v1.negStrokeOffset = Math.round(2048 - 1023 * Math.min(1, Math.max(-1, v1.strokeOffset))) & 0x7FF;\n          } else {\n            v1.posStrokeOffset = v1.negStrokeOffset = 0;\n          }\n          if (!closed[i] && (!j || j === lineItem.length - 1)) {\n            v1.flags = flagsLineCap[lineCapVal === undefined ? lineCapFunc(lineItemData, lidx, d, i) : lineCapVal] || flagsLineCap.butt;\n          } else {\n            v1.flags = flagsLineJoin[lineJoinVal === undefined ? lineJoinFunc(lineItemData, lidx, d, i) : lineJoinVal] || flagsLineJoin.miter;\n          }\n        }\n\n        if (j) {\n          /* zero out the z position.  This can be changed if we handle it in\n           * the shader. */\n          for (k = 0; k < orderLen; k += 1, dest += 1, dest3 += 3) {\n            v = vert[order[k][0]];\n            v2 = vert[1 - order[k][0]];\n            if (!onlyStyle) {\n              posBuf[dest3] = position[v.pos];\n              posBuf[dest3 + 1] = position[v.pos + 1];\n              posBuf[dest3 + 2] = 0; // position[v.pos + 2];\n            }\n            if (!order[k][0]) {\n              if (!onlyStyle) {\n                prevBuf[dest3] = position[v.prev];\n                prevBuf[dest3 + 1] = position[v.prev + 1];\n                prevBuf[dest3 + 2] = 0; // position[v.prev + 2];\n                nextBuf[dest3] = position[v.next];\n                nextBuf[dest3 + 1] = position[v.next + 1];\n                nextBuf[dest3 + 2] = 0; // position[v.next + 2];\n                farBuf[dest3] = position[v2.next];\n                farBuf[dest3 + 1] = position[v2.next + 1];\n                farBuf[dest3 + 2] = 0; // position[v2.next + 2];\n              }\n              if (updateFlags) {\n                flagsBuf[dest] = (flagsVertex[order[k][1]] |\n                  (v.flags << flagsNearLineShift) |\n                  (v2.flags << flagsFarLineShift) |\n                  (v.negStrokeOffset << flagsNearOffsetShift));\n              }\n            } else {\n              if (!onlyStyle) {\n                prevBuf[dest3] = position[v.next];\n                prevBuf[dest3 + 1] = position[v.next + 1];\n                prevBuf[dest3 + 2] = 0; // position[v.next + 2];\n                nextBuf[dest3] = position[v.prev];\n                nextBuf[dest3 + 1] = position[v.prev + 1];\n                nextBuf[dest3 + 2] = 0; // position[v.prev + 2];\n                farBuf[dest3] = position[v2.prev];\n                farBuf[dest3 + 1] = position[v2.prev + 1];\n                farBuf[dest3 + 2] = 0; // position[v2.prev + 2];\n              }\n              if (updateFlags) {\n                flagsBuf[dest] = (flagsVertex[order[k][1]] |\n                  (v.flags << flagsNearLineShift) |\n                  (v2.flags << flagsFarLineShift) |\n                  (v.posStrokeOffset << flagsNearOffsetShift));\n              }\n            }\n            strokeWidthBuf[dest] = v.strokeWidth;\n            strokeColorBuf[dest3] = v.strokeColor.r;\n            strokeColorBuf[dest3 + 1] = v.strokeColor.g;\n            strokeColorBuf[dest3 + 2] = v.strokeColor.b;\n            strokeOpacityBuf[dest] = v.strokeOpacity;\n          }\n        }\n      }\n    }\n\n    m_mapper.modified();\n    if (!onlyStyle) {\n      geom.boundsDirty(true);\n      m_mapper.boundsDirtyTimestamp().modified();\n    }\n  }\n\n  /**\n   * Return the arrangement of vertices used for each line segment.  Each line\n   * is rendered by two triangles.  This reports how the vertices of those\n   * triangles are arranged.  Each entry is a triple: the line-end number, the\n   * vertex use, and the side of the line that the vertex is on.\n   *\n   * @returns {array[]}\n   */\n  this.featureVertices = function () {\n    return [\n      [0, 'corner', -1], [0, 'near', 1], [1, 'far', -1],\n      [1, 'corner', 1], [1, 'near', -1], [0, 'far', 1]];\n  };\n\n  /**\n   * Return the number of vertices used for each line segment.\n   *\n   * @returns {number}\n   */\n  this.verticesPerFeature = function () {\n    return m_this.featureVertices().length;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.lineFeature.spec} arg The feature specification.\n   * @returns {this}\n   */\n  this._init = function (arg) {\n    var prog = vgl.shaderProgram(),\n        vs = createVertexShader(),\n        fs = createFragmentShader(((arg || {}).style || {}).debug !== undefined),\n        // Vertex attributes\n        posAttr = vgl.vertexAttribute('pos'),\n        prvAttr = vgl.vertexAttribute('prev'),\n        nxtAttr = vgl.vertexAttribute('next'),\n        farAttr = vgl.vertexAttribute('far'),\n        flagsAttr = vgl.vertexAttribute('flags'),\n        strkWidthAttr = vgl.vertexAttribute('strokeWidth'),\n        strkColorAttr = vgl.vertexAttribute('strokeColor'),\n        strkOpacityAttr = vgl.vertexAttribute('strokeOpacity'),\n        // Shader uniforms\n        mviUnif = new vgl.modelViewUniform('modelViewMatrix'),\n        prjUnif = new vgl.projectionUniform('projectionMatrix'),\n        geom = vgl.geometryData(),\n        // Sources\n        posData = vgl.sourceDataP3fv({name: 'pos'}),\n        prvPosData = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Four, {name: 'prev'}),\n        nxtPosData = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Five, {name: 'next'}),\n        farPosData = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Six, {name: 'far'}),\n        flagsData = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Seven, {name: 'flags'}),\n        strkWidthData = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.One, {name: 'strokeWidth'}),\n        strkColorData = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Two, {name: 'strokeColor'}),\n        strkOpacityData = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Three, {name: 'strokeOpacity'}),\n        // Primitive indices\n        triangles = vgl.triangles();\n\n    m_pixelWidthUnif = new vgl.floatUniform(\n      'pixelWidth', 1.0 / m_this.renderer().width());\n    m_aspectUniform = new vgl.floatUniform(\n      'aspect', m_this.renderer().width() / m_this.renderer().height());\n    m_miterLimitUniform = new vgl.floatUniform('miterLimit', 10);\n    m_antialiasingUniform = new vgl.floatUniform('antialiasing', 0);\n    m_flagsUniform = new vgl.floatUniform('fixedFlags', 0);\n\n    s_init.call(m_this, arg);\n    m_material = vgl.material();\n    m_mapper = vgl.mapper({dynamicDraw: m_dynamicDraw});\n\n    prog.addVertexAttribute(posAttr, vgl.vertexAttributeKeys.Position);\n    prog.addVertexAttribute(strkWidthAttr, vgl.vertexAttributeKeysIndexed.One);\n    prog.addVertexAttribute(strkColorAttr, vgl.vertexAttributeKeysIndexed.Two);\n    prog.addVertexAttribute(strkOpacityAttr, vgl.vertexAttributeKeysIndexed.Three);\n    prog.addVertexAttribute(prvAttr, vgl.vertexAttributeKeysIndexed.Four);\n    prog.addVertexAttribute(nxtAttr, vgl.vertexAttributeKeysIndexed.Five);\n    prog.addVertexAttribute(farAttr, vgl.vertexAttributeKeysIndexed.Six);\n    prog.addVertexAttribute(flagsAttr, vgl.vertexAttributeKeysIndexed.Seven);\n\n    prog.addUniform(mviUnif);\n    prog.addUniform(prjUnif);\n    prog.addUniform(m_pixelWidthUnif);\n    prog.addUniform(m_aspectUniform);\n    prog.addUniform(m_miterLimitUniform);\n    prog.addUniform(m_antialiasingUniform);\n    prog.addUniform(m_flagsUniform);\n\n    prog.addShader(fs);\n    prog.addShader(vs);\n\n    m_material.addAttribute(prog);\n    m_material.addAttribute(vgl.blend());\n\n    m_actor = vgl.actor();\n    m_actor.setMaterial(m_material);\n    m_actor.setMapper(m_mapper);\n\n    geom.addSource(posData);\n    geom.addSource(prvPosData);\n    geom.addSource(nxtPosData);\n    geom.addSource(farPosData);\n    geom.addSource(strkWidthData);\n    geom.addSource(strkColorData);\n    geom.addSource(strkOpacityData);\n    geom.addSource(flagsData);\n    geom.addPrimitive(triangles);\n    m_mapper.setGeometryData(geom);\n    return m_this;\n  };\n\n  /**\n   * Return list of vgl actorss used for rendering.\n   *\n   * @returns {vgl.actor[]}\n   */\n  this.actors = function () {\n    if (!m_actor) {\n      return [];\n    }\n    return [m_actor];\n  };\n\n  /**\n   * Build.  Create the necessary elements to render lines.\n   *\n   * There are several optimizations to do less work when possible.  If only\n   * styles have changed, the geometry is not re-transformed.  If styles use\n   * static values (rather than functions), they are only calculated once.  If\n   * styles have not changed that would affect flags (lineCap, lineJoin, and\n   * strokeOffset), the vertex flags are not recomputed -- this helps, as it is\n   * a slow step due to most javascript interpreters not optimizing bit\n   * operations.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n    createGLLines(m_this.dataTime().timestamp() < m_this.buildTime().timestamp() && m_geometry);\n\n    if (!m_this.renderer().contextRenderer().hasActor(m_actor)) {\n      m_this.renderer().contextRenderer().addActor(m_actor);\n    }\n    m_this.buildTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update.  Rebuild if necessary.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() <= m_this.timestamp()) {\n      m_this._build();\n    }\n\n    m_pixelWidthUnif.set(1.0 / m_this.renderer().width());\n    m_aspectUniform.set(m_this.renderer().width() /\n                        m_this.renderer().height());\n    m_actor.setVisible(m_this.visible());\n    m_actor.material().setBinNumber(m_this.bin());\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Destroy.  Free used resources.\n   */\n  this._exit = function () {\n    m_this.renderer().contextRenderer().removeActor(m_actor);\n    m_actor = null;\n    s_exit();\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(gl_lineFeature, lineFeature);\n\nvar capabilities = {};\ncapabilities[lineFeature.capabilities.basic] = true;\ncapabilities[lineFeature.capabilities.multicolor] = true;\n\n// Now register it\nregisterFeature('vgl', 'line', gl_lineFeature, capabilities);\n\nmodule.exports = gl_lineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/lineFeature.js","var $ = require('jquery');\nvar inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar pointFeature = require('../pointFeature');\n\n/**\n * Create a new instance of gl.pointFeature.\n *\n * @class\n * @alias geo.gl.pointFeature\n * @extends geo.pointFeature\n * @param {geo.pointFeature.spec} arg\n * @returns {geo.gl.pointFeature}\n */\nvar gl_pointFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof gl_pointFeature)) {\n    return new gl_pointFeature(arg);\n  }\n  arg = arg || {};\n  pointFeature.call(this, arg);\n\n  var vgl = require('vgl');\n  var transform = require('../transform');\n  var util = require('../util');\n  var object = require('./object');\n\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      m_actor = null,\n      m_mapper = null,\n      m_pixelWidthUniform = null,\n      m_aspectUniform = null,\n      m_dynamicDraw = arg.dynamicDraw === undefined ? false : arg.dynamicDraw,\n      /* If you are drawing very large points, you will often get better\n       * performance using a different primitiveShape.  The 'sprite' shape uses\n       * the least memory, but has hardware-specific limitations to its size.\n       * 'triangle' seems to be fastest on low-powered hardware, but 'square'\n       * visits fewer fragments. */\n      m_primitiveShape = 'sprite', // arg can change this, below\n      s_init = this._init,\n      s_update = this._update,\n      s_updateStyleFromArray = this.updateStyleFromArray,\n      vertexShaderSource = null,\n      fragmentShaderSource = null;\n\n  if (arg.primitiveShape === 'triangle' ||\n      arg.primitiveShape === 'square' ||\n      arg.primitiveShape === 'sprite') {\n    m_primitiveShape = arg.primitiveShape;\n  }\n\n  vertexShaderSource = [\n    '#ifdef GL_ES',\n    '  precision highp float;',\n    '#endif',\n    'attribute vec3 pos;',\n    'attribute float radius;',\n    'attribute vec3 fillColor;',\n    'attribute vec3 strokeColor;',\n    'attribute float fillOpacity;',\n    'attribute float strokeWidth;',\n    'attribute float strokeOpacity;',\n    'attribute float fill;',\n    'attribute float stroke;',\n    'uniform float pixelWidth;',\n    'uniform float aspect;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying vec4 fillColorVar;',\n    'varying vec4 strokeColorVar;',\n    'varying float radiusVar;',\n    'varying float strokeWidthVar;',\n    'varying float fillVar;',\n    'varying float strokeVar;'\n  ];\n\n  if (m_primitiveShape !== 'sprite') {\n    vertexShaderSource = vertexShaderSource.concat([\n      'attribute vec2 unit;',\n      'varying vec3 unitVar;'\n    ]);\n  }\n\n  vertexShaderSource.push.apply(vertexShaderSource, [\n    'void main(void)',\n    '{',\n    '  strokeWidthVar = strokeWidth;',\n    '  // No stroke or fill implies nothing to draw',\n    '  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {',\n    '    strokeVar = 0.0;',\n    '    strokeWidthVar = 0.0;',\n    '  }',\n    '  else',\n    '    strokeVar = 1.0;',\n    '  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)',\n    '    fillVar = 0.0;',\n    '  else',\n    '    fillVar = 1.0;',\n    /* If the point has no visible pixels, skip doing computations on it. */\n    '  if (fillVar == 0.0 && strokeVar == 0.0) {',\n    '    gl_Position = vec4(2, 2, 0, 1);',\n    '    return;',\n    '  }',\n    '  fillColorVar = vec4 (fillColor, fillOpacity);',\n    '  strokeColorVar = vec4 (strokeColor, strokeOpacity);',\n    '  radiusVar = radius;'\n  ]);\n\n  if (m_primitiveShape === 'sprite') {\n    vertexShaderSource.push.apply(vertexShaderSource, [\n      '  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;',\n      '  gl_PointSize = 2.0 * (radius + strokeWidthVar); ',\n      '}'\n    ]);\n  } else {\n    vertexShaderSource.push.apply(vertexShaderSource, [\n      '  unitVar = vec3 (unit, 1.0);',\n      '  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;',\n      '  if (p.w != 0.0) {',\n      '    p = p / p.w;',\n      '  }',\n      '  p += (radius + strokeWidthVar) * ',\n      '       vec4 (unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);',\n      '  gl_Position = vec4(p.xyz, 1.0);',\n      '}'\n    ]);\n  }\n  vertexShaderSource = vertexShaderSource.join('\\n');\n\n  fragmentShaderSource = [\n    '#ifdef GL_ES',\n    '  precision highp float;',\n    '#endif',\n    'uniform float aspect;',\n    'varying vec4 fillColorVar;',\n    'varying vec4 strokeColorVar;',\n    'varying float radiusVar;',\n    'varying float strokeWidthVar;',\n    'varying float fillVar;',\n    'varying float strokeVar;'\n  ];\n\n  if (m_primitiveShape !== 'sprite') {\n    fragmentShaderSource.push('varying vec3 unitVar;');\n  }\n\n  fragmentShaderSource.push.apply(fragmentShaderSource, [\n    'void main () {',\n    '  vec4 strokeColor, fillColor;',\n    '  float endStep;',\n    '  // No stroke or fill implies nothing to draw',\n    '  if (fillVar == 0.0 && strokeVar == 0.0)',\n    '    discard;'\n  ]);\n\n  if (m_primitiveShape === 'sprite') {\n    fragmentShaderSource.push(\n      '  float rad = 2.0 * length (gl_PointCoord - vec2(0.5));');\n  } else {\n    fragmentShaderSource.push(\n      '  float rad = length (unitVar.xy);');\n  }\n\n  fragmentShaderSource.push.apply(fragmentShaderSource, [\n    '  if (rad > 1.0)',\n    '    discard;',\n    '  // If there is no stroke, the fill region should transition to nothing',\n    '  if (strokeVar == 0.0) {',\n    '    strokeColor = vec4 (fillColorVar.rgb, 0.0);',\n    '    endStep = 1.0;',\n    '  } else {',\n    '    strokeColor = strokeColorVar;',\n    '    endStep = radiusVar / (radiusVar + strokeWidthVar);',\n    '  }',\n    '  // Likewise, if there is no fill, the stroke should transition to nothing',\n    '  if (fillVar == 0.0)',\n    '    fillColor = vec4 (strokeColor.rgb, 0.0);',\n    '  else',\n    '    fillColor = fillColorVar;',\n    '  // Distance to antialias over',\n    '  float antialiasDist = 3.0 / (2.0 * radiusVar);',\n    '  if (rad < endStep) {',\n    '    float step = smoothstep (endStep - antialiasDist, endStep, rad);',\n    '    gl_FragColor = mix (fillColor, strokeColor, step);',\n    '  } else {',\n    '    float step = smoothstep (1.0 - antialiasDist, 1.0, rad);',\n    '    gl_FragColor = mix (strokeColor, vec4 (strokeColor.rgb, 0.0), step);',\n    '  }',\n    '}'\n  ]);\n\n  fragmentShaderSource = fragmentShaderSource.join('\\n');\n\n  /**\n   * Create the vertex shader for points.\n   *\n   * @returns {vgl.shader}\n   */\n  function createVertexShader() {\n    var shader = new vgl.shader(vgl.GL.VERTEX_SHADER);\n    shader.setShaderSource(vertexShaderSource);\n    return shader;\n  }\n\n  /**\n   * Create the fragment shader for points.\n   *\n   * @returns {vgl.shader}\n   */\n  function createFragmentShader() {\n    var shader = new vgl.shader(vgl.GL.FRAGMENT_SHADER);\n    shader.setShaderSource(fragmentShaderSource);\n    return shader;\n  }\n\n  /**\n   * Given the current primitive shape and a basic size, return a set of\n   * vertices that can be used for a generic point.\n   *\n   * @param {number} x The base x coordinate.  Usually 0.\n   * @param {number} y The base y coordinate.  Usually 0.\n   * @param {number} w The base width.  Usually 1.\n   * @param {number} h The base height.  Usually 1.\n   * @returns {number[]} A flat array of vertices in the form of\n   *    `[x0, y0, x1, y1, ...]`.\n   */\n  function pointPolygon(x, y, w, h) {\n    var verts;\n    switch (m_primitiveShape) {\n      case 'triangle':\n        /* Use an equilateral triangle.  While this has 30% more area than a\n         * square, the reduction in vertices should help more than the\n         * processing the additional fragments. */\n        verts = [\n          x, y - h * 2,\n          x - w * Math.sqrt(3.0), y + h,\n          x + w * Math.sqrt(3.0), y + h\n        ];\n        break;\n      case 'sprite':\n        /* Point sprite uses only one vertex per point. */\n        verts = [x, y];\n        break;\n      default: // \"square\"\n        /* Use a surrounding square split diagonally into two triangles. */\n        verts = [\n          x - w, y + h,\n          x - w, y - h,\n          x + w, y + h,\n          x - w, y - h,\n          x + w, y - h,\n          x + w, y + h\n        ];\n        break;\n    }\n    return verts;\n  }\n\n  /**\n   * Create and style the data needed to render the points.\n   */\n  function createGLPoints() {\n    // unit and associated data is not used when drawing sprite\n    var i, j, numPts = m_this.data().length,\n        unit = pointPolygon(0, 0, 1, 1),\n        position = new Array(numPts * 3), posBuf, posVal, posFunc,\n        unitBuf, indices,\n        radius, radiusVal, radFunc,\n        stroke, strokeVal, strokeFunc,\n        strokeWidth, strokeWidthVal, strokeWidthFunc,\n        strokeOpacity, strokeOpacityVal, strokeOpacityFunc,\n        strokeColor, strokeColorVal, strokeColorFunc,\n        fill, fillVal, fillFunc,\n        fillOpacity, fillOpacityVal, fillOpacityFunc,\n        fillColor, fillColorVal, fillColorFunc,\n        vpf = m_this.verticesPerFeature(),\n        data = m_this.data(),\n        item, ivpf, ivpf3, iunit, i3,\n        geom = m_mapper.geometryData(), nonzeroZ;\n\n    posFunc = m_this.position();\n    radFunc = m_this.style.get('radius');\n    strokeFunc = m_this.style.get('stroke');\n    strokeWidthFunc = m_this.style.get('strokeWidth');\n    strokeOpacityFunc = m_this.style.get('strokeOpacity');\n    strokeColorFunc = m_this.style.get('strokeColor');\n    fillFunc = m_this.style.get('fill');\n    fillOpacityFunc = m_this.style.get('fillOpacity');\n    fillColorFunc = m_this.style.get('fillColor');\n\n    /* It is more efficient to do a transform on a single array rather than on\n     * an array of arrays or an array of objects. */\n    for (i = i3 = 0; i < numPts; i += 1, i3 += 3) {\n      posVal = posFunc(data[i], i);\n      position[i3] = posVal.x;\n      position[i3 + 1] = posVal.y;\n      position[i3 + 2] = posVal.z || 0;\n      nonzeroZ = nonzeroZ || position[i3 + 2];\n    }\n    position = transform.transformCoordinates(\n      m_this.gcs(), m_this.layer().map().gcs(), position, 3);\n    /* Some transforms modify the z-coordinate.  If we started with all zero z\n     * coordinates, don't modify them.  This could be changed if the\n     * z-coordinate space of the gl cube is scaled appropriately. */\n    if (!nonzeroZ && m_this.gcs() !== m_this.layer().map().gcs()) {\n      for (i = i3 = 0; i < numPts; i += 1, i3 += 3) {\n        position[i3 + 2] = 0;\n      }\n    }\n\n    posBuf = util.getGeomBuffer(geom, 'pos', vpf * numPts * 3);\n\n    if (m_primitiveShape !== 'sprite') {\n      unitBuf = util.getGeomBuffer(geom, 'unit', vpf * numPts * 2);\n    }\n\n    radius = util.getGeomBuffer(geom, 'radius', vpf * numPts);\n    stroke = util.getGeomBuffer(geom, 'stroke', vpf * numPts);\n    strokeWidth = util.getGeomBuffer(geom, 'strokeWidth', vpf * numPts);\n    strokeOpacity = util.getGeomBuffer(geom, 'strokeOpacity', vpf * numPts);\n    strokeColor = util.getGeomBuffer(geom, 'strokeColor', vpf * numPts * 3);\n    fill = util.getGeomBuffer(geom, 'fill', vpf * numPts);\n    fillOpacity = util.getGeomBuffer(geom, 'fillOpacity', vpf * numPts);\n    fillColor = util.getGeomBuffer(geom, 'fillColor', vpf * numPts * 3);\n    indices = geom.primitive(0).indices();\n    if (!(indices instanceof Uint16Array) || indices.length !== vpf * numPts) {\n      indices = new Uint16Array(vpf * numPts);\n      geom.primitive(0).setIndices(indices);\n    }\n\n    for (i = ivpf = ivpf3 = iunit = i3 = 0; i < numPts; i += 1, i3 += 3) {\n      item = data[i];\n      if (m_primitiveShape !== 'sprite') {\n        for (j = 0; j < unit.length; j += 1, iunit += 1) {\n          unitBuf[iunit] = unit[j];\n        }\n      }\n      /* We can ignore the indicies (they will all be zero) */\n      radiusVal = radFunc(item, i);\n      strokeVal = strokeFunc(item, i) ? 1.0 : 0.0;\n      strokeWidthVal = strokeWidthFunc(item, i);\n      strokeOpacityVal = strokeOpacityFunc(item, i);\n      strokeColorVal = strokeColorFunc(item, i);\n      fillVal = fillFunc(item, i) ? 1.0 : 0.0;\n      fillOpacityVal = fillOpacityFunc(item, i);\n      fillColorVal = fillColorFunc(item, i);\n      for (j = 0; j < vpf; j += 1, ivpf += 1, ivpf3 += 3) {\n        posBuf[ivpf3] = position[i3];\n        posBuf[ivpf3 + 1] = position[i3 + 1];\n        posBuf[ivpf3 + 2] = position[i3 + 2];\n        radius[ivpf] = radiusVal;\n        stroke[ivpf] = strokeVal;\n        strokeWidth[ivpf] = strokeWidthVal;\n        strokeOpacity[ivpf] = strokeOpacityVal;\n        strokeColor[ivpf3] = strokeColorVal.r;\n        strokeColor[ivpf3 + 1] = strokeColorVal.g;\n        strokeColor[ivpf3 + 2] = strokeColorVal.b;\n        fill[ivpf] = fillVal;\n        fillOpacity[ivpf] = fillOpacityVal;\n        fillColor[ivpf3] = fillColorVal.r;\n        fillColor[ivpf3 + 1] = fillColorVal.g;\n        fillColor[ivpf3 + 2] = fillColorVal.b;\n      }\n    }\n\n    geom.boundsDirty(true);\n    m_mapper.modified();\n    m_mapper.boundsDirtyTimestamp().modified();\n  }\n\n  /**\n   * Return list of vgl actorss used for rendering.\n   *\n   * @returns {vgl.actor[]}\n   */\n  this.actors = function () {\n    if (!m_actor) {\n      return [];\n    }\n    return [m_actor];\n  };\n\n  /**\n   * Return the number of vertices used for each point.\n   *\n   * @returns {number}\n   */\n  this.verticesPerFeature = function () {\n    var unit = pointPolygon(0, 0, 1, 1);\n    return unit.length / 2;\n  };\n\n  /**\n   * Set style(s) from array(s).  For each style, the array should have one\n   * value per data item.  The values are not converted or validated.  Color\n   * values are {@link geo.geoColorObject} objects.  If invalid values are\n   * given the behavior is undefined.\n   *   For some feature styles, if the first entry of an array is itself an\n   * array, then each entry of the array is expected to be an array, and values\n   * are used from these subarrays.  This allows a style to apply, for\n   * instance, per vertex of a data item rather than per data item.\n   *\n   * @param {string|object} keyOrObject Either the name of a single style or\n   *    an object where the keys are the names of styles and the values are\n   *    each arrays.\n   * @param {array} styleArray If keyOrObject is a string, an array of values\n   *    for the style.  If keyOrObject is an object, this parameter is ignored.\n   * @param {boolean} [refresh=false] `true` to redraw the feature when it has\n   *    been updated.  If an object with styles is passed, the redraw is only\n   *    done once.\n   * @returns {this}\n   */\n  this.updateStyleFromArray = function (keyOrObject, styleArray, refresh) {\n    var bufferedKeys = {\n      fill: 'bool',\n      fillColor: 3,\n      fillOpacity: 1,\n      radius: 1,\n      stroke: 'bool',\n      strokeColor: 3,\n      strokeOpacity: 1,\n      strokeWidth: 1\n    };\n    var needsRefresh, needsRender;\n    if (typeof keyOrObject === 'string') {\n      var obj = {};\n      obj[keyOrObject] = styleArray;\n      keyOrObject = obj;\n    }\n    $.each(keyOrObject, function (key, styleArray) {\n      if (m_this.visible() && m_actor && bufferedKeys[key] && !needsRefresh && !m_this.clustering()) {\n        var vpf, mapper, buffer, numPts, value, i, j, v, bpv;\n        bpv = bufferedKeys[key] === 'bool' ? 1 : bufferedKeys[key];\n        numPts = m_this.data().length;\n        mapper = m_actor.mapper();\n        buffer = mapper.getSourceBuffer(key);\n        vpf = m_this.verticesPerFeature();\n        if (!buffer || !numPts || numPts * vpf * bpv !== buffer.length) {\n          needsRefresh = true;\n        } else {\n          switch (bufferedKeys[key]) {\n            case 1:\n              for (i = 0, v = 0; i < numPts; i += 1) {\n                value = styleArray[i];\n                for (j = 0; j < vpf; j += 1, v += 1) {\n                  buffer[v] = value;\n                }\n              }\n              break;\n            case 3:\n              for (i = 0, v = 0; i < numPts; i += 1) {\n                value = styleArray[i];\n                for (j = 0; j < vpf; j += 1, v += 3) {\n                  buffer[v] = value.r;\n                  buffer[v + 1] = value.g;\n                  buffer[v + 2] = value.b;\n                }\n              }\n              break;\n            case 'bool':\n              for (i = 0, v = 0; i < numPts; i += 1) {\n                value = styleArray[i] ? 1.0 : 0.0;\n                for (j = 0; j < vpf; j += 1, v += 1) {\n                  buffer[v] = value;\n                }\n              }\n              break;\n          }\n          mapper.updateSourceBuffer(key);\n          /* This could probably be even faster than calling _render after\n           * updating the buffer, if the context's buffer was bound and\n           * updated.  This would requiring knowing the webgl context and\n           * probably the source to buffer mapping. */\n          needsRender = true;\n        }\n      } else {\n        needsRefresh = true;\n      }\n      s_updateStyleFromArray(key, styleArray, false);\n    });\n    if (m_this.visible() && needsRefresh) {\n      m_this.draw();\n    } else if (needsRender) {\n      m_this.renderer()._render();\n    }\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   */\n  this._init = function () {\n    var prog = vgl.shaderProgram(),\n        vertexShader = createVertexShader(),\n        fragmentShader = createFragmentShader(),\n        posAttr = vgl.vertexAttribute('pos'),\n        unitAttr = vgl.vertexAttribute('unit'),\n        radAttr = vgl.vertexAttribute('radius'),\n        strokeWidthAttr = vgl.vertexAttribute('strokeWidth'),\n        fillColorAttr = vgl.vertexAttribute('fillColor'),\n        fillAttr = vgl.vertexAttribute('fill'),\n        strokeColorAttr = vgl.vertexAttribute('strokeColor'),\n        strokeAttr = vgl.vertexAttribute('stroke'),\n        fillOpacityAttr = vgl.vertexAttribute('fillOpacity'),\n        strokeOpacityAttr = vgl.vertexAttribute('strokeOpacity'),\n        modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n        projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n        mat = vgl.material(),\n        blend = vgl.blend(),\n        geom = vgl.geometryData(),\n        sourcePositions = vgl.sourceDataP3fv({'name': 'pos'}),\n        sourceUnits = vgl.sourceDataAnyfv(\n          2, vgl.vertexAttributeKeysIndexed.One, {'name': 'unit'}),\n        sourceRadius = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Two, {'name': 'radius'}),\n        sourceStrokeWidth = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Three, {'name': 'strokeWidth'}),\n        sourceFillColor = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Four, {'name': 'fillColor'}),\n        sourceFill = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Five, {'name': 'fill'}),\n        sourceStrokeColor = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Six, {'name': 'strokeColor'}),\n        sourceStroke = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Seven, {'name': 'stroke'}),\n        sourceAlpha = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Eight, {'name': 'fillOpacity'}),\n        sourceStrokeOpacity = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Nine, {'name': 'strokeOpacity'}),\n        primitive = new vgl.triangles();\n\n    if (m_primitiveShape === 'sprite') {\n      primitive = new vgl.points();\n    }\n\n    m_pixelWidthUniform = new vgl.floatUniform(\n      'pixelWidth', 2.0 / m_this.renderer().width());\n    m_aspectUniform = new vgl.floatUniform(\n      'aspect', m_this.renderer().width() / m_this.renderer().height());\n\n    s_init.call(m_this, arg);\n    m_mapper = vgl.mapper({dynamicDraw: m_dynamicDraw});\n\n    // TODO: Right now this is ugly but we will fix it.\n    prog.addVertexAttribute(posAttr, vgl.vertexAttributeKeys.Position);\n    if (m_primitiveShape !== 'sprite') {\n      prog.addVertexAttribute(unitAttr, vgl.vertexAttributeKeysIndexed.One);\n    }\n\n    prog.addVertexAttribute(radAttr, vgl.vertexAttributeKeysIndexed.Two);\n    prog.addVertexAttribute(strokeWidthAttr, vgl.vertexAttributeKeysIndexed.Three);\n    prog.addVertexAttribute(fillColorAttr, vgl.vertexAttributeKeysIndexed.Four);\n    prog.addVertexAttribute(fillAttr, vgl.vertexAttributeKeysIndexed.Five);\n    prog.addVertexAttribute(strokeColorAttr, vgl.vertexAttributeKeysIndexed.Six);\n    prog.addVertexAttribute(strokeAttr, vgl.vertexAttributeKeysIndexed.Seven);\n    prog.addVertexAttribute(fillOpacityAttr, vgl.vertexAttributeKeysIndexed.Eight);\n    prog.addVertexAttribute(strokeOpacityAttr, vgl.vertexAttributeKeysIndexed.Nine);\n\n    prog.addUniform(m_pixelWidthUniform);\n    prog.addUniform(m_aspectUniform);\n    prog.addUniform(modelViewUniform);\n    prog.addUniform(projectionUniform);\n\n    prog.addShader(fragmentShader);\n    prog.addShader(vertexShader);\n\n    mat.addAttribute(prog);\n    mat.addAttribute(blend);\n\n    m_actor = vgl.actor();\n    m_actor.setMaterial(mat);\n    m_actor.setMapper(m_mapper);\n\n    geom.addSource(sourcePositions);\n    geom.addSource(sourceUnits);\n    geom.addSource(sourceRadius);\n    geom.addSource(sourceStrokeWidth);\n    geom.addSource(sourceFillColor);\n    geom.addSource(sourceFill);\n    geom.addSource(sourceStrokeColor);\n    geom.addSource(sourceStroke);\n    geom.addSource(sourceAlpha);\n    geom.addSource(sourceStrokeOpacity);\n    geom.addPrimitive(primitive);\n    m_mapper.setGeometryData(geom);\n  };\n\n  /**\n   * Build.  Create the necessary elements to render points.\n   *\n   * @returns {this}\n   */\n  this._build = function () {\n\n    if (m_actor) {\n      m_this.renderer().contextRenderer().removeActor(m_actor);\n    }\n\n    createGLPoints();\n\n    m_this.renderer().contextRenderer().addActor(m_actor);\n    m_this.renderer().contextRenderer().render();\n    m_this.buildTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update.  Rebuild if necessary.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n\n    s_update.call(m_this);\n\n    // For now build if the data or style changes. In the future we may\n    // we able to partially update the data using dynamic gl buffers.\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n\n    // Update uniforms\n    m_pixelWidthUniform.set(2.0 / m_this.renderer().width());\n    m_aspectUniform.set(m_this.renderer().width() /\n                        m_this.renderer().height());\n\n    m_actor.setVisible(m_this.visible());\n    m_actor.material().setBinNumber(m_this.bin());\n\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Destroy.  Free used resources.\n   */\n  this._exit = function () {\n    m_this.renderer().contextRenderer().removeActor(m_actor);\n    m_actor = null;\n    s_exit();\n  };\n\n  m_this._init();\n  return this;\n};\n\ninherit(gl_pointFeature, pointFeature);\n\n// Now register it\nregisterFeature('vgl', 'point', gl_pointFeature);\n\nmodule.exports = gl_pointFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/pointFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar polygonFeature = require('../polygonFeature');\n\n/**\n * Create a new instance of gl.polygonFeature.\n *\n * @class\n * @alias geo.gl.polygonFeature\n * @extends geo.polygonFeature\n * @param {geo.polygonFeature.spec} arg\n * @returns {geo.gl.polygonFeature}\n */\nvar gl_polygonFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof gl_polygonFeature)) {\n    return new gl_polygonFeature(arg);\n  }\n  arg = arg || {};\n  polygonFeature.call(this, arg);\n\n  var vgl = require('vgl');\n  var earcut = require('earcut');\n  var transform = require('../transform');\n  var util = require('../util');\n  var object = require('./object');\n\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      s_exit = this._exit,\n      m_actor = vgl.actor(),\n      m_mapper = vgl.mapper(),\n      m_material = vgl.material(),\n      m_geometry,\n      s_init = this._init,\n      s_update = this._update,\n      m_builtOnce,\n      m_updateAnimFrameRef;\n\n  function createVertexShader() {\n    var vertexShaderSource = [\n          'attribute vec3 pos;',\n          'attribute vec3 fillColor;',\n          'attribute float fillOpacity;',\n          'uniform mat4 modelViewMatrix;',\n          'uniform mat4 projectionMatrix;',\n          'varying vec4 fillColorVar;',\n\n          'void main(void)',\n          '{',\n          '  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1);',\n          '  if (clipPos.w != 0.0) {',\n          '    clipPos = clipPos/clipPos.w;',\n          '  }',\n          '  fillColorVar = vec4(fillColor, fillOpacity);',\n          '  gl_Position = clipPos;',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.VERTEX_SHADER);\n    shader.setShaderSource(vertexShaderSource);\n    return shader;\n  }\n\n  function createFragmentShader() {\n    var fragmentShaderSource = [\n          '#ifdef GL_ES',\n          '  precision highp float;',\n          '#endif',\n          'varying vec4 fillColorVar;',\n          'void main () {',\n          '  gl_FragColor = fillColorVar;',\n          '}'\n        ].join('\\n'),\n        shader = new vgl.shader(vgl.GL.FRAGMENT_SHADER);\n    shader.setShaderSource(fragmentShaderSource);\n    return shader;\n  }\n\n  /**\n   * Create and style the triangles needed to render the polygons.\n   *\n   * There are several optimizations to do less work when possible.  If only\n   * styles have changed, the triangulation is not recomputed, nor is the\n   * geometry re-transformed.  If styles use static values (rather than\n   * functions), they are only calculated once.  If a polygon reports that it\n   * has a uniform style, then styles are only calculated once for that polygon\n   * (the uniform property may be different per polygon or per update).\n   * Array.map is slower in Chrome that using a loop, so loops are used in\n   * places that would be conceptually served by maps.\n   *\n   * @param {boolean} onlyStyle if true, use the existing geoemtry and just\n   *    recalculate the style.\n   */\n  function createGLPolygons(onlyStyle) {\n    var posBuf, posFunc, polyFunc,\n        fillColor, fillColorFunc, fillColorVal,\n        fillOpacity, fillOpacityFunc, fillOpacityVal,\n        fillFunc, fillVal,\n        uniformPolyFunc, uniform,\n        indices,\n        items = [],\n        target_gcs = m_this.gcs(),\n        map_gcs = m_this.layer().map().gcs(),\n        numPts = 0,\n        geom = m_mapper.geometryData(),\n        color, opacity, fill, d, d3, vertices, i, j, k, n,\n        record, item, itemIndex, original;\n\n    fillColorFunc = m_this.style.get('fillColor');\n    fillColorVal = util.isFunction(m_this.style('fillColor')) ? undefined : fillColorFunc();\n    fillOpacityFunc = m_this.style.get('fillOpacity');\n    fillOpacityVal = util.isFunction(m_this.style('fillOpacity')) ? undefined : fillOpacityFunc();\n    fillFunc = m_this.style.get('fill');\n    fillVal = util.isFunction(m_this.style('fill')) ? undefined : fillFunc();\n    uniformPolyFunc = m_this.style.get('uniformPolygon');\n\n    if (!onlyStyle) {\n      posFunc = m_this.style.get('position');\n      polyFunc = m_this.style.get('polygon');\n      m_this.data().forEach(function (item, itemIndex) {\n        var polygon, outer, geometry, c;\n\n        polygon = polyFunc(item, itemIndex);\n        if (!polygon) {\n          return;\n        }\n        outer = polygon.outer || (Array.isArray(polygon) ? polygon : []);\n        if (outer.length < 3) {\n          return;\n        }\n\n        /* expand to an earcut polygon geometry.  We had been using a map call,\n         * but using loops is much faster in Chrome (4 versus 33 ms for one\n         * test). */\n        geometry = new Array(outer.length * 3);\n        for (i = d3 = 0; i < outer.length; i += 1, d3 += 3) {\n          c = posFunc(outer[i], i, item, itemIndex);\n          geometry[d3] = c.x;\n          geometry[d3 + 1] = c.y;\n          geometry[d3 + 2] = c.z || 0;\n        }\n        geometry = {vertices: geometry, dimensions: 3, holes: []};\n        original = outer;\n\n        if (polygon.inner) {\n          polygon.inner.forEach(function (hole) {\n            if (hole.length < 3) {\n              return;\n            }\n            original = original.concat(hole);\n            geometry.holes.push(d3 / 3);\n            for (i = 0; i < hole.length; i += 1, d3 += 3) {\n              c = posFunc(hole[i], i, item, itemIndex);\n              geometry.vertices[d3] = c.x;\n              geometry.vertices[d3 + 1] = c.y;\n              geometry.vertices[d3 + 2] = c.z || 0;\n            }\n          });\n        }\n\n        // transform to map gcs\n        geometry.vertices = transform.transformCoordinates(\n          target_gcs,\n          map_gcs,\n          geometry.vertices,\n          geometry.dimensions\n        );\n\n        record = {\n          // triangulate\n          triangles: earcut(geometry.vertices, geometry.holes, geometry.dimensions),\n          vertices: geometry.vertices,\n          original: original,\n          item: item,\n          itemIndex: itemIndex\n        };\n        if (record.triangles.length) {\n          items.push(record);\n          numPts += record.triangles.length;\n        }\n      });\n      posBuf = util.getGeomBuffer(geom, 'pos', numPts * 3);\n      indices = geom.primitive(0).indices();\n      if (!(indices instanceof Uint16Array) || indices.length !== numPts) {\n        indices = new Uint16Array(numPts);\n        geom.primitive(0).setIndices(indices);\n      }\n      m_geometry = {items: items, numPts: numPts};\n    } else {\n      items = m_geometry.items;\n      numPts = m_geometry.numPts;\n    }\n    fillColor = util.getGeomBuffer(geom, 'fillColor', numPts * 3);\n    fillOpacity = util.getGeomBuffer(geom, 'fillOpacity', numPts);\n    d = d3 = 0;\n    color = fillColorVal;\n    fill = fillVal;\n    for (k = 0; k < items.length; k += 1) {\n      n = items[k].triangles.length;\n      vertices = items[k].vertices;\n      item = items[k].item;\n      itemIndex = items[k].itemIndex;\n      original = items[k].original;\n      uniform = uniformPolyFunc(item, itemIndex);\n      opacity = fillOpacityVal;\n      if (uniform) {\n        if (fillColorVal === undefined) {\n          color = fillColorFunc(vertices[0], 0, item, itemIndex);\n        }\n        if (fillOpacityVal === undefined) {\n          opacity = fillOpacityFunc(vertices[0], 0, item, itemIndex);\n        }\n      }\n      if (fillVal === undefined) {\n        fill = fillFunc(item, itemIndex);\n      }\n      if (!fill) {\n        opacity = 0;\n      }\n      if (uniform && onlyStyle && items[k].uniform && items[k].color &&\n          color.r === items[k].color.r && color.g === items[k].color.g &&\n          color.b === items[k].color.b && opacity === items[k].opacity) {\n        d += n;\n        d3 += n * 3;\n        continue;\n      }\n      for (i = 0; i < n; i += 1, d += 1, d3 += 3) {\n        if (onlyStyle && uniform) {\n          fillColor[d3] = color.r;\n          fillColor[d3 + 1] = color.g;\n          fillColor[d3 + 2] = color.b;\n          fillOpacity[d] = opacity;\n        } else {\n          j = items[k].triangles[i] * 3;\n          if (!onlyStyle) {\n            posBuf[d3] = vertices[j];\n            posBuf[d3 + 1] = vertices[j + 1];\n            posBuf[d3 + 2] = vertices[j + 2];\n            indices[d] = i;\n          }\n          if (!uniform && fillColorVal === undefined) {\n            color = fillColorFunc(original[j], j, item, itemIndex);\n          }\n          fillColor[d3] = color.r;\n          fillColor[d3 + 1] = color.g;\n          fillColor[d3 + 2] = color.b;\n          if (!uniform && fillOpacityVal === undefined) {\n            opacity = fillOpacityFunc(original[j], j, item, itemIndex);\n          }\n          fillOpacity[d] = opacity;\n        }\n      }\n      if (uniform || items[k].uniform) {\n        items[k].uniform = uniform;\n        items[k].color = color;\n        items[k].opacity = opacity;\n      }\n    }\n    m_mapper.modified();\n    if (!onlyStyle) {\n      geom.boundsDirty(true);\n      m_mapper.boundsDirtyTimestamp().modified();\n    }\n  }\n\n  /**\n   * Initialize.\n   *\n   * @param {geo.polygonFeature.spec} arg An object with options for the\n   *    feature.\n   */\n  this._init = function (arg) {\n    var prog = vgl.shaderProgram(),\n        posAttr = vgl.vertexAttribute('pos'),\n        fillColorAttr = vgl.vertexAttribute('fillColor'),\n        fillOpacityAttr = vgl.vertexAttribute('fillOpacity'),\n        modelViewUniform = new vgl.modelViewUniform('modelViewMatrix'),\n        projectionUniform = new vgl.projectionUniform('projectionMatrix'),\n        vertexShader = createVertexShader(),\n        fragmentShader = createFragmentShader(),\n        blend = vgl.blend(),\n        geom = vgl.geometryData(),\n        sourcePositions = vgl.sourceDataP3fv({'name': 'pos'}),\n        sourceFillColor = vgl.sourceDataAnyfv(\n          3, vgl.vertexAttributeKeysIndexed.Two, {'name': 'fillColor'}),\n        sourceFillOpacity = vgl.sourceDataAnyfv(\n          1, vgl.vertexAttributeKeysIndexed.Three, {'name': 'fillOpacity'}),\n        trianglePrimitive = vgl.triangles();\n\n    prog.addVertexAttribute(posAttr, vgl.vertexAttributeKeys.Position);\n    prog.addVertexAttribute(fillColorAttr, vgl.vertexAttributeKeysIndexed.Two);\n    prog.addVertexAttribute(fillOpacityAttr, vgl.vertexAttributeKeysIndexed.Three);\n\n    prog.addUniform(modelViewUniform);\n    prog.addUniform(projectionUniform);\n\n    prog.addShader(fragmentShader);\n    prog.addShader(vertexShader);\n\n    m_material.addAttribute(prog);\n    m_material.addAttribute(blend);\n\n    m_actor.setMaterial(m_material);\n    m_actor.setMapper(m_mapper);\n\n    geom.addSource(sourcePositions);\n    geom.addSource(sourceFillColor);\n    geom.addSource(sourceFillOpacity);\n    geom.addPrimitive(trianglePrimitive);\n    m_mapper.setGeometryData(geom);\n\n    s_init.call(m_this, arg);\n  };\n\n  /**\n   * Build.\n   *\n   * @override\n   */\n  this._build = function () {\n    createGLPolygons(m_this.dataTime().timestamp() < m_this.buildTime().timestamp() && m_geometry);\n\n    if (!m_this.renderer().contextRenderer().hasActor(m_actor)) {\n      m_this.renderer().contextRenderer().addActor(m_actor);\n      m_builtOnce = true;\n    }\n    m_this.buildTime().modified();\n  };\n\n  /**\n   * Update.\n   *\n   * @param {object} [opts] Update options.\n   * @param {boolean} [opts.mayDelay] If truthy, wait until the next animation\n   *    frame for the update.\n   */\n  this._update = function (opts) {\n    if (!m_this.ready) {\n      return;\n    }\n    if (opts && opts.mayDelay && m_builtOnce) {\n      m_updateAnimFrameRef = m_this.layer().map().scheduleAnimationFrame(m_this._update);\n      return;\n    }\n    if (m_updateAnimFrameRef) {\n      m_this.layer().map().scheduleAnimationFrame(m_this._update, 'remove');\n      m_updateAnimFrameRef = null;\n    }\n    s_update.call(m_this);\n\n    if (m_this.dataTime().timestamp() >= m_this.buildTime().timestamp() ||\n        m_this.updateTime().timestamp() <= m_this.timestamp()) {\n      m_this._build();\n    }\n\n    m_actor.setVisible(m_this.visible());\n    m_actor.material().setBinNumber(m_this.bin());\n    m_this.updateTime().modified();\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    if (m_updateAnimFrameRef && m_this.layer()) {\n      m_this.layer().map().scheduleAnimationFrame(m_this._update, 'remove');\n      m_updateAnimFrameRef = null;\n    }\n    m_this.renderer().contextRenderer().removeActor(m_actor);\n    s_exit();\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(gl_polygonFeature, polygonFeature);\n\n// Now register it\nregisterFeature('vgl', 'polygon', gl_polygonFeature);\nmodule.exports = gl_polygonFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/polygonFeature.js","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertice leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertice index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertice nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/earcut/src/earcut.js\n// module id = 635\n// module chunks = 0 1","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar quadFeature = require('../quadFeature');\nvar timestamp = require('../timestamp');\n\n/**\n * Create a new instance of class quadFeature.\n *\n * @class\n * @alias geo.gl.quadFeature\n * @param {geo.quadFeature.spec} arg Options object.\n * @extends geo.quadFeature\n * @returns {geo.gl.quadFeature}\n */\nvar gl_quadFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof gl_quadFeature)) {\n    return new gl_quadFeature(arg);\n  }\n  quadFeature.call(this, arg);\n\n  var $ = require('jquery');\n  var vgl = require('vgl');\n  var object = require('./object');\n\n  object.call(this);\n\n  var m_this = this,\n      s_exit = this._exit,\n      s_init = this._init,\n      s_update = this._update,\n      m_modelViewUniform,\n      m_actor_image, m_actor_color, m_glBuffers = {}, m_imgposbuf,\n      m_clrposbuf, m_clrModelViewUniform,\n      m_glCompileTimestamp = timestamp(),\n      m_glColorCompileTimestamp = timestamp(),\n      m_quads;\n  var fragmentShaderImageSource = [\n    'varying highp vec2 iTextureCoord;',\n    'uniform sampler2D sampler2d;',\n    'uniform mediump float opacity;',\n    'uniform highp vec2 crop;',\n    'void main(void) {',\n    '  mediump vec4 color = texture2D(sampler2d, iTextureCoord);',\n    '  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {',\n    '    discard;',\n    '  }',\n    '  color.w *= opacity;',\n    '  gl_FragColor = color;',\n    '}'].join('\\n');\n  var vertexShaderImageSource = [\n    'attribute vec3 vertexPosition;',\n    'attribute vec2 textureCoord;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying highp vec2 iTextureCoord;',\n    'void main(void) {',\n    '  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    '  iTextureCoord = textureCoord;',\n    '}'].join('\\n');\n  var vertexShaderColorSource = [\n    'attribute vec3 vertexPosition;',\n    'uniform vec3 vertexColor;',\n    'uniform mat4 modelViewMatrix;',\n    'uniform mat4 projectionMatrix;',\n    'varying mediump vec3 iVertexColor;',\n    'void main(void) {',\n    '  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',\n    '  iVertexColor = vertexColor;',\n    '}'].join('\\n');\n\n  /**\n   * Allocate buffers that we need to control for image quads.  This mimics\n   * the actions from vgl.mapper to some degree.\n   *\n   * @private\n   * @param {vgl.renderState} renderState An object that contains the context\n   *   used for drawing.\n   */\n  function setupDrawObjects(renderState) {\n    var context = renderState.m_context,\n        newbuf = false;\n\n    if (m_quads.imgQuads.length) {\n      if (!m_imgposbuf || m_imgposbuf.length < m_quads.imgQuads.length * 12 ||\n          !m_glBuffers.imgQuadsPosition) {\n        if (m_glBuffers.imgQuadsPosition) {\n          context.deleteBuffer(m_glBuffers.imgQuadsPosition);\n        }\n        m_glBuffers.imgQuadsPosition = context.createBuffer();\n        m_imgposbuf = new Float32Array(Math.max(\n          128, m_quads.imgQuads.length * 2) * 12);\n        newbuf = true;\n      }\n      $.each(m_quads.imgQuads, function (idx, quad) {\n        for (var i = 0; i < 12; i += 1) {\n          m_imgposbuf[idx * 12 + i] = quad.pos[i] - m_quads.origin[i % 3];\n        }\n      });\n      context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.imgQuadsPosition);\n      if (newbuf) {\n        context.bufferData(vgl.GL.ARRAY_BUFFER, m_imgposbuf, vgl.GL.DYNAMIC_DRAW);\n      } else {\n        context.bufferSubData(vgl.GL.ARRAY_BUFFER, 0, m_imgposbuf);\n      }\n    }\n    m_glCompileTimestamp.modified();\n  }\n\n  /**\n   * Allocate buffers that we need to control for color quads.  This mimics\n   * the actions from vgl.mapper to some degree.\n   *\n   * @private\n   * @param {vgl.renderState} renderState An object that contains the context\n   *   used for drawing.\n   */\n  function setupColorDrawObjects(renderState) {\n    var context = renderState.m_context,\n        newbuf = false;\n\n    if (m_quads.clrQuads.length) {\n      if (!m_clrposbuf || m_clrposbuf.length < m_quads.clrQuads.length * 12 ||\n          !m_glBuffers.clrQuadsPosition) {\n        if (m_glBuffers.clrQuadsPosition) {\n          context.deleteBuffer(m_glBuffers.clrQuadsPosition);\n        }\n        m_glBuffers.clrQuadsPosition = context.createBuffer();\n        m_clrposbuf = new Float32Array(Math.max(\n          128, m_quads.clrQuads.length * 2) * 12);\n        newbuf = true;\n      }\n      $.each(m_quads.clrQuads, function (idx, quad) {\n        for (var i = 0; i < 12; i += 1) {\n          m_clrposbuf[idx * 12 + i] = quad.pos[i] - m_quads.origin[i % 3];\n        }\n      });\n      context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.clrQuadsPosition);\n      if (newbuf) {\n        context.bufferData(vgl.GL.ARRAY_BUFFER, m_clrposbuf, vgl.GL.DYNAMIC_DRAW);\n      } else {\n        context.bufferSubData(vgl.GL.ARRAY_BUFFER, 0, m_clrposbuf);\n      }\n    }\n    m_glColorCompileTimestamp.modified();\n  }\n\n  /**\n   * Get a vgl mapper, mark dynamicDraw, augment the timestamp and the render\n   * function.\n   *\n   * @private\n   * @param {function} renderFunc Our own render function.\n   * @returns {vgl.mapper} a vgl mapper object.\n   */\n  function getVGLMapper(renderFunc) {\n    var mapper = new vgl.mapper({dynamicDraw: true});\n    mapper.s_modified = mapper.modified;\n    mapper.g_timestamp = timestamp();\n    mapper.timestamp = mapper.g_timestamp.timestamp;\n    mapper.modified = function () {\n      mapper.s_modified();\n      mapper.g_timestamp.modified();\n      return mapper;\n    };\n    mapper.s_render = mapper.render;\n    mapper.render = renderFunc;\n    return mapper;\n  }\n\n  /**\n   * Build this feature.\n   */\n  this._build = function () {\n    var mapper, mat, prog, srctex, unicrop, geom, context;\n\n    if (!m_this.position()) {\n      return;\n    }\n    m_quads = this._generateQuads();\n    /* Create an actor to render image quads */\n    if (m_quads.imgQuads.length && !m_actor_image) {\n      m_this.visible(false);\n      mapper = getVGLMapper(m_this._renderImageQuads);\n      m_actor_image = new vgl.actor();\n      /* This is similar to vgl.utils.createTextureMaterial */\n      m_actor_image.setMapper(mapper);\n      mat = new vgl.material();\n      prog = new vgl.shaderProgram();\n      prog.addVertexAttribute(new vgl.vertexAttribute('vertexPosition'),\n                              vgl.vertexAttributeKeys.Position);\n      prog.addVertexAttribute(new vgl.vertexAttribute('textureCoord'),\n                              vgl.vertexAttributeKeys.TextureCoordinate);\n      m_modelViewUniform = new vgl.modelViewOriginUniform(\n        'modelViewMatrix', m_quads.origin);\n      prog.addUniform(m_modelViewUniform);\n      prog.addUniform(new vgl.projectionUniform('projectionMatrix'));\n      prog.addUniform(new vgl.floatUniform('opacity', 1.0));\n      unicrop = new vgl.uniform(vgl.GL.FLOAT_VEC2, 'crop');\n      unicrop.set([1.0, 1.0]);\n      prog.addUniform(unicrop);\n      context = m_this.renderer()._glContext();\n      prog.addShader(vgl.getCachedShader(\n        vgl.GL.VERTEX_SHADER, context, vertexShaderImageSource));\n      prog.addShader(vgl.getCachedShader(\n        vgl.GL.FRAGMENT_SHADER, context, fragmentShaderImageSource));\n      mat.addAttribute(prog);\n      mat.addAttribute(new vgl.blend());\n      /* This is similar to vgl.planeSource */\n      geom = new vgl.geometryData();\n      m_imgposbuf = undefined;\n      srctex = new vgl.sourceDataT2fv();\n      srctex.pushBack([0, 0, 1, 0, 0, 1, 1, 1]);\n      geom.addSource(srctex);\n      /* We deliberately do not add a primitive to our geometry -- we take care\n       * of that ourselves. */\n\n      mapper.setGeometryData(geom);\n      m_actor_image.setMaterial(mat);\n      m_this.renderer().contextRenderer().addActor(m_actor_image);\n      m_this.visible(true);\n    }\n    /* Create an actor to render color quads */\n    if (m_quads.clrQuads.length && !m_actor_color) {\n      m_this.visible(false);\n      mapper = getVGLMapper(m_this._renderColorQuads);\n      m_actor_color = new vgl.actor();\n      /* This is similar to vgl.utils.createTextureMaterial */\n      m_actor_color.setMapper(mapper);\n      mat = new vgl.material();\n      prog = new vgl.shaderProgram();\n      prog.addVertexAttribute(new vgl.vertexAttribute('vertexPosition'),\n                              vgl.vertexAttributeKeys.Position);\n      m_clrModelViewUniform = new vgl.modelViewOriginUniform(\n        'modelViewMatrix', m_quads.origin);\n      prog.addUniform(m_clrModelViewUniform);\n      prog.addUniform(new vgl.projectionUniform('projectionMatrix'));\n      prog.addUniform(new vgl.floatUniform('opacity', 1.0));\n      prog.addUniform(new vgl.uniform(vgl.GL.FLOAT_VEC3, 'vertexColor'));\n      context = m_this.renderer()._glContext();\n      prog.addShader(vgl.getCachedShader(\n        vgl.GL.VERTEX_SHADER, context, vertexShaderColorSource));\n      prog.addShader(vgl.utils.createFragmentShader(context));\n      mat.addAttribute(prog);\n      mat.addAttribute(new vgl.blend());\n      /* This is similar to vgl.planeSource */\n      geom = new vgl.geometryData();\n      m_clrposbuf = undefined;\n      /* We deliberately do not add a primitive to our geometry -- we take care\n       * of that ourselves. */\n\n      mapper.setGeometryData(geom);\n      m_actor_color.setMaterial(mat);\n\n      m_this.renderer().contextRenderer().addActor(m_actor_color);\n      m_this.visible(true);\n    }\n    if (m_modelViewUniform) {\n      m_modelViewUniform.setOrigin(m_quads.origin);\n    }\n    if (m_clrModelViewUniform) {\n      m_clrModelViewUniform.setOrigin(m_quads.origin);\n    }\n    m_this._updateTextures();\n    m_this.buildTime().modified();\n  };\n\n  /**\n   * Check all of the image quads.  If any do not have the correct texture,\n   * update them. */\n  this._updateTextures = function () {\n    var texture;\n\n    $.each(m_quads.imgQuads, function (idx, quad) {\n      if (!quad.image) {\n        return;\n      }\n      if (quad.image._texture) {\n        quad.texture = quad.image._texture;\n      } else {\n        texture = new vgl.texture();\n        texture.setImage(quad.image);\n        quad.texture = quad.image._texture = texture;\n      }\n    });\n  };\n\n  /**\n   * Render all of the color quads using a single mapper.\n   *\n   * @param {vgl.renderState} renderState An object that contains the context\n   *   used for drawing.\n   */\n  this._renderColorQuads = function (renderState) {\n    if (!m_quads.clrQuads.length) {\n      return;\n    }\n    var mapper = this;\n    if (mapper.timestamp() > m_glColorCompileTimestamp.timestamp() ||\n        m_this.dataTime().timestamp() > m_glColorCompileTimestamp.timestamp() ||\n        renderState.m_contextChanged || !m_clrposbuf ||\n        m_quads.clrQuads.length * 12 > m_clrposbuf.length) {\n      setupColorDrawObjects(renderState);\n    }\n    mapper.s_render(renderState, true);\n\n    var context = renderState.m_context, opacity = 1, color;\n\n    context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.clrQuadsPosition);\n    $.each(m_quads.clrQuads, function (idx, quad) {\n      if (quad.opacity !== opacity) {\n        opacity = quad.opacity;\n        context.uniform1fv(renderState.m_material.shaderProgram()\n          .uniformLocation('opacity'), new Float32Array([opacity]));\n      }\n      if (!color || color.r !== quad.color.r || color.g !== quad.color.g ||\n          color.b !== quad.color.b) {\n        color = quad.color;\n        context.uniform3fv(renderState.m_material.shaderProgram()\n          .uniformLocation('vertexColor'), new Float32Array([\n          color.r, color.g, color.b]));\n      }\n\n      context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.clrQuadsPosition);\n      context.vertexAttribPointer(vgl.vertexAttributeKeys.Position, 3,\n                                  vgl.GL.FLOAT, false, 12, idx * 12 * 4);\n      context.enableVertexAttribArray(vgl.vertexAttributeKeys.Position);\n\n      context.drawArrays(vgl.GL.TRIANGLE_STRIP, 0, 4);\n    });\n    context.bindBuffer(vgl.GL.ARRAY_BUFFER, null);\n    mapper.undoBindVertexData(renderState);\n  };\n\n  /**\n   * Render all of the image quads using a single mapper.\n   *\n   * @param {vgl.renderState} renderState An object that contains the context\n   *   used for drawing.\n   */\n  this._renderImageQuads = function (renderState) {\n    if (!m_quads.imgQuads.length) {\n      return;\n    }\n    var mapper = this;\n    if (mapper.timestamp() > m_glCompileTimestamp.timestamp() ||\n        m_this.dataTime().timestamp() > m_glCompileTimestamp.timestamp() ||\n        renderState.m_contextChanged || !m_imgposbuf ||\n        m_quads.imgQuads.length * 12 > m_imgposbuf.length) {\n      setupDrawObjects(renderState);\n    }\n    mapper.s_render(renderState, true);\n\n    var context = renderState.m_context,\n        opacity = 1,\n        crop = {x: 1, y: 1}, quadcrop;\n\n    context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.imgQuadsPosition);\n    $.each(m_quads.imgQuads, function (idx, quad) {\n      if (!quad.image) {\n        return;\n      }\n      quad.texture.bind(renderState);\n\n      if (quad.opacity !== opacity) {\n        opacity = quad.opacity;\n        context.uniform1fv(renderState.m_material.shaderProgram()\n          .uniformLocation('opacity'), new Float32Array([opacity]));\n      }\n      quadcrop = quad.crop || {x: 1, y: 1};\n      if (!crop || quadcrop.x !== crop.x || quadcrop.y !== crop.y) {\n        crop = quadcrop;\n        context.uniform2fv(renderState.m_material.shaderProgram()\n          .uniformLocation('crop'), new Float32Array([crop.x, crop.y]));\n      }\n      context.bindBuffer(vgl.GL.ARRAY_BUFFER, m_glBuffers.imgQuadsPosition);\n      context.vertexAttribPointer(vgl.vertexAttributeKeys.Position, 3,\n                                  vgl.GL.FLOAT, false, 12, idx * 12 * 4);\n      context.enableVertexAttribArray(vgl.vertexAttributeKeys.Position);\n\n      context.drawArrays(vgl.GL.TRIANGLE_STRIP, 0, 4);\n      quad.texture.undoBind(renderState);\n    });\n    context.bindBuffer(vgl.GL.ARRAY_BUFFER, null);\n    mapper.undoBindVertexData(renderState);\n  };\n\n  /**\n   * Update.\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.buildTime().timestamp() <= m_this.dataTime().timestamp() ||\n        m_this.updateTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n    if (m_actor_color) {\n      m_actor_color.setVisible(m_this.visible(undefined, true));\n      m_actor_color.material().setBinNumber(m_this.bin());\n    }\n    if (m_actor_image) {\n      m_actor_image.setVisible(m_this.visible(undefined, true));\n      m_actor_image.material().setBinNumber(m_this.bin());\n    }\n    m_this.updateTime().modified();\n  };\n\n  /**\n   * Initialize.\n   */\n  this._init = function () {\n    s_init.call(m_this, arg);\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n    if (m_actor_image) {\n      m_this.renderer().contextRenderer().removeActor(m_actor_image);\n      m_actor_image = null;\n    }\n    if (m_actor_color) {\n      m_this.renderer().contextRenderer().removeActor(m_actor_color);\n      m_actor_color = null;\n    }\n    s_exit.call(m_this);\n  };\n\n  m_this._init(arg);\n  return this;\n};\n\ninherit(gl_quadFeature, quadFeature);\n\n// Now register it\nvar capabilities = {};\ncapabilities[quadFeature.capabilities.color] = true;\ncapabilities[quadFeature.capabilities.image] = true;\ncapabilities[quadFeature.capabilities.imageCrop] = true;\ncapabilities[quadFeature.capabilities.imageFixedScale] = false;\ncapabilities[quadFeature.capabilities.imageFull] = true;\ncapabilities[quadFeature.capabilities.canvas] = false;\ncapabilities[quadFeature.capabilities.video] = false;\n\nregisterFeature('vgl', 'quad', gl_quadFeature, capabilities);\nmodule.exports = gl_quadFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/quadFeature.js","var registerLayerAdjustment = require('../registry').registerLayerAdjustment;\n\nvar gl_tileLayer = function () {\n  'use strict';\n  var m_this = this,\n      s_init = this._init,\n      s_exit = this._exit,\n      m_quadFeature,\n      m_nextTileId = 0,\n      m_tiles = [];\n\n  /* Add a tile to the list of quads */\n  this._drawTile = function (tile) {\n    if (!m_quadFeature) {\n      return;\n    }\n    var bounds = this._tileBounds(tile),\n        level = tile.index.level || 0,\n        to = this._tileOffset(level),\n        crop = this.tileCropFromBounds(tile),\n        quad = {};\n    if (crop) {\n      quad.crop = {\n        x: crop.x / m_this._options.tileWidth,\n        y: crop.y / m_this._options.tileHeight\n      };\n    }\n    quad.ul = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.ll = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    quad.ur = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.lr = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    /* Make sure our level increments are within the clipbounds and ordered so\n     * that lower levels are farther away that higher levels. */\n    var clipbounds = m_this.map().camera().clipbounds;\n    var z = level * m_this._levelZIncrement;\n    z = clipbounds.far + (clipbounds.near - clipbounds.far) * z;\n    quad.ul.z = quad.ll.z = quad.ur.z = quad.lr.z = z;\n    m_nextTileId += 1;\n    quad.id = m_nextTileId;\n    tile.quadId = quad.id;\n    quad.image = tile.image;\n    m_tiles.push(quad);\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n    m_this.draw();\n  };\n\n  /* Remove the tile feature. */\n  this._remove = function (tile) {\n    if (tile.quadId !== undefined && m_quadFeature) {\n      for (var i = 0; i < m_tiles.length; i += 1) {\n        if (m_tiles[i].id === tile.quadId) {\n          m_tiles.splice(i, 1);\n          break;\n        }\n      }\n      m_quadFeature.data(m_tiles);\n      m_quadFeature._update();\n      m_this.draw();\n    }\n  };\n\n  /**\n   * Clean up the layer.\n   */\n  this._exit = function () {\n    m_this.deleteFeature(m_quadFeature);\n    m_quadFeature = null;\n    m_tiles = [];\n    s_exit.apply(m_this, arguments);\n  };\n\n  /**\n   * Initialize after the layer is added to the map.\n   */\n  this._init = function () {\n    s_init.apply(m_this, arguments);\n    m_quadFeature = this.createFeature('quad', {\n      previewColor: m_this._options.previewColor,\n      previewImage: m_this._options.previewImage\n    });\n    m_quadFeature.geoTrigger = undefined;\n    m_quadFeature.gcs(m_this._options.gcs || m_this.map().gcs());\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n  };\n\n  /* These functions don't need to do anything. */\n  this._getSubLayer = function () {};\n  this._updateSubLayers = undefined;\n};\n\nregisterLayerAdjustment('vgl', 'tile', gl_tileLayer);\n\nmodule.exports = gl_tileLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./gl/tileLayer.js","/**\n * @namespace geo.canvas\n */\nmodule.exports = {\n  canvasRenderer: require('./canvasRenderer'),\n  heatmapFeature: require('./heatmapFeature'),\n  isolineFeature: require('./isolineFeature'),\n  lineFeature: require('./lineFeature'),\n  pixelmapFeature: require('./pixelmapFeature'),\n  quadFeature: require('./quadFeature'),\n  textFeature: require('./textFeature'),\n  tileLayer: require('./tileLayer')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/index.js","var inherit = require('../inherit');\nvar registerRenderer = require('../registry').registerRenderer;\nvar renderer = require('../renderer');\n\n/**\n * Create a new instance of class canvasRenderer.\n *\n * @class\n * @alias geo.canvas.renderer\n * @extends geo.renderer\n * @param {object} arg Options for the renderer.\n * @param {geo.layer} [arg.layer] Layer associated with the renderer.\n * @param {HTMLElement} [arg.canvas] Canvas element associated with the\n *   renderer.\n * @returns {geo.canvas.canvasRenderer}\n */\nvar canvasRenderer = function (arg) {\n  'use strict';\n\n  var $ = require('jquery');\n\n  if (!(this instanceof canvasRenderer)) {\n    return new canvasRenderer(arg);\n  }\n  arg = arg || {};\n  renderer.call(this, arg);\n\n  var m_this = this,\n      m_clearCanvas = true,\n      s_init = this._init,\n      s_exit = this._exit;\n\n  /**\n   * Set the clear canvas flag.  If truthy, the canvas is erased at the start\n   * of the render cycle.  If falsy, the old data is kept.\n   *\n   * @param {boolean} arg Truthy to clear the canvas when rendering is started.\n   */\n  this.clearCanvas = function (arg) {\n    m_clearCanvas = arg;\n  };\n\n  /**\n   * Get API used by the renderer.\n   *\n   * @returns {string} 'canvas'.\n   */\n  this.api = function () {\n    return 'canvas';\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    if (m_this.initialized()) {\n      return m_this;\n    }\n\n    s_init.call(m_this);\n\n    var canvas = $(document.createElement('canvas'));\n    m_this.context2d = canvas[0].getContext('2d');\n\n    canvas.addClass('canvas-canvas');\n    $(m_this.layer().node().get(0)).append(canvas);\n\n    m_this.canvas(canvas);\n    /* Initialize the size of the renderer */\n    var map = m_this.layer().map(),\n        mapSize = map.size();\n    m_this._resize(0, 0, mapSize.width, mapSize.height);\n\n    return m_this;\n  };\n\n  /**\n   * Handle resize event.\n   *\n   * @param {number} x Ignored.\n   * @param {number} y Ignored.\n   * @param {number} w New width in pixels.\n   * @param {number} h New height in pixels.\n   * @returns {this}\n   */\n  this._resize = function (x, y, w, h) {\n    var canvas = m_this.canvas();\n    if (parseInt(canvas.attr('width'), 10) !== w ||\n        parseInt(canvas.attr('height'), 10) !== h) {\n      canvas.attr('width', w);\n      canvas.attr('height', h);\n      m_this._render();\n    }\n    return m_this;\n  };\n\n  /**\n   * Render.\n   *\n   * @returns {this}\n   */\n  this._render = function () {\n    m_this.layer().map().scheduleAnimationFrame(this._renderFrame);\n    return m_this;\n  };\n\n  /**\n   * Render during an animation frame callback.\n   */\n  this._renderFrame = function () {\n    var layer = m_this.layer(),\n        map = layer.map(),\n        mapSize = map.size(),\n        features = layer.features(),\n        i;\n\n    for (i = 0; i < features.length; i += 1) {\n      if (features[i]._delayRender()) {\n        // reschedule the render for the next animation frame\n        m_this._render();\n        // exit this render loop so it doesn't occur\n        return;\n      }\n    }\n\n    // Clear the canvas.\n    if (m_clearCanvas) {\n      m_this.context2d.setTransform(1, 0, 0, 1, 0, 0);\n      m_this.context2d.clearRect(0, 0, mapSize.width, mapSize.height);\n    }\n\n    for (i = 0; i < features.length; i += 1) {\n      if (features[i].visible()) {\n        features[i]._renderOnCanvas(m_this.context2d, map);\n      }\n    }\n  };\n\n  /**\n   * Exit.\n   */\n  this._exit = function () {\n    m_this.canvas().remove();\n    s_exit();\n  };\n\n  return this;\n};\n\ninherit(canvasRenderer, renderer);\n\nregisterRenderer('canvas', canvasRenderer);\n\n/* Code for checking if the renderer is supported */\n\nvar checkedCanvas;\n\n/**\n * Report if the canvas renderer is supported.\n *\n * @returns {boolean} true if available.\n */\ncanvasRenderer.supported = function () {\n  if (checkedCanvas === undefined) {\n    /* This is extracted from what Modernizr uses. */\n    var canvas; // eslint-disable-line no-unused-vars\n    try {\n      canvas = document.createElement('canvas');\n      checkedCanvas = !!(canvas.getContext && canvas.getContext('2d'));\n    } catch (e) {\n      checkedCanvas = false;\n    }\n    canvas = undefined;\n  }\n  return checkedCanvas;\n};\n\n/**\n * If the canvas renderer is not supported, supply the name of a renderer that\n * should be used instead.  This asks for the null renderer.\n *\n * @returns {null} `null` for the null renderer.\n */\ncanvasRenderer.fallback = function () {\n  return null;\n};\n\nmodule.exports = canvasRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/canvasRenderer.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar heatmapFeature = require('../heatmapFeature');\nvar timestamp = require('../timestamp');\nvar util = require('../util');\n\n/**\n * Create a new instance of class canvas.heatmapFeature.\n * Inspired from\n *    https://github.com/mourner/simpleheat/blob/gh-pages/simpleheat.js .\n *\n * @class\n * @alias geo.canvas.heatmapFeature\n * @param {geo.heatmapFeature.spec} arg\n * @extends geo.heatmapFeature\n * @returns {canvas_heatmapFeature}\n */\nvar canvas_heatmapFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof canvas_heatmapFeature)) {\n    return new canvas_heatmapFeature(arg);\n  }\n  heatmapFeature.call(this, arg);\n  var object = require('./object');\n\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var geo_event = require('../event');\n\n  var m_this = this,\n      m_typedBuffer,\n      m_typedClampedBuffer,\n      m_typedBufferData,\n      m_heatMapPosition,\n      m_heatMapTransform,\n      s_init = this._init,\n      s_update = this._update,\n      m_renderTime = timestamp();\n\n  /**\n   * Compute gradient.  This creates a color lookup table.\n   *\n   * @returns {this}\n   */\n  this._computeGradient = function () {\n    var canvas, stop, context2d, gradient, colors;\n\n    colors = m_this.style('color');\n    if (!m_this._grad || m_this._gradColors !== colors) {\n      canvas = document.createElement('canvas');\n      context2d = canvas.getContext('2d');\n      gradient = context2d.createLinearGradient(0, 0, 0, 256);\n\n      canvas.width = 1;\n      canvas.height = 256;\n\n      for (stop in colors) {\n        gradient.addColorStop(stop, util.convertColorToRGBA(colors[stop]));\n      }\n\n      context2d.fillStyle = gradient;\n      context2d.fillRect(0, 0, 1, 256);\n      m_this._grad = context2d.getImageData(0, 0, 1, 256).data;\n      m_this._gradColors = colors;\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Create circle for each data point.\n   *\n   * @returns {this}\n   */\n  this._createCircle = function () {\n    var circle, ctx, r, r2, blur, gaussian;\n    r = m_this.style('radius');\n    blur = m_this.style('blurRadius');\n    gaussian = m_this.style('gaussian');\n    if (!m_this._circle || m_this._circle.gaussian !== gaussian ||\n        m_this._circle.radius !== r || m_this._circle.blurRadius !== blur) {\n      circle = m_this._circle = document.createElement('canvas');\n      ctx = circle.getContext('2d');\n      r2 = blur + r;\n      circle.width = circle.height = r2 * 2;\n      if (!gaussian) {\n        ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n        ctx.shadowBlur = blur;\n        ctx.shadowColor = 'black';\n        ctx.beginPath();\n        ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\n        ctx.closePath();\n        ctx.fill();\n      } else {\n        /* This approximates a gaussian distribution by using a 10-step\n         * piecewise linear radial gradient.  Strictly, it should not stop at\n         * the radius, but should be attenuated further.  The scale has been\n         * selected such that the values at the radius are around 1/256th of\n         * the maximum, and therefore would not be visible using an 8-bit alpha\n         * channel for the summation.  The values for opacity were generated by\n         * the python expression:\n         *   from scipy.stats import norm\n         *   for r in [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]:\n         *     opacity = norm.pdf(r, scale=0.3) / norm.pdf(0, scale=0.3)\n         * Usng a 10-interval approximation is accurate to within 0.5% of the\n         * actual Gaussian magnitude.  Switching to a 20-interval approximation\n         * would get within 0.1%, at which point there is more error from using\n         * a Gaussian truncated at the radius than from the approximation.\n         */\n        var grad = ctx.createRadialGradient(r2, r2, 0, r2, r2, r2);\n        grad.addColorStop(0.0, 'rgba(255,255,255,1)');\n        grad.addColorStop(0.1, 'rgba(255,255,255,0.946)');\n        grad.addColorStop(0.2, 'rgba(255,255,255,0.801)');\n        grad.addColorStop(0.3, 'rgba(255,255,255,0.607)');\n        grad.addColorStop(0.4, 'rgba(255,255,255,0.411)');\n        grad.addColorStop(0.5, 'rgba(255,255,255,0.249)');\n        grad.addColorStop(0.6, 'rgba(255,255,255,0.135)');\n        grad.addColorStop(0.7, 'rgba(255,255,255,0.066)');\n        grad.addColorStop(0.8, 'rgba(255,255,255,0.029)');\n        grad.addColorStop(0.9, 'rgba(255,255,255,0.011)');\n        grad.addColorStop(1.0, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grad;\n        ctx.fillRect(0, 0, r2 * 2, r2 * 2);\n      }\n      circle.radius = r;\n      circle.blurRadius = blur;\n      circle.gaussian = gaussian;\n      m_this._circle = circle;\n    }\n    return m_this;\n  };\n\n  /**\n   * Compute color for each pixel on the screen.\n   *\n   * @param {Uint8ClampedArray} pixels A 2D canvas `getImageData` buffer.\n   * @param {Uint8ClampedArray} gradient A 2D canvas with 256 pixels that\n   *    contain a color gradient.\n   * @protected\n   */\n  this._colorize = function (pixels, gradient) {\n    var grad = new Uint32Array(gradient.buffer),\n        pixlen = pixels.length,\n        i, j, k;\n    if (!m_typedBuffer || m_typedBuffer.length !== pixlen) {\n      m_typedBuffer = new ArrayBuffer(pixlen);\n      m_typedClampedBuffer = new Uint8ClampedArray(m_typedBuffer);\n      m_typedBufferData = new Uint32Array(m_typedBuffer);\n    }\n    for (i = 3, k = 0; i < pixlen; i += 4, k += 1) {\n      // Get opacity from the temporary canvas image and look up the final\n      // value from gradient\n      j = pixels[i];\n      if (j) {\n        m_typedBufferData[k] = grad[j];\n      }\n    }\n    pixels.set(m_typedClampedBuffer);\n  };\n\n  /**\n   * Render individual data points on the canvas.\n   *\n   * @param {RenderingContext} context2d The canvas context to draw in.\n   * @param {geo.map} map The parent map object.\n   * @param {array} data The main data array.\n   * @param {number} radius The sum of `radius` and `blurRadius`.\n   */\n  this._renderPoints = function (context2d, map, data, radius) {\n    var position = m_this.gcsPosition(),\n        intensityFunc = m_this.intensity(),\n        minIntensity = m_this.minIntensity(),\n        rangeIntensity = (m_this.maxIntensity() - minIntensity) || 1,\n        idx, pos, intensity;\n\n    for (idx = data.length - 1; idx >= 0; idx -= 1) {\n      pos = map.worldToDisplay(position[idx]);\n      intensity = (intensityFunc(data[idx], idx) - minIntensity) / rangeIntensity;\n      if (intensity <= 0) {\n        continue;\n      }\n      // Small values are not visible because globalAlpha < .01\n      // cannot be read from imageData\n      context2d.globalAlpha = intensity < 0.01 ? 0.01 : (intensity > 1 ? 1 : intensity);\n      context2d.drawImage(m_this._circle, pos.x - radius, pos.y - radius);\n    }\n  };\n\n  /**\n   * Render data points on the canvas by binning.\n   *\n   * @param {RenderingContext} context2d The canvas context to draw in.\n   * @param {geo.map} map The parent map object.\n   * @param {array} data The main data array.\n   * @param {number} radius The sum of `radius` and `blurRadius`.\n   * @param {number} binSize Size of the bins in pixels.\n   */\n  this._renderBinnedData = function (context2d, map, data, radius, binSize) {\n    var position = m_this.gcsPosition(),\n        intensityFunc = m_this.intensity(),\n        minIntensity = m_this.minIntensity(),\n        rangeIntensity = (m_this.maxIntensity() - minIntensity) || 1,\n        mapSize = map.size(),\n        bins = [],\n        rw = Math.ceil(radius / binSize),\n        maxx = Math.ceil(mapSize.width / binSize) + rw * 2 + 2,\n        maxy = Math.ceil(mapSize.height / binSize) + rw * 2 + 2,\n        datalen = data.length,\n        idx, pos, intensity, x, y, binrow, offsetx, offsety;\n\n    /* We create bins of size (binSize) pixels on a side.  We only track bins\n     * that are on the viewport or within the radius of it, plus one extra bin\n     * width. */\n    for (idx = 0; idx < datalen; idx += 1) {\n      pos = map.worldToDisplay(position[idx]);\n      /* To make the results look more stable, we use the first data point as a\n       * hard-reference to where the bins should line up.  Otherwise, as we pan\n       * points would shift which bin they are in and the display would ripple\n       * oddly. */\n      if (isNaN(pos.x) || isNaN(pos.y)) {\n        continue;\n      }\n      if (offsetx === undefined) {\n        offsetx = ((pos.x % binSize) + binSize) % binSize;\n        offsety = ((pos.y % binSize) + binSize) % binSize;\n      }\n      /* We handle points that are in the viewport, plus the radius on either\n       * side, as they will add into the visual effect, plus one additional bin\n       * to account for the offset alignment. */\n      x = Math.floor((pos.x - offsetx) / binSize) + rw + 1;\n      if (x < 0 || x >= maxx) {\n        continue;\n      }\n      y = Math.floor((pos.y - offsety) / binSize) + rw + 1;\n      if (y < 0 || y >= maxy) {\n        continue;\n      }\n      intensity = (intensityFunc(data[idx], idx) - minIntensity) / rangeIntensity;\n      if (intensity <= 0) {\n        continue;\n      }\n      if (intensity > 1) {\n        intensity = 1;\n      }\n      /* bins is an array of arrays.  The subarrays would be conceptually\n       * better represented as an array of dicts, but having a sparse array is\n       * uses much less memory and is faster.  Each bin uses four array entries\n       * that are (weight, intensity, x, y).  The weight is the sum of the\n       * intensities for all points in the bin.  The intensity is the geometric\n       * sum of the intensities to approximate what happens to the unbinned\n       * data on the alpha channel of the canvas.  The x and y coordinates are\n       * weighted by the intensity of each point. */\n      bins[y] = bins[y] || [];\n      x *= 4;\n      binrow = bins[y];\n      if (!binrow[x]) {\n        binrow[x] = binrow[x + 1] = intensity;\n        binrow[x + 2] = pos.x * intensity;\n        binrow[x + 3] = pos.y * intensity;\n      } else {\n        binrow[x] += intensity;  // weight\n        binrow[x + 1] += (1 - binrow[x + 1]) * intensity;\n        binrow[x + 2] += pos.x * intensity;\n        binrow[x + 3] += pos.y * intensity;\n      }\n    }\n    /* For each bin, render a point on the canvas. */\n    for (y = bins.length - 1; y >= 0; y -= 1) {\n      binrow = bins[y];\n      if (binrow) {\n        for (x = binrow.length - 4; x >= 0; x -= 4) {\n          if (binrow[x]) {\n            intensity = binrow[x + 1];\n            context2d.globalAlpha = intensity < 0.01 ? 0.01 : (intensity > 1 ? 1 : intensity);\n            /* The position is eighted by the intensities, so we have to divide\n             * it to get the necessary position */\n            context2d.drawImage(\n              m_this._circle,\n              binrow[x + 2] / binrow[x] - radius,\n              binrow[x + 3] / binrow[x] - radius);\n          }\n        }\n      }\n    }\n  };\n\n  /**\n   * Render the data on the canvas, then colorize the resulting opacity map.\n   *\n   * @param {RenderingContext} context2d The canvas context to draw in.\n   * @param {geo.map} map The parent map object.\n   * @returns {this}\n   */\n  this._renderOnCanvas = function (context2d, map) {\n\n    if (m_renderTime.timestamp() < m_this.buildTime().timestamp()) {\n      var data = m_this.data() || [],\n          radius = m_this.style('radius') + m_this.style('blurRadius'),\n          binned = m_this.binned(),\n          canvas, pixelArray,\n          layer = m_this.layer(),\n          mapSize = map.size();\n\n      /* Determine if we should bin the data */\n      if (binned === true || binned === 'auto') {\n        binned = Math.max(Math.floor(radius / 8), 3);\n        if (m_this.binned() === 'auto') {\n          var numbins = (Math.ceil((mapSize.width + radius * 2) / binned) *\n                         Math.ceil((mapSize.height + radius * 2) / binned));\n          if (numbins >= data.length) {\n            binned = 0;\n          }\n        }\n      }\n      if (binned < 1 || isNaN(binned)) {\n        binned = false;\n      }\n      /* Store what we did, in case this is ever useful elsewhere */\n      m_this._binned = binned;\n\n      context2d.setTransform(1, 0, 0, 1, 0, 0);\n      context2d.clearRect(0, 0, mapSize.width, mapSize.height);\n      m_heatMapTransform = '';\n      map.scheduleAnimationFrame(m_this._setTransform, false);\n      layer.canvas().css({transform: ''});\n\n      m_this._createCircle();\n      m_this._computeGradient();\n      if (!binned) {\n        m_this._renderPoints(context2d, map, data, radius);\n      } else {\n        m_this._renderBinnedData(context2d, map, data, radius, binned);\n      }\n      canvas = layer.canvas()[0];\n      pixelArray = context2d.getImageData(0, 0, canvas.width, canvas.height);\n      m_this._colorize(pixelArray.data, m_this._grad);\n      context2d.putImageData(pixelArray, 0, 0);\n\n      m_heatMapPosition = {\n        zoom: map.zoom(),\n        gcsOrigin: map.displayToGcs({x: 0, y: 0}, null),\n        rotation: map.rotation(),\n        lastScale: undefined,\n        lastOrigin: {x: 0, y: 0},\n        lastRotation: undefined\n      };\n      m_renderTime.modified();\n      layer.renderer().clearCanvas(false);\n    }\n\n    return m_this;\n  };\n\n  /**\n   * Initialize.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    s_init.call(m_this, arg);\n\n    m_this.geoOn(geo_event.pan, m_this._animatePan);\n\n    return m_this;\n  };\n\n  /**\n   * Update the feature.\n   *\n   * @returns {this}\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.buildTime().timestamp() <= m_this.dataTime().timestamp() ||\n        m_this.updateTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n    m_this.updateTime().modified();\n    return m_this;\n  };\n\n  /**\n   * Update the css transform for the layer as part of an animation frame.\n   * This allows an existing rendered version of the heatmap to appear with a\n   * transform until a new version can be computed.\n   */\n  this._setTransform = function () {\n    if (m_this.layer() && m_this.layer().canvas() && m_this.layer().canvas()[0]) {\n      m_this.layer().canvas()[0].style.transform = m_heatMapTransform;\n    }\n  };\n\n  /**\n   * Animate pan and zoom.\n   */\n  this._animatePan = function () {\n\n    if (!m_heatMapPosition) {\n      return;\n    }\n    var map = m_this.layer().map(),\n        zoom = map.zoom(),\n        scale = Math.pow(2, (zoom - m_heatMapPosition.zoom)),\n        origin = map.gcsToDisplay(m_heatMapPosition.gcsOrigin, null),\n        rotation = map.rotation();\n\n    if (m_heatMapPosition.lastScale === scale &&\n        m_heatMapPosition.lastOrigin.x === origin.x &&\n        m_heatMapPosition.lastOrigin.y === origin.y &&\n        m_heatMapPosition.lastRotation === rotation) {\n      return;\n    }\n\n    var transform = '' +\n        ' translate(' + origin.x + 'px' + ',' + origin.y + 'px' + ')' +\n        ' scale(' + scale + ')' +\n        ' rotate(' + ((rotation - m_heatMapPosition.rotation) * 180 / Math.PI) + 'deg)';\n\n    map.scheduleAnimationFrame(m_this._setTransform);\n\n    m_heatMapTransform = transform;\n    m_heatMapPosition.lastScale = scale;\n    m_heatMapPosition.lastOrigin.x = origin.x;\n    m_heatMapPosition.lastOrigin.y = origin.y;\n    m_heatMapPosition.lastRotation = rotation;\n\n    if (m_heatMapPosition.timeout) {\n      window.clearTimeout(m_heatMapPosition.timeout);\n      m_heatMapPosition.timeout = undefined;\n    }\n    /* This conditional can change if we compute the heatmap beyond the visable\n     * viewport so that we don't have to update on pans as often.  If we are\n     * close to where the heatmap was originally computed, don't bother\n     * updating it. */\n    if (parseFloat(scale.toFixed(4)) !== 1 ||\n        parseFloat((rotation - m_heatMapPosition.rotation).toFixed(4)) !== 0 ||\n        parseFloat(origin.x.toFixed(1)) !== 0 ||\n        parseFloat(origin.y.toFixed(1)) !== 0) {\n      m_heatMapPosition.timeout = window.setTimeout(function () {\n        m_heatMapPosition.timeout = undefined;\n        m_this.buildTime().modified();\n        m_this.layer().draw();\n      }, m_this.updateDelay());\n    }\n  };\n\n  m_this._init(arg);\n  return this;\n};\n\ninherit(canvas_heatmapFeature, heatmapFeature);\n\n// Now register it\nregisterFeature('canvas', 'heatmap', canvas_heatmapFeature);\nmodule.exports = canvas_heatmapFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/heatmapFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar isolineFeature = require('../isolineFeature');\n\n/**\n * Create a new instance of class isolineFeature.\n *\n * @class\n * @alias geo.canvas.isolineFeature\n * @extends geo.isolineFeature\n * @param {geo.isolineFeature.spec} arg\n * @returns {geo.canvas.isolineFeature}\n */\nvar canvas_isolineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof canvas_isolineFeature)) {\n    return new canvas_isolineFeature(arg);\n  }\n\n  arg = arg || {};\n  isolineFeature.call(this, arg);\n\n  var object = require('./object');\n  object.call(this);\n\n  this._init(arg);\n  return this;\n};\n\ninherit(canvas_isolineFeature, isolineFeature);\n\n// Now register it\nregisterFeature('canvas', 'isoline', canvas_isolineFeature);\nmodule.exports = canvas_isolineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/isolineFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar lineFeature = require('../lineFeature');\n\n/**\n * Create a new instance of class lineFeature.\n *\n * @class\n * @alias geo.canvas.lineFeature\n * @extends geo.lineFeature\n * @param {geo.lineFeature.spec} arg\n * @returns {geo.canvas.lineFeature}\n */\nvar canvas_lineFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof canvas_lineFeature)) {\n    return new canvas_lineFeature(arg);\n  }\n\n  var object = require('./object');\n\n  arg = arg || {};\n  lineFeature.call(this, arg);\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this;\n\n  /**\n   * Render the data on the canvas.\n   *\n   * @protected\n   * @param {object} context2d the canvas context to draw in.\n   * @param {geo.map} map the parent map object.\n   */\n  this._renderOnCanvas = function (context2d, map) {\n    var data = m_this.data(),\n        posFunc = m_this.position(),\n        lineFunc = m_this.line(),\n        strokeWidthFunc = m_this.style.get('strokeWidth'),\n        strokeColorFunc = m_this.style.get('strokeColor'),\n        strokeOpacityFunc = m_this.style.get('strokeOpacity'),\n        lineCapFunc = m_this.style.get('lineCap'),\n        lineJoinFunc = m_this.style.get('lineJoin'),\n        miterLimit = m_this.style.get('miterLimit')(data),\n        closedFunc = m_this.style.get('closed'),\n        last = {}, cur = {}, temp, line, pos, firstPos, j;\n\n    data.forEach(function (d, i) {\n      line = lineFunc(d, i);\n      if (line.length < 2) {\n        return;\n      }\n      cur.closed = closedFunc(d, i);\n      cur.width = strokeWidthFunc(line[0], 0, d, i);\n      cur.color = strokeColorFunc(line[0], 0, d, i);\n      cur.opacity = strokeOpacityFunc(line[0], 0, d, i);\n      cur.linecap = lineCapFunc(line[0], 0, d, i);\n      cur.linejoin = lineJoinFunc(line[0], 0, d, i);\n      cur.strokeStyle = 'rgba(' + (cur.color.g * 255) + ', ' +\n          (cur.color.g * 255) + ', ' + (cur.color.b * 255) + ', ' +\n          (cur.opacity !== undefined ? cur.opacity : 1) + ')';\n      if (last.strokeStyle !== cur.strokeStyle || last.width !== cur.width ||\n          last.linecap !== cur.linecap || last.linejoin !== cur.linejoin ||\n          last.miterlimit !== cur.miterlimit) {\n        if (last.strokeStyle !== undefined) {\n          context2d.stroke();\n        }\n        context2d.beginPath();\n        context2d.strokeStyle = cur.strokeStyle;\n        context2d.lineWidth = cur.width;\n        context2d.lineCap = cur.linecap;\n        context2d.lineJoin = cur.linejoin;\n        context2d.miterLimit = miterLimit;\n      }\n      for (j = 0; j < line.length; j += 1) {\n        pos = m_this.featureGcsToDisplay(posFunc(line[j], j, d, i));\n        if (!j) {\n          firstPos = pos;\n          context2d.moveTo(pos.x, pos.y);\n        } else {\n          context2d.lineTo(pos.x, pos.y);\n        }\n      }\n      if (cur.closed) {\n        context2d.lineTo(firstPos.x, firstPos.y);\n      }\n      temp = last;\n      last = cur;\n      cur = temp;\n    });\n    if (last.strokeStyle !== undefined) {\n      context2d.stroke();\n    }\n  };\n\n  this._init(arg);\n  return this;\n};\n\ninherit(canvas_lineFeature, lineFeature);\n\n// Now register it\nvar capabilities = {};\ncapabilities[lineFeature.capabilities.basic] = true;\ncapabilities[lineFeature.capabilities.multicolor] = false;\n\nregisterFeature('canvas', 'line', canvas_lineFeature, capabilities);\n\nmodule.exports = canvas_lineFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/lineFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar pixelmapFeature = require('../pixelmapFeature');\n\n/**\n * Create a new instance of class pixelmapFeature.\n *\n * @class\n * @alias geo.canvas.pixelmapFeature\n * @extends geo.pixelmapFeature\n * @param {geo.pixelmapFeature.spec} arg\n * @returns {geo.canvas.pixelmapFeature}\n */\nvar canvas_pixelmapFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof canvas_pixelmapFeature)) {\n    return new canvas_pixelmapFeature(arg);\n  }\n  pixelmapFeature.call(this, arg);\n\n  var object = require('./object');\n  object.call(this);\n\n  this._init(arg);\n  return this;\n};\n\ninherit(canvas_pixelmapFeature, pixelmapFeature);\n\n// Now register it\nregisterFeature('canvas', 'pixelmap', canvas_pixelmapFeature);\nmodule.exports = canvas_pixelmapFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/pixelmapFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar quadFeature = require('../quadFeature');\nvar util = require('../util');\n\n/**\n * Create a new instance of class quadFeature.\n *\n * @class\n * @alias geo.canvas.quadFeature\n * @param {geo.quadFeature.spec} arg Options object.\n * @extends geo.quadFeature\n * @returns {geo.canvas.quadFeature}\n */\nvar canvas_quadFeature = function (arg) {\n  'use strict';\n\n  if (!(this instanceof canvas_quadFeature)) {\n    return new canvas_quadFeature(arg);\n  }\n  quadFeature.call(this, arg);\n\n  var object = require('./object');\n  object.call(this);\n\n  var $ = require('jquery');\n\n  var m_this = this,\n      s_exit = this._exit,\n      s_init = this._init,\n      s_update = this._update,\n      m_quads;\n\n  /**\n   * Build this feature.\n   */\n  this._build = function () {\n    if (!m_this.position()) {\n      return;\n    }\n    m_quads = this._generateQuads();\n\n    if (m_quads.imgQuads) {\n      m_quads.imgQuads.sort(function (a, b) {\n        return a.pos[2] - b.pos[2];\n      });\n    }\n    m_this.buildTime().modified();\n  };\n\n  /**\n   * When any quad may have changed, ask for a animation frame callback so we\n   * can update the quad on the next animation cycle.\n   *\n   * This is called when a video qaud may have changed play state.\n   * @param {object} quad The quad record that triggered this.\n   * @param {jQuery.Event} [evt] The event that triggered this.\n   */\n  this._checkQuadUpdate = function (quad, evt) {\n    m_this.layer().map().scheduleAnimationFrame(m_this._checkIfChanged);\n  };\n\n  /**\n   * Check if any video quads are changing or need rerendering.  If any are\n   * changing (because they are seeking), defer rendering and check again.  If\n   * any need rendering, schedule it.\n   */\n  this._checkIfChanged = function () {\n    if (!m_quads || !m_quads.vidQuads || !m_quads.vidQuads.length) {\n      return;\n    }\n    var render = false, changing = false;\n\n    $.each(m_quads.vidQuads, function (idx, quad) {\n      if (quad.video && quad.video.HAVE_CURRENT_DATA !== undefined) {\n        if (!quad.video.seeking && quad.video.readyState >= quad.video.HAVE_CURRENT_DATA) {\n          render = true;\n        }\n        if (!quad.video.paused || quad.video.seeking) {\n          changing = true;\n        }\n      }\n    });\n    if (render) {\n      m_this.renderer()._render();\n    }\n    if (changing) {\n      m_this.layer().map().scheduleAnimationFrame(m_this._checkIfChanged);\n    }\n  };\n\n  /**\n   * Render all of the color quads.\n   *\n   * @param {CanvasRenderingContext2D} context2d The rendering context.\n   * @param {geo.map} map The current renderer's parent map.\n   */\n  this._renderColorQuads = function (context2d, map) {\n    if (!m_quads.clrQuads || !m_quads.clrQuads.length) {\n      return;\n    }\n    var oldAlpha = context2d.globalAlpha;\n    var opacity = oldAlpha;\n    $.each(m_quads.clrQuads, function (idx, quad) {\n      var p0 = map.gcsToDisplay({x: quad.pos[0], y: quad.pos[1]}, null),\n          p1 = map.gcsToDisplay({x: quad.pos[3], y: quad.pos[4]}, null),\n          p2 = map.gcsToDisplay({x: quad.pos[6], y: quad.pos[7]}, null),\n          p3 = map.gcsToDisplay({x: quad.pos[9], y: quad.pos[10]}, null);\n      if (quad.opacity !== opacity) {\n        opacity = quad.opacity;\n        context2d.globalAlpha = opacity;\n      }\n      context2d.fillStyle = util.convertColorToHex(quad.color, true);\n      context2d.beginPath();\n      context2d.moveTo(p0.x, p0.y);\n      context2d.lineTo(p1.x, p1.y);\n      context2d.lineTo(p3.x, p3.y);\n      context2d.lineTo(p2.x, p2.y);\n      context2d.closePath();\n      context2d.fill();\n    });\n    if (opacity !== oldAlpha) {\n      context2d.globalAlpha = oldAlpha;\n    }\n  };\n\n  /**\n   * Render all of the image and video quads.\n   *\n   * @param {CanvasRenderingContext2D} context2d The rendering context.\n   * @param {geo.map} map The current renderer's parent map.\n   */\n  this._renderImageAndVideoQuads = function (context2d, map) {\n    if ((!m_quads.imgQuads || !m_quads.imgQuads.length) &&\n        (!m_quads.vidQuads || !m_quads.vidQuads.length)) {\n      return;\n    }\n\n    var oldAlpha = context2d.globalAlpha;\n    var opacity = oldAlpha;\n    $.each([m_quads.imgQuads, m_quads.vidQuads], function (listidx, quadlist) {\n      if (!quadlist) {\n        return;\n      }\n      $.each(quadlist, function (idx, quad) {\n        var src, w, h;\n        if (quad.image) {\n          src = quad.image;\n          w = src.width;\n          h = src.height;\n        } else if (quad.video) {\n          src = quad.video;\n          w = src.videoWidth;\n          h = src.videoHeight;\n          if (src.seeking) {\n            return;\n          }\n        }\n        if (!src || !w || !h || quad.opacity <= 0) {\n          return;\n        }\n        // Canvas transform is affine, so quad has to be a parallelogram\n        // Also, canvas has no way to render z.\n        var p0 = map.gcsToDisplay({x: quad.pos[0], y: quad.pos[1]}, null),\n            p2 = map.gcsToDisplay({x: quad.pos[6], y: quad.pos[7]}, null),\n            p3 = map.gcsToDisplay({x: quad.pos[9], y: quad.pos[10]}, null);\n        context2d.setTransform((p3.x - p2.x) / w, (p3.y - p2.y) / w,\n                               (p0.x - p2.x) / h, (p0.y - p2.y) / h,\n                               p2.x, p2.y);\n        if (quad.opacity !== opacity) {\n          opacity = quad.opacity;\n          context2d.globalAlpha = opacity;\n        }\n        if (!quad.crop) {\n          context2d.drawImage(src, 0, 0);\n        } else {\n          var cropx = Math.min(src.w, quad.crop.x),\n              cropy = Math.min(src.h, quad.crop.y);\n          if (cropx > 0 && cropy > 0) {\n            context2d.drawImage(src, 0, 0, cropx, cropy, 0, 0, cropx, cropy);\n          }\n        }\n      });\n    });\n    if (opacity !== oldAlpha) {\n      context2d.globalAlpha = oldAlpha;\n    }\n    context2d.setTransform(1, 0, 0, 1, 0, 0);\n  };\n\n  /**\n   * If this returns true, the render will be skipped and tried again on the\n   * next animation frame.\n   *\n   * @returns {boolean} Truthy to delay rendering.\n   */\n  this._delayRender = function () {\n    var delay = false;\n    if (m_quads && m_quads.vidQuads && m_quads.vidQuads.length) {\n      $.each(m_quads.vidQuads, function (idx, quad) {\n        if (quad.video && quad.video.HAVE_CURRENT_DATA !== undefined) {\n          delay |= (quad.video.seeking && quad.delayRenderWhenSeeking);\n        }\n      });\n    }\n    return delay;\n  };\n\n  /**\n   * Render all of the quads.\n   *\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {geo.map} map The current renderer's parent map.\n   */\n  this._renderOnCanvas = function (context, map) {\n    if (m_quads) {\n      this._renderImageAndVideoQuads(context, map);\n      this._renderColorQuads(context, map);\n    }\n  };\n\n  /**\n   * Update.\n   */\n  this._update = function () {\n    s_update.call(m_this);\n    if (m_this.buildTime().timestamp() <= m_this.dataTime().timestamp() ||\n        m_this.updateTime().timestamp() < m_this.timestamp()) {\n      m_this._build();\n    }\n\n    m_this.updateTime().modified();\n    m_this.layer().map().scheduleAnimationFrame(m_this._checkIfChanged);\n  };\n\n  /**\n   * Initialize.\n   */\n  this._init = function () {\n    s_init.call(m_this, arg);\n  };\n\n  /**\n   * Destroy.\n   */\n  this._exit = function () {\n\n    s_exit.call(m_this);\n  };\n\n  m_this._init(arg);\n  return this;\n};\n\ninherit(canvas_quadFeature, quadFeature);\n\n// Now register it\nvar capabilities = {};\ncapabilities[quadFeature.capabilities.color] = true;\ncapabilities[quadFeature.capabilities.image] = true;\ncapabilities[quadFeature.capabilities.imageCrop] = true;\ncapabilities[quadFeature.capabilities.imageFixedScale] = true;\ncapabilities[quadFeature.capabilities.imageFull] = false;\ncapabilities[quadFeature.capabilities.canvas] = true;\ncapabilities[quadFeature.capabilities.video] = true;\n\nregisterFeature('canvas', 'quad', canvas_quadFeature, capabilities);\nmodule.exports = canvas_quadFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/quadFeature.js","var inherit = require('../inherit');\nvar registerFeature = require('../registry').registerFeature;\nvar textFeature = require('../textFeature');\nvar util = require('../util');\nvar mat3 = require('gl-mat3');\nvar vec3 = require('gl-vec3');\n\n/**\n * Create a new instance of class canvas.textFeature.\n *\n * @class\n * @alias geo.canvas.textFeature\n * @extends geo.textFeature\n * @extends geo.canvas.object\n *\n * @param {geo.textFeature.spec} [arg] Options for the feature.\n * @returns {geo.canvas.textFeature} The created feature.\n */\nvar canvas_textFeature = function (arg) {\n  'use strict';\n  if (!(this instanceof canvas_textFeature)) {\n    return new canvas_textFeature(arg);\n  }\n\n  var object = require('./object');\n\n  arg = arg || {};\n  textFeature.call(this, arg);\n  object.call(this);\n\n  /**\n   * @private\n   */\n  var m_this = this,\n      m_defaultFont = 'bold 16px sans-serif',\n      /* This regexp parses css font specifications into style, variant,\n       * weight, stretch, size, line height, and family.  It is based on a\n       * regexp here: https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font,\n       * but has been modified to fix some issues and handle font stretch. */\n      m_cssFontRegExp = new RegExp(\n        '^\\\\s*' +\n        '(?=(?:(?:[-a-z0-9]+\\\\s+){0,3}(italic|oblique))?)' +\n        '(?=(?:(?:[-a-z0-9]+\\\\s+){0,3}(small-caps))?)' +\n        '(?=(?:(?:[-a-z0-9]+\\\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)' +\n        '(?=(?:(?:[-a-z0-9]+\\\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)' +\n        '(?:(?:normal|\\\\1|\\\\2|\\\\3|\\\\4)\\\\s+){0,4}' +\n        '((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))' +\n        '(?:/(normal|[.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])))?\\\\s+' +\n        '([-,\\\\\"\\\\sa-z]+?)\\\\s*$', 'i');\n\n  /**\n   * Get the font for a specific data item.  This falls back to the default\n   * font if the value is unset or doesn't contain sufficient information.\n   *\n   * @param {boolean} useSubValues If truthy, check all font styles (such as\n   *    `fontSize`, `lineHeight`, etc., and override the code `font` style\n   *    with those values.  If falsy, only use `font`.\n   * @param {object} d The current data element.\n   * @param {number} i The index of the current data element.\n   * @returns {string} The font style.\n   */\n  this.getFontFromStyles = function (useSubValues, d, i) {\n    var font = m_this.style.get('font')(d, i) || m_defaultFont;\n    if (useSubValues) {\n      var parts = m_cssFontRegExp.exec(font);\n      if (parts === null) {\n        parts = m_cssFontRegExp.exec(m_defaultFont);\n      }\n      parts[1] = m_this.style.get('fontStyle')(d, i) || parts[1];\n      parts[2] = m_this.style.get('fontVariant')(d, i) || parts[2];\n      parts[3] = m_this.style.get('fontWeight')(d, i) || parts[3];\n      parts[4] = m_this.style.get('fontStretch')(d, i) || parts[4];\n      parts[5] = m_this.style.get('fontSize')(d, i) || parts[5] || '16px';\n      parts[6] = m_this.style.get('lineHeight')(d, i) || parts[6];\n      parts[7] = m_this.style.get('fontFamily')(d, i) || parts[7] || 'sans-serif';\n      font = (parts[1] || '') + ' ' + (parts[2] || '') + ' ' +\n             (parts[3] || '') + ' ' + (parts[4] || '') + ' ' +\n             (parts[5] || '') + (parts[6] ? '/' + parts[6] : '') + ' ' +\n             parts[7];\n      font = font.trim().replace(/\\s\\s+/g, ' ');\n    }\n    return font;\n  };\n\n  /**\n   * Render the data on the canvas.\n   *\n   * This does not currently support multiline text or word wrapping, since\n   * canvas doesn't implement that directly.  To support these, each text item\n   * would need to be split on line breaks, and have the width of the text\n   * calculated with context2d.measureText to determine word wrapping.  This\n   * would also need to calculate the effective line height from the font\n   * specification.\n   *\n   * @protected\n   * @param {CanvasRenderingContext2D} context2d The canvas context to draw in.\n   * @param {geo.map} map The parent map object.\n   */\n  this._renderOnCanvas = function (context2d, map) {\n    var data = m_this.data(),\n        posFunc = m_this.style.get('position'),\n        renderThreshold = m_this.style.get('renderThreshold')(data),\n        textFunc = m_this.style.get('text'),\n        mapRotation = map.rotation(),\n        mapZoom = map.zoom(),\n        mapSize = map.size(),\n        fontFromSubValues, text, posArray, pos, visible, color, blur, stroke,\n        width, rotation, rotateWithMap, scale, offset,\n        transform, lastTransform = util.mat3AsArray();\n\n    /* If any of the font styles other than `font` have values, then we need to\n     * construct a single font value from the subvalues.  Otherwise, we can\n     * skip it. */\n    fontFromSubValues = [\n      'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize',\n      'lineHeight', 'fontFamily'\n    ].some(function (key) {\n      return m_this.style(key) !== null && m_this.style(key) !== undefined;\n    });\n    /* Clear the canvas property buffer */\n    m_this._canvasProperty();\n    posArray = m_this.featureGcsToDisplay(data.map(posFunc));\n    data.forEach(function (d, i) {\n      /* If the position is far enough outside of the map viewport, don't\n       * render it, even if the offset of size would be sufficient to make it\n       * appear in the viewport. */\n      pos = posArray[i];\n      if (renderThreshold > 0 && (\n        pos.x < -renderThreshold || pos.x > mapSize.width + renderThreshold ||\n        pos.y < -renderThreshold || pos.y > mapSize.height + renderThreshold)) {\n        return;\n      }\n      visible = m_this.style.get('visible')(d, i);\n      if (!visible && visible !== undefined) {\n        return;\n      }\n      color = util.convertColorAndOpacity(\n        m_this.style.get('color')(d, i), m_this.style.get('textOpacity')(d, i));\n      stroke = util.convertColorAndOpacity(\n        m_this.style.get('textStrokeColor')(d, i), m_this.style.get('textOpacity')(d, i), {r: 0, g: 0, b: 0, a: 0});\n      if (color.a === 0 && stroke.a === 0) {\n        return;\n      }\n      m_this._canvasProperty(context2d, 'fillStyle', util.convertColorToRGBA(color));\n      text = textFunc(d, i);\n      m_this._canvasProperty(context2d, 'font', m_this.getFontFromStyles(fontFromSubValues, d, i));\n      m_this._canvasProperty(context2d, 'textAlign', m_this.style.get('textAlign')(d, i) || 'center');\n      m_this._canvasProperty(context2d, 'textBaseline', m_this.style.get('textBaseline')(d, i) || 'middle');\n      /* rotation, scale, and offset */\n      rotation = m_this.style.get('rotation')(d, i) || 0;\n      rotateWithMap = m_this.style.get('rotateWithMap')(d, i) && mapRotation;\n      scale = m_this.style.get('textScaled')(d, i);\n      scale = util.isNonNullFinite(scale) ? Math.pow(2, mapZoom - scale) : null;\n      offset = m_this.style.get('offset')(d, i);\n      transform = util.mat3AsArray();\n      if (rotation || rotateWithMap || (scale && scale !== 1) || (offset && (offset.x || offset.y))) {\n        mat3.translate(transform, transform, [pos.x, pos.y]);\n        if (rotateWithMap && mapRotation) {\n          mat3.rotate(transform, transform, mapRotation);\n        }\n        mat3.translate(transform, transform, [\n          offset && offset.x ? +offset.x : 0,\n          offset && offset.y ? +offset.y : 0]);\n        if (rotation) {\n          mat3.rotate(transform, transform, rotation);\n        }\n        if (scale && scale !== 1) {\n          mat3.scale(transform, transform, [scale, scale]);\n        }\n        mat3.translate(transform, transform, [-pos.x, -pos.y]);\n      }\n      if (lastTransform[0] !== transform[0] || lastTransform[1] !== transform[1] ||\n          lastTransform[3] !== transform[3] || lastTransform[4] !== transform[4] ||\n          lastTransform[6] !== transform[6] || lastTransform[7] !== transform[7]) {\n        context2d.setTransform(transform[0], transform[1], transform[3], transform[4], transform[6], transform[7]);\n        mat3.copy(lastTransform, transform);\n      }\n      /* shadow */\n      color = util.convertColorAndOpacity(\n        m_this.style.get('shadowColor')(d, i), undefined, {r: 0, g: 0, b: 0, a: 0});\n      if (color.a) {\n        offset = m_this.style.get('shadowOffset')(d, i);\n        blur = m_this.style.get('shadowBlur')(d, i);\n      }\n      if (color.a && ((offset && (offset.x || offset.y)) || blur)) {\n        m_this._canvasProperty(context2d, 'shadowColor', util.convertColorToRGBA(color));\n        if (offset && (rotation || rotateWithMap) && m_this.style.get('shadowRotate')(d, i)) {\n          transform = [+offset.x, +offset.y, 0];\n          vec3.rotateZ(transform, transform, [0, 0, 0],\n                       rotation + (rotateWithMap ? mapRotation : 0));\n          offset = {x: transform[0], y: transform[1]};\n        }\n        m_this._canvasProperty(context2d, 'shadowOffsetX', offset && offset.x ? +offset.x : 0);\n        m_this._canvasProperty(context2d, 'shadowOffsetY', offset && offset.y ? +offset.y : 0);\n        m_this._canvasProperty(context2d, 'shadowBlur', blur || 0);\n      } else {\n        m_this._canvasProperty(context2d, 'shadowColor', 'rgba(0,0,0,0)');\n      }\n      /* draw the text */\n      if (stroke.a) {\n        width = m_this.style.get('textStrokeWidth')(d, i);\n        if (isFinite(width) && width > 0) {\n          m_this._canvasProperty(context2d, 'strokeStyle', util.convertColorToRGBA(stroke));\n          m_this._canvasProperty(context2d, 'lineWidth', width);\n          context2d.strokeText(text, pos.x, pos.y);\n          m_this._canvasProperty(context2d, 'shadowColor', 'rgba(0,0,0,0)');\n        }\n      }\n      context2d.fillText(text, pos.x, pos.y);\n    });\n    m_this._canvasProperty(context2d, 'globalAlpha', 1);\n    context2d.setTransform(1, 0, 0, 1, 0, 0);\n  };\n\n  return this;\n};\n\ninherit(canvas_textFeature, textFeature);\n\n// Now register it\nvar capabilities = {};\n\nregisterFeature('canvas', 'text', canvas_textFeature, capabilities);\n\nmodule.exports = canvas_textFeature;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/textFeature.js","var registerLayerAdjustment = require('../registry').registerLayerAdjustment;\n\nvar canvas_tileLayer = function () {\n  'use strict';\n  var m_this = this,\n      s_init = this._init,\n      s_exit = this._exit,\n      m_quadFeature,\n      m_nextTileId = 0,\n      m_tiles = [];\n\n  /* Add a tile to the list of quads */\n  this._drawTile = function (tile) {\n    if (!m_quadFeature) {\n      return;\n    }\n    var bounds = this._tileBounds(tile),\n        level = tile.index.level || 0,\n        to = this._tileOffset(level),\n        crop = this.tileCropFromBounds(tile),\n        quad = {};\n    if (crop) {\n      quad.crop = crop;\n    }\n    quad.ul = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.ll = this.fromLocal(this.fromLevel({\n      x: bounds.left - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    quad.ur = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.top - to.y\n    }, level), 0);\n    quad.lr = this.fromLocal(this.fromLevel({\n      x: bounds.right - to.x, y: bounds.bottom - to.y\n    }, level), 0);\n    quad.ul.z = quad.ll.z = quad.ur.z = quad.lr.z = level * m_this._levelZIncrement;\n    m_nextTileId += 1;\n    quad.id = m_nextTileId;\n    tile.quadId = quad.id;\n    quad.image = tile.image;\n    m_tiles.push(quad);\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n    m_this.draw();\n  };\n\n  /* Remove the tile feature. */\n  this._remove = function (tile) {\n    if (tile.quadId !== undefined && m_quadFeature) {\n      for (var i = 0; i < m_tiles.length; i += 1) {\n        if (m_tiles[i].id === tile.quadId) {\n          m_tiles.splice(i, 1);\n          break;\n        }\n      }\n      m_quadFeature.data(m_tiles);\n      m_quadFeature._update();\n      m_this.draw();\n    }\n  };\n\n  /**\n   * Clean up the layer.\n   */\n  this._exit = function () {\n    m_this.deleteFeature(m_quadFeature);\n    m_quadFeature = null;\n    m_tiles = [];\n    s_exit.apply(m_this, arguments);\n  };\n\n  /**\n   * Initialize after the layer is added to the map.\n   */\n  this._init = function () {\n    s_init.apply(m_this, arguments);\n    m_quadFeature = this.createFeature('quad', {\n      previewColor: m_this._options.previewColor,\n      previewImage: m_this._options.previewImage\n    });\n    m_quadFeature.geoTrigger = undefined;\n    m_quadFeature.gcs(m_this._options.gcs || m_this.map().gcs());\n    m_quadFeature.data(m_tiles);\n    m_quadFeature._update();\n  };\n\n  /* These functions don't need to do anything. */\n  this._getSubLayer = function () {};\n  this._updateSubLayers = undefined;\n};\n\nregisterLayerAdjustment('canvas', 'tile', canvas_tileLayer);\nmodule.exports = canvas_tileLayer;\n\n\n\n// WEBPACK FOOTER //\n// ./canvas/tileLayer.js","/**\n * @namespace geo.gui\n */\nmodule.exports = {\n  colorLegendWidget: require('./colorLegendWidget'),\n  domWidget: require('./domWidget'),\n  legendWidget: require('./legendWidget'),\n  scaleWidget: require('./scaleWidget'),\n  sliderWidget: require('./sliderWidget'),\n  svgWidget: require('./svgWidget'),\n  uiLayer: require('./uiLayer'),\n  widget: require('./widget')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ui/index.js","var d3 = require('../d3/d3Renderer').d3;\nvar domWidget = require('./domWidget');\nvar inherit = require('../inherit');\nvar registerWidget = require('../registry').registerWidget;\nvar util = require('../util');\nvar uniqueID = require('../d3/uniqueID');\n\nrequire('./colorLegendWidget.styl');\n\n/**\n * @typedef {object} geo.gui.colorLegendWidget.category\n * @property {string} name The text label of the legend.\n * @property {string} type The type of the legend, either discrete or continuous.\n * @property {string} scale The scale of the legend. For discrete type,\n * linear, log, sqrt, pow, ordinal, and quantile is supported.\n * For continuous type, linear, log, sqrt, and pow is supported.\n * @property {number[]|string[]} domain Only for ordinal scale legend, string\n * values are acceptable. For ordinal legend, the number in the domain array\n * should be the same number of colors. For quantile scale legend, the domain\n * should be an array of all values. For other scales, the domain needs to be\n * an array of two number for marking the upper bound and lower bound.\n * This domain property will be used with d3 scale object internally.\n * @property {geo.geoColor[]} colors The colors of the legend.\n * All valid svg color can be used. For discrete type, multiple values\n * are accepted. For continuous type, an array of two values is supported.\n * @property {number} [base] The base of log when log scale is used.\n * default to 10.\n * @property {number} [exponent] The exponent of power when power scale is used.\n * default to 1.\n * @property {boolean} [endAxisLabelOnly] Only show left most and right most\n * axis label\n * default to null.\n */\n\n/**\n * A UI widget that enables display discrete colors or two-color continuous\n *  transition legend.\n *\n * @class\n * @alias geo.gui.colorLegendWidget\n * @extends geo.gui.domWidget\n * @param {object} [arg] Widget options.\n * @param {geo.gui.widget.position} [arg.position] Position setting relatively to the map\n * container.\n * @param {geo.gui.colorLegendWidget.category[]} [arg.categories] An array\n * of category definitions for the initial color legends\n * @param {number} [arg.width=300] The width of the widget in pixels.\n * @param {number} [arg.ticks=6] The maximum number of ticks on the axis of a legend, default is 6.\n * @returns {geo.gui.colorLegendWidget}\n */\nvar colorLegendWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof colorLegendWidget)) {\n    return new colorLegendWidget(arg);\n  }\n\n  domWidget.call(this, arg);\n\n  var m_this = this,\n      m_categories = [],\n      m_width = arg.width || 300,\n      m_ticks = arg.ticks || 6,\n      s_init = this._init;\n  // get the widget container ready\n  this._init = function () {\n    s_init();\n    var canvas = m_this.canvas();\n    d3.select(canvas)\n      .attr('class', 'color-legend-container');\n\n    m_this.popup = d3.select(canvas).append('div')\n      .attr('class', 'color-legend-popup');\n\n    if (arg.categories) {\n      this.categories(arg.categories);\n    }\n  };\n\n  /**\n   * Clear the DOM container and create legends.\n   */\n  this._draw = function () {\n    d3.select(m_this.canvas()).selectAll('div.geojs-color-legends').remove();\n\n    if (!m_categories.length) {\n      d3.select(m_this.canvas()).style('display', 'none');\n      return;\n    } else {\n      d3.select(m_this.canvas()).style('display', 'block');\n    }\n\n    var container = d3.select(m_this.canvas())\n      .append('div')\n      .attr('class', 'geojs-color-legends');\n\n    var width = m_width;\n    var margin = 20;\n\n    m_categories.forEach(function (category, index) {\n      var legendContainer = container\n        .append('div')\n        .attr('class', 'geojs-color-legend');\n\n      legendContainer\n        .append('div')\n        .attr('class', 'geojs-title')\n        .text(category.name);\n\n      var legendSvg = legendContainer\n        .append('svg')\n        .attr({\n          'class': 'svg',\n          'width': width,\n          'height': '40px',\n          'viewBox': -margin + ' 0 ' + width + ' 40'\n        });\n\n      if (category.type === 'discrete') {\n        m_this._drawDiscrete(legendSvg, width - 2 * margin, category);\n      } else if (category.type === 'continuous') {\n        m_this._drawContinous(legendSvg, width - 2 * margin, category);\n      }\n    });\n\n  };\n\n  /**\n   * Set or get categories.\n   * @param {geo.gui.colorLegendWidget.category[]} [categories] If `undefined`,\n   * return the current legend categories array. If an array is provided,\n   * remove current legends and recreate with the new categories.\n   * @returns {geo.gui.colorLegendWidget.category[]|this}\n   * The current list of categories or the current class instance.\n   */\n  this.categories = function (categories) {\n    if (categories === undefined) {\n      return m_categories;\n    }\n    m_categories = this._prepareCategories(categories);\n    this._draw();\n    return this;\n  };\n\n  /**\n   * Add additional categories.\n   * @param {geo.gui.colorLegendWidget.category[]} categories Append additional\n   * legend categories to the end the of the current list of legends.\n   * @returns {this} The current class instance.\n   */\n  this.addCategories = function (categories) {\n    m_categories = m_categories.concat(this._prepareCategories(categories));\n    this._draw();\n    return this;\n  };\n\n  /**\n   * Remove categories.\n   *\n   * @param {geo.gui.colorLegendWidget.category[]} categories If a category\n   * object exists in the current legend categories, that category will be\n   * removed.\n   * @returns {this} The current class instance.\n   */\n  this.removeCategories = function (categories) {\n    m_categories = m_categories.filter(function (category) {\n      return categories.indexOf(category) === -1;\n    });\n    this._draw();\n    return this;\n  };\n\n  /**\n   * This function normalize color input string with the utility function. It modifies the original object.\n   * @param {geo.gui.colorLegendWidget.category[]} categories The categories\n   * @returns {geo.gui.colorLegendWidget.category[]} prepared categories\n   */\n  this._prepareCategories = function (categories) {\n    categories.forEach(function (category) {\n      category.color = category.colors.map(function (color) {\n        return util.convertColorToHex(color, true);\n      });\n    });\n    return categories;\n  };\n\n  /**\n   * Draw an individual discrete type legend.\n   * @param {Element} svg svg element that the legend will be drawn\n   * @param {number} width width of the svg element in pixel\n   * @param {geo.gui.colorLegendWidget.category} category The discrete type legend category\n   */\n  this._drawDiscrete = function (svg, width, category) {\n    if (['linear', 'log', 'sqrt', 'pow', 'quantile', 'ordinal'].indexOf(category.scale) === -1) {\n      throw new Error('unsupported scale');\n    }\n    var valueRange, valueScale, colorScale, axisScale, axis, steps, ticks;\n    if (category.scale === 'ordinal') {\n      colorScale = d3.scale.ordinal()\n        .domain(category.domain)\n        .range(category.colors);\n      m_this._renderDiscreteColors(\n        svg, category.domain, colorScale, width, function (d) { return d; });\n\n      axisScale = d3.scale.ordinal()\n        .domain(category.domain)\n        .rangeRoundBands([0, width]);\n      axis = d3.svg.axis()\n        .scale(axisScale)\n        .tickValues(function () {\n          var skip = Math.ceil(category.domain.length / m_ticks);\n          return category.domain\n            .filter(function (d, i) { return i % skip === 0; });\n        });\n    } else if (category.scale === 'quantile') {\n      valueRange = [0, category.colors.length];\n      steps = util.range(0, category.colors.length - 1);\n      valueScale = d3.scale.quantile().domain(category.domain).range(steps);\n      colorScale = d3.scale.quantize().domain(valueRange).range(category.colors);\n      m_this._renderDiscreteColors(svg, steps, colorScale, width, function (d) {\n        return valueScale.invertExtent(d).join(' - ');\n      });\n\n      var axisDomain = [valueScale.invertExtent(0)[0]];\n      axisDomain = axisDomain.concat(steps.map(\n        function (step) { return valueScale.invertExtent(step)[1]; }));\n\n      axisScale = d3.scale.ordinal()\n        .domain(axisDomain)\n        .rangePoints([0, width]);\n      axis = createAxis(axisScale);\n    } else if (['linear', 'log', 'sqrt', 'pow'].indexOf(category.scale) !== -1) {\n      valueRange = [0, category.colors.length];\n      valueScale = d3.scale[category.scale]()\n        .domain(category.domain).range(valueRange).nice();\n      colorScale = d3.scale.quantize().domain(valueRange).range(category.colors);\n      steps = util.range(0, category.colors.length - 1);\n      var precision = Math.max.apply(null, category.domain\n        .map(function (number) { return getPrecision(number); }));\n      m_this._renderDiscreteColors(svg, steps, colorScale, width, function (d) {\n        return m_this._popupFormatter(valueScale.invert(d), precision)\n          + ' - ' + m_this._popupFormatter(valueScale.invert(d + 1), precision);\n      });\n\n      ticks = steps.slice();\n      ticks.push(category.colors.length);\n      axisScale = d3.scale.ordinal()\n        .domain(ticks.map(function (tick) {\n          return valueScale.invert(tick);\n        }))\n        .rangePoints([0, width]);\n      axis = createAxis(axisScale);\n    }\n    if (category.endAxisLabelOnly) {\n      axis.tickValues([axisScale.domain()[0], axisScale.domain()[axisScale.domain().length - 1]]);\n    }\n    m_this._renderAxis(svg, axis);\n\n    /**\n     * Render the d3 axis object based on the axis d3 Scale.\n     * @param {object} axisScale d3 scale object\n     * @returns {object} d3 axis object\n     */\n    function createAxis(axisScale) {\n      return d3.svg.axis()\n        .scale(axisScale)\n        .tickFormat(d3.format('.2s'))\n        .tickValues(function () {\n          var skip = Math.ceil(axisScale.domain().length / m_ticks);\n          return axisScale.domain().filter(function (d, i) { return i % skip === 0; });\n        });\n    }\n  };\n\n  /**\n   * Render colors for discrete type with d3.\n   * @param {Element} svg svg element that the legend will be drawn\n   * @param {number[]} steps discrete input scale domain for d3 scale\n   * @param {object} colorScale d3 scale for transform input into color\n   * @param {number} width width of the svg element in pixel\n   * @param {function} getValue function that transforms raw domain into desired discrete range\n   */\n  this._renderDiscreteColors = function (svg, steps, colorScale, width, getValue) {\n    svg.selectAll('rect')\n      .data(steps)\n      .enter()\n      .append('rect')\n      .attr('width', width / steps.length)\n      .attr('height', '20px')\n      .attr('fill', function (d) {\n        return colorScale(d);\n      })\n      .attr('transform', function (d, i) {\n        return 'translate(' + i * width / steps.length + ' ,0)';\n      })\n      .on('mousemove', function (d) {\n        m_this._showPopup(getValue(d));\n      })\n      .on('mouseout', m_this._hidePopup);\n  };\n\n  /**\n   * Draw an individual continous type legend.\n   * @param {Element} svg svg element that the legend will be drawn\n   * @param {number} width width of the svg element in pixel\n   * @param {geo.gui.colorLegendWidget.category} category The continuous type legend category\n   */\n  this._drawContinous = function (svg, width, category) {\n    var axisScale, axis, i;\n    if (['linear', 'log', 'sqrt', 'pow'].indexOf(category.scale) === -1) {\n      throw new Error('unsupported scale');\n    }\n    var range = [0];\n    for (i = 1; i < category.domain.length - 1; i++) {\n      range.push((width / (category.domain.length - 1) * i));\n    }\n    range.push(width);\n    axisScale = d3.scale[category.scale]().domain(category.domain).range(range).nice();\n    if (category.scale === 'log' && category.base) {\n      axisScale.base(category.base);\n    }\n    if (category.scale === 'pow' && category.exponent) {\n      axisScale.exponent(category.exponent);\n    }\n    var id = uniqueID();\n    var precision = Math.max.apply(null, category.domain\n      .map(function (number) { return getPrecision(number); }));\n\n    var gradient = svg\n      .append('defs')\n      .append('linearGradient')\n      .attr('id', 'gradient' + id);\n    gradient.append('stop')\n      .attr('offset', '0%')\n      .attr('stop-color', category.colors[0]);\n    for (i = 1; i < category.colors.length - 1; i++) {\n      gradient.append('stop')\n        .attr('offset', (100 / (category.colors.length - 1) * i).toFixed(6) + '%')\n        .attr('stop-color', category.colors[i]);\n    }\n    gradient.append('stop')\n      .attr('offset', '100%')\n      .attr('stop-color', category.colors[category.colors.length - 1]);\n    svg.append('rect')\n      .attr('fill', 'url(#gradient' + id + ')')\n      .attr('width', width)\n      .attr('height', '20px')\n      .on('mousemove', function () {\n        var value = axisScale.invert(d3.mouse(this)[0]);\n        var text = m_this._popupFormatter(value, precision);\n        m_this._showPopup(text);\n      })\n      .on('mouseout', m_this._hidePopup);\n\n    axis = d3.svg.axis()\n      .scale(axisScale)\n      .ticks(m_ticks, '.2s');\n    if (category.endAxisLabelOnly) {\n      axis.tickValues([category.domain[0], category.domain[category.domain.length - 1]]);\n    }\n    this._renderAxis(svg, axis);\n  };\n\n  /**\n   * Actually render the axis with d3.\n   * @param {Element} svg svg element that the axis will be drawn\n   * @param {object} axis d3 axis object\n   */\n  this._renderAxis = function (svg, axis) {\n    svg.append('g')\n      .attr('class', 'axis x')\n      .attr('transform', 'translate(0, 20)')\n      .call(function (g) {\n        g.call(axis);\n      });\n  };\n\n  /**\n   * Formatter of number that tries to maximize the precision\n   * while making the output shorter.\n   * @param {number} number to be formatted\n   * @param {number} precision maximum number of decimal places that are kept\n   * @returns {string} formatted string output\n   */\n  this._popupFormatter = function (number, precision) {\n    number = parseFloat(number.toFixed(8));\n    precision = Math.min(precision, getPrecision(number));\n    precision = Math.min(precision, Math.max(3, 7 - Math.trunc(number).toString().length));\n    return d3.format('.' + precision + 'f')(number);\n  };\n\n  /**\n   * Show the popup based on current mouse event.\n   * @param {string} text content to be shown in the popup\n   */\n  this._showPopup = function (text) {\n    // The cursor location relative to the container\n    var offset = d3.mouse(m_this.canvas());\n    m_this.popup\n      .text(text);\n    var containerWidth = m_this.canvas().clientWidth;\n    var popupWidth = m_this.popup[0][0].clientWidth;\n    m_this.popup\n      .style({\n        // If the popup will be longer or almost longer than the container\n        'left': offset[0] - (offset[0] +\n          popupWidth - containerWidth > -10 ? popupWidth : 0) + 'px',\n        'top': (offset[1] - 22) + 'px'\n      })\n      .transition()\n      .duration(200)\n      .style('opacity', 1);\n  };\n\n  /**\n   * Hide the popup.\n   */\n  this._hidePopup = function () {\n    m_this.popup.transition()\n      .duration(200)\n      .style('opacity', 0);\n  };\n\n  return this;\n};\n\n/**\n * Get the number of decimals of a number.\n *\n * @private\n * @param {number} number the number input\n * @returns {number} the number of decimal\n */\nfunction getPrecision(number) {\n  if (!isFinite(number)) return 0;\n  var e = 1, p = 0;\n  while (Math.round(number * e) / e !== number) {\n    if (!isFinite(number * e)) { return 0; }\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\ninherit(colorLegendWidget, domWidget);\n\nregisterWidget('dom', 'colorLegend', colorLegendWidget);\nmodule.exports = colorLegendWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/colorLegendWidget.js","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./colorLegendWidget.styl\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./colorLegendWidget.styl\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./colorLegendWidget.styl\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui/colorLegendWidget.styl\n// module id = 649\n// module chunks = 0 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".color-legend-container {\\n  display: none;\\n  padding: 10px;\\n  border: 1.5px solid #000;\\n  border-radius: 3px;\\n  transition: 250ms background linear;\\n  background-color: rgba(255,255,255,0.75);\\n}\\n.color-legend-container:hover {\\n  background-color: #fff;\\n}\\n.color-legend-container .geojs-color-legends .geojs-color-legend {\\n  margin-bottom: 10px;\\n}\\n.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title {\\n  text-align: center;\\n}\\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg {\\n  display: block;\\n}\\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,\\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line {\\n  fill: none;\\n  stroke: #000;\\n  stroke-width: 0.7;\\n}\\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text {\\n  font-size: 12px;\\n}\\n.color-legend-container .color-legend-popup {\\n  position: absolute;\\n  background: #fff;\\n  height: 22px;\\n  font-size: 14px;\\n  border: solid 1px #000;\\n  padding: 0 5px;\\n  pointer-events: none;\\n  white-space: nowrap;\\n  z-index: 100000;\\n  opacity: 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!../node_modules/stylus-loader!./ui/colorLegendWidget.styl\n// module id = 650\n// module chunks = 0 1","var svgWidget = require('./svgWidget');\nvar inherit = require('../inherit');\nvar registerWidget = require('../registry').registerWidget;\n\n/**\n * Create a new instance of class legendWidget\n *\n * @class\n * @alias geo.gui.legendWidget\n * @extends geo.gui.svgWidget\n * @returns {geo.gui.legendWidget}\n */\nvar legendWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof legendWidget)) {\n    return new legendWidget(arg);\n  }\n  svgWidget.call(this, arg);\n\n  var d3 = require('../d3/d3Renderer').d3;\n  var geo_event = require('../event');\n\n  /** @private */\n  var m_this = this,\n      m_categories = [],\n      m_top = null,\n      m_group = null,\n      m_border = null,\n      m_spacing = 20, // distance in pixels between lines\n      m_padding = 12; // padding in pixels inside the border\n\n  /**\n   * Get or set the category array associated with\n   * the legend.  Each element of this array is\n   * an object: ::\n   *     {\n   *         name: string,\n   *         style: object,\n   *         type: 'point' | 'line' | ...\n   *     }\n   *\n   * The style property can contain the following feature styles:\n   *     * fill: bool\n   *     * fillColor: object | string\n   *     * fillOpacity: number\n   *     * stroke: bool\n   *     * strokeColor: object | string\n   *     * strokeWidth: number\n   *     * strokeOpacity: number\n   *\n   * The type controls how the element is displayed, point as a circle,\n   * line as a line segment.  Any other value will display as a rounded\n   * rectangle.\n   *\n   * @param {object[]?} categories The categories to display\n   */\n  this.categories = function (arg) {\n    if (arg === undefined) {\n      return m_categories.slice();\n    }\n    m_categories = arg.slice().map(function (d) {\n      if (d.type === 'line') {\n        d.style.fill = false;\n        d.style.stroke = true;\n      }\n      return d;\n    });\n    m_this.draw();\n    return m_this;\n  };\n\n  /**\n   * Get the widget's size\n   * @return {{width: number, height: number}} The size in pixels\n   */\n  this.size = function () {\n    var width = 1, height;\n    var test = d3.select(m_this.canvas()).append('text')\n          .style('opacity', 1e-6);\n\n    m_categories.forEach(function (d) {\n      test.text(d.name);\n      width = Math.max(width, test.node().getBBox().width);\n    });\n    test.remove();\n\n    height = m_spacing * (m_categories.length + 1);\n    return {\n      width: width + 50,\n      height: height\n    };\n  };\n\n  /**\n   * Redraw the legend\n   */\n  this.draw = function () {\n\n    m_this._init();\n    function applyColor(selection) {\n      selection.style('fill', function (d) {\n        if (d.style.fill || d.style.fill === undefined) {\n          return d.style.fillColor;\n        } else {\n          return 'none';\n        }\n      })\n        .style('fill-opacity', function (d) {\n          if (d.style.fillOpacity === undefined) {\n            return 1;\n          }\n          return d.style.fillOpacity;\n        })\n        .style('stroke', function (d) {\n          if (d.style.stroke || d.style.stroke === undefined) {\n            return d.style.strokeColor;\n          } else {\n            return 'none';\n          }\n        })\n        .style('stroke-opacity', function (d) {\n          if (d.style.strokeOpacity === undefined) {\n            return 1;\n          }\n          return d.style.strokeOpacity;\n        })\n        .style('stroke-width', function (d) {\n          if (d.style.strokeWidth === undefined) {\n            return 1.5;\n          }\n          return d.style.strokeWidth;\n        });\n    }\n\n    m_border.attr('height', m_this.size().height + 2 * m_padding)\n      .style('display', null);\n\n    var scale = m_this._scale();\n\n    var labels = m_group.selectAll('g.geo-label')\n          .data(m_categories, function (d) { return d.name; });\n\n    var g = labels.enter().append('g')\n          .attr('class', 'geo-label')\n          .attr('transform', function (d, i) {\n            return 'translate(0,' + scale.y(i) + ')';\n          });\n\n    applyColor(g.filter(function (d) {\n      return d.type !== 'point' && d.type !== 'line';\n    }).append('rect')\n      .attr('x', 0)\n      .attr('y', -6)\n      .attr('rx', 5)\n      .attr('ry', 5)\n      .attr('width', 40)\n      .attr('height', 12)\n    );\n\n    applyColor(g.filter(function (d) {\n      return d.type === 'point';\n    }).append('circle')\n      .attr('cx', 20)\n      .attr('cy', 0)\n      .attr('r', 6)\n    );\n\n    applyColor(g.filter(function (d) {\n      return d.type === 'line';\n    }).append('line')\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr('x2', 40)\n      .attr('y2', 0)\n    );\n\n    g.append('text')\n      .attr('x', '50px')\n      .attr('y', 0)\n      .attr('dy', '0.3em')\n      .text(function (d) {\n        return d.name;\n      });\n\n    m_this.reposition();\n\n    return m_this;\n  };\n\n  /**\n   * Get scales for the x and y axis for the current size.\n   * @private\n   */\n  this._scale = function () {\n    return {\n      x: d3.scale.linear()\n        .domain([0, 1])\n        .range([0, m_this.size().width]),\n      y: d3.scale.linear()\n        .domain([0, m_categories.length - 1])\n        .range([m_padding / 2, m_this.size().height - m_padding / 2])\n    };\n  };\n\n  /**\n   * Private initialization.  Creates the widget's DOM container and internal\n   * variables.\n   * @private\n   */\n  this._init = function () {\n    // adding categories redraws the entire thing by calling _init, see\n    // the m_top.remove() line below\n    if (!m_top) {\n      m_this._createCanvas();\n      m_this._appendCanvasToParent();\n    }\n\n    // total size = interior size + 2 * padding + 2 * width of the border\n    var w = m_this.size().width + 2 * m_padding + 4,\n        h = m_this.size().height + 2 * m_padding + 4;\n\n    // @todo - removing after creating to maintain the appendChild structure\n    if (m_top) {\n      m_top.remove();\n    }\n\n    d3.select(m_this.canvas()).attr('width', w).attr('height', h);\n\n    m_top = d3.select(m_this.canvas()).append('g');\n    m_group = m_top\n      .append('g')\n      .attr('transform', 'translate(' + [m_padding + 2, m_padding + 2] + ')');\n    m_border = m_group.append('rect')\n      .attr('x', -m_padding)\n      .attr('y', -m_padding)\n      .attr('width', w - 4)\n      .attr('height', h - 4)\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .style({\n        'stroke': 'black',\n        'stroke-width': '1.5px',\n        'fill': 'white',\n        'fill-opacity': 0.75,\n        'display': 'none'\n      });\n    m_group.on('mousedown', function () {\n      d3.event.stopPropagation();\n    });\n    m_group.on('mouseover', function () {\n      m_border.transition()\n        .duration(250)\n        .style('fill-opacity', 1);\n    });\n    m_group.on('mouseout', function () {\n      m_border.transition()\n        .duration(250)\n        .style('fill-opacity', 0.75);\n    });\n\n    m_this.reposition();\n  };\n\n  this.geoOn(geo_event.resize, function () {\n    m_this.draw();\n  });\n\n};\n\ninherit(legendWidget, svgWidget);\n\nregisterWidget('dom', 'legend', legendWidget);\nmodule.exports = legendWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/legendWidget.js","var $ = require('jquery');\nvar inherit = require('../inherit');\nvar svgWidget = require('./svgWidget');\nvar registerWidget = require('../registry').registerWidget;\n\nrequire('./scaleWidget.styl');\n\n/**\n * Scale widget specification.\n *\n * @typedef {object} geo.gui.scaleWidget.spec\n * @property {number} [scale=1] A scale applied to the map gcs units to convert\n *   to the scale units.\n * @property {number} [maxWidth=200] The maximum width of the scale in pixels.\n *   For horizontal scales (orientation is `top` or `bottom`) this is the\n *   maximum length of the scale bar.  For vertical scales, this is the width\n *   available for the scale text.\n * @property {number} [maxHeight] The maximum height of the scale in pixels.\n *   For vertical scales (orientation is `left` or `right`) this is the\n *   maximum length of the scale bar.  For horizontal scales, this is the\n *   height available for the scale text.  Default is 200 for vertical scales,\n *   20 for horizontal scales.\n * @property {string} [orientation='bottom'] One of `left`, `right`, `top`, or\n *   `bottom`.  The scale text is placed in that location relative to the scale\n *   bar.\n * @property {number} [strokeWidth=2] The width of the ticks and scale bar in\n *   pixels.\n * @property {number} [tickLength=10] The length of the end ticks in pixels.\n * @property {string|geo.gui.scaleWidget.unit[]} [units='si'] One of either\n *   `'si'` or `'miles'` or an array of units in ascending order.  See the\n *   `UnitsTable` for examples.\n * @property {function} [distance] The function used to compute the length of\n *   the scale bar.  This defaults to `transform.sphericalDistance` for all\n *   maps except those with a gcs of `'+proj=longlat +axis=enu'`, where\n *   `math.sqrt(util.distance2dSquared(pt1, pt2))` is used instead.\n */\n\n/**\n * Scale widget unit specification.\n *\n * @typedef {object} geo.gui.scaleWidget.unit\n * @property {string} unit Display name for the unit.\n * @property {number} scale Scale for 1 unit in the current system.\n * @property {number} [minimum=1] Minimum value where this applies after\n *   scaling.  This can be used to handle singular and plural words (e.g.,\n *   `[{units: 'meter', scale: 1}, {units: 'meters', scale: 1, minimum: 1.5}]`)\n * @property {number} [basis=10] The basis for the multiples value.\n * @property {object[]} [multiples] A list of objects in ascending value order\n *   that determine what round values are displayed.\n * @property {number} multiples.multiple The value that is selected for display.\n * @property {number} multiples.digit The number of significant digits in\n *   `mutliple`.\n */\n\n/**\n * Create a new instance of class geo.gui.scaleWidget.\n *\n * @class\n * @alias geo.gui.scaleWidget\n * @extends {geo.gui.svgWidget}\n * @param {geo.gui.scaleWidget.spec} arg\n * @returns {geo.gui.scaleWidget}\n */\nvar scaleWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof scaleWidget)) {\n    return new scaleWidget(arg);\n  }\n  svgWidget.call(this, arg);\n\n  var geo_event = require('../event');\n  var transform = require('../transform');\n  var util = require('../util');\n  var d3 = require('../d3/d3Renderer').d3;\n\n  var m_this = this,\n      s_exit = this._exit,\n      m_options = $.extend({}, {\n        scale: 1,\n        maxWidth: 200,\n        maxHeight: arg.orientation === 'left' || arg.orientation === 'right' ? 200 : 20,\n        orientation: 'bottom',\n        strokeWidth: 2,\n        tickLength: 10,\n        units: 'si',\n        distance: function (pt1, pt2, gcs) {\n          if (gcs === '+proj=longlat +axis=enu') {\n            return Math.sqrt(util.distance2dSquared(pt1, pt2));\n          }\n          /* We can use either the spherical distance or the Vincenty distance\n           * here in much the same way.\n          return transform.vincentyDistance(pt1, pt2, gcs).distance;\n           */\n          return transform.sphericalDistance(pt1, pt2, gcs);\n        }\n      }, arg);\n\n  /**\n   * Initialize the scale widget.\n   *\n   * @returns {this}\n   */\n  this._init = function () {\n    m_this._createCanvas();\n    m_this._appendCanvasToParent();\n    m_this.reposition();\n\n    d3.select(m_this.canvas()).attr({\n      width: m_options.maxWidth,\n      height: m_options.maxHeight\n    });\n    // Update the scale on pan\n    m_this.geoOn(geo_event.pan, m_this._update);\n    m_this._render();\n    return m_this;\n  };\n\n  /**\n   * Clean up after the widget.\n   */\n  this._exit = function () {\n    m_this.geoOff(geo_event.pan, m_this._update);\n    s_exit();\n  };\n\n  /**\n   * Return true if the scale is vertically oriented.\n   *\n   * @returns {boolean} `true` if the scale is vertical, `false` if horizontal.\n   */\n  this._vertical = function () {\n    return m_options.orientation === 'left' || m_options.orientation === 'right';\n  };\n\n  /**\n   * Given a maximum value, return a value that is no larger than it but at a\n   * round number of a set of units.\n   *\n   * @param {number} maxValue The maximum value to return.  The returned value\n   *    will never be smaller than 3/5 of this value.\n   * @param {number} pixels A number that is scaled by the ratio of the\n   *    returned value to `maxValue`.\n   * @param {string|geo.gui.scaleWidget.unit[]} [units] The units to use.  If\n   *    not specified, the instance's option units value is used.\n   * @returns {object} An object with `html`, `value`, and `pixels` values\n   *    representing the calculated value.\n   */\n  this._scaleValue = function (maxValue, pixels, units) {\n    units = (scaleWidget.unitsTable[units] || units ||\n             scaleWidget.unitsTable[m_options.units] || m_options.units);\n    var multiples = [\n      {multiple: 1, digits: 1},\n      {multiple: 1.5, digits: 2},\n      {multiple: 2, digits: 1},\n      {multiple: 3, digits: 1},\n      {multiple: 5, digits: 1},\n      {multiple: 8, digits: 1}];\n    var unit = units[0],\n        multiple, power, value;\n    units.forEach(function (unitEntry) {\n      if (maxValue >= unitEntry.scale * (unitEntry.minimum || 1)) {\n        unit = unitEntry;\n      }\n    });\n    power = Math.floor(Math.log(maxValue / unit.scale) / Math.log(unit.basis || 10));\n    multiples = unit.multiples || multiples;\n    multiples.forEach(function (mul) {\n      var mulValue = unit.scale * mul.multiple * Math.pow(10, power);\n      if (mulValue <= maxValue) {\n        multiple = mul;\n        value = mulValue;\n      }\n    });\n    return {\n      html: (multiple.multiple * Math.pow(10, power)).toFixed(\n        Math.max(0, -power + multiple.digits - 1)) + ' ' + unit.unit,\n      value: value,\n      pixels: value / maxValue * pixels,\n      power: power,\n      multiple: multiple,\n      unitRecord: unit,\n      originalValue: maxValue,\n      originalPixels: pixels\n    };\n  };\n\n  /**\n   * Create and draw the scale based on the current display distance at the\n   * location of the scale.\n   */\n  this._render = function () {\n    var svg = d3.select(m_this.canvas()),\n        map = m_this.layer().map(),\n        width = m_options.maxWidth,\n        height = m_options.maxHeight,\n        sw = m_options.strokeWidth,\n        sw2 = sw * 0.5,\n        tl = m_options.tickLength,\n        vert = m_this._vertical(),\n        pixels, pt1, pt2, dist, value, pts;\n\n    pixels = (vert ? m_options.maxHeight : m_options.maxWidth) - sw;\n    /* Calculate the distance that the maximum length scale bar can occupy at\n     * the location that the scale bar will be drawn. */\n    // svg.attr({width: width, height: height});\n    pt1 = $(svg[0][0]).offset();\n    pt1 = {\n      x: pt1.left + (m_options.orientation === 'left' ? width - sw2 : sw2),\n      y: pt1.top + (m_options.orientation === 'top' ? height - sw2 : sw2)\n    };\n    pt2 = {x: pt1.x + (vert ? 0 : pixels), y: pt1.y + (vert ? pixels : 0)};\n    dist = m_options.distance(map.displayToGcs(pt1, null), map.displayToGcs(pt2, null), map.gcs()) * m_options.scale;\n    if (dist <= 0 || !isFinite(dist)) {\n      console.warn('The distance calculated for the scale is invalid: ' + dist);\n      return;\n    }\n    value = m_this._scaleValue(dist, pixels);\n    if (vert) {\n      height = value.pixels + sw;\n    } else {\n      width = value.pixels + sw;\n    }\n    svg.attr({width: width, height: height});\n    if (svg.select('polyline').empty()) {\n      svg.append('polyline').classed('geojs-scale-widget-bar', true).attr({\n        fill: 'none',\n        'stroke-width': sw\n      });\n    }\n    if (svg.select('text').empty()) {\n      svg.append('text').classed('geojs-scale-widget-text', true);\n    }\n    switch (m_options.orientation) {\n      case 'bottom':\n        pts = [[sw2, tl], [sw2, sw2], [width - sw2, sw2], [width - sw2, tl]];\n        svg.select('text').attr({\n          x: width / 2,\n          y: sw * 2,\n          'text-anchor': 'middle',\n          'dominant-baseline': 'hanging'\n        });\n        break;\n      case 'top':\n        pts = [[sw2, height - tl], [sw2, height - sw2], [width - sw2, height - sw2], [width - sw2, height - tl]];\n        svg.select('text').attr({\n          x: width / 2,\n          y: height - sw * 2,\n          'text-anchor': 'middle',\n          'dominant-baseline': 'alphabetic'\n        });\n        break;\n      case 'left':\n        pts = [[width - tl, sw2], [width - sw2, sw2], [width - sw2, height - sw2], [width - tl, height - sw2]];\n        svg.select('text').attr({\n          x: width - sw * 2,\n          y: height / 2,\n          'text-anchor': 'end',\n          'dominant-baseline': 'middle'\n        });\n        break;\n      case 'right':\n        pts = [[tl, sw2], [sw2, sw2], [sw2, height - sw2], [tl, height - sw2]];\n        svg.select('text').attr({\n          x: sw * 2,\n          y: height / 2,\n          'text-anchor': 'start',\n          'dominant-baseline': 'middle'\n        });\n        break;\n    }\n    svg.select('polyline').attr('points', pts.map(function (pt) { return pt.join(','); }).join(' '));\n    svg.select('text').html(value.html);\n  };\n\n  /**\n   * Update the widget upon panning.\n   */\n  this._update = function () {\n    this._render();\n  };\n\n  /**\n   * Set or get options.\n   *\n   * @param {string|object} [arg1] If `undefined`, return the options object.\n   *    If a string, either set or return the option of that name.  If an\n   *    object, update the options with the object's values.\n   * @param {object} [arg2] If `arg1` is a string and this is defined, set\n   *    the option to this value.\n   * @returns {object|this} If options are set, return the annotation,\n   *    otherwise return the requested option or the set of options.\n   */\n  this.options = function (arg1, arg2) {\n    if (arg1 === undefined) {\n      var result = $.extend({}, m_options);\n      result.position = m_this.position(undefined, true);\n      return result;\n    }\n    if (typeof arg1 === 'string' && arg2 === undefined) {\n      return arg1 === 'position' ? m_this.position(undefined, true) : m_options[arg1];\n    }\n    if (arg2 === undefined) {\n      m_options = $.extend(true, m_options, arg1);\n    } else {\n      m_options[arg1] = arg2;\n    }\n    if (arg1.position || arg1 === 'position') {\n      m_this.position(arg1.position || arg2);\n    }\n    m_this._render();\n    return m_this;\n  };\n};\n\ninherit(scaleWidget, svgWidget);\n\n/* The unitsTable has predefined unit sets.  Each entry is an array that must\n * be in ascending order. */\nscaleWidget.unitsTable = {\n  si: [\n    {unit: 'nm', scale: 1e-9},\n    {unit: '&mu;m', scale: 1e-6},\n    {unit: 'mm', scale: 0.001},\n    {unit: 'm', scale: 1},\n    {unit: 'km', scale: 1000}\n  ],\n  miles: [\n    {unit: 'in', scale: 0.0254}, // applies to < 1 in\n    {\n      /* By specifying inches a second time, the first entry will apply to\n       * values less than 1 inch, and those will be rounded by powers of 10\n       * using the default rules.  This entry will round values differently,\n       * so one will see 1, 1.5, 2, 3, 6, 9 rather than the default which would\n       * be 1, 1.5, 2, 3, 5, 8, 10. */\n      unit: 'in',\n      scale: 0.0254,\n      basis: 12,\n      multiples: [\n        {multiple: 1, digits: 1},\n        {multiple: 1.5, digits: 2},\n        {multiple: 2, digits: 1},\n        {multiple: 3, digits: 1},\n        {multiple: 6, digits: 1},\n        {multiple: 9, digits: 1}\n      ]\n    },\n    {unit: 'ft', scale: 0.3048},\n    {unit: 'mi', scale: 1609.344}\n  ]\n};\n\nregisterWidget('dom', 'scale', scaleWidget);\nmodule.exports = scaleWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/scaleWidget.js","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./scaleWidget.styl\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./scaleWidget.styl\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./scaleWidget.styl\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui/scaleWidget.styl\n// module id = 653\n// module chunks = 0 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".geojs-scale-widget-bar {\\n  stroke: #000;\\n}\\n.geojs-scale-widget-text {\\n  font-weight: bold;\\n  font-size: 16px;\\n  font-family: serif;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/css-loader!../node_modules/stylus-loader!./ui/scaleWidget.styl\n// module id = 654\n// module chunks = 0 1","var svgWidget = require('./svgWidget');\nvar inherit = require('../inherit');\nvar registerWidget = require('../registry').registerWidget;\n\n/**\n * Create a new instance of class sliderWidget\n *\n * @class\n * @alias geo.gui.sliderWidget\n * @extends {geo.gui.svgWidget}\n * @returns {geo.gui.sliderWidget}\n */\nvar sliderWidget = function (arg) {\n  'use strict';\n  if (!(this instanceof sliderWidget)) {\n    return new sliderWidget(arg);\n  }\n  svgWidget.call(this, arg);\n\n  var d3 = require('../d3/d3Renderer').d3;\n  var geo_event = require('../event');\n\n  var m_this = this,\n      s_exit = this._exit,\n      m_xscale,\n      m_yscale,\n      m_plus,\n      m_minus,\n      m_nub,\n      m_width = arg.width || 20, // Size of the widget in pixels\n      m_height = arg.height || 160,  // slider height + 3 * width\n      m_nubSize = arg.width ? arg.width * 0.5 : 10,\n      m_plusIcon,\n      m_minusIcon,\n      m_group,\n      m_lowContrast,\n      m_highlightDur = 100;\n\n  /* http://icomoon.io */\n  /* CC BY 3.0 http://creativecommons.org/licenses/by/3.0/ */\n  m_plusIcon = 'M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z';\n  m_minusIcon = 'M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z';\n\n  // Define off-white gray colors for low contrast ui (unselected).\n  m_lowContrast = {\n    white: '#f4f4f4',\n    black: '#505050'\n  };\n\n  /**\n   * Add an icon from a path string.  Returns a d3 group element.\n   *\n   * @function\n   * @argument {String} icon svg path string\n   * @argument {Array} base where to append the element (d3 selection)\n   * @argument {Number} cx Center x-coordinate\n   * @argument {Number} cy Center y-coordinate\n   * @argument {Number} size Icon size in pixels\n   * @returns {object}\n   * @private\n   */\n  function put_icon(icon, base, cx, cy, size) {\n    var g = base.append('g');\n\n    // the scale factor\n    var s = size / 1024;\n\n    g.append('g')\n      .append('g')\n        .attr(\n          'transform',\n          'translate(' + cx + ',' + cy + ') scale(' + s + ') translate(-512,-512)'\n        )\n      .append('path')\n        .attr('d', icon)\n        .attr('class', 'geo-glyphicon');\n\n    return g;\n  }\n\n  this.size = function () {\n    return {width: m_width, height: m_height};\n  };\n\n  /**\n   * Initialize the slider widget in the map.\n   *\n   * @function\n   * @returns {geo.gui.sliderWidget}\n   * @private\n   */\n  this._init = function () {\n    m_this._createCanvas();\n    m_this._appendCanvasToParent();\n\n    m_this.reposition();\n\n    var svg = d3.select(m_this.canvas()),\n        map = m_this.layer().map();\n\n    svg.attr('width', m_width).attr('height', m_height);\n\n    // create d3 scales for positioning\n    // TODO: make customizable and responsive\n    m_xscale = d3.scale.linear().domain([-4, 4]).range([0, m_width]);\n    m_yscale = d3.scale.linear().domain([0, 1]).range([m_width * 1.5, m_height - m_width * 1.5]);\n\n    // Create the main group element\n    svg = svg.append('g').classed('geo-ui-slider', true);\n    m_group = svg;\n\n    // Create + zoom button\n    m_plus = svg.append('g');\n    m_plus.append('circle')\n      .datum({\n        fill: 'white',\n        stroke: null\n      })\n      .classed('geo-zoom-in', true)\n      .attr('cx', m_xscale(0))\n      .attr('cy', m_yscale(0.0) - m_width + 2)\n      .attr('r', (m_width - 2) / 2)\n      .style({\n        'cursor': 'pointer'\n      })\n      .on('click', function () {\n        var z = map.zoom();\n        map.transition({\n          zoom: z + 1,\n          ease: d3.ease('cubic-in-out'),\n          duration: 500\n        });\n      })\n      .on('mousedown', function () {\n        d3.event.stopPropagation();\n      });\n\n    put_icon(\n      m_plusIcon,\n      m_plus,\n      m_xscale(0),\n      m_yscale(0) - m_width + 2,\n      m_width + 4\n    ).style('cursor', 'pointer')\n      .style('pointer-events', 'none')\n      .select('path')\n      .datum({\n        fill: 'black',\n        stroke: null\n      });\n\n    // Create the - zoom button\n    m_minus = svg.append('g');\n    m_minus.append('circle')\n      .datum({\n        fill: 'white',\n        stroke: null\n      })\n      .classed('geo-zoom-out', true)\n      .attr('cx', m_xscale(0))\n      .attr('cy', m_yscale(1.0) + m_width - 2)\n      .attr('r', (m_width - 2) / 2)\n      .style({\n        'cursor': 'pointer'\n      })\n      .on('click', function () {\n        var z = map.zoom();\n        map.transition({\n          zoom: z - 1,\n          ease: d3.ease('cubic-in-out'),\n          duration: 500\n        });\n      })\n      .on('mousedown', function () {\n        d3.event.stopPropagation();\n      });\n\n    put_icon(\n      m_minusIcon,\n      m_minus,\n      m_xscale(0),\n      m_yscale(1) + m_width - 2,\n      m_width + 4\n    ).style('cursor', 'pointer')\n      .style('pointer-events', 'none')\n      .select('path')\n      .datum({\n        fill: 'black',\n        stroke: null\n      });\n\n    // Respond to a mouse event on the widget\n    function respond(evt, trans) {\n      var z = m_yscale.invert(d3.mouse(svg.node())[1]),\n          zrange = map.zoomRange();\n      z = (1 - z) * (zrange.max - zrange.min) + zrange.min;\n      if (trans) {\n        map.transition({\n          zoom: z,\n          ease: d3.ease('cubic-in-out'),\n          duration: 500,\n          done: m_this._update()\n        });\n      } else {\n        map.zoom(z);\n        m_this._update();\n      }\n      evt.stopPropagation();\n    }\n\n    // Create the track\n    svg.append('rect')\n      .datum({\n        fill: 'white',\n        stroke: 'black'\n      })\n      .classed('geo-zoom-track', true)\n      .attr('x', m_xscale(0) - m_width / 6)\n      .attr('y', m_yscale(0))\n      .attr('rx', m_width / 10)\n      .attr('ry', m_width / 10)\n      .attr('width', m_width / 3)\n      .attr('height', m_height - m_width * 3)\n      .style({\n        'cursor': 'pointer'\n      })\n      .on('click', function () {\n        respond(d3.event, true);\n      });\n\n    // Create the nub\n    m_nub = svg.append('rect')\n      .datum({\n        fill: 'black',\n        stroke: null\n      })\n      .classed('geo-zoom-nub', true)\n      .attr('x', m_xscale(-4))\n      .attr('y', m_yscale(0.5) - m_nubSize / 2)\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .attr('width', m_width)\n      .attr('height', m_nubSize)\n      .style({\n        'cursor': 'pointer'\n      })\n      .on('mousedown', function () {\n        d3.select(document).on('mousemove.geo.slider', function () {\n          respond(d3.event);\n        });\n        d3.select(document).on('mouseup.geo.slider', function () {\n          respond(d3.event);\n          d3.select(document).on('.geo.slider', null);\n        });\n        d3.event.stopPropagation();\n      });\n\n    var mouseOver = function () {\n      d3.select(this).attr('filter', 'url(#geo-highlight)');\n      m_group.selectAll('rect,path,circle').transition()\n        .duration(m_highlightDur)\n        .style('fill', function (d) {\n          return d.fill || null;\n        })\n        .style('stroke', function (d) {\n          return d.stroke || null;\n        });\n\n    };\n\n    var mouseOut = function () {\n      d3.select(this).attr('filter', null);\n      m_group.selectAll('circle,rect,path').transition()\n        .duration(m_highlightDur)\n        .style('fill', function (d) {\n          return m_lowContrast[d.fill] || null;\n        })\n        .style('stroke', function (d) {\n          return m_lowContrast[d.stroke] || null;\n        });\n    };\n\n    m_group.selectAll('*')\n      .on('mouseover', mouseOver)\n      .on('mouseout', mouseOut);\n\n    // Update the nub position on zoom\n    m_this.geoOn(geo_event.zoom, m_this._update);\n\n    mouseOut();\n    m_this._update();\n  };\n\n  /**\n   * Removes the slider element from the map and unbinds all handlers.\n   *\n   * @function\n   * @returns {geo.gui.sliderWidget}\n   * @private\n   */\n  this._exit = function () {\n    m_this.geoOff(geo_event.zoom, m_this._update);\n    m_group.remove();\n    s_exit();\n  };\n\n  /**\n   * Update the slider widget state in reponse to map changes.  I.e. zoom\n   * range changes.\n   *\n   * @function\n   * @returns {geo.gui.sliderWidget}\n   * @private\n   */\n  this._update = function (obj) {\n    var map = m_this.layer().map(),\n        zoomRange = map.zoomRange(),\n        zoom = map.zoom(),\n        zoomScale = d3.scale.linear();\n\n    obj = obj || {};\n    zoom = obj.value || zoom;\n    zoomScale.domain([zoomRange.min, zoomRange.max])\n      .range([1, 0])\n      .clamp(true);\n\n    m_nub.attr('y', m_yscale(zoomScale(zoom)) - m_nubSize / 2);\n  };\n};\n\ninherit(sliderWidget, svgWidget);\n\nregisterWidget('dom', 'slider', sliderWidget);\nmodule.exports = sliderWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/sliderWidget.js"],"sourceRoot":""}