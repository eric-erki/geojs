!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.geo=e():t.geo=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist/built",n(n.s=258)}([function(t,e,n){var r=n(7),i=n(28),o=n(20),a=n(21),s=n(29),u=function(t,e,n){var c,l,h,f,d=t&u.F,p=t&u.G,m=t&u.S,v=t&u.P,g=t&u.B,y=p?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,x=p?i:i[e]||(i[e]={}),_=x.prototype||(x.prototype={});for(c in p&&(n=e),n)h=((l=!d&&y&&void 0!==y[c])?y:n)[c],f=g&&l?s(h,r):v&&"function"==typeof h?s(Function.call,h):h,y&&a(y,c,h,t&u.U),x[c]!=h&&o(x,c,f),v&&_[c]!=h&&(_[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(3),i={dom:{}},o={},a={},s={},u={},c={},l={},h={},f={},d={registerFileReader:function(t,e){l[t]=e},createFileReader:function(t,e){return l.hasOwnProperty(t)?l[t](e):null},registerRenderer:function(t,e){s[t]=e},createRenderer:function(t,e,n,r){if(s.hasOwnProperty(t)){var i=s[t]({layer:e,canvas:n,options:r});return i._init(),i}return null},checkRenderer:function(t,e){if(null===t)return t;if(s.hasOwnProperty(t)){var n=s[t];if(!n.supported||n.supported())return t;if(!n.fallback||e)return!1;var r=d.checkRenderer(n.fallback(),!0);return!1!==r&&console.warn(t+" renderer is unavailable, using "+r+" renderer instead"),r}return!1},rendererForFeatures:function(t){var e,n,r,i,o,a,s=["vgl","canvas","d3",null];for(n=0;n<s.length;n+=1)if(e=s[n],!1!==d.checkRenderer(e,!0)){if(!t)return e;if(u[e]){for(a=!0,i=0;i<t.length;i+=1){if(o=null,(r=t[i]).indexOf(".")>=0&&(o=r,r=r.substr(0,r.indexOf("."))),void 0===u[e][r]){a=!1;break}if(o&&c[e][r]&&!c[e][r][o]){a=!1;break}}if(a)return e}}return console.warn('There is no renderer available for the feature list "'+(t||[]).join(", ")+'".'),!1},registerFeature:function(t,e,n,r){t in u||(u[t]={},c[t]={});var i=u[t][e];return i&&console.warn("The "+t+"."+e+" feature is already registered"),u[t][e]=n,c[t][e]=r,i},createFeature:function(t,e,n,i){var o=n.api(),a={layer:e,renderer:n};if(o in u&&t in u[o]){void 0!==i&&r.extend(!0,a,i);var s=u[o][t](a);return void 0===e.gcs&&(e.gcs=function(){return e.map().gcs()}),s}return null},registerLayerAdjustment:function(t,e,n){t in h||(h[t]={});var r=h[t][e];return r&&console.warn("The "+t+"."+e+" layer adjustment is already registered"),h[t][e]=n,r},adjustLayerForRenderer:function(t,e){var n=e.rendererName();n&&h&&h[n]&&h[n][t]&&h[n][t].apply(e)},registerLayer:function(t,e,n){o[t]=e,a[t]=n},createLayer:function(t,e,n){var i={map:e},s=null;return t in o?(n.renderer||n.features||!a||(i.features=a[t]),void 0!==n&&r.extend(!0,i,n),(s=o[t](i)).layerName=t,s._init(),s):null},registerWidget:function(t,e,n){t in i||(i[t]={});var r=i[t][e];return r&&console.warn("The "+t+"."+e+" widget is already registered"),i[t][e]=n,r},createWidget:function(t,e,n){var o={layer:e};if(t in i.dom)return void 0!==n&&r.extend(!0,o,n),i.dom[t](o);throw new Error("Cannot create unknown widget "+t)},registerAnnotation:function(t,e,n){var r=f[t];return r&&console.warn("The "+t+" annotation is already registered"),f[t]={func:e,features:n||{}},r},createAnnotation:function(t,e){if(f[t])return f[t].func(e);console.warn("The "+t+" annotation is not registered")},listAnnotations:function(){return Object.keys(f)},featuresForAnnotations:function(t){var e=[];return(Array.isArray(t)?t:Object.keys(t)).forEach(function(n){f[n]&&Object.keys(f[n].features).forEach(function(i){Array.isArray(t)||!0===t[n]||!Array.isArray(f[n].features[i])?e.push(i):t[n].forEach(function(t){r.inArray(t,f[n].features[i])>=0&&e.push(i)})})}),e},rendererForAnnotations:function(t){return d.rendererForFeatures(d.featuresForAnnotations(t))}};d.registries={annotations:f,features:u,featureCapabilities:c,fileReaders:l,layers:o,renderers:s,widgets:i},t.exports=d},function(t,e,n){var r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,u=o.slice,c=o.concat,l=o.push,h=o.indexOf,f={},d=f.toString,p=f.hasOwnProperty,m=p.toString,v=m.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},x=function(t){return null!=t&&t===t.window},_={type:!0,src:!0,noModule:!0};function b(t,e,n){var r,i=(e=e||a).createElement("script");if(i.text=t,n)for(r in _)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function M(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[d.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function A(t){var e=!!t&&"length"in t&&t.length,n=M(t);return!y(t)&&!x(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},w.extend=w.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[e]=w.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=s(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&m.call(n)===v)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){b(t)},each:function(t,e){var n,r=0;if(A(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(T,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(A(Object(t))?w.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(A(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=o[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){f["[object "+e+"]"]=e.toLowerCase()});var E=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,v,g,y,x,_="sizzle"+1*new Date,b=t.document,M=0,w=0,T=at(),A=at(),E=at(),S=function(t,e){return t===e&&(h=!0),0},C={}.hasOwnProperty,O=[],P=O.pop,R=O.push,k=O.push,L=O.slice,D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+N+"*("+I+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+N+"*\\]",z=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",U=new RegExp(N+"+","g"),G=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),B=new RegExp("^"+N+"*,"+N+"*"),V=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),q=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),H=new RegExp(z),W=new RegExp("^"+I+"$"),X={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){f()},it=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{k.apply(O=L.call(b.childNodes),b.childNodes),O[b.childNodes.length].nodeType}catch(t){k={apply:O.length?function(t,e){R.apply(t,L.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,c,l,h,p,g,y=e&&e.ownerDocument,M=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==M&&9!==M&&11!==M)return r;if(!i&&((e?e.ownerDocument||e:b)!==d&&f(e),e=e||d,m)){if(11!==M&&(h=Z.exec(t)))if(o=h[1]){if(9===M){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&x(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return k.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return k.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!E[t+" "]&&(!v||!v.test(t))){if(1!==M)y=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=_),s=(p=a(t)).length;s--;)p[s]="#"+l+" "+gt(p[s]);g=p.join(","),y=$.test(t)&&mt(e.parentNode)||e}if(g)try{return k.apply(r,y.querySelectorAll(g)),r}catch(t){}finally{l===_&&e.removeAttribute("id")}}}return u(t.replace(G,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[_]=!0,t}function ut(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return st(function(e){return e=+e,st(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:b;return a!==d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,m=!o(d),b!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ut(function(t){return p.appendChild(t).id=_,!d.getElementsByName||!d.getElementsByName(_).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},g=[],v=[],(n.qsa=Q.test(d.querySelectorAll))&&(ut(function(t){p.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+N+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+_+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||v.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),g.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),e=Q.test(p.compareDocumentPosition),x=e||Q.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===d||t.ownerDocument===b&&x(b,t)?-1:e===d||e.ownerDocument===b&&x(b,e)?1:l?D(l,t)-D(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===d?-1:e===d?1:i?-1:o?1:l?D(l,t)-D(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===b?-1:s[r]===b?1:0},d):d},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&f(t),e=e.replace(q,"='$1']"),n.matchesSelector&&m&&!E[e+" "]&&(!g||!g.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,d,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==d&&f(t),x(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==d&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&C.call(r.attrHandle,e.toLowerCase())?i(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(S),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&H.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&T(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p,m=o!==a?"nextSibling":"previousSibling",v=e.parentNode,g=s&&e.nodeName.toLowerCase(),y=!u&&!s,x=!1;if(v){if(o){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(x=(d=(c=(l=(h=(f=v)[_]||(f[_]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===M&&c[1])&&c[2],f=d&&v.childNodes[d];f=++d&&f&&f[m]||(x=d=0)||p.pop();)if(1===f.nodeType&&++x&&f===e){l[t]=[M,d,x];break}}else if(y&&(x=d=(c=(l=(h=(f=e)[_]||(f[_]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===M&&c[1]),!1===x)for(;(f=++d&&f&&f[m]||(x=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++x||(y&&((l=(h=f[_]||(f[_]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[M,x]),f!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[_]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=D(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:st(function(t){var e=[],n=[],r=s(t.replace(G,"$1"));return r[_]?st(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(J,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:st(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(J,tt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:pt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function vt(){}function gt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=w++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var c,l,h,f=[M,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===M&&c[1]===s)return f[2]=c[2];if(l[o]=f,f[2]=t(e,n,u))return!0}return!1}}function xt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function _t(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function bt(t,e,n,r,i,o){return r&&!r[_]&&(r=bt(r)),i&&!i[_]&&(i=bt(i,o)),st(function(o,a,s,u){var c,l,h,f=[],d=[],p=a.length,m=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?m:_t(m,f,t,s,u),g=n?i||(o?t:p||r)?[]:a:v;if(n&&n(v,g,s,u),r)for(c=_t(g,d),r(c,[],s,u),l=c.length;l--;)(h=c[l])&&(g[d[l]]=!(v[d[l]]=h));if(o){if(i||t){if(i){for(c=[],l=g.length;l--;)(h=g[l])&&c.push(v[l]=h);i(null,g=[],c,u)}for(l=g.length;l--;)(h=g[l])&&(c=i?D(o,h):f[l])>-1&&(o[c]=!(a[c]=h))}}else g=_t(g===a?g.splice(p,g.length):g),i?i(null,a,g,u):k.apply(a,g)})}function Mt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,l=yt(function(t){return t===e},s,!0),h=yt(function(t){return D(e,t)>-1},s,!0),f=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])f=[yt(xt(f),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[_]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return bt(u>1&&xt(f),u>1&&gt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&Mt(t.slice(u,i)),i<o&&Mt(t=t.slice(i)),i<o&&gt(t))}f.push(n)}return xt(f)}return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,a=ot.tokenize=function(t,e){var n,i,o,a,s,u,c,l=A[t+" "];if(l)return e?0:l.slice(0);for(s=t,u=[],c=r.preFilter;s;){for(a in n&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(G," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):A(t,u).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=E[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=Mt(e[n]))[_]?i.push(s):o.push(s);(s=E(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,l){var h,p,v,g=0,y="0",x=o&&[],_=[],b=c,w=o||i&&r.find.TAG("*",l),T=M+=null==b?1:Math.random()||.1,A=w.length;for(l&&(c=a===d||a||l);y!==A&&null!=(h=w[y]);y++){if(i&&h){for(p=0,a||h.ownerDocument===d||(f(h),s=!m);v=t[p++];)if(v(h,a||d,s)){u.push(h);break}l&&(M=T)}n&&((h=!v&&h)&&g--,o&&x.push(h))}if(g+=y,n&&y!==g){for(p=0;v=e[p++];)v(x,_,a,s);if(o){if(g>0)for(;y--;)x[y]||_[y]||(_[y]=P.call(u));_=_t(_)}k.apply(u,_),l&&!o&&_.length>0&&g+e.length>1&&ot.uniqueSort(u)}return l&&(M=T,c=b),x};return n?st(o):o}(o,i))).selector=t}return s},u=ot.select=function(t,e,n,i){var o,u,c,l,h,f="function"==typeof t&&t,d=!i&&a(t=f.selector||t);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&m&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(J,tt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=X.needsContext.test(t)?0:u.length;o--&&(c=u[o],!r.relative[l=c.type]);)if((h=r.find[l])&&(i=h(c.matches[0].replace(J,tt),$.test(u[0].type)&&mt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&gt(u)))return k.apply(n,i),n;break}}return(f||s(t,d))(i,e,!m,n,!e||$.test(t)&&mt(e.parentNode)||e),n},n.sortStable=_.split("").sort(S).join("")===_,n.detectDuplicates=!!h,f(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||ct(j,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(n);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var S=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},O=w.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(t,e,n){return y(e)?w.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?w.grep(t,function(t){return t===e!==n}):"string"!=typeof e?w.grep(t,function(t){return h.call(e,t)>-1!==n}):w.filter(e,t,n)}w.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?w.find.matchesSelector(r,t)?[r]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<r;e++)if(w.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)w.find(t,i[e],n);return r>1?w.uniqueSort(n):n},filter:function(t){return this.pushStack(k(this,t||[],!1))},not:function(t){return this.pushStack(k(this,t||[],!0))},is:function(t){return!!k(this,"string"==typeof t&&O.test(t)?w(t):t||[],!1).length}});var L,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||L,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),R.test(r[1])&&w.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,L=w(a);var j=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&w(t);if(!O.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?h.call(w(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return P(t,"iframe")?t.contentDocument:(P(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(n,r){var i=w.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(N[t]||w.uniqueSort(i),j.test(t)&&i.reverse()),this.pushStack(i)}});var F=/[^\x20\t\r\n\f]+/g;function z(t){return t}function U(t){throw t}function G(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(F)||[],function(t,n){e[n]=!0}),e}(t):w.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){w.each(n,function(n,r){y(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==M(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return w.each(arguments,function(t,e){for(var n;(n=w.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?w.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(t){var e=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(n){w.each(e,function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,r,i){var o=0;function a(t,e,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(t<o)){if((n=r.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?i?c.call(n,a(o,e,z,i),a(o,e,U,i)):(o++,c.call(n,a(o,e,z,i),a(o,e,U,i),a(o,e,z,e.notifyWith))):(r!==z&&(s=void 0,u=[n]),(i||e.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(r!==U&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),n.setTimeout(l))}}return w.Deferred(function(n){e[0][3].add(a(0,n,y(i)?i:z,n.notifyWith)),e[1][3].add(a(0,n,y(t)?t:z)),e[2][3].add(a(0,n,y(r)?r:U))}).promise()},promise:function(t){return null!=t?w.extend(t,i):i}},o={};return w.each(e,function(t,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=u.call(arguments),o=w.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?u.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(G(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)G(i[n],a(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&B.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){n.setTimeout(function(){throw t})};var V=w.Deferred();function q(){a.removeEventListener("DOMContentLoaded",q),n.removeEventListener("load",q),w.ready()}w.fn.ready=function(t){return V.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||V.resolveWith(a,[w]))}}),w.ready.then=V.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(w.ready):(a.addEventListener("DOMContentLoaded",q),n.addEventListener("load",q));var H=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===M(n))for(s in i=!0,n)H(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(w(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o},W=/^-ms-/,X=/-([a-z])/g;function K(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace(X,K)}var Q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=w.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[Y(e)]=n;else for(r in e)i[Y(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||w.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var $=new Z,J=new Z,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}J.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return J.hasData(t)||$.hasData(t)},data:function(t,e,n){return J.access(t,e,n)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=J.get(o),1===o.nodeType&&!$.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Y(r.slice(5)),nt(o,r,i[r]));$.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){J.set(this,t)}):H(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=J.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){J.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){J.remove(this,t)})}}),w.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=$.get(t,e),n&&(!r||Array.isArray(n)?r=$.access(t,e,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=w.queue(t,e),r=n.length,i=n.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){w.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:w.Callbacks("once memory").add(function(){$.remove(t,[e+"queue",n])})})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each(function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=$.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&w.contains(t.ownerDocument,t)&&"none"===w.css(t,"display")},st=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function ut(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(t,e,"")},u=s(),c=n&&n[3]||(w.cssNumber[e]?"":"px"),l=(w.cssNumber[e]||"px"!==c&&+u)&&it.exec(w.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)w.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,w.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ct={};function lt(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=w.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function ht(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=$.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&at(r)&&(i[o]=lt(r))):"none"!==n&&(i[o]="none",$.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}w.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?w(this).show():w(this).hide()})}});var ft=/^(?:checkbox|radio)$/i,dt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?w.merge([t],n):n}function gt(t,e){for(var n=0,r=t.length;n<r;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td;var yt,xt,_t=/<|&#?\w+;/;function bt(t,e,n,r,i){for(var o,a,s,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===M(o))w.merge(f,o.nodeType?[o]:o);else if(_t.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(dt.exec(o)||["",""])[1].toLowerCase(),u=mt[s]||mt._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;w.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(c=w.contains(o.ownerDocument,o),a=vt(h.appendChild(o),"script"),c&&gt(a),n)for(l=0;o=a[l++];)pt.test(o.type||"")&&n.push(o);return h}yt=a.createDocumentFragment().appendChild(a.createElement("div")),(xt=a.createElement("input")).setAttribute("type","radio"),xt.setAttribute("checked","checked"),xt.setAttribute("name","t"),yt.appendChild(xt),g.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var Mt=a.documentElement,wt=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,At=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function St(){return!1}function Ct(){try{return a.activeElement}catch(t){}}function Ot(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Ot(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=St;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each(function(){w.event.add(this,e,i,r,n)})}w.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d,p,m,v=$.get(t);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(Mt,i),n.guid||(n.guid=w.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(F)||[""]).length;c--;)d=m=(s=At.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=w.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=w.event.special[d]||{},l=w.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d,p,m,v=$.hasData(t)&&$.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(F)||[""]).length;c--;)if(d=m=(s=At.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=w.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||w.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)w.event.remove(t,d+e[c],n,r,!0);w.isEmptyObject(u)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=w.event.fix(t),u=new Array(arguments.length),c=($.get(this,"events")||{})[s.type]||[],l=w.event.special[s.type]||{};for(u[0]=s,e=1;e<arguments.length;e++)u[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=w.event.handlers.call(this,s,c),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(c)>-1:w.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&P(this,"input"))return this.click(),!1},_default:function(t){return P(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||w.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),w.fn.extend({on:function(t,e,n,r){return Ot(this,t,e,n,r)},one:function(t,e,n,r){return Ot(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,w(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){w.event.remove(this,t,n,e)})}});var Pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Rt=/<script|<style|<link/i,kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function jt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var n,r,i,o,a,s,u,c;if(1===e.nodeType){if($.hasData(t)&&(o=$.access(t),a=$.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)w.event.add(e,i,c[i][n]);J.hasData(t)&&(s=J.access(t),u=w.extend({},s),J.set(e,u))}}function Ft(t,e,n,r){e=c.apply([],e);var i,o,a,s,u,l,h=0,f=t.length,d=f-1,p=e[0],m=y(p);if(m||f>1&&"string"==typeof p&&!g.checkClone&&kt.test(p))return t.each(function(i){var o=t.eq(i);m&&(e[0]=p.call(this,i,o.html())),Ft(o,e,n,r)});if(f&&(o=(i=bt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=w.map(vt(i,"script"),jt)).length;h<f;h++)u=i,h!==d&&(u=w.clone(u,!0,!0),s&&w.merge(a,vt(u,"script"))),n.call(t[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,w.map(a,Nt),h=0;h<s;h++)u=a[h],pt.test(u.type||"")&&!$.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(u.src):b(u.textContent.replace(Lt,""),l,u))}return t}function zt(t,e,n){for(var r,i=e?w.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(vt(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&gt(vt(r,"script")),r.parentNode.removeChild(r));return t}w.extend({htmlPrefilter:function(t){return t.replace(Pt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,u,c,l=t.cloneNode(!0),h=w.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=vt(l),r=0,i=(o=vt(t)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(c=u.nodeName.toLowerCase())&&ft.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(e)if(n)for(o=o||vt(t),a=a||vt(l),r=0,i=o.length;r<i;r++)It(o[r],a[r]);else It(t,l);return(a=vt(l,"script")).length>0&&gt(a,!h&&vt(t,"script")),l},cleanData:function(t){for(var e,n,r,i=w.event.special,o=0;void 0!==(n=t[o]);o++)if(Q(n)){if(e=n[$.expando]){if(e.events)for(r in e.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,e.handle);n[$.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),w.fn.extend({detach:function(t){return zt(this,t,!0)},remove:function(t){return zt(this,t)},text:function(t){return H(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!mt[(dt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(vt(this)),n&&n.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var n,r=[],i=w(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var Ut=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Bt=new RegExp(ot.join("|"),"i");function Vt(t,e,n){var r,i,o,a,s=t.style;return(n=n||Gt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||w.contains(t.ownerDocument,t)||(a=w.style(t,e)),!g.pixelBoxStyles()&&Ut.test(a)&&Bt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Mt.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);r="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",Mt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var r,i,o,s,u,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Xt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","Moz","ms"],Qt=a.createElement("div").style;function Zt(t){var e=w.cssProps[t];return e||(e=w.cssProps[t]=function(t){if(t in Qt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Yt.length;n--;)if((t=Yt[n]+e)in Qt)return t}(t)||t),e}function $t(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Jt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(t,n+ot[a],!0,i)),r?("content"===n&&(u-=w.css(t,"padding"+ot[a],!0,i)),"margin"!==n&&(u-=w.css(t,"border"+ot[a]+"Width",!0,i))):(u+=w.css(t,"padding"+ot[a],!0,i),"padding"!==n?u+=w.css(t,"border"+ot[a]+"Width",!0,i):s+=w.css(t,"border"+ot[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))),u}function te(t,e,n){var r=Gt(t),i=Vt(t,e,r),o="border-box"===w.css(t,"boxSizing",!1,r),a=o;if(Ut.test(i)){if(!n)return i;i="auto"}return a=a&&(g.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===w.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Jt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function ee(t,e,n,r,i){return new ee.prototype.init(t,e,n,r,i)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Vt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Y(e),u=Wt.test(e),c=t.style;if(u||(e=Zt(s)),a=w.cssHooks[e]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=ut(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=Y(e);return Wt.test(e)||(e=Zt(s)),(a=w.cssHooks[e]||w.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Vt(t,e,r)),"normal"===i&&e in Kt&&(i=Kt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,n,r){if(n)return!Ht.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?te(t,e,r):st(t,Xt,function(){return te(t,e,r)})},set:function(t,n,r){var i,o=Gt(t),a="border-box"===w.css(t,"boxSizing",!1,o),s=r&&Jt(t,e,r,a,o);return a&&g.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Jt(t,e,"border",!1,o)-.5)),s&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),$t(0,n,s)}}}),w.cssHooks.marginLeft=qt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Vt(t,"marginLeft"))||t.getBoundingClientRect().left-st(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=$t)}),w.fn.extend({css:function(t,e){return H(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Gt(t),i=e.length;a<i;a++)o[e[a]]=w.css(t,e[a],!1,r);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)},t,e,arguments.length>1)}}),w.Tween=ee,ee.prototype={constructor:ee,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var t=ee.propHooks[this.prop];return t&&t.get?t.get(this):ee.propHooks._default.get(this)},run:function(t){var e,n=ee.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ee.propHooks._default.set(this),this}},ee.prototype.init.prototype=ee.prototype,ee.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[w.cssProps[t.prop]]&&!w.cssHooks[t.prop]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},ee.propHooks.scrollTop=ee.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ee.prototype.init,w.fx.step={};var ne,re,ie=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function ae(){re&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ae):n.setTimeout(ae,w.fx.interval),w.fx.tick())}function se(){return n.setTimeout(function(){ne=void 0}),ne=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ce(t,e,n){for(var r,i=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function le(t,e,n){var r,i,o=0,a=le.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=ne||se(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:e,originalOptions:n,startTime:ne||se(),duration:n.duration,tweens:[],createTween:function(e,n){var r=w.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=Y(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=le.prefilters[o].call(c,t,l,c.opts))return y(r.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ce,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)n=t[r],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,c,l,h="width"in e||"height"in e,f=this,d={},p=t.style,m=t.nodeType&&at(t),v=$.get(t,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,w.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],ie.test(i)){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;m=!0}d[r]=v&&v[r]||w.style(t,r)}if((u=!w.isEmptyObject(e))||!w.isEmptyObject(d))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=$.get(t,"display")),"none"===(l=w.css(t,"display"))&&(c?l=c:(ht([t],!0),c=t.style.display||c,l=w.css(t,"display"),ht([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===w.css(t,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(m=v.hidden):v=$.access(t,"fxshow",{display:c}),o&&(v.hidden=!m),m&&ht([t],!0),f.done(function(){for(r in m||ht([t]),$.remove(t,"fxshow"),d)w.style(t,r,d[r])})),u=ce(m?v[r]:0,r,f),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),w.speed=function(t,e,n){var r=t&&"object"==typeof t?w.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=w.isEmptyObject(t),o=w.speed(e,n,r),a=function(){var e=le(this,w.extend({},t),o);(i||$.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=w.timers,a=$.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&oe.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=$.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(t,e){var n=w.fn[e];w.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}}),w.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),w.timers=[],w.fx.tick=function(){var t,e=0,n=w.timers;for(ne=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||w.fx.stop(),ne=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){re||(re=!0,ae())},w.fx.stop=function(){re=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,e){return t=w.fx&&w.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var he,fe=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return H(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?he:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=w.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&P(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),he={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var n=fe[e]||w.find.attr;fe[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=fe[a],fe[a]=i,i=null!=n(t,e,r)?a:null,fe[a]=o),i}});var de=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function me(t){return(t.match(F)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}w.fn.extend({prop:function(t,e){return H(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(e=w.propFix[e]||e,i=w.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){w(this).addClass(t.call(this,e,ve(this)))});if((e=ge(t)).length)for(;n=this[u++];)if(i=ve(n),r=1===n.nodeType&&" "+me(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=me(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){w(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=ge(t)).length)for(;n=this[u++];)if(i=ve(n),r=1===n.nodeType&&" "+me(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=me(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(n){w(this).toggleClass(t.call(this,n,ve(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=w(this),a=ge(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+me(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var ye=/\r/g;w.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ye,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:me(w.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(e=w(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=w.makeArray(e),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},g.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in n;var xe=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(t,e,r,i){var o,s,u,c,l,h,f,d,m=[r||a],v=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=u=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!xe.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(g=v.split(".")).shift(),g.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:w.makeArray(e,[t]),f=w.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(r,e))){if(!i&&!f.noBubble&&!x(r)){for(c=f.delegateType||v,xe.test(c+v)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(r.ownerDocument||a)&&m.push(u.defaultView||u.parentWindow||n)}for(o=0;(s=m[o++])&&!t.isPropagationStopped();)d=s,t.type=o>1?c:f.bindType||v,(h=($.get(s,"events")||{})[t.type]&&$.get(s,"handle"))&&h.apply(s,e),(h=l&&s[l])&&h.apply&&Q(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),e)||!Q(r)||l&&y(r[v])&&!x(r)&&((u=r[l])&&(r[l]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,_e),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,_e),w.event.triggered=void 0,u&&(r[l]=u)),t.result}},simulate:function(t,e,n){var r=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(r,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),g.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=$.access(r,e);i||r.addEventListener(t,n,!0),$.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=$.access(r,e)-1;i?$.access(r,e,i):(r.removeEventListener(t,n,!0),$.remove(r,e))}}});var be=n.location,Me=Date.now(),we=/\?/;w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e};var Te=/\[\]$/,Ae=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Se=/^(?:input|select|textarea|keygen)/i;function Ce(t,e,n,r){var i;if(Array.isArray(e))w.each(e,function(e,i){n||Te.test(t)?r(t,i):Ce(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==M(e))r(t,e);else for(i in e)Ce(t+"["+i+"]",e[i],n,r)}w.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){i(this.name,this.value)});else for(n in t)Ce(n,t[n],e,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Se.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!ft.test(t))}).map(function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:n.replace(Ae,"\r\n")}}).get()}});var Oe=/%20/g,Pe=/#.*$/,Re=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,De=/^\/\//,je={},Ne={},Ie="*/".concat("*"),Fe=a.createElement("a");function ze(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(F)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var i={},o=t===Ne;function a(s){var u;return i[s]=!0,w.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Ge(t,e){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&w.extend(!0,t,r),t}Fe.href=be.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,w.ajaxSettings),e):Ge(w.ajaxSettings,t)},ajaxPrefilter:ze(je),ajaxTransport:ze(Ne),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,u,c,l,h,f,d,p=w.ajaxSetup({},e),m=p.context||p,v=p.context&&(m.nodeType||m.jquery)?w(m):w.event,g=w.Deferred(),y=w.Callbacks("once memory"),x=p.statusCode||{},_={},b={},M="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=ke.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)T.always(t[T.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||M;return r&&r.abort(e),A(0,e),this}};if(g.promise(T),p.url=((t||p.url||be.href)+"").replace(De,be.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){c=a.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Fe.protocol+"//"+Fe.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Ue(je,p,e,T),l)return T;for(f in(h=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),i=p.url.replace(Pe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Oe,"+")):(d=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(we.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Re,"$1"),d=(we.test(i)?"&":"?")+"_="+Me+++d),p.url=i+d),p.ifModified&&(w.lastModified[i]&&T.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&T.setRequestHeader("If-None-Match",w.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ie+"; q=0.01":""):p.accepts["*"]),p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(m,T,p)||l))return T.abort();if(M="abort",y.add(p.complete),T.done(p.success),T.fail(p.error),r=Ue(Ne,p,e,T)){if(T.readyState=1,h&&v.trigger("ajaxSend",[T,p]),l)return T;p.async&&p.timeout>0&&(u=n.setTimeout(function(){T.abort("timeout")},p.timeout));try{l=!1,r.send(_,A)}catch(t){if(l)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,a,s){var c,f,d,_,b,M=e;l||(l=!0,u&&n.clearTimeout(u),r=void 0,o=s||"",T.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,T,a)),_=function(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(p,_,T,c),c?(p.ifModified&&((b=T.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=b),(b=T.getResponseHeader("etag"))&&(w.etag[i]=b)),204===t||"HEAD"===p.type?M="nocontent":304===t?M="notmodified":(M=_.state,f=_.data,c=!(d=_.error))):(d=M,!t&&M||(M="error",t<0&&(t=0))),T.status=t,T.statusText=(e||M)+"",c?g.resolveWith(m,[f,M,T]):g.rejectWith(m,[T,M,d]),T.statusCode(x),x=void 0,h&&v.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?f:d]),y.fireWith(m,[T,M]),h&&(v.trigger("ajaxComplete",[T,p]),--w.active||w.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return w.get(t,e,n,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:t,type:e,dataType:i,data:n,success:r},w.isPlainObject(t)&&t))}}),w._evalUrl=function(t){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){w(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},Ve=w.ajaxSettings.xhr();g.cors=!!Ve&&"withCredentials"in Ve,g.ajax=Ve=!!Ve,w.ajaxTransport(function(t){var e,r;if(g.cors||Ve&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Be[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),r=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){e&&r()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=w("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var qe,He=[],We=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||w.expando+"_"+Me++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,s=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(we.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?w(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,He.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((qe=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),w.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(r)):e=a),i=R.exec(t),o=!n&&[],i?[e.createElement(i[1])]:(i=bt([t],e,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var r,i,o},w.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=me(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&w.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?w("<div>").append(w.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c=w.css(t,"position"),l=w(t),h={};"static"===c&&(t.style.position="relative"),s=l.offset(),o=w.css(t,"top"),u=w.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,w.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):l.css(h)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(r,"marginTop",!0),left:e.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||Mt})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;w.fn[t]=function(r){return H(this,function(t,r,i){var o;if(x(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=qt(g.pixelPosition,function(t,n){if(n)return n=Vt(t,e),Ut.test(n)?w(t).position()[e]+"px":n})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return H(this,function(e,n,i){var o;return x(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,n,s):w.style(e,n,i,s)},e,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),w.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=u.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(u.call(arguments)))}).guid=t.guid=t.guid||w.guid++,i},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=P,w.isFunction=y,w.isWindow=x,w.camelCase=Y,w.type=M,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(r=function(){return w}.apply(e,[]))||(t.exports=r);var Xe=n.jQuery,Ke=n.$;return w.noConflict=function(t){return n.$===w&&(n.$=Ke),t&&n.jQuery===w&&(n.jQuery=Xe),w},i||(n.jQuery=n.$=w),w})},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(3),o=n(183);o=o.__esModule?o.default:o;var a,s,u=n(501),c=n(502),l=n(239),h=n(240),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d='<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="100%" height="100%"></foreignObject></svg>',p={},m=200,v=15;function g(){var t;for(t=0;t<arguments.length;t+=1)if(isFinite(arguments[t]))return arguments[t]}var y=t.exports={DistanceGrid:l,ClusterGroup:h,pointInPolygon:function(t,e,n,r){var i,o,a=!1,s=e.length;if(!(r&&r.min&&r.max&&(t.x<r.min.x||t.y<r.min.y||t.x>r.max.x||t.y>r.max.y))){if(s<3)return!1;for(i=0,o=s-1;i<s;o=i,i+=1)e[i].y>t.y!=e[o].y>t.y&&t.x<(e[o].x-e[i].x)*(t.y-e[i].y)/(e[o].y-e[i].y)+e[i].x&&(a=!a);return n&&a&&n.forEach(function(e){a=a&&!y.pointInPolygon(t,e)}),a}},pointTo2DTriangleBasis:function(t,e,n,r){var i=n.x-e.x,o=r.x-e.x,a=n.y-e.y,s=r.y-e.y,u=t.x-e.x,c=t.y-e.y,l=i*s-o*a;if(l)return{x:(u*s-c*o)/l,y:(u*-a+c*i)/l}},isReadyImage:function(t,e){return!!(t instanceof Image&&t.complete&&t.src&&(t.naturalWidth&&t.naturalHeight||e))},isReadyVideo:function(t,e){return!!(t instanceof HTMLVideoElement&&t.src&&void 0!==t.HAVE_CURRENT_DATA&&(t.videoWidth&&t.videoHeight&&t.readyState>=t.HAVE_CURRENT_DATA||e&&t.error))},isFunction:function(t){return"function"==typeof t},ensureFunction:function(t){return y.isFunction(t)?t:function(){return t}},isNonNullFinite:function(t){return isFinite(t)&&null!==t&&!1!==t&&""!==t},randomString:function(t){var e,n,r;for(t=t||8,e="",n=0;n<t;n+=1)r=Math.floor(Math.random()*f.length),e+=f.substring(r,r+1);return e},convertColor:function(t){if(void 0===t||null===t||void 0!==t.r&&void 0!==t.g&&void 0!==t.b)return t;var e;if("string"==typeof t){var n=t.toLowerCase();if(y.cssColors.hasOwnProperty(n))t=y.cssColors[n];else if("#"===t.charAt(0))4===t.length||5===t.length?(5===t.length&&(e=parseInt(t.slice(4),16)/15),t=4352*(3840&(t=parseInt(t.slice(1,4),16)))+272*(240&t)+17*(15&t)):7!==t.length&&9!==t.length||(9===t.length&&(e=parseInt(t.slice(7),16)/255),t=parseInt(t.slice(1,7),16));else if("transparent"===n)e=t=0;else if(n.indexOf("(")>=0)for(var r=0;r<y.cssColorConversions.length;r+=1){var i=y.cssColorConversions[r].regex.exec(n);if(i)return y.cssColorConversions[r].process(n,i)}}return isFinite(t)&&(t={r:((16711680&t)>>16)/255,g:((65280&t)>>8)/255,b:(255&t)/255}),void 0!==e&&t&&void 0!==t.r&&(t.a=e),t},convertColorAndOpacity:function(t,e,n){return(t=y.convertColor(t))&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t=y.convertColor(n||{r:0,g:0,b:0})),t&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t={r:0,g:0,b:0}),t={r:isFinite(t.r)&&t.r>=0?t.r<=1?+t.r:1:0,g:isFinite(t.g)&&t.g>=0?t.g<=1?+t.g:1:0,b:isFinite(t.b)&&t.b>=0?t.b<=1?+t.b:1:0,a:y.isNonNullFinite(t.a)&&t.a>=0&&t.a<1?+t.a:1},y.isNonNullFinite(e)&&e<1&&(t.a=e<=0?0:t.a*e),t},convertColorToHex:function(t,e){var n,r=y.convertColor(t);return n=r.r||r.g||r.b?"#"+((1<<24)+(Math.round(255*r.r)<<16)+(Math.round(255*r.g)<<8)+Math.round(255*r.b)).toString(16).slice(1):"#000000",void 0!==r.a&&e&&(r.a<1||"needed"!==e)&&(n+=(256+Math.round(255*r.a)).toString(16).slice(1)),n},convertColorToRGBA:function(t){var e=y.convertColor(t);return e||(e={r:0,g:0,b:0}),(!y.isNonNullFinite(e.a)||e.a>1)&&(e.a=1),"rgba("+Math.round(255*e.r)+", "+Math.round(255*e.g)+", "+Math.round(255*e.b)+", "+ +(+e.a).toFixed(5)+")"},normalizeCoordinates:function(t){return t=t||{},Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:{x:g(t.x,t.longitude,t.lng,t.lon,0),y:g(t.y,t.latitude,t.lat,0),z:g(t.z,t.elevation,t.elev,t.height,0)}},range:function(t,e,n){n=n||1;for(var r=[],i=t;i<=e;i+=n)r.push(i);return r},compareArrays:function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})},vec3AsArray:function(){return[0,0,0]},mat3AsArray:function(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function(t,e,n){var r,i=t.sourceByName(e);return(r=i.data())instanceof Float32Array&&r.length===n?r:(r=new Float32Array(n),i.setData(r),r)},adjustActions:function(t){var e,n;for(n=0;n<t.length;n+=1){if(e=t[n],"string"===i.type(e.input)){var r={};r[e.input]=!0,e.input=r}if(e.modifiers||(e.modifiers={}),"string"===i.type(e.modifiers)){var o={};o[e.modifiers]=!0,e.modifiers=o}}},addAction:function(t,e,n){n?t.push(e):t.unshift(e),y.adjustActions(t)},hasAction:function(t,e,n,r){e&&e.action&&(n=e.name,r=e.owner,e=e.action);for(var i=0;i<t.length;i+=1)if(!(e&&t[i].action!==e||n&&t[i].name!==n||r&&t[i].owner!==r))return t[i];return null},removeAction:function(t,e,n,r){var o,a=0;do{(o=y.hasAction(t,e,n,r))&&(t.splice(i.inArray(o,t),1),a+=1)}while(o);return a},actionMatch:function(t,e,n){var r;if(n.some(function(n){for(var i in n.input)if(n.input.hasOwnProperty(i)&&(!1===n.input[i]&&t[i]||n.input[i]&&!t[i]))return!1;for(var o in n.modifiers)if(n.modifiers.hasOwnProperty(o)&&(!1===n.modifiers[o]&&e[o]||n.modifiers[o]&&!e[o]))return!1;return r=n,!0}))return r},pixelCoordinateParams:function(t,e,n,r,o){var a,s,u;t&&(a=(t=i(t)).innerWidth(),s=t.innerHeight()),r=r||e,o=o||n,u=r!==e||o!==n;var c=Math.min(0,Math.floor(Math.log(Math.min((a||r)/r,(s||o)/o))/Math.log(2))),l=Math.ceil(Math.log(Math.max(e/r,n/o))/Math.log(2));return{map:{node:t,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:e,bottom:n},unitsPerPixel:Math.pow(2,l),center:{x:e/2,y:n/2},min:c,max:l,zoom:c,clampBoundsX:!0,clampBoundsY:!0,clampZoom:!0},layer:{maxLevel:l,wrapX:!1,wrapY:!1,tileOffset:function(){return{x:0,y:0}},attribution:"",tileWidth:r,tileHeight:o,tileRounding:Math.ceil,tilesAtZoom:u?function(t){var i=Math.pow(2,l-t);return{x:Math.ceil(e/r/i),y:Math.ceil(n/o/i)}}:void 0,tilesMaxBounds:u?function(t){var r=Math.pow(2,l-t);return{x:Math.floor(e/r),y:Math.floor(n/r)}}:void 0}}},centerFromPerimeter:function(t){var e,n,r,i,o,a;if(t&&t.length){if(1===t.length)return{x:t[0].x,y:t[0].y};for(e={x:0,y:0},o=0,n=t[t.length-1],a=0;a<t.length;a+=1)r=n,n=t[a],i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)),e.x+=(n.x+r.x)*i,e.y+=(n.y+r.y)*i,o+=2*i;return e.x/=o,e.y/=o,o?e:{x:n.x,y:n.y}}},distance2dSquared:function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},distance2dToLineSquared:function(t,e,n){var r=n.x-e.x,i=n.y-e.y,o=r*r+i*i,a=0;return o&&(a=((t.x-e.x)*r+(t.y-e.y)*i)/o,a=Math.max(0,Math.min(1,a))),y.distance2dSquared(t,{x:e.x+a*r,y:e.y+a*i})},triangleTwiceSignedArea2d:function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)},crossedLineSegments2d:function(t,e,n,r){return!(t.x>n.x&&t.x>r.x&&e.x>n.x&&e.x>r.x||t.x<n.x&&t.x<r.x&&e.x<n.x&&e.x<r.x||t.y>n.y&&t.y>r.y&&e.y>n.y&&e.y>r.y||t.y<n.y&&t.y<r.y&&e.y<n.y&&e.y<r.y)&&(!(t.x===n.x&&t.y===n.y||t.x===r.x&&t.y===r.y||e.x===n.x&&e.y===n.y||e.x===r.x&&e.y===r.y)&&!(y.triangleTwiceSignedArea2d(t,e,n)*y.triangleTwiceSignedArea2d(t,e,r)>0||y.triangleTwiceSignedArea2d(n,r,t)*y.triangleTwiceSignedArea2d(n,r,e)>0))},segmentCrossesLineList2d:function(t,e,n){return n.some(function(n){return n.some(function(r,i){if(i)return y.crossedLineSegments2d(t,e,n[i-1],r)})})},rdpLineSimplify:function(t,e,n,r){if(t.length<=2||e<0)return t;var i,o,a,s=-1,u=e*e;if(n){for(i=1;i<t.length;i+=1)(o=y.distance2dSquared(t[0],t[i]))>s&&(s=o,a=i);return 4*s<=u?t.slice(a,a+1):(t=t.slice(a).concat(t.slice(0,a+1)),(t=y.rdpLineSimplify(t,e,!1,r)).splice(t.length-1),t)}for(i=1;i<t.length-1;i+=1)(o=y.distance2dToLineSquared(t[i],t[0],t[t.length-1]))>s&&(s=o,a=i);if(s<=u&&(!r||!y.segmentCrossesLineList2d(t[0],t[t.length-1],r)))return[t[0],t[t.length-1]];var c=t.slice(0,a+1),l=t.slice(a),h=y.rdpLineSimplify(c,e,!1,r?r.concat([l]):null),f=y.rdpLineSimplify(l,e,!1,r?r.concat([c]):null);return h.slice(0,h.length-1).concat(f)},getMinMaxValues:function(t,e,n,r){if(t.length&&(r||!i.isNumeric(e)||!i.isNumeric(n))){var o,a,s=t[0],u=t[0];for(a=t.length-1;a>0;a-=1)(o=t[a])<s&&(s=o),o>u&&(u=o);(!i.isNumeric(e)||r&&s>e)&&(e=s),(!i.isNumeric(n)||r&&u<n)&&(n=u)}return{min:e,max:n}},wrapAngle:function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},escapeUnicodeHTML:function(t){return t.replace(/./g,function(t){var e=t.charCodeAt();return e<127?t:"&#"+e.toString(10)+";"})},dereferenceElements:function(t){var e=[];return i("img,image",t).each(function(){var t=i(this),n=t.is("image")?"href":"src";if(t.attr(n)){var r=new Image;("http"===t.attr(n).substr(0,4)||t[0].crossOrigin)&&(r.crossOrigin=t[0].crossOrigin||"anonymous");var o=i.Deferred();r.onload=function(){var e=document.createElement("canvas");e.width=r.naturalWidth,e.height=r.naturalHeight,e.getContext("2d").drawImage(r,0,0),t.attr(n,e.toDataURL("image/png")),"data:image"!==t.attr(n).substr(0,10)&&t.remove(),o.resolve()},r.onerror=function(){t.remove(),o.resolve()},r.src=t.attr(n),e.push(o)}}),e},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function(t,e,n,r,o){var a=[],s=[];if(t=(t=t.replace(/\/\*[^\0]*?\*\//g,"")).replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n"),o){var u=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(o);o=u&&u[1]?u[1]+"/":null}t.replace(y.dereferenceCssUrlsRegex,function(t,e){var n=a.length,r=i.Deferred(),u=new XMLHttpRequest;return a.push(r),s.push(""),/^[^/:][^:]*(\/|$)/g.exec(e)&&o&&(e=o+e),u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=function(){if(200===this.status){var t,e=new Uint8Array(this.response),i=new Array(e.length);for(t=0;t<e.length;t+=1)i[t]=String.fromCharCode(e[t]);i=i.join(""),s[n]="url(data:"+u.getResponseHeader("content-type")+";base64,"+btoa(i)+")"}r.resolve()},u.onerror=r.resolve,u.send(),t}),i.when.apply(i,a).then(function(){var i=0;t=t.replace(y.dereferenceCssUrlsRegex,function(t,e){return s[(i+=1)-1]}),void 0===r?e.text(t):e.style[r]=t,n.resolve()})},htmlToImageSupported:function(){if(void 0===s){var t=i.Deferred(),e=i(d);e.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"}),i("foreignObject",e).append("<div/>");var n=new Image;return n.onload=n.onerror=function(){var e=document.createElement("canvas");e.width=10,e.height=10,e.getContext("2d").drawImage(n,0,0);try{e.toDataURL(),s=!0}catch(t){console.warn("This browser does not support converting HTML to an image via SVG foreignObject.  Some functionality will be limited.",t),s=!1}t.resolve(s)},n.src="data:image/svg+xml;base64,"+btoa(y.escapeUnicodeHTML((new XMLSerializer).serializeToString(e[0]))),t}return s},htmlToImage:function(t,e){var n,r=i.Deferred(),o=[y.htmlToImageSupported()],a=i(t);for(t=i(t).clone();e&&e>0;)(a=a.parent()).is("div")&&((n=i("<div>").attr({class:a.attr("class"),id:a.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0})).append(t),t=n),e-=1;i("canvas",t).remove(),i("*",t).addBack().each(function(){for(var t=this.style,e=0;e<t.length;e+=1){var n=this.style[e];if(this.style[n].match(y.dereferenceCssUrlsRegex)){var r=i.Deferred();y.dereferenceCssUrls(this.style[n],this,r,n),o.push(r)}}}),(n=i('<div xmlns="http://www.w3.org/1999/xhtml">')).css({width:a.width()+"px",height:a.height()+"px"}),n.append(i("<head>"));var s=i("<body>");return n.append(s),s.css({width:a.width()+"px",height:a.height()+"px",background:"none",margin:0}),s.append(t),o=o.concat(y.dereferenceElements(t)),i('style,link[rel="stylesheet"]').each(function(){var t=i('<style type="text/css">'),e=i.Deferred();if(i(this).is("style")){var r=i(this).text();y.dereferenceCssUrls(r,t,e)}else{var a=i(this).attr("href");i.get(a).done(function(n){y.dereferenceCssUrls(n,t,e,void 0,a)}).fail(function(n,r,i){console.warn("Failed to dereference "+a,r,i),t.remove(),e.resolve()})}o.push(e),i("head",n).append(t)}),i.when.apply(i,o).then(function(){var t=i(d);t.attr({width:a.width()+"px",height:a.height()+"px","text-rendering":"optimizeLegibility"}),i("foreignObject",t).append(n);var e=new Image;y.htmlToImageSupported()?(e.onload=function(){r.resolve(e)},e.onerror=function(){console.warn("Failed to render html to image"),r.reject()},e.src="data:image/svg+xml;base64,"+btoa(y.escapeUnicodeHTML((new XMLSerializer).serializeToString(t[0])))):r.resolve(e)}),r},timeReport:function(t){return i.each(p,function(t,e){e.count?(e.stddev=Math.sqrt(Math.abs((e.sum2-e.sum*e.sum/e.count)/e.count)),e.average=e.sum/e.count):(e.stddev=0,e.average=0)}),t?p[t]:p},timeFunctionStart:function(t,e){p[t]&&!e||(p[t]={count:0,sum:0,sum2:0,max:0,recent:[]}),p[t].start=window.performance.now()},timeFunctionStop:function(t){if(p[t]&&p[t].start){var e=window.performance.now()-p[t].start;p[t].start=null,p[t].sum+=e,p[t].sum2+=e*e,p[t].count+=1,p[t].max=Math.max(p[t].max,e),p[t].recent.push(e),p[t].recent.length>m&&p[t].recent.splice(0,p[t].recent.length-m)}},timeRequestAnimationFrame:function(t,e,n,r){p.requestAnimationFrame&&!e||(p.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}),n&&(v=n),r&&(m=r),t&&a?(window.requestAnimationFrame=a,a=null):t||a||(a=window.requestAnimationFrame,window.requestAnimationFrame=function(t){return a.call(window,function(e){var n,r=p.requestAnimationFrame;r.timestamp!==e&&(r.nowDelta=window.performance.now()-e,Math.abs(r.nowDelta)<1e3&&(r.nowDelta=0),r.timestamp=e,r.subcalls=r.subcalls||0,r.start={sum:r.sum,sum2:r.sum2,count:r.count,max:r.max,above_threshold:r.above_threshold},r.recent.push([0]),r.recentsub.push([]),r.recent.length>m&&(r.recent.splice(0,r.recent.length-m),r.recentsub.splice(0,r.recentsub.length-m))),r.subcalls+=1,t.apply(this,arguments);var i=window.performance.now()-e;i-=r.nowDelta,r.sum=r.start.sum+i,r.sum2=r.start.sum2+i*i,r.count=r.start.count+1,r.max=Math.max(r.max,i),r.above_threshold=r.start.above_threshold+(i>=v?1:0),r.recent[r.recent.length-1]=i,(n=r.recentsub[r.recent.length-1]).push({total_duration:i,duration:i-(n.length?n[n.length-1].total_duration:0),callback:t.name||t})})})},isObject:function(t){var e=void 0===t?"undefined":r(t);return null!==t&&void 0!==t&&("object"===e||"function"===e)},radiusEarth:o.WGS84.a,cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?",cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssColors:{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}};y.cssColorConversions=[{name:"rgb",regex:new RegExp("^\\s*rgba?\\(\\s*("+y.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+y.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+y.cssNumberRegex+")\\s*(%?)\\s*([/,]?\\s*("+y.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){return t={r:Math.min(1,Math.max(0,+e[1]/(e[2]?100:255))),g:Math.min(1,Math.max(0,+e[3]/(e[4]?100:255))),b:Math.min(1,Math.max(0,+e[5]/(e[6]?100:255)))},e[7]&&(t.a=Math.min(1,Math.max(0,+e[8]/(e[9]?100:1)))),t}},{name:"hsl",regex:new RegExp("^\\s*hsla?\\(\\s*("+y.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*,?\\s*("+y.cssNumberRegex+")\\s*%\\s*,?\\s*("+y.cssNumberRegex+")\\s*%\\s*([/,]?\\s*("+y.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){var n=function(t,e,n){return 6*(n-=Math.floor(n))<1?t+(e-t)*n*6:6*n<3?e:6*n<4?t+(e-t)*(2/3-n)*6:t},r=+e[1]/(y.cssAngleUnitsBase[e[2]]||360),i=Math.min(1,Math.max(0,+e[3]/100)),o=Math.min(1,Math.max(0,+e[4]/100)),a=o<=.5?o*(i+1):o+i-o*i,s=2*o-a;return t={r:n(s,a,r+1/3),g:n(s,a,r),b:n(s,a,r-1/3)},e[5]&&(t.a=Math.min(1,Math.max(0,+e[6]/(e[7]?100:1)))),t}}],i.extend(y,u,c)},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"h",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"l",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"i",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"o",function(){return v}),n.d(e,"n",function(){return g});var r=1,i=2,o=4,a=5,s=484813681109536e-20,u=Math.PI/2,c=.16666666666666666,l=.04722222222222222,h=.022156084656084655,f=1e-10,d=.017453292519943295,p=57.29577951308232,m=Math.PI/4,v=2*Math.PI,g=3.14159265359},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(75)("wks"),i=n(46),o=n(7).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";var r=n(6),i=n(69);e.a=function(t){return Math.abs(t)<=r.n?t:t-Object(i.a)(t)*r.o}},function(t,e,n){t.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(4),i=n(148),o=n(33),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(35),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r={layerAdd:"geo_layerAdd",layerRemove:"geo_layerRemove",zoom:"geo_zoom",rotate:"geo_rotate",pan:"geo_pan",resize:"geo_resize",draw:"geo_draw",drawEnd:"geo_drawEnd",mousemove:"geo_mousemove",mouseclick:"geo_mouseclick",brush:"geo_brush",brushend:"geo_brushend",brushstart:"geo_brushstart",select:"geo_select",zoomselect:"geo_zoomselect",unzoomselect:"geo_unzoomselect",actiondown:"geo_actiondown",actionmove:"geo_actionmove",actionup:"geo_actionup",actionselection:"geo_actionselection",actionwheel:"geo_actionwheel",keyaction:"geo_keyaction",transitionstart:"geo_transitionstart",transitionend:"geo_transitionend",transitioncancel:"geo_transitioncancel",parallelprojection:"geo_parallelprojection",feature:{mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",brushend:"geo_feature_brushend",brush:"geo_feature_brush"},pixelmap:{prepared:"geo_pixelmap_prepared"},screenshot:{ready:"geo_screenshot_ready"},camera:{}};r.camera.view="geo_camera_view",r.camera.projection="geo_camera_projection",r.camera.viewport="geo_camera_viewport",r.annotation={},r.annotation.add="geo_annotation_add",r.annotation.add_before="geo_annotation_add_before",r.annotation.update="geo_annotation_update",r.annotation.coordinates="geo_annotation_coordinates",r.annotation.select_edit_handle="geo_annotation_select_edit_handle",r.annotation.edit_action="geo_annotation_edit_action",r.annotation.remove="geo_annotation_remove",r.annotation.state="geo_annotation_state",r.annotation.mode="geo_annotation_mode",t.exports=r},function(t,e,n){var r=n(34);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(183);r=r.__esModule?r.default:r;var i=n(495);i.keys().forEach(function(t){r.Proj.projections.add(i(t))});var o=n(5),a={},s=function t(e){if(!(this instanceof t))return(e=e||{}).source in a||(Object.size(a)>=10&&(a={}),a[e.source]={}),e.target in a[e.source]||(Object.size(a[e.source])>=10&&(a[e.source]={}),a[e.source][e.target]=new t(e)),a[e.source][e.target];var n,i,o,s=this;function u(){n=new r(s.source(),s.target())}this.source=function(t){return void 0===t?i||"EPSG:4326":(i=t,u(),s)},this.target=function(t){return void 0===t?o||"EPSG:3857":(o=t,u(),s)},this._forward=function(t){var e=n.forward(t);return e.z=t.z||0,e},this._inverse=function(t){var e=n.inverse(t);return e.z=t.z||0,e},this.forward=function(t){return Array.isArray(t)?t.map(s._forward):s._forward(t)},this.inverse=function(t){return Array.isArray(t)?t.map(s._inverse):s._inverse(t)},e=e||{};try{this.source(e.source)}catch(t){console.error("Can't use transform source: "+e.source),this.source("EPSG:4326")}try{this.target(e.target)}catch(t){console.error("Can't use transform target: "+e.target),this.target("EPSG:3857")}return this};s.defs=r.defs,s.lookup=function(t){var e,i,o=n(3),a=o.Deferred();return r.defs.hasOwnProperty(t)?a.resolve(r.defs[t]):2!==(i=t.split(":")).length||"EPSG"!==i[0].toUpperCase()?a.reject("Invalid projection code").promise():(e=i[1],o.ajax({url:"http://epsg.io/?q="+e+"&format=json"}).done(function(e){var n=(e.results||[])[0];return n&&n.proj4?(r.defs(t,n.proj4),o.when(r.defs[t])):a.reject(e).promise()}))},s.transformCoordinates=function(t,e,n,r){if(t===e)return n;var i,a=s({source:t,target:e});return o.isObject(n)&&"x"in n&&"y"in n?(i=a.forward({x:+n.x,y:+n.y,z:+n.z||0}),"z"in n?i:{x:i.x,y:i.y}):Array.isArray(n)&&1===n.length&&o.isObject(n[0])&&"x"in n[0]&&"y"in n[0]?(i=a.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0}),"z"in n[0]?[i]:[{x:i.x,y:i.y}]):s.transformCoordinatesArray(a,n,r)},s.transformCoordinatesArray=function(t,e,n){var r,i,a,s,u,c,l,h,f;function d(){if(Array.isArray(e[0]))if(2===e[0].length)s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},l=function(t,e,n){h[t]=[e,n]};else{if(3!==e[0].length)throw new Error("Invalid coordinates. Requires two or three components per array");s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},c=function(t){return+e[t][2]},l=function(t,e,n,r){h[t]=[e,n,r]}}else if(2===e.length)a=2,s=function(t){return+e[t*a]},u=function(t){return+e[t*a+1]},l=function(t,e,n){h[t]=e,h[t+1]=n};else if(3===e.length)a=3,s=function(t){return+e[t*a]},u=function(t){return+e[t*a+1]},c=function(t){return+e[t*a+2]},l=function(t,e,n,r){h[t]=e,h[t+1]=n,h[t+2]=r};else{if(!n)throw new Error("Invalid coordinates");if(2!==n&&3!==n)throw new Error("Number of components should be two or three");a=n,s=function(t){return+e[t]},u=function(t){return+e[t+1]},2===n?l=function(t,e,n){h[t]=e,h[t+1]=n}:(c=function(t){return+e[t+2]},l=function(t,e,n,r){h[t]=e,h[t+1]=n,h[t+2]=r})}}if(c=function(){return 0},!Array.isArray(e))throw new Error("Coordinates are not valid");if((h=[]).length=e.length,i=e.length,!e.length)return h;for(Array.isArray(e[0])||o.isObject(e[0])?(a=1,Array.isArray(e[0])?d():o.isObject(e[0])&&function(){if(!(e[0]&&"x"in e[0]&&"y"in e[0]))throw new Error("Invalid coordinates");s=function(t){return+e[t].x},u=function(t){return+e[t].y},"z"in e[0]?(c=function(t){return+e[t].z},l=function(t,e,n,i){h[r]={x:e,y:n,z:i}}):l=function(t,e,n){h[t]={x:e,y:n}}}()):d(),r=0;r<i;r+=a)f=t.forward({x:s(r),y:u(r),z:c(r)}),l(r,f.x,f.y,f.z);return h},s.affineForward=function(t,e){var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=(e[n].x-r.x)*i.x,e[n].y=(e[n].y-r.y)*i.y,e[n].z=((e[n].z||0)-(r.z||0))*i.z;return e},s.affineInverse=function(t,e){var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=e[n].x/i.x+r.x,e[n].y=e[n].y/i.y+r.y,e[n].z=(e[n].z||0)/i.z+(r.z||0);return e},s.sphericalDistance=function(t,e,n,i,o){if(i=i||"EPSG:4326",o=o||r.WGS84,(n=n||i)!==i){var a=s.transformCoordinates(n,i,[t,e]);t=a[0],e=a[1]}var u=t.y*Math.PI/180,c=e.y*Math.PI/180,l=(e.x-t.x)*Math.PI/180,h=Math.sin(u),f=Math.cos(u),d=Math.sin(c),p=Math.cos(c),m=Math.atan2(Math.pow(Math.pow(p*Math.sin(l),2)+Math.pow(f*d-h*p*Math.cos(l),2),.5),h*d+f*p*Math.cos(l));return o.a*m},s.vincentyDistance=function(t,e,n,i,o,a){if(i=i||"EPSG:4326",o=o||r.WGS84,a=a||100,(n=n||i)!==i){var u=s.transformCoordinates(n,i,[t,e]);t=u[0],e=u[1]}var c,l,h,f,d,p,m,v,g,y,x=o.a,_=o.b||o.a*(1-(o.f||1/o.rf)),b=o.f||(o.rf?1/o.rf:1-_/x),M=t.y*Math.PI/180,w=e.y*Math.PI/180,T=((e.x-t.x)%360+360)%360*Math.PI/180,A=Math.atan((1-b)*Math.tan(M)),E=Math.atan((1-b)*Math.tan(w)),S=Math.sin(A),C=Math.cos(A),O=Math.sin(E),P=Math.cos(E),R=T,k=T+2*Math.PI;if(M===w&&!T)return{distance:0,alpha1:0,alpha2:0};for(y=a;y>0&&Math.abs(R-k)>1e-12;y-=1)c=Math.pow(Math.pow(P*Math.sin(R),2)+Math.pow(C*O-S*P*Math.cos(R),2),.5),l=S*O+C*P*Math.cos(R),h=Math.atan2(c,l),f=C*P*Math.sin(R)/c,k=R,R=T+(1-(m=b/16*(d=1-Math.pow(f,2))*(4+b*(4-3*d))))*b*f*(h+m*c*((p=l-(d?2*S*O/d:0))+m*l*(2*Math.pow(p,2)-1)));return y?{distance:_*(1+(v=d*(x*x-_*_)/(_*_))/16384*(4096+v*(v*(320-175*v)-768)))*(h-(g=v/1024*(256+v*(v*(74-47*v)-128)))*c*(p+g/4*(l*(2*Math.pow(p,2)-1)-g/6*p*(4*c*c-3)*(4*Math.pow(p,2)-3)))),alpha1:Math.atan2(P*Math.sin(R),C*O-S*P*Math.cos(R)),alpha2:Math.atan2(C*Math.sin(R),-S*P+C*O*Math.cos(R))}:void 0},s.proj4=r,t.exports=s},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(3),o=n(1),a=n(55),s=n(23),u=n(15),c=function t(e){if(!(this instanceof t))return new t(e);a.call(this);var r=n(5);e=e||{};var o,c=this,l=this._exit,h=this.geoOn,f=this.geoOff,d=void 0===e.selectionAPI?"auto":e.selectionAPI,p={},m=void 0===e.layer?null:e.layer,v=e.gcs,g=void 0===e.visible||e.visible,y=void 0===e.bin?null:e.bin,x=void 0===e.renderer?null:e.renderer,_=s(),b=s(),M=s(),w=[],T=[];return this._subfeatureStyles={},Object.defineProperty(this,"ready",{get:function(){return o}}),this._bindMouseHandlers=function(){c.selectionAPI()&&(c._unbindMouseHandlers(),c.geoOn(u.mousemove,c._handleMousemove),c.geoOn(u.mouseclick,c._handleMouseclick),c.geoOn(u.brushend,c._handleBrushend),c.geoOn(u.brush,c._handleBrush))},this._unbindMouseHandlers=function(){c.geoOff(u.mousemove,c._handleMousemove),c.geoOff(u.mouseclick,c._handleMouseclick),c.geoOff(u.brushend,c._handleBrushend),c.geoOff(u.brush,c._handleBrush)},this.pointSearch=function(t){return{index:[],found:[]}},this.boxSearch=function(t,e,n){return[]},this._handleMousemove=function(){var e,n=c.layer().map().interactor().mouse(),r=c.data(),i=c.pointSearch(n.geo),o=[],a=[],s=-1,l=-1;(T.length||i.index.length)&&(e=i.extra||{},i.index.length>1&&c.geoTrigger(u.feature.mouseover_order,{feature:c,mouse:n,previous:T,over:i}),T.length&&(s=T[T.length-1]),o=i.index.filter(function(t){return T.indexOf(t)<0}),a=T.filter(function(t){return i.index.indexOf(t)<0}),t.eventID+=1,o.forEach(function(i,a){c.geoTrigger(u.feature.mouseover,{data:r[i],index:i,extra:e[i],mouse:n,eventID:t.eventID,top:a===o.length-1},!0)}),t.eventID+=1,a.forEach(function(e,i){c.geoTrigger(u.feature.mouseout,{data:r[e],index:e,mouse:n,eventID:t.eventID,top:i===a.length-1},!0)}),t.eventID+=1,i.index.forEach(function(o,a){c.geoTrigger(u.feature.mousemove,{data:r[o],index:o,extra:e[o],mouse:n,eventID:t.eventID,top:a===i.index.length-1},!0)}),(T=i.index).length&&(l=T[T.length-1]),s!==l&&(-1!==s&&c.geoTrigger(u.feature.mouseoff,{data:r[s],index:s,mouse:n},!0),-1!==l&&c.geoTrigger(u.feature.mouseon,{data:r[l],index:l,extra:e[l],mouse:n},!0)))},this._clearSelectedFeatures=function(){return T=[],c},this._handleMouseclick=function(e){var n=c.layer().map().interactor().mouse(),r=c.data(),i=c.pointSearch(n.geo),o=i.extra||{};i.index.length>1&&c.geoTrigger(u.feature.mouseclick_order,{feature:c,mouse:n,over:i}),n.buttonsDown=e.buttonsDown,t.eventID+=1,i.index.forEach(function(e,a){c.geoTrigger(u.feature.mouseclick,{data:r[e],index:e,extra:o[e],mouse:n,eventID:t.eventID,top:a===i.index.length-1},!0)})},this._handleBrush=function(e){var n=c.boxSearch(e.gcs.lowerLeft,e.gcs.upperRight),r=c.data();t.eventID+=1,n.forEach(function(n,i){c.geoTrigger(u.feature.brush,{data:r[n],index:n,mouse:e.mouse,brush:e,eventID:t.eventID,top:i===i.length-1},!0)})},this._handleBrushend=function(e){var n=c.boxSearch(e.gcs.lowerLeft,e.gcs.upperRight),r=c.data();t.eventID+=1,n.forEach(function(n,i){c.geoTrigger(u.feature.brushend,{data:r[n],index:n,mouse:e.mouse,brush:e,eventID:t.eventID,top:i===i.length-1},!0)})},this.style=function(t,e){return void 0===t?p:"string"==typeof t&&void 0===e?p[t]:void 0===e?(p=i.extend({},p,t),c.modified(),c):(p[t]=e,c.modified(),c)},this.style.get=function(t){if(void 0===t){var e,n={};for(e in p)p.hasOwnProperty(e)&&(n[e]=c.style.get(e));return n}return t.toLowerCase().match(/color$/)?r.isFunction(p[t])?function(){return r.convertColor(p[t].apply(c,arguments))}:r.ensureFunction(r.convertColor(p[t])):r.ensureFunction(p[t])},this.updateStyleFromArray=function(t,e,n){if("string"!=typeof t)i.each(t,function(t,e){c.updateStyleFromArray(t,e)});else{var r;if(t.toLowerCase().match(/color$/)&&(r={r:0,g:0,b:0}),!Array.isArray(e))return c;c._subfeatureStyles[t]?e.length&&Array.isArray(e[0])?c.style(t,function(t,n,i,o){var a=(e[o]||[])[n];return void 0!==a?a:r}):c.style(t,function(t,n,i,o){var a=e[o];return void 0!==a?a:r}):c.style(t,function(t,n){var i=e[n];return void 0!==i?i:r})}return n&&c.visible()&&c.draw(),c},this.layer=function(){return m},this.renderer=function(){return x},this.gcs=function(t){return void 0===t?void 0!==v&&null!==v||!m?v:m.map().ingcs():(v=t,c.modified(),c)},this.featureGcsToDisplay=function(t){var e=m.map();return t=e.gcsToWorld(t,c.gcs()),t=e.worldToDisplay(t),x.baseToLocal&&(t=x.baseToLocal(t)),t},this.visible=function(t,e){if(void 0===t)return!(!e&&m&&m.visible&&!m.visible())&&g;if(g!==t||e){g=t,c.modified(),m&&m.visible&&!m.visible()&&(t=!1),t?c._bindMouseHandlers():c._unbindMouseHandlers();for(var n=0;n<w.length;n+=1)w[n].visible(g,e)}return c},this.dependentFeatures=function(t){return void 0===t?w.slice():(w=t.slice(),c)},this.bin=function(t){if(void 0===t){if(null===y){var e=c.parent(),n=e?e.children().indexOf(c):-1;return n>=0?n:0}return y}return y=t,c.modified(),c},this.dataTime=function(t){return void 0===t?_:(_=t,c.modified(),c)},this.buildTime=function(t){return void 0===t?b:(b=t,c.modified(),c)},this.updateTime=function(t){return void 0===t?M:(M=t,c.modified(),c)},this.data=function(t){return void 0===t?c.style("data")||[]:(c.style("data",t),c.dataTime().modified(),c.modified(),c)},this.selectionAPI=function(t,e){return void 0===t?!(!e&&m&&m.selectionAPI&&!m.selectionAPI())&&(e||"auto"!==d?d:!!c.geoIsOn(Object.values(u.feature))):("auto"!==t&&(t=!!t),(t!==d||e)&&(d=t,c._unbindMouseHandlers(),c._bindMouseHandlers()),c)},this.mouseOverOrderHighestIndex=function(t){t.over.index.sort();var e=t.feature.data();t.over.index.forEach(function(n,r){t.over.found[r]=e[n]})},this._init=function(t){if(!m)throw new Error("Feature requires a valid layer");p=i.extend({},{opacity:1},void 0===t.style?{}:t.style),c._bindMouseHandlers(),o=!0},this._build=function(){},this._update=function(){},this.geoOn=function(t,e){var n="auto"===c.selectionAPI(void 0,!0),r=n&&c.selectionAPI(),i=h.apply(c,arguments);return n&&!r&&c.selectionAPI()&&c._bindMouseHandlers(),i},this.geoOff=function(t,e){var n="auto"===c.selectionAPI(void 0,!0),r=n&&c.selectionAPI(),i=f.apply(c,arguments);return n&&r&&!c.selectionAPI()&&c._unbindMouseHandlers(),i},this._exit=function(){c._unbindMouseHandlers(),T=[],p={},l(),o=!1},this._init(e),this};c.eventID=0,c.create=function(t,e){if(!(t instanceof n(73)))return console.warn("Invalid layer"),null;if("object"!==(void 0===e?"undefined":r(e)))return console.warn("Invalid spec"),null;var i=e.type,o=t.createFeature(i,e);return o?(e.data=e.data||[],o.style(e)):(console.warn('Could not create feature type "'+i+'"'),null)},o(c,a),t.exports=c},function(t,e,n){var r=n(13),i=n(45);t.exports=n(12)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(7),i=n(20),o=n(24),a=n(46)("src"),s=Function.toString,u=(""+s).split("toString");n(28).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var r=n(0),i=n(8),o=n(34),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";var r=0;t.exports=function t(){if(!(this instanceof t))return new t;var e=this,n=0;return this.modified=function(){return n=r+=1,e},this.timestamp=function(){return n},this.getMTime=this.timestamp,this}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(66),i=n(34);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(67),i=n(45),o=n(25),a=n(33),s=n(24),u=n(148),c=Object.getOwnPropertyDescriptor;e.f=n(12)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(24),i=n(16),o=n(104)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(17);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var r=n(1),i=n(2).registerRenderer,o=n(71),a=function t(e){var r=t.d3,i=n(56),a=n(5),s=n(15),u=n(244);if(!(this instanceof t))return new t(e);o.call(this,e);var c=this._exit;i.call(this,e),e=e||{};var l=this,h=null,f={},d=null,p=null,m=null,v=null,g=1,y={dx:0,dy:0,rx:0,ry:0,rotation:0},x={},_={},b=null,M=null;function w(t){return t?b.select(".group-"+t):b.select(".group-"+l._d3id())}function T(){var t=l.layer().map(),e=t.size().width,n=t.size().height;if(m=n,!(p=e)||!m)throw new Error("Map layer has size 0");v=Math.pow(e*e+n*n,.5),d={upperLeft:t.displayToGcs({x:0,y:0},null),lowerRight:t.displayToGcs({x:e,y:n},null),center:t.displayToGcs({x:e/2,y:n/2},null)}}return this._convertColor=function(t,e){return t=a.ensureFunction(t),e=e||function(){return!0},function(){var n="none";return e.apply(l,arguments)&&(n=t.apply(l,arguments)).hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")&&(n=r.rgb(255*n.r,255*n.g,255*n.b)),n}},this._convertScale=function(t){return t=a.ensureFunction(t),function(){return t.apply(l,arguments)/g}},this._setTransform=function(){if(d||T(),h){var t,e,n,r,i,o,a=l.layer().map(),s=a.gcsToDisplay(d.upperLeft,null),u=a.gcsToDisplay(d.lowerRight,null),c=a.gcsToDisplay(d.center,null),f=w();n=Math.sqrt(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2))/v,r=a.rotation(),o=-m/2,t=n*(i=-p/2)+c.x,e=n*o+c.y,r||(t=Math.round(t),e=Math.round(e));var x="matrix("+[n,0,0,n,t,e].join()+")";r&&(x+=" rotate("+[180*r/Math.PI,-i,-o].join()+")"),f.attr("transform",x),g=n,y.dx=t,y.dy=e,y.rx=i,y.ry=o,y.rotation=r}},this.baseToLocal=function(t){if(t={x:(t.x-y.dx)/g,y:(t.y-y.dy)/g},y.rotation){var e=Math.sin(-y.rotation),n=Math.cos(-y.rotation),r=t.x+y.rx,i=t.y+y.ry;t={x:r*n-i*e-y.rx,y:r*e+i*n-y.ry}}return t},this.localToBase=function(t){if(y.rotation){var e=Math.sin(y.rotation),n=Math.cos(y.rotation),r=t.x+y.rx,i=t.y+y.ry;t={x:r*n-i*e-y.rx,y:r*e+i*n-y.ry}}return t={x:t.x*g+y.dx,y:t.y*g+y.dy}},this._init=function(t){if(!l.canvas()){var e;t.widget=t.widget||!1,(b="d3Parent"in t?r.select(t.d3Parent).append("svg"):r.select(l.layer().node().get(0)).append("svg")).attr("display","block");var n=(M=b.append("defs")).append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");n.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut"),n.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut"),n.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut"),n.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal"),t.widget||(e=b.append("g")),(n=M.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%")).append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic"),h=l.layer().sticky(),b.attr("class",l._d3id()),b.attr("width",l.layer().node().width()),b.attr("height",l.layer().node().height()),t.widget?l.canvas(b):(e.attr("class","group-"+l._d3id()),l.canvas(e))}return l._setTransform(),l},this.api=function(){return"d3"},this.scaleFactor=function(){return g},this._resize=function(t,e,n,r){return d||T(),b.attr("width",n),b.attr("height",r),l._setTransform(),l.layer().geoTrigger(u,{scale:g},!0),l},this._exit=function(){f={},l.canvas().remove(),b.remove(),b=void 0,M.remove(),M=void 0,x={},_={},c()},this._definitions=function(){return M},this._drawFeatures=function(t){return f[t.id]={data:t.data,index:t.dataIndex,style:t.style,visible:t.visible,attributes:t.attributes,classes:t.classes,append:t.append,onlyRenderNew:t.onlyRenderNew,sortByZ:t.sortByZ,parentId:t.parentId},l.__render(t.id,t.parentId)},this.__render=function(t,e){var n;if(void 0===t){for(n in f)f.hasOwnProperty(n)&&l.__render(n);return l}return e?l._renderFeature(t,e):(x[t]=!0,l.layer().map().scheduleAnimationFrame(l._renderFrame)),l},this._renderFrame=function(){var t;for(t in _)l.select(t).remove(),M.selectAll("."+t).remove();_={};var e=x;for(t in x={},e)e.hasOwnProperty(t)&&l._renderFeature(t)},this._renderFeature=function(t,e){if(!f[t])return l;var n,r,i=f[t].data,o=f[t].index,a=f[t].style,s=f[t].visible,u=f[t].attributes,c=f[t].classes,h=f[t].append,d=l.select(t,e).data(i,o);return n=d.enter().append(h),d.exit().remove(),function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}(r=f[t].onlyRenderNew?n:d,u),r.attr("class",c.concat([t]).join(" ")),function(t,e){var n,r,i;function o(){return e.fill.apply(l,arguments)?null:"none"}function a(){return e.stroke.apply(l,arguments)?null:"none"}for(n in e)e.hasOwnProperty(n)&&(i=null,r=null,"strokeColor"===n?(r="stroke",i=l._convertColor(e[n],e.stroke)):"stroke"===n&&e[n]&&!e.hasOwnProperty("strokeColor")?(r="stroke",i=a):"strokeWidth"===n?(r="stroke-width",i=l._convertScale(e[n])):"strokeOpacity"===n?(r="stroke-opacity",i=e[n]):"fillColor"===n?(r="fill",i=l._convertColor(e[n],e.fill)):"fill"!==n||e.hasOwnProperty("fillColor")?"fillOpacity"===n?(r="fill-opacity",i=e[n]):"lineCap"===n?(r="stroke-linecap",i=e[n]):"lineJoin"===n?(r="stroke-linejoin",i=e[n]):"miterLimit"===n&&(r="stroke-miterlimit",i=e[n]):(r="fill",i=o),r&&t.style(r,i))}(r,a),s&&r.style("visibility",s()?"visible":"hidden"),n.size()&&f[t].sortByZ&&d.sort(function(t,e){return(t.zIndex||0)-(e.zIndex||0)}),l},this.select=function(t,e){return w(e).selectAll("."+t)},this._removeFeature=function(t){return _[t]=!0,l.layer().map().scheduleAnimationFrame(l._renderFrame),delete f[t],x[t]&&delete x[t],l},this.draw=function(){},this.layer().geoOn(s.pan,l._setTransform),this.layer().geoOn(s.rotate,l._setTransform),this.layer().geoOn(s.zoom,function(){l._setTransform(),l.__render(),l.layer().geoTrigger(u,{scale:g},!0)}),this.layer().geoOn(s.resize,function(t){l._resize(t.x,t.y,t.width,t.height)}),this._init(e),this};r(a,o),i("d3",a),a.supported=function(){delete a.d3;try{a.d3=n(612)}catch(t){}return void 0!==a.d3},a.fallback=function(){return null},a.supported(),t.exports=a},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(0),i=n(28),o=n(8);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(29),i=n(66),o=n(16),a=n(14),s=n(121);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var m,v,g=o(e),y=i(g),x=r(s,p,3),_=a(y.length),b=0,M=n?d(e,_):u?d(e,0):void 0;_>b;b++)if((f||b in y)&&(v=x(m=y[b],b,g),t))if(n)M[b]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:M.push(m)}else if(l)return!1;return h?-1:c||l?l:M}}},function(t,e,n){"use strict";if(n(12)){var r=n(43),i=n(7),o=n(8),a=n(0),s=n(86),u=n(127),c=n(29),l=n(52),h=n(45),f=n(20),d=n(54),p=n(35),m=n(14),v=n(174),g=n(48),y=n(33),x=n(24),_=n(68),b=n(9),M=n(16),w=n(118),T=n(49),A=n(27),E=n(50).f,S=n(120),C=n(46),O=n(10),P=n(37),R=n(76),k=n(83),L=n(123),D=n(59),j=n(80),N=n(51),I=n(122),F=n(164),z=n(13),U=n(26),G=z.f,B=U.f,V=i.RangeError,q=i.TypeError,H=i.Uint8Array,W=Array.prototype,X=u.ArrayBuffer,K=u.DataView,Y=P(0),Q=P(2),Z=P(3),$=P(4),J=P(5),tt=P(6),et=R(!0),nt=R(!1),rt=L.values,it=L.keys,ot=L.entries,at=W.lastIndexOf,st=W.reduce,ut=W.reduceRight,ct=W.join,lt=W.sort,ht=W.slice,ft=W.toString,dt=W.toLocaleString,pt=O("iterator"),mt=O("toStringTag"),vt=C("typed_constructor"),gt=C("def_constructor"),yt=s.CONSTR,xt=s.TYPED,_t=s.VIEW,bt=P(1,function(t,e){return Et(k(t,t[gt]),e)}),Mt=o(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),wt=!!H&&!!H.prototype.set&&o(function(){new H(1).set({})}),Tt=function(t,e){var n=p(t);if(n<0||n%e)throw V("Wrong offset!");return n},At=function(t){if(b(t)&&xt in t)return t;throw q(t+" is not a typed array!")},Et=function(t,e){if(!(b(t)&&vt in t))throw q("It is not a typed array constructor!");return new t(e)},St=function(t,e){return Ct(k(t,t[gt]),e)},Ct=function(t,e){for(var n=0,r=e.length,i=Et(t,r);r>n;)i[n]=e[n++];return i},Ot=function(t,e,n){G(t,e,{get:function(){return this._d[n]}})},Pt=function(t){var e,n,r,i,o,a,s=M(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=S(s);if(void 0!=f&&!w(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=m(s.length),i=Et(this,n);n>e;e++)i[e]=h?l(s[e],e):s[e];return i},Rt=function(){for(var t=0,e=arguments.length,n=Et(this,e);e>t;)n[t]=arguments[t++];return n},kt=!!H&&o(function(){dt.call(new H(1))}),Lt=function(){return dt.apply(kt?ht.call(At(this)):At(this),arguments)},Dt={copyWithin:function(t,e){return F.call(At(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return $(At(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return I.apply(At(this),arguments)},filter:function(t){return St(this,Q(At(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return J(At(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(At(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Y(At(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(At(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(At(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(At(this),arguments)},lastIndexOf:function(t){return at.apply(At(this),arguments)},map:function(t){return bt(At(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(At(this),arguments)},reduceRight:function(t){return ut.apply(At(this),arguments)},reverse:function(){for(var t,e=At(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return Z(At(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(At(this),t)},subarray:function(t,e){var n=At(this),r=n.length,i=g(t,r);return new(k(n,n[gt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===e?r:g(e,r))-i))}},jt=function(t,e){return St(this,ht.call(At(this),t,e))},Nt=function(t){At(this);var e=Tt(arguments[1],1),n=this.length,r=M(t),i=m(r.length),o=0;if(i+e>n)throw V("Wrong length!");for(;o<i;)this[e+o]=r[o++]},It={entries:function(){return ot.call(At(this))},keys:function(){return it.call(At(this))},values:function(){return rt.call(At(this))}},Ft=function(t,e){return b(t)&&t[xt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Ft(t,e=y(e,!0))?h(2,t[e]):B(t,e)},Ut=function(t,e,n){return!(Ft(t,e=y(e,!0))&&b(n)&&x(n,"value"))||x(n,"get")||x(n,"set")||n.configurable||x(n,"writable")&&!n.writable||x(n,"enumerable")&&!n.enumerable?G(t,e,n):(t[e]=n.value,t)};yt||(U.f=zt,z.f=Ut),a(a.S+a.F*!yt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Ut}),o(function(){ft.call({})})&&(ft=dt=function(){return ct.call(this)});var Gt=d({},Dt);d(Gt,It),f(Gt,pt,It.values),d(Gt,{slice:jt,set:Nt,constructor:function(){},toString:ft,toLocaleString:Lt}),Ot(Gt,"buffer","b"),Ot(Gt,"byteOffset","o"),Ot(Gt,"byteLength","l"),Ot(Gt,"length","e"),G(Gt,mt,{get:function(){return this[xt]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,d="set"+t,p=i[c],g=p||{},y=p&&A(p),x=!p||!s.ABV,M={},w=p&&p.prototype,S=function(t,n){G(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,Mt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,Mt)}(this,n,t)},enumerable:!0})};x?(p=n(function(t,n,r,i){l(t,p,c,"_d");var o,a,s,u,h=0,d=0;if(b(n)){if(!(n instanceof X||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return xt in n?Ct(p,n):Pt.call(p,n);o=n,d=Tt(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw V("Wrong length!");if((a=g-d)<0)throw V("Wrong length!")}else if((a=m(i)*e)+d>g)throw V("Wrong length!");s=a/e}else s=v(n),o=new X(a=s*e);for(f(t,"_d",{b:o,o:d,l:a,e:s,v:new K(o)});h<s;)S(t,h++)}),w=p.prototype=T(Gt),f(w,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&j(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,r,i){var o;return l(t,p,c),b(n)?n instanceof X||"ArrayBuffer"==(o=_(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,Tt(r,e),i):void 0!==r?new g(n,Tt(r,e)):new g(n):xt in n?Ct(p,n):Pt.call(p,n):new g(v(n))}),Y(y!==Function.prototype?E(g).concat(E(y)):E(g),function(t){t in p||f(p,t,g[t])}),p.prototype=w,r||(w.constructor=p));var C=w[pt],O=!!C&&("values"==C.name||void 0==C.name),P=It.values;f(p,vt,!0),f(w,xt,c),f(w,_t,!0),f(w,gt,p),(u?new p(1)[mt]==c:mt in w)||G(w,mt,{get:function(){return c}}),M[c]=p,a(a.G+a.W+a.F*(p!=g),M),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){g.of.call(p,1)}),c,{from:Pt,of:Rt}),"BYTES_PER_ELEMENT"in w||f(w,"BYTES_PER_ELEMENT",e),a(a.P,c,Dt),N(c),a(a.P+a.F*wt,c,{set:Nt}),a(a.P+a.F*!O,c,It),r||w.toString==ft||(w.toString=ft),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:jt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Lt}),D[c]=O?C:P,r||O||f(w,pt,P)}}else t.exports=function(){}},function(t,e,n){var r=n(169),i=n(0),o=n(75)("metadata"),a=o.store||(o.store=new(n(172))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o};t.exports={store:a,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,e,n){(function(e){t.exports=e.vgl=n(503)}).call(e,n(101))},function(t,e,n){"use strict";var r=n(1),i=n(23),o=function t(){if(!(this instanceof t))return new t;var e=n(5),r=this,o={},a=[],s=0;return this.onIdle=function(t){return s?a.push(t):t(),r},Object.defineProperty(this,"idle",{get:function(){return!s},configurable:!0}),this.addPromise=function(t){function e(){(s-=1)||a.splice(0,a.length).forEach(function(t){t()})}return s+=1,t.always?t.always(e):t.then(e,e),r},this.geoOn=function(t,n){return Array.isArray(t)?(t.forEach(function(t){r.geoOn(t,n)}),r):e.isFunction(n)?(o.hasOwnProperty(t)||(o[t]=[]),o[t].push(n),r):(console.warn("Handler for "+t+" is not a function",n,r),r)},this.geoIsOn=function(t,e){return Array.isArray(t)?t.some(function(t){return r.geoIsOn(t,e)}):(o[t]||[]).some(function(t){return t===e||void 0===e})},this.geoTrigger=function(t,e){return Array.isArray(t)?(t.forEach(function(t){r.geoTrigger(t,e)}),r):((e=e||{}).event=t,o.hasOwnProperty(t)&&o[t].forEach(function(n){try{n.call(r,e)}catch(e){console.warn("Event handler for "+t+" threw an error",e)}}),r)},this.geoOff=function(t,e){if(void 0===t&&(o={},a=[],s=0),Array.isArray(t))return t.forEach(function(t){r.geoOff(t,e)}),r;if(e){if(Array.isArray(e))return e.forEach(function(e){r.geoOff(t,e)}),r}else o[t]=[];return o.hasOwnProperty(t)&&(o[t]=o[t].filter(function(t){return t!==e})),r},this._exit=function(){r.geoOff()},i.call(this),this.modified(),this};r(o,i),t.exports=o},function(t,e,n){var r=n(46)("meta"),i=n(9),o=n(24),a=n(13).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(8)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(10)("unscopables"),i=Array.prototype;void 0==i[r]&&n(20)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(150),i=n(105);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(35),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(4),i=n(151),o=n(105),a=n(104)("IE_PROTO"),s=function(){},u=function(){var t,e=n(102)("iframe"),r=o.length;for(e.style.display="none",n(106).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(150),i=n(105).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(7),i=n(13),o=n(12),a=n(10)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(29),i=n(162),o=n(118),a=n(4),s=n(14),u=n(120),c={},l={};(e=t.exports=function(t,e,n,h,f){var d,p,m,v,g=f?function(){return t}:u(t),y=r(n,h,e?2:1),x=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=s(t.length);d>x;x++)if((v=e?y(a(p=t[x])[0],p[1]):y(t[x]))===c||v===l)return v}else for(m=g.call(t);!(p=m.next()).done;)if((v=i(m,y,p.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},function(t,e,n){var r=n(21);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(1),i=n(41),o=function t(e){if(!(this instanceof t))return new t;i.call(this,e);var n=this,r=null,o=[],a=this._exit,s=this.geoTrigger,u=this.addPromise,c=this.onIdle;return this.addPromise=function(t){return r?r.addPromise(t):u(t),this},this.onIdle=function(t){return r?r.onIdle(t):c(t),this},this.parent=function(t){return void 0===t?r:(r=t,n)},this.addChild=function(t){return Array.isArray(t)?(t.forEach(n.addChild),n):(t.parent(n),o.push(t),n)},this.removeChild=function(t){return Array.isArray(t)?(t.forEach(n.removeChild),n):(o=o.filter(function(e){return e!==t}),n)},this.children=function(){return o.slice()},this.draw=function(t){return n.children().forEach(function(e){e.draw(t)}),n},this.geoTrigger=function(t,e,i){var a;return a=(e=e||{}).geo||{},e.geo=a,a.stopPropagation?n:!i&&r&&a._triggeredBy!==r?(a._triggeredBy=n,r.geoTrigger(t,e),n):(s.call(n,t,e),a.stopPropagation?n:(o.forEach(function(r){r.geoTrigger&&(a._triggeredBy=n,r.geoTrigger(t,e))}),n))},this._exit=function(){o=[],r=null,a()},this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(55),o=function t(e){var r=n(41),o=n(143);if(!(this instanceof r))return new t(e);i.call(this);var a="d3-"+o(),s=this._exit,u=this,c=this.draw;return this._d3id=function(){return a},this.select=function(){return u.renderer().select(u._d3id())},this.draw=function(){return u.ready&&(u._update(),c()),u},this._exit=function(){u.renderer()._removeFeature(u._d3id()),s()},this};r(o,i),t.exports=o},function(t,e,n){var r=n(13).f,i=n(24),o=n(10)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(0),i=n(34),o=n(8),a=n(108),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o(function(){return!!a[t]()||"âÂ"!="âÂ"[t]()}),u=i[t]=s?e(h):a[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";e.a=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}},function(t,e,n){"use strict";e.a=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(19),a=function t(e){var i=n(18),a=n(5);if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var s,u,c=this,l=this._init,h=0,f=[],d=[];return this._objectListStart=function(t){r.each(t,function(t,e){e.used=!1})},this._objectListGet=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].entry===e)return t[n].used=!0,t[n].value},this._objectListAdd=function(t,e,n){t.push({entry:e,value:n,used:!0})},this._objectListEnd=function(t){for(var e=t.length-1;e>=0;e-=1)t[e].used||t.splice(e,1)},this.pointSearch=function(t){var e,n,o=[],s=[],l={},h=[{},{},{},{}],f=[{},{},{},{}],d=[0,1,2,0],p=[1,2,3,1],m=c.data(),v=c.layer().map();return t=i.transformCoordinates(v.ingcs(),v.gcs(),t),u||this._generateQuads(),r.each([u.clrQuads,u.imgQuads,u.vidQuads],function(r,i){i.forEach(function(r,i){for(e=0;e<d.length;e+=1)h[e].x=r.pos[3*d[e]],h[e].y=r.pos[3*d[e]+1],h[e].z=r.pos[3*d[e]+2],f[e].x=r.pos[3*p[e]],f[e].y=r.pos[3*p[e]+1],f[e].z=r.pos[3*p[e]+2];(a.pointInPolygon(t,h)||a.pointInPolygon(t,f))&&(s.push(r.idx),o.push(m[r.idx]),!(n=a.pointTo2DTriangleBasis(t,h[0],h[1],h[2]))||n.x+n.y>1?(n=a.pointTo2DTriangleBasis(t,f[2],f[1],f[0]))&&(n.x=1-n.x):n.y=1-n.y,n&&(l[r.idx]={basis:n}))})}),{index:s,found:o,extra:l}},this.position=function(t){return void 0===t?c.style("position"):(c.style("position",a.ensureFunction(t)),c.dataTime().modified(),c.modified(),c)},this._positionToQuad=function(t,e,n,o){var a=t.call(c,n,o);if(a.ll&&a.ur||a.ul&&a.lr){var s=c.gcs(),u=c.layer().map().gcs(),l={};return r.each(["ll","lr","ul","ur"],function(t,r){void 0!==a[r]&&(l[r]={},void 0===a[r].x?l[r]=[a[r][0],a[r][1],a[r][2]]:l[r]=[a[r].x,a[r].y,a[r].z],void 0===l[r][2]&&(l[r][2]=e.call(c,n,o)),s!==u&&!1!==s&&(l[r]=i.transformCoordinates(s,u,l[r])))}),l.ll=l.ll||[l.ul[0],l.lr[1],(l.ul[2]+l.lr[2])/2],l.lr=l.lr||[l.ur[0],l.ll[1],(l.ur[2]+l.ll[2])/2],l.ur=l.ur||[l.lr[0],l.ul[1],(l.lr[2]+l.ul[2])/2],l.ul=l.ul||[l.ll[0],l.ur[1],(l.ll[2]+l.ur[2])/2],l}},this._checkQuadUpdate=function(t,e){},this._generateQuads=function(){var t,e,n=c.position(),i=c.style.get("image"),o=c.style.get("video"),l=c.style.get("delayRenderWhenSeeking"),p=c.style.get("color"),m=c.style.get("depth"),v=c.style.get("opacity"),g=c.style.get("drawOnAsyncResourceLoaded"),y=c.style.get("previewColor"),x=c.style.get("previewImage"),_=c.data(),b=[],M=[],w=[],T=[0,0,0];return c._objectListStart(f),c._objectListStart(d),r.each(_,function(u,_){if(_._cachedQuad)return e=_._cachedQuad.diag2,(void 0===t||_._cachedQuad.diag2&&_._cachedQuad.diag2<t)&&(T=_._cachedQuad.ll,t=_._cachedQuad.diag2),_._cachedQuad.clrquad&&b.push(_._cachedQuad.clrquad),_._cachedQuad.imgquad&&(_._cachedQuad.imageEntry&&c._objectListGet(f,_._cachedQuad.imageEntry),M.push(_._cachedQuad.imgquad)),void(_._cachedQuad.vidquad&&(_._cachedQuad.videoEntry&&c._objectListGet(d,_._cachedQuad.videoEntry),w.push(_._cachedQuad.vidquad)));var A,E,S,C,O,P,R,k,L,D,j,N,I={};if(R=c._positionToQuad(n,m,_,u),D=v.call(c,_,u),void 0!==R&&D&&!(D<0)){if(e=Math.pow(R.ll[0]-R.ur[0],2)+Math.pow(R.ll[1]-R.ur[1],2)+Math.pow(R.ll[2]-R.ur[0],2)+Math.pow(R.lr[0]-R.ur[0],2)+Math.pow(R.lr[1]-R.ur[1],2)+Math.pow(R.lr[2]-R.ur[0],2),I.diag2=e,I.ll=R.ll,(void 0===t||e&&e<t)&&(T=R.ll,t=e),R=[R.ll[0],R.ll[1],R.ll[2],R.lr[0],R.lr[1],R.lr[2],R.ul[0],R.ul[1],R.ul[2],R.ur[0],R.ur[1],R.ur[2]],A={idx:u,pos:R,opacity:D},_.reference&&(A.reference=_.reference),_.crop&&(A.crop=_.crop),L=(k=i.call(c,_,u))?null:o.call(c,_,u),k){if(I.imageEntry=k,void 0===(E=c._objectListGet(f,k))&&(k instanceof Image||k instanceof HTMLCanvasElement?E=k:(E=new Image).src=k,c._objectListAdd(f,k,E)),a.isReadyImage(E)||E instanceof HTMLCanvasElement)A.image=E;else if(j=void 0,(N=x.call(c,_,u))&&a.isReadyImage(N)?A.image=N:(j=y.call(c,_,u),A.color=a.convertColor(j),A.color&&void 0!==A.color.r&&void 0!==A.color.g&&void 0!==A.color.b?(b.push(A),I.clrquad=A):j=void 0),g.call(c,_,u))P=a.isReadyImage(E,!0)?null:r.Deferred(),C=E.onload,E.onload=function(){if(void 0!==j&&(r.inArray(A,b)>=0&&b.splice(r.inArray(A,b),1),delete I.clrquad),A.image=E,c.dataTime().modified(),c.modified(),c._update(),c.layer().draw(),P&&P.resolve(),C)return C.apply(this,arguments)},O=E.onerror,E.onerror=function(){if(P&&P.reject(),O)return O.apply(this,arguments)},P&&c.layer().addPromise(P.promise());else if(void 0===j&&!A.image)return;M.push(A),I.imgquad=A}else if(L){if(I.videoEntry=L,void 0===(S=c._objectListGet(d,L))&&(L instanceof HTMLVideoElement?S=L:(S=document.createElement("video")).src=L,c._objectListAdd(d,L,S),r(S).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",function(t){c._checkQuadUpdate(A,t)})),A.delayRenderWhenSeeking=l.call(c,_,u),void 0===A.delayRenderWhenSeeking&&(A.delayRenderWhenSeeking=!0),a.isReadyVideo(S))A.video=S;else if(j=y.call(c,_,u),A.color=a.convertColor(j),A.color&&void 0!==A.color.r&&void 0!==A.color.g&&void 0!==A.color.b?(b.push(A),I.clrquad=A):j=void 0,g.call(c,_,u))P=a.isReadyVideo(S,!0)?null:r.Deferred(),C=S.onloadeddata,S.onloadeddata=function(){if(void 0!==j&&(r.inArray(A,b)>=0&&b.splice(r.inArray(A,b),1),delete I.clrquad),A.video=S,c.dataTime().modified(),c.modified(),c._update(),c.layer().draw(),P&&P.resolve(),C)return C.apply(this,arguments)},O=S.onerror,S.onerror=function(){if(P&&P.reject(),O)return O.apply(this,arguments)},P&&c.layer().addPromise(P.promise());else if(void 0===j&&!A.video)return;w.push(A),I.vidquad=A}else{if(A.color=a.convertColor(p.call(c,_,u)),!A.color||void 0===A.color.r||void 0===A.color.g||void 0===A.color.b)return;b.push(A),I.clrquad=A}I.clrquad&&(h+=1,I.clrquad.quadId=h),I.imgquad&&(h+=1,I.imgquad.quadId=h),I.vidquad&&(h+=1,I.vidquad.quadId=h),!1!==s&&(_._cachedQuad=I)}}),c._objectListEnd(f),c._objectListEnd(d),u={clrQuads:b,imgQuads:M,vidQuads:w,origin:T}},this.cacheUpdate=function(t){return void 0===t||null===t?r.each(c.data(),function(t,e){e._cachedQuad&&delete e._cachedQuad}):(isFinite(t)&&(t=c.data()[t]),t._cachedQuad&&delete t._cachedQuad),c.modified(),c},this.video=function(t){var e,n;return isFinite(t)&&(t=c.data()[t]),t._cachedQuad?e=(t._cachedQuad.vidquad||{}).video:(u||c._generateQuads(),(n=c.data().indexOf(t))>=0&&(e=c._objectListGet(d,c.style.get("video")(t,n)))),e instanceof HTMLVideoElement?e:null},this._init=function(t){t=t||{},l.call(c,t),s=!1!==t.cacheQuads;var e=r.extend({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:!0,previewColor:null,previewImage:null,image:function(t){return t.image},video:function(t){return t.video},position:function(t){return t}},void 0===t.style?{}:t.style);void 0!==t.position&&(e.position=a.ensureFunction(t.position)),c.style(e),c.dataTime().modified()},c};a.create=function(t,e){return(e=e||{}).type="quad",o.create(t,e)},a.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video"},i(a,o),t.exports=a},function(t,e,n){"use strict";t.exports=function t(e){if(!(this instanceof n(41)))return new t(e);var r=this,i=this.draw;return this.draw=function(){return r.ready&&(r._update({mayDelay:!0}),r.renderer()._render(),i()),r},this}},function(t,e,n){"use strict";var r=n(1),i=n(55),o=function t(e){if(!(this instanceof n(41)))return new t(e);i.call(this);var r=this,o=this.draw,a={};return this._renderOnCanvas=function(){},this._delayRender=function(){return!1},this._canvasProperty=function(t,e,n){return t&&e?(a[e]!==n&&(a[e]=n,t[e]=n),r):(a={},r)},this.draw=function(){return r.ready&&(r._update(),r.renderer()._render(),o()),r},this};r(o,i),t.exports=o},function(t,e,n){var r=n(30);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(30),i=n(10)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){"use strict";e.a=function(t){return t<0?-1:1}},function(t,e,n){"use strict";var r=n(6),i=n(69);e.a=function(t){return Math.abs(t)<r.d?t:t-Object(i.a)(t)*Math.PI}},function(t,e,n){"use strict";var r=n(1),i=n(41),o=function t(e){if(!(this instanceof t))return new t(e);i.call(this);var n=this,r=void 0===(e=e||{}).layer?null:e.layer,o=void 0===e.canvas?null:e.canvas,a=!1;return this.layer=function(){return r},this.canvas=function(t){return void 0===t?o:(o=t,n.modified(),n)},this.map=function(){return r?r.map():null},this.initialized=function(t){return void 0===t?a:(a=t,n)},this.api=function(){throw new Error("Should be implemented by derived classes")},this._init=function(){return n},this._resize=function(t,e,r,i){return n},this._render=function(){return n},this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(19),o=n(23),a=n(18),s=n(5),u=function t(e){if(!(this instanceof t))return new t(e);var r=n(3);e=e||{},i.call(this,e);var u,c=this,l=this._init,h=o();return this.featureType="line",this._subfeatureStyles={lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.line=function(t){return void 0===t?c.style("line"):(c.style("line",t),c.dataTime().modified(),c.modified(),c)},this.position=function(t){return void 0===t?c.style("position"):(c.style("position",t),c.dataTime().modified(),c.modified(),c)},this._updatePointSearchInfo=function(){if(h.timestamp()>=c.dataTime().timestamp()&&h.timestamp()>=c.timestamp())return u;h.modified(),u=[];var t=c.data(),e=c.line(),n=c.style.get("strokeWidth"),r=c.position(),i=c.style.get("closed"),o=c.gcs(),s=c.layer().map().gcs();return t.forEach(function(t,c){var l,h,f,d=i(t,c),p=[];e(t,c).forEach(function(e,i){var u=r(e,i,t,c);o!==s&&(u=a.transformCoordinates(o,s,u));var m=Math.ceil(n(e,i,t,c)/2)+2,v=m*m;l&&p.push({u:u,v:l,r2:h>v?h:v}),l=u,h=v,!f&&d&&(f={p:u,r2:v})}),d&&f&&(l.x!==f.p.x||l.y!==f.p.y)&&p.push({u:l,v:f.p,r2:h>f.r2?h:f.r2}),u.push(p)}),u},this.pointSearch=function(t){var e=c.data(),n=[],r=[];if(!e||!e.length||!c.layer())return{found:r,index:n};this._updatePointSearchInfo();var i,o,l,h=c.layer().map(),f=h.unitsPerPixel(h.zoom()),d=f*f,p=a.transformCoordinates(h.ingcs(),h.gcs(),t);for(i=0;i<u.length;i+=1)for(l=u[i],o=0;o<l.length;o+=1)if(s.distance2dToLineSquared(p,l[o].u,l[o].v)<=l[o].r2*d){r.push(e[i]),n.push(i);break}return{found:r,index:n}},this.boxSearch=function(t,e,n){var r=c.position(),i=[],o=c.line();if((n=n||{}).partial=n.partial||!1,n.partial)throw new Error("Unimplemented query method.");return c.data().forEach(function(n,a){var s=!0;o(n,a).forEach(function(i,o){if(s){var u=r(i,o,n,a);u.x>=t.x&&u.x<=e.x&&u.y>=t.y&&u.y<=e.y||(s=!1)}}),s&&i.push(a)}),i},this.rdpSimplifyData=function(t,e,n,r){t=t||c.data(),n=n||c.style.get("position"),r=r||c.style.get("line");var i=c.layer().map(),o=i.gcs(),u=c.gcs(),l=c.style.get("closed");return void 0===e&&(e=.5*i.unitsPerPixel(i.zoom())),t=t.map(function(t,i){var c=r(t,i),h=a.transformCoordinates(u,o,c.map(function(e,r){return n(e,r,t,i)})),f=s.rdpLineSimplify(h,e,l(t,i),[]);for(var d in(f.length<2||2===f.length&&s.distance2dSquared(f[0],f[1])<e*e)&&(f=[]),f=a.transformCoordinates(o,u,f),t)!t.hasOwnProperty(d)||Array.isArray(t)&&d>=0&&d<t.length||(f[d]=t[d]);return f}),c.style("position",function(t){return t}),c.style("line",function(t){return t}),c.data(t),c},this._init=function(t){t=t||{},l.call(c,t);var e=r.extend({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:!1,line:function(t){return t},position:function(t){return t}},void 0===t.style?{}:t.style);return void 0!==t.line&&(e.line=t.line),void 0!==t.position&&(e.position=t.position),c.style(e),c.dataTime().modified(),c},this._init(e),this};u.create=function(t,e){return(e=e||{}).type="line",i.create(t,e)},u.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"},r(u,i),t.exports=u},function(t,e,n){"use strict";var r,i=n(1),o=n(55),a=n(19),s=n(2).checkRenderer,u=n(2).rendererForFeatures,c=n(2).rendererForAnnotations,l=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var r,i=n(3),a=n(23),l=n(2).createRenderer,h=n(5).newLayerId,f=n(15),d=n(140),p=this,m=this._exit,v=void 0===e.id?t.newLayerId():e.id,g=void 0===e.name?"":e.name,y=void 0===e.map?null:e.map,x=null,_=null,b=null,M=!1,w=void 0!==e.renderer?e.renderer:e.annotations?c(e.annotations):u(e.features),T=a(),A=a(),E=void 0===e.sticky||e.sticky,S=void 0===e.active||e.active,C=void 0===e.opacity?1:e.opacity,O=e.attribution||null,P=void 0===e.visible||e.visible,R=void 0===e.selectionAPI||e.selectionAPI;if(w=s(w),!y)throw new Error("Layers must be initialized on a map.");function k(){return(p.parent()||p.map()).children().filter(function(e){return e instanceof t})}if(this.rendererName=function(){return w},this.zIndex=function(t,e){return void 0===t?r:(e||k().reverse().forEach(function(e){e!==this&&e.zIndex()===t&&e.zIndex(t+1)}),r=t,x.css("z-index",r),p)},this.moveUp=function(t){var e,n,r,i,o=null;for(void 0===t&&(t=1),i=1,t<0&&(i=-1,t=-t),e=k().sort(function(t,e){return i*(t.zIndex()-e.zIndex())}),n=0;n<e.length;n+=1)if(null===o)e[n]===p&&(o=n);else{if(!(n-o<=t))break;r=p.zIndex(),p.zIndex(e[n].zIndex(),!0),e[n].zIndex(r,!0)}return p},this.moveDown=function(t){return void 0===t&&(t=1),p.moveUp(-t)},this.moveToTop=function(){return p.moveUp(k().length-1)},this.moveToBottom=function(){return p.moveDown(k().length-1)},this.sticky=function(){return E},this.active=function(t){return void 0===t?S:(S!==t&&(S=t,x.toggleClass("active",S)),this)},this.node=function(){return x},this.id=function(t){return void 0===t?v:(v=h(),p.modified(),p)},this.name=function(t){return void 0===t?g:(g=t,p.modified(),p)},this.map=function(){return y},this.renderer=function(){return b},this.canvas=function(){return _},this.dataTime=function(){return T},this.updateTime=function(){return A},this.initialized=function(t){return void 0!==t?(M=t,p):M},this.toLocal=function(t){return p._toLocalMatrix&&d.applyTransform(p._toLocalMatrix,t),t},this.fromLocal=function(t){return p._fromLocalMatrix&&d.applyTransform(p._fromLocalMatrix,t),t},this.attribution=function(t){return void 0!==t?(O=t,p.map().updateAttribution(),p):O},this.visible=function(t){return void 0===t?P:(P!==t&&(P=t,x.css("display",P?"":"none"),p.modified()),p)},this.selectionAPI=function(t){return void 0===t?R:(R!==t&&(R=t),p)},this._init=function(t){if(M)return p;y.node().append(x);var n=i.extend({},e);return delete n.map,null===w?(b=null,_=x):_?b=l(w,p,_,n):(b=l(w,p,void 0,n),_=b.canvas()),x.toggleClass("active",p.active()),M=!0,t||(p.geoOn(f.resize,function(t){p._update({event:t})}),p.geoOn(f.pan,function(t){p._update({event:t})}),p.geoOn(f.rotate,function(t){p._update({event:t})}),p.geoOn(f.zoom,function(t){p._update({event:t})})),p},this._exit=function(){p.geoOff(),b&&b._exit(),x.off(),x.remove(),e={},_=null,b=null,m()},this._update=function(){},this.width=function(){return p.map().size().width},this.height=function(){return p.map().size().height},this.opacity=function(t){return void 0!==t?(C=t,x.css("opacity",C),p):C},(x=i(document.createElement("div"))).addClass("geojs-layer"),x.attr("id",g),p.opacity(C),void 0===e.zIndex){var L=-1;k().forEach(function(t){void 0!==t.zIndex()&&(L=Math.max(L,t.zIndex()))}),e.zIndex=L+1}return p.zIndex(e.zIndex),p};l.newLayerId=(r=1,function(){var t=r;return r+=1,t}),l.create=function(t,e){if((e=e||{}).type="feature","feature"!==e.type)return console.warn("Unsupported layer type"),null;if(e.renderer=e.renderer||"vgl",e.renderer=s(e.renderer),!e.renderer)return console.warn("Invalid renderer"),null;var n=t.createLayer(e.type,e);return n?(e.features.forEach(function(t){t.data=t.data||e.data,t.feature=a.create(n,t)}),n):(console.warn("Unable to create a layer"),null)},i(l,o),t.exports=l},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);e=e||{},i.call(this,e);var r=n(3),o=this,a=this._init;return this.featureType="text",this.position=function(t){return void 0===t?o.style("position"):(t!==o.style("position")&&(o.style("position",t),o.dataTime().modified(),o.modified()),o)},this.text=function(t){return void 0===t?o.style("text"):(t!==o.style("text")&&(o.style("text",t),o.dataTime().modified(),o.modified()),o)},this._init=function(t){t=t||{},a.call(o,t);var e=r.extend({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:!1,textScaled:!1,position:function(t){return t},text:function(t){return t.text}},void 0===t.style?{}:t.style);void 0!==t.position&&(e.position=t.position),void 0!==t.text&&(e.text=t.text),o.style(e),e.position&&o.position(e.position),e.text&&o.text(e.text),o.dataTime().modified()},this._init(e),o};o.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"],o.create=function(t,e){return(e=e||{}).type="text",i.create(t,e)},o.capabilities={feature:"text"},r(o,i),t.exports=o},function(t,e,n){var r=n(28),i=n(7),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(43)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(25),i=n(14),o=n(48);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(30);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(9),i=n(30),o=n(10)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(10)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(4);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(20),i=n(21),o=n(8),a=n(34),s=n(10);t.exports=function(t,e,n){var u=s(t),c=n(a,u,""[t]),l=c[0],h=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){var r=n(4),i=n(17),o=n(10)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r=n(7).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(7),i=n(0),o=n(21),a=n(54),s=n(42),u=n(53),c=n(52),l=n(9),h=n(8),f=n(80),d=n(57),p=n(109);t.exports=function(t,e,n,m,v,g){var y=r[t],x=y,_=v?"set":"add",b=x&&x.prototype,M={},w=function(t){var e=b[t];o(b,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof x&&(g||b.forEach&&!h(function(){(new x).entries().next()}))){var T=new x,A=T[_](g?{}:-0,1)!=T,E=h(function(){T.has(1)}),S=f(function(t){new x(t)}),C=!g&&h(function(){for(var t=new x,e=5;e--;)t[_](e,e);return!t.has(-0)});S||((x=e(function(e,n){c(e,x,t);var r=p(new y,e,x);return void 0!=n&&u(n,v,r[_],r),r})).prototype=b,b.constructor=x),(E||C)&&(w("delete"),w("has"),v&&w("get")),(C||A)&&w(_),g&&b.clear&&delete b.clear}else x=m.getConstructor(e,t,v,_),a(x.prototype,n),s.NEED=!0;return d(x,t),M[t]=x,i(i.G+i.W+i.F*(x!=y),M),g||m.setStrong(x,t,v),x}},function(t,e,n){for(var r,i=n(7),o=n(20),a=n(46),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=n(43)||!n(8)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(7)[t]})},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(0),i=n(17),o=n(29),a=n(53);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(n=[],e?(r=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";e.a=function(t,e){if(t[e])return t[e];var n,i=Object.keys(t),o=e.toLowerCase().replace(r,""),a=-1;for(;++a<i.length;)if(n=i[a],n.toLowerCase().replace(r,"")===o)return t[n]};var r=/[\s_\-\/\(\)]/g},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(r.d-e))/i}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){for(var n,i,o=.5*t,a=r.d-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=i=r.d-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-a,Math.abs(i)<=1e-10)return a;return-9999}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}},function(t,e,n){"use strict";e.a=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},function(t,e,n){"use strict";e.a=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},function(t,e,n){"use strict";e.a=function(t){return.05859375*t*t*(1+.75*t)}},function(t,e,n){"use strict";e.a=function(t){return t*t*t*(35/3072)}},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);e=e||{},i.call(this,e);var r=n(3),o=n(23),a=n(240),s=n(15),u=n(5),c=n(606),l=this,h=this._init,f=null,d=o(),p=this.data,m=0,v=e.clustering,g=null,y=[],x=null,_=!1;return this.featureType="point",this.clustering=function(t){return void 0===t?v:(v&&!t?(g=null,v=!1,p(y)):t&&v!==t&&(v=t,l._clusterData()),l)},this._clusterData=function(){if(v){var t=!0===v?{radius:.01}:v,e=l.position();g=new a(t,l.layer().width(),l.layer().height()),y.forEach(function(t,n){var r=u.normalizeCoordinates(e(t,n));r.index=n,g.addPoint(r)}),x=null,l._handleZoom(l.layer().map().zoom())}},this._handleZoom=function(t){var e=Math.floor(t);if(v&&e!==x){x=e;var n=g.points(e).map(function(t){return y[t.index]});g.clusters(e).forEach(function(t){t.__cluster=!0,t.__data=[],t.obj.each(function(e){t.__data.push(y[e.index])}),n.push(t)}),_=!0,l.data(n)}},this.position=function(t){if(void 0===t)return l.style("position");var e=u.isFunction(t);return l.style("position",function(n,r){return null!==n&&void 0!==n&&n.__cluster?n:e?t(n,r):t}),l.dataTime().modified(),l.modified(),l},this._updateRangeTree=function(){if(!(d.timestamp()>=l.dataTime().timestamp())){var t,e,n=l.style.get("radius"),r=l.style.get("stroke"),i=l.style.get("strokeWidth");e=l.position(),m=0,t=l.data().map(function(t,o){var a=e(t,o);return m=Math.max(m,n(t,o)+(r(t,o)?i(t,o):0)),[a.x,a.y]}),f=c(t),d.modified()}},this.pointSearch=function(t){var e,n,r,i,o,a,s=[],u=[],c=l.gcs(),h=l.style.get("stroke"),d=l.style.get("strokeWidth"),p=l.style.get("radius");return(r=l.data())&&r.length?(l._updateRangeTree(),i=l.layer().map(),o=i.gcsToDisplay(t),a=[i.displayToGcs({x:o.x-m,y:o.y-m},c),i.displayToGcs({x:o.x+m,y:o.y-m},c),i.displayToGcs({x:o.x-m,y:o.y+m},c),i.displayToGcs({x:o.x+m,y:o.y+m},c)],e={x:Math.min(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.min(a[0].y,a[1].y,a[2].y,a[3].y)},n={x:Math.max(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.max(a[0].y,a[1].y,a[2].y,a[3].y)},f.range(e.x,e.y,n.x,n.y).forEach(function(t){var e,n,a,f,m=r[t],v=l.position()(m,t);a=p(r[t],t),(a+=h(r[t],t)?d(r[t],t):0)&&(f=a*a,(e=(v=i.gcsToDisplay(v,c)).x-o.x)*e+(n=v.y-o.y)*n<=f&&(s.push(m),u.push(t)))}),{found:s,index:u}):{found:[],index:[]}},this.boxSearch=function(t,e){var n=l.position(),r=[];return l.data().forEach(function(i,o){var a=n(i,o);a.x>=t.x&&a.x<=e.x&&a.y>=t.y&&a.y<=e.y&&r.push(o)}),r},this.data=function(t){return void 0===t?p():(_||(y=t),v&&!_?l._clusterData():p(t),_=!1,l)},this._init=function(t){t=t||{},h.call(l,t);var e=r.extend({},{radius:5,stroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:!0,fillOpacity:.8,position:function(t){return t}},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),l.style(e),e.position&&l.position(e.position),l.dataTime().modified(),l.geoOn(s.zoom,function(t){l._handleZoom(t.zoomLevel)}),l},l};o.create=function(t,e){return(e=e||{}).type="point",i.create(t,e)},o.capabilities={feature:"point"},r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(73),o=n(15),a=n(2),s=function t(e){if(!(this instanceof t))return new t(e);i.call(this,e);var n=this,r=[],s=this._init,u=this._exit,c=this._update,l=this.visible,h=this.selectionAPI,f=this.draw;return this.createFeature=function(t,e){var r=a.createFeature(t,n,n.renderer(),e);return r?this.addFeature(r):console.warn("Layer renderer ("+n.rendererName()+') does not support feature type "'+t+'"'),r},this.addFeature=function(t){return this.removeFeature(t),n.addChild(t),r.push(t),n.dataTime().modified(),n.modified(),n},this.removeFeature=function(t){var e;return(e=r.indexOf(t))>=0&&(r.splice(e,1),n.removeChild(t),n.dataTime().modified(),n.modified()),n},this.deleteFeature=function(t){return t&&(r.indexOf(t)>=0&&t._exit(),this.removeFeature(t)),n},this.features=function(t){if(void 0===t)return r.slice();var e,i=r.slice();for(e=0;e<i.length;e+=1)t.indexOf(i[e])<0&&r.indexOf(i[e])>=0&&this.deleteFeature(i[e]);for(e=0;e<t.length;e+=1)this.addFeature(t[e]);return n},this._init=function(){return n.initialized()?n:(s.call(n,!0),n.geoOn(o.resize,function(t){n.renderer()?(n.renderer()._resize(t.x,t.y,t.width,t.height),n._update({event:t}),n.renderer()._render()):n._update({event:t})}),n.geoOn(o.pan,function(t){n._update({event:t}),n.renderer()&&n.renderer()._render()}),n.geoOn(o.rotate,function(t){n._update({event:t}),n.renderer()&&n.renderer()._render()}),n.geoOn(o.zoom,function(t){n._update({event:t}),n.renderer()&&n.renderer()._render()}),n)},this._update=function(t){var e;if(!r.length)return n;if(c.call(n,t),n.dataTime().timestamp()>n.updateTime().timestamp())for(e=0;e<r.length;e+=1)r[e].renderer(n.renderer());for(e=0;e<r.length;e+=1)r[e]._update();return n.updateTime().modified(),n},this._exit=function(){n.clear(),u()},this.draw=function(){return n.visible()&&(f(),n.renderer()&&n.renderer()._render()),n},this.visible=function(t){if(void 0===t)return l();if(n.visible()!==t){l(t);var e,i=r.slice();for(e=0;e<i.length;e+=1)i[e].visible(i[e].visible(void 0,!0),!0);t&&n.draw()}return n},this.selectionAPI=function(t){if(void 0===t)return h();if(n.selectionAPI()!==t){h(t);var e,i=r.slice();for(e=0;e<i.length;e+=1)i[e].selectionAPI(i[e].selectionAPI(void 0,!0),!0)}return n},this.clear=function(){for(;r.length;)n.deleteFeature(r[0]);return n},n};r(s,i),a.registerLayer("feature",s),t.exports=s},function(t,e,n){"use strict";var r=n(147),i=n(1),o=n(2).registerWidget,a=function t(e){if(!(this instanceof t))return new t(e);r.call(this,e);var i=n(32),o=this,a=this._exit,s=null;return this._init=function(){var t;return e.hasOwnProperty("parent")&&(e.parent.addChild(o),t=e.parent.canvas()),o._createCanvas(t),o.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),o.reposition(),o},this._exit=function(){s&&s._exit(),a()},this._createCanvas=function(t){var e={layer:o.layer(),widget:!0};t&&(e.d3Parent=t),(s=i(e))._resize=function(){},o.canvas(s.canvas()[0][0])},this};i(a,r),o("dom","svg",a),t.exports=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(9),i=n(7).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(7),i=n(28),o=n(43),a=n(149),s=n(13).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(75)("keys"),i=n(46);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(7).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(9),i=n(4),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(29)(Function.call,n(26).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"},function(t,e,n){var r=n(9),i=n(107).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(35),i=n(34);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(35),i=n(34);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(43),i=n(0),o=n(21),a=n(20),s=n(59),u=n(115),c=n(57),l=n(27),h=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,m,v,g){u(n,e,p);var y,x,_,b=function(t){if(!f&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",w="values"==m,T=!1,A=t.prototype,E=A[h]||A["@@iterator"]||m&&A[m],S=E||b(m),C=m?w?b("entries"):S:void 0,O="Array"==e&&A.entries||E;if(O&&(_=l(O.call(new t)))!==Object.prototype&&_.next&&(c(_,M,!0),r||"function"==typeof _[h]||a(_,h,d)),w&&E&&"values"!==E.name&&(T=!0,S=function(){return E.call(this)}),r&&!g||!f&&!T&&A[h]||a(A,h,S),s[e]=S,s[M]=d,m)if(y={values:w?S:b("values"),keys:v?S:b("keys"),entries:C},g)for(x in y)x in A||o(A,x,y[x]);else i(i.P+i.F*(f||T),e,y);return y}},function(t,e,n){"use strict";var r=n(49),i=n(45),o=n(57),a={};n(20)(a,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(79),i=n(34);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(10)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(59),i=n(10)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(13),i=n(45);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(68),i=n(10)("iterator"),o=n(59);t.exports=n(28).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(352);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(16),i=n(48),o=n(14);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(44),i=n(165),o=n(59),a=n(25);t.exports=n(114)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r,i,o,a=n(29),s=n(155),u=n(106),c=n(102),l=n(7),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){y.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete g[t]},"process"==n(30)(h)?r=function(t){h.nextTick(a(y,t,1))}:m&&m.now?r=function(t){m.now(a(y,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=x,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",x,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,n){var r=n(7),i=n(124).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(30)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(17);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=n(43),a=n(86),s=n(20),u=n(54),c=n(8),l=n(52),h=n(35),f=n(14),d=n(174),p=n(50).f,m=n(13).f,v=n(122),g=n(57),y="prototype",x="Wrong index!",_=r.ArrayBuffer,b=r.DataView,M=r.Math,w=r.RangeError,T=r.Infinity,A=_,E=M.abs,S=M.pow,C=M.floor,O=M.log,P=M.LN2,R=i?"_b":"buffer",k=i?"_l":"byteLength",L=i?"_o":"byteOffset";function D(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?S(2,-24)-S(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=E(t))!=t||t===T?(i=t!=t?1:0,r=u):(r=C(O(t)/P),t*(o=S(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*S(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*S(2,e),r+=c):(i=t*S(2,c-1)*S(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function j(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-T:T;r+=S(2,e),l-=a}return(c?-1:1)*r*S(2,l-e)}function N(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function I(t){return[255&t]}function F(t){return[255&t,t>>8&255]}function z(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function U(t){return D(t,52,8)}function G(t){return D(t,23,4)}function B(t,e,n){m(t[y],e,{get:function(){return this[n]}})}function V(t,e,n,r){var i=d(+n);if(i+e>t[k])throw w(x);var o=t[R]._b,a=i+t[L],s=o.slice(a,a+e);return r?s:s.reverse()}function q(t,e,n,r,i,o){var a=d(+n);if(a+e>t[k])throw w(x);for(var s=t[R]._b,u=a+t[L],c=r(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c(function(){_(1)})||!c(function(){new _(-1)})||c(function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name})){for(var H,W=(_=function(t){return l(this,_),new A(d(t))})[y]=A[y],X=p(A),K=0;X.length>K;)(H=X[K++])in _||s(_,H,A[H]);o||(W.constructor=_)}var Y=new b(new _(2)),Q=b[y].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(b[y],{setInt8:function(t,e){Q.call(this,t,e<<24>>24)},setUint8:function(t,e){Q.call(this,t,e<<24>>24)}},!0)}else _=function(t){l(this,_,"ArrayBuffer");var e=d(t);this._b=v.call(new Array(e),0),this[k]=e},b=function(t,e,n){l(this,b,"DataView"),l(t,_,"DataView");var r=t[k],i=h(e);if(i<0||i>r)throw w("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw w("Wrong length!");this[R]=t,this[L]=i,this[k]=n},i&&(B(_,"byteLength","_l"),B(b,"buffer","_b"),B(b,"byteLength","_l"),B(b,"byteOffset","_o")),u(b[y],{getInt8:function(t){return V(this,1,t)[0]<<24>>24},getUint8:function(t){return V(this,1,t)[0]},getInt16:function(t){var e=V(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=V(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return N(V(this,4,t,arguments[1]))},getUint32:function(t){return N(V(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return j(V(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return j(V(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,I,e)},setUint8:function(t,e){q(this,1,t,I,e)},setInt16:function(t,e){q(this,2,t,F,e,arguments[2])},setUint16:function(t,e){q(this,2,t,F,e,arguments[2])},setInt32:function(t,e){q(this,4,t,z,e,arguments[2])},setUint32:function(t,e){q(this,4,t,z,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,G,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,U,e,arguments[2])}});g(_,"ArrayBuffer"),g(b,"DataView"),s(b[y],a.VIEW,!0),e.ArrayBuffer=_,e.DataView=b},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),u=null,c=0,l=[],h=n(465);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(y(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(y(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=c++;n=u||(u=v(e)),r=b.bind(null,n,a,!1),i=b.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=h(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&f(d(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var x,_=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function b(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,n){"use strict";t.exports={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_line:"geo_annotation_line",annotation_polygon:"geo_annotation_polygon",annotation_rectangle:"geo_annotation_rectangle",annotation_edit_handle:"geo_annotation_edit_handle"}},function(t,e,n){"use strict";var r=n(467),i=n(473),o=n(474),a=n(475),s=n(477),u=n(478),c=n(90);function l(t,e){if(!(this instanceof l))return new l(t);e=e||function(t){if(t)throw t};var n=Object(r.a)(t);if("object"==typeof n){var o=l.projections.get(n.projName);if(o){if(n.datumCode&&"none"!==n.datumCode){var h=Object(c.a)(s.a,n.datumCode);h&&(n.datum_params=h.towgs84?h.towgs84.split(","):null,n.ellps=h.ellipse,n.datumName=h.datumName?h.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var f=Object(a.b)(n.a,n.b,n.rf,n.ellps,n.sphere),d=Object(a.a)(f.a,f.b,f.rf,n.R_A),p=n.datum||Object(u.a)(n.datumCode,n.datum_params,f.a,f.b,d.es,d.ep2);Object(i.a)(this,n),Object(i.a)(this,o),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=p,this.init(),e(null,this)}else e(t)}else e(t)}l.projections=o.a,l.projections.start(),e.a=l},function(t,e,n){"use strict";e.a=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=l,e.forward=h,e.inverse=f,n.d(e,"names",function(){return d});var r=n(134),i=n(195),o=n(487),a=n(489),s=n(490),u=n(491),c=n(11);function l(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Object(a.a)(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Object(s.a)(this.gtu,2*r))}function h(t){var e=Object(c.a)(t.x-this.long0),n=t.y;n=Object(a.a)(this.cbg,n);var r=Math.sin(n),s=Math.cos(n),l=Math.sin(e),h=Math.cos(e);n=Math.atan2(r,h*s),e=Math.atan2(l*s,Object(i.a)(r,s*h)),e=Object(o.a)(Math.tan(e));var f,d,p=Object(u.a)(this.gtu,2*n,2*e);return n+=p[0],e+=p[1],Math.abs(e)<=2.623395162778?(f=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(f=1/0,d=1/0),t.x=f,t.y=d,t}function f(t){var e,n,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,o/=this.Qn,Math.abs(o)<=2.623395162778){var l=Object(u.a)(this.utg,2*s,2*o);s+=l[0],o+=l[1],o=Math.atan(Object(r.a)(o));var h=Math.sin(s),f=Math.cos(s),d=Math.sin(o),p=Math.cos(o);s=Math.atan2(h*p,Object(i.a)(d,p*f)),o=Math.atan2(d,p*f),e=Object(c.a)(o+this.long0),n=Object(a.a)(this.cgb,s)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var d=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];e.default={init:l,forward:h,inverse:f,names:d}},function(t,e,n){"use strict";e.a=function(t){var e=Math.exp(t);return e=(e-1/e)/2}},function(t,e,n){"use strict";e.a=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}},function(t,e,n){"use strict";e.a=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}},function(t,e,n){t.exports={create:n(504),clone:n(505),copy:n(506),identity:n(222),transpose:n(507),invert:n(508),adjoint:n(509),determinant:n(510),multiply:n(511),translate:n(512),scale:n(513),rotate:n(514),rotateX:n(515),rotateY:n(516),rotateZ:n(517),fromRotation:n(518),fromRotationTranslation:n(519),fromScaling:n(520),fromTranslation:n(521),fromXRotation:n(522),fromYRotation:n(523),fromZRotation:n(524),fromQuat:n(525),frustum:n(526),perspective:n(527),perspectiveFromFieldOfView:n(528),ortho:n(529),lookAt:n(530),str:n(531)}},function(t,e,n){t.exports={EPSILON:n(226),create:n(227),clone:n(555),angle:n(556),fromValues:n(228),copy:n(557),set:n(558),equals:n(559),exactEquals:n(560),add:n(561),subtract:n(231),sub:n(562),multiply:n(232),mul:n(563),divide:n(233),div:n(564),min:n(565),max:n(566),floor:n(567),ceil:n(568),round:n(569),scale:n(570),scaleAndAdd:n(571),distance:n(234),dist:n(572),squaredDistance:n(235),sqrDist:n(573),length:n(236),len:n(574),squaredLength:n(237),sqrLen:n(575),negate:n(576),inverse:n(577),normalize:n(229),dot:n(230),cross:n(578),lerp:n(579),random:n(580),transformMat4:n(581),transformMat3:n(582),transformQuat:n(583),rotateX:n(584),rotateY:n(585),rotateZ:n(586),forEach:n(587)}},function(t,e,n){"use strict";var r=n(1),i=n(41),o=n(5),a=n(241),s=n(139),u=n(138),c=n(223),l=function t(e){if(!(this instanceof t))return new t(e);var r=n(15);return e=e||{},i.call(this,e),this._view=o.mat4AsArray(),this._proj=o.mat4AsArray(),this._projection=null,this._transform=o.mat4AsArray(),this._inverse=o.mat4AsArray(),this._bounds=null,this._display=null,this._world=null,this._viewport={width:1,height:1},this._createProj=function(){var t="perspective"===this._projection?u.frustum:u.ortho,e=this._clipbounds[this._projection];t(this._proj,e.left,e.right,e.bottom,e.top,e.near,e.far)},this._update=function(){this._bounds=null,this._display=null,this._world=null,this._transform=u.multiply(o.mat4AsArray(),this._proj,this._view),u.invert(this._inverse,this._transform),this.geoTrigger(r.camera.view,{camera:this})},Object.defineProperty(this,"view",{get:function(){return this._view},set:function(t){u.copy(this._view,t),this._update()}}),Object.defineProperty(this,"bounds",{get:function(){return null===this._bounds&&(this._bounds=this._getBounds()),this._bounds},set:function(t){this._setBounds(t),this._update()}}),Object.defineProperty(this,"clipbounds",{get:function(){return this._clipbounds[this._projection]},set:function(t){var e=this._clipbounds[this._projection];if((t={left:void 0===t.left?e.left:t.left,right:void 0===t.right?e.right:t.right,top:void 0===t.top?e.top:t.top,bottom:void 0===t.bottom?e.bottom:t.bottom,near:void 0===t.near?e.near:t.near,far:void 0===t.far?e.far:t.far}).left===t.right)throw new Error("Left and right values must be different");if(t.top===t.bottom)throw new Error("Top and bottom values must be different");if(t.near===t.far)throw new Error("Near and far values must be different");this._clipbounds[this._projection]=t,this._createProj(),this._update()}}),Object.defineProperty(this,"display",{get:function(){if(null===this._display){var t=this._clipbounds[this._projection],e=o.mat4AsArray();u.translate(e,e,[this.viewport.width/2,this.viewport.height/2,0]),u.scale(e,e,[this.viewport.width/(t.right-t.left),this.viewport.height/(t.bottom-t.top),1]),u.translate(e,e,[-(t.left+t.right)/2,-(t.top+t.bottom)/2,0]),u.multiply(e,e,this._transform),this._display=e}return this._display}}),Object.defineProperty(this,"world",{get:function(){return null===this._world&&(this._world=u.invert(o.mat4AsArray(),this.display)),this._world}}),Object.defineProperty(this,"projection",{get:function(){return this._projection},set:function(t){if(!this.constructor.projection[t])throw new Error("Unsupported projection type: "+t);t!==this._projection&&(this._projection=t,this._createProj(),this._update(),this.geoTrigger(r.camera.projection,{camera:this,projection:t}))}}),Object.defineProperty(this,"projectionMatrix",{get:function(){return this._proj}}),Object.defineProperty(this,"transform",{get:function(){return this._transform}}),Object.defineProperty(this,"inverse",{get:function(){return this._inverse}}),Object.defineProperty(this,"viewport",{get:function(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function(t){if(!(t.width>0&&t.height>0))throw new Error("Invalid viewport dimensions");t.width===this._viewport.width&&t.height===this._viewport.height||(this._viewport.width&&this._viewport.height&&(this._scale([this._viewport.width/t.width,this._viewport.height/t.height,1]),this._translate([(t.width-this._viewport.width)/2,(t.height-this._viewport.height)/2,0])),this._viewport={width:t.width,height:t.height,left:t.left,top:t.top},this._update(),this.geoTrigger(r.camera.viewport,{camera:this,viewport:this.viewport}))}}),this._resetView=function(){return u.identity(this._view),this},this._translate=function(t){return u.translate(this._view,this._view,t),this},this._scale=function(t){return u.scale(this._view,this._view,t),this},this._worldToClip4=function(t){return c.transformMat4(t,t,this._transform)},this._clipToWorld4=function(t){return c.transformMat4(t,t,this._inverse)},this.applyProjection=function(t){var e;return"perspective"===this._projection?(e=1/(t[3]||1),t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.unapplyProjection=function(t){var e;return"perspective"===this._projection?(e=t[3]||1,t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.worldToDisplay4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=c.transformMat4(t,t,this.display))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.displayToWorld4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=c.transformMat4(t,t,this.world))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.worldToDisplay=function(t){var e=this._clipbounds[this._projection];return{x:(t=this.worldToDisplay4([t.x,t.y,-e.near]))[0],y:t[1]}},this.displayToWorld=function(t){return{x:(t=this.displayToWorld4([t.x,t.y,-1]))[0],y:t[1]}},this._getBounds=function(){var t,e,n,r,i={};return t=this.displayToWorld({x:0,y:0}),e=this.displayToWorld({x:this._viewport.width,y:0}),n=this.displayToWorld({x:0,y:this._viewport.height}),r=this.displayToWorld({x:this._viewport.width,y:this._viewport.height}),i.left=Math.min(t.x,e.x,n.x,r.x),i.bottom=Math.min(t.y,e.y,n.y,r.y),i.right=Math.max(t.x,e.x,n.x,r.x),i.top=Math.max(t.y,e.y,n.y,r.y),i},this._setBounds=function(t){var e={width:t.right-t.left,height:t.top-t.bottom},n={x:(t.left+t.right)/2,y:(t.bottom+t.top)/2};return this._viewFromCenterSizeRotation(n,e,0),this},this._viewFromCenterSizeRotation=function(t,e,n){var r,i,a,s=o.vec3AsArray(),u=o.vec3AsArray();return this._resetView(),(i=Math.abs(e.width))/(a=Math.abs(e.height))>=(r=this._viewport.width/this._viewport.height)?(a=i/r,u[0]=2/i,u[1]=2/a):(i=a*r,u[0]=2/i,u[1]=2/a),u[2]=1,this._scale(u),n&&this._rotate(n),s[0]=-t.x,s[1]=-t.y,s[2]=0,this._translate(s),this},this.viewFromCenterSizeRotation=function(t,e,n){return this._viewFromCenterSizeRotation(t,e,n),this._update(),this},this.pan=function(t){if(t.x||t.y||t.z)return this._translate([t.x,t.y,t.z||0]),this._update(),this},this.zoom=function(t){if(1!==t)return u.scale(this._view,this._view,[t,t,t]),this._update(),this},this._rotate=function(t,e,n){if(t){n=n||[0,0,-1],e?void 0!==e.x&&(e=[e.x||0,e.y||0,e.z||0]):e=[0,0,0];var r=[-e[0],-e[1],-e[2]];return u.translate(this._view,this._view,e),u.rotate(this._view,this._view,t,n),u.translate(this._view,this._view,r),this}},this.css=function(e){var n;switch((e||"").toLowerCase()){case"display":case"":n=this.display;break;case"world":n=this.world;break;default:throw new Error("Unknown transform "+e)}return t.css(n)},this.ppMatrix=function(t,e){var n=t;function r(t){var r=n[t],i=r.toExponential(e);return r>=0&&(i=" "+i),i}return e=e||2,[[r(0),r(4),r(8),r(12)].join(" "),[r(1),r(5),r(9),r(13)].join(" "),[r(2),r(6),r(10),r(14)].join(" "),[r(3),r(7),r(11),r(15)].join(" ")].join("\n")},this.toString=function(){return this.ppMatrix(this._transform)},this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")},this.valueOf=function(){return this._transform},this._clipbounds=this.constructor.clipbounds,this._resetView(),this.projection=e.projection||"parallel",e.viewport&&(this.viewport=e.viewport),this._update(),this};l.projection={perspective:!0,parallel:!0},l.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}},l.css=function(t){return"matrix3d("+t.map(function(t){return(t=(+t).toPrecision(15)).indexOf("e")>=0?t=(+t).toString():t.indexOf(".")>=0&&(t=t.replace(/(\.|)0+$/,"")),t}).join(",")+")"},l.vec3=s,l.mat3=a,l.vec4=c,l.mat4=u,r(l,i),t.exports=l},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(19),a=n(18),s=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var i,s=n(5),u=this,c=this._init,l=this._exit,h=this.data,f=this.draw,d=this.modified,p=this.style,m=[];function v(t,e,n){return t=t||u.data(),e=e||u.style.get("position"),n=n||u.style.get("polygon"),t.map(function(t,r){var i=n(t,r);if(i){var o,a,s,c,l,h;for(s=i.outer||(Array.isArray(i)?i:[]),o=new Array(s.length),c=0;c<s.length;c+=1)o[c]=e.call(u,s[c],c,t,r),l=o[c].x||o[c][0]||0,h=o[c].y||o[c][1]||0,c?(l<a.min.x&&(a.min.x=l),h<a.min.y&&(a.min.y=h),l>a.max.x&&(a.max.x=l),h>a.max.y&&(a.max.y=h)):a={min:{x:l,y:h},max:{x:l,y:h}};return{outer:o,inner:(i.inner||[]).map(function(n){s=n||[];var i=new Array(s.length);for(c=0;c<s.length;c+=1)i[c]=e.call(u,s[c],c,t,r);return i}),range:a}}})}function g(t){return s.isFunction(t)?function(e){return t(e[0],e[1],e[2],e[3])}:t}return this.featureType="polygon",this._subfeatureStyles={fillColor:!0,fillOpacity:!0,lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.data=function(t){var e=h(t);return void 0!==t&&(m=v(),this._checkForStroke()),e},this.polygonCoordinates=function(){return m},this.polygon=function(t){return void 0===t?u.style("polygon"):(u.style("polygon",t),u.dataTime().modified(),u.modified(),m=v(),u)},this.position=function(t){return void 0===t?u.style("position"):(u.style("position",t),u.dataTime().modified(),u.modified(),m=v(),u)},this.pointSearch=function(t){var e=[],n=[],r={},o=u.data(),c=u.layer().map(),l=a.transformCoordinates(c.ingcs(),u.gcs(),t);(m.forEach(function(t,i){s.pointInPolygon(l,t.outer,t.inner,t.range)&&(n.push(i),r[i]=!0,e.push(o[i]))}),i)&&i.pointSearch(t).found.forEach(function(t){t.length&&4===t[0].length&&!r[t[0][3]]&&(n.push(t[0][3]),r[t[0][3]]=!0,e.push(o[t[0][3]]))});return{index:n,found:e}},this.style=function(t,e){var n=p.apply(this,arguments);return void 0===t||"string"==typeof t&&void 0===e||this._checkForStroke(),n},this.style.get=p.get,this._getLoopData=function(t,e,n){var r,i=[];for(r=0;r<n.length;r+=1)i.push([n[r],r,t,e]);return i},this._checkForStroke=function(){if(!1!==p("stroke")){if(u.layer()){i||(i=u.layer().createFeature("line",{selectionAPI:!1,gcs:u.gcs(),visible:u.visible(void 0,!0)}),u.dependentFeatures([i]));var t=u.style();i.style({antialiasing:g(t.antialiasing),closed:!0,lineCap:g(t.lineCap),lineJoin:g(t.lineJoin),miterLimit:g(t.miterLimit),strokeWidth:g(t.strokeWidth),strokeStyle:g(t.strokeStyle),strokeColor:g(t.strokeColor),strokeOffset:g(t.strokeOffset),strokeOpacity:s.isFunction(t.stroke)||!t.stroke?function(t){return u.style.get("stroke")(t[2],t[3])?u.style.get("strokeOpacity")(t[0],t[1],t[2],t[3]):0}:g(t.strokeOpacity)});var e=this.data(),n=this.style("position");if(e!==i._lastData||n!==i._lastPosVal){var r,o,a,c=[],l=this.style.get("position"),h=this.style.get("polygon");for(r=0;r<e.length;r+=1)(o=h(e[r],r))&&(a=o.outer||(Array.isArray(o)?o:[])).length>=2&&(c.push(u._getLoopData(e[r],r,a)),o.inner&&o.inner.forEach(function(t){t.length>=2&&c.push(u._getLoopData(e[r],r,t))}));i.position(function(t,e,n,r){return l(t[0],t[1],t[2],t[3])}),i.data(c),i._lastData=e,i._lastPosVal=n}}}else i&&u.layer()&&(u.layer().deleteFeature(i),i=null,u.dependentFeatures([]))},this.draw=function(){var t=f();return i&&i.draw(),t},this.modified=function(){var t=d();return i&&i.modified(),t},this.rdpSimplifyData=function(t,e,n,r){var i=u.layer().map(),o=i.gcs(),c=u.gcs(),l=v(t,n,r);return void 0===e&&(e=.5*i.unitsPerPixel(i.zoom())),l=l.map(function(t){return{outer:a.transformCoordinates(c,o,t.outer),inner:t.inner.map(function(t){return a.transformCoordinates(c,o,t)})}}),t=t.map(function(t,n){var r=l[n],i={};for(var u in t)!t.hasOwnProperty(u)||Array.isArray(t)&&u>=0&&u<t.length||(i[u]=t[u]);if(r&&r.outer.length>=3)if(i.inner=r.inner.filter(function(t){return t.length>=3}),i.outer=s.rdpLineSimplify(r.outer,e,!0,i.inner),i.outer.length>=3){var h=i.inner.slice();i.inner.map(function(t,n){h[n]=i.outer;var r=s.rdpLineSimplify(t,e,!0,h);return h[n]=r,r}).filter(function(t){return t.length>=3}),i.outer=a.transformCoordinates(o,c,i.outer),i.inner=i.inner.map(function(t){return a.transformCoordinates(o,c,t)})}else i.outer=i.inner=[];else i.outer=[];return i}),u.style("position",function(t){return t}),u.style("polygon",function(t){return t}),u.data(t),u},this.mouseOverOrderClosestBorder=function(t){var e=t.feature.data(),n=t.feature.layer().map(),r=a.transformCoordinates(n.ingcs(),t.feature.gcs(),t.mouse.geo),i=t.feature.polygonCoordinates(),o={};t.over.index.forEach(function(t,e){var n,a=i[t];a.outer.forEach(function(t,e){var i=a.outer[(e+1)%a.outer.length],o=s.distance2dToLineSquared(r,t,i);(void 0===n||o<n)&&(n=o)}),a.inner.forEach(function(t){t.forEach(function(e,i){var o=t[(i+1)%t.length],a=s.distance2dToLineSquared(r,e,o);(void 0===n||a<n)&&(n=a)})}),o[t]=n}),t.over.index.sort(function(t,e){return o[t]-o[e]}).reverse(),t.over.index.forEach(function(n,r){t.over.found[r]=e[n]})},this._exit=function(){i&&u.layer()&&(u.layer().deleteFeature(i),i=null,u.dependentFeatures([])),l()},this._init=function(t){t=t||{},c.call(u,t);var e=r.extend({},{fill:!0,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:!1,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:function(t){return t},position:function(t){return t}},void 0===t.style?{}:t.style);void 0!==t.polygon&&(e.polygon=t.polygon),void 0!==t.position&&(e.position=t.position),u.style(e),this._checkForStroke()},this};s.create=function(t,e){return(e=e||{}).type="polygon",o.create(t,e)},s.capabilities={feature:"polygon"},i(s,o),t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(41),o=n(5),a=n(242),s=function t(e){if(!(this instanceof t))return new t(e);i.call(this);var r,s,u,c,l,h,f,d,p,m,v=n(3),g=n(15),y=n(130),x=n(5).throttle,_=n(5).debounce,b=n(5).actionMatch,M=n(63),w=this,T=null,A=!1,E=!1,S=function(){};function C(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}function O(){h={boundDocumentHandlers:h.boundDocumentHandlers}}function P(t,e){e=e<=0?30:e;var n=function(){var t,e,n,i;if(!r.spring.enabled)return{x:0,y:0};var o=w.map().maxBounds(void 0,null),a=w.map().gcsToDisplay({x:o.left,y:o.top},null),s=w.map().gcsToDisplay({x:o.right,y:o.bottom},null),u=r.spring.springConstant,c=w.map().node().width(),l=w.map().node().height();return t=u*Math.max(0,a.x),e=u*Math.max(0,c-s.x),n=u*Math.max(0,a.y)/2,i=u*Math.max(0,l-s.y)/2,{x:t-e,y:n-i}}(),i=C(t),o=t.x/i,a=t.y/i;return i*=Math.exp(-r.momentum.drag*e),C(n)*e+i<r.momentum.minSpeed?null:(i>0?(o*=i,a*=i):(o=0,a=0),{x:o-n.x*e,y:a-n.y*e})}return r=v.extend(!0,{},{throttle:30,discreteZoom:!1,actions:[{action:y.pan,input:"left",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"},{action:y.zoom,input:"right",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button zoom"},{action:y.zoom,input:"wheel",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"wheel zoom"},{action:y.rotate,input:"left",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"button rotate"},{action:y.rotate,input:"wheel",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"wheel rotate"},{action:y.select,input:"left",modifiers:{shift:!0,ctrl:!0},selectionRectangle:g.select,owner:"geo.mapInteractor",name:"drag select"},{action:y.zoomselect,input:"left",modifiers:{shift:!0,ctrl:!1},selectionRectangle:g.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:y.unzoomselect,input:"right",modifiers:{shift:!0,ctrl:!1},selectionRectangle:g.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:y.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:y.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"}],click:{enabled:!0,buttons:{left:!0,right:!0,middle:!0},duration:0,cancelOnMove:!0},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:!1,ctrl:!1},1:{shift:!0,ctrl:!0},2:{shift:!0,ctrl:!1}},focusHighlight:!0},alwaysTouch:!1,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:!0,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[y.pan,y.zoom]},spring:{enabled:!1,springConstant:5e-5},zoomAnimation:{enabled:!0,duration:500,ease:function(t){return(2-t)*t}}},e||{}),e&&e.actions&&(r.actions=v.extend(!0,[],e.actions)),e&&e.momentum&&e.momentum.actions&&(r.momentum.actions=v.extend(!0,[],e.momentum.actions)),e&&e.keyboard&&void 0!==e.keyboard.actions&&(r.keyboard.actions=v.extend(!0,{},e.keyboard.actions)),s={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:!1,right:!1,middle:!1},modifiers:{alt:!1,ctrl:!1,shift:!1,meta:!1},time:new Date,deltaTime:1,velocity:{x:0,y:0}},h={},f={},this._handleKeys=function(t,e,n){n&&!0===n.simulated&&(e=n);var i,o,a=r.keyboard.meta||{0:{}},s=w.map(),u=s.size(),c=t,l="",h={};for(i in a)a.hasOwnProperty(i)&&(void 0!==a[i].shift&&e.shiftKey!==!!a[i].shift||void 0!==a[i].ctrl&&e.ctrlKey!==!!a[i].ctrl||void 0!==a[i].alt&&e.altKey!==!!a[i].alt||void 0!==a[i].meta&&e.metaKey!==!!a[i].meta||(o=i));if(void 0!==o){switch(e.stopPropagation(),e.preventDefault(),t.indexOf(".")>=0&&(c=t.substr(0,t.indexOf(".")),l=t.substr(t.indexOf(".")+1)),c){case"zoom":switch(l){case"in":h.zoomDelta=[.05,.25,1][o];break;case"out":h.zoomDelta=-[.05,.25,1][o];break;default:isNaN(parseFloat(l))||(h.zoom=parseFloat(l))}break;case"pan":switch(l){case"down":h.panY=-Math.max(1,[0,.05,.5][o]*u.height);break;case"left":h.panX=Math.max(1,[0,.05,.5][o]*u.width);break;case"right":h.panX=-Math.max(1,[0,.05,.5][o]*u.width);break;case"up":h.panY=Math.max(1,[0,.05,.5][o]*u.height)}break;case"rotate":switch(l){case"ccw":h.rotationDelta=[1,5,90][o]*Math.PI/180;break;case"cw":h.rotationDelta=-[1,5,90][o]*Math.PI/180;break;default:isNaN(parseFloat(l))||(h.rotation=parseFloat(l))}}s.geoTrigger(g.keyaction,{move:h,action:t,factor:o,event:e}),h.cancel||(void 0!==h.zoom?s.zoom(h.zoom):h.zoomDelta&&s.zoom(s.zoom()+h.zoomDelta),void 0!==h.rotation?s.rotation(h.rotation):h.rotationDelta&&s.rotation(s.rotation()+h.rotationDelta),(h.panX||h.panY)&&s.pan({x:h.panX||0,y:h.panY||0}))}},this.hasTouchSupport=function(){return"ontouchstart"in window||window.Modernizr&&window.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1},this._handleTouch=function(t){var e=!1;if("mouse"===t.pointerType&&l.touchSupport&&(e=!0),"hammer.input"===t.type){if("pan"!==l.lastEventType||1===t.pointers.length)return;e=!0,l.lastEventType=null}var n=/^(.*)(start|end|move|tap)$/.exec(t.type);if(n&&3===n.length||(e=!0),e)h.boundDocumentHandlers&&l.lastEvent&&w._handleMouseUpDocument(l.lastEvent);else{t.which=n[1];var i=(new Date).valueOf();"pan"===t.which&&"pan"!==l.lastEventType&&i-l.lastTime<r.touchPanDelay||(l.lastTime=i,l.lastEventType=t.which,l.lastEvent=t,void 0===t.pageX&&void 0!==t.center&&void 0!==t.center.x&&(t.pageX=t.center.x,t.pageY=t.center.y),"start"===n[2]&&(w._handleMouseDown(t),w._setClickMaybe(!1),h.boundDocumentHandlers&&v(document).on("mousemove.geojs",w._handleMouseUpDocument)),"start"!==n[2]&&"move"!==n[2]||(h.boundDocumentHandlers?w._handleMouseMoveDocument(t):w._handleMouseMove(t)),"end"!==n[2]&&"cancel"!==n[2]||(h.boundDocumentHandlers?w._handleMouseUpDocument(t):w._handleMouseUp(t),l.lastEvent=null),"tap"!==n[2]||h.boundDocumentHandlers||(t.which=1,l.lastEventType=null,w._handleMouseDown(t),w._handleMouseUp(t),l.lastEventType=n[2]))}},this.retriggerMouseMove=function(){w.map().geoTrigger(g.mousemove,w.mouse())},this._connectEvents=function(){if(!r.map)return w;w._disconnectEvents(),d=v(r.map.node()),w._handleMouseWheel=function(){var t={};function e(e){var n,i;A||(t!==f&&(f=t={kind:"wheel",scroll:{x:0,y:0}}),e.preventDefault(),e.deltaFactor=1,1===e.originalEvent.deltaMode?e.deltaFactor=40:2===e.originalEvent.deltaMode&&(e.deltaFactor=v(window).height()),n=e.originalEvent.deltaX||0,i=e.originalEvent.deltaY||0,n=n*r.wheelScaleX*e.deltaFactor/120,i=i*r.wheelScaleY*e.deltaFactor/120,t.scroll.x+=n,t.scroll.y+=i)}function n(e){var n,i,o;if(t===f){if(w._getMouseModifiers(e),o=b({wheel:!0},s.modifiers,r.actions),i=(o||{}).action){var a=w.map().transitionCancel("wheel."+i);switch((a|=w.cancel(y.momentum,!0))&&(s.geo=w.map().displayToGcs(s.map),s.mapgcs=w.map().displayToGcs(s.map,null)),i){case y.pan:w.map().pan({x:f.scroll.x,y:f.scroll.y},void 0,"limited");break;case y.zoom:n=-f.scroll.y,S(n,s);break;case y.rotate:w.map().rotation(w.map().rotation()+f.scroll.y*r.rotateWheelScale,s)}w.map().geoTrigger(g.actionwheel,{state:w.state(),mouse:w.mouse(),event:e})}f={}}}return r.throttle>0?x(r.throttle,!1,n,e):function(t){e(t),n(t)}}(),S=function(){var t,e,n,i=0,o=400;function a(o,a){var s,u=w.map();t=v.extend(!0,{},a),i+=o,void 0===n&&(e=n=u.zoom()),n+=o,u&&Math.abs(i)>=1&&r.discreteZoom&&!r.zoomAnimation.enabled&&(s=Math.round(i+u.zoom()),i=i+u.zoom()-s,u.zoom(s,t))}function s(){var o,a=w.map();a&&(r.zoomAnimation.enabled?(o=n,r.discreteZoom&&(o=Math.round(o))===e&&n!==e&&(o=e+(n>e?1:-1)),a.transitionCancel("debounced_zoom."+y.zoom),a.transition({zoom:o,zoomOrigin:t,duration:r.zoomAnimation.duration,ease:r.zoomAnimation.ease,done:function(t){t=t||{};var e=new RegExp("\\."+y.zoom+"$");t.next||t.cancel&&!((""+t.source).search(e)<0)||(n=void 0),r.discreteZoom&&t.cancel&&t.transition&&t.transition.end&&(""+t.source).search(e)<0&&a.zoom(t.transition.end.zoom,t.transition.end.zoomOrigin)}})):(o=i+a.zoom(),r.discreteZoom&&(o=Math.round(o)),a.zoom(o,t))),i=0}!0!==r.discreteZoom&&r.discreteZoom>0&&(o=r.discreteZoom);return(!0===r.discreteZoom||r.discreteZoom>0)&&!r.zoomAnimation.enabled?_(o,!1,s,a):function(t,e){(t||void 0!==n)&&(a(t,e),s())}}(),o.adjustActions(r.actions);var t={};if(["right","pan","rotate"].forEach(function(e){t[e]=r.actions.some(function(t){return t.input[e]})}),d.on("wheel.geojs",w._handleMouseWheel),d.on("mousemove.geojs",w._handleMouseMove),d.on("mousedown.geojs",w._handleMouseDown),d.on("mouseup.geojs",w._handleMouseUp),d.on("dragstart",function(){return!1}),t.right&&d.on("contextmenu.geojs",function(){return!1}),r.keyboard&&r.keyboard.actions){u=a(d[0]);var e=[];for(var i in r.keyboard.actions)r.keyboard.actions.hasOwnProperty(i)&&(u.bind(r.keyboard.actions[i],function(t){return function(e,n){w._handleKeys(t,e,n)}}(i)),e=e.concat(r.keyboard.actions[i]));c=e}if(d.toggleClass("highlight-focus",!!(c&&c.length&&r.keyboard.focusHighlight)),(w.hasTouchSupport()||r.alwaysTouch)&&(t.pan||t.rotate)){var h;try{h=n(611)}catch(t){}if(void 0!==h){var p=[],m=["hammer.input"];t.rotate&&(p.push([h.Rotate,{enable:!0}]),m=m.concat(["rotatestart","rotateend","rotatemove"])),t.pan&&(p.push([h.Pan,{direction:h.DIRECTION_ALL}]),m=m.concat(["panstart","panend","panmove"])),p.push([h.Tap,{event:"doubletap",taps:2}]),p.push([h.Tap,{event:"singletap"},void 0,["doubletap"]]),m=m.concat(["singletap"]);var M={recognizers:p,preventDefault:!0};(l={manager:new h.Manager(d[0],M),touchSupport:w.hasTouchSupport(),lastTime:0}).manager.get("doubletap").recognizeWith("singletap"),m.forEach(function(t){l.manager.on(t,w._handleTouch)})}}return w},this._disconnectEvents=function(){return c&&(u&&u.unbind(c),c=null,u=null),l&&(l.manager.destroy(),l=null),d&&(d.off(".geojs"),d=null),w._handleMouseWheel=function(){},S=function(){},w},this.map=function(t){return void 0!==t?(r.map=t,w._connectEvents(),w):r.map},this.options=function(t){return void 0===t?v.extend({},r):(v.extend(r,t),this._connectEvents(),w)},this._getMousePosition=function(t){var e,n,r=d.offset();e=(n=(new Date).valueOf())-s.time,s.time=n,s.deltaTime=e,s.velocity={x:(t.pageX-s.page.x)/e,y:(t.pageY-s.page.y)/e},s.page={x:t.pageX,y:t.pageY},s.map={x:t.pageX-r.left,y:t.pageY-r.top};try{s.geo=w.map().displayToGcs(s.map),s.mapgcs=w.map().displayToGcs(s.map,null)}catch(t){s.geo=s.mapgcs=null}},this._getMouseButton=function(t){for(var e in s.buttons)s.buttons.hasOwnProperty(e)&&(s.buttons[e]=!1);if(void 0!==t.buttons)s.buttons.left=!!(1&t.buttons),s.buttons.right=!!(2&t.buttons),s.buttons.middle=!!(4&t.buttons);else if("mouseup"!==t.type)switch(t.which){case 1:s.buttons.left=!0;break;case 2:s.buttons.middle=!0;break;case 3:s.buttons.right=!0}!t.which||t.which>=1&&t.which<=3||(s.buttons[t.which]=!0)},this._getMouseModifiers=function(t){s.modifiers.alt=t.altKey,s.modifiers.ctrl=t.ctrlKey,s.modifiers.meta=t.metaKey,s.modifiers.shift=t.shiftKey},this._getSelection=function(){var t=h.origin,e=w.mouse(),n=w.map(),r={},i={};return r.upperLeft={x:Math.min(t.map.x,e.map.x),y:Math.min(t.map.y,e.map.y)},r.lowerRight={x:Math.max(t.map.x,e.map.x),y:Math.max(t.map.y,e.map.y)},r.upperRight={x:r.lowerRight.x,y:r.upperLeft.y},r.lowerLeft={x:r.upperLeft.x,y:r.lowerRight.y},i.upperLeft=n.displayToGcs(r.upperLeft,null),i.lowerRight=n.displayToGcs(r.lowerRight,null),i.upperRight=n.displayToGcs(r.upperRight,null),i.lowerLeft=n.displayToGcs(r.lowerLeft,null),p.data([{ul:i.upperLeft,ur:i.upperRight,ll:i.lowerLeft,lr:i.lowerRight}]),p.draw(),{display:r,gcs:i,mouse:e,origin:v.extend({},h.origin)}},this.cancel=function(t,e){var n;return(n=t?h.action===t:!!h.action)&&(e||(f={}),O()),n},this._setClickMaybe=function(t){E=t,m&&(window.clearTimeout(m),m=null)},this._handleMouseDown=function(t){var e,n;if(!(A||l&&"tap"===l.lastEventType&&(new Date).valueOf()-l.lastTime<1e3)){w._getMousePosition(t),w._getMouseButton(t),w._getMouseModifiers(t),!r.click.enabled||s.buttons.left&&!r.click.buttons.left||s.buttons.right&&!r.click.buttons.right||s.buttons.middle&&!r.click.buttons.middle||(w._setClickMaybe({x:s.page.x,y:s.page.y,buttons:v.extend({},s.buttons)}),r.click.duration>0&&(m=window.setTimeout(function(){E=!1,m=null},r.click.duration))),e=((n=b(s.buttons,s.modifiers,r.actions))||{}).action;var i=w.map();i.transitionCancel("_handleMouseDown"+(e?"."+e:"")),w.cancel(y.momentum),s.velocity={x:0,y:0},e&&(f={kind:"move"},h={action:e,actionRecord:n,origin:v.extend(!0,{},s),initialZoom:i.zoom(),initialRotation:i.rotation(),initialEventRotation:t.rotation,delta:{x:0,y:0}},n.selectionRectangle&&(T&&(T.clear(),i.deleteLayer(T),T=null),T=i.createLayer("feature",{features:[M.capabilities.color]}),(p=T.createFeature("quad",{gcs:i.gcs()})).style({opacity:.25,color:{r:.3,g:.3,b:.3}}),i.geoTrigger(g.brushstart,w._getSelection())),i.geoTrigger(g.actiondown,{state:w.state(),mouse:w.mouse(),event:t}),r.throttle>0?v(document).on("mousemove.geojs",x(r.throttle,w._handleMouseMoveDocument)):v(document).on("mousemove.geojs",w._handleMouseMoveDocument),v(document).on("mouseup.geojs",w._handleMouseUpDocument),h.boundDocumentHandlers=!0)}},this._handleMouseMove=function(t){A||h.boundDocumentHandlers||(r.click.cancelOnMove&&E&&w._setClickMaybe(!1),w._getMousePosition(t),w._getMouseButton(t),w._getMouseModifiers(t),E||w.map().geoTrigger(g.mousemove,w.mouse()))},this._handleZoomrotate=function(t){var e=Math.log2(t.scale);if(!h.zoomrotateAllowZoom&&e&&Math.abs(e)>=Math.log2(1+r.zoomrotateMinimumZoom)&&(r.zoomrotateMinimumZoom&&(h.initialZoom-=e),h.zoomrotateAllowZoom=!0),h.zoomrotateAllowZoom&&e){var n=h.initialZoom+e;w.map().zoom(n,h.origin)}var i=(t.rotation-h.initialEventRotation)*Math.PI/180;if(!h.zoomrotateAllowRotation&&i&&Math.abs(i)>=r.zoomrotateMinimumRotation&&(r.zoomrotateMinimumRotation&&(h.initialEventRotation=t.rotation,i=0),h.zoomrotateAllowRotation=!0),h.zoomrotateAllowRotation){var a=h.initialRotation+i;(i=o.wrapAngle(a-w.map().rotation()))&&(i*(h.lastRotationDelta||0)>=0||Math.abs(i)>=r.zoomrotateReverseRotation)&&(w.map().rotation(a,h.origin),h.lastRotationDelta=i)}var s=h.origin.page;if(h.initialEventGeo){var u=d.offset();(s=w.map().gcsToDisplay(h.initialEventGeo)).x+=u.left,s.y+=u.top}var c=t.pageX-s.x,l=t.pageY-s.y,f=c*c+l*l;!h.zoomrotateAllowPan&&f&&f>=r.zoomrotateMinimumPan*r.zoomrotateMinimumPan&&(r.zoomrotateMinimumPan?(c=l=0,h.initialEventGeo=w.mouse().geo):h.initialEventGeo=h.origin.geo,h.zoomrotateAllowPan=!0),h.zoomrotateAllowPan&&(c||l)&&w.map().pan({x:c,y:l})},this._handleMouseMoveDocument=function(t){var e,n,i;if(w.map()&&!A&&"move"===f.kind&&(w._getMousePosition(t),w._getMouseButton(t),w._getMouseModifiers(t),!r.click.cancelOnMove||void 0!==E.x&&s.page.x===E.x&&s.page.y===E.y||w._setClickMaybe(!1),!E))if(h.action){if(e=s.map.x-h.origin.map.x-h.delta.x,n=s.map.y-h.origin.map.y-h.delta.y,h.delta.x+=e,h.delta.y+=n,h.action===y.pan)w.map().pan({x:e,y:n},void 0,"limited");else if(h.action===y.zoom)S(-n*r.zoomScale/120,h);else if(h.action===y.rotate){var o,a;void 0===h.origin.rotation&&(o=h.origin.map.x-w.map().size().width/2,a=h.origin.map.y-w.map().size().height/2,h.origin.rotation=w.map().rotation()-Math.atan2(a,o)),o=s.map.x-w.map().size().width/2,a=s.map.y-w.map().size().height/2,w.map().rotation(h.origin.rotation+Math.atan2(a,o))}else h.action===y.zoomrotate?w._handleZoomrotate(t):h.actionRecord.selectionRectangle&&(i=w._getSelection(),w.map().geoTrigger(g.brush,i));w.map().geoTrigger(g.actionmove,{state:w.state(),mouse:w.mouse(),event:t}),t.preventDefault()}else console.log("WARNING: Invalid state in mapInteractor.")},this._zoomFromSelection=function(t,e,n){if((t===y.zoomselect||t===y.unzoomselect)&&e.x!==n.x&&e.y!==n.y){var r,i,o=w.map(),a=o.size(),s={x:Math.abs((n.x-e.x)/a.width),y:Math.abs((n.y-e.y)/a.height)};if(t===y.zoomselect?(i=o.displayToGcs({x:(e.x+n.x)/2,y:(e.y+n.y)/2},null),r=o.zoom()-Math.log2(Math.max(s.x,s.y))):(r=o.zoom()+Math.log2(Math.max(s.x,s.y)),i=o.center(void 0,null)),o.discreteZoom()&&(r=Math.floor(r)),o.zoom(r),t===y.zoomselect)o.center(i,null);else{var u=o.gcsToDisplay(i,null);o.pan({x:(e.x+n.x)/2-u.x,y:(e.y+n.y)/2-u.y})}}},this._handleMouseUpDocument=function(t){var e,n;if(!A&&(f={},w._setClickMaybe(!1),w._getMouseButton(t),w._getMouseModifiers(t),v(document).off(".geojs"),h.boundDocumentHandlers=!1,s.buttons.right&&t.preventDefault(),h.actionRecord&&h.actionRecord.selectionRectangle&&(w._getMousePosition(t),e=w._getSelection(),T.clear(),w.map().deleteLayer(T),T=null,p=null,w.map().geoTrigger(g.brushend,e),!0!==h.actionRecord.selectionRectangle&&w.map().geoTrigger(h.actionRecord.selectionRectangle,e),w._zoomFromSelection(h.action,e.display.lowerLeft,e.display.upperRight),w.map().geoTrigger(g.actionselection,{state:w.state(),mouse:w.mouse(),event:t,lowerLeft:e.display.lowerLeft,upperRight:e.display.upperRight})),w.map().geoTrigger(g.actionup,{state:w.state(),mouse:w.mouse(),event:t}),n=h.action,O(),r.momentum.enabled&&v.inArray(n,r.momentum.actions)>=0)){var i=(new Date).valueOf(),o=i-s.time+s.deltaTime;i-s.time<r.momentum.stopTime?(s.velocity.x*=s.deltaTime/o,s.velocity.y*=s.deltaTime/o,s.deltaTime=o):s.velocity.x=s.velocity.y=0,w.springBack(!0,n)}},this._handleMouseUp=function(t){A||(w._getMouseButton(t),E&&w._handleMouseClick(t))},this._handleMouseClick=function(t){h.actionRecord&&h.actionRecord.selectionRectangle&&(T.clear(),w.map().deleteLayer(T),T=null,p=null,h.action=h.actionRecord=null),w._getMouseButton(t),w._getMouseModifiers(t),w.cancel(y.pan),v(document).off(".geojs"),h.boundDocumentHandlers=!1;var e=w.mouse();e.buttonsDown=E.buttons,w._setClickMaybe(!1),w.map().geoTrigger(g.mouseclick,e)},this._handleMouseWheel=function(){},this.springBack=function(t,e){h.action!==y.momentum&&(t||(s.velocity={x:0,y:0}),h.origAction=e,h.action=y.momentum,h.origin=w.mouse(),h.momentum=w.mouse(),h.start=new Date,h.handler=function(){var t,e,n,i;if(h.action===y.momentum&&w.map()&&!w.map().transition())if(i=Math.min(h.momentum.deltaTime,30),n=h.start.valueOf(),h.start=new Date,t=P(h.momentum.velocity,h.start-n)){switch((e=C(t))>r.momentum.maxSpeed&&(e=r.momentum.maxSpeed/e,t.x=t.x*e,t.y=t.y*e),isFinite(t.x)&&isFinite(t.y)||(t.x=0,t.y=0),h.momentum.velocity.x=t.x,h.momentum.velocity.y=t.y,h.origAction){case y.zoom:var o=h.momentum.velocity.y*i;S(-o*r.zoomScale/120,h);break;default:w.map().pan({x:h.momentum.velocity.x*i,y:h.momentum.velocity.y*i},void 0,"limited")}h.handler&&w.map().scheduleAnimationFrame(h.handler)}else O()},h.handler&&w.map().scheduleAnimationFrame(h.handler))},this.destroy=function(){w._disconnectEvents(),w.map()&&v(w.map().node()).removeClass("highlight-focus"),w.map(null)},this.mouse=function(){return v.extend(!0,{},s)},this.keyboard=function(t){return void 0===t?v.extend(!0,{},r.keyboard||{}):w.options({keyboard:t})},this.state=function(){return v.extend(!0,{},h)},this.pause=function(t){return void 0===t?A:(A=!!t,w)},this.addAction=function(t,e){t&&t.action&&t.input&&(o.addAction(r.actions,t,e),r.map&&r.actions.some(function(t){return t.input.right})&&(d.off("contextmenu.geojs"),d.on("contextmenu.geojs",function(){return!1})))},this.hasAction=function(t,e,n){return o.hasAction(r.actions,t,e,n)},this.removeAction=function(t,e,n){var i=o.removeAction(r.actions,t,e,n);return r.map&&!r.actions.some(function(t){return t.input.right})&&d.off("contextmenu.geojs"),i},this.simulateEvent=function(t,e){var n,r,i,o,a;if(!w.map())return w;if("keyboard"===t&&u){var s={shiftKey:e.shift||e.shiftKey||!1,ctrlKey:e.ctrl||e.ctrlKey||!1,altKey:e.alt||e.altKey||!1,metaKey:e.meta||e.metaKey||!1,toString:function(){return e.keys},stopPropagation:function(){},preventDefault:function(){},simulated:!0};u.trigger(s)}else r=e.page||{},e.map&&(i=d.offset(),r.x=e.map.x+i.left,r.y=e.map.y+i.top),"left"===e.button?(o=1,a=1):"right"===e.button?(o=3,a=2):"middle"===e.button&&(o=2,a=4),e.modifiers=e.modifiers||[],e.wheelDelta=e.wheelDelta||{},n=v.Event(t,{pageX:r.x,pageY:r.y,which:o,buttons:a,altKey:e.modifiers.indexOf("alt")>=0,ctrlKey:e.modifiers.indexOf("ctrl")>=0,metaKey:e.modifiers.indexOf("meta")>=0,shiftKey:e.modifiers.indexOf("shift")>=0,center:e.center,rotation:e.touch?e.rotation||0:e.rotation,scale:e.touch?e.scale||1:e.scale,pointers:e.pointers,pointerType:e.pointerType,originalEvent:{deltaX:e.wheelDelta.x,deltaY:e.wheelDelta.y,deltaMode:e.wheelMode,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}}),e.touch&&l?w._handleTouch(n):d.trigger(n),t.indexOf(".geojs")>=0&&v(document).trigger(n)},this._connectEvents(),this};r(s,i),t.exports=s},function(t,e,n){"use strict";var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";t.exports=function(){var t,e=[];for(e.length=8,t=0;t<8;t+=1)e[t]=r.charAt(Math.floor(Math.random()*r.length));return e.join("")}},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);var r=n(3),o=n(5);e=e||{},i.call(this,e);var a=this,s=this._init,u={};return this.mesh=function(t,e){if(void 0===t)return u;if("string"==typeof t&&void 0===e)return u[t];if(void 0===e){var n=r.extend({},{gridWidth:function(){return t.gridHeight?Math.floor(a.data().length/t.gridHeight):Math.floor(Math.sqrt(a.data().length))},gridHeight:function(){return t.gridWidth?Math.floor(a.data().length/t.gridWidth):Math.floor(Math.sqrt(a.data().length))}},u,t);u=n}else u[t]=e;return a.modified(),a},this.mesh.get=function(t){if(void 0===t){var e,n={};for(e in u)u.hasOwnProperty(e)&&(n[e]=a.mesh.get(e));return n}return o.ensureFunction(u[t])},this.position=function(t){return void 0===t?a.style("position"):(a.style("position",t),a.dataTime().modified(),a.modified(),a)},this._createMesh=function(t){t=t||{};var e,n,r,i,o,s,u,c,l,h,f,d,p,m,v,g=a.data(),y=a.position(),x=a.mesh.get("elements")(g),_=a.mesh.get("elementPacking")(g),b=a.mesh.get("gridWidth")(g),M=a.mesh.get("gridHeight")(g),w=a.mesh.get("wrapLongitude")(g),T=a.mesh.get("x0")(g),A=a.mesh.get("y0")(g),E=a.mesh.get("dx")(g),S=a.mesh.get("dy")(g),C=b,O={shape:"square",elements:[]};if(x){var P=x.length&&Array.isArray(x[0]);if("square"===_||"triangle"!==_&&(!P&&!(x.length%4)&&x.length%3||P&&4===x[0].length))if(O.shape="square",P)for(e=0;e<x.length;e+=1)O.elements.push(x[e][0]),O.elements.push(x[e][1]),O.elements.push(x[e][3]),O.elements.push(x[e][2]),O.elements.push(x[e][3]),O.elements.push(x[e][1]);else for(e=0;e<x.length-3;e+=4)O.elements.push(x[e]),O.elements.push(x[e+1]),O.elements.push(x[e+3]),O.elements.push(x[e+2]),O.elements.push(x[e+3]),O.elements.push(x[e+1]);else if(O.shape="triangle",P)for(e=0;e<x.length;e+=1)O.elements.push(x[e][0]),O.elements.push(x[e][1]),O.elements.push(x[e][2]);else O.elements=x.slice(0,x.length-x.length%3);s=g.length,c=!0}else{if(b*M>g.length&&(M=Math.floor(g.length/b)),c=null===T||void 0===T||null===A||void 0===A||!E||!S,w=!(void 0!==w&&!w),!c&&w&&(T<-180||T>180||T+E*(b-1)<-180||T+E*(b-1)>180)&&E>-180&&E<180&&E*(b-1)<360.0001){for(d=[],e=0;e<b;e+=1){for(m=T+e*E;m<-180;)m+=360;for(;m>180;)m-=360;e&&Math.abs(m-d[d.length-1])>180&&(m>d[d.length-1]?(d.push(m-360),d.push(d[d.length-2]+360)):(d.push(m+360),d.push(d[d.length-2]-360)),p=e),d.push(m)}if(b+=2,Math.abs(Math.abs(C*E)-360)<.01){for(b+=1,m=T+C*E;m<-180;)m+=360;for(;m>180;)m-=360;d.push(m)}}if(s=b*M,void 0!==p)for(O.index=new Array(s),e=0;e<s;e+=1)v=e-(r=Math.floor(e/b))*b,(v+=v>p?-2:0)>=C&&(v-=C),v+=r*C,O.index[e]=v;for(r=o=0;r<M-1;r+=1,o+=1)for(e=0;e<b-1;e+=1,o+=1)e!==p&&(O.elements.push(o),O.elements.push(o+1),O.elements.push(o+b),O.elements.push(o+b+1),O.elements.push(o+b),O.elements.push(o+1))}if(O.verticesPerElement="triangle"===O.shape?3:6,t.used){for(e=0;e<s&&(o=O.index?O.index[e]:e,t.used(g[o],o));e+=1);if(e!==s){u=e;var R=new Array(s),k=O.verticesPerElement;for(r=0;r<u;r+=1)R[r]=r;if(R[u]=-1,!O.index)for(O.index=new Array(g.length),r=0;r<g.length;r+=1)O.index[r]=r;for(e=u+1;e<s;e+=1)o=O.index[e],t.used(g[o],o)?(R[e]=u,O.index[u]=O.index[e],u+=1):R[e]=-1;for(O.index.splice(u),e=i=0;e<O.elements.length;e+=k){for(r=0;r<k&&!(R[O.elements[e+r]]<0);r+=1)O.elements[i+r]=R[O.elements[e+r]];r===k&&(i+=k)}O.elements.splice(i),s=u}}for(h in O.pos=new Array(3*s),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h]=new Array(s));for(e=n=0;e<s;e+=1,n+=3)for(h in l=g[o=O.index?O.index[e]:e],c?(f=y(l,o),O.pos[n]=f.x,O.pos[n+1]=f.y,O.pos[n+2]=f.z||0):(O.pos[n]=void 0===p?T+E*(o%b):d[e%b],O.pos[n+1]=A+S*Math.floor(o/b),O.pos[n+2]=0,f={x:O.pos[n],y:O.pos[n+1],z:O.pos[n+2]}),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h][e]=t[h](l,o,f));return O.numVertices=s,O.numElements=O.elements.length/O.verticesPerElement,O},this._init=function(t){s.call(a,t),t=t||{};var e=r.extend({},{position:function(t){return t}},t.style||{});this.mesh(t.mesh||{}),this.style(e)},this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(3);t.exports=function t(e){if(!(this instanceof t))return new t(e);this._index=e.index,this._size=e.size,this._overlap=e.overlap||{x:0,y:0},this._wrap=e.wrap||{x:1,y:1},this._url=e.url,this._fetched=!1,this._queue=e.queue||null,Object.defineProperty(this,"index",{get:function(){return this._index}}),Object.defineProperty(this,"size",{get:function(){return this._size}}),Object.defineProperty(this,"overlap",{get:function(){return this._overlap}}),this.fetch=function(){return this._fetched||r.get(this._url).done(function(){this._fetched=!0}.bind(this)).promise(this),this},this.fetched=function(){return this._fetched},this.then=function(t,e){return this.fetched()||!this._queue||!this._queue.add||this.state&&"pending"!==this.state()?this.fetch():this._queue.add(this,this.fetch),this.done&&this.fail?this.done(t).fail(e):this.then(t,e),this},this.catch=function(t){return this.then(void 0,t),this},this.toString=function(){return[this._index.level||0,this._index.y,this._index.x].join("_")},this.bounds=function(t,e){var n,r;return{left:n=this.size.x*(this.index.x-t.x)-this.overlap.x-e.x,right:n+this.size.x+2*this.overlap.x,bottom:(r=this.size.y*(this.index.y-t.y)-this.overlap.y-e.y)+this.size.y+2*this.overlap.y,top:r}},Object.defineProperty(this,"bottom",{get:function(){return this.size.y*(this.index.y+1)+this.overlap.y}}),Object.defineProperty(this,"top",{get:function(){return this.size.y*this.index.y-this.overlap.y}}),Object.defineProperty(this,"left",{get:function(){return this.size.x*this.index.x-this.overlap.x}}),Object.defineProperty(this,"right",{get:function(){return this.size.x*(this.index.x+1)+this.overlap.x}}),this.fadeIn=function(t){return r.noop(t),this}}},function(t,e,n){"use strict";var r=n(1),i=n(144),o=n(2),a=n(5),s={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]},u=function t(e){if(!(this instanceof t))return new t(e);var r=n(3),u=n(18),c=n(15),l=n(74);e=e||{},i.call(this,e);var h,f,d,p,m,v=this,g=this.draw,y=this._exit,x=this._init,_=this.modified,b=this._update;return this.contour=v.mesh,this.isoline=v.mesh,this._createIsolines=function(){var t,e=v.style.get("value"),n=void 0!==v.style("used")?v.style.get("used"):function(t,n){return a.isNonNullFinite(e(t,n))},r=!1,i=[],o=this._createMesh({used:n,value:e});return(t=this._getValueList(o)).length?(t.forEach(function(t){var e=v._isolinesForValue(o,t);e.length&&(i=i.concat(e),r=r||!!t.label)}),{lines:i,mesh:o,values:t,hasLabels:r}):{}},this._getValueList=function(t){var e,n,r,i,o,s,u,c=v.isoline,l=c.get("values")(t),h=c.get("spacing")(t),f=c.get("count")(t),d=c.get("autofit")(t),p=c.get("levels")(t);if(!t.numVertices||!t.numElements)return[];if(e=a.getMinMaxValues(t.value,c.get("min")(t),c.get("max")(t),!0),t.minValue=e.min,t.maxValue=e.max,(n=t.maxValue-t.minValue)<=0)return[];if(Array.isArray(l))l=(l=l.map(function(t,e){return{value:void 0!==t.value?t.value:t,position:e,level:t.level}})).filter(function(e){return e.value>=t.minValue&&e.value<=t.maxValue});else if(h||d)for(h||(r=n/(2*f/3),o=Math.floor(Math.log10(r)),s=Math.max(0,-o),h=(r=(r/=i=Math.pow(10,o))>=5?5:r>=2?2:1)*i),l=[],u=Math.ceil(t.minValue/h);u<=Math.floor(t.maxValue/h);u+=1)l.push({value:u*h,position:u,fixedDigits:s});else for(l=Array(f),u=0;u<f;u+=1)l[u]={value:t.minValue+n*(u+1)/(f+1),position:u+1};return p.length&&l.forEach(function(t,e){if(void 0===t.level){t.level=0;for(var n=0,r=p[0];n<p.length&&!(t.position%r);r*=p[n+=1])t.level=n+1}if(c.get("label")(t,t.position)){var i=c.get("labelText")(t,t.position);void 0===i&&(i=void 0!==t.fixedDigits?""+parseFloat(t.value.toFixed(t.fixedDigits)):""+t.value),i&&(t.label=i)}}),l},this._addSegment=function(t,e,n){var r,i,o,a,s,u,c=[e,n],l=t.length;for(t.push(c),i=0;i<2;i+=1){for(r=l-1;r>=0;r-=1){if(a=(o=t[r])[0],s=o[o.length-1],n[0]===a[0]&&n[1]===a[1])u=c.concat(o.slice(1));else{if(e[0]!==s[0]||e[1]!==s[1])continue;u=o.concat(c.slice(1))}t.splice(l,1),t[r]=c=u,l=r,e=c[0],n=c[c.length-1];break}if(r<0)break}return t},this._chainVertex=function(t,e,n){var r=n[0],i=n[1],o=3*r,a=3*i,s=(e.value-t.value[r])/(t.value[i]-t.value[r]),u=1-s;return{x:t.pos[o]*u+t.pos[a]*s,y:t.pos[o+1]*u+t.pos[a+1]*s,z:t.pos[o+2]*u+t.pos[a+2]*s}},this._isolinesForValue=function(t,e){var n,r,i,o=e.value,a=Array(t.value.length),u=[];for(n=a.length-1;n>=0;n-=1)a[n]=t.value[n]<=o?0:1;var c=t.verticesPerElement,l="square"===t.shape,h=t.elements,f=h.length;for(r=0;r<f;r+=c){if(l){if(0===(i=8*a[h[r]]+4*a[h[r+1]]+2*a[h[r+2]]+a[h[r+3]])||15===i)continue}else if(16===(i=16+4*a[h[r]]+2*a[h[r+1]]+a[h[r+2]])||23===i)continue;s[i].forEach(function(t){u=v._addSegment(u,[h[r+t.l0],h[r+t.h0]],[h[r+t.l1],h[r+t.h1]])})}return u.map(function(n){var r=[];return n.forEach(function(n){var i=v._chainVertex(t,e,n);r.length&&i.x===r[r.length-1].x&&i.y===r[r.length-1].y||r.push(i)}),r.closed=r[0].x===r[r.length-1].x&&r[0].y===r[r.length-1].y,r.value=e.value,r.level=e.level,r.position=e.position,r.label=e.label,r}).filter(function(t){return t.length>1})},this.modified=function(){var t=_();return d&&d.modified(),m&&m.modified(),t},this.labelPositions=function(){if(v.dataTime().timestamp()>=v.buildTime().timestamp()&&v._build(),f=null,!m)return v;if(!(h&&h.hasLabels&&h.lines&&h.lines.length))return m.data([]),v;var t=v.isoline,e=t.get("labelSpacing"),n=t.get("labelOffset"),r=t.get("labelViewport")(h.mesh),i=v.gcs(),o=v.layer().map(),s=o.gcs(),c=o.rotation(),l=o.size(),d=[],p=0;return h.lines.forEach(function(t,h){if(t.label){var f,m,v,g,y,x,_,b,M,w,T,A=e(t.value,t.value.position),E=n(t.value,t.value.position)||0,S=o.gcsToDisplay(t,i),C=0;if(!(A<=0||isNaN(A))&&(p=Math.max(A,p),E=E+.5-Math.floor(E+.5),f=S.map(function(e,n){if(!t.closed&&n+1===S.length)return 0;var r=Math.sqrt(a.distance2dSquared(e,S[n+1<S.length?n+1:0]));return C+=r,r}),m=Math.floor(C/A)))for(T=u.transformCoordinates(i,s,t),g=(v=C/m)*E,y=0,x=0;x<S.length;x+=1){for(;y+f[x]>=g;)_=x+1===S.length?0:x+1,M=1-(b=(g-y)/f[x]),g+=v,r>0&&((w={x:S[x].x*M+S[_].x*b,y:S[x].y*M+S[_].y*b}).x<-r||w.x>l.width+r||w.y<-r||w.y>l.height+r)||d.push({x:T[x].x*M+T[_].x*b,y:T[x].y*M+T[_].y*b,z:T[x].z*M+T[_].z*b,line:t,rotation:Math.atan2(S[x].y-S[_].y,S[x].x-S[_].x)-c});y+=f[x]}}}),m.gcs(s),m.data(d),m.style("renderThreshold",2*p),f={zoom:o.zoom(),center:o.center(),rotation:c,size:l,labelViewport:r,maxSpacing:p,labelAutoUpdate:t.get("labelAutoUpdate")(h.mesh)},v},this.lastLabelPositions=function(){return r.extend({},f)},this._updateLabelPositions=function(){var t=f;if(!t||!t.labelAutoUpdate)return v;var e=v.layer().map(),n=e.zoom(),r=e.size(),i=!!(Math.abs(n-t.zoom)>=2);if(!i&&t.labelViewport>0){var o=Math.sqrt(a.distance2dSquared(e.gcsToDisplay(e.center()),e.gcsToDisplay(t.center)))*Math.pow(2,t.zoom-n),s=t.labelViewport/2-2*t.maxSpacing-Math.max(r.width-t.size.width,r.height-t.size.height,0);i=i||o>=s}return i&&v.labelPositions().draw(),v},this._build=function(){if((h=v._createIsolines())&&h.lines&&h.lines.length){d||(d=v.layer().createFeature("line",{selectionAPI:!1,gcs:v.gcs(),visible:v.visible(void 0,!0),style:{closed:function(t){return t.closed}}}),v.dependentFeatures([d]));var t=v.style();if(d.data(h.lines).style({antialiasing:t.antialiasing,lineCap:t.lineCap,lineJoin:t.lineJoin,miterLimit:t.miterLimit,strokeWidth:t.strokeWidth,strokeStyle:t.strokeStyle,strokeColor:t.strokeColor,strokeOffset:t.strokeOffset,strokeOpacity:t.strokeOpacity}),h.hasLabels){if(!m){if(!(o.registries.features[v.layer().rendererName()]||{}).text){var e=o.rendererForFeatures(["text"]);p=o.createLayer("feature",v.layer().map(),{renderer:e}),v.layer().addChild(p),v.layer().node().append(p.node())}m=(p||v.layer()).createFeature("text",{selectionAPI:!1,gcs:v.gcs(),visible:v.visible(void 0,!0),style:{text:function(t){return t.line.label}}}).geoOn(c.pan,v._updateLabelPositions)}l.usedStyles.forEach(function(e){"visible"!==e&&m.style(e,t[e])}),v.dependentFeatures([d,m])}}else d&&d.data([]);return v.buildTime().modified(),v.labelPositions(),v},this._update=function(){return b.call(v),(v.dataTime().timestamp()>=v.buildTime().timestamp()||v.updateTime().timestamp()<=v.timestamp())&&v._build(),v.updateTime().modified(),v},this.draw=function(){var t=g();return d&&d.draw(),m&&m.draw(),t},this._exit=function(){m&&((p||v.layer())&&(p||v.layer()).deleteFeature(m),p&&v.layer()&&v.layer().removeChild(p)),d&&v.layer()&&v.layer().deleteFeature(d),m=null,p=null,d=null,v.dependentFeatures([]),y()},this._init=function(e){e=e||{},x.call(v,e);var n=r.extend({},{opacity:1,value:function(t,e){return v.position()(t,e).z},rotateWithMap:!0,rotation:t.rotationFunction(),strokeWidth:function(t,e,n,r){return n.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},void 0===e.style?{}:e.style);v.style(n),v.isoline(r.extend({},{count:15,autofit:!0,levels:[5,5],label:function(t){return t.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:!0},e.mesh||{},e.contour||{},e.isoline||{})),(e.mesh||e.contour||e.isoline)&&v.dataTime().modified()},this};u.rotationFunction=function(t,e){var n={higher:function(t){return t.rotation},lower:function(t){return t.rotation+Math.PI},map:function(t){var e=t.rotation,n=a.wrapAngle(e,!0);return(n>Math.PI/2||n<-Math.PI/2)&&(e+=Math.PI),e},screen:function(t){var n=t.rotation,r=a.wrapAngle(n+e.rotation(),!0);return(r>Math.PI/2||r<-Math.PI/2)&&(n+=Math.PI),n}};return n[t]||n.higher},r(u,i),t.exports=u},function(t,e,n){"use strict";var r=n(1),i=n(55),o=n(3),a=function t(e){if(!(this instanceof t))return new t(e);e=e||{},i.call(this,e);var r=n(15),a=this,s=this._exit,u=e.layer,c=null,l=void 0===e.position?{left:0,top:0}:e.position;if(!(void 0===e.parent||e.parent instanceof t))throw new Error("Parent must be of type geo.gui.widget");e.parent&&a.parent(e.parent),this._init=function(){return a.modified(),a},this._exit=function(){if(a.children().forEach(function(t){a.removeChild(t),t._exit()}),a.layer().geoOff(r.pan,a.repositionEvent),a.parentCanvas().removeChild&&a.canvas())try{a.parentCanvas().removeChild(a.canvas())}catch(t){}s()},this.layer=function(){return u||a.parent()&&a.parent().layer()},this._createCanvas=function(){throw new Error("Must be defined in derived classes")},this.canvas=function(t){return void 0===t?c:(c=t,a)},this._appendCanvasToParent=function(){a.parentCanvas().appendChild(a.canvas())},this.parentCanvas=function(){return a.parent()?a.parent().canvas():a.layer().canvas()},this.position=function(t,e){if(void 0!==t){this.layer().geoOff(r.pan,a.repositionEvent);var n={};for(var i in l)l.hasOwnProperty(i)&&(n[i]=null);return(l=t).hasOwnProperty("x")&&l.hasOwnProperty("y")&&this.layer().geoOn(r.pan,a.repositionEvent),this.reposition(o.extend(n,a.position())),this}if(l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&!e){var s=a.layer().map().gcsToDisplay(l);return{left:s.x,top:s.y,right:null,bottom:null}}return l},this.reposition=function(t){if(t=t||a.position(),a.canvas()&&a.canvas().style)for(var e in a.canvas().style.position="absolute",t)t.hasOwnProperty(e)&&(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(t[e])?a.canvas().style[e]=parseFloat(parseFloat(t[e]).toFixed(3))+"px":a.canvas().style[e]=t[e]);return a},this.repositionEvent=function(){return a.reposition()},this.isInViewport=function(){var t=a.position(),e=a.layer();return t.left>=0&&t.top>=0&&t.left<=e.width()&&t.top<=e.height()},l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&this.layer().geoOn(r.pan,a.repositionEvent)};r(a,i),t.exports=a},function(t,e,n){t.exports=!n(12)&&!n(8)(function(){return 7!=Object.defineProperty(n(102)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(10)},function(t,e,n){var r=n(24),i=n(25),o=n(76)(!1),a=n(104)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(13),i=n(4),o=n(47);t.exports=n(12)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(25),i=n(50).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(47),i=n(77),o=n(67),a=n(16),s=n(66),u=Object.assign;t.exports=!u||n(8)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),m=p.length,v=0;m>v;)h.call(d,f=p[v++])&&(n[f]=d[f]);return n}:u},function(t,e,n){"use strict";var r=n(17),i=n(9),o=n(155),a=[].slice,s={};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),u=function(){var r=n.concat(a.call(arguments));return this instanceof u?function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)}(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(7).parseInt,i=n(58).trim,o=n(108),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(7).parseFloat,i=n(58).trim;t.exports=1/r(n(108)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(30);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(9),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(111),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/a+1/o-1/o)*u*a:(n=(e=(1+a/o)*i)-(e-i))>s||n!=n?c*(1/0):c*n}},function(t,e,n){var r=n(4);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(17),i=n(16),o=n(66),a=n(14);t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),h=a(c.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(s=e(s,l[f],f,c));return s}},function(t,e,n){"use strict";var r=n(16),i=n(48),o=n(14);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),h=1;for(u<s&&s<u+l&&(h=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(12)&&"g"!=/./g.flags&&n(13).f(RegExp.prototype,"flags",{configurable:!0,get:n(81)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(4),i=n(9),o=n(126);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(170),i=n(60);t.exports=n(85)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(13).f,i=n(49),o=n(54),a=n(29),s=n(52),u=n(53),c=n(114),l=n(165),h=n(51),f=n(12),d=n(42).fastKey,p=n(60),m=f?"_s":"size",v=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return p(this,e)[m]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var r=n(170),i=n(60);t.exports=n(85)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(37)(0),o=n(21),a=n(42),s=n(153),u=n(173),c=n(9),l=n(8),h=n(60),f=a.getWeak,d=Object.isExtensible,p=u.ufstore,m={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=f(t);return!0===e?p(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(h(this,"WeakMap"),t,e)}},y=t.exports=n(85)("WeakMap",v,g,u,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(s((r=u.getConstructor(v,"WeakMap")).prototype,g),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!d(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(54),i=n(42).getWeak,o=n(4),a=n(9),s=n(52),u=n(53),c=n(37),l=n(24),h=n(60),f=c(5),d=c(6),p=0,m=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},g=function(t,e){return f(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?m(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?m(h(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?m(t).set(e,n):r[t._i]=n,t},ufstore:m}},function(t,e,n){var r=n(35),i=n(14);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(50),i=n(77),o=n(4),a=n(7).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var r=n(78),i=n(9),o=n(14),a=n(29),s=n(10)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,h,f,d){for(var p,m,v=l,g=0,y=!!f&&a(f,d,3);g<c;){if(g in u){if(p=y?y(u[g],g,n):u[g],m=!1,i(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&h>0)v=t(e,n,p,o(p.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}g++}return v}},function(t,e,n){var r=n(14),i=n(110),o=n(34);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var h=l-u,f=i.call(c,Math.ceil(h/c.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(t,e,n){var r=n(47),i=n(25),o=n(67).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){var r=n(68),i=n(180);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(53);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(15),a=n(130),s=n(18),u=n(5),c=n(2).registerAnnotation,l=n(72),h=n(98),f=n(141),d=n(74),p=0,m={create:"create",done:"done",highlight:"highlight",edit:"edit"},v={fill:!0,fillColor:function(t){return t.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function(t){return t.selected?.5:.25},radius:function(t){return"edge"===t.type||"rotate"===t.type?8:10},scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function(t){return"edge"===t.type||"rotate"===t.type?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:!0,edge:!0,center:!0,rotate:!0,resize:!0}},g=function t(e,n){if(!(this instanceof t))return new t(e,n);var i=this,c=r.extend({},{showLabel:!0},n||{}),l=c.annotationId;delete c.annotationId,void 0===l||c.layer&&c.layer.annotationById(l)?(p+=1,void 0!==l&&console.warn("Annotation id "+l+" is in use; using "+p+" instead."),l=p):l>p&&(p=l);var h=c.name||e.charAt(0).toUpperCase()+e.substr(1)+" "+l,f=c.label||null,g=c.description||void 0,y=e,x=c.layer,_=c.state||m.done;delete c.state,delete c.layer,delete c.name,delete c.label,delete c.description,this._exit=function(){},this.id=function(){return l},this.name=function(t){return void 0===t?h:(null!==t&&(""+t).trim()&&(t=(""+t).trim())!==h&&(h=t,i.modified()),i)},this.label=function(t,e){return void 0===t?null!==f||e?f:h:(t!==f&&(f=t,i.modified()),i)},this._labelPosition=function(){return u.centerFromPerimeter(i._coordinates())},this._rotateHandlePosition=function(t,e){var n,r,o,a=i.layer().map(),s=i._coordinates(),c=u.centerFromPerimeter(i._coordinates()),l=c?a.gcsToDisplay(c,null):void 0,h=0;if(c){for(t=t||0,e=e||0,n=0;n<s.length;n+=1)r=a.gcsToDisplay(s[n],null),h=Math.max(h,Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2));return o=Math.sqrt(h)+t,r=a.displayToGcs({x:l.x+o*Math.cos(e),y:l.y-o*Math.sin(e)},null)}},this.labelRecord=function(){var t=i.options("showLabel");if(t){var e=i.state();if(!(!0===t&&e===m.create||!0!==t&&t.indexOf(e)<0)){var n=i.labelStyle(),r={text:i.label(),position:i._labelPosition()};if(r.position)return n&&(r.style=n),r}}},this.description=function(t){return void 0===t?g:(t!==g&&(g=t,i.modified()),i)},this.layer=function(t){return void 0===t?x:(x=t,i)},this.state=function(t){return void 0===t?_:(_!==t&&(_=t,i.layer()&&i.layer().geoTrigger(o.annotation.state,{annotation:this})),i)},this.actions=function(t){switch(t||(t=i.state()),t){case m.edit:return[{action:a.annotation_edit_handle,name:"annotation edit",owner:"annotationAction",input:"left"},{action:a.annotation_edit_handle,name:"annotation edit",owner:"annotationAction",input:"pan"}];default:return[]}},this.processAction=function(){},this.processEditAction=function(t){if(t&&i._editHandle&&i._editHandle.handle)switch(i._editHandle.handle.type){case"vertex":return i._processEditActionVertex(t);case"edge":return i._processEditActionEdge(t);case"center":return i._processEditActionCenter(t);case"rotate":return i._processEditActionRotate(t);case"resize":return i._processEditActionResize(t)}},this.selectEditHandle=function(t,e){e&&i._editHandle&&i._editHandle.handle&&i._editHandle.handle.selected&&(i._editHandle.handle.selected=!1),t.selected=e;var n=(i._editHandle||{}).amountRotated||0;return i._editHandle={handle:t,startCoordinates:i._coordinates().slice(),center:u.centerFromPerimeter(i._coordinates()),rotatePosition:i._rotateHandlePosition(t.style.rotateHandleOffset,t.style.rotateHandleRotation+n),startAmountRotated:n,amountRotated:n,resizePosition:i._rotateHandlePosition(t.style.resizeHandleOffset,t.style.resizeHandleRotation)},i.layer()&&i.layer().geoTrigger(o.annotation.select_edit_handle,{annotation:i,handle:i._editHandle,enable:e}),i},this.options=function(t,e){if(void 0===t)return c;if("string"==typeof t&&void 0===e)return c[t];var n;if(void 0===e?(n=void 0!==t[i._coordinateOption],c=r.extend(!0,c,t),["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle"].forEach(function(e){void 0!==t[e]&&r.extend(c[e],t[e])})):(n=t===i._coordinateOption,c[t]=e),c.coordinates){var a=c.coordinates;delete c.coordinates,i._coordinates(a)}if(void 0!==c.name){var s=c.name;delete c.name,i.name(s)}if(void 0!==c.label){var u=c.label;delete c.label,i.label(u)}if(void 0!==c.description){var l=c.description;delete c.description,i.description(l)}return i.modified(),n&&i.layer()&&i.layer().geoTrigger(o.annotation.coordinates,{annotation:i}),this},this.style=function(t,e,n){return n=n||"style",void 0===t?c[n]:"string"==typeof t&&void 0===e?(c[n]||{})[t]:(void 0===c[n]&&(c[n]={}),void 0===e?c[n]=r.extend(!0,c[n],t):c[n][t]=e,i.modified(),i)},["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle"].forEach(function(t){i[t]=function(e,n){return i.style(e,n,t)}}),this.styleForState=function(t){return(t=t||i.state())===m.edit||t===m.highlight?r.extend({},c.style,c[t+"Style"]):t===m.create?r.extend({},c.style,c.editStyle,c[t+"Style"]):c[t+"Style"]||c.style||{}},this.type=function(){return y},this.features=function(){return[]},this.mouseClick=function(t){},this.mouseClickEdit=function(t){},this.mouseMove=function(t){},this._coordinates=function(t){return[]},this._coordinateOption="vertices",this.coordinates=function(t){var e=i._coordinates()||[];if(i.layer()){var n=i.layer().map();(t=null===t?n.gcs():void 0===t?n.ingcs():t)!==n.gcs()&&(e=s.transformCoordinates(n.gcs(),t,e))}return e},this.modified=function(){return i.layer()&&i.layer().modified(),i},this.draw=function(){return i.layer()&&(i.layer()._update(),i.layer().draw()),i},this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){return[]},this._geojsonGeometryType=function(){return""},this.geojson=function(t,e){var n,r,o,a=i._geojsonCoordinates(t),s=i._geojsonGeometryType(),c=i._geojsonStyles(),l=i.options("style")||{},h=i.labelStyle()||{};if(a&&a.length&&s){var p={type:"Feature",geometry:{type:s,coordinates:a},properties:{annotationType:y,name:i.name(),annotationId:i.id()}};for(f&&(p.properties.label=f),g&&(p.properties.description=g),!1===i.options("showLabel")&&(p.properties.showLabel=i.options("showLabel")),n=0;n<c.length;n+=1)r=c[n],void 0!==(o=u.ensureFunction(l[r])())&&(r.toLowerCase().match(/color$/)&&(o=u.convertColorToHex(o,"needed")),p.properties[r]=o);for(n=0;n<d.usedStyles.length;n+=1)r=d.usedStyles[n],void 0!==(o=u.ensureFunction(h[r])())&&(r.toLowerCase().match(/color$/)&&(o=u.convertColorToHex(o,"needed")),p.properties["label"+r.charAt(0).toUpperCase()+r.slice(1)]=o);if(e){var m=i.layer().map();t=null===t?m.gcs():void 0===t?m.ingcs():t,p.crs={type:"name",properties:{type:"proj4",name:t}}}return p}},this._addEditHandles=function(t,e,n,o){var a,s=r.extend({},v,i.editHandleStyle()),c=u.ensureFunction(s.handles)()||{},l=i._editHandle&&i._editHandle.handle&&i._editHandle.handle.selected?i._editHandle.handle:void 0;n=r.extend({},n),Object.keys(c).forEach(function(t){!1===c[t]&&(n[t]=!1)}),t[3]||(t[3]={point:[]}),a=t[3].point,e.forEach(function(t,i){!1!==n.vertex&&a.push(r.extend({},t,{type:"vertex",index:i,style:s,editHandle:!0})),!1===n.edge||i===e.length-1||t.x===e[i+1].x&&t.y===e[i+1].y||a.push(r.extend({x:(t.x+e[i+1].x)/2,y:(t.y+e[i+1].y)/2},{type:"edge",index:i,style:s,editHandle:!0})),!1===n.edge||o||i!==e.length-1||t.x===e[0].x&&t.y===e[0].y||a.push(r.extend({x:(t.x+e[0].x)/2,y:(t.y+e[0].y)/2},{type:"edge",index:i,style:s,editHandle:!0}))}),!1!==n.center&&a.push(r.extend({},u.centerFromPerimeter(i._coordinates()),{type:"center",style:s,editHandle:!0})),!1!==n.rotate&&(a.push(r.extend(i._rotateHandlePosition(s.rotateHandleOffset,s.rotateHandleRotation+(l&&"rotate"===l.type?i._editHandle.amountRotated:0)),{type:"rotate",style:s,editHandle:!0})),!i._editHandle||l&&"rotate"===l.type||(i._editHandle.amountRotated=0)),!1!==n.resize&&a.push(r.extend(i._rotateHandlePosition(s.resizeHandleOffset,s.resizeHandleRotation),{type:"resize",style:s,editHandle:!0})),l&&a.forEach(function(t){t.type===l.type&&t.index===l.index&&(t.selected=!0)})},this._processEditActionCenter=function(t){var e=i._editHandle.startCoordinates,n=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,r=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,o=i._coordinates(),a=e.map(function(t){return{x:t.x+n,y:t.y+r}});return(a[0].x!==o[0].x||a[0].y!==o[0].y)&&(i._coordinates(a),!0)},this._processEditActionRotate=function(t){var e=i._editHandle,n=e.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=Math.atan2(e.rotatePosition.y-e.center.y,e.rotatePosition.x-e.center.x),s=Math.atan2(e.rotatePosition.y+o-e.center.y,e.rotatePosition.x+r-e.center.x)-a,u=i._coordinates(),c=n.map(function(t){var n=t.x-e.center.x,r=t.y-e.center.y;return{x:n*Math.cos(s)-r*Math.sin(s)+e.center.x,y:n*Math.sin(s)+r*Math.cos(s)+e.center.y}});return(c[0].x!==u[0].x||c[0].y!==u[0].y)&&(i._coordinates(c),e.amountRotated=e.startAmountRotated+s,!0)},this._processEditActionResize=function(t){var e=i._editHandle,n=e.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=i.layer().map(),s=a.gcsToDisplay(e.center,null),u=a.gcsToDisplay(e.resizePosition,null),c=a.gcsToDisplay({x:e.resizePosition.x+r,y:e.resizePosition.y+o},null),l=Math.pow(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,h=Math.pow(Math.pow(c.y-s.y,2)+Math.pow(c.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,f=i._coordinates();if(h&&l){var d=h/l,p=n.map(function(t){return{x:(t.x-e.center.x)*d+e.center.x,y:(t.y-e.center.y)*d+e.center.y}});if(p[0].x!==f[0].x||p[0].y!==f[0].y)return i._coordinates(p),!0}return!1},this._processEditActionEdge=function(t){var e=i._editHandle,n=e.handle.index,r=i._coordinates();return r.splice(n+1,0,{x:e.handle.x,y:e.handle.y}),e.handle.type="vertex",e.handle.index+=1,e.startCoordinates=r.slice(),i.modified(),!0},this._processEditActionVertex=function(t,e){var n,r,a=i._editHandle,s=a.handle.index,u=a.startCoordinates,c=i._coordinates(),l=c.length,h=c[s],f=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,d=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,p=i.layer(),m=p.options("adjacentPointProximity");return c[s]={x:u[s].x+f,y:u[s].y+d},p.displayDistance(c[s],null,u[s],null)<=m||(p.displayDistance(c[s],null,c[(s+1)%c.length],null)<=m?n=(s+1)%c.length:p.displayDistance(c[s],null,c[(s+c.length-1)%c.length],null)<=m&&(n=(s+c.length-1)%c.length)),r=0===n&&s===c.length-1||n===c.length-1&&0===s,!1===e&&r&&(n=void 0),void 0!==n&&c.length>(e||i.options("style").closed?3:2)&&(c[s]={x:c[n].x,y:c[n].y},t.event===o.actionup&&(e&&r&&(i.options("style").closed=!0),c.splice(s,1))),(c.length!==l||c[s].x!==h.x||c[s].y!==h.y)&&(i._coordinates(c),!0)}},y=function t(e){if(!(this instanceof t))return new t(e);(e=r.extend(!0,{},{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(t){return t.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}}},e||{})).corners=e.corners||e.coordinates||[],delete e.coordinates,g.call(this,"rectangle",e);var n=this,i=this.actions,s=this.processEditAction;this.actions=function(t){switch(t||(t=n.state()),t){case m.create:return[{action:a.annotation_rectangle,name:"rectangle create",owner:"annotationAction",input:"left",modifiers:{shift:!1,ctrl:!1},selectionRectangle:!0}];default:return i.apply(n,arguments)}},this.processAction=function(t){var e=n.layer();if(n.state()===m.create&&e&&t.event===o.actionselection&&t.state.action===a.annotation_rectangle){var r=e.map(),i=[r.displayToGcs({x:t.lowerLeft.x,y:t.lowerLeft.y},null),r.displayToGcs({x:t.lowerLeft.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.lowerLeft.y},null)];return e.displayDistance(i[0],null,i[1],null)*e.displayDistance(i[0],null,i[3],null)<.01?"remove":(n.options("corners",i),n.state(m.done),"done")}},this.features=function(){var t,e=n.options(),r=n.state();switch(r){case m.create:t=[],e.corners&&e.corners.length>=4&&(t=[{polygon:{polygon:e.corners,style:n.styleForState(r)}}]);break;default:t=[{polygon:{polygon:e.corners,style:n.styleForState(r)}}],r===m.edit&&n._addEditHandles(t,e.corners)}return t},this._coordinates=function(t){return t&&t.length>=4&&n.options("corners",t.slice(0,4)),n.options("corners")},this._coordinateOption="corners",this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&n.state()!==m.create&&!(e.length<4)){for(var r=[],i=0;i<4;i+=1)r.push([e[i].x,e[i].y]);return r.push([e[0].x,e[0].y]),[r]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._setCornersFromMouse=function(t,e){var i=n.layer().map(),o=i.gcsToDisplay({x:t[0].x,y:t[0].y},null),a=i.gcsToDisplay(e.mapgcs,null),s={x:a.x,y:o.y},u={x:o.x,y:a.y};t[2]=r.extend({},e.mapgcs),t[1]=i.displayToGcs(s,null),t[3]=i.displayToGcs(u,null)},this.mouseMove=function(t){if(n.state()===m.create){var e=n.options("corners");return e.length?(n._setCornersFromMouse(e,t),!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===m.create&&e&&(t.buttonsDown.left||t.buttonsDown.right)){var i=n.options("corners");if(!t.buttonsDown.right||i.length)return t.handled=!0,i.length?(n._setCornersFromMouse(i,t),e.displayDistance(i[0],null,i[1],null)*e.displayDistance(i[0],null,i[3],null)<.01?"remove":(n.state(m.done),"done")):t.buttonsDown.left?(i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),!0):void 0}},this.processEditAction=function(t){var e,r,i,o,a,u=n._editHandle.startCoordinates,c={x:t.mouse.mapgcs.x-t.state.origin.mapgcs.x,y:t.mouse.mapgcs.y-t.state.origin.mapgcs.y},l=n._editHandle.handle.type,h=n._editHandle.handle.index,f=[Math.atan2(u[1].y-u[0].y,u[1].x-u[0].x),Math.atan2(u[2].y-u[1].y,u[2].x-u[1].x),Math.atan2(u[3].y-u[2].y,u[3].x-u[2].x),Math.atan2(u[0].y-u[3].y,u[0].x-u[3].x)];switch(f[0]||f[1]||f[2]||f[3]||(f[1]=Math.PI/2,f[2]=Math.PI,f[3]=-Math.PI/2),f[0]||f[2]||(f[0]=f[1]-Math.PI/2,f[2]=f[1]+Math.PI/2),f[1]||f[3]||(f[1]=f[2]-Math.PI/2,f[3]=f[2]+Math.PI/2),l){case"vertex":return e=u.map(function(t){return{x:t.x,y:t.y}}),o=f[(h+1)%4],r={x:(c.x*Math.cos(o)+c.y*Math.sin(o))*Math.cos(o),y:(c.y*Math.sin(o)+c.x*Math.cos(o))*Math.sin(o)},a=f[h],i={x:(c.x*Math.cos(a)+c.y*Math.sin(a))*Math.cos(a),y:(c.y*Math.sin(a)+c.x*Math.cos(a))*Math.sin(a)},e[h].x+=c.x,e[h].y+=c.y,e[(h+1)%4].x+=r.x,e[(h+1)%4].y+=r.y,e[(h+3)%4].x+=i.x,e[(h+3)%4].y+=i.y,n.options("corners",e),!0;case"edge":return e=u.map(function(t){return{x:t.x,y:t.y}}),o=f[(h+1)%4],c={x:(c.x*Math.cos(o)+c.y*Math.sin(o))*Math.cos(o),y:(c.y*Math.sin(o)+c.x*Math.cos(o))*Math.sin(o)},e[h].x+=c.x,e[h].y+=c.y,e[(h+1)%4].x+=c.x,e[(h+1)%4].y+=c.y,n.options("corners",e),!0}return s.apply(n,arguments)}};i(y,g);var x={};x[f.capabilities.feature]=!0,c("rectangle",y,x);var _=function t(e){if(!(this instanceof t))return new t(e);(e=r.extend(!0,{},{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(t){return t.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:!1,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,line:function(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function(t,e){return n.options("vertices")[e]},stroke:!1,strokeColor:{r:0,g:0,b:1}}},e||{})).vertices=e.vertices||e.coordinates||[],delete e.coordinates,g.call(this,"polygon",e);var n=this;this.features=function(){var t,e=n.options(),r=n.state(),i=n.styleForState(r);switch(r){case m.create:t=[],e.vertices&&e.vertices.length>=3&&(t[1]={polygon:{polygon:e.vertices,style:i}}),e.vertices&&e.vertices.length>=2&&(t[2]={line:{line:e.vertices,style:i}});break;default:t=[{polygon:{polygon:e.vertices,style:i}}],r===m.edit&&n._addEditHandles(t,e.vertices)}return t},this._coordinates=function(t){return t&&n.options("vertices",t),n.options("vertices")},this.mouseMove=function(t){if(n.state()===m.create){var e=n.options("vertices");return e.length?(e[e.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===m.create&&e){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=n.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&e.displayDistance(o[o.length-2],null,t.map,"display")<=e.options("adjacentPointProximity")?(r=!0,n._lastClick&&t.time-n._lastClick<e.options("dblClickTime")&&(i=!0)):o.length>=2&&e.displayDistance(o[0],null,t.map,"display")<=e.options("finalPointProximity")?i=!0:o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),n._lastClick=t.time),i?o.length<4?"remove":(o.pop(),n.state(m.done),"done"):!r}}},this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&!(e.length<3)&&n.state()!==m.create){for(var r=[],i=0;i<e.length;i+=1)r.push([e[i].x,e[i].y]);return r.push([e[0].x,e[0].y]),[r]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};i(_,g);var b={};b[f.capabilities.feature]=!0,b[l.capabilities.basic]=[m.create],c("polygon",_,b);var M=function t(e){if(!(this instanceof t))return new t(e);(e=r.extend(!0,{},{style:{line:function(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function(t,e){return n.options("vertices")[e]},strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{line:function(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function(t,e){return n.options("vertices")[e]},strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"}},e||{})).vertices=e.vertices||e.coordinates||[],delete e.coordinates,g.call(this,"line",e);var n=this,i=this.actions,o=this.processEditAction;this.features=function(){var t,e=n.options(),r=n.state();switch(r){case m.create:t=[{line:{line:e.vertices,style:n.styleForState(r)}}];break;default:t=[{line:{line:e.vertices,style:n.styleForState(r)}}],r===m.edit&&n._addEditHandles(t,e.vertices,void 0,!n.style("closed"))}return t},this._coordinates=function(t){return t&&n.options("vertices",t),n.options("vertices")},this.mouseMove=function(t){if(n.state()===m.create){var e=n.options("vertices");return e.length?(e[e.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===m.create&&e){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=n.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&e.displayDistance(o[o.length-2],null,t.map,"display")<=e.options("adjacentPointProximity")?(r=!0,n._lastClick&&t.time-n._lastClick<e.options("dblClickTime")&&(i=!0)):o.length>=2&&e.displayDistance(o[0],null,t.map,"display")<=e.options("finalPointProximity")?i="close":o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),n._lastClick=t.time,n._lastClickVertexCount=o.length),i?o.length<3?"remove":(o.pop(),n.options("style").closed="close"===i,n.state(m.done),"done"):!r}}},this.actions=function(t){switch(t||(t=n.state()),t){case m.create:return[{action:a.annotation_line,name:"line create",owner:"annotationAction",input:"left",modifiers:{shift:!1,ctrl:!1}},{action:a.annotation_line,name:"line create",owner:"annotationAction",input:"pan"}];default:return i.apply(n,arguments)}},this.processAction=function(t){var e=n.layer();if(n.state()===m.create&&e&&t.state.action===a.annotation_line){var r=e.options("continuousPointProximity"),i=e.options("continuousPointColinearity");if(r||0===r){var o=n.options("vertices");if(!o.length)return o.push(t.mouse.mapgcs),o.push(t.mouse.mapgcs),!0;var s=e.displayDistance(o[o.length-2],null,t.mouse.map,"display");if(s&&s>r){if(o.length>=(n._lastClickVertexCount||1)+3){var u=e.displayDistance(o[o.length-3],null,o[o.length-2],null),c=s,l=e.displayDistance(o[o.length-3],null,t.mouse.map,"display");if(u&&l)(l*l-u*u-c*c)/(2*u*c)>Math.cos(i)&&o.pop()}return o[o.length-1]=t.mouse.mapgcs,o.push(t.mouse.mapgcs),!0}}}},this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&!(e.length<2)&&n.state()!==m.create){for(var r=[],i=0;i<e.length;i+=1)r.push([e[i].x,e[i].y]);return r}},this._geojsonGeometryType=function(){return"LineString"},this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this.processEditAction=function(t){switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(t,!0)}return o.apply(n,arguments)},this.mouseClickEdit=function(t){var e,r=n.layer(),i=n._editHandle;if(n.state()===m.edit&&r&&t.buttonsDown.left&&i&&i.handle.selected&&"edge"===i.handle.type&&n.options("style").closed&&(t.handled=!0,n._lastClick&&t.time-n._lastClick<r.options("dblClickTime")&&(e=!0),n._lastClick=t.time,e)){var o=i.handle.index,a=n._coordinates(),s=a.slice(o+1).concat(a.slice(0,o+1));return n._coordinates(s),n.options("style").closed=!1,i.handle.index=void 0,!0}}};i(M,g);var w={};w[l.capabilities.basic]=[m.create],c("line",M,w);var T=function t(e){if(!(this instanceof t))return new t(e);(e=r.extend(!0,{},{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}},e||{})).position=e.position||(e.coordinates?e.coordinates[0]:void 0),delete e.coordinates,g.call(this,"point",e);var n=this;this.features=function(){var t,e,i,o=n.options(),a=n.state();switch(a){case m.create:t=[];break;default:e=n.styleForState(a),(o.style.scaled||0===o.style.scaled)&&(!0===o.style.scaled&&(o.style.scaled=n.layer().map().zoom()),e=r.extend({},e,{radius:function(){var t=o.style.radius,e=n.layer().map().zoom();return u.isFunction(t)&&(t=t.apply(n,arguments)),t*=Math.pow(2,e-o.style.scaled),t}}),i=!0),t=[{point:{x:o.position.x,y:o.position.y,style:e,scaleOnZoom:i}}],a===m.edit&&n._addEditHandles(t,[o.position],{edge:!1,center:!1,resize:!1,rotate:!1})}return t},this._coordinates=function(t){return t&&t.length>=1&&n.options("position",t[0]),n.state()===m.create?[]:[n.options("position")]},this._coordinateOption="position",this.mouseClick=function(t){if(n.state()===m.create&&t.buttonsDown.left)return t.handled=!0,n.options("position",t.mapgcs),n.state(m.done),"done"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&n.state()!==m.create&&!(e.length<1)&&void 0!==e[0])return[e[0].x,e[0].y]},this._geojsonGeometryType=function(){return"Point"}};i(T,g);var A={};A[h.capabilities.feature]=!0,c("point",T,A),t.exports={state:m,actionOwner:"annotationAction",annotation:g,lineAnnotation:M,pointAnnotation:T,polygonAnnotation:_,rectangleAnnotation:y,_editHandleFeatureLevel:3,defaultEditHandleStyle:v}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(466),i=n(131),o=n(483),a=n(190),s=n(184),u=n(189),c=n(191),l=n(484),h=n(486);r.a.defaultDatum="WGS84",r.a.Proj=i.a,r.a.WGS84=new r.a.Proj("WGS84"),r.a.Point=o.a,r.a.toPoint=a.a,r.a.defs=s.a,r.a.transform=u.a,r.a.mgrs=c.a,r.a.version=l.a,Object(h.a)(r.a),e.default=r.a},function(t,e,n){"use strict";var r=n(468),i=n(185),o=n(186);function a(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?a[t]=Object(i.a)(arguments[1]):a[t]=Object(o.a)(arguments[1]):a[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?a.apply(e,t):a(t)});if("string"==typeof t){if(t in a)return a[t]}else"EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Object(r.a)(a),e.a=a},function(t,e,n){"use strict";var r=n(6),i=n(469),o=n(470),a=n(90);e.a=function(t){var e,n,s,u={},c=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),l={proj:"projName",datum:"datumCode",rf:function(t){u.rf=parseFloat(t)},lat_0:function(t){u.lat0=t*r.a},lat_1:function(t){u.lat1=t*r.a},lat_2:function(t){u.lat2=t*r.a},lat_ts:function(t){u.lat_ts=t*r.a},lon_0:function(t){u.long0=t*r.a},lon_1:function(t){u.long1=t*r.a},lon_2:function(t){u.long2=t*r.a},alpha:function(t){u.alpha=parseFloat(t)*r.a},lonc:function(t){u.longc=t*r.a},x_0:function(t){u.x0=parseFloat(t)},y_0:function(t){u.y0=parseFloat(t)},k_0:function(t){u.k0=parseFloat(t)},k:function(t){u.k0=parseFloat(t)},a:function(t){u.a=parseFloat(t)},b:function(t){u.b=parseFloat(t)},r_a:function(){u.R_A=!0},zone:function(t){u.zone=parseInt(t,10)},south:function(){u.utmSouth=!0},towgs84:function(t){u.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){u.to_meter=parseFloat(t)},units:function(t){u.units=t;var e=Object(a.a)(o.a,t);e&&(u.to_meter=e.to_meter)},from_greenwich:function(t){u.from_greenwich=t*r.a},pm:function(t){var e=Object(a.a)(i.a,t);u.from_greenwich=(e||parseFloat(t))*r.a},nadgrids:function(t){"@null"===t?u.datumCode="none":u.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(u.axis=t)}};for(e in c)n=c[e],e in l?"function"==typeof(s=l[e])?s(n):u[s]=n:u[e]=n;return"string"==typeof u.datumCode&&"WGS84"!==u.datumCode&&(u.datumCode=u.datumCode.toLowerCase()),u}},function(t,e,n){"use strict";var r=n(471),i=n(472),o=.017453292519943295;function a(t){return t*o}e.a=function(t){var e=Object(r.a)(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var s={};return Object(i.a)(e,s),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function n(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach(function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(s),s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=u,e.forward=c,e.inverse=l,n.d(e,"names",function(){return h});var r=n(61),i=n(11),o=n(91),a=n(92),s=n(6);function u(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Object(r.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function c(t){var e,n,r=t.x,a=t.y;if(a*s.i>90&&a*s.i<-90&&r*s.i>180&&r*s.i<-180)return null;if(Math.abs(Math.abs(a)-s.d)<=s.b)return null;if(this.sphere)e=this.x0+this.a*this.k0*Object(i.a)(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(s.c+.5*a));else{var u=Math.sin(a),c=Object(o.a)(this.e,a,u);e=this.x0+this.a*this.k0*Object(i.a)(r-this.long0),n=this.y0-this.a*this.k0*Math.log(c)}return t.x=e,t.y=n,t}function l(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=s.d-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var u=Math.exp(-o/(this.a*this.k0));if(-9999===(n=Object(a.a)(this.e,u)))return null}return e=Object(i.a)(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t}var h=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];e.default={init:u,forward:c,inverse:l,names:h}},function(t,e,n){"use strict";function r(){}function i(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.init=r,n.d(e,"forward",function(){return i}),n.d(e,"inverse",function(){return i}),n.d(e,"names",function(){return o});var o=["longlat","identity"];e.default={init:r,forward:i,inverse:i,names:o}},function(t,e,n){"use strict";e.a=function t(e,n,c){var l;Array.isArray(c)&&(c=Object(s.a)(c));Object(u.a)(c);e.datum&&n.datum&&function(t,e){return(t.datum.datum_type===r.e||t.datum.datum_type===r.f)&&"WGS84"!==e.datumCode||(e.datum.datum_type===r.e||e.datum.datum_type===r.f)&&"WGS84"!==t.datumCode}(e,n)&&(l=new a.a("WGS84"),c=t(e,l,c),e=l);"enu"!==e.axis&&(c=Object(o.a)(e,!1,c));"longlat"===e.projName?c={x:c.x*r.a,y:c.y*r.a}:(e.to_meter&&(c={x:c.x*e.to_meter,y:c.y*e.to_meter}),c=e.inverse(c));e.from_greenwich&&(c.x+=e.from_greenwich);c=Object(i.a)(e.datum,n.datum,c);n.from_greenwich&&(c={x:c.x-n.from_greenwich,y:c.y});"longlat"===n.projName?c={x:c.x*r.i,y:c.y*r.i}:(c=n.forward(c),n.to_meter&&(c={x:c.x/n.to_meter,y:c.y/n.to_meter}));if("enu"!==n.axis)return Object(o.a)(n,!0,c);return c};var r=n(6),i=n(479),o=n(481),a=n(131),s=n(190),u=n(482)},function(t,e,n){"use strict";e.a=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},function(t,e,n){"use strict";e.b=h,e.c=f;var r=6,i="AJSAJS",o="AFAFAF",a=65,s=73,u=79,c=86,l=90;function h(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(b=t.easting,M=t.northing,w=t.zoneNumber,T=v(w),A=Math.floor(b/1e5),E=Math.floor(M/1e5)%20,h=A,f=E,d=T,p=d-1,m=i.charCodeAt(p),g=o.charCodeAt(p),y=m+h-1,x=g+f,_=!1,y>l&&(y=y-l+a-1,_=!0),(y===s||m<s&&y>s||(y>s||m<s)&&_)&&y++,(y===u||m<u&&y>u||(y>u||m<u)&&_)&&++y===s&&y++,y>l&&(y=y-l+a-1),x>c?(x=x-c+a-1,_=!0):_=!1,(x===s||g<s&&x>s||(x>s||g<s)&&_)&&x++,(x===u||g<u&&x>u||(x>u||g<u)&&_)&&++x===s&&x++,x>c&&(x=x-c+a-1),String.fromCharCode(y)+String.fromCharCode(x))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var h,f,d,p,m,g,y,x,_;var b,M,w,T,A,E}(function(t){var e,n,r,i,o,a,s,u=t.lat,c=t.lon,l=6378137,h=d(u),f=d(c);s=Math.floor((c+180)/6)+1,180===c&&(s=60);u>=56&&u<64&&c>=3&&c<12&&(s=32);u>=72&&u<84&&(c>=0&&c<9?s=31:c>=9&&c<21?s=33:c>=21&&c<33?s=35:c>=33&&c<42&&(s=37));a=d(6*(s-1)-180+3),.006739496752268451,e=l/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),r=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=l*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,m=.9996*(o+e*Math.tan(h)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(p),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)}function f(t){var e=m(g(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function d(t){return t*(Math.PI/180)}function p(t){return t/Math.PI*180}function m(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,c,l,h,f,d=6378137,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),g=n-5e5,y=e;r<"N"&&(y-=1e7),l=6*(i-1)-180+3,f=(h=y/.9996/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*h)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*h)+151*v*v*v/96*Math.sin(6*h),o=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),c=g/(.9996*o);var x=f-o*Math.tan(f)/u*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);x=p(x);var _,b=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(f);if(b=l+p(b),t.accuracy){var M=m({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});_={top:M.lat,right:M.lon,bottom:x,left:b}}else _={lat:x,lon:b};return _}function v(t){var e=t%r;return 0===e&&(e=r),e}function g(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,h="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;h+=e,f++}var d=parseInt(h,10);if(0===f||f+3>n)throw"MGRSPoint bad conversion from: "+t;var p=t.charAt(f++);if(p<="A"||"B"===p||"Y"===p||p>="Z"||"I"===p||"O"===p)throw"MGRSPoint zone letter "+p+" not handled: "+t;r=t.substring(f,f+=2);for(var m=v(d),g=function(t,e){var n=i.charCodeAt(e-1),r=1e5,o=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===u&&n++,n>l){if(o)throw"Bad character: "+t;n=a,o=!0}r+=1e5}return r}(r.charAt(0),m),x=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=o.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===u&&n++,n>c){if(i)throw"Bad character: "+t;n=a,i=!0}r+=1e5}return r}(r.charAt(1),m);x<y(p);)x+=2e6;var _=n-f;if(_%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var b,M,w,T=_/2,A=0,E=0;return T>0&&(b=1e5/Math.pow(10,T),M=t.substring(f,f+T),A=parseFloat(M)*b,w=t.substring(f+T),E=parseFloat(w)*b),{easting:A+g,northing:E+x,zoneLetter:p,zoneNumber:d,accuracy:b}}function y(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.a={forward:h,inverse:function(t){var e=m(g(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:f}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=c,e.forward=l,e.inverse=h,n.d(e,"names",function(){return f});var r=n(193),i=n(132),o=n(194),a=n(11),s=n(6),u=n(69);function c(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Object(r.a)(this.es),this.ml0=Object(i.a)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function l(t){var e,n,r,o=t.x,u=t.y,c=Object(a.a)(o-this.long0),l=Math.sin(u),h=Math.cos(u);if(this.es){var f=h*c,d=Math.pow(f,2),p=this.ep2*Math.pow(h,2),m=Math.pow(p,2),v=Math.abs(h)>s.b?Math.tan(u):0,g=Math.pow(v,2),y=Math.pow(g,2);e=1-this.es*Math.pow(l,2),f/=Math.sqrt(e);var x=Object(i.a)(u,l,h,this.en);n=this.a*(this.k0*f*(1+d/6*(1-g+p+d/20*(5-18*g+y+14*p-58*g*p+d/42*(61+179*y-y*g-479*g)))))+this.x0,r=this.a*(this.k0*(x-this.ml0+l*c*f/2*(1+d/12*(5-g+9*p+4*m+d/30*(61+y-58*g+270*p-330*g*p+d/56*(1385+543*y-y*g-3111*g))))))+this.y0}else{var _=h*Math.sin(c);if(Math.abs(Math.abs(_)-1)<s.b)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=h*Math.cos(c)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>s.b)return 93;r=0}else r=Math.acos(r);u<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t}function h(t){var e,n,r,i,c=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+l/this.k0,n=Object(o.a)(e,this.es,this.en),Math.abs(n)<s.d){var h=Math.sin(n),f=Math.cos(n),d=Math.abs(f)>s.b?Math.tan(n):0,p=this.ep2*Math.pow(f,2),m=Math.pow(p,2),v=Math.pow(d,2),g=Math.pow(v,2);e=1-this.es*Math.pow(h,2);var y=c*Math.sqrt(e)/this.k0,x=Math.pow(y,2);r=n-(e*=d)*x/(1-this.es)*.5*(1-x/12*(5+3*v-9*p*v+p-4*m-x/30*(61+90*v-252*p*v+45*g+46*p-x/56*(1385+3633*v+4095*g+1574*g*v)))),i=Object(a.a)(this.long0+y*(1-x/6*(1+2*v+p-x/20*(5+28*v+24*g+8*p*v+6*p-x/42*(61+662*v+1320*g+720*g*v))))/f)}else r=s.d*Object(u.a)(l),i=0;else{var _=Math.exp(c/this.k0),b=.5*(_-1/_),M=this.lat0+l/this.k0,w=Math.cos(M);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(b,2))),r=Math.asin(e),l<0&&(r=-r),i=0===b&&0===w?0:Object(a.a)(Math.atan2(b,w)+this.long0)}return t.x=i,t.y=r,t}var f=["Transverse_Mercator","Transverse Mercator","tmerc"];e.default={init:c,forward:l,inverse:h,names:f}},function(t,e,n){"use strict";var r=.01068115234375;e.a=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*r))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*r)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}},function(t,e,n){"use strict";var r=n(132),i=n(6);e.a=function(t,e,n){for(var o=1/(1-e),a=t,s=20;s;--s){var u=Math.sin(a),c=1-e*u*u;if(a-=c=(Object(r.a)(a,u,Math.cos(a),n)-t)*(c*Math.sqrt(c))*o,Math.abs(c)<i.b)return a}return a}},function(t,e,n){"use strict";e.a=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}},function(t,e,n){"use strict";e.a=function(t){var e=Math.exp(t);return e=(e+1/e)/2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"dependsOn",function(){return a}),e.init=s,n.d(e,"names",function(){return u});var r=n(492),i=n(133),o=n(6),a="etmerc";function s(){var t=Object(r.a)(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*o.a,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse}var u=["Universal Transverse Mercator System","utm"];e.default={init:s,names:u,dependsOn:a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=o,e.forward=a,e.inverse=s,n.d(e,"names",function(){return u});var r=n(199),i=n(11);function o(){r.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function a(t){var e,n,o,a;return t.x=Object(i.a)(t.x-this.long0),r.default.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function s(t){var e,n,o,a,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var u=2*Math.atan2(s,this.R2);e=Math.sin(u),n=Math.cos(u),a=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),o=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else a=this.phic0,o=0;return t.x=o,t.y=a,r.default.inverse.apply(this,[t]),t.x=Object(i.a)(t.x+this.long0),t}var u=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];e.default={init:o,forward:a,inverse:s,names:u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=a,e.forward=s,e.inverse=u,n.d(e,"names",function(){return c});var r=n(493),i=n(6),o=20;function a(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i.c)/(Math.pow(Math.tan(.5*this.lat0+i.c),this.C)*Object(r.a)(this.e*t,this.ratexp))}function s(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i.c),this.C)*Object(r.a)(this.e*Math.sin(n),this.ratexp))-i.d,t.x=this.C*e,t}function u(t){for(var e=t.x/this.C,n=t.y,a=Math.pow(Math.tan(.5*n+i.c)/this.K,1/this.C),s=o;s>0&&(n=2*Math.atan(a*Object(r.a)(this.e*Math.sin(t.y),-.5*this.e))-i.d,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null}var c=["gauss"];e.default={init:a,forward:s,inverse:u,names:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ssfn_=c,e.init=l,e.forward=h,e.inverse=f,n.d(e,"names",function(){return d});var r=n(6),i=n(69),o=n(61),a=n(91),s=n(92),u=n(11);function c(t,e,n){return e*=n,Math.tan(.5*(r.d+t))*Math.pow((1-e)/(1+e),.5*n)}function l(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.b&&(this.k0=.5*(1+Object(i.a)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.b&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.b&&(this.k0=.5*this.cons*Object(o.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Object(a.a)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Object(o.a)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r.d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function h(t){var e,n,i,o,s,c,l=t.x,h=t.y,f=Math.sin(h),d=Math.cos(h),p=Object(u.a)(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=r.b&&Math.abs(h+this.lat0)<=r.b?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*f+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*d*Math.cos(p))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,f,this.e))-r.d,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=r.b?(s=Object(a.a)(this.e,h*this.con,this.con*f),c=2*this.a*this.k0*s/this.cons,t.x=this.x0+c*Math.sin(l-this.long0),t.y=this.y0-this.con*c*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<r.b?(e=2*this.a*this.k0/(1+o*Math.cos(p)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(p))),t.y=e*(this.cosX0*i-this.sinX0*o*Math.cos(p))+this.y0),t.x=e*o*Math.sin(p)+this.x0,t))}function f(t){var e,n,i,o,a;t.x-=this.x0,t.y-=this.y0;var c=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(c/(2*this.a*this.k0));return e=this.long0,n=this.lat0,c<=r.b?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/c),e=Math.abs(this.coslat0)<r.b?this.lat0>0?Object(u.a)(this.long0+Math.atan2(t.x,-1*t.y)):Object(u.a)(this.long0+Math.atan2(t.x,t.y)):Object(u.a)(this.long0+Math.atan2(t.x*Math.sin(l),c*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r.b){if(c<=r.b)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=c*this.cons/(2*this.a*this.k0),n=this.con*Object(s.a)(this.e,i),e=this.con*Object(u.a)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,c<=r.b?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/c),e=Object(u.a)(this.long0+Math.atan2(t.x*Math.sin(o),c*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*Object(s.a)(this.e,Math.tan(.5*(r.d+a)));return t.x=e,t.y=n,t}var d=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];e.default={init:l,forward:h,inverse:f,names:d,ssfn_:c}},function(t,e,n){"use strict";function r(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u}function i(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t}function o(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,c=o,l=-1e3,h=0;Math.abs(c-l)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),l=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=c,t}Object.defineProperty(e,"__esModule",{value:!0}),e.init=r,e.forward=i,e.inverse=o,n.d(e,"names",function(){return a});var a=["somerc"];e.default={init:r,forward:i,inverse:o,names:a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=s,e.forward=u,e.inverse=c,n.d(e,"names",function(){return l});var r=n(91),i=n(11),o=n(92),a=n(6);function s(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var o,a,s=Object(r.a)(this.e,this.lat0,t),u=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(u*u<1&&(u=1),isNaN(this.longc)){var c=Object(r.a)(this.e,this.lat1,Math.sin(this.lat1)),l=Object(r.a)(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(u+Math.sqrt(u*u-1))*Math.pow(s,this.bl):this.el=(u-Math.sqrt(u*u-1))*Math.pow(s,this.bl);var h=Math.pow(c,this.bl),f=Math.pow(l,this.bl);a=.5*((o=this.el/h)-1/o);var d=(this.el*this.el-f*h)/(this.el*this.el+f*h),p=(f-h)/(f+h),m=Object(i.a)(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*m)/p)/this.bl,this.long0=Object(i.a)(this.long0);var v=Object(i.a)(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*v)/a),this.alpha=Math.asin(u*Math.sin(this.gamma0))}else o=this.lat0>=0?u+Math.sqrt(u*u-1):u-Math.sqrt(u*u-1),this.el=o*Math.pow(s,this.bl),a=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/u),this.long0=this.longc-Math.asin(a*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha))}function u(t){var e,n,o,s=t.x,u=t.y,c=Object(i.a)(s-this.long0);if(Math.abs(Math.abs(u)-a.d)<=a.b)o=u>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(a.c+o*this.gamma0*.5)),e=-1*o*a.d*this.al/this.bl;else{var l=Object(r.a)(this.e,u,Math.sin(u)),h=this.el/Math.pow(l,this.bl),f=.5*(h-1/h),d=.5*(h+1/h),p=Math.sin(this.bl*c),m=(f*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/d;n=Math.abs(Math.abs(m)-1)<=a.b?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=a.b?this.al*this.bl*c:this.al*Math.atan2(f*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t}function c(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),s=.5*(r-1/r),u=.5*(r+1/r),c=Math.sin(this.bl*e/this.al),l=(c*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/u,h=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<a.b?(t.x=this.long0,t.y=a.d):Math.abs(l+1)<a.b?(t.x=this.long0,t.y=-1*a.d):(t.y=Object(o.a)(this.e,h),t.x=Object(i.a)(this.long0-Math.atan2(s*Math.cos(this.gamma0)-c*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t}var l=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];e.default={init:s,forward:u,inverse:c,names:l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=c,e.forward=l,e.inverse=h,n.d(e,"names",function(){return f});var r=n(61),i=n(91),o=n(69),a=n(11),s=n(92),u=n(6);function c(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<u.b)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=Object(r.a)(this.e,e,n),a=Object(i.a)(this.e,this.lat1,e),s=Math.sin(this.lat2),c=Math.cos(this.lat2),l=Object(r.a)(this.e,s,c),h=Object(i.a)(this.e,this.lat2,s),f=Object(i.a)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>u.b?this.ns=Math.log(o/l)/Math.log(a/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function l(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=u.b&&(n=Object(o.a)(n)*(u.d-2*u.b));var r,s,c=Math.abs(Math.abs(n)-u.d);if(c>u.b)r=Object(i.a)(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if((c=n*this.ns)<=0)return null;s=0}var l=this.ns*Object(a.a)(e-this.long0);return t.x=this.k0*(s*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(l))+this.y0,t}function h(t){var e,n,r,i,o,c=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(c*c+l*l),n=1):(e=-Math.sqrt(c*c+l*l),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*c,n*l)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=Object(s.a)(this.e,r)))return null}else i=-u.d;return o=Object(a.a)(h/this.ns+this.long0),t.x=o,t.y=i,t}var f=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];e.default={init:c,forward:l,inverse:h,names:f}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=i,e.forward=o,e.inverse=a,n.d(e,"names",function(){return s});var r=n(11);function i(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function o(t){var e,n,i,o,a,s,u,c=t.x,l=t.y,h=Object(r.a)(c-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),s=this.n*a,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(s)/1,t.x=u*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function a(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t}var s=["Krovak","krovak"];e.default={init:i,forward:o,inverse:a,names:s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=d,e.forward=p,e.inverse=m,n.d(e,"names",function(){return v});var r=n(93),i=n(94),o=n(95),a=n(96),s=n(97),u=n(135),c=n(11),l=n(70),h=n(136),f=n(6);function d(){this.sphere||(this.e0=Object(i.a)(this.es),this.e1=Object(o.a)(this.es),this.e2=Object(a.a)(this.es),this.e3=Object(s.a)(this.es),this.ml0=this.a*Object(r.a)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function p(t){var e,n,i=t.x,o=t.y;if(i=Object(c.a)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var a=Math.sin(o),s=Math.cos(o),l=Object(u.a)(this.a,this.e,a),h=Math.tan(o)*Math.tan(o),f=i*Math.cos(o),d=f*f,p=this.es*s*s/(1-this.es);e=l*f*(1-d*h*(1/6-(8-h+8*p)*d/120)),n=this.a*Object(r.a)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+l*a/s*d*(.5+(5-h+6*p)*d/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Object(h.a)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-f.d)<=f.b)return t.x=this.long0,t.y=f.d,i<0&&(t.y*=-1),t;var d=Object(u.a)(this.a,this.e,Math.sin(s)),p=d*d*d/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(s),2),v=r*this.a/d,g=v*v;e=s-d*Math.tan(s)/p*v*v*(.5-(1+3*m)*v*v/24),n=v*(1-g*(m/3+(1+3*m)*m*g/15))/Math.cos(s)}return t.x=Object(c.a)(n+this.long0),t.y=Object(l.a)(e),t}var v=["Cassini","Cassini_Soldner","cass"];e.default={init:d,forward:p,inverse:m,names:v}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"S_POLE",function(){return a}),n.d(e,"N_POLE",function(){return s}),n.d(e,"EQUIT",function(){return u}),n.d(e,"OBLIQ",function(){return c}),e.init=l,e.forward=h,e.inverse=f,n.d(e,"names",function(){return x});var r=n(6),i=n(137),o=n(11),a=1,s=2,u=3,c=4;function l(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r.d)<r.b?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<r.b?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Object(i.a)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*d,e=t*t,n[0]+=e*p,n[1]=e*v,e*=t,n[0]+=e*m,n[1]+=e*g,n[2]=e*y,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Object(i.a)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function h(t){var e,n,a,s,u,c,l,h,f,d,p=t.x,m=t.y;if(p=Object(o.a)(p-this.long0),this.sphere){if(u=Math.sin(m),d=Math.cos(m),a=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*a:1+this.sinph0*u+this.cosph0*d*a)<=r.b)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(p),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(m+this.phi0)<r.b)return null;n=r.c-.5*m,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=a}}else{switch(l=0,h=0,f=0,a=Math.cos(p),s=Math.sin(p),u=Math.sin(m),c=Object(i.a)(this.e,u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(l=c/this.qp,h=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*h*a;break;case this.EQUIT:f=1+h*a;break;case this.N_POLE:f=r.d+m,c=this.qp-c;break;case this.S_POLE:f=m-r.d,c=this.qp+c}if(Math.abs(f)<r.b)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),n=this.mode===this.OBLIQ?this.ymf*f*(this.cosb1*l-this.sinb1*h*a):(f=Math.sqrt(2/(1+h*a)))*l*this.ymf,e=this.xmf*f*h*s;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(f=Math.sqrt(c))*s,n=a*(this.mode===this.S_POLE?f:-f)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function f(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,a,s,u,c,l,h,f,d=t.x/this.a,p=t.y/this.a;if(this.sphere){var m,v=0,g=0;if((n=.5*(m=Math.sqrt(d*d+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),v=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(m)<=r.b?0:Math.asin(p*g/m),d*=g,p=v*m;break;case this.OBLIQ:n=Math.abs(m)<=r.b?this.phi0:Math.asin(v*this.sinph0+p*g*this.cosph0/m),d*=g*this.cosph0,p=(v-Math.sin(n)*this.sinph0)*m;break;case this.N_POLE:p=-p,n=r.d-n;break;case this.S_POLE:n-=r.d}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,p):0}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,p*=this.dd,(u=Math.sqrt(d*d+p*p))<r.b)return t.x=0,t.y=this.phi0,t;a=2*Math.asin(.5*u/this.rq),i=Math.cos(a),d*=a=Math.sin(a),this.mode===this.OBLIQ?(c=i*this.sinb1+p*a*this.cosb1/u,s=this.qp*c,p=u*this.cosb1*i-p*this.sinb1*a):(c=p*a/u,s=this.qp*c,p=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=d*d+p*p))return t.x=0,t.y=this.phi0,t;c=1-s/this.qp,this.mode===this.S_POLE&&(c=-c)}e=Math.atan2(d,p),l=Math.asin(c),h=this.apa,f=l+l,n=l+h[0]*Math.sin(f)+h[1]*Math.sin(f+f)+h[2]*Math.sin(f+f+f)}return t.x=Object(o.a)(this.long0+e),t.y=n,t}var d=.3333333333333333,p=.17222222222222222,m=.10257936507936508,v=.06388888888888888,g=.0664021164021164,y=.016415012942191543;var x=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];e.default={init:l,forward:h,inverse:f,names:x,S_POLE:a,N_POLE:s,EQUIT:u,OBLIQ:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=u,e.forward=c,e.inverse=l,e.phi1z=h,n.d(e,"names",function(){return f});var r=n(61),i=n(137),o=n(11),a=n(62),s=n(6);function u(){Math.abs(this.lat1+this.lat2)<s.b||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Object(r.a)(this.e3,this.sin_po,this.cos_po),this.qs1=Object(i.a)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Object(r.a)(this.e3,this.sin_po,this.cos_po),this.qs2=Object(i.a)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Object(i.a)(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>s.b?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function c(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Object(i.a)(this.e3,this.sin_phi,this.cos_phi),a=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Object(o.a)(e-this.long0),u=a*Math.sin(s)+this.x0,c=this.rh-a*Math.cos(s)+this.y0;return t.x=u,t.y=c,t}function l(t){var e,n,r,i,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),a=Object(o.a)(i/this.ns0+this.long0),t.x=a,t.y=s,t}function h(t,e){var n,r,i,o,u,c=Object(a.a)(.5*e);if(t<s.b)return c;for(var l=t*t,h=1;h<=25;h++)if(n=Math.sin(c),r=Math.cos(c),c+=u=.5*(o=1-(i=t*n)*i)*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-i)/(1+i))),Math.abs(u)<=1e-7)return c;return null}var f=["Albers_Conic_Equal_Area","Albers","aea"];e.default={init:u,forward:c,inverse:l,names:f,phi1z:h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=a,e.forward=s,e.inverse=u,n.d(e,"names",function(){return c});var r=n(11),i=n(62),o=n(6);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function s(t){var e,n,i,a,s,u,c,l=t.x,h=t.y;return i=Object(r.a)(l-this.long0),e=Math.sin(h),n=Math.cos(h),a=Math.cos(i),1,(s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.b?(u=this.x0+1*this.a*n*Math.sin(i)/s,c=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)/s):(u=this.x0+this.infinity_dist*n*Math.sin(i),c=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=c,t}function u(t){var e,n,o,a,s,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),o=Math.cos(a),u=Object(i.a)(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),s=Object(r.a)(this.long0+s)):(u=this.phic0,s=0),t.x=s,t.y=u,t}var c=["gnom"];e.default={init:a,forward:s,inverse:u,names:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=s,e.forward=u,e.inverse=c,n.d(e,"names",function(){return l});var r=n(11),i=n(137),o=n(61),a=n(494);function s(){this.sphere||(this.k0=Object(o.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function u(t){var e,n,o=t.x,a=t.y,s=Object(r.a)(o-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var u=Object(i.a)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t}function c(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Object(r.a)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Object(a.a)(this.e,2*t.y*this.k0/this.a),e=Object(r.a)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var l=["cea"];e.default={init:s,forward:u,inverse:c,names:l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=o,e.forward=a,e.inverse=s,n.d(e,"names",function(){return u});var r=n(11),i=n(70);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(t){var e=t.x,n=t.y,o=Object(r.a)(e-this.long0),a=Object(i.a)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t}function s(t){var e=t.x,n=t.y;return t.x=Object(r.a)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Object(i.a)(this.lat0+(n-this.y0)/this.a),t}var u=["Equirectangular","Equidistant_Cylindrical","eqc"];e.default={init:o,forward:a,inverse:s,names:u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=d,e.forward=p,e.inverse=m,n.d(e,"names",function(){return v});var r=n(94),i=n(95),o=n(96),a=n(97),s=n(11),u=n(70),c=n(93),l=n(6),h=n(135),f=20;function d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Object(r.a)(this.es),this.e1=Object(i.a)(this.es),this.e2=Object(o.a)(this.es),this.e3=Object(a.a)(this.es),this.ml0=this.a*Object(c.a)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function p(t){var e,n,r,i=t.x,o=t.y,a=Object(s.a)(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=l.b?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Object(u.a)(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=l.b)e=this.a*a,n=-1*this.ml0;else{var f=Object(h.a)(this.a,this.e,Math.sin(o))/Math.tan(o);e=f*Math.sin(r),n=this.a*Object(c.a)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+f*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){var e,n,r,i,o,a,u,h,d;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=l.b)e=Object(s.a)(r/this.a+this.long0),n=0;else{var p;for(a=this.lat0+i/this.a,u=r*r/this.a/this.a+a*a,h=a,o=f;o;--o)if(h+=d=-1*(a*(h*(p=Math.tan(h))+1)-h-.5*(h*h+u)*p)/((h-a)/p-1),Math.abs(d)<=l.b){n=h;break}e=Object(s.a)(this.long0+Math.asin(r*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=l.b)n=0,e=Object(s.a)(this.long0+r/this.a);else{var m,v,g,y,x;for(a=(this.ml0+i)/this.a,u=r*r/this.a/this.a+a*a,h=a,o=f;o;--o)if(x=this.e*Math.sin(h),m=Math.sqrt(1-x*x)*Math.tan(h),v=this.a*Object(c.a)(this.e0,this.e1,this.e2,this.e3,h),g=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=d=(a*(m*(y=v/this.a)+1)-y-.5*m*(y*y+u))/(this.es*Math.sin(2*h)*(y*y+u-2*a*y)/(4*m)+(a-y)*(m*g-2/Math.sin(2*h))-g),Math.abs(d)<=l.b){n=h;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Object(s.a)(this.long0+Math.asin(r*m/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var v=["Polyconic","poly"];e.default={init:d,forward:p,inverse:m,names:v}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"iterations",function(){return i}),e.init=o,e.forward=a,e.inverse=s,n.d(e,"names",function(){return u});var r=n(6),i=1;function o(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function a(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,a=i/r.l*1e-5,s=o,u=1,c=0;for(e=1;e<=10;e++)u*=a,c+=this.A[e]*u;var l,h=c,f=s,d=1,p=0,m=0,v=0;for(e=1;e<=6;e++)l=p*h+d*f,d=d*h-p*f,p=l,m=m+this.B_re[e]*d-this.B_im[e]*p,v=v+this.B_im[e]*d+this.B_re[e]*p;return t.x=v*this.a+this.x0,t.y=m*this.a+this.y0,t}function s(t){var e,n,i=t.x,o=t.y,a=i-this.x0,s=(o-this.y0)/this.a,u=a/this.a,c=1,l=0,h=0,f=0;for(e=1;e<=6;e++)n=l*s+c*u,c=c*s-l*u,l=n,h=h+this.C_re[e]*c-this.C_im[e]*l,f=f+this.C_im[e]*c+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var p,m=h,v=f,g=s,y=u;for(e=2;e<=6;e++)p=v*h+m*f,m=m*h-v*f,v=p,g+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),y+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var x=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=v*h+m*f,m=m*h-v*f,v=p,x+=e*(this.B_re[e]*m-this.B_im[e]*v),_+=e*(this.B_im[e]*m+this.B_re[e]*v);var b=x*x+_*_;h=(g*x+y*_)/b,f=(y*x-g*_)/b}var M=h,w=f,T=1,A=0;for(e=1;e<=9;e++)T*=M,A+=this.D[e]*T;var E=this.lat0+A*r.l*1e5,S=this.long0+w;return t.x=S,t.y=E,t}var u=["New_Zealand_Map_Grid","nzmg"];e.default={init:o,forward:a,inverse:s,names:u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=i,e.forward=o,e.inverse=a,n.d(e,"names",function(){return s});var r=n(11);function i(){}function o(t){var e=t.x,n=t.y,i=Object(r.a)(e-this.long0),o=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=Object(r.a)(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var s=["Miller_Cylindrical","mill"];e.default={init:i,forward:o,inverse:a,names:s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=h,e.forward=f,e.inverse=d,n.d(e,"names",function(){return p});var r=n(11),i=n(70),o=n(193),a=n(132),s=n(194),u=n(6),c=n(62),l=20;function h(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Object(o.a)(this.es)}function f(t){var e,n,i=t.x,o=t.y;if(i=Object(r.a)(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),c=l;c;--c){var h=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=h,Math.abs(h)<u.b)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var f=Math.sin(o),d=Math.cos(o);n=this.a*Object(a.a)(o,f,d,this.en),e=this.a*i*d/Math.sqrt(1-this.es*f*f)}return t.x=e,t.y=n,t}function d(t){var e,n,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=Object(c.a)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Object(c.a)(Math.sin(e)/this.n)),o=Object(r.a)(o+this.long0),e=Object(i.a)(e)):(e=Object(s.a)(t.y/this.a,this.es,this.en),(a=Math.abs(e))<u.d?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),o=Object(r.a)(n)):a-u.b<u.d&&(o=this.long0)),t.x=o,t.y=e,t}var p=["Sinusoidal","sinu"];e.default={init:h,forward:f,inverse:d,names:p}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=o,e.forward=a,e.inverse=s,n.d(e,"names",function(){return u});var r=n(11),i=n(6);function o(){}function a(t){for(var e=t.x,n=t.y,o=Object(r.a)(e-this.long0),a=n,s=Math.PI*Math.sin(n);;){var u=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=u,Math.abs(u)<i.b)break}a/=2,Math.PI/2-Math.abs(n)<i.b&&(o=0);var c=.900316316158*this.a*o*Math.cos(a)+this.x0,l=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=c,t.y=l,t}function s(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=Object(r.a)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=i,t.y=o,t}var u=["Mollweide","moll"];e.default={init:o,forward:a,inverse:s,names:u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=d,e.forward=p,e.inverse=m,n.d(e,"names",function(){return v});var r=n(94),i=n(95),o=n(96),a=n(97),s=n(61),u=n(93),c=n(11),l=n(70),h=n(136),f=n(6);function d(){Math.abs(this.lat1+this.lat2)<f.b||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Object(r.a)(this.es),this.e1=Object(i.a)(this.es),this.e2=Object(o.a)(this.es),this.e3=Object(a.a)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Object(s.a)(this.e,this.sinphi,this.cosphi),this.ml1=Object(u.a)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f.b?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Object(s.a)(this.e,this.sinphi,this.cosphi),this.ml2=Object(u.a)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Object(u.a)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function p(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Object(u.a)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*Object(c.a)(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t}function m(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Object(c.a)(this.long0+o/this.ns),r=Object(l.a)(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Object(h.a)(a,this.e0,this.e1,this.e2,this.e3),i=Object(c.a)(this.long0+o/this.ns),t.x=i,t.y=r,t}var v=["Equidistant_Conic","eqdc"];e.default={init:d,forward:p,inverse:m,names:v}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=a,e.forward=s,e.inverse=u,n.d(e,"names",function(){return c});var r=n(11),i=n(6),o=n(62);function a(){this.R=this.a}function s(t){var e,n,a=t.x,s=t.y,u=Object(r.a)(a-this.long0);Math.abs(s)<=i.b&&(e=this.x0+this.R*u,n=this.y0);var c=Object(o.a)(2*Math.abs(s/Math.PI));(Math.abs(u)<=i.b||Math.abs(Math.abs(s)-i.d)<=i.b)&&(e=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*c):this.y0+Math.PI*this.R*-Math.tan(.5*c));var l=.5*Math.abs(Math.PI/u-u/Math.PI),h=l*l,f=Math.sin(c),d=Math.cos(c),p=d/(f+d-1),m=p*p,v=p*(2/f-1),g=v*v,y=Math.PI*this.R*(l*(p-g)+Math.sqrt(h*(p-g)*(p-g)-(g+h)*(m-g)))/(g+h);u<0&&(y=-y),e=this.x0+y;var x=h+p;return y=Math.PI*this.R*(v*x-l*Math.sqrt((g+h)*(h+1)-x*x))/(g+h),n=s>=0?this.y0+y:this.y0-y,t.x=e,t.y=n,t}function u(t){var e,n,o,a,s,u,c,l,h,f,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(o=t.x/d)*o+(a=t.y/d)*a,d=3*(a*a/(l=-2*(u=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(c=u-2*a*a+o*o)*c*c/l/l/l-9*u*c/l/l)/27)/(h=(u-c*c/3/l)/l)/(f=2*Math.sqrt(-h/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-f*Math.cos(p+Math.PI/3)-c/3/l)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-c/3/l)*Math.PI,e=Math.abs(o)<i.b?this.long0:Object(r.a)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o),t.x=e,t.y=n,t}var c=["Van_der_Grinten_I","VanDerGrinten","vandg"];e.default={init:a,forward:s,inverse:u,names:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=d,e.forward=p,e.inverse=m,n.d(e,"names",function(){return v});var r=n(11),i=n(6),o=n(93),a=n(94),s=n(95),u=n(96),c=n(97),l=n(135),h=n(62),f=n(136);function d(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function p(t){var e,n,h,f,d,p,m,v,g,y,x,_,b,M,w,T,A,E,S,C,O,P,R=t.x,k=t.y,L=Math.sin(t.y),D=Math.cos(t.y),j=Object(r.a)(R-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=i.b?(t.x=this.x0+this.a*(i.d-k)*Math.sin(j),t.y=this.y0-this.a*(i.d-k)*Math.cos(j),t):Math.abs(this.sin_p12+1)<=i.b?(t.x=this.x0+this.a*(i.d+k)*Math.sin(j),t.y=this.y0+this.a*(i.d+k)*Math.cos(j),t):(E=this.sin_p12*L+this.cos_p12*D*Math.cos(j),A=(T=Math.acos(E))/Math.sin(T),t.x=this.x0+this.a*A*D*Math.sin(j),t.y=this.y0+this.a*A*(this.cos_p12*L-this.sin_p12*D*Math.cos(j)),t):(e=Object(a.a)(this.es),n=Object(s.a)(this.es),h=Object(u.a)(this.es),f=Object(c.a)(this.es),Math.abs(this.sin_p12-1)<=i.b?(d=this.a*Object(o.a)(e,n,h,f,i.d),p=this.a*Object(o.a)(e,n,h,f,k),t.x=this.x0+(d-p)*Math.sin(j),t.y=this.y0-(d-p)*Math.cos(j),t):Math.abs(this.sin_p12+1)<=i.b?(d=this.a*Object(o.a)(e,n,h,f,i.d),p=this.a*Object(o.a)(e,n,h,f,k),t.x=this.x0+(d+p)*Math.sin(j),t.y=this.y0+(d+p)*Math.cos(j),t):(m=L/D,v=Object(l.a)(this.a,this.e,this.sin_p12),g=Object(l.a)(this.a,this.e,L),y=Math.atan((1-this.es)*m+this.es*v*this.sin_p12/(g*D)),S=0===(x=Math.atan2(Math.sin(j),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(j)))?Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(x)-Math.PI)<=i.b?-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.asin(Math.sin(j)*Math.cos(y)/Math.sin(x)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),T=v*S*(1-(C=S*S)*(w=(b=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es))*b)*(1-w)/6+(O=C*S)/8*(M=_*b)*(1-2*w)+(P=O*S)/120*(w*(4-7*w)-3*_*_*(1-7*w))-P*S/48*M),t.x=this.x0+T*Math.sin(x),t.y=this.y0+T*Math.cos(x),t))}function m(t){var e,n,d,p,m,v,g,y,x,_,b,M,w,T,A,E,S,C,O,P,R,k,L;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i.d*this.a)return;return n=e/this.a,d=Math.sin(n),p=Math.cos(n),m=this.long0,Math.abs(e)<=i.b?v=this.lat0:(v=Object(h.a)(p*this.sin_p12+t.y*d*this.cos_p12/e),g=Math.abs(this.lat0)-i.d,m=Math.abs(g)<=i.b?this.lat0>=0?Object(r.a)(this.long0+Math.atan2(t.x,-t.y)):Object(r.a)(this.long0-Math.atan2(-t.x,t.y)):Object(r.a)(this.long0+Math.atan2(t.x*d,e*this.cos_p12*p-t.y*this.sin_p12*d))),t.x=m,t.y=v,t}return y=Object(a.a)(this.es),x=Object(s.a)(this.es),_=Object(u.a)(this.es),b=Object(c.a)(this.es),Math.abs(this.sin_p12-1)<=i.b?(w=(M=this.a*Object(o.a)(y,x,_,b,i.d))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),v=Object(f.a)(w/this.a,y,x,_,b),m=Object(r.a)(this.long0+Math.atan2(t.x,-1*t.y)),t.x=m,t.y=v,t):Math.abs(this.sin_p12+1)<=i.b?(M=this.a*Object(o.a)(y,x,_,b,i.d),w=(e=Math.sqrt(t.x*t.x+t.y*t.y))-M,v=Object(f.a)(w/this.a,y,x,_,b),m=Object(r.a)(this.long0+Math.atan2(t.x,t.y)),t.x=m,t.y=v,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),E=Math.atan2(t.x,t.y),T=Object(l.a)(this.a,this.e,this.sin_p12),S=Math.cos(E),O=-(C=this.e*this.cos_p12*S)*C/(1-this.es),P=3*this.es*(1-O)*this.sin_p12*this.cos_p12*S/(1-this.es),L=1-O*(k=(R=e/T)-O*(1+O)*Math.pow(R,3)/6-P*(1+3*O)*Math.pow(R,4)/24)*k/2-R*k*k*k/6,A=Math.asin(this.sin_p12*Math.cos(k)+this.cos_p12*Math.sin(k)*S),m=Object(r.a)(this.long0+Math.asin(Math.sin(E)*Math.sin(k)/Math.cos(A))),v=Math.atan((1-this.es*L*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),t.x=m,t.y=v,t)}var v=["Azimuthal_Equidistant","aeqd"];e.default={init:d,forward:p,inverse:m,names:v}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=a,e.forward=s,e.inverse=u,n.d(e,"names",function(){return c});var r=n(11),i=n(62),o=n(6);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function s(t){var e,n,i,a,s,u,c,l=t.x,h=t.y;return i=Object(r.a)(l-this.long0),e=Math.sin(h),n=Math.cos(h),a=Math.cos(i),1,((s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.b)&&(u=1*this.a*n*Math.sin(i),c=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=c,t}function u(t){var e,n,a,s,u,c,l;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Object(i.a)(e/this.a),a=Math.sin(n),s=Math.cos(n),c=this.long0,Math.abs(e)<=o.b?(l=this.lat0,t.x=c,t.y=l,t):(l=Object(i.a)(s*this.sin_p14+t.y*a*this.cos_p14/e),u=Math.abs(this.lat0)-o.d,Math.abs(u)<=o.b?(c=this.lat0>=0?Object(r.a)(this.long0+Math.atan2(t.x,-t.y)):Object(r.a)(this.long0-Math.atan2(-t.x,t.y)),t.x=c,t.y=l,t):(c=Object(r.a)(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a)),t.x=c,t.y=l,t))}var c=["ortho"];e.default={init:a,forward:s,inverse:u,names:c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=a,e.forward=s,e.inverse=u,n.d(e,"names",function(){return h});var r=n(6),i={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},o={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function a(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r.d-r.c/2?this.face=i.TOP:this.lat0<=-(r.d-r.c/2)?this.face=i.BOTTOM:Math.abs(this.long0)<=r.c?this.face=i.FRONT:Math.abs(this.long0)<=r.d+r.c?this.face=this.long0>0?i.RIGHT:i.LEFT:this.face=i.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function s(t){var e,n,a,s,u,h,f={x:0,y:0},d={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===i.TOP)s=r.d-e,n>=r.c&&n<=r.d+r.c?(d.value=o.AREA_0,a=n-r.d):n>r.d+r.c||n<=-(r.d+r.c)?(d.value=o.AREA_1,a=n>0?n-r.n:n+r.n):n>-(r.d+r.c)&&n<=-r.c?(d.value=o.AREA_2,a=n+r.d):(d.value=o.AREA_3,a=n);else if(this.face===i.BOTTOM)s=r.d+e,n>=r.c&&n<=r.d+r.c?(d.value=o.AREA_0,a=-n+r.d):n<r.c&&n>=-r.c?(d.value=o.AREA_1,a=-n):n<-r.c&&n>=-(r.d+r.c)?(d.value=o.AREA_2,a=-n-r.d):(d.value=o.AREA_3,a=n>0?-n+r.n:-n-r.n);else{var p,m,v,g,y,x;this.face===i.RIGHT?n=l(n,+r.d):this.face===i.BACK?n=l(n,+r.n):this.face===i.LEFT&&(n=l(n,-r.d)),g=Math.sin(e),y=Math.cos(e),x=Math.sin(n),p=y*Math.cos(n),m=y*x,v=g,this.face===i.FRONT?a=c(s=Math.acos(p),v,m,d):this.face===i.RIGHT?a=c(s=Math.acos(m),v,-p,d):this.face===i.BACK?a=c(s=Math.acos(-p),v,-m,d):this.face===i.LEFT?a=c(s=Math.acos(-m),v,p,d):(s=a=0,d.value=o.AREA_0)}return h=Math.atan(12/r.n*(a+Math.acos(Math.sin(a)*Math.cos(r.c))-r.d)),u=Math.sqrt((1-Math.cos(s))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(a))))),d.value===o.AREA_1?h+=r.d:d.value===o.AREA_2?h+=r.n:d.value===o.AREA_3&&(h+=1.5*r.n),f.x=u*Math.cos(h),f.y=u*Math.sin(h),f.x=f.x*this.a+this.x0,f.y=f.y*this.a+this.y0,t.x=f.x,t.y=f.y,t}function u(t){var e,n,a,s,u,c,h,f,d,p,m,v,g={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=o.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=o.AREA_1,e-=r.d):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=o.AREA_2,e=e<0?e+r.n:e-r.n):(y.value=o.AREA_3,e+=r.d),d=r.n/12*Math.tan(e),u=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),c=Math.atan(u),(h=1-(a=Math.cos(e))*a*(s=Math.tan(n))*s*(1-Math.cos(Math.atan(1/Math.cos(c)))))<-1?h=-1:h>1&&(h=1),this.face===i.TOP)f=Math.acos(h),g.phi=r.d-f,y.value===o.AREA_0?g.lam=c+r.d:y.value===o.AREA_1?g.lam=c<0?c+r.n:c-r.n:y.value===o.AREA_2?g.lam=c-r.d:g.lam=c;else if(this.face===i.BOTTOM)f=Math.acos(h),g.phi=f-r.d,y.value===o.AREA_0?g.lam=-c+r.d:y.value===o.AREA_1?g.lam=-c:y.value===o.AREA_2?g.lam=-c-r.d:g.lam=c<0?-c-r.n:-c+r.n;else{var x,_,b;d=(x=h)*x,_=(d+=(b=d>=1?0:Math.sqrt(1-d)*Math.sin(c))*b)>=1?0:Math.sqrt(1-d),y.value===o.AREA_1?(d=_,_=-b,b=d):y.value===o.AREA_2?(_=-_,b=-b):y.value===o.AREA_3&&(d=_,_=b,b=-d),this.face===i.RIGHT?(d=x,x=-_,_=d):this.face===i.BACK?(x=-x,_=-_):this.face===i.LEFT&&(d=x,x=_,_=-d),g.phi=Math.acos(-b)-r.d,g.lam=Math.atan2(_,x),this.face===i.RIGHT?g.lam=l(g.lam,-r.d):this.face===i.BACK?g.lam=l(g.lam,-r.n):this.face===i.LEFT&&(g.lam=l(g.lam,+r.d))}0!==this.es&&(p=g.phi<0?1:0,m=Math.tan(g.phi),v=this.b/Math.sqrt(m*m+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),p&&(g.phi=-g.phi));return g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t}function c(t,e,n,i){var a;return t<r.b?(i.value=o.AREA_0,a=0):(a=Math.atan2(e,n),Math.abs(a)<=r.c?i.value=o.AREA_0:a>r.c&&a<=r.d+r.c?(i.value=o.AREA_1,a-=r.d):a>r.d+r.c||a<=-(r.d+r.c)?(i.value=o.AREA_2,a=a>=0?a-r.n:a+r.n):(i.value=o.AREA_3,a+=r.d)),a}function l(t,e){var n=t+e;return n<-r.n?n+=r.o:n>+r.n&&(n-=r.o),n}var h=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];e.default={init:a,forward:s,inverse:u,names:h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=p,e.forward=m,e.inverse=v,n.d(e,"names",function(){return g});var r=n(6),i=n(11),o=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],a=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],s=.8487,u=1.3523,c=r.i/5,l=1/c,h=18,f=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},d=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function p(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function m(t){var e=Object(i.a)(t.x-this.long0),n=Math.abs(t.y),d=Math.floor(n*c);d<0?d=0:d>=h&&(d=h-1),n=r.i*(n-l*d);var p={x:f(o[d],n)*e,y:f(a[d],n)};return t.y<0&&(p.y=-p.y),p.x=p.x*this.a*s+this.x0,p.y=p.y*this.a*u+this.y0,p}function v(t){var e={x:(t.x-this.x0)/(this.a*s),y:Math.abs(t.y-this.y0)/(this.a*u)};if(e.y>=1)e.x/=o[h][0],e.y=t.y<0?-r.d:r.d;else{var n=Math.floor(e.y*h);for(n<0?n=0:n>=h&&(n=h-1);;)if(a[n][0]>e.y)--n;else{if(!(a[n+1][0]<=e.y))break;++n}var c=a[n],l=5*(e.y-c[0])/(a[n+1][0]-c[0]);l=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}(function(t){return(f(c,t)-e.y)/d(c,t)},l,r.b,100),e.x/=f(o[n],l),e.y=(5*n+l)*r.a,t.y<0&&(e.y=-e.y)}return e.x=Object(i.a)(e.x+this.long0),e}var g=["Robinson","robin"];e.default={init:p,forward:m,inverse:v,names:g}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e,n){t.exports={create:n(532),clone:n(533),fromValues:n(534),copy:n(535),set:n(536),add:n(537),subtract:n(538),multiply:n(539),divide:n(540),min:n(541),max:n(542),scale:n(224),scaleAndAdd:n(543),distance:n(544),squaredDistance:n(545),length:n(546),squaredLength:n(547),negate:n(548),inverse:n(549),normalize:n(225),dot:n(550),lerp:n(551),random:n(552),transformMat4:n(553),transformQuat:n(554)}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a);return t}},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},function(t,e){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},function(t,e,n){"use strict";var r,i=n(1),o=n(2).registerRenderer,a=n(71),s=function t(e){if(!(this instanceof t))return new t(e);e=e||{},a.call(this,e);var r,i=n(3),o=n(40),s=n(138),u=n(5),c=n(15),l=this,h=null,f=null,d=0,p=0,m=!1,v=this._init,g=this._exit;return this.width=function(){return d},this.height=function(){return p},this.contextRenderer=function(){return h},this.api=function(){return"vgl"},this._init=function(){if(l.initialized())return l;v.call(l);var t=i(document.createElement("canvas"));if(t.addClass("webgl-canvas"),i(l.layer().node().get(0)).append(t),window.overrideContextAttributes){var n=t.get(0),r=n.getContext;n.getContext=function(t,e){if(e=e||{},window.overrideContextAttributes)for(var i in window.overrideContextAttributes)window.overrideContextAttributes.hasOwnProperty(i)&&(e[i]=window.overrideContextAttributes[i]);return r.call(n,t,e)}}(f=o.viewer(t.get(0),e.options)).init(),(h=f.renderWindow().activeRenderer()).setResetScene(!1),f.renderWindow().renderers().length>0&&h.setLayer(f.renderWindow().renderers().length),l.canvas(t);var a=l.layer().map().size();return l._resize(0,0,a.width,a.height),l},this._resize=function(t,e,n,r){var i=f.renderWindow();return t===i.windowPosition[0]&&e===i.windowPosition[1]&&n===d&&r===p||(d=n,p=r,l.canvas().attr("width",n),l.canvas().attr("height",r),i.positionAndResize(t,e,n,r),m=!0,l._render()),l},this._render=function(){return l.layer().map().scheduleAnimationFrame(this._renderFrame,!0),l},this._renderFrame=function(){f&&(m&&(m=!1,l._updateRendererCamera()),f.render())},this._glContext=function(){return f&&f.renderWindow()?f.renderWindow().context():o.GL},this._exit=function(){if(l.layer().map().scheduleAnimationFrame(this._renderFrame,"remove"),l.canvas().remove(),f){var t=new o.renderState;t.m_renderer=f,t.m_context=this._glContext(),f.exit(t),this._glContext()!==o.GL&&this._glContext().getExtension("WEBGL_lose_context")&&this._glContext().getExtension("WEBGL_lose_context").loseContext&&this._glContext().getExtension("WEBGL_lose_context").loseContext()}o.clearCachedShaders(o.GL),f=null,g()},this._updateRendererCamera=function(){var t=f.renderWindow(),e=l.layer().map(),n=e.camera(),i=e.rotation()||0,o=n.view,a=n.projectionMatrix;if(a[15])a=s.copy(u.mat4AsArray(),a),a=s.scale(a,a,[1,1,-.5]),a=s.translate(a,a,[0,0,n.clipbounds.far]);else{var c=n.clipbounds.near,h=n.clipbounds.far;a=s.copy(u.mat4AsArray(),a),a=s.scale(a,a,[1/c,1/c,-1/h])}var d=Math.PI/2,p=i%d,m=Math.min(Math.abs(p),Math.abs(p-d))<1e-5;t.renderers().forEach(function(t){var i=t.camera();if(!u.compareArrays(o,i.viewMatrix())||!u.compareArrays(a,i.projectionMatrix())||r!==e.zoom()){r=e.zoom(),i.setViewMatrix(o,!0),i.setProjectionMatrix(a);var s=n.viewport;a[1]||a[2]||a[3]||a[4]||a[6]||a[7]||a[8]||a[9]||a[11]||1!==a[15]||!m||s.left&&s.left%1||s.top&&s.top%1||parseFloat(r.toFixed(6))!==parseFloat(r.toFixed(0))?i.viewAlignment=function(){return null}:i.viewAlignment=function(){var t={roundx:2/s.width,roundy:2/s.height};return t.dx=s.width%2?.5*t.roundx:0,t.dy=s.height%2?.5*t.roundy:0,t}}})},l.layer().geoOn(c.pan,function(t){m=!0}),l.layer().geoOn(c.parallelprojection,function(t){var e=l.contextRenderer(),n=l.layer();if(t.geo&&t.geo._triggeredBy!==n){if(!e||!e.camera())return void console.log("Parallel projection event triggered on unconnected VGL renderer.");e.camera().setEnableParallelProjection(t.parallelProjection),m=!0}}),this};i(s,a),o("vgl",s),s.supported=function(){if(void 0===r){var t;try{((t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions(),r=!0}catch(t){console.warn("No webGL support"),r=!1}t=void 0,void 0,void 0}return r},s.fallback=function(){return null},t.exports=s},function(t,e,n){"use strict";var r=n(3),i={};i.Util={stamp:function(t){return t._leaflet_id=t._leaflet_id||++i.Util.lastId,t._leaflet_id},lastId:0};var o=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}};o.prototype={addObject:function(t,e){var n=this._getCoord(e.x),r=this._getCoord(e.y),o=this._grid,a=o[r]=o[r]||{},s=a[n]=a[n]||[],u=i.Util.stamp(t);e.obj=t,this._objectPoint[u]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,r,o=this._getCoord(e.x),a=this._getCoord(e.y),s=this._grid,u=s[a]=s[a]||{},c=u[o]=u[o]||[];for(delete this._objectPoint[i.Util.stamp(t)],n=0,r=c.length;n<r;n++)if(c[n]===t)return c.splice(n,1),1===r&&delete u[o],!0},eachObject:function(t,e){var n,r,i,o,a,s,u=this._grid;for(n in u)for(r in a=u[n])for(i=0,o=(s=a[r]).length;i<o;i++)t.call(e,s[i])&&(i--,o--)},getNearObject:function(t){var e,n,r,o,a,s,u,c,l=this._getCoord(t.x),h=this._getCoord(t.y),f=this._objectPoint,d=this._sqCellSize,p=null;for(e=h-1;e<=h+1;e++)if(o=this._grid[e])for(n=l-1;n<=l+1;n++)if(a=o[n])for(r=0,s=a.length;r<s;r++)u=a[r],(c=this._sqDist(f[i.Util.stamp(u)],t))<d&&(d=c,p=u);return p},contents:function(){return r.map(this._objectPoint,function(t){return t})},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}},t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(40);function o(t,e,n){this._group=t,this._zoom=e,this._points=[],this._clusters=[],this._count=0,this._parent=null,this._coord=null;var r=this;(n||[]).forEach(function(t){r._add(t)})}function a(t,e,i){var a,s,u=n(239);for(this._opts=r.extend({maxZoom:18,radius:.05},t),this._opts.width=this._opts.width||e||256,this._opts.height=this._opts.height||i||256,this._clusters={},this._points={},a=this._opts.maxZoom;a>=0;a-=1)s=this._scaleAtLevel(a,this._opts.width,this._opts.height),this._clusters[a]=new u(s),this._points[a]=new u(s);this._topClusterLevel=new o(this,-1)}o.prototype._add=function(t){var e=1;t instanceof o?(this._clusters.push(t),e=t._count):this._points.push(t),t._parent=this,this._increment(e)},o.prototype._increment=function(t){this._coord=null,this._count+=t,this._parent&&this._parent._increment(t)},o.prototype.count=function(){return this._count},o.prototype.each=function(t){var e;for(e=0;e<this._points.length;e+=1)t.call(this,this._points[e],this._zoom);for(e=0;e<this._clusters.length;e+=1)this._clusters[e].each.call(this._clusters[e],t)},o.prototype.coords=function(){var t,e={x:0,y:0};if(this._coord)return this._coord;for(t=0;t<this._points.length;t+=1)e.x+=this._points[t].x,e.y+=this._points[t].y;for(t=0;t<this._clusters.length;t+=1)e.x+=this._clusters[t].coords().x*this._clusters[t].count(),e.y+=this._clusters[t].coords().y*this._clusters[t].count();return{x:e.x/this.count(),y:e.y/this.count()}},a.prototype._scaleAtLevel=function(t,e,n){return i.zoomToHeight(t,e,n)/2*this._opts.radius},a.prototype.addPoint=function(t){var e,n,i,a,s,u;for(e=this._opts.maxZoom;e>=0;e-=1){if(n=this._clusters[e].getNearObject(t))return void n._add(t);if(n=this._points[e].getNearObject(t)){if(i=n._parent)for(u=i._points.length-1;u>=0;u-=1)if(i._points[u]===n){i._points.splice(u,1),i._increment(-1);break}for(i||r.noop(),a=new o(this,e,[n,t]),this._clusters[e].addObject(a,a.coords()),s=a,u=e-1;u>i._zoom;u-=1)s=new o(this,u,[s]),this._clusters[u].addObject(s,s.coords());for(i._add(s),u=e;u>=0&&this._points[u].removeObject(n,n);u-=1);return}this._points[e].addObject(t,t)}this._topClusterLevel._add(t)},a.prototype.points=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._points[Math.floor(t)].contents()},a.prototype.clusters=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._clusters[Math.floor(t)].contents()},t.exports=a},function(t,e,n){t.exports={adjoint:n(588),clone:n(589),copy:n(590),create:n(591),determinant:n(592),frob:n(593),fromMat2:n(594),fromMat4:n(595),fromQuat:n(596),identity:n(597),invert:n(598),multiply:n(599),normalFromMat4:n(600),rotate:n(601),scale:n(602),str:n(603),translate:n(604),transpose:n(605)}},function(t,e,n){var r;!function(i,o,a){if(i){for(var s,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)u[111+f]="f"+f;for(f=0;f<=9;++f)u[f+96]=f.toString();y.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},y.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},y.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,n){return null!==e&&e!==o&&(e===n||t(e.parentNode,n))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},y.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},y.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(u[e]=t[e]);s=null},y.init=function(){var t=y(o);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),i.Mousetrap=y,void 0!==t&&t.exports&&(t.exports=y),void 0===(r=function(){return y}.call(e,n,e,t))||(t.exports=r)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return u[t.which]?u[t.which]:c[t.which]?c[t.which]:String.fromCharCode(t.which).toLowerCase()}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function v(t,e,n){return n||(n=function(){if(!s)for(var t in s={},u)t>95&&t<112||u.hasOwnProperty(t)&&(s[u[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function g(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],h[r]&&(r=h[r]),e&&"keypress"!=e&&l[r]&&(r=l[r],o.push("shift")),m(r)&&o.push(r);return{key:r,modifiers:o,action:e=v(r,o,e)}}function y(t){var e=this;if(t=t||o,!(e instanceof y))return new y(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,a=!1,s=!1;function u(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function c(t,n,i,o,a,s){var u,c,l,h,f=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&m(t)&&(n=[t]),u=0;u<e._callbacks[t].length;++u)if(c=e._callbacks[t][u],(o||!c.seq||r[c.seq]==c.level)&&d==c.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(l=n,h=c.modifiers,l.sort().join(",")===h.sort().join(",")))){var p=!o&&c.combo==a,v=o&&c.seq==o&&c.level==s;(p||v)&&e._callbacks[t].splice(u,1),f.push(c)}return f}function l(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=p(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function f(t,e,o,a){function c(e){return function(){s=e,++r[t],clearTimeout(n),n=setTimeout(u,1e3)}}function h(e){l(o,e,t),"keyup"!==a&&(i=p(e)),setTimeout(u,10)}r[t]=0;for(var f=0;f<e.length;++f){var d=f+1===e.length?h:c(a||g(e[f+1]).action);v(e[f],d,a,t,f)}}function v(t,n,r,i,o){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?f(t,s,n,r):(a=g(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],c(a.key,a.modifiers,{type:a.action},i,t,o),e._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,n){var r,i=c(t,e,n),o={},h=0,f=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=h)continue;f=!0,o[i[r].seq]=1,l(i[r].callback,n,i[r].combo,i[r].seq)}else f||l(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&a;n.type!=s||m(t)||d||u(o),a=f&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)v(t[r],e,n)},d(t,"keypress",h),d(t,"keydown",h),d(t,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);e=e||{},i.call(this,e);var r=n(3),o=n(5).ensureFunction;delete e.layer,delete e.renderer;var a=n(32).d3,s=this,u=this._init,c=r.extend({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:a.scale.quantize(),geoId:function(t){return t.properties.GEO_ID},scalarId:function(t){return t.id},scalarValue:function(t){return t.value}},e);return this.scalar=function(t,e){var n,r;return void 0===t?s.choropleth.get("scalar")()||[]:(n=s.choropleth.get("scalarId"),r=s.choropleth.get("scalarValue"),c.scalar=t,c.scalarAggregator=e||a.mean,c.scalar._dictionary=t.reduce(function(t,e){var i,o;return i=n(e),o=r(e),t[i]=t[i]?t[i].push(o):[o],t},{}),s.dataTime().modified(),s)},this.choropleth=function(t,e){var n;return void 0===t?c:"string"==typeof t&&void 0===e?c[t]:(void 0===e?(n=r.extend({},c,t),c=n):c[t]=e,s.modified(),s)},this.choropleth.get=function(t){var e,n={};if(void 0===t){for(e in c)c.hasOwnProperty(e)&&(n[e]=s.choropleth.get(e));return n}return o(c[t])},this._featureToPolygons=function(t,e){var n=s.layer().createFeature("polygon",{});return"Polygon"===t.geometry.type?n.data([{type:"Polygon",coordinates:t.geometry.coordinates}]):"MultiPolygon"===t.geometry.type&&n.data(t.geometry.coordinates.map(function(t){return{type:"Polygon",coordinates:t}})),n.polygon(function(t){return{outer:t.coordinates[0],inner:t.coordinates[1]}}).position(function(t){return{x:t[0],y:t[1]}}).style({fillColor:e}),n},this._generateScale=function(t){var e=a.extent(s.scalar(),t||void 0);return s.choropleth().scale.domain(e).range(s.choropleth().colorRange),s},this.createChoropleth=function(){var t=s.choropleth,e=s.data(),n=s.scalar(),r=t.get("scalarValue"),i=t.get("geoId");return s._generateScale(r),e.map(function(e){var r=i(e),o=n._dictionary[r],a=t().scalarAggregator(o),u=s.choropleth().scale(a);return s._featureToPolygons(e,u)})},this._init=function(t){return u.call(s,t),c&&s.dataTime().modified(),s},this._init(e),this};r(o,i),t.exports=o},function(t,e,n){"use strict";t.exports="geo_d3_rescale"},function(t,e,n){"use strict";var r=n(1),i=n(144),o=function t(e){if(!(this instanceof t))return new t(e);var r=n(3),o=n(5);e=e||{},i.call(this,e);var a=this,s=this._init;return this._createContours=function(){var t,e,n,i,s,u=a.contour,c=a.style.get("value"),l=void 0!==a.style("used")?a.style.get("used"):function(t,e){return o.isNonNullFinite(c(t,e))},h=this._createMesh({used:l,opacity:a.style.get("opacity"),value:c});if(!h.numVertices||!h.numElements)return h;var f=u.get("stepped")(h),d=u.get("opacityRange")(h),p=u.get("rangeValues")(h);if(h.stepped=!(void 0!==f&&!f),h.colorMap=[],h.minColor=r.extend({a:u.get("minOpacity")(h)||0},o.convertColor(u.get("minColor")(h))),h.maxColor=r.extend({a:u.get("maxOpacity")(h)||0},o.convertColor(u.get("maxColor")(h))),u.get("colorRange")(h).forEach(function(t,e){h.colorMap.push(r.extend({a:d&&void 0!==d[e]?d[e]:1},o.convertColor(t)))}),t=o.getMinMaxValues(h.value,u.get("min")(h),u.get("max")(h)),h.minValue=t.min,h.maxValue=t.max,p&&p.length===h.colorMap.length+1||(p=null),p)for(s=1;s<p.length;s+=1)if(p[s-1]>p[s]){p=null;break}for(p&&(h.minValue=p[0],h.maxValue=p[p.length-1]),(n=h.maxValue-h.minValue)||(h.colorMap=h.colorMap.slice(0,1),n=1,p=null),h.rangeValues=p,h.factor=h.colorMap.length/n,i=0;i<h.numVertices;i+=1)if(e=h.value[i],p&&e>=h.minValue&&e<=h.maxValue){for(s=1;s<p.length;s+=1)if(e<=p[s]){h.value[i]=s-1+(e-p[s-1])/(p[s]-p[s-1]);break}}else h.value[i]=(e-h.minValue)*h.factor;return h},this.contour=a.mesh,this._init=function(t){s.call(a,t);var e=r.extend({},{opacity:1,value:function(t,e){return a.position()(t,e).z}},void 0===t.style?{}:t.style);a.style(e),a.contour(r.extend({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.contour||{})),(t.mesh||t.contour)&&a.dataTime().modified()},this._init(e),this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(3);t.exports=function t(e){if(!(this instanceof t))return new t(e);e=e||{},this._size=e.size||6,this._track=e.track||600,this._needed=e.needed||null,this._batch=!1;var n=this,i=1;return Object.defineProperty(this,"size",{get:function(){return this._size},set:function(t){this._size=t,this.next_item()}}),Object.defineProperty(this,"length",{get:function(){return this._queue.length}}),Object.defineProperty(this,"processing",{get:function(){return this._processing}}),this.clear=function(){return this._queue=[],this._processing=0,this},this.add=function(t,e,i){if(t.__fetchQueue){var o=r.inArray(t,this._queue);if(o>=0)return this._queue.splice(o,1),this._addToQueue(t,i),t}var a=r.Deferred(),s=r.Deferred();return a.done(function(){r.when(e.call(t)).always(s.resolve)}).fail(s.resolve),t.__fetchQueue=a,this._addToQueue(t,i),r.when(a,s).always(function(){n._processing>0&&(n._processing-=1),n.next_item()}).promise(t),n.next_item(),t},this._addToQueue=function(t,e){if(t.__fetchQueue._batch=this._batch,e)this._queue.push(t);else if(this._batch){for(var n=0;n<this._queue.length&&this._queue[n].__fetchQueue._batch===this._batch;n+=1);this._queue.splice(n,0,t)}else this._queue.unshift(t)},this.get=function(t){return r.inArray(t,this._queue)},this.remove=function(t){var e=r.inArray(t,this._queue);return e>=0&&(this._queue.splice(e,1),!0)},this.batch=function(t){return void 0===t?this._batch:(t?(this._batch=i,i+=1):this._batch=!1,this)},this.next_item=function(){if(!n._innextitem){if(n._innextitem=!0,n._queue.length>n._track&&this._needed)for(var t=n._queue.length-1;t>=0;t-=1)if(!n._needed(n._queue[t])){var e=n._queue.splice(t,1)[0];n._processing+=1,e.__fetchQueue.reject(),delete e.__fetchQueue}for(;n._processing<n._size&&n._queue.length;){var r=n._queue.shift();r.__fetchQueue&&(n._processing+=1,!n._needed||n._needed(r)?r.__fetchQueue.resolve():r.__fetchQueue.reject(),delete r.__fetchQueue)}n._innextitem=!1}},this.clear(),this}},function(t,e,n){"use strict";var r=n(1),i=n(99),o=n(41),a=function t(e){if(!(this instanceof t))return new t(e);if(o.call(this),!((e=e||{}).layer instanceof i))throw new Error("fileReader must be given a feature layer");var n=e.layer;return this.layer=function(){return n},this.canRead=function(t){return!1},this.read=function(t,e,n){var r=new Promise(function(t,n){throw e&&e(!1),new Error("The default file reader always fails")});return this.addPromise(r),r},this._getString=function(t,e,n){(function(t,e){var n=new FileReader;return e&&(n.onprogress=e),n.onloadend=function(){t(n.error||n.result)},n})(e,n).readAsText(t)},this};r(a,o),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);e=e||{},i.call(this,e);var r=n(3),o=n(5),a=n(2),s=this,u=this.draw,c=this.style,l=null,h=null,f=function(t){return t.children},d=[],p=this._init,m=this._exit;return this._init=function(t){p.call(s,t);var e=r.extend(!0,{},{nodes:{radius:5,fill:!0,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},void 0===t.style?{}:t.style);s.style(e),s.nodes(function(t){return t})},this._build=function(){s.children().forEach(function(t){t._build()})},this._update=function(){s.children().forEach(function(t){t._update()})},this._exit=function(){return s.data([]),d.forEach(function(t){t._exit(),s.removeChild(t)}),d=[],h._exit(),s.removeChild(h),m(),s},this.style=function(t,e){var n=c.call(s,t,e);return n!==s?n:(h.style(t.nodes),d.forEach(function(e){e.style(t.links)}),s)},this.links=function(t){return void 0===t?f:(f=o.ensureFunction(t),s)},this.nodes=function(t){return void 0===t?l:(l=t,s.modified(),s)},this.nodeFeature=function(){return h},this.linkFeatures=function(){return d},this.draw=function(){var t,e=s.layer(),n=s.data(),r=0;return t=s.style(),h.data(n),h.style(t.nodes),n.forEach(function(n){(n.children||[]).forEach(function(i){var o;r+=1,d.length<r&&(o=a.createFeature(t.linkType,e,e.renderer()).style(t.links),s.addChild(o),d.push(o)),d[r-1].data([n,i])})}),d.splice(r,d.length-r).forEach(function(t){t._exit(),s.removeChild(t)}),u(),s},h=a.createFeature("point",this.layer(),this.layer().renderer()),s.addChild(h),e.nodes&&this.nodes(e.nodes),this._init(e),this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(19),a=n(18),s=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var n,i,s,u,c,l,h,f=this,d=this._init;return n=e.position||function(t){return t},i=e.intensity||function(t){return 1},s=void 0!==e.maxIntensity?e.maxIntensity:null,u=void 0!==e.minIntensity?e.minIntensity:null,l=void 0!==e.binned?e.binned:"auto",c=e.updateDelay?parseInt(e.updateDelay,10):1e3,this.maxIntensity=function(t){return void 0===t?s:(s=t,f.dataTime().modified(),f.modified(),f)},this.minIntensity=function(t){return void 0===t?u:(u=t,f.dataTime().modified(),f.modified(),f)},this.updateDelay=function(t){return void 0===t?c:(c=parseInt(t,10),f)},this.binned=function(t){return void 0===t?l:("true"===t?t=!0:"false"===t?t=!1:"auto"!==t&&!0!==t&&!1!==t&&((t=parseInt(t,10))<=0||isNaN(t))&&(t=!1),l=t,f.dataTime().modified(),f.modified(),f)},this.position=function(t){return void 0===t?n:(n=t,f.dataTime().modified(),f.modified(),f)},this.gcsPosition=function(){return this._update(),h},this.intensity=function(t){return void 0===t?i:(i=t,f.dataTime().modified(),f.modified(),f)},this._init=function(t){d.call(f,t);var e=r.extend({},{radius:10,blurRadius:10,gaussian:!0,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}}},void 0===t.style?{}:t.style);f.style(e),n&&f.dataTime().modified()},this._build=function(){var t=f.data(),e=null,n=[],r=null===s||void 0===s,i=null===u||void 0===u;return t.forEach(function(t,o){n.push(f.position()(t,o)),(r||i)&&(e=f.intensity()(t,o),null!==s&&void 0!==s||(s=e),null!==u&&void 0!==u||(u=e),r&&e>s&&(s=e),i&&e<u&&(u=e))}),i&&r&&u===s&&(u-=1),h=a.transformCoordinates(f.gcs(),f.layer().map().gcs(),n),f.buildTime().modified(),f},this._init(e),this};i(s,o),t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(145),o=function t(e){if(!(this instanceof t))return new t(e);var r=n(3);return e.size=e.size||{x:256,y:256},this._image=null,this._cors=e.crossDomain||null===e.crossDomain?e.crossDomain:"anonymous",i.call(this,e),Object.defineProperty(this,"image",{get:function(){return this._image}}),this.fetch=function(){var t;return this._image||(this._image=new Image(this.size.x,this.size.y),this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1&&(this._image.crossOrigin=this._cors),t=r.Deferred(),this._image.onload=t.resolve,this._image.onerror=t.reject,this._image.src=this._url,t.done(function(){this._fetched=!0}.bind(this)).promise(this)),this},this.fadeIn=function(t){var e=this.fetch(),n=r.Deferred();return r(this._image).css("display","none"),e.done(function(){r(this._image).fadeIn(t,function(){n.resolve()})}.bind(this)),n.promise(this)},this};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(2).registerLayer,o=n(73),a=function t(e){var r=n(2).createWidget;if(e.renderer="dom",e.sticky=!1,!(this instanceof t))return new t(e);o.call(this,e);var i=this,a=this._exit;this.createWidget=function(t,e){var n=r(t,i,e);return e&&"parent"in e||i.addChild(n),n._init(e),i.modified(),n},this.deleteWidget=function(t){return t._exit(),i.removeChild(t),i.modified(),i},this._exit=function(){i.children().forEach(function(t){i.deleteWidget(t)}),a()}};r(a,o),i("ui",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(99);function o(t,e){return(t%e+e)%e}function a(t){var e,n=new RegExp(/\$?\{[xX]\}/),r=new RegExp(/\$?\{[yY]\}/),i=new RegExp(/\$?\{[zZ]\}/),a=new RegExp(/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/),s=t.replace(a,"{s}").replace(n,"{x}").replace(r,"{y}").replace(i,"{z}"),u=t.match(a);if(u)if(u[2])e=u[1].split(",");else if(":"===u[1][1])e=u[1].substr(2).split("");else if("-"===u[1][1]){e=[];for(var c=u[1].charCodeAt(0),l=u[1].charCodeAt(2),h=Math.min(c,l);h<=Math.max(c,l);h+=1)e.push(String.fromCharCode(h))}return function(t,n,r,i){return s.replace("{s}",function(t,e,n,r){return r[o(t+e+n,r.length)]}(t,n,r,e||i)).replace("{x}",t).replace("{y}",n).replace("{z}",r)}}var s=function t(e){if(!(this instanceof t))return new t(e);i.call(this,e);var r=n(3),s=n(15),u=n(18),c=n(253),l=n(246),h=n(2).adjustLayerForRenderer,f=n(145);if((e=r.extend(!0,{},this.constructor.defaults,e||{})).cacheSize||(e.cacheSize=e.keepLower?600:200),"string"===r.type(e.subdomains)&&(e.subdomains=e.subdomains.split("")),e.baseUrl){var d=e.baseUrl;d&&"/"!==d.charAt(d.length-1)&&(d+="/"),e.url=d+"{z}/{x}/{y}."+(e.imageFormat||"png")}e.originalUrl=e.url,"string"===r.type(e.url)&&(e.url=a(e.url));var p,m=this._init,v=this._exit,g=this.visible,y=[],x=[];this._levelZIncrement=1e-5,this._options=r.extend(!0,{},e),this.attribution(e.attribution),this._activeTiles={},this._tileTree={},this._cache=c({size:e.cacheSize}),this._queue=l({size:6,track:e.cacheSize,needed:function(t){return t===this.cache.get(t.toString(),!0)}.bind(this)});var _={};return Object.defineProperty(this,"options",{get:function(){return r.extend({},this._options)}}),Object.defineProperty(this,"cache",{get:function(){return this._cache}}),Object.defineProperty(this,"activeTiles",{get:function(){return r.extend({},this._activeTiles)}}),this.tilesAtZoom=function(t){if(this._options.tilesAtZoom)return this._options.tilesAtZoom.call(this,t);var e=Math.pow(2,t);return{x:e,y:e}},this.tilesMaxBounds=function(t){return this._options.tilesMaxBounds?this._options.tilesMaxBounds.call(this,t):null},this.tileCropFromBounds=function(t){if(this._options.tilesMaxBounds){var e=t.index.level,n=this._tileBounds(t);return void 0===x[e]&&(x[e]=this.tilesMaxBounds(e)||null),x[e]&&(n.right>x[e].x||n.bottom>x[e].y)?{x:Math.max(0,Math.min(x[e].x,n.right)-n.left),y:Math.max(0,Math.min(x[e].y,n.bottom)-n.top)}:void 0}},this.isValid=function(t){return this._options.minLevel<=t.level&&t.level<=this._options.maxLevel&&(!!(this._options.wrapX||0<=t.x&&t.x<=this.tilesAtZoom(t.level).x-1)&&!!(this._options.wrapY||0<=t.y&&t.y<=this.tilesAtZoom(t.level).y-1))},this._origin=function(t){var e,n=this.toLevel(this.toLocal(this.map().origin()),t),r=this._options;return{index:e={x:Math.floor(n.x/r.tileWidth),y:Math.floor(n.y/r.tileHeight)},offset:{x:n.x-r.tileWidth*e.x,y:n.y-r.tileHeight*e.y}}},this._tileBounds=function(t){var e=this._origin(t.index.level);return t.bounds(e.index,e.offset)},this.tileAtPoint=function(t,e){var n=this._origin(e),r=this.map();t=this.displayToLevel(r.gcsToDisplay(t,null),e),isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0);var i=this._tileOffset(e);return i&&(t.x+=i.x,t.y+=i.y),{x:Math.floor(n.index.x+(n.offset.x+t.x)/this._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+t.y)/this._options.tileHeight)}},this.gcsTileBounds=function(t,e){var n=t.index?t:f({index:t,size:{x:this._options.tileWidth,y:this._options.tileHeight},url:""}),r=this._tileOffset(n.index.level),i=n.bounds({x:0,y:0},r),o=this.map(),a=o.unitsPerPixel(n.index.level),s=[{x:i.left*a,y:this._topDown()*i.top*a},{x:i.right*a,y:this._topDown()*i.bottom*a}];return(e=null===e?o.gcs():void 0===e?o.ingcs():e)!==o.gcs()&&(s=u.transformCoordinates(o.gcs(),e,s)),{left:s[0].x,top:s[0].y,right:s[1].x,bottom:s[1].y}},this._getTile=function(t,e){var n=e||t;return f({index:t,size:{x:this._options.tileWidth,y:this._options.tileHeight},queue:this._queue,url:this._options.url.call(this,n.x,n.y,n.level||0,this._options.subdomains)})},this._getTileCached=function(t,e,n){var r=this.cache.get(this._tileHash(t));return null===r&&(r=this._getTile(t,e),this.cache.add(r,this.remove.bind(this),n)),r},this._tileHash=function(t){return[t.level||0,t.y,t.x].join("_")},this._getTileRange=function(t,e){var n=[this.tileAtPoint({x:e.left,y:e.top},t),this.tileAtPoint({x:e.right,y:e.top},t),this.tileAtPoint({x:e.left,y:e.bottom},t),this.tileAtPoint({x:e.right,y:e.bottom},t)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}},this._getTiles=function(t,e,n,i){var a,s,u,c,l,h,f,d,p,m,v,g=[],x=!1,_=this._options.keepLower?this._options.minLevel:t;for(t<_&&(t=_),v=_;v<=t&&(l=(f=this._getTileRange(v,e)).start,h=f.end,c=this.tilesAtZoom(v),this._options.wrapX||(l.x=Math.min(Math.max(l.x,0),c.x-1),h.x=Math.min(Math.max(h.x,0),c.x-1),v===_&&this._options.keepLower&&(l.x=0,h.x=c.x-1)),this._options.wrapY||(l.y=Math.min(Math.max(l.y,0),c.y-1),h.y=Math.min(Math.max(h.y,0),c.y-1),v===_&&this._options.keepLower&&(l.y=0,h.y=c.y-1)),!(this._options.gcs&&this._options.gcs!==this.map().gcs()&&v!==_&&(h.x+1-l.x)*(h.y+1-l.y)>this.map().size().width*this.map().size().height/this._options.tileWidth/this._options.tileHeight*16));v+=1)for(a=l.x;a<=h.x;a+=1)for(s=l.y;s<=h.y;s+=1)u={level:v,x:a,y:s},d={level:v,x:a,y:s},this._options.wrapX&&(d.x=o(d.x,c.x)),this._options.wrapY&&(d.y=o(d.y,c.y)),this.isValid(d)&&(i&&g.length<y.length&&(m=y[g.length],x=x||u.level!==m.level||u.x!==m.x||u.y!==m.y),g.push({index:u,source:d}));if(i){if(!x&&g.length===y.length)return;y.splice(0,y.length),r.each(g,function(t,e){y.push(e.index)})}if(n){p={x:(l.x+h.x)/2,y:(l.y+h.y)/2,level:t,bottomLevel:t};for(var b=Math.max(h.x-l.x,h.y-l.y)+1;b>=1;b/=2)p.bottomLevel-=1;g.sort(this._loadMetric(p)),this._queue&&this._queue.batch(!0)}for(this.cache.size<g.length&&(console.log("Increasing cache size to "+g.length),this.cache.size=g.length),a=0;a<g.length;a+=1)g[a]=this._getTileCached(g[a].index,g[a].source,!0);return this.cache.purge(this.remove.bind(this)),g},this.prefetch=function(t,e){var n;return n=this._getTiles(t,e,!0),r.when.apply(r,n.map(function(t){return t.fetch()}))},this._loadMetric=function(t){return function(e,n){var r,i,o,a,s;return e=e.index||e,n=n.index||n,e.level!==n.level?t.bottomLevel&&e.level>=t.bottomLevel!=n.level>=t.bottomLevel?e.level>=t.bottomLevel?-1:1:e.level-n.level:(s=Math.pow(2,e.level-t.level),o=(t.x+.5)*s-.5,a=(t.y+.5)*s-.5,(r=e.x-o)*r+(i=e.y-a)*i-((r=n.x-o)*r+(i=n.y-a)*i))}},this.fromLevel=function(t,e){var n=Math.pow(2,-e);return{x:t.x*n,y:t.y*n}},this.toLevel=function(t,e){var n=Math.pow(2,e);return{x:t.x*n,y:t.y*n}},this.drawTile=function(t){var e=t.toString();this._activeTiles.hasOwnProperty(e)?this._moveToTop(t):this._drawTile(t),this._activeTiles[e]=t},this._drawTile=function(t){if(null!==this.renderer())throw new Error("This draw method is not valid on renderer managed layers.");var e,n=t.index.level,i=r(this._getSubLayer(n)),o=this._tileBounds(t),a=this._options.animationDuration,s=r('<div class="geo-tile-container"/>').attr("tile-reference",t.toString());s.append(t.image),s.css({left:o.left-parseInt(i.attr("offsetx")||0,10)+"px",top:o.top-parseInt(i.attr("offsety")||0,10)+"px"}),(e=this.tileCropFromBounds(t))&&s.addClass("crop").css({width:e.x+"px",height:e.y+"px"}),a>0&&t.fadeIn(a),i.append(s),t.catch(function(){console.warn("Could not load tile at "+t.toString()),this._remove(t)}.bind(this))},this.remove=function(t){var e=t.toString(),n=this._activeTiles[e];return n instanceof f&&this._remove(n),delete this._activeTiles[e],n},this._remove=function(t){t.image&&(t.image.parentElement?r(t.image.parentElement).remove():console.log("No parent element to remove "+t.toString(),t),r(t.image).remove())},this._moveToTop=function(t){r.noop(t)},this._getViewBounds=function(){var t=this.map(),e=t.zoom(),n=this._options.tileRounding(e),r=Math.pow(2,e-n),i=t.size(),o=this.displayToLevel({x:0,y:0}),a=this.displayToLevel({x:i.width,y:0}),s=this.displayToLevel({x:0,y:i.height}),u=this.displayToLevel({x:i.width,y:i.height});return{level:n,scale:r,left:Math.min(o.x,a.x,s.x,u.x),right:Math.max(o.x,a.x,s.x,u.x),top:Math.min(o.y,a.y,s.y,u.y),bottom:Math.max(o.y,a.y,s.y,u.y)}},this._purge=function(t,e,n){var r,i;if(this._updating)return this;for(i in n||(n=this._getViewBounds()),this._activeTiles)r=this._activeTiles[i],this._canPurge(r,n,t,e)&&this.remove(r);return this},this.clear=function(){var t,e=[];for(t in this._activeTiles)e.push(this.remove(t));return this._tileTree={},y=[],e},this.reset=function(){return this.clear(),this._cache.clear(),this},this.toLocal=function(t,e){var n=this.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x/r,y:this._topDown()*t.y/r}},this.fromLocal=function(t,e){var n=this.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x*r,y:this._topDown()*t.y*r}},this._topDown=function(){return this._options.topDown?1:-1},this._getSubLayer=function(t){if(this.canvas()){var e=this.canvas().find("div[data-tile-layer="+t.toFixed()+"]").get(0);return e||(e=r('<div class=geo-tile-layer data-tile-layer="'+t.toFixed()+'"/>').get(0),this.canvas().append(e)),e}},this._updateSubLayers=function(t,e){var n=this.canvas(),i=parseInt(n.attr("lastlevel"),10),o=parseInt(n.attr("lastoffsetx")||0,10),a=parseInt(n.attr("lastoffsety")||0,10);if(i===t&&Math.abs(o-e.left)<65536&&Math.abs(a-e.top)<65536)return{x:o,y:a};var s=this.map(),u=this._tileOffset(t),c=parseInt((e.left+e.right-s.size().width)/2+u.x,10),l=parseInt((e.top+e.bottom-s.size().height)/2+u.y,10);return n.find(".geo-tile-layer").each(function(e,n){var i=r(n),o=parseInt(i.data("tileLayer"),10);i.css("transform","scale("+Math.pow(2,t-o)+")");var a=parseInt(c/Math.pow(2,t-o),10),s=parseInt(l/Math.pow(2,t-o),10),u=a-parseInt(i.attr("offsetx")||0,10),h=s-parseInt(i.attr("offsety")||0,10);i.attr({offsetx:a,offsety:s}),i.find(".geo-tile-container").each(function(t,e){r(e).css({left:parseInt(r(e).css("left"),10)-u+"px",top:parseInt(r(e).css("top"),10)-h+"px"})})}),n.attr({lastoffsetx:c,lastoffsety:l,lastlevel:t}),{x:c,y:l}},this._update=function(t){if(t&&t.event&&(t.event.event===s.zoom||t.event.event===s.rotate))return this;if(!this.visible())return this;var e,n=this.map(),i=n.bounds(void 0,null),o=n.zoom(),a=this._options.tileRounding(o);if(this._updateSubLayers){var u=this._getViewBounds(),c=this._updateSubLayers(a,u)||{x:0,y:0},l=this._tileOffset(a);if(null===this.renderer()){var h=Math.pow(2,o-a),f=n.rotation(),d=-l.x+-(u.left+u.right)/2+c.x,m=-l.y+-(u.bottom+u.top)/2+c.y,v=d+n.size().width/2,g=m+n.size().height/2;this.canvas().css({"transform-origin":-d+"px "+-m+"px"});var y="translate("+v+"px,"+g+"px)scale("+h+")";f&&(y+="rotate("+180*f/Math.PI+"deg)"),this.canvas().css("transform",y)}this.canvas().attr({scale:Math.pow(2,o-a),dx:-l.x+-(u.left+u.right)/2,dy:-l.y+-(u.bottom+u.top)/2,offsetx:c.x,offsety:c.y,rotation:n.rotation()})}return void 0===(e=this._getTiles(a,i,!0,!0))?this:(this._tileTree={},e.forEach(function(t){t.fetched()?(this.drawTile(t),this._setTileTree(t)):t._queued?(this._queue?this._queue.get(t):-1)>=0&&this._queue.add(t):(t.then(function(){if(!p&&t===this.cache.get(t.toString())){var e=n.zoom(),r=this._options.tileRounding(e),i=this._getViewBounds();this._canPurge(t,i,r)?this.remove(t):(this.drawTile(t),this._setTileTree(t))}}.bind(this)),this.addPromise(t),t._queued=!0)}.bind(this)),r.when.apply(r,e).done(function(){var t=this.map().zoom(),e=this._options.tileRounding(t);this._purge(e,!0)}.bind(this)),this)},this._setTileTree=function(t){if(!this._options.keepLower){var e=t.index;this._tileTree[e.level]=this._tileTree[e.level]||{},this._tileTree[e.level][e.x]=this._tileTree[e.level][e.x]||{},this._tileTree[e.level][e.x][e.y]=t}},this._getTileTree=function(t){return((this._tileTree[t.level]||{})[t.x]||{})[t.y]||null},this._isCovered=function(t){var e=t.index.level,n=t.index.x,r=t.index.y,i=[];return(i=this._getTileTree({level:e-1,x:Math.floor(n/2),y:Math.floor(r/2)}))?[i]:(i=[this._getTileTree({level:e+1,x:2*n,y:2*r}),this._getTileTree({level:e+1,x:2*n+1,y:2*r}),this._getTileTree({level:e+1,x:2*n,y:2*r+1}),this._getTileTree({level:e+1,x:2*n+1,y:2*r+1})]).every(function(t){return null!==t})?i:null},this._outOfBounds=function(t,e){var n=this._tileOffset(t.index.level),r=1;return t.index.level!==e.level&&(r=Math.pow(2,(e.level||0)-(t.index.level||0))),(t.bottom-n.y)*r<e.top||(t.left-n.x)*r>e.right||(t.top-n.y)*r>e.bottom||(t.right-n.x)*r<e.left},this._canPurge=function(t,e,n,r){if(this._options.keepLower){if((n=n||0)<t.index.level&&t.index.level!==this._options.minLevel)return!0;if(t.index.level===this._options.minLevel&&!this._options.wrapX&&!this._options.wrapY)return!1}else if((r||this._isCovered(t))&&n!==t.index.level)return!0;return!!e&&this._outOfBounds(t,e)},this.displayToLevel=function(t,e){var n,r=this.map(),i=r.zoom(),o=this._options.tileRounding(i),a=r.unitsPerPixel(void 0===e?o:e);if(void 0===t){var s=r.size();t={x:s.width/2,y:s.height/2}}try{n=r.displayToGcs(t,this._options.gcs||null)}catch(t){n={x:0,y:0}}return{x:n.x/a,y:this._topDown()*n.y/a}},this.url=function(t){return void 0===t?this._options.originalUrl:t===this._options.originalUrl?this:(this._options.originalUrl=t,"string"===r.type(t)&&(t=a(t)),this._options.url=t,this.reset(),this.map().draw(),this)},this.subdomains=function(t){return void 0===t?this._options.subdomains:(t&&("string"===r.type(t)&&(t=t.indexOf(",")>=0?t.split(","):t.split("")),this._options.subdomains=t,this.reset(),this.map().draw()),this)},this._tileOffset=function(t){return void 0===_[t]&&(_[t]=this._options.tileOffset(t)),_[t]},this.visible=function(t){return void 0===t?g():(this.visible()!==t&&(g(t),t&&this._update()),this)},this._init=function(){var t;if(m.apply(this,arguments),null===this.renderer())for(t=0;t<=this._options.maxLevel;t+=1)this._getSubLayer(t);return this},this._exit=function(){return this.reset(),v.apply(this,arguments),p=!0,this},h("tile",this),this};s.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:!0,wrapY:!1,url:null,subdomains:"abc",tileOffset:function(t){return{x:0,y:0}},tilesMaxBounds:null,topDown:!1,keepLower:!0,tileRounding:Math.round,attribution:"",animationDuration:0},r(s,i),t.exports=s},function(t,e,n){"use strict";t.exports=function t(e){return this instanceof t?(e=e||{},this._size=e.size||64,Object.defineProperty(this,"size",{get:function(){return this._size},set:function(t){for(;this._atime.length>t;)this.remove(this._atime[this._atime.length-1]);this._size=t}}),Object.defineProperty(this,"length",{get:function(){return this._atime.length}}),this._access=function(t){return this._atime.indexOf(t)},this.remove=function(t){var e="string"==typeof t?t:t.toString();return e in this._cache&&(this._atime.splice(this._access(e),1),delete this._cache[e],!0)},this.clear=function(){return this._cache={},this._atime=[],this},this.get=function(t,e){return(t="string"==typeof t?t:t.toString())in this._cache?(e||(this._atime.splice(this._access(t),1),this._atime.unshift(t)),this._cache[t]):null},this.add=function(t,e,n){this.remove(t);var r=t.toString();this._cache[r]=t,this._atime.unshift(r),n||this.purge(e)},this.purge=function(t){for(var e;this._atime.length>this.size;){e=this._atime.pop();var n=this._cache[e];t&&t(n),delete this._cache[e]}},this.clear(),this):new t(e)}},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(19),a=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var n=this,i=void 0===e.position?[]:e.position,a=this._init;return this.position=function(t){return void 0===t?i:(i=t,n.dataTime().modified(),n.modified(),n)},this._init=function(t){a.call(n,t);var e=r.extend({},{strokeWidth:function(){return 1},strokeColor:function(){return{r:1,g:1,b:1}}},void 0===t.style?{}:t.style);n.style(e),i&&n.dataTime().modified()},this._init(e),this};i(a,o),t.exports=a},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(19),a=n(15),s=n(5),u=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var n,i,u,c=this,l=this._update,h=this._init,f=this._exit;return this.position=function(t){return void 0===t?c.style("position"):(t!==c.style("position")&&(c.style("position",t),c.dataTime().modified(),c.modified()),c)},this.url=function(t){return void 0===t?c.style("url"):(t!==c.style("url")&&(i=u=void 0,c.style("url",t),c.dataTime().modified(),c.modified()),c)},this.maxIndex=function(){if(u){if(void 0===u.maxIndex)for(var t in u.maxIndex=0,u.mappedColors)u.mappedColors.hasOwnProperty(t)&&(u.maxIndex=Math.max(u.maxIndex,t));return u.maxIndex}},this.color=function(t){return void 0===t?c.style("color"):(t!==c.style("color")&&(c.style("color",t),c.dataTime().modified(),c.modified()),c)},this.pointSearch=function(t){if(n&&u){var e=n.pointSearch(t);if(1===e.index.length&&e.extra&&e.extra[e.index[0]].basis){var r,i,o,a=e.extra[e.index[0]].basis;if(r=Math.floor(a.x*u.width),i=Math.floor(a.y*u.height),r>=0&&r<u.width&&i>=0&&i<u.height)return e={index:[o=u.indices[i*u.width+r]],found:[c.data()[o]]}}}return{index:[],found:[]}},this._build=function(){if(c.buildTime().modified(),i)u&&this._computePixelmap();else{var t=this.style.get("url")();if(s.isReadyImage(t))i=t,this._computePixelmap();else if(t){var e,n,o=r.Deferred();t instanceof Image?(i=t,e=t.onload,n=t.onerror):(i=new Image,t.indexOf(":")>=0&&t.indexOf("/")===t.indexOf(":")+1&&(i.crossOrigin=this.style.get("crossDomain")()||"anonymous")),i.onload=function(){e&&e.apply(this,arguments),c.style.get("url")()===t&&(u=void 0,c._computePixelmap()),o.resolve()},i.onerror=function(){n&&n.apply(this,arguments),o.reject()},o.promise(this),this.layer().addPromise(this),t instanceof Image||(i.src=t)}}return c},this._preparePixelmap=function(){var t,e,n;if(s.isReadyImage(i)){for((u={width:i.naturalWidth,height:i.naturalHeight,canvas:document.createElement("canvas")}).canvas.width=u.width,u.canvas.height=u.height,u.context=u.canvas.getContext("2d"),u.context.drawImage(i,0,0),u.imageData=u.context.getImageData(0,0,u.canvas.width,u.canvas.height),n=u.imageData.data,u.indices=new Array(n.length/4),u.area=n.length/4,u.mappedColors={},t=0;t<n.length;t+=4)e=n[t]+(n[t+1]<<8)+(n[t+2]<<16),u.indices[t/4]=e,u.mappedColors[e]||(u.mappedColors[e]={first:t/4}),u.mappedColors[e].last=t/4;return u}},this._computePixelmap=function(){var t,e,r,i,o,s,l,h,f,d,p=c.data()||[],m=c.style.get("color"),v=-1;if(!u){if(!c._preparePixelmap())return;d=!0}for(e in l=u.mappedColors,h=u.area,l)l.hasOwnProperty(e)&&(i=[255*((i=m(p[e],+e)||{}).r||0),255*(i.g||0),255*(i.b||0),void 0===i.a?255:255*i.a],l[e].update=!l[e].color||l[e].color[0]!==i[0]||l[e].color[1]!==i[1]||l[e].color[2]!==i[2]||l[e].color[3]!==i[3],l[e].update&&(l[e].color=i,h=Math.min(l[e].first,h),v=Math.max(l[e].last,v)));if(!(h>=v)){for(o=u.imageData.data,s=u.indices,t=h;t<=v;t+=1)(e=s[t])!==r&&(r=e,i=l[e].color,f=l[e].update),f&&(o[4*t]=i[0],o[4*t+1]=i[1],o[4*t+2]=i[2],o[4*t+3]=i[3]);u.context.putImageData(u.imageData,0,0,0,Math.floor(h/u.width),u.width,Math.ceil((v+1)/u.width)),n||(n=c.layer().createFeature("quad",{selectionAPI:!1,gcs:c.gcs(),visible:c.visible(void 0,!0)}),c.dependentFeatures([n]),n.style({image:u.canvas,position:c.style.get("position")}).data([{}]).draw()),d&&c.geoTrigger(a.pixelmap.prepared,{pixelmap:c})}},this._update=function(){return l.call(c),(c.buildTime().timestamp()<=c.dataTime().timestamp()||c.updateTime().timestamp()<c.timestamp())&&c._build(),c.updateTime().modified(),c},this._exit=function(){return n&&c.layer()&&(c.layer().deleteFeature(n),n=null,c.dependentFeatures([])),f(),c},this._init=function(t){t=t||{},h.call(c,t);var e=r.extend({},{color:function(t,e){return{r:(255&e)/255,g:(e>>8&255)/255,b:(e>>16&255)/255,a:1}},position:function(t){return t}},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),void 0!==t.url&&(e.url=t.url),void 0!==t.color&&(e.color=t.color),c.style(e),c.dataTime().modified(),c},this};u.create=function(t,e){return(e=e||{}).type="pixelmap",o.create(t,e)},u.capabilities={feature:"pixelmap"},i(u,o),t.exports=u},function(t,e,n){"use strict";var r=n(1),i=n(19),o=function t(e){if(!(this instanceof t))return new t(e);var r=n(3);e=e||{},i.call(this,e);var o=this,a=this._init,s=this.style;this.origin=function(t){return void 0===t?s("origin"):(s("origin",t),o.dataTime().modified(),o.modified(),o)},this.delta=function(t){return void 0===t?s("delta"):(s("delta",t),o.dataTime().modified(),o.modified(),o)},this._init=function(t){a.call(o,t);var e=r.extend({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:function(t){return t},scale:null},void 0===t.style?{}:t.style);void 0!==t.origin&&(e.origin=t.origin),o.style(e),o.dataTime().modified()}};r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(147),i=n(1),o=n(2).registerWidget,a=function t(e){if(!(this instanceof t))return new t(e);r.call(this,e);var n=this;return this._init=function(){return e.hasOwnProperty("parent")&&e.parent.addChild(n),n._createCanvas(),n._appendCanvasToParent(),n.canvas().addEventListener("mousedown",function(t){t.stopPropagation()}),n.reposition(),n},this._createCanvas=function(){n.canvas(document.createElement(e.el||"div"))},this};i(a,r),o("dom","dom",a),t.exports=a},function(t,e,n){n(259),t.exports=n(462)},function(t,e,n){n(260)},function(t,e,n){"use strict";(function(t){if(n(261),n(458),n(459),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function r(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&r(Array,t,Function.call.bind([][t]))})}).call(e,n(101))},function(t,e,n){n(262),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(342),n(343),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(123),n(366),n(367),n(166),n(368),n(369),n(370),n(371),n(372),n(169),n(171),n(172),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),t.exports=n(28)},function(t,e,n){"use strict";var r=n(7),i=n(24),o=n(12),a=n(0),s=n(21),u=n(42).KEY,c=n(8),l=n(75),h=n(57),f=n(46),d=n(10),p=n(149),m=n(103),v=n(263),g=n(78),y=n(4),x=n(9),_=n(25),b=n(33),M=n(45),w=n(49),T=n(152),A=n(26),E=n(13),S=n(47),C=A.f,O=E.f,P=T.f,R=r.Symbol,k=r.JSON,L=k&&k.stringify,D=d("_hidden"),j=d("toPrimitive"),N={}.propertyIsEnumerable,I=l("symbol-registry"),F=l("symbols"),z=l("op-symbols"),U=Object.prototype,G="function"==typeof R,B=r.QObject,V=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=w(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=C(U,e);r&&delete U[e],O(t,e,n),r&&t!==U&&O(U,e,r)}:O,H=function(t){var e=F[t]=w(R.prototype);return e._k=t,e},W=G&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},X=function(t,e,n){return t===U&&X(z,e,n),y(t),e=b(e,!0),y(n),i(F,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=w(n,{enumerable:M(0,!1)})):(i(t,D)||O(t,D,M(1,{})),t[D][e]=!0),q(t,e,n)):O(t,e,n)},K=function(t,e){y(t);for(var n,r=v(e=_(e)),i=0,o=r.length;o>i;)X(t,n=r[i++],e[n]);return t},Y=function(t){var e=N.call(this,t=b(t,!0));return!(this===U&&i(F,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,D)&&this[D][t])||e)},Q=function(t,e){if(t=_(t),e=b(e,!0),t!==U||!i(F,e)||i(z,e)){var n=C(t,e);return!n||!i(F,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=P(_(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==D||e==u||r.push(e);return r},$=function(t){for(var e,n=t===U,r=P(n?z:_(t)),o=[],a=0;r.length>a;)!i(F,e=r[a++])||n&&!i(U,e)||o.push(F[e]);return o};G||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(z,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),q(this,t,M(1,n))};return o&&V&&q(U,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",function(){return this._k}),A.f=Q,E.f=X,n(50).f=T.f=Z,n(67).f=Y,n(77).f=$,o&&!n(43)&&s(U,"propertyIsEnumerable",Y,!0),p.f=function(t){return H(d(t))}),a(a.G+a.W+a.F*!G,{Symbol:R});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)d(J[tt++]);for(var et=S(d.store),nt=0;et.length>nt;)m(et[nt++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(I,t+="")?I[t]:I[t]=R(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in I)if(I[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!G,"Object",{create:function(t,e){return void 0===e?w(t):K(w(t),e)},defineProperty:X,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),k&&a(a.S+a.F*(!G||c(function(){var t=R();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(x(e)||void 0!==t)&&!W(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,L.apply(k,r)}}),R.prototype[j]||n(20)(R.prototype,j,R.prototype.valueOf),h(R,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(47),i=n(77),o=n(67);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(49)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(12),"Object",{defineProperty:n(13).f})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(12),"Object",{defineProperties:n(151)})},function(t,e,n){var r=n(25),i=n(26).f;n(36)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(16),i=n(27);n(36)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(16),i=n(47);n(36)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(36)("getOwnPropertyNames",function(){return n(152).f})},function(t,e,n){var r=n(9),i=n(42).onFreeze;n(36)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(9),i=n(42).onFreeze;n(36)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(9),i=n(42).onFreeze;n(36)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(9);n(36)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(9);n(36)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(9);n(36)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(153)})},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(279)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(107).set})},function(t,e,n){"use strict";var r=n(68),i={};i[n(10)("toStringTag")]="z",i+""!="[object z]"&&n(21)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(154)})},function(t,e,n){var r=n(13).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(12)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(9),i=n(27),o=n(10)("hasInstance"),a=Function.prototype;o in a||n(13).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(0),i=n(156);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(0),i=n(157);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(7),i=n(24),o=n(30),a=n(109),s=n(33),u=n(8),c=n(50).f,l=n(26).f,h=n(13).f,f=n(58).trim,d=r.Number,p=d,m=d.prototype,v="Number"==o(n(49)(m)),g="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=g?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(v?u(function(){m.valueOf.call(n)}):"Number"!=o(n))?a(new p(y(e)),n,d):y(e)};for(var x,_=n(12)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;_.length>b;b++)i(p,x=_[b])&&!i(d,x)&&h(d,x,l(p,x));d.prototype=m,m.constructor=d,n(21)(r,"Number",d)}},function(t,e,n){"use strict";var r=n(0),i=n(35),o=n(158),a=n(110),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(8)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),m="",v="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*p(2,69,1))-69)<0?u*p(2,-e,1):u/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(p(10,r,1),0),r=e-1;r>=23;)f(1<<23),r-=23;f(1<<r),h(1,1),f(2),v=d()}else h(0,n),h(1<<-e,0),v=d()+a.call("0",c);return v=c>0?m+((s=v.length)<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c)):m+v}})},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(158),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(0),i=n(7).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(159)})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(159),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(157);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(0),i=n(156);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(0),i=n(160),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(0),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(111);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(0),i=n(112);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(161)})},function(t,e,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(8)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(160)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(111)})},function(t,e,n){var r=n(0),i=n(112),o=Math.exp;r(r.S+r.F*n(8)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0),i=n(112),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),i=n(48),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0),i=n(25),o=n(14);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(58)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(113)(!0);n(114)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(0),i=n(113)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(14),o=n(116),a="".endsWith;r(r.P+r.F*n(117)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(0),i=n(116);r(r.P+r.F*n(117)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(110)})},function(t,e,n){"use strict";var r=n(0),i=n(14),o=n(116),a="".startsWith;r(r.P+r.F*n(117)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(22)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(22)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(22)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(22)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(22)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(22)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(22)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(22)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(22)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(22)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(22)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(22)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(22)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(33);r(r.P+r.F*n(8)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0),i=n(341);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(8),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(21)(r,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,e,n){var r=n(10)("toPrimitive"),i=Date.prototype;r in i||n(20)(i,r,n(344))},function(t,e,n){"use strict";var r=n(4),i=n(33);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(78)})},function(t,e,n){"use strict";var r=n(29),i=n(0),o=n(16),a=n(162),s=n(118),u=n(14),c=n(119),l=n(120);i(i.S+i.F*!n(80)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(f);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(n=new d(e=u(f.length));e>g;g++)c(n,g,v?m(f[g],g):f[g]);else for(h=y.call(f),n=new d;!(i=h.next()).done;g++)c(n,g,v?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(0),i=n(119);r(r.S+r.F*n(8)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(25),o=[].join;r(r.P+r.F*(n(66)!=Object||!n(31)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),i=n(106),o=n(30),a=n(48),s=n(14),u=[].slice;r(r.P+r.F*n(8)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),h=new Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},function(t,e,n){"use strict";var r=n(0),i=n(17),o=n(16),a=n(8),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(31)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(37)(0),o=n(31)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(9),i=n(78),o=n(10)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),i=n(37)(1);r(r.P+r.F*!n(31)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(37)(2);r(r.P+r.F*!n(31)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(37)(3);r(r.P+r.F*!n(31)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(37)(4);r(r.P+r.F*!n(31)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(163);r(r.P+r.F*!n(31)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),i=n(163);r(r.P+r.F*!n(31)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(76)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(31)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(25),o=n(35),a=n(14),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(31)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(164)}),n(44)("copyWithin")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(122)}),n(44)("fill")},function(t,e,n){"use strict";var r=n(0),i=n(37)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(44)("find")},function(t,e,n){"use strict";var r=n(0),i=n(37)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(44)(o)},function(t,e,n){n(51)("Array")},function(t,e,n){var r=n(7),i=n(109),o=n(13).f,a=n(50).f,s=n(79),u=n(81),c=r.RegExp,l=c,h=c.prototype,f=/a/g,d=/a/g,p=new c(f)!==f;if(n(12)&&(!p||n(8)(function(){return d[n(10)("match")]=!1,c(f)!=f||c(d)==d||"/a/i"!=c(f,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var m=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=a(l),g=0;v.length>g;)m(v[g++]);h.constructor=c,c.prototype=h,n(21)(r,"RegExp",c)}n(51)("RegExp")},function(t,e,n){"use strict";n(166);var r=n(4),i=n(81),o=n(12),a=/./.toString,s=function(t){n(21)(RegExp.prototype,"toString",t,!0)};n(8)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(t,e,n){n(82)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(82)("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,n){n(82)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(82)("split",2,function(t,e,r){"use strict";var i=n(79),o=r,a=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,u,c,l,h,f=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,d+"g");for(s||(r=new RegExp("^"+v.source+"$(?!\\s)",d));(u=v.exec(n))&&!((c=u.index+u[0].length)>p&&(f.push(n.slice(p,u.index)),!s&&u.length>1&&u[0].replace(r,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(u[h]=void 0)}),u.length>1&&u.index<n.length&&a.apply(f,u.slice(1)),l=u[0].length,p=c,f.length>=m));)v.lastIndex===u.index&&v.lastIndex++;return p===n.length?!l&&v.test("")||f.push(""):f.push(n.slice(p)),f.length>m?f.slice(0,m):f}}else"0".split(void 0,0).length&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,n){"use strict";var r,i,o,a,s=n(43),u=n(7),c=n(29),l=n(68),h=n(0),f=n(9),d=n(17),p=n(52),m=n(53),v=n(83),g=n(124).set,y=n(125)(),x=n(126),_=n(167),b=n(84),M=n(168),w=u.TypeError,T=u.process,A=T&&T.versions,E=A&&A.v8||"",S=u.Promise,C="process"==l(T),O=function(){},P=i=x.f,R=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(O,O)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==E.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&N(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(w("Promise-chain cycle")):(o=k(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){g.call(u,function(){var e,n,r,i=t._v,o=j(t);if(o&&(e=_(function(){C?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||j(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){g.call(u,function(){var e;C?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=k(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(F,r,1),c(I,r,1))}catch(t){I.call(r,t)}}):(n._v=t,n._s=1,L(n,!1))}catch(t){I.call({_w:n,_d:!1},t)}}};R||(S=function(t){p(this,S,"Promise","_h"),d(t),r.call(this);try{t(c(F,this,1),c(I,this,1))}catch(t){I.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(54)(S.prototype,{then:function(t,e){var n=P(v(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(F,t,1),this.reject=c(I,t,1)},x.f=P=function(t){return t===S||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!R,{Promise:S}),n(57)(S,"Promise"),n(51)("Promise"),a=n(28).Promise,h(h.S+h.F*!R,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!R),"Promise",{resolve:function(t){return M(s&&this===a?S:this,t)}}),h(h.S+h.F*!(R&&n(80)(function(t){S.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=P(e),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;m(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,i=_(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(173),i=n(60);n(85)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(0),i=n(86),o=n(127),a=n(4),s=n(48),u=n(14),c=n(9),l=n(7).ArrayBuffer,h=n(83),f=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,m=f.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||c(t)&&v in t}}),r(r.P+r.U+r.F*n(8)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(h(this,f))(u(i-r)),c=new d(this),l=new d(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(51)("ArrayBuffer")},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(86).ABV,{DataView:n(127).DataView})},function(t,e,n){n(38)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(38)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(38)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(0),i=n(17),o=n(4),a=(n(7).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(8)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(0),i=n(49),o=n(17),a=n(4),s=n(9),u=n(8),c=n(154),l=(n(7).Reflect||{}).construct,h=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),f=!u(function(){l(function(){})});r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,n){var r=n(13),i=n(0),o=n(4),a=n(33);i(i.S+i.F*n(8)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(26).f,o=n(4);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(0),i=n(4),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(115)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var r=n(26),i=n(27),o=n(24),a=n(0),s=n(9),u=n(4);a(a.S,"Reflect",{get:function t(e,n){var a,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(a=r.f(e,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(e))?t(c,n,l):void 0}})},function(t,e,n){var r=n(26),i=n(0),o=n(4);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(27),o=n(4);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(4),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(175)})},function(t,e,n){var r=n(0),i=n(4),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(13),i=n(26),o=n(27),a=n(24),s=n(0),u=n(45),c=n(4),l=n(9);s(s.S,"Reflect",{set:function t(e,n,s){var h,f,d=arguments.length<4?e:arguments[3],p=i.f(c(e),n);if(!p){if(l(f=o(e)))return t(f,n,s,d);p=u(0)}if(a(p,"value")){if(!1===p.writable||!l(d))return!1;if(h=i.f(d,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,r.f(d,n,h)}else r.f(d,n,u(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(t,e,n){var r=n(0),i=n(107);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(0),i=n(76)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(44)("includes")},function(t,e,n){"use strict";var r=n(0),i=n(176),o=n(16),a=n(14),s=n(17),u=n(121);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(44)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(176),o=n(16),a=n(14),s=n(35),u=n(121);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(44)("flatten")},function(t,e,n){"use strict";var r=n(0),i=n(113)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(177),o=n(84);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(177),o=n(84);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(58)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(58)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(0),i=n(34),o=n(14),a=n(79),s=n(81),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(115)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(103)("asyncIterator")},function(t,e,n){n(103)("observable")},function(t,e,n){var r=n(0),i=n(175),o=n(25),a=n(26),s=n(119);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&s(l,e,n);return l}})},function(t,e,n){var r=n(0),i=n(178)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(178)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(17),a=n(13);n(12)&&r(r.P+n(87),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(17),a=n(13);n(12)&&r(r.P+n(87),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(33),a=n(27),s=n(26).f;n(12)&&r(r.P+n(87),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(33),a=n(27),s=n(26).f;n(12)&&r(r.P+n(87),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(179)("Map")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(179)("Set")})},function(t,e,n){n(88)("Map")},function(t,e,n){n(88)("Set")},function(t,e,n){n(88)("WeakMap")},function(t,e,n){n(88)("WeakSet")},function(t,e,n){n(89)("Map")},function(t,e,n){n(89)("Set")},function(t,e,n){n(89)("WeakMap")},function(t,e,n){n(89)("WeakSet")},function(t,e,n){var r=n(0);r(r.G,{global:n(7)})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(7)})},function(t,e,n){var r=n(0),i=n(30);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(0),i=n(181),o=n(161);r(r.S,"Math",{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(181)})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(0),i=n(28),o=n(7),a=n(83),s=n(168);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(0),i=n(126),o=n(167);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(39),i=n(4),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(39),i=n(4),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var r=n(39),i=n(4),o=n(27),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(171),i=n(180),o=n(39),a=n(4),s=n(27),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(39),i=n(4),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(39),i=n(4),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(39),i=n(4),o=n(27),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(39),i=n(4),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(39),i=n(4),o=n(17),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(0),i=n(125)(),o=n(7).process,a="process"==n(30)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(28),a=n(125)(),s=n(10)("observable"),u=n(17),c=n(4),l=n(52),h=n(54),f=n(20),d=n(53),p=d.RETURN,m=function(t){return null==t?void 0:u(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},y=function(t){g(t)||(t._o=void 0,v(t))},x=function(t,e){c(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&v(this)};x.prototype=h({},{unsubscribe:function(){y(this)}});var _=function(t){this._s=t};_.prototype=h({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=m(n.next);if(r)return r.call(n,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=m(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{v(e)}finally{throw t}}return v(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=m(n.complete);t=r?r.call(n,t):void 0}catch(t){try{v(e)}finally{throw t}}return v(e),t}}});var b=function(t){l(this,b,"Observable","_f")._f=u(t)};h(b.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),h(b,{from:function(t){var e="function"==typeof this?this:b,n=m(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(d(t,!1,function(t){if(e.next(t),n)return p})===p)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:b)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),f(b.prototype,s,function(){return this}),r(r.G,{Observable:b}),n(51)("Observable")},function(t,e,n){var r=n(7),i=n(0),o=n(84),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(0),i=n(124);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(123),i=n(47),o=n(21),a=n(7),s=n(20),u=n(59),c=n(10),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),m=0;m<p.length;m++){var v,g=p[m],y=d[g],x=a[g],_=x&&x.prototype;if(_&&(_[l]||s(_,l,f),_[h]||s(_,h,g),u[g]=f,y))for(v in r)_[v]||o(_,v,r[v],!0)}},function(t,e,n){(function(e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(R([])));y&&y!==r&&i.call(y,a)&&(v=y);var x=T.prototype=M.prototype=Object.create(v);w.prototype=x.constructor=T,T.constructor=w,T[u]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(x),t},l.awrap=function(t){return{__await:t}},A(E.prototype),E.prototype[s]=function(){return this},l.AsyncIterator=E,l.async=function(t,e,n,r){var i=new E(_(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},A(x),x[u]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:R(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(t,e,n,r){var i=e&&e.prototype instanceof M?e:M,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=b(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function M(){}function w(){}function T(){}function A(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(t){function n(e,r,o,a){var s=b(t[e],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}var r;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function i(){return new Promise(function(r,i){n(t,e,r,i)})}return r=r?r.then(i,i):i()}}function S(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,S(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=b(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:n,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n(101))},function(t,e,n){n(460),t.exports=n(28).RegExp.escape},function(t,e,n){var r=n(0),i=n(461)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";
/**
 * GeoJS
 * @copyright 2013-2018, Kitware, Inc.
 * @license Apache-2.0
 * @namespace geo
 */
/*
 * Bundled with the following libraries:
 *
 * vgl
 * @copyright 2014-2016, Kitware, Inc.
 * @license Apache-2.0
 *
 * Proj4js
 * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license MIT
 *
 * gl-matrix
 * @copyright 2015, Brandon Jones, Colin MacKenzie IV
 * @license MIT
 *
 * JQuery
 * @copyright jQuery Foundation and other contributors
 * @license MIT
 *
 * earcut
 * @copyright 2016, Mapbox
 * @license ISC
 *
 * kdbush
 * @copyright 2017, Vladimir Agafonkin
 * @license ISC
 */var r=n(3);n(463),t.exports=r.extend({annotation:n(182),annotationLayer:n(610),camera:n(140),choroplethFeature:n(243),contourFeature:n(245),domRenderer:n(613),event:n(15),feature:n(19),featureLayer:n(99),fetchQueue:n(246),fileReader:n(247),geo_action:n(130),graphFeature:n(248),heatmapFeature:n(249),imageTile:n(250),isolineFeature:n(146),geojsonReader:n(614),layer:n(73),lineFeature:n(72),map:n(615),mapInteractor:n(142),meshFeature:n(144),object:n(41),osmLayer:n(616),pathFeature:n(254),pointFeature:n(98),polygonFeature:n(141),quadFeature:n(63),pixelmapFeature:n(255),renderer:n(71),sceneObject:n(55),textFeature:n(74),tile:n(145),tileCache:n(253),tileLayer:n(252),timestamp:n(23),transform:n(18),typedef:n(617),vectorFeature:n(256),inherit:n(1),version:n(618),sha:n(619),util:n(5),jQuery:r,d3:n(620),gl:n(628),canvas:n(638),gui:n(647)},n(2)),window&&!window.$&&(window.$=r),window&&!window.jQuery&&(window.jQuery=r)},function(t,e,n){var r=n(464);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(129)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(128)(!1)).push([t.i,'.geojs-map {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.geojs-map .geo-attribution {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  padding-right: 5px;\n  cursor: auto;\n  font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n  z-index: 1001;\n  background: rgba(255,255,255,0.7);\n  clear: both;\n  display: block;\n  pointer-events: auto;\n}\n.geojs-map .geo-attribution .geo-attribution-layer {\n  padding-left: 5px;\n}\n.geojs-map .canvas-canvas {\n  display: block;\n  -webkit-transform-origin: 0px 0px;\n  -moz-transform-origin: 0px 0px;\n  -o-transform-origin: 0px 0px;\n  -ms-transform-origin: 0px 0px;\n  transform-origin: 0px 0px;\n}\n.geojs-map .webgl-canvas {\n  display: block;\n}\n.geojs-map .geojs-layer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  pointer-events: none;\n}\n.geojs-map .geojs-layer.active > * {\n  pointer-events: auto;\n}\n.geojs-map .geo-tile-layer {\n  -webkit-transform-origin: 0px 0px;\n  -moz-transform-origin: 0px 0px;\n  -o-transform-origin: 0px 0px;\n  -ms-transform-origin: 0px 0px;\n  transform-origin: 0px 0px;\n  line-height: 0;\n  font-size: 0;\n}\n.geojs-map.annotation-input {\n  cursor: crosshair;\n}\n.geojs-map.highlight-focus:after {\n  content: "";\n  display: block;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  border: 3px solid Highlight;\n  opacity: 1;\n  -ms-filter: none;\n  filter: none;\n  -webkit-transition: opacity 0s;\n  -moz-transition: opacity 0s;\n  -o-transition: opacity 0s;\n  -ms-transition: opacity 0s;\n  transition: opacity 0s;\n  visibility: hidden;\n}\n.geojs-map.highlight-focus:focus:after {\n  visibility: visible;\n  -webkit-transition: opacity 2.5s ease-in;\n  -moz-transition: opacity 2.5s ease-in;\n  -o-transition: opacity 2.5s ease-in;\n  -ms-transition: opacity 2.5s ease-in;\n  transition: opacity 2.5s ease-in;\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n}\n.geo-tile-container {\n  position: absolute;\n}\n.geo-tile-container.crop {\n  overflow: hidden;\n}\n',""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";var r=n(131),i=n(189),o=Object(r.a)("WGS84");function a(t,e,n){var r,o,a;return Array.isArray(n)?(r=Object(i.a)(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(o=Object(i.a)(t,e,n),2===(a=Object.keys(n)).length?o:(a.forEach(function(t){"x"!==t&&"y"!==t&&(o[t]=n[t])}),o))}function s(t){return t instanceof r.a?t:t.oProj?t.oProj:Object(r.a)(t)}e.a=function(t,e,n){t=s(t);var r,i=!1;return void 0===e?(e=t,t=o,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=o,i=!0),e=s(e),n?a(t,e,n):(r={forward:function(n){return a(t,e,n)},inverse:function(n){return a(e,t,n)}},i&&(r.oProj=e),r)}},function(t,e,n){"use strict";var r=n(184),i=n(186),o=n(185),a=n(90);var s=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var u=["3857","900913","3785","102113"];e.a=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in r.a}(t))return r.a[t];if(function(t){return s.some(function(e){return t.indexOf(e)>-1})}(t)){var e=Object(i.a)(t);if(function(t){var e=Object(a.a)(t,"authority");if(e){var n=Object(a.a)(e,"epsg");return n&&u.indexOf(n)>-1}}(e))return r.a["EPSG:3857"];var n=function(t){var e=Object(a.a)(t,"extension");if(e)return Object(a.a)(e,"proj4")}(e);return n?Object(o.a)(n):e}return function(t){return"+"===t[0]}(t)?Object(o.a)(t):void 0}},function(t,e,n){"use strict";e.a=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667}},function(t,e,n){"use strict";e.a={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},function(t,e,n){"use strict";e.a=function(t){return new c(t).output()};var r=1,i=/\s/,o=/[A-Za-z]/,a=/[A-Za-z84]/,s=/[,\]]/,u=/[\d\.E\-\+]/;function c(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=r}c.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;i.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case r:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},c.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(s.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},c.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=r)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=r,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},c.prototype.number=function(t){if(!u.test(t)){if(s.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},c.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},c.prototype.keyword=function(t){if(a.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=r)}if(!s.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},c.prototype.neutral=function(t){if(o.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(u.test(t))return this.word=t,void(this.state=3);if(!s.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},c.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)}},function(t,e,n){"use strict";function r(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,o=n.reduce(function(t,e){return i(e,t),t},r);e&&(t[e]=o)}function i(t,e){if(Array.isArray(t)){var n,o=t.shift();if("PARAMETER"===o&&(o=t.shift()),1===t.length)return Array.isArray(t[0])?(e[o]={},void i(t[0],e[o])):void(e[o]=t[0]);if(t.length)if("TOWGS84"!==o)switch(Array.isArray(o)||(e[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[o]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&i(t[2],e[o]));case"SPHEROID":case"ELLIPSOID":return e[o]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&i(t[3],e[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,o,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return i(t,e[o]);return r(e,o,t)}else e[o]=t;else e[o]=!0}else e[t]=!0}e.a=i},function(t,e,n){"use strict";e.a=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}},function(t,e,n){"use strict";var r=n(187),i=n(188),o=[r.default,i.default],a={},s=[];function u(t,e){var n=s.length;return t.names?(s[n]=t,t.names.forEach(function(t){a[t.toLowerCase()]=n}),this):(console.log(e),!0)}e.a={start:function(){o.forEach(u)},add:u,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==a[e]&&s[a[e]]?s[a[e]]:void 0}}},function(t,e,n){"use strict";e.a=function(t,e,n,i){var o=t*t,a=e*e,s=(o-a)/o,u=0;i?(t*=1-s*(r.m+s*(r.j+s*r.k)),o=t*t,s=0):u=Math.sqrt(s);return{es:s,e:u,ep2:(o-a)/a}},e.b=function(t,e,n,a,s){if(!t){var u=Object(o.a)(i.b,a);u||(u=i.a),t=u.a,e=u.b,n=u.rf}n&&!e&&(e=(1-1/n)*t);(0===n||Math.abs(t-e)<r.b)&&(s=!0,e=t);return{a:t,b:e,rf:n,sphere:s}};var r=n(6),i=n(476),o=n(90)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},i=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e,n,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?r.g:r.h,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=r.e),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=r.f,s.datum_params[3]*=r.l,s.datum_params[4]*=r.l,s.datum_params[5]*=r.l,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=i,s.es=o,s.ep2=a,s}},function(t,e,n){"use strict";var r=n(6),i=n(480);function o(t){return t===r.e||t===r.f}e.a=function(t,e,n){return Object(i.a)(t,e)?n:t.datum_type===r.g||e.datum_type===r.g?n:t.es!==e.es||t.a!==e.a||o(t.datum_type)||o(e.datum_type)?(n=Object(i.e)(n,t.es,t.a),o(t.datum_type)&&(n=Object(i.d)(n,t.datum_type,t.datum_params)),o(e.datum_type)&&(n=Object(i.b)(n,e.datum_type,e.datum_params)),Object(i.c)(n,e.es,e.a,e.b)):n}},function(t,e,n){"use strict";e.a=function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r.e?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r.f||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))},e.e=function(t,e,n){var i,o,a,s,u=t.x,c=t.y,l=t.z?t.z:0;if(c<-r.d&&c>-1.001*r.d)c=-r.d;else if(c>r.d&&c<1.001*r.d)c=r.d;else{if(c<-r.d)return{x:-1/0,y:-1/0,z:t.z};if(c>r.d)return{x:1/0,y:1/0,z:t.z}}u>Math.PI&&(u-=2*Math.PI);return o=Math.sin(c),s=Math.cos(c),a=o*o,{x:((i=n/Math.sqrt(1-e*a))+l)*s*Math.cos(u),y:(i+l)*s*Math.sin(u),z:(i*(1-e)+l)*o}},e.c=function(t,e,n,i){var o,a,s,u,c,l,h,f,d,p,m,v,g,y,x,_,b=t.x,M=t.y,w=t.z?t.z:0;if(o=Math.sqrt(b*b+M*M),a=Math.sqrt(b*b+M*M+w*w),o/n<1e-12){if(y=0,a/n<1e-12)return x=r.d,_=-i,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(M,b);s=w/a,u=o/a,c=1/Math.sqrt(1-e*(2-e)*u*u),f=u*(1-e)*c,d=s*c,g=0;do{g++,h=n/Math.sqrt(1-e*d*d),l=e*h/(h+(_=o*f+w*d-h*(1-e*d*d))),c=1/Math.sqrt(1-l*(2-l)*u*u),v=(m=s*c)*f-(p=u*(1-l)*c)*d,f=p,d=m}while(v*v>1e-24&&g<30);return x=Math.atan(m/Math.abs(p)),{x:y,y:x,z:_}},e.d=function(t,e,n){if(e===r.e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===r.f){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6];return{x:l*(t.x-c*t.y+u*t.z)+i,y:l*(c*t.x+t.y-s*t.z)+o,z:l*(-u*t.x+s*t.y+t.z)+a}}},e.b=function(t,e,n){if(e===r.e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===r.f){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=(t.x-i)/l,f=(t.y-o)/l,d=(t.z-a)/l;return{x:h+c*f-u*d,y:-c*h+f+s*d,z:u*h-s*f+d}}};var r=n(6)},function(t,e,n){"use strict";e.a=function(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=u,i="z"),t.axis[o]){case"e":c[i]=r;break;case"w":c[i]=-r;break;case"n":c[i]=r;break;case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c}},function(t,e,n){"use strict";function r(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}e.a=function(t){r(t.x),r(t.y)}},function(t,e,n){"use strict";var r=n(191);function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(t){return new i(Object(r.c)(t))},i.prototype.toMGRS=function(t){return Object(r.b)([this.x,this.y],t)},e.a=i},function(t,e,n){"use strict";var r=n(485);n.n(r);n.o(r,"version")&&n.d(e,"a",function(){return r.version})},function(t,e){t.exports={_args:[["proj4@2.5.0","."]],_from:"proj4@2.5.0",_id:"proj4@2.5.0",_inBundle:!1,_integrity:"sha512-XZTRT7OPdLzgvtTqL8DG2cEj8lYdovztOwiwpwRSYayOty5Ipf3H68dh/fiL+HKDEyetmQSMhkkMGiJoyziz3w==",_location:"/proj4",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"proj4@2.5.0",name:"proj4",escapedName:"proj4",rawSpec:"2.5.0",saveSpec:null,fetchSpec:"2.5.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.5.0.tgz",_spec:"2.5.0",_where:".",author:"",bugs:{url:"https://github.com/proj4js/proj4js/issues"},contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],dependencies:{mgrs:"1.0.0","wkt-parser":"^1.2.0"},description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",devDependencies:{chai:"~4.1.2","curl-amd":"github:cujojs/curl",grunt:"^1.0.1","grunt-cli":"~1.2.0","grunt-contrib-connect":"~1.0.2","grunt-contrib-jshint":"~1.1.0","grunt-contrib-uglify":"~3.1.0","grunt-mocha-phantomjs":"~4.0.0","grunt-rollup":"^6.0.0",istanbul:"~0.4.5",mocha:"~4.0.0",rollup:"^0.50.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.0",tin:"~0.5.0"},directories:{test:"test",doc:"docs"},homepage:"https://github.com/proj4js/proj4js#readme",license:"MIT",main:"dist/proj4-src.js",module:"lib/index.js",name:"proj4",repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},scripts:{build:"grunt","build:tmerc":"grunt build:tmerc",test:"npm run build && istanbul test _mocha test/test.js"},version:"2.5.0"}},function(t,e,n){"use strict";var r=n(192),i=n(133),o=n(197),a=n(198),s=n(200),u=n(201),c=n(202),l=n(203),h=n(204),f=n(205),d=n(206),p=n(207),m=n(208),v=n(209),g=n(210),y=n(211),x=n(212),_=n(213),b=n(214),M=n(215),w=n(216),T=n(217),A=n(218),E=n(219),S=n(220),C=n(221);e.a=function(t){t.Proj.projections.add(r.default),t.Proj.projections.add(i.default),t.Proj.projections.add(o.default),t.Proj.projections.add(a.default),t.Proj.projections.add(s.default),t.Proj.projections.add(u.default),t.Proj.projections.add(c.default),t.Proj.projections.add(l.default),t.Proj.projections.add(h.default),t.Proj.projections.add(f.default),t.Proj.projections.add(d.default),t.Proj.projections.add(p.default),t.Proj.projections.add(m.default),t.Proj.projections.add(v.default),t.Proj.projections.add(g.default),t.Proj.projections.add(y.default),t.Proj.projections.add(x.default),t.Proj.projections.add(_.default),t.Proj.projections.add(b.default),t.Proj.projections.add(M.default),t.Proj.projections.add(w.default),t.Proj.projections.add(T.default),t.Proj.projections.add(A.default),t.Proj.projections.add(E.default),t.Proj.projections.add(S.default),t.Proj.projections.add(C.default)}},function(t,e,n){"use strict";var r=n(195),i=n(488);e.a=function(t){var e=Math.abs(t);return e=Object(i.a)(e*(1+e/(Object(r.a)(1,e)+1))),t<0?-e:e}},function(t,e,n){"use strict";e.a=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}},function(t,e,n){"use strict";e.a=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}},function(t,e,n){"use strict";e.a=function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}},function(t,e,n){"use strict";var r=n(134),i=n(196);e.a=function(t,e,n){for(var o,a,s=Math.sin(e),u=Math.cos(e),c=Object(r.a)(n),l=Object(i.a)(n),h=2*u*l,f=-2*s*c,d=t.length-1,p=t[d],m=0,v=0,g=0;--d>=0;)o=v,a=m,p=h*(v=p)-o-f*(m=g)+t[d],g=f*v-a+h*m;return[(h=s*l)*p-(f=u*c)*g,h*g+f*p]}},function(t,e,n){"use strict";var r=n(11);e.a=function(t,e){if(void 0===t){if((t=Math.floor(30*(Object(r.a)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}},function(t,e,n){"use strict";e.a=function(t,e){return Math.pow((1-t)/(1+t),e)}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*r.d:r.d;for(var i,o,a,s,u=Math.asin(.5*e),c=0;c<30;c++)if(o=Math.sin(u),a=Math.cos(u),s=t*o,u+=i=Math.pow(1-s*s,2)/(2*a)*(e/(1-t*t)-o/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return u;return NaN}},function(t,e,n){var r={"./aea.js":207,"./aeqd.js":218,"./cass.js":205,"./cea.js":209,"./eqc.js":210,"./eqdc.js":216,"./equi.js":496,"./etmerc.js":133,"./gauss.js":199,"./gnom.js":208,"./gstmerc.js":497,"./krovak.js":204,"./laea.js":206,"./lcc.js":203,"./longlat.js":188,"./merc.js":187,"./mill.js":213,"./moll.js":215,"./nzmg.js":212,"./omerc.js":202,"./ortho.js":219,"./poly.js":211,"./qsc.js":220,"./robin.js":221,"./sinu.js":214,"./somerc.js":201,"./stere.js":200,"./sterea.js":198,"./tmerc.js":192,"./utm.js":197,"./vandg.js":217};function i(t){return n(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=495},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=i,e.forward=o,e.inverse=a,n.d(e,"names",function(){return s});var r=n(11);function i(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0}function o(t){var e=t.x,n=t.y,i=Object(r.a)(e-this.long0),o=this.x0+this.a*i*Math.cos(this.lat0),a=this.y0+this.a*n;return this.t1=o,this.t2=Math.cos(this.lat0),t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=t.y/this.a,n=Object(r.a)(this.long0+t.x/(this.a*Math.cos(this.lat0)));t.x=n,t.y=e}var s=["equi"];e.default={init:i,forward:o,inverse:a,names:s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=s,e.forward=u,e.inverse=c,n.d(e,"names",function(){return l});var r=n(498),i=n(134),o=n(196),a=n(499);function s(){var t=this.b/this.a;this.e=Math.sqrt(1-t*t),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),n=Math.asin(e/this.rs),i=Math.sin(n);this.cp=Object(r.a)(0,n,i)-this.rs*Object(r.a)(this.e,this.lat0,e),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e),this.xs=this.x0,this.ys=this.y0-this.n2*n,this.title||(this.title="Gauss Schreiber transverse mercator")}function u(t){var e=t.x,n=t.y,a=this.rs*(e-this.lc),s=this.cp+this.rs*Object(r.a)(this.e,n,Math.sin(n)),u=Math.asin(Math.sin(a)/Object(o.a)(s)),c=Object(r.a)(0,u,Math.sin(u));return t.x=this.xs+this.n2*c,t.y=this.ys+this.n2*Math.atan(Object(i.a)(s)/Math.cos(a)),t}function c(t){var e=t.x,n=t.y,s=Math.atan(Object(i.a)((e-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2)),u=Math.asin(Math.sin((n-this.ys)/this.n2)/Object(o.a)((e-this.xs)/this.n2)),c=Object(r.a)(0,u,Math.sin(u));return t.x=this.lc+s/this.rs,t.y=Object(a.a)(this.e,(c-this.cp)/this.rs),t}var l=["gstmerg"];e.default={init:s,forward:u,inverse:c,names:l}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e,n){if(Math.abs(e)>r.d)return Number.NaN;if(e===r.d)return Number.POSITIVE_INFINITY;if(e===-1*r.d)return Number.NEGATIVE_INFINITY;var i=t*n;return Math.log(Math.tan((r.d+e)/2))+t*Math.log((1-i)/(1+i))/2}},function(t,e,n){"use strict";var r=n(500);e.a=function(t,e){var n=Object(r.a)(1,e),i=0,o=0;do{i=n,o=t*Math.sin(i),n=Object(r.a)(Math.exp(t*Math.log((1+o)/(1-o))/2),e)}while(Math.abs(n-i)>1e-12);return n}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){return 2*Math.atan(t*Math.exp(e))-r.d}},function(t,e,n){"use strict";var r=function(t,e,n,r,i){var o,a=0;return"boolean"!=typeof e&&(i=r,r=n,n=e,e=void 0),"function"!=typeof r&&(i=r,r=function(){}),function(){var s=this,u=+new Date-a,c=arguments;function l(){a=+new Date,n.apply(s,c)}r.apply(s,c),i&&!o&&l(),o&&clearTimeout(o),void 0===i&&u>t?l():!0!==e&&(o=setTimeout(i?function(){o=void 0}:l,void 0===i?t-u:t))}};t.exports={throttle:r,debounce:function(t,e,n,i){return"boolean"!=typeof e&&(i=n,n=e,e=!1),r(t,!1,n,i=i||function(){},!!e)}}},function(t,e,n){"use strict";var r,i,o=n(3),a=n(40),s=n(238);t.exports={},t.exports.mockVGLRenderer=function(t){var e=n(40);if(void 0===t&&(t=!0),e._mocked)throw new Error("VGL renderer already mocked");var a={},u=function(t){a[t]=(a[t]||0)+1},c=function(t){return function(){u(t)}},l=0,h=function(t){return function(){return u(t),l+=1}},f={activeTexture:c("activeTexture"),attachShader:c("attachShader"),bindAttribLocation:c("bindAttribLocation"),bindBuffer:c("bindBuffer"),bindFramebuffer:c("bindFramebuffer"),bindTexture:c("bindTexture"),blendFuncSeparate:c("blendFuncSeparate"),bufferData:c("bufferData"),bufferSubData:c("bufferSubData"),checkFramebufferStatus:function(t){if(u("checkFramebufferStatus"),t===e.GL.FRAMEBUFFER)return e.GL.FRAMEBUFFER_COMPLETE},clear:c("clear"),clearColor:c("clearColor"),clearDepth:c("clearDepth"),compileShader:c("compileShader"),createBuffer:h("createBuffer"),createFramebuffer:c("createFramebuffer"),createProgram:h("createProgram"),createShader:h("createShader"),createTexture:h("createTexture"),deleteBuffer:c("deleteBuffer"),deleteProgram:c("deleteProgram"),deleteShader:c("deleteShader"),deleteTexture:c("deleteTexture"),depthFunc:c("depthFunc"),disable:c("disable"),disableVertexAttribArray:c("disableVertexAttribArray"),drawArrays:c("drawArrays"),enable:c("enable"),enableVertexAttribArray:c("enableVertexAttribArray"),finish:c("finish"),getExtension:h("getExtension"),getParameter:function(t){if(u("getParameter"),t===e.GL.DEPTH_BITS)return 16},getProgramParameter:function(t,n){if(u("getProgramParameter"),n===e.GL.LINK_STATUS)return!0},getShaderInfoLog:function(){return u("getShaderInfoLog"),"log"},getShaderParameter:function(t,n){if(u("getShaderParameter"),n===e.GL.COMPILE_STATUS)return!0},getUniformLocation:h("getUniformLocation"),isEnabled:function(t){if(u("isEnabled"),t===e.GL.BLEND)return!0},linkProgram:c("linkProgram"),pixelStorei:c("pixelStorei"),shaderSource:c("shaderSource"),texImage2D:c("texImage2D"),texParameteri:c("texParameteri"),uniform1iv:c("uniform1iv"),uniform1fv:c("uniform1fv"),uniform2fv:c("uniform2fv"),uniform3fv:c("uniform3fv"),uniform4fv:c("uniform4fv"),uniformMatrix3fv:c("uniformMatrix3fv"),uniformMatrix4fv:c("uniformMatrix4fv"),useProgram:c("useProgram"),vertexAttribPointer:c("vertexAttribPointer"),vertexAttrib3fv:c("vertexAttrib3fv"),viewport:c("viewport")};r=e.renderWindow;e.renderWindow=function t(){e.renderWindow=r;var n,i=new e.renderWindow;return e.renderWindow=t,i._setup=function(){var t,e=i.renderers(),r=i.windowSize(),a=i.windowPosition();for(n=o.extend({},f),t=0;t<e.length;t+=1)(e[t].width()>r[0]||0===e[t].width()||e[t].height()>r[1]||0===e[t].height())&&e[t].resize(a[0],a[1],r[0],r[1]);return!0},i.context=function(){return n},i},i=s.supported,s.supported=function(){return!!t},e._mocked=!0,e.mockCounts=function(){return a}},t.exports.restoreVGLRenderer=function(){a._mocked&&(a.renderWindow=r,s.supported=i,delete a._mocked,delete a.mockCounts)}},function(t,e,n){var r,i,o,a=n(138),s=n(223),u=n(139),c=n(3);i=this,o=function(){if(void 0===t)var t={};t.namespace=function(e){"use strict";var n,r=e.split("."),i=t;for("ogs"===r[0]&&(r=r.slice(1)),n=0;n<r.length;n+=1)void 0===i[r[n]]&&(i[r[n]]={}),i=i[r[n]];return i};var e=t.namespace("gl");window.vgl=e,e.inherit=function(t,e){"use strict";var n=inherit.func();n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},e.inherit.func=function(){"use strict";return function(){}},window.inherit=e.inherit,Object.size=function(t){"use strict";var e,n=0;for(e in t)t.hasOwnProperty(e)&&(n+=1);return n},Math.log2||(Math.log2=function(t){return Math.log(t)/Math.log(2)}),e.version="0.3.10",e.GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0};var n=0;e.timestamp=function(){"use strict";if(!(this instanceof e.timestamp))return new e.timestamp;var t=0;this.modified=function(){t=n+=1},this.getMTime=function(){return t}},e.object=function(){"use strict";if(!(this instanceof e.object))return new e.object;var t=e.timestamp();return t.modified(),this.modified=function(){t.modified()},this.getMTime=function(){return t.getMTime()},this},e.event=function(){"use strict";return this instanceof e.event?(e.object.call(this),this):new e.event},inherit(e.event,e.object),e.event.keyPress="vgl.event.keyPress",e.event.mousePress="vgl.event.mousePress",e.event.mouseRelease="vgl.event.mouseRelease",e.event.contextMenu="vgl.event.contextMenu",e.event.configure="vgl.event.configure",e.event.enable="vgl.event.enable",e.event.mouseWheel="vgl.event.mouseWheel",e.event.keyRelease="vgl.event.keyRelease",e.event.middleButtonPress="vgl.event.middleButtonPress",e.event.startInteraction="vgl.event.startInteraction",e.event.enter="vgl.event.enter",e.event.rightButtonPress="vgl.event.rightButtonPress",e.event.middleButtonRelease="vgl.event.middleButtonRelease",e.event.char="vgl.event.char",e.event.disable="vgl.event.disable",e.event.endInteraction="vgl.event.endInteraction",e.event.mouseMove="vgl.event.mouseMove",e.event.mouseOut="vgl.event.mouseOut",e.event.expose="vgl.event.expose",e.event.timer="vgl.event.timer",e.event.leftButtonPress="vgl.event.leftButtonPress",e.event.leave="vgl.event.leave",e.event.rightButtonRelease="vgl.event.rightButtonRelease",e.event.leftButtonRelease="vgl.event.leftButtonRelease",e.event.click="vgl.event.click",e.event.dblClick="vgl.event.dblClick",e.boundingObject=function(){"use strict";if(!(this instanceof e.boundingObject))return new e.boundingObject;e.object.call(this);var t=[0,0,0,0,0,0],n=e.timestamp(),r=e.timestamp();return n.modified(),r.modified(),this.bounds=function(){return t},this.hasValidBounds=function(t){return t[0]!==Number.MAX_VALUE&&t[1]!==-Number.MAX_VALUE&&t[2]!==Number.MAX_VALUE&&t[3]!==-Number.MAX_VALUE&&t[4]!==Number.MAX_VALUE&&t[5]!==-Number.MAX_VALUE},this.setBounds=function(e,r,i,o,a,s){if(this.hasValidBounds([e,r,i,o,a,s]))return t[0]=e,t[1]=r,t[2]=i,t[3]=o,t[4]=a,t[5]=s,this.modified(),n.modified(),!0},this.resetBounds=function(){t[0]=Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=Number.MAX_VALUE,t[3]=-Number.MAX_VALUE,t[4]=Number.MAX_VALUE,t[5]=-Number.MAX_VALUE,this.modified()},this.computeBounds=function(){},this.computeBoundsTimestamp=function(){return n},this.boundsDirtyTimestamp=function(){return r},this.resetBounds(),this},e.boundingObject.ReferenceFrame={Relative:0,Absolute:1},inherit(e.boundingObject,e.object),e.node=function(){"use strict";if(!(this instanceof e.node))return new e.node;e.boundingObject.call(this);var t=null,n=null,r=!0,i=!1;return this.accept=function(t){t.visit(this)},this.material=function(){return n},this.setMaterial=function(t){return t!==n&&(n=t,this.modified(),!0)},this.visible=function(){return r},this.setVisible=function(t){return t!==r&&(r=t,this.modified(),!0)},this.parent=function(){return t},this.setParent=function(e){return e!==t&&(null!==t&&t.removeChild(this),t=e,this.modified(),!0)},this.overlay=function(){return i},this.setOverlay=function(t){return i!==t&&(i=t,this.modified(),!0)},this.ascend=function(t){t=t},this.traverse=function(t){t=t},this.boundsModified=function(){this.boundsDirtyTimestamp().modified(),null!==t&&t.boundsModified()},this},inherit(e.node,e.boundingObject),e.groupNode=function(){"use strict";if(!(this instanceof e.groupNode))return new e.groupNode;e.node.call(this);var t=[];return this.b_setVisible=this.setVisible,this.setVisible=function(e){var n;if(!0!==this.b_setVisible(e))return!1;for(n=0;n<t.length;n+=1)t[n].setVisible(e);return!0},this.addChild=function(n){return n instanceof e.node&&(-1===t.indexOf(n)&&(n.setParent(this),t.push(n),this.boundsDirtyTimestamp().modified(),!0))},this.removeChild=function(e){if(e.parent()===this){var n=t.indexOf(e);if(n>=0)return t.splice(n,1),e.setParent(null),this.boundsDirtyTimestamp().modified(),!0}},this.removeChildren=function(){for(;t.length;)this.removeChild(t[0]);this.modified()},this.children=function(){return t},this.hasChild=function(e){var n=0,r=!1;for(n=0;n<t.length;n+=1)if(t[n]===e){r=!0;break}return r},this.accept=function(t){t.visit(this)},this.traverse=function(t){switch(t.type()){case t.UpdateVisitor:this.traverseChildrenAndUpdateBounds(t);break;case t.CullVisitor:this.traverseChildren(t)}},this.traverseChildrenAndUpdateBounds=function(e){var n;if(this.parent()&&this.boundsDirtyTimestamp().getMTime()>this.computeBoundsTimestamp().getMTime()&&this.parent().boundsDirtyTimestamp().modified(),this.computeBounds(),e.mode()===e.TraverseAllChildren)for(n=0;n<t.length;n+=1)t[n].accept(e),this.updateBounds(t[n]);this.computeBoundsTimestamp().modified()},this.traverseChildren=function(e){var n;if(e.mode()===e.TraverseAllChildren)for(n=0;n<t.length;n+=1)t[n].accept(e)},this.computeBounds=function(){var e=0;if(!(this.computeBoundsTimestamp().getMTime()>this.boundsDirtyTimestamp().getMTime()))for(e=0;e<t.length;e+=1)this.updateBounds(t[e])},this.updateBounds=function(t){if(!t.overlay()){t.computeBounds();var e,n=this.bounds(),r=t.bounds(),i=0,o=0;for(e=0;e<3;e+=1)o=2*e+1,r[i=2*e]<n[i]&&(n[i]=r[i]),r[o]>n[o]&&(n[o]=r[o]);this.setBounds(n[0],n[1],n[2],n[3],n[4],n[5])}},this},inherit(e.groupNode,e.node),e.actor=function(){"use strict";if(!(this instanceof e.actor))return new e.actor;e.node.call(this);var t=this,n=a.create(),r=e.boundingObject.ReferenceFrame.Relative,i=null;return this.matrix=function(){return n},this.setMatrix=function(e){e!==n&&(n=e,t.modified())},this.referenceFrame=function(){return r},this.setReferenceFrame=function(e){return e!==r&&(r=e,t.modified(),!0)},this.mapper=function(){return i},this.setMapper=function(e){e!==i&&(i=e,t.boundsModified())},this.accept=function(t){t=t},this.ascend=function(t){t=t},this.computeLocalToWorldMatrix=function(t,e){t=t,e=e},this.computeWorldToLocalMatrix=function(t,e){t=t,e=e},this.computeBounds=function(){if(null!==i&&void 0!==i){var e,r,o,a,s=t.computeBoundsTimestamp();(t.boundsDirtyTimestamp().getMTime()>s.getMTime()||i.boundsDirtyTimestamp().getMTime()>s.getMTime())&&(i.computeBounds(),r=[(e=i.bounds())[0],e[2],e[4]],o=[e[1],e[3],e[5]],u.transformMat4(r,r,n),u.transformMat4(o,o,n),a=[r[0]>o[0]?o[0]:r[0],r[0]>o[0]?r[0]:o[0],r[1]>o[1]?o[1]:r[1],r[1]>o[1]?r[1]:o[1],r[2]>o[2]?o[2]:r[2],r[2]>o[2]?r[2]:o[2]],t.setBounds(a[0],a[1],a[2],a[3],a[4],a[5]),s.modified())}else t.resetBounds()},t},inherit(e.actor,e.node),e.freezeObject=function(t){"use strict";var e=Object.freeze?Object.freeze(t):void 0;return void 0===e?t:e},e.defaultValue=function(t,e){"use strict";return void 0!==t?t:e},e.defaultValue.EMPTY_OBJECT=e.freezeObject({}),e.graphicsObject=function(t){"use strict";if(t=t,!(this instanceof e.graphicsObject))return new e.graphicsObject;e.object.call(this);var n=this;return this._setup=function(t){return t=t,!1},this._cleanup=function(t){return t=t,!1},this.bind=function(t){return t=t,!1},this.undoBind=function(t){return t=t,!1},this.render=function(t){return t=t,!1},this.remove=function(t){n._cleanup(t)},n},inherit(e.graphicsObject,e.object),e.geojsonReader=function(){"use strict";return this instanceof e.geojsonReader?(this.readScalars=function(t,n,r,i){var o=null,a=null,s=null,u=null,c=null;"values"===this.m_scalarFormat&&4===t.length?(a=t[3],(o=n.sourceData(e.vertexAttributeKeys.Scalar))||(o=new e.sourceDataSf,this.m_scalarRange&&o.setScalarRange(this.m_scalarRange[0],this.m_scalarRange[1]),void 0!==r&&(o.data().length=r),n.addSource(o)),void 0===r?o.pushBack(a):o.insertAt(i,a)):"rgb"===this.m_scalarFormat&&6===t.length&&((o=n.sourceData(e.vertexAttributeKeys.Color))||(o=new e.sourceDataC3fv,void 0!==r&&(o.length=3*r),n.addSource(o)),s=t[3],u=t[4],c=t[5],void 0===r?o.pushBack([s,u,c]):o.insertAt(i,[s,u,c]))},this.readPoint=function(t){var n=new e.geometryData,r=new e.points,i=new e.sourceDataP3fv,o=new Uint16Array(1),a=null,s=null,u=null,c=null;for(n.addSource(i),c=0;c<1;c+=1)o[c]=c,a=t[0],s=t[1],u=0,t.length>2&&(u=t[2]),i.pushBack([a,s,u]),this.readScalars(t,n);return r.setIndices(o),n.addPrimitive(r),n.setName("aPoint"),n},this.readMultiPoint=function(t){var n,r=new e.geometryData,i=new e.points,o=new e.sourceDataP3fv,a=new Uint16Array(t.length),s=0,u=t.length,c=null,l=null,h=null;for(o.data().length=3*u,n=0;n<t.length;n+=1)a[n]=n,c=t[n][0],l=t[n][1],h=0,t[n].length>2&&(h=t[n][2]),o.insertAt(s,[c,l,h]),this.readScalars(t[n],r,u,s),s+=1;return i.setIndices(a),r.addPrimitive(i),r.addSource(o),r.setName("manyPoints"),r},this.readLineString=function(t){var n=new e.geometryData,r=new e.lineStrip,i=new e.sourceDataP3fv,o=[],a=null,s=null,u=null,c=null;for(r.setIndicesPerPrimitive(t.length),a=0;a<t.length;a+=1)o.push(a),s=t[a][0],u=t[a][1],c=0,t[a].length>2&&(c=t[a][2]),i.pushBack([s,u,c]),this.readScalars(t[a],n);return r.setIndices(o),n.addPrimitive(r),n.addSource(i),n.setName("aLineString"),n},this.readMultiLineString=function(t){var n=new e.geometryData,r=new e.sourceDataP3fv,i=0,o=2*t.length,a=null,s=null,u=null,c=null,l=null,h=null,f=null,d=null;for(r.data().length=3*o,s=0;s<t.length;s+=1){for(h=[],f=new e.lineStrip,d=t[s].length,f.setIndicesPerPrimitive(d),a=0;a<d;a+=1)h.push(i),u=t[s][a][0],c=t[s][a][1],l=0,t[s][a].length>2&&(l=t[s][a][2]),r.insertAt(i,[u,c,l]),this.readScalars(t[s][a],n,2*o,i),i+=1;f.setIndices(h),n.addPrimitive(f)}return n.setName("aMultiLineString"),n.addSource(r),n},this.readPolygon=function(t){var n=new e.geometryData,r=new e.sourceDataP3fv,i=null,o=null,a=null,s=t[0].length,u=1,c=null,l=null,h=null;for(c=0;c<s;c+=1)i=t[0][c][0],o=t[0][c][1],a=0,t[0][c].length>2&&(a=t[0][c][2]),r.pushBack([i,o,a]),this.readScalars(t[0][c],n),c>1&&(l=new Uint16Array([0,u,c]),(h=new e.triangles).setIndices(l),n.addPrimitive(h),u=c);return n.setName("POLY"),n.addSource(r),n},this.readMultiPolygon=function(t){var n=new e.geometryData,r=new e.sourceDataP3fv,i=0,o=t.length,a=0,s=3*o,u=new e.triangles,c=[],l=null,h=null,f=null,d=null,p=null,m=null,v=null,g=null,y=null,x=!1,_=0;for(r.data().length=3*o,h=0;h<o;h+=1)for(m=t[h][0].length,v=i,g=i+1,y=[!1,!1,!1],l=0;l<m;l+=1)f=t[h][0][l][0],d=t[h][0][l][1],p=0,t[h][0][l].length>2&&(p=t[h][0][l][2]),x=!1,f>180&&(x=!0,f-=360),0===l?y[0]=x:y[1+(l-1)%2]=x,r.insertAt(a,[f,d,p]),this.readScalars(t[h][0][l],n,s,a),a+=1,l>1&&(y[0]===y[1]&&y[1]===y[2]&&(c[3*_+0]=v,c[3*_+1]=g,c[3*_+2]=i,_+=1),g=i),i+=1;return u.setIndices(c),n.addPrimitive(u),n.setName("aMultiPoly"),n.addSource(r),n},this.readGJObjectInt=function(t){if(!t.hasOwnProperty("type"))return null;t.properties&&t.properties.ScalarFormat&&"values"===t.properties.ScalarFormat&&(this.m_scalarFormat="values",t.properties.ScalarRange&&(this.m_scalarRange=t.properties.ScalarRange)),t.properties&&t.properties.ScalarFormat&&"rgb"===t.properties.ScalarFormat&&(this.m_scalarFormat="rgb");var e,n=t.type,r=null,i=null,o=null;switch(n){case"Point":e=this.readPoint(t.coordinates);break;case"MultiPoint":e=this.readMultiPoint(t.coordinates);break;case"LineString":e=this.readLineString(t.coordinates);break;case"MultiLineString":e=this.readMultiLineString(t.coordinates);break;case"Polygon":e=this.readPolygon(t.coordinates);break;case"MultiPolygon":e=this.readMultiPolygon(t.coordinates);break;case"GeometryCollection":for(i=[],o=0;o<t.geometries.length;o+=1)r=this.readGJObject(t.geometries[o]),i.push(r);e=i;break;case"Feature":e=r=this.readGJObject(t.geometry);break;case"FeatureCollection":for(i=[],o=0;o<t.features.length;o+=1)r=this.readGJObject(t.features[o]),i.push(r);e=i;break;default:console.log("Don't understand type "+n),e=null}return e},this.readGJObject=function(t){return this.readGJObjectInt(t)},this.linearizeGeoms=function(t,e){var n=null;if("[object Array]"===Object.prototype.toString.call(e))for(n=0;n<e.length;n+=1)this.linearizeGeoms(t,e[n]);else t.push(e)},this.readGeomObject=function(t){var e,n=[];return e=this.readGJObject(t),this.linearizeGeoms(n,e),n},this.getPrimitives=function(t){if(!t)return[];var e=JSON.parse(t),n=this.readGJObject(e),r=[];return this.m_scalarFormat="none",this.m_scalarRange=null,this.linearizeGeoms(r,n),{geoms:r,scalarFormat:this.m_scalarFormat,scalarRange:this.m_scalarRange}},this):new e.geojsonReader},e.data=function(){"use strict";if(!(this instanceof e.data))return new e.data;this.type=function(){}},e.data.raster=0,e.data.point=1,e.data.lineString=2,e.data.polygon=3,e.data.geometry=10,e.primitive=function(){"use strict";if(!(this instanceof e.primitive))return new e.primitive;var t=0,n=0,r=0,i=null;return this.indices=function(){return i},this.createIndices=function(t){i=new Uint16Array},this.numberOfIndices=function(){return i.length},this.sizeInBytes=function(){return i.length*Uint16Array.BYTES_PER_ELEMENT},this.primitiveType=function(){return n},this.setPrimitiveType=function(t){n=t},this.indicesPerPrimitive=function(){return t},this.setIndicesPerPrimitive=function(e){t=e},this.indicesValueType=function(){return r},this.setIndicesValueType=function(t){r=t},this.setIndices=function(t){i=new Uint16Array(t)},this},e.triangleStrip=function(){"use strict";return this instanceof e.triangleStrip?(e.primitive.call(this),this.setPrimitiveType(e.GL.TRIANGLE_STRIP),this.setIndicesValueType(e.GL.UNSIGNED_SHORT),this.setIndicesPerPrimitive(3),this):new e.triangleStrip},inherit(e.triangleStrip,e.primitive),e.triangles=function(){"use strict";return this instanceof e.triangles?(e.primitive.call(this),this.setPrimitiveType(e.GL.TRIANGLES),this.setIndicesValueType(e.GL.UNSIGNED_SHORT),this.setIndicesPerPrimitive(3),this):new e.triangles},inherit(e.triangles,e.primitive),e.lines=function(){"use strict";return this instanceof e.lines?(e.primitive.call(this),this.setPrimitiveType(e.GL.LINES),this.setIndicesValueType(e.GL.UNSIGNED_SHORT),this.setIndicesPerPrimitive(2),this):new e.lines},inherit(e.lines,e.primitive),e.lineStrip=function(){"use strict";return this instanceof e.lineStrip?(e.primitive.call(this),this.setPrimitiveType(e.GL.LINE_STRIP),this.setIndicesValueType(e.GL.UNSIGNED_SHORT),this.setIndicesPerPrimitive(2),this):new e.lineStrip},inherit(e.lineStrip,e.primitive),e.points=function(){"use strict";return this instanceof e.points?(e.primitive.call(this),this.setPrimitiveType(e.GL.POINTS),this.setIndicesValueType(e.GL.UNSIGNED_SHORT),this.setIndicesPerPrimitive(1),this):new e.points},inherit(e.points,e.primitive),e.vertexDataP3f=function(){"use strict";return this instanceof e.vertexDataP3f?(this.m_position=[],this):new e.vertexDataP3f},e.vertexDataP3N3f=function(){"use strict";return this instanceof e.vertexDataP3N3f?(this.m_position=[],this.m_normal=[],this):new e.vertexDataP3N3f},e.vertexDataP3T3f=function(){"use strict";return this instanceof e.vertexDataP3T3f?(this.m_position=[],this.m_texCoordinate=[],this):new e.vertexDataP3T3f},e.sourceData=function(t){"use strict";if(!(this instanceof e.sourceData))return new e.sourceData(t);var n={},r=[],i=(t=t||{}).name||"Source "+(new Date).toISOString();return this.data=function(){return r},this.getData=function(){return this.data()},this.dataToFloat32Array=function(){return r instanceof Float32Array||(r=new Float32Array(r)),r},this.setData=function(t){t instanceof Array||t instanceof Float32Array?r=t instanceof Float32Array?t:t.slice(0):console.log("[error] Requires array")},this.addAttribute=function(t,e,r,i,o,a,s){if(!n.hasOwnProperty(t)){var u=new function(){this.m_numberOfComponents=0,this.m_dataType=0,this.m_dataTypeSize=0,this.m_normalized=!1,this.m_stride=0,this.m_offset=0};u.m_dataType=e,u.m_dataTypeSize=r,u.m_offset=i,u.m_stride=o,u.m_numberOfComponents=a,u.m_normalized=s,n[t]=u}},this.sizeOfArray=function(){return Object.size(r)},this.lengthOfArray=function(){return r.length},this.sizeInBytes=function(){var t,e=0,n=this.keys();for(t=0;t<n.length;t+=1)e+=this.attributeNumberOfComponents(n[t])*this.sizeOfAttributeDataType(n[t]);return e*=this.sizeOfArray()},this.hasKey=function(t){return n.hasOwnProperty(t)},this.keys=function(){return Object.keys(n)},this.numberOfAttributes=function(){return Object.size(n)},this.attributeNumberOfComponents=function(t){return n.hasOwnProperty(t)?n[t].m_numberOfComponents:0},this.normalized=function(t){return!!n.hasOwnProperty(t)&&n[t].m_normalized},this.sizeOfAttributeDataType=function(t){return n.hasOwnProperty(t)?n[t].m_dataTypeSize:0},this.attributeDataType=function(t){if(n.hasOwnProperty(t))return n[t].m_dataType},this.attributeOffset=function(t){return n.hasOwnProperty(t)?n[t].m_offset:0},this.attributeStride=function(t){return n.hasOwnProperty(t)?n[t].m_stride:0},this.pushBack=function(t){},this.insert=function(t){var e;if(!r.length&&t.length&&t instanceof Float32Array)r=t;else if(r.slice||!r.length&&t.slice||(r=Array.prototype.slice.call(r)),t.length)if(!r.length&&t.slice)r=t.slice(0);else for(e=0;e<t.length;e+=1)r[r.length]=t[e];else r[r.length]=t},this.insertAt=function(t,e){var n;if(e.length)for(n=0;n<e.length;n+=1)r[t*e.length+n]=e[n];else r[t]=e},this.name=function(){return i},this.setName=function(t){i=t},this},e.sourceDataAnyfv=function(t,n,r){"use strict";return this instanceof e.sourceDataAnyfv?(e.sourceData.call(this,r),this.addAttribute(n,e.GL.FLOAT,4,0,4*t,t,!1),this.pushBack=function(t){this.insert(t)},this):new e.sourceDataAnyfv(t,n,r)},inherit(e.sourceDataAnyfv,e.sourceData),e.sourceDataP3T3f=function(t){"use strict";return this instanceof e.sourceDataP3T3f?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Position,e.GL.FLOAT,4,0,24,3,!1),this.addAttribute(e.vertexAttributeKeys.TextureCoordinate,e.GL.FLOAT,4,12,24,3,!1),this.pushBack=function(t){this.insert(t.m_position),this.insert(t.m_texCoordinate)},this):new e.sourceDataP3T3f(t)},inherit(e.sourceDataP3T3f,e.sourceData),e.sourceDataP3N3f=function(t){"use strict";return this instanceof e.sourceDataP3N3f?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Position,e.GL.FLOAT,4,0,24,3,!1),this.addAttribute(e.vertexAttributeKeys.Normal,e.GL.FLOAT,4,12,24,3,!1),this.pushBack=function(t){this.insert(t.m_position),this.insert(t.m_normal)},this):new e.sourceDataP3N3f(t)},inherit(e.sourceDataP3N3f,e.sourceData),e.sourceDataP3fv=function(t){"use strict";return this instanceof e.sourceDataP3fv?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Position,e.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(t){this.insert(t)},this):new e.sourceDataP3fv(t)},inherit(e.sourceDataP3fv,e.sourceData),e.sourceDataT2fv=function(t){"use strict";return this instanceof e.sourceDataT2fv?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.TextureCoordinate,e.GL.FLOAT,4,0,8,2,!1),this.pushBack=function(t){this.insert(t)},this):new e.sourceDataT2fv(t)},inherit(e.sourceDataT2fv,e.sourceData),e.sourceDataC3fv=function(t){"use strict";return this instanceof e.sourceDataC3fv?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Color,e.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(t){this.insert(t)},this):new e.sourceDataC3fv(t)},inherit(e.sourceDataC3fv,e.sourceData),e.sourceDataSf=function(t){"use strict";if(!(this instanceof e.sourceDataSf))return new e.sourceDataSf(t);var n=null,r=null,i=null,o=null;return e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Scalar,e.GL.FLOAT,4,0,4,1,!1),this.pushBack=function(t){(null===r||t>r)&&(r=t),(null===n||t<n)&&(n=t),this.data()[this.data().length]=t},this.insertAt=function(t,e){(null===r||e>r)&&(r=e),(null===n||e<n)&&(n=e),this.data()[t]=e},this.scalarRange=function(){return null===i||null===o?[n,r]:[i,o]},this.setScalarRange=function(t,e){i=t,o=e},this},inherit(e.sourceDataSf,e.sourceData),e.sourceDataDf=function(t){"use strict";return this instanceof e.sourceDataDf?(e.sourceData.call(this,t),this.addAttribute(e.vertexAttributeKeys.Scalar,e.GL.FLOAT,4,0,4,1,!1),this.pushBack=function(t){this.data()[this.data().length]=t},this.insertAt=function(t,e){this.data()[t]=e},this):new e.sourceDataDf(t)},inherit(e.sourceDataDf,e.sourceData),e.geometryData=function(){"use strict";if(!(this instanceof e.geometryData))return new e.geometryData;e.data.call(this);var t="",n=[],r=[],i=[0,0,0,0,0,0],o=e.timestamp(),a=e.timestamp();return this.type=function(){return e.data.geometry},this.name=function(){return t},this.setName=function(e){t=e},this.addSource=function(t,n){return void 0!==n&&t.setName(n),-1===r.indexOf(t)&&(r.push(t),t.hasKey(e.vertexAttributeKeys.Position)&&a.modified(),!0)},this.source=function(t){return t<r.length?r[t]:0},this.sourceByName=function(t){for(var e=0;e<r.length;e+=1)if(r[e].name()===t)return r[e];return 0},this.numberOfSources=function(){return r.length},this.sourceData=function(t){var e;for(e=0;e<r.length;e+=1)if(r[e].hasKey(t))return r[e];return null},this.addPrimitive=function(t){return n.push(t),!0},this.primitive=function(t){return t<n.length?n[t]:null},this.numberOfPrimitives=function(){return n.length},this.bounds=function(){return a.getMTime()>o.getMTime()&&this.computeBounds(),i},this.boundsDirty=function(t){return t&&a.modified(),a.getMTime()>o.getMTime()},this.resetBounds=function(){i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=0},this.setBounds=function(t,e,n,r,a,s){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=a,i[5]=s,o.modified(),!0},this.computeBounds=function(){if(a.getMTime()>o.getMTime()){var t,n,r,s,u,c,l=e.vertexAttributeKeys.Position,h=this.sourceData(l),f=h.data(),d=h.attributeNumberOfComponents(l),p=h.attributeStride(l),m=h.attributeOffset(l),v=h.sizeOfAttributeDataType(l),g=f.length,y=null;for(p/=v,m/=v,this.resetBounds(),t=0;t<d;t+=1){for(n=2*t,r=2*t+1,s=u=g?i[r]=f[m+t]:0,c=m+p+t;c<g;c+=p)(y=f[c])>s&&(s=y),y<u&&(u=y);i[n]=u,i[r]=s}o.modified()}},this.findClosestVertex=function(t){var n,r,i,o,a,s,u,c=e.vertexAttributeKeys.Position,l=this.sourceData(c),h=l.sizeOfAttributeDataType(c),f=l.attributeNumberOfComponents(c),d=l.data(),p=l.attributeStride(c)/h,m=l.attributeOffset(c)/h,v=Number.MAX_VALUE,g=null;for(3!==f&&console.log("[warning] Find closest vertex assumes threecomponent vertex "),t.z||(t={x:t.x,y:t.y,z:0}),n=m,u=0;n<d.length;n+=p,u+=1)i=(r=[d[n],d[n+1],d[n+2]])[0]-t.x,o=r[1]-t.y,a=r[2]-t.z,(s=Math.sqrt(i*i+o*o+a*a))<v&&(v=s,g=u);return g},this.getPosition=function(t){var n=e.vertexAttributeKeys.Position,r=this.sourceData(n),i=r.sizeOfAttributeDataType(n),o=r.attributeNumberOfComponents(n),a=r.data(),s=r.attributeStride(n)/i,u=r.attributeOffset(n)/i;return 3!==o&&console.log("[warning] getPosition assumes three component data"),[a[u+t*s],a[u+t*s+1],a[u+t*s+2]]},this.getScalar=function(t){var n,r,i,o,a=e.vertexAttributeKeys.Scalar,s=this.sourceData(a);return s?(n=s.sizeOfAttributeDataType(a),r=s.data(),t*(i=s.attributeStride(a)/n)+(o=s.attributeOffset(a)/n)>=r.length&&console.log("access out of bounds in getScalar"),r[t*i+o]):null},this},inherit(e.geometryData,e.data),e.mapper=function(t){"use strict";if(!(this instanceof e.mapper))return new e.mapper(t);e.boundingObject.call(this);var n=[0,1,1],r=null,i=[],o={},a=void 0!==(t=t||{}).dynamicDraw&&t.dynamicDraw,s=e.timestamp(),u=null,c=this;function l(t){c.deleteVertexBufferObjects(t),o={},i=[],function(t){if(r){t&&(u=t.m_context);var n,c,l,h,f,d,p,m=r.numberOfSources(),v=null;for(n=0;n<m;n+=1){for(v=u.createBuffer(),u.bindBuffer(e.GL.ARRAY_BUFFER,v),(p=r.source(n).data())instanceof Float32Array||(p=new Float32Array(p)),u.bufferData(e.GL.ARRAY_BUFFER,p,a?e.GL.DYNAMIC_DRAW:e.GL.STATIC_DRAW),h=r.source(n).keys(),f=[],c=0;c<h.length;c+=1)f.push(h[c]);o[n]=f,i[n]=v}for(d=r.numberOfPrimitives(),l=0;l<d;l+=1)v=u.createBuffer(),u.bindBuffer(e.GL.ARRAY_BUFFER,v),u.bufferData(e.GL.ARRAY_BUFFER,r.primitive(l).indices(),e.GL.STATIC_DRAW),i[n]=v,n+=1;s.modified()}}(t)}return this.deleteVertexBufferObjects=function(t){var e,n=u;if(t&&(n=t.m_context),n)for(e=0;e<i.length;e+=1)n.deleteBuffer(i[e])},this.computeBounds=function(){if(null!==r&&void 0!==r){var t=this.computeBoundsTimestamp(),e=null;this.boundsDirtyTimestamp().getMTime()>t.getMTime()&&(e=r.bounds(),this.setBounds(e[0],e[1],e[2],e[3],e[4],e[5]),t.modified())}else this.resetBounds()},this.color=function(){return n},this.setColor=function(t,e,r){n[0]=t,n[1]=e,n[2]=r,this.modified()},this.geometryData=function(){return r},this.setGeometryData=function(t){r!==t&&(r=t,this.modified(),this.boundsDirtyTimestamp().modified())},this.updateSourceBuffer=function(t,n,o){if(o&&(u=o.m_context),!u)return!1;for(var a=-1,s=0;s<r.numberOfSources();s+=1)if(r.source(s).name()===t){a=s;break}return!(a<0||a>=i.length)&&(n||(n=r.source(s).dataToFloat32Array()),u.bindBuffer(e.GL.ARRAY_BUFFER,i[a]),n instanceof Float32Array?u.bufferSubData(e.GL.ARRAY_BUFFER,0,n):u.bufferSubData(e.GL.ARRAY_BUFFER,0,new Float32Array(n)),!0)},this.getSourceBuffer=function(t){var e=r.sourceByName(t);return e?e.dataToFloat32Array():new Float32Array},this.render=function(t,n){(this.getMTime()>s.getMTime()||t.m_contextChanged)&&l(t),(u=t.m_context).vertexAttrib3fv(e.vertexAttributeKeys.Color,this.color());var a,c,h=0,f=0,d=null;for(a in o)if(o.hasOwnProperty(a)){for(u.bindBuffer(e.GL.ARRAY_BUFFER,i[h]),f=0;f<o[a].length;f+=1)t.m_material.bindVertexData(t,o[a][f]);h+=1}for(c=r.numberOfPrimitives(),f=0;f<c;f+=1,h+=1)if((d=r.primitive(f)).numberOfIndices()){switch(u.bindBuffer(e.GL.ARRAY_BUFFER,i[h]),d.primitiveType()){case e.GL.POINTS:u.drawArrays(e.GL.POINTS,0,d.numberOfIndices());break;case e.GL.LINES:u.drawArrays(e.GL.LINES,0,d.numberOfIndices());break;case e.GL.LINE_STRIP:u.drawArrays(e.GL.LINE_STRIP,0,d.numberOfIndices());break;case e.GL.TRIANGLES:u.drawArrays(e.GL.TRIANGLES,0,d.numberOfIndices());break;case e.GL.TRIANGLE_STRIP:u.drawArrays(e.GL.TRIANGLE_STRIP,0,d.numberOfIndices())}u.bindBuffer(e.GL.ARRAY_BUFFER,null)}n||this.undoBindVertexData(t)},this.undoBindVertexData=function(t){var e,n;for(e in o)if(o.hasOwnProperty(e))for(n=0;n<o[e].length;n+=1)t.m_material.undoBindVertexData(t,o[e][n])},this},inherit(e.mapper,e.boundingObject),e.groupMapper=function(){"use strict";if(!(this instanceof e.groupMapper))return new e.groupMapper;e.mapper.call(this);var t=e.timestamp(),n=[],r=[];return this.geometryData=function(t){return void 0!==t&&t<r.length?r[t]:r.length>0?r[0]:null},this.setGeometryData=function(t){1===r.length&&r[0]===t||((r=[]).push(t),this.modified())},this.geometryDataArray=function(){return r},this.setGeometryDataArray=function(t){if(t instanceof Array){if(r!==t)return r=[],r=t,this.modified(),!0}else console.log("[error] Requies array of geometry data");return!1},this.computeBounds=function(){if(null!==r&&void 0!==r){var t=this.computeBoundsTimestamp(),e=this.boundsDirtyTimestamp(),n=this.bounds(),i=null,o=null;if(e.getMTime()>t.getMTime()){for(o=0;o<r.length;o+=1)i=r[o].bounds(),n[0]>i[0]&&(n[0]=i[0]),n[1]<i[1]&&(n[1]=i[1]),n[2]>i[2]&&(n[2]=i[2]),n[3]<i[3]&&(n[3]=i[3]),n[4]>i[4]&&(n[4]=i[4]),n[5]<i[5]&&(n[5]=i[5]);this.modified(),t.modified()}}else this.resetBounds()},this.render=function(i){var o=null;if(this.getMTime()>t.getMTime()){for(o=0;o<r.length;o+=1)n.push(e.mapper()),n[o].setGeometryData(r[o]);t.modified()}for(o=0;o<n.length;o+=1)n[o].render(i)},this},inherit(e.groupMapper,e.mapper),e.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4},e.materialAttribute=function(t){"use strict";if(!(this instanceof e.materialAttribute))return new e.materialAttribute(t);e.graphicsObject.call(this);var n=t;return this.type=function(){return n},this.enabled=function(){return!0},this.bindVertexData=function(t,e){return t=t,e=e,!1},this.undoBindVertexData=function(t,e){return t=t,e=e,!1},this},inherit(e.materialAttribute,e.graphicsObject),e.blendFunction=function(t,n){"use strict";if(!(this instanceof e.blendFunction))return new e.blendFunction(t,n);var r=t,i=n;return this.apply=function(t){t.m_context.blendFuncSeparate(r,i,e.GL.ONE,e.GL.ONE_MINUS_SRC_ALPHA)},this},e.blend=function(){"use strict";if(!(this instanceof e.blend))return new e.blend;e.materialAttribute.call(this,e.materialAttributeType.Blend);var t=!1,n=e.blendFunction(e.GL.SRC_ALPHA,e.GL.ONE_MINUS_SRC_ALPHA);return this.bind=function(r){return t=r.m_context.isEnabled(e.GL.BLEND),this.enabled()?(r.m_context.enable(e.GL.BLEND),n.apply(r)):r.m_context.disable(e.GL.BLEND),!0},this.undoBind=function(n){return t?n.m_context.enable(e.GL.BLEND):n.m_context.disable(e.GL.BLEND),!0},this},inherit(e.blend,e.materialAttribute),e.material=function(){"use strict";if(!(this instanceof e.material))return new e.material;e.graphicsObject.call(this);var t=this,n=new e.shaderProgram,r=100,i={},o={};return this.binNumber=function(){return r},this.setBinNumber=function(e){r=e,t.modified()},this.exists=function(t){return t.type()===e.materialAttributeType.Texture?i.hasOwnProperty(t.textureUnit()):o.hasOwnProperty(t.type())},this.uniform=function(t){return n?n.uniform(t):null},this.attribute=function(t,n){return o.hasOwnProperty(t)?o[t]:t===e.materialAttributeType.Texture&&i.hasOwnProperty(n)?i[n]:null},this.setAttribute=function(r){return r.type()===e.materialAttributeType.Texture?i[r.textureUnit()]!==r&&(i[r.textureUnit()]=r,t.modified(),!0):o[r.type()]!==r&&(r.type()===e.materialAttributeType.ShaderProgram&&(n=r),o[r.type()]=r,t.modified(),!0)},this.addAttribute=function(r){return!t.exists(r)&&(r.type()===e.materialAttributeType.Texture?(i[r.textureUnit()]=r,t.modified(),!0):(r.type()===e.materialAttributeType.ShaderProgram&&(n=r),o[r.type()]=r,t.modified(),!0))},this.shaderProgram=function(){return n},this._setup=function(t){return!1},this._cleanup=function(t){for(var e in o)o.hasOwnProperty(e)&&o[e]._cleanup(t);for(e in i)i.hasOwnProperty(e)&&i[e]._cleanup(t)},this.bind=function(t){var e=null;for(e in n.bind(t),o)o.hasOwnProperty(e)&&o[e]!==n&&o[e].bind(t);for(e in i)i.hasOwnProperty(e)&&i[e].bind(t)},this.undoBind=function(t){var e=null;for(e in o)o.hasOwnProperty(e)&&o[e].undoBind(t);for(e in i)i.hasOwnProperty(e)&&i[e].undoBind(t)},this.bindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].undoBindVertexData(t,e)},t},e.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4},inherit(e.material,e.graphicsObject),e.renderState=function(){"use strict";this.m_context=null,this.m_modelViewMatrix=a.create(),this.m_normalMatrix=a.create(),this.m_projectionMatrix=null,this.m_material=null,this.m_mapper=null},e.renderer=function(t){"use strict";if(!(this instanceof e.renderer))return new e.renderer(t);e.graphicsObject.call(this),t=t||{};var n=this;return n.m_renderWindow=null,n.m_contextChanged=!1,n.m_sceneRoot=new e.groupNode,n.m_camera=new e.camera(t),n.m_nearClippingPlaneTolerance=null,n.m_x=0,n.m_y=0,n.m_width=0,n.m_height=0,n.m_resizable=!0,n.m_resetScene=!0,n.m_layer=0,n.m_renderPasses=null,n.m_resetClippingRange=!0,n.m_depthBits=null,n.m_camera.addChild(n.m_sceneRoot),this.width=function(){return n.m_width},this.height=function(){return n.m_height},this.layer=function(){return n.m_layer},this.setLayer=function(t){n.m_layer=t,n.modified()},this.isResizable=function(){return n.m_resizable},this.setResizable=function(t){n.m_resizable=t},this.renderWindow=function(){return n.m_renderWindow},this.setRenderWindow=function(t){n.m_renderWindow!==t&&(n.m_renderWindow&&n.m_renderWindow.removeRenderer(this),n.m_renderWindow=t,n.m_contextChanged=!0,n.modified())},this.backgroundColor=function(){return n.m_camera.clearColor()},this.setBackgroundColor=function(t,e,r,i){n.m_camera.setClearColor(t,e,r,i),n.modified()},this.sceneRoot=function(){return n.m_sceneRoot},this.camera=function(){return n.m_camera},this.render=function(){var t,r,i,o=null,s=[],u=a.create(),c=null;if((r=new e.renderState).m_renderer=n,r.m_context=n.renderWindow().context(),n.m_depthBits&&!n.m_contextChanged||(n.m_depthBits=r.m_context.getParameter(e.GL.DEPTH_BITS)),r.m_contextChanged=n.m_contextChanged,n.m_renderPasses)for(t=0;t<n.m_renderPasses.length;t+=1){if(n.m_renderPasses[t].render(r))return console.log("returning"),void n.m_renderPasses[t].remove(r);n.m_renderPasses[t].remove(r)}for(r.m_context.enable(e.GL.DEPTH_TEST),r.m_context.depthFunc(e.GL.LEQUAL),n.m_camera.clearMask()&e.GL.COLOR_BUFFER_BIT&&(c=n.m_camera.clearColor(),r.m_context.clearColor(c[0],c[1],c[2],c[3])),n.m_camera.clearMask()&e.GL.DEPTH_BUFFER_BIT&&r.m_context.clearDepth(n.m_camera.clearDepth()),r.m_context.clear(n.m_camera.clearMask()),r.m_context.viewport(n.m_x,n.m_y,n.m_width,n.m_height),(i=n.m_sceneRoot.children()).length>0&&n.m_resetScene&&(n.resetCamera(),n.m_resetScene=!1),t=0;t<i.length;t+=1)(o=i[t]).computeBounds(),o.visible()&&o.material().binNumber()>=0&&s.push([o.material().binNumber(),o]);for(s.sort(function(t,e){return t[0]-e[0]}),t=0;t<s.length;t+=1){if((o=s[t][1]).referenceFrame()===e.boundingObject.ReferenceFrame.Relative){var l=n.m_camera.viewMatrix();l instanceof Array&&(r.m_modelViewMatrix=new Array(16)),a.multiply(r.m_modelViewMatrix,l,o.matrix()),r.m_projectionMatrix=n.m_camera.projectionMatrix(),r.m_modelViewAlignment=n.m_camera.viewAlignment()}else r.m_modelViewMatrix=o.matrix(),r.m_modelViewAlignment=null,r.m_projectionMatrix=a.create(),a.ortho(r.m_projectionMatrix,0,n.m_width,0,n.m_height,-1,1);a.invert(u,r.m_modelViewMatrix),a.transpose(r.m_normalMatrix,u),r.m_material=o.material(),r.m_mapper=o.mapper(),r.m_material.bind(r),r.m_mapper.render(r),r.m_material.undoBind(r)}r.m_context.finish(),n.m_contextChanged=!1},this.resetCamera=function(){n.m_camera.computeBounds();var t,e,r=n.m_camera.directionOfProjection(),i=n.m_camera.bounds(),o=[(i[0]+i[1])/2,(i[2]+i[3])/2,(i[4]+i[5])/2],a=[i[1]-i[0],i[3]-i[2],i[5]-i[4]],s=0,c=n.m_camera.viewAspect(),l=n.m_camera.viewAngle();s=a[0]>a[1]?a[0]>a[2]?a[0]/2:a[2]/2:a[1]>a[2]?a[1]/2:a[2]/2,l=c>=1?2*Math.atan(Math.tan(.5*l)/c):2*Math.atan(Math.tan(.5*l)*c),t=s/Math.sin(.5*l),e=n.m_camera.viewUpDirection(),Math.abs(u.dot(e,r))>.999&&n.m_camera.setViewUpDirection(-e[2],e[0],e[1]),n.m_camera.setFocalPoint(o[0],o[1],o[2]),n.m_camera.setPosition(o[0]+t*-r[0],o[1]+t*-r[1],o[2]+t*-r[2]),n.resetCameraClippingRange(i)},this.hasValidBounds=function(t){return t[0]!==Number.MAX_VALUE&&t[1]!==-Number.MAX_VALUE&&t[2]!==Number.MAX_VALUE&&t[3]!==-Number.MAX_VALUE&&t[4]!==Number.MAX_VALUE&&t[5]!==-Number.MAX_VALUE},this.resetCameraClippingRange=function(t){if(void 0===t&&(n.m_camera.computeBounds(),t=n.m_camera.bounds()),n.hasValidBounds(t)){var e=n.m_camera.viewPlaneNormal(),r=n.m_camera.position(),i=-e[0],o=-e[1],a=-e[2],s=-(i*r[0]+o*r[1]+a*r[2]),u=vec2.create(),c=null,l=null,h=null,f=null;if(n.m_resetClippingRange){for(u[0]=i*t[0]+o*t[2]+a*t[4]+s,u[1]=1e-18,f=0;f<2;f+=1)for(h=0;h<2;h+=1)for(l=0;l<2;l+=1)c=i*t[l]+o*t[2+h]+a*t[4+f]+s,u[0]=c<u[0]?c:u[0],u[1]=c>u[1]?c:u[1];u[0]<0&&(u[0]=0),u[0]=.99*u[0]-.5*(u[1]-u[0]),u[1]=1.01*u[1]+.5*(u[1]-u[0]),u[0]=u[0]>=u[1]?.01*u[1]:u[0],n.m_nearClippingPlaneTolerance||(n.m_nearClippingPlaneTolerance=.01,n.m_depthBits&&n.m_depthBits>16&&(n.m_nearClippingPlaneTolerance=.001)),u[0]<n.m_nearClippingPlaneTolerance*u[1]&&(u[0]=n.m_nearClippingPlaneTolerance*u[1]),n.m_camera.setClippingRange(u[0],u[1])}}},this.resize=function(t,e){t&&e&&n.positionAndResize(n.m_x,n.m_y,t,e)},this.positionAndResize=function(t,e,r,i){var o;if(t<0||e<0||r<=0||i<=0)console.log("[error] Invalid position and resize values",t,e,r,i);else if(n.m_resizable&&(n.m_width=r,n.m_height=i,n.m_camera.setViewAspect(r/i),n.m_camera.setParallelExtents({width:r,height:i}),n.modified()),n.m_renderPasses)for(o=0;o<n.m_renderPasses.length;o+=1)n.m_renderPasses[o].resize(r,i),n.m_renderPasses[o].renderer().positionAndResize(t,e,r,i)},this.addActor=function(t){return t instanceof e.actor&&(n.m_sceneRoot.addChild(t),n.modified(),!0)},this.hasActor=function(t){return n.m_sceneRoot.hasChild(t)},this.addActors=function(t){var e=null;if(t instanceof Array){for(e=0;e<t.length;e+=1)n.m_sceneRoot.addChild(t[e]);n.modified()}},this.removeActor=function(t){return-1!==n.m_sceneRoot.children().indexOf(t)&&(t.mapper()&&(t.mapper().deleteVertexBufferObjects(),t.mapper().modified()),n.m_sceneRoot.removeChild(t),n.modified(),!0)},this.removeActors=function(t){if(!(t instanceof Array))return!1;var e;for(e=0;e<t.length;e+=1)n.m_sceneRoot.removeChild(t[e]);return n.modified(),!0},this.removeAllActors=function(){return n.m_sceneRoot.removeChildren()},this.worldToDisplay=function(t,e,n,r,i){var o,u,c,l,h=a.create(),f=null;return a.multiply(h,n,e),f=s.create(),s.transformMat4(f,t,h),0!==f[3]&&(f[0]=f[0]/f[3],f[1]=f[1]/f[3],f[2]=f[2]/f[3],f[3]=1),o=(f[0]+1)/2*r,u=(1-f[1])/2*i,c=f[2],l=f[3],s.fromValues(o,u,c,l)},this.displayToWorld=function(t,e,n,r,i){var o=2*t[0]/r-1,u=-2*t[1]/i+1,c=t[2],l=a.create(),h=null;return a.multiply(l,n,e),a.invert(l,l),h=s.fromValues(o,u,c,1),s.transformMat4(h,h,l),0!==h[3]&&(h[0]=h[0]/h[3],h[1]=h[1]/h[3],h[2]=h[2]/h[3],h[3]=1),h},this.focusDisplayPoint=function(){var t=n.m_camera.focalPoint(),e=s.fromValues(t[0],t[1],t[2],1);return n.worldToDisplay(e,n.m_camera.viewMatrix(),n.m_camera.projectionMatrix(),n.m_width,n.m_height)},this.resetScene=function(){return n.m_resetScene},this.setResetScene=function(t){n.m_resetScene!==t&&(n.m_resetScene=t,n.modified())},this.resetClippingRange=function(){return n.m_resetClippingRange},this.setResetClippingRange=function(t){n.m_resetClippingRange!==t&&(n.m_resetClippingRange=t,n.modified())},this.addRenderPass=function(t){var e;if(n.m_renderPasses)for(e=0;e<n.m_renderPasses.length;e+=1)if(t===n.m_renderPasses[e])return;n.m_renderPasses=[],n.m_renderPasses.push(t)},this.removeRenderPass=function(t){t=t},this._cleanup=function(t){for(var e=n.m_sceneRoot.children(),r=0;r<e.length;r+=1){var i=e[r];i.material()._cleanup(t),i.mapper()._cleanup(t)}n.m_sceneRoot.removeChildren()},n},inherit(e.renderer,e.graphicsObject),e.renderWindow=function(t){"use strict";if(!(this instanceof e.renderWindow))return new e.renderWindow(t);e.graphicsObject.call(this);var n=this,r=0,i=0,o=400,a=400,u=t,c=null,l=[],h=null;return this.windowSize=function(){return[o,a]},this.setWindowSize=function(t,e){return(o!==t||a!==e)&&(o=t,a=e,n.modified(),!0)},this.windowPosition=function(){return[r,i]},this.setWindowPosition=function(t,e){return(r!==t||i!==e)&&(r=t,i=e,n.modified(),!0)},this.renderers=function(){return l},this.activeRenderer=function(){return c},this.addRenderer=function(t){return!1===n.hasRenderer(t)&&(l.push(t),t.setRenderWindow(n),null===c&&(c=t),0!==t.layer()&&t.camera().setClearMask(e.GL.DepthBufferBit),n.modified(),!0)},this.removeRenderer=function(t){var e=l.indexOf(t);return-1!==e&&(c===t&&(c=null),l.splice(e,1),n.modified(),!0)},this.getRenderer=function(t){return t<l.length?l[t]:(console.log("[WARNING] Out of index array"),null)},this.hasRenderer=function(t){var e;for(e=0;e<l.length;e+=1)if(t===l[e])return!0;return!1},this.resize=function(t,e){n.positionAndResize(r,i,t,e),n.modified()},this.positionAndResize=function(t,e,s,u){var c;for(r=t,i=e,o=s,a=u,c=0;c<l.length;c+=1)l[c].positionAndResize(r,i,o,a);n.modified()},this._setup=function(t){t=t,h=null;try{var e;for(h=u.getContext("webgl")||u.getContext("experimental-webgl"),e=0;e<l.length;e+=1)(l[e].width()>o||0===l[e].width()||l[e].height()>a||0===l[e].height())&&l[e].resize(r,i,o,a);return!0}catch(t){}return h||console("[ERROR] Unable to initialize WebGL. Your browser may not support it."),!1},this.context=function(){return h},this._cleanup=function(t){var n;for(n=0;n<l.length;n+=1)l[n]._cleanup(t);e.clearCachedShaders(t?t.m_context:null)},this.render=function(){var t;for(l.sort(function(t,e){return t.layer()-e.layer()}),t=0;t<l.length;t+=1)l[t].render()},this.focusDisplayPoint=function(){return c.focusDisplayPoint()},this.displayToWorld=function(t,e,n,r){var i=(r=void 0===r?r=c:r).camera();return n||(n=r.focusDisplayPoint()),r.displayToWorld(s.fromValues(t,e,n[2],1),i.viewMatrix(),i.projectionMatrix(),o,a)},this.worldToDisplay=function(t,e,n,r){var i=(r=void 0===r?r=c:r).camera();return r.worldToDisplay(s.fromValues(t,e,n,1),i.viewMatrix(),i.projectionMatrix(),o,a)},n},inherit(e.renderWindow,e.graphicsObject),e.camera=function(t){"use strict";if(!(this instanceof e.camera))return new e.camera(t);e.groupNode.call(this),t=t||{};var n=30*Math.PI/180,r=s.fromValues(0,0,1,1),i=s.fromValues(0,0,0,1),o=u.fromValues(0,0,0),c=s.fromValues(0,1,0,0),l=s.fromValues(1,0,0,0),h=.01,f=1e4,d=1,p=s.fromValues(0,0,-1,0),m=s.fromValues(0,0,1,0),v=a.create(),g=a.create(),y=e.timestamp(),x=e.timestamp(),_=-1,b=1,M=1,w=-1,T={zoom:1,tilesize:256},A=!0,E=!0,S=!0,C=!1,O=[0,0,0,0],P=1,R=e.GL.COLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT;return void 0!==t.parallelProjection&&(C=!!t.parallelProjection),this.viewAngle=function(){return n},this.setViewAngleDegrees=function(t){this.setViewAngle(Math.PI*t/180)},this.setViewAngle=function(t){S&&(n=t,this.modified())},this.position=function(){return r},this.setPosition=function(t,e,n){A&&(r=s.fromValues(t,e,n,1),this.modified())},this.focalPoint=function(){return i},this.setFocalPoint=function(t,e,n){E&&A&&(i=s.fromValues(t,e,n,1),this.modified())},this.viewUpDirection=function(){return c},this.setViewUpDirection=function(t,e,n){c=s.fromValues(t,e,n,0),this.modified()},this.centerOfRotation=function(){return o},this.setCenterOfRotation=function(t){o=t,this.modified()},this.clippingRange=function(){return[h,f]},this.setClippingRange=function(t,e){h=t,f=e,this.modified()},this.viewAspect=function(){return d},this.setViewAspect=function(t){d=t,this.modified()},this.enableScale=function(){return S},this.setEnableScale=function(t){return t!==S?(S=t,this.modified(),!0):S},this.enableRotation=function(){return E},this.setEnableRotation=function(t){return t!==E?(E=t,this.modified(),!0):E},this.enableTranslation=function(){return A},this.setEnableTranslation=function(t){return t!==A?(A=t,this.modified(),!0):A},this.isEnabledParallelProjection=function(){return C},this.enableParallelProjection=function(t){return t!==C?(C=t,this.modified(),!0):C},this.setEnableParallelProjection=function(t){return this.enableParallelProjection(t)},this.parallelProjection=function(){return{left:_,right:b,top:M,bottom:w}},this.setParallelProjection=function(t,e,n,r){_=t,b=e,M=n,w=r,this.modified()},this.parallelExtents=function(){return T},this.setParallelExtents=function(t){var e,n,r=["width","height","zoom","tilesize"],i=!1;for(e=0;e<r.length;e+=1)void 0!==t[n=r[e]]&&t[n]!==T[n]&&(T[n]=t[n],i=!0);if(i&&T.width&&T.height&&void 0!==T.zoom&&T.tilesize){var o=this.unitsPerPixel(T.zoom,T.tilesize);b=o*T.width/2,_=-b,M=o*T.height/2,w=-M,this.modified()}},this.unitsPerPixel=function(t,e){return e=e||256,360*Math.pow(2,-t)/e},this.directionOfProjection=function(){return this.computeDirectionOfProjection(),p},this.viewPlaneNormal=function(){return this.computeViewPlaneNormal(),m},this.viewMatrix=function(){return this.computeViewMatrix()},this.setViewMatrix=function(t,e){e?v=t.slice():a.copy(v,t),y.modified()},this.projectionMatrix=function(){return this.computeProjectionMatrix()},this.setProjectionMatrix=function(t){a.copy(g,t),x.modified()},this.clearMask=function(){return R},this.setClearMask=function(t){R=t,this.modified()},this.clearColor=function(){return O},this.setClearColor=function(t,e,n,r){O[0]=t,O[1]=e,O[2]=n,O[3]=r,this.modified()},this.clearDepth=function(){return P},this.setClearDepth=function(t){P=t,this.modified()},this.computeDirectionOfProjection=function(){u.subtract(p,i,r),u.normalize(p,p),this.modified()},this.computeViewPlaneNormal=function(){m[0]=-p[0],m[1]=-p[1],m[2]=-p[2]},this.zoom=function(t,e){0!==t&&A&&(t*=u.distance(i,r),e?(r[0]=r[0]+t*e[0],r[1]=r[1]+t*e[1],r[2]=r[2]+t*e[2]):(e=p,r[0]=i[0]-t*e[0],r[1]=i[1]-t*e[1],r[2]=i[2]-t*e[2]),this.modified())},this.pan=function(t,e,n){A&&(r[0]+=t,r[1]+=e,r[2]+=n,i[0]+=t,i[1]+=e,i[2]+=n,this.modified())},this.computeOrthogonalAxes=function(){this.computeDirectionOfProjection(),u.cross(l,p,c),u.normalize(l,l),this.modified()},this.rotate=function(t,e){if(E){t=.5*t*(Math.PI/180),e=.5*e*(Math.PI/180);var n=a.create(),h=new u.create;a.identity(n),h[0]=-o[0],h[1]=-o[1],h[2]=-o[2],a.translate(n,n,o),a.rotate(n,n,t,c),a.rotate(n,n,e,l),a.translate(n,n,h),s.transformMat4(r,r,n),s.transformMat4(i,i,n),s.transformMat4(c,c,n),s.normalize(c,c),this.computeOrthogonalAxes(),this.modified()}},this.computeViewMatrix=function(){return y.getMTime()<this.getMTime()&&(a.lookAt(v,r,i,c),y.modified()),v},this.viewAlignment=function(){if(!C){var t=this.projectionMatrix();if(t[1]||t[2]||t[3]||t[4]||t[6]||t[7]||t[8]||t[9]||t[12]||t[13]||t[15])return null}var e=this.unitsPerPixel(T.zoom,T.tilesize);if(!T.width||!T.height||!e)return null;if(parseFloat(T.zoom.toFixed(6))!==parseFloat(T.zoom.toFixed(0)))return null;var n={roundx:e,roundy:e,dx:0,dy:0};return T.width%2&&(n.dx=.5*e),T.height%2&&(n.dy=.5*e),n},this.computeProjectionMatrix=function(){return x.getMTime()<this.getMTime()&&(C?a.ortho(g,_,b,w,M,h,f):a.perspective(g,n,d,h,f),x.modified()),g},this.zoomToHeight=function(t,r,i){return e.zoomToHeight(t,r,i,n)},this.computeDirectionOfProjection(),this},inherit(e.camera,e.groupNode),e.zoomToHeight=function(t,e,n,r){"use strict";r=r||30*Math.PI/180;var i=360*Math.pow(2,-t);return i/=2*Math.tan(r/2)*256/n},e.heightToZoom=function(t,e,n,r){"use strict";return r=r||30*Math.PI/180,t*=2*Math.tan(r/2)*256/n,-Math.log2(t/360)},e.interactorStyle=function(){"use strict";if(!(this instanceof e.interactorStyle))return new e.interactorStyle;e.object.call(this);var t=this,n=null;return this.viewer=function(){return n},this.setViewer=function(r){r!==n&&(c(n=r).on(e.event.mousePress,t.handleMouseDown),c(n).on(e.event.mouseRelease,t.handleMouseUp),c(n).on(e.event.mouseMove,t.handleMouseMove),c(n).on(e.event.mouseOut,t.handleMouseOut),c(n).on(e.event.mouseWheel,t.handleMouseWheel),c(n).on(e.event.keyPress,t.handleKeyPress),c(n).on(e.event.mouseContextMenu,t.handleContextMenu),c(n).on(e.event.click,t.handleClick),c(n).on(e.event.dblClick,t.handleDoubleClick),this.modified())},this.handleMouseDown=function(t){return t=t,!0},this.handleMouseUp=function(t){return t=t,!0},this.handleMouseMove=function(t){return t=t,!0},this.handleMouseOut=function(t){return t=t,!0},this.handleMouseWheel=function(t){return t=t,!0},this.handleClick=function(t){return t=t,!0},this.handleDoubleClick=function(t){return t=t,!0},this.handleKeyPress=function(t){return t=t,!0},this.handleContextMenu=function(t){return t=t,!0},this.reset=function(){return!0},this},inherit(e.interactorStyle,e.object),e.trackballInteractorStyle=function(){"use strict";if(!(this instanceof e.trackballInteractorStyle))return new e.trackballInteractorStyle;e.interactorStyle.call(this);var t,n=this,r=!1,i=!1,o=!1,a={x:0,y:0},u={x:0,y:0};return this.handleMouseMove=function(e){var c,l,h,f,d,p,m,v,g,y,x,_=n.viewer().renderWindow().windowSize()[0],b=n.viewer().renderWindow().windowSize()[1],M=n.viewer().renderWindow().activeRenderer(),w=M.camera(),T=n.viewer().relMouseCoords(e);if(t=!1,a={x:0,y:0},T.x<0||T.x>_?(a.x=0,t=!0):a.x=T.x,T.y<0||T.y>b?(a.y=0,t=!0):a.y=T.y,!0!==t)return c=w.focalPoint(),h=s.fromValues(c[0],c[1],c[2],1),l=M.worldToDisplay(h,w.viewMatrix(),w.projectionMatrix(),_,b),f=s.fromValues(a.x,a.y,l[2],1),d=s.fromValues(u.x,u.y,l[2],1),p=M.displayToWorld(f,w.viewMatrix(),w.projectionMatrix(),_,b),m=M.displayToWorld(d,w.viewMatrix(),w.projectionMatrix(),_,b),v=p[0]-m[0],g=p[1]-m[1],y=p[2]-m[2],o&&(w.pan(-v,-g,-y),n.viewer().render()),r&&(w.rotate(u.x-a.x,u.y-a.y),M.resetCameraClippingRange(),n.viewer().render()),i&&((x=2*(a.y-u.y)/b)>0?w.zoom(1-Math.abs(x)):w.zoom(1+Math.abs(x)),M.resetCameraClippingRange(),n.viewer().render()),u.x=a.x,u.y=a.y,!1},this.handleMouseDown=function(t){var e;return 0===t.button&&(r=!0),1===t.button&&(o=!0),2===t.button&&(i=!0),(e=n.viewer().relMouseCoords(t)).x<0?u.x=0:u.x=e.x,e.y<0?u.y=0:u.y=e.y,!1},this.handleMouseUp=function(t){return 0===t.button&&(r=!1),1===t.button&&(o=!1),2===t.button&&(i=!1),!1},this.handleMouseWheel=function(t){var e=n.viewer().renderWindow().activeRenderer(),r=e.camera();return t.originalEvent.wheelDelta<0?r.zoom(.9):r.zoom(1.1),e.resetCameraClippingRange(),n.viewer().render(),!0},this},inherit(e.trackballInteractorStyle,e.interactorStyle),e.pvwInteractorStyle=function(){"use strict";if(!(this instanceof e.pvwInteractorStyle))return new e.pvwInteractorStyle;e.trackballInteractorStyle.call(this);var t,n,r,i,o,a,u,c,l,h,f,d,p,m,v,g,y,x,_=this,b=!1,M=!1,w=!1,T={x:0,y:0};function A(){r.resetCameraClippingRange(),_.viewer().render()}return this.handleMouseMove=function(e){var E=[],S=null,C=[],O=null;for(t=_.viewer().renderWindow().windowSize()[0],n=_.viewer().renderWindow().windowSize()[1],r=_.viewer().renderWindow().activeRenderer(),i=r.camera(),o=!1,a=_.viewer().relMouseCoords(e),u={x:0,y:0},E=_.viewer().renderWindow().renderers(),S=0;S<E.length;S+=1)r!==E[S]&&C.push(E[S].camera());if(a.x<0||a.x>t?(u.x=0,o=!0):u.x=a.x,a.y<0||a.y>n?(u.y=0,o=!0):u.y=a.y,!0!==o){if(c=i.focalPoint(),l=s.fromValues(c[0],c[1],c[2],1),h=r.worldToDisplay(l,i.viewMatrix(),i.projectionMatrix(),t,n),f=s.fromValues(u.x,u.y,h[2],1),d=s.fromValues(T.x,T.y,h[2],1),p=r.displayToWorld(f,i.viewMatrix(),i.projectionMatrix(),t,n),m=r.displayToWorld(d,i.viewMatrix(),i.projectionMatrix(),t,n),v=p[0]-m[0],g=p[1]-m[1],y=p[2]-m[2],w&&(i.pan(-v,-g,-y),A()),b){for(O=[T.x-u.x,T.y-u.y],i.rotate(O[0],O[1]),S=0;S<C.length;S+=1)C[S].rotate(O[0],O[1]);for(S=0;S<E.length;S+=1)E[S].resetCameraClippingRange();A()}return M&&((x=2*(u.y-T.y)/n)>0?i.zoom(1-Math.abs(x)):i.zoom(1+Math.abs(x)),A()),T.x=u.x,T.y=u.y,!1}},this.handleMouseDown=function(t){return 0===t.button&&(b=!0),1===t.button&&(w=!0),2===t.button&&(M=!0),(a=_.viewer().relMouseCoords(t)).x<0?T.x=0:T.x=a.x,a.y<0?T.y=0:T.y=a.y,!1},this.handleMouseUp=function(t){return 0===t.button&&(b=!1),1===t.button&&(w=!1),2===t.button&&(M=!1),!1},this},inherit(e.pvwInteractorStyle,e.trackballInteractorStyle),e.viewer=function(t,n){"use strict";if(!(this instanceof e.viewer))return new e.viewer(t,n);e.object.call(this);var r=this,i=t,o=null,a=e.renderer(n),s=e.renderWindow(i);return this.canvas=function(){return i},this.renderWindow=function(){return s},this.init=function(){null!==s?s._setup():console.log("[ERROR] No render window attached")},this.exit=function(t){null!==s?s._cleanup(t):console.log("[ERROR] No render window attached")},this.interactorStyle=function(){return o},this.setInteractorStyle=function(t){t!==o&&((o=t).setViewer(this),this.modified())},this.handleMouseDown=function(t){var n=c.event.fix(t||window.event);return 2===t.button&&n.preventDefault(),n.state="down",n.type=e.event.mousePress,c(r).trigger(n),!0},this.handleMouseUp=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.state="up",n.type=e.event.mouseRelease,c(r).trigger(n),!0},this.handleMouseMove=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.mouseMove,c(r).trigger(n),!0},this.handleMouseWheel=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.mouseWheel,c(r).trigger(n),!0},this.handleMouseOut=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.mouseOut,c(r).trigger(n),!0},this.handleKeyPress=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.keyPress,c(r).trigger(n),!0},this.handleContextMenu=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.contextMenu,c(r).trigger(n),!1},this.handleClick=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.click,c(r).trigger(n),!1},this.handleDoubleClick=function(t){var n=c.event.fix(t||window.event);return n.preventDefault(),n.type=e.event.dblClick,c(r).trigger(n),!1},this.relMouseCoords=function(t){if(void 0===t.pageX||void 0===t.pageY)throw"Missing attributes pageX and pageY on the event";var e=0,n=0,r=i;do{e+=r.offsetLeft-r.scrollLeft,n+=r.offsetTop-r.scrollTop,r=r.offsetParent}while(r);return{x:t.pageX-e,y:t.pageY-n}},this.render=function(){s.render()},this.bindEventHandlers=function(){c(i).on("mousedown",this.handleMouseDown),c(i).on("mouseup",this.handleMouseUp),c(i).on("mousemove",this.handleMouseMove),c(i).on("mousewheel",this.handleMouseWheel),c(i).on("contextmenu",this.handleContextMenu)},this.unbindEventHandlers=function(){c(i).off("mousedown",this.handleMouseDown),c(i).off("mouseup",this.handleMouseUp),c(i).off("mousemove",this.handleMouseMove),c(i).off("mousewheel",this.handleMouseWheel),c(i).off("contextmenu",this.handleContextMenu)},this._init=function(){this.bindEventHandlers(),s.addRenderer(a)},this._init(),this},inherit(e.viewer,e.object),e.shader=function(t){"use strict";if(!(this instanceof e.shader))return new e.shader(t);e.object.call(this);var n=[],r=t,i="";this._getContextEntry=function(t){var r,i,o=t.m_context;for(r=0;r<n.length;r+=1)if(n[r].context===o)return n[r];return i={context:o,compileTimestamp:e.timestamp()},n.push(i),i},this.removeContext=function(t){var e,r=t.m_context;for(e=0;e<n.length;e+=1)if(n[e].context===r)return void n.splice(e,1)},this.shaderHandle=function(t){return this._getContextEntry(t).shaderHandle},this.shaderType=function(){return r},this.shaderSource=function(){return i},this.setShaderSource=function(t){i=t,this.modified()},this.compile=function(t){var n=this._getContextEntry(t);return this.getMTime()<n.compileTimestamp.getMTime()?n.shaderHandle:(t.m_context.deleteShader(n.shaderHandle),n.shaderHandle=t.m_context.createShader(r),t.m_context.shaderSource(n.shaderHandle,i),t.m_context.compileShader(n.shaderHandle),t.m_context.getShaderParameter(n.shaderHandle,e.GL.COMPILE_STATUS)?(n.compileTimestamp.modified(),n.shaderHandle):(console.log("[ERROR] An error occurred compiling the shaders: "+t.m_context.getShaderInfoLog(n.shaderHandle)),console.log(i),t.m_context.deleteShader(n.shaderHandle),null))},this.attachShader=function(t,e){t.m_context.attachShader(e,this.shaderHandle(t))}},inherit(e.shader,e.object),function(){"use strict";var t=[];e.getCachedShader=function(n,r,i){for(var o=0;o<t.length;o+=1)if(t[o].type===n&&t[o].context===r&&t[o].source===i)return o&&t.splice(0,0,t.splice(o,1)[0]),t[0].shader;var a=new e.shader(n);return a.setShaderSource(i),t.unshift({type:n,context:r,source:i,shader:a}),t.length>=10&&t.splice(10,t.length-10),a},e.clearCachedShaders=function(e){for(var n=t.length-1;n>=0;n-=1)null!==e&&void 0!==e&&t[n].context!==e||t.splice(n,1)}}();var r=function(){"use strict";var t=".",e=document.getElementsByTagName("script");if(e.length>0){var n=e.length-1,r=e[n];n=r.src.lastIndexOf("/"),t=r.src.substring(0,n)}return function(){return t}}();return e.shaderProgram=function(){"use strict";if(!(this instanceof e.shaderProgram))return new e.shaderProgram;e.materialAttribute.call(this,e.materialAttributeType.ShaderProgram);var t=this,n=0,i=e.timestamp(),o=e.timestamp(),a=[],s=[],u={},l={},h={};return this.loadFromFile=function(n,r){var i,o=!1;return c.ajax({url:r,type:"GET",dataType:"text",async:!1,success:function(r){(i=e.shader(n)).setShaderSource(r),t.addShader(i),o=!0}}),o},this.loadShader=function(t,e){return this.loadFromFile(t,r()+"/shaders/"+e)},this.queryUniformLocation=function(t,e){return t.m_context.getUniformLocation(n,e)},this.queryAttributeLocation=function(t,e){return t.m_context.getAttribLocation(n,e)},this.addShader=function(e){if(a.indexOf(e)>-1)return!1;var n;for(n=a.length-2;n>=0;n-=1)a[n].shaderType()===e.shaderType()&&a.splice(n,1);return a.push(e),t.modified(),!0},this.addUniform=function(e){return!(s.indexOf(e)>-1)&&(s.push(e),t.modified(),!0)},this.addVertexAttribute=function(e,n){u[n]=e,t.modified()},this.uniformLocation=function(t){return l[t]},this.attributeLocation=function(t){return h[t]},this.uniform=function(t){var e;for(e=0;e<s.length;e+=1)if(s[e].name()===t)return s[e];return null},this.updateUniforms=function(t){var e;for(e=0;e<s.length;e+=1)s[e].callGL(t,l[s[e].name()])},this.link=function(t){return t.m_context.linkProgram(n),!!t.m_context.getProgramParameter(n,e.GL.LINK_STATUS)||(console.log("[ERROR] Unable to initialize the shader program."),!1)},this.use=function(t){t.m_context.useProgram(n)},this._setup=function(t){0===n&&(n=t.m_context.createProgram())},this._cleanup=function(e){t.deleteVertexAndFragment(e),t.deleteProgram(e)},this.deleteProgram=function(t){t.m_context.deleteProgram(n),n=0},this.deleteVertexAndFragment=function(t){var e;for(e=0;e<a.length;e+=1)t.m_context.detachShader(a[e].shaderHandle(t)),t.m_context.deleteShader(a[e].shaderHandle(t)),a[e].removeContext(t)},this.compileAndLink=function(e){var r;if(!(i.getMTime()>=this.getMTime())){for(t._setup(e),r=0;r<a.length;r+=1)a[r].compile(e),a[r].attachShader(e,n);t.bindAttributes(e),t.link(e)||(console.log("[ERROR] Failed to link Program"),t._cleanup(e)),i.modified()}},this.bind=function(e){var n=0;for(o.getMTime()<t.getMTime()?(t.compileAndLink(e),t.use(e),t.bindUniforms(e),o.modified()):t.use(e),n=0;n<s.length;n+=1)s[n].update(e,t);t.updateUniforms(e)},this.undoBind=function(t){t.m_context.useProgram(null)},this.bindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].undoBindVertexData(t,e)},this.bindUniforms=function(t){var e;for(e=0;e<s.length;e+=1)l[s[e].name()]=this.queryUniformLocation(t,s[e].name())},this.bindAttributes=function(t){var e,r;for(e in u)u.hasOwnProperty(e)&&(r=u[e].name(),t.m_context.bindAttribLocation(n,e,r),h[r]=e)},t},inherit(e.shaderProgram,e.materialAttribute),e.texture=function(){"use strict";if(!(this instanceof e.texture))return new e.texture;e.materialAttribute.call(this,e.materialAttributeType.Texture),this.m_width=0,this.m_height=0,this.m_depth=0,this.m_textureHandle=null,this.m_textureUnit=0,this.m_pixelFormat=e.GL.RGBA,this.m_pixelDataType=e.GL.UNSIGNED_BYTE,this.m_internalFormat=e.GL.RGBA,this.m_nearestPixel=!1,this.m_image=null;var t=e.timestamp(),n=this;function r(t){switch(n.m_textureUnit){case 0:t.m_context.activeTexture(e.GL.TEXTURE0);break;case 1:t.m_context.activeTexture(e.GL.TEXTURE1);break;case 2:t.m_context.activeTexture(e.GL.TEXTURE2);break;case 3:t.m_context.activeTexture(e.GL.TEXTURE3);break;case 4:t.m_context.activeTexture(e.GL.TEXTURE4);break;case 5:t.m_context.activeTexture(e.GL.TEXTURE5);break;case 6:t.m_context.activeTexture(e.GL.TEXTURE6);break;case 7:t.m_context.activeTexture(e.GL.TEXTURE7);break;case 8:t.m_context.activeTexture(e.GL.TEXTURE8);break;case 9:t.m_context.activeTexture(e.GL.TEXTURE9);break;case 10:t.m_context.activeTexture(e.GL.TEXTURE10);break;case 11:t.m_context.activeTexture(e.GL.TEXTURE11);break;case 12:t.m_context.activeTexture(e.GL.TEXTURE12);break;case 13:t.m_context.activeTexture(e.GL.TEXTURE13);break;case 14:t.m_context.activeTexture(e.GL.TEXTURE14);break;case 15:t.m_context.activeTexture(e.GL.TEXTURE15);break;default:throw"[error] Texture unit "+n.m_textureUnit+" is not supported"}}return this.setup=function(n){r(n),n.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=n.m_context.createTexture(),n.m_context.bindTexture(e.GL.TEXTURE_2D,this.m_textureHandle),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?e.GL.NEAREST:e.GL.LINEAR),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?e.GL.NEAREST:e.GL.LINEAR),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_S,e.GL.CLAMP_TO_EDGE),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_T,e.GL.CLAMP_TO_EDGE),null!==this.m_image?(n.m_context.pixelStorei(e.GL.UNPACK_ALIGNMENT,1),n.m_context.pixelStorei(e.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),this.computeInternalFormatUsingImage(),n.m_context.texImage2D(e.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)):n.m_context.texImage2D(e.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null),n.m_context.bindTexture(e.GL.TEXTURE_2D,null),t.modified()},this.bind=function(n){this.getMTime()>t.getMTime()&&this.setup(n),r(n),n.m_context.bindTexture(e.GL.TEXTURE_2D,this.m_textureHandle)},this.undoBind=function(t){t.m_context.bindTexture(e.GL.TEXTURE_2D,null)},this.image=function(){return this.m_image},this.setImage=function(t){return null!==t&&(this.m_image=t,this.updateDimensions(),this.modified(),!0)},this.nearestPixel=function(){return this.m_nearestPixel},this.setNearestPixel=function(t){return(t=!!t)!==this.m_nearestPixel&&(this.m_nearestPixel=t,this.modified(),!0)},this.textureUnit=function(){return this.m_textureUnit},this.setTextureUnit=function(t){return this.m_textureUnit!==t&&(this.m_textureUnit=t,this.modified(),!0)},this.width=function(){return this.m_width},this.setWidth=function(t){return n.m_width!==t&&(n.m_width=t,n.modified(),!0)},this.height=function(){return n.m_height},this.setHeight=function(t){return n.m_height!==t&&(n.m_height=t,n.modified(),!0)},this.depth=function(){return this.m_depth},this.setDepth=function(t){return null!==this.m_image&&(this.m_depth=t,this.modified(),!0)},this.textureHandle=function(){return this.m_textureHandle},this.internalFormat=function(){return this.m_internalFormat},this.setInternalFormat=function(t){return this.m_internalFormat!==t&&(this.m_internalFormat=t,this.modified(),!0)},this.pixelFormat=function(){return this.m_pixelFormat},this.setPixelFormat=function(t){return null!==this.m_image&&(this.m_pixelFormat=t,this.modified(),!0)},this.pixelDataType=function(){return this.m_pixelDataType},this.setPixelDataType=function(t){return null!==this.m_image&&(this.m_pixelDataType=t,this.modified(),!0)},this.computeInternalFormatUsingImage=function(){this.m_internalFormat=e.GL.RGBA,this.m_pixelFormat=e.GL.RGBA,this.m_pixelDataType=e.GL.UNSIGNED_BYTE},this.updateDimensions=function(){null!==this.m_image&&(this.m_width=this.m_image.width,this.m_height=this.m_image.height,this.m_depth=0)},this},inherit(e.texture,e.materialAttribute),e.lookupTable=function(){"use strict";if(!(this instanceof e.lookupTable))return new e.lookupTable;e.texture.call(this);var t=e.timestamp(),n=[0,0];return this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map(function(t){return 255*t}),this.setup=function(n){0===this.textureUnit()?n.m_context.activeTexture(e.GL.TEXTURE0):1===this.textureUnit()&&n.m_context.activeTexture(e.GL.TEXTURE1),n.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=n.m_context.createTexture(),n.m_context.bindTexture(e.GL.TEXTURE_2D,this.m_textureHandle),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MIN_FILTER,e.GL.LINEAR),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MAG_FILTER,e.GL.LINEAR),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_S,e.GL.CLAMP_TO_EDGE),n.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_T,e.GL.CLAMP_TO_EDGE),n.m_context.pixelStorei(e.GL.UNPACK_ALIGNMENT,1),this.m_width=this.m_colorTable.length/4,this.m_height=1,this.m_depth=0,n.m_context.texImage2D(e.GL.TEXTURE_2D,0,e.GL.RGBA,this.m_width,this.m_height,this.m_depth,e.GL.RGBA,e.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable)),n.m_context.bindTexture(e.GL.TEXTURE_2D,null),t.modified()},this.colorTable=function(){return this.m_colorTable},this.setColorTable=function(t){return this.m_colorTable!==t&&(this.m_colorTable=t,this.modified(),!0)},this.range=function(){return n},this.setRange=function(t){return n!==t&&(n=t,this.modified(),!0)},this.updateRange=function(t){t instanceof Array||console.log("[error] Invalid data type for range. Requires array [min,max]"),t[0]<n[0]&&(n[0]=t[0],this.modified()),t[1]>n[1]&&(n[1]=t[1],this.modified())},this},inherit(e.lookupTable,e.texture),e.uniform=function(t,n){"use strict";if(!(this instanceof e.uniform))return new e.uniform(t,n);this.getTypeNumberOfComponents=function(t){switch(t){case e.GL.FLOAT:case e.GL.INT:case e.GL.BOOL:return 1;case e.GL.FLOAT_VEC2:case e.GL.INT_VEC2:case e.GL.BOOL_VEC2:return 2;case e.GL.FLOAT_VEC3:case e.GL.INT_VEC3:case e.GL.BOOL_VEC3:return 3;case e.GL.FLOAT_VEC4:case e.GL.INT_VEC4:case e.GL.BOOL_VEC4:return 4;case e.GL.FLOAT_MAT3:return 9;case e.GL.FLOAT_MAT4:return 16;default:return 0}};var r=t,i=n,o=[];return o.length=this.getTypeNumberOfComponents(r),this.name=function(){return i},this.type=function(){return r},this.get=function(){return o},this.set=function(t){var e=0,n=o.length;if(1!==n)for(e=0;e<n;e+=1)o[e]=t[e];else o[0]=t},this.callGL=function(t,n){switch(r){case e.GL.BOOL:case e.GL.INT:t.m_context.uniform1iv(n,o);break;case e.GL.FLOAT:t.m_context.uniform1fv(n,o);break;case e.GL.BOOL_VEC2:case e.GL.INT_VEC2:t.m_context.uniform2iv(n,o);break;case e.GL.FLOAT_VEC2:t.m_context.uniform2fv(n,o);break;case e.GL.BOOL_VEC3:case e.GL.INT_VEC3:t.m_context.uniform3iv(n,o);break;case e.GL.FLOAT_VEC3:t.m_context.uniform3fv(n,o);break;case e.GL.BOOL_VEC4:case e.GL.INT_VEC4:t.m_context.uniform4iv(n,o);break;case e.GL.FLOAT_VEC4:t.m_context.uniform4fv(n,o);break;case e.GL.FLOAT_MAT3:t.m_context.uniformMatrix3fv(n,e.GL.FALSE,o);break;case e.GL.FLOAT_MAT4:t.m_context.uniformMatrix4fv(n,e.GL.FALSE,o)}},this.update=function(t,e){},this},e.modelViewUniform=function(t){"use strict";return this instanceof e.modelViewUniform?(t||(t="modelViewMatrix"),e.uniform.call(this,e.GL.FLOAT_MAT4,t),this.set(a.create()),this.update=function(t,e){this.set(t.m_modelViewMatrix)},this):new e.modelViewUniform(t)},inherit(e.modelViewUniform,e.uniform),e.modelViewOriginUniform=function(t,n){"use strict";if(!(this instanceof e.modelViewOriginUniform))return new e.modelViewOriginUniform(t,n);t||(t="modelViewMatrix");var r=[(n=n||[0,0,0])[0],n[1],n[2]||0];return e.uniform.call(this,e.GL.FLOAT_MAT4,t),this.set(a.create()),this.setOrigin=function(t){r=[(t=t||[0,0,0])[0],t[1],t[2]||0]},this.update=function(t,e){var n=t.m_modelViewMatrix;if(t.m_modelViewAlignment){var i=t.m_modelViewAlignment;(n=n.slice?n.slice():Array.prototype.slice.call(n))[12]=Math.round(n[12]/i.roundx)*i.roundx+i.dx,n[13]=Math.round(n[13]/i.roundy)*i.roundy+i.dy}n=a.translate(a.create(),n,r),this.set(n)},this},inherit(e.modelViewOriginUniform,e.uniform),e.projectionUniform=function(t){"use strict";return this instanceof e.projectionUniform?(t||(t="projectionMatrix"),e.uniform.call(this,e.GL.FLOAT_MAT4,t),this.set(a.create()),this.update=function(t,e){this.set(t.m_projectionMatrix)},this):new e.projectionUniform(t)},inherit(e.projectionUniform,e.uniform),e.floatUniform=function(t,n){"use strict";if(!(this instanceof e.floatUniform))return new e.floatUniform(t,n);t||(t="floatUniform"),n=void 0===n?1:n,e.uniform.call(this,e.GL.FLOAT,t),this.set(n)},inherit(e.floatUniform,e.uniform),e.normalMatrixUniform=function(t){"use strict";return this instanceof e.normalMatrixUniform?(t||(t="normalMatrix"),e.uniform.call(this,e.GL.FLOAT_MAT4,t),this.set(a.create()),this.update=function(t,e){this.set(t.m_normalMatrix)},this):new e.normalMatrixUniform(t)},inherit(e.normalMatrixUniform,e.uniform),e.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5},e.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9},e.vertexAttribute=function(t){"use strict";if(!(this instanceof e.vertexAttribute))return new e.vertexAttribute(t);var n=t;this.name=function(){return n},this.bindVertexData=function(t,e){var r=t.m_mapper.geometryData().sourceData(e),i=t.m_material.shaderProgram();t.m_context.vertexAttribPointer(i.attributeLocation(n),r.attributeNumberOfComponents(e),r.attributeDataType(e),r.normalized(e),r.attributeStride(e),r.attributeOffset(e)),t.m_context.enableVertexAttribArray(i.attributeLocation(n))},this.undoBindVertexData=function(t,e){e=e;var r=t.m_material.shaderProgram();t.m_context.disableVertexAttribArray(r.attributeLocation(n))}},e.source=function(){"use strict";return this instanceof e.source?(e.object.call(this),this.create=function(){},this):new e.source},inherit(e.source,e.object),e.planeSource=function(){"use strict";if(!(this instanceof e.planeSource))return new e.planeSource;e.source.call(this);var t=[0,0,0],n=[1,0,0],r=[0,1,0],i=[0,0,1],o=null;this.setOrigin=function(e,n,r){t[0]=e,t[1]=n,t[2]=r},this.setPoint1=function(t,e,r){n[0]=t,n[1]=e,n[2]=r},this.setPoint2=function(t,e,n){r[0]=t,r[1]=e,r[2]=n},this.create=function(){o=new e.geometryData;var a,s,u,c,l=[],h=[],f=[],d=[],p=[],m=0,v=0,g=0,y=0,x=[],_=[],b=[],M=[],w=[],T=null,A=null,E=null;for(l.length=3,h.length=2,f.length=3,d.length=3,p.length=3,a=0;a<3;a+=1)f[a]=n[a]-t[a],d[a]=r[a]-t[a];for(4,x.length=12,_.length=12,M.length=8,w.length=4,a=0;a<2;a+=1)for(h[1]=a/1,s=0;s<2;s+=1){for(h[0]=s/1,u=0;u<3;u+=1)l[u]=t[u]+h[0]*f[u]+h[1]*d[u];x[m++]=l[0],x[m++]=l[1],x[m++]=l[2],b[g++]=1,b[g++]=1,b[g++]=1,_[v++]=i[0],_[v++]=i[1],_[v++]=i[2],M[y++]=h[0],M[y++]=h[1]}for(a=0;a<1;a+=1)for(s=0;s<1;s+=1)p[0]=s+2*a,p[1]=p[0]+1,p[2]=p[0]+1+2,p[3]=p[0]+1+1;for(a=0;a<4;a+=1)w[a]=a;return(T=new e.triangleStrip).setIndices(w),(A=e.sourceDataP3fv()).pushBack(x),(E=e.sourceDataC3fv()).pushBack(b),(c=e.sourceDataT2fv()).pushBack(M),o.addSource(A),o.addSource(E),o.addSource(c),o.addPrimitive(T),o}},inherit(e.planeSource,e.source),e.pointSource=function(){"use strict";if(!(this instanceof e.pointSource))return new e.pointSource;e.source.call(this);var t=this,n=[],r=[],i=[],o=[],a=null;this.getPositions=function(){return n},this.setPositions=function(e){e instanceof Array?n=e:console.log("[ERROR] Invalid data type for positions. Array is required."),t.modified()},this.getColors=function(){return r},this.setColors=function(e){e instanceof Array?r=e:console.log("[ERROR] Invalid data type for colors. Array is required."),t.modified()},this.getSize=function(){return o},this.setSize=function(t){o=t,this.modified()},this.setTextureCoordinates=function(e){e instanceof Array?i=e:console.log("[ERROR] Invalid data type for texture coordinates. Array is required."),t.modified()},this.create=function(){if(a=new e.geometryData,n.length%3==0){var t,s,u,c,l,h=n.length/3,f=0,d=[];for(d.length=h,f=0;f<h;f+=1)d[f]=f;if(l=e.sourceDataDf(),h!==o.length)for(f=0;f<h;f+=1)l.pushBack(o);else l.setData(o);return a.addSource(l),(t=new e.points).setIndices(d),(s=e.sourceDataP3fv()).pushBack(n),a.addSource(s),r.length>0&&r.length===n.length?((u=e.sourceDataC3fv()).pushBack(r),a.addSource(u)):r.length>0&&r.length!==n.length&&console.log("[ERROR] Number of colors are different than number of points"),i.length>0&&i.length===n.length?((c=e.sourceDataT2fv()).pushBack(i),a.addSource(c)):i.length>0&&i.length/2!=n.length/3&&console.log("[ERROR] Number of texture coordinates are different than number of points"),a.addPrimitive(t),a}console.log("[ERROR] Invalid length of the points array")}},inherit(e.pointSource,e.source),e.lineSource=function(t,n){"use strict";if(!(this instanceof e.lineSource))return new e.lineSource;e.source.call(this);var r=t,i=n;this.setPositions=function(t){return t instanceof Array?(r=t,this.modified(),!0):(console.log("[ERROR] Invalid data type for positions. Array is required."),!1)},this.setColors=function(t){return t instanceof Array?(i=t,this.modified(),!0):(console.log("[ERROR] Invalid data type for colors. Array is required."),!1)},this.create=function(){if(r)if(r.length%3==0){if(r.length%3==0){var t,n,o,a,s=new e.geometryData,u=r.length/3,c=[];for(c.length=u,t=0;t<u;t+=1)c[t]=t;return(n=new e.lines).setIndices(c),(o=e.sourceDataP3fv()).pushBack(r),s.addSource(o),i&&i.length>0&&i.length===r.length?((a=e.sourceDataC3fv()).pushBack(i),s.addSource(a)):i&&i.length>0&&i.length!==r.length&&console.log("[error] Number of colors are different than number of points"),s.addPrimitive(n),s}console.log("[ERROR] Invalid length of the points array")}else console.log("[error] Line source requires 3d points");else console.log("[error] Invalid positions")}},inherit(e.lineSource,e.source),e.utils=function(){"use strict";return this instanceof e.utils?(e.object.call(this),this):new e.utils},inherit(e.utils,e.object),e.utils.computePowerOfTwo=function(t,e){"use strict";for(e=e||1;e<t;)e*=2;return e},e.utils.createTextureVertexShader=function(t){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 textureCoord;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iTextureCoord = textureCoord;","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createTextureFragmentShader=function(t){"use strict";var n=["varying highp vec3 iTextureCoord;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(texture2D(sampler2d, vec2(iTextureCoord.s, iTextureCoord.t)).xyz, opacity);","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createRgbaTextureFragmentShader=function(t){"use strict";var n=["varying highp vec3 iTextureCoord;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","  mediump vec4 color = vec4(texture2D(sampler2d, vec2(iTextureCoord.s, iTextureCoord.t)).xyzw);","  color.w *= opacity;","  gl_FragColor = color;","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createVertexShader=function(t){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying mediump vec3 iVertexColor;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createPointVertexShader=function(t){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","attribute float vertexSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying mediump vec3 iVertexColor;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize =  vertexSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createVertexShaderSolidColor=function(t){"use strict";var n=["attribute vec3 vertexPosition;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createVertexShaderColorMap=function(t,n,r){"use strict";n=n,r=r;var i=["attribute vec3 vertexPosition;","attribute float vertexScalar;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float lutMin;","uniform float lutMax;","varying mediump float iVertexScalar;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","iVertexScalar = (vertexScalar-lutMin)/(lutMax-lutMin);","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,i)},e.utils.createFragmentShader=function(t){"use strict";var n=["varying mediump vec3 iVertexColor;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(iVertexColor, opacity);","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createPhongVertexShader=function(t){"use strict";var n=["attribute highp vec3 vertexPosition;","attribute mediump vec3 vertexNormal;","attribute mediump vec3 vertexColor;","uniform highp mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 normalMatrix;","varying highp vec4 varPosition;","varying mediump vec3 varNormal;","varying mediump vec3 varVertexColor;","void main(void)","{","varPosition = modelViewMatrix * vec4(vertexPosition, 1.0);","gl_Position = projectionMatrix * varPosition;","varNormal = vec3(normalMatrix * vec4(vertexNormal, 0.0));","varVertexColor = vertexColor;","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createPhongFragmentShader=function(t){"use strict";var n=["uniform mediump float opacity;","precision mediump float;","varying vec3 varNormal;","varying vec4 varPosition;","varying mediump vec3 varVertexColor;","const vec3 lightPos = vec3(0.0, 0.0,10000.0);","const vec3 ambientColor = vec3(0.01, 0.01, 0.01);","const vec3 specColor = vec3(0.0, 0.0, 0.0);","void main() {","vec3 normal = normalize(varNormal);","vec3 lightDir = normalize(lightPos);","vec3 reflectDir = -reflect(lightDir, normal);","vec3 viewDir = normalize(-varPosition.xyz);","float lambertian = max(dot(lightDir, normal), 0.0);","vec3 color = vec3(0.0);","if(lambertian > 0.0) {","  color = lambertian * varVertexColor;","}","gl_FragColor = vec4(color * opacity, 1.0 - opacity);","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createFragmentShaderSolidColor=function(t,n){"use strict";var r=["uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4("+n[0]+","+n[1]+","+n[2]+", opacity);","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,r)},e.utils.createFragmentShaderColorMap=function(t){"use strict";var n=["varying mediump float iVertexScalar;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(texture2D(sampler2d, vec2(iVertexScalar, 0.0)).xyz, opacity);","}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createPointSpritesVertexShader=function(t){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","uniform mediump vec2 pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float height;","varying mediump vec3 iVertexColor;","varying highp float iVertexScalar;","void main(void)","{","mediump float realPointSize = pointSize.y;","if (pointSize.x > pointSize.y) {","  realPointSize = pointSize.x;}","gl_PointSize = realPointSize ;","iVertexScalar = vertexPosition.z;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition.xy, height, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return e.getCachedShader(e.GL.VERTEX_SHADER,t,n)},e.utils.createPointSpritesFragmentShader=function(t){"use strict";var n=["varying mediump vec3 iVertexColor;","varying highp float iVertexScalar;","uniform sampler2D opacityLookup;","uniform highp float lutMin;","uniform highp float lutMax;","uniform sampler2D scalarsToColors;","uniform int useScalarsToColors;","uniform int useVertexColors;","uniform mediump vec2 pointSize;","uniform mediump float vertexColorWeight;","void main(void) {","mediump vec2 realTexCoord;","if (pointSize.x > pointSize.y) {","  realTexCoord = vec2(1.0, pointSize.y/pointSize.x) * gl_PointCoord;","} else {","  realTexCoord = vec2(pointSize.x/pointSize.y, 1.0) * gl_PointCoord;","}","highp float texOpacity = texture2D(opacityLookup, realTexCoord).w;","if (useScalarsToColors == 1) {","  gl_FragColor = vec4(texture2D(scalarsToColors, vec2((iVertexScalar - lutMin)/(lutMax - lutMin), 0.0)).xyz, texOpacity);","} else if (useVertexColors == 1) {","  gl_FragColor = vec4(iVertexColor, texOpacity);","} else {","  gl_FragColor = vec4(texture2D(opacityLookup, realTexCoord).xyz, texOpacity);","}}"].join("\n");return e.getCachedShader(e.GL.FRAGMENT_SHADER,t,n)},e.utils.createTextureMaterial=function(t,n){"use strict";var r,i,o=new e.material,a=new e.blend,s=new e.shaderProgram,u=e.utils.createTextureVertexShader(e.GL),c=null,l=new e.vertexAttribute("vertexPosition"),h=new e.vertexAttribute("textureCoord"),f=new e.floatUniform("pointSize",5),d=new e.projectionUniform("projectionMatrix"),p=new e.uniform(e.GL.INT,"sampler2d");return r=void 0!==n?new e.modelViewOriginUniform("modelViewMatrix",n):new e.modelViewUniform("modelViewMatrix"),p.set(0),s.addVertexAttribute(l,e.vertexAttributeKeys.Position),s.addVertexAttribute(h,e.vertexAttributeKeys.TextureCoordinate),s.addUniform(f),s.addUniform(r),s.addUniform(d),c=t?e.utils.createRgbaTextureFragmentShader(e.GL):e.utils.createTextureFragmentShader(e.GL),i=new e.floatUniform("opacity",1),s.addUniform(i),s.addShader(c),s.addShader(u),o.addAttribute(s),o.addAttribute(a),o},e.utils.createGeometryMaterial=function(){"use strict";var t=new e.material,n=new e.shaderProgram,r=e.utils.createVertexShader(e.GL),i=e.utils.createFragmentShader(e.GL),o=new e.vertexAttribute("vertexPosition"),a=new e.vertexAttribute("vertexColor"),s=new e.floatUniform("pointSize",5),u=new e.floatUniform("opacity",1),c=new e.modelViewUniform("modelViewMatrix"),l=new e.projectionUniform("projectionMatrix");return n.addVertexAttribute(o,e.vertexAttributeKeys.Position),n.addVertexAttribute(a,e.vertexAttributeKeys.Color),n.addUniform(s),n.addUniform(u),n.addUniform(c),n.addUniform(l),n.addShader(i),n.addShader(r),t.addAttribute(n),t},e.utils.createPointGeometryMaterial=function(t){"use strict";t=void 0===t?1:t;var n=new e.material,r=new e.blend,i=new e.shaderProgram,o=e.utils.createPointVertexShader(e.GL),a=e.utils.createFragmentShader(e.GL),s=new e.vertexAttribute("vertexPosition"),u=new e.vertexAttribute("vertexColor"),c=new e.vertexAttribute("vertexSize"),l=new e.floatUniform("opacity",t),h=new e.modelViewUniform("modelViewMatrix"),f=new e.projectionUniform("projectionMatrix");return i.addVertexAttribute(s,e.vertexAttributeKeys.Position),i.addVertexAttribute(u,e.vertexAttributeKeys.Color),i.addVertexAttribute(c,e.vertexAttributeKeys.Scalar),i.addUniform(l),i.addUniform(h),i.addUniform(f),i.addShader(a),i.addShader(o),n.addAttribute(i),n.addAttribute(r),n},e.utils.createPhongMaterial=function(){"use strict";var t=new e.material,n=new e.shaderProgram,r=e.utils.createPhongVertexShader(e.GL),i=e.utils.createPhongFragmentShader(e.GL),o=new e.vertexAttribute("vertexPosition"),a=new e.vertexAttribute("vertexNormal"),s=new e.vertexAttribute("vertexColor"),u=new e.floatUniform("opacity",1),c=new e.modelViewUniform("modelViewMatrix"),l=new e.normalMatrixUniform("normalMatrix"),h=new e.projectionUniform("projectionMatrix");return n.addVertexAttribute(o,e.vertexAttributeKeys.Position),n.addVertexAttribute(a,e.vertexAttributeKeys.Normal),n.addVertexAttribute(s,e.vertexAttributeKeys.Color),n.addUniform(u),n.addUniform(c),n.addUniform(h),n.addUniform(l),n.addShader(i),n.addShader(r),t.addAttribute(n),t},e.utils.createColorMaterial=function(){"use strict";var t=new e.material,n=new e.blend,r=new e.shaderProgram,i=e.utils.createVertexShader(e.GL),o=e.utils.createFragmentShader(e.GL),a=new e.vertexAttribute("vertexPosition"),s=new e.vertexAttribute("textureCoord"),u=new e.vertexAttribute("vertexColor"),c=new e.floatUniform("pointSize",5),l=new e.floatUniform("opacity",1),h=new e.modelViewUniform("modelViewMatrix"),f=new e.projectionUniform("projectionMatrix");return r.addVertexAttribute(a,e.vertexAttributeKeys.Position),r.addVertexAttribute(u,e.vertexAttributeKeys.Color),r.addVertexAttribute(s,e.vertexAttributeKeys.TextureCoordinate),r.addUniform(c),r.addUniform(l),r.addUniform(h),r.addUniform(f),r.addShader(o),r.addShader(i),t.addAttribute(r),t.addAttribute(n),t},e.utils.createColorMappedMaterial=function(t){"use strict";t||(t=new e.lookupTable);var n=t.range(),r=new e.material,i=new e.blend,o=new e.shaderProgram,a=e.utils.createVertexShaderColorMap(e.GL,n[0],n[1]),s=e.utils.createFragmentShaderColorMap(e.GL),u=new e.vertexAttribute("vertexPosition"),c=new e.vertexAttribute("vertexScalar"),l=new e.floatUniform("pointSize",5),h=new e.floatUniform("opacity",1),f=new e.floatUniform("lutMin",n[0]),d=new e.floatUniform("lutMax",n[1]),p=new e.modelViewUniform("modelViewMatrix"),m=new e.projectionUniform("projectionMatrix"),v=t;return new e.uniform(e.GL.FLOAT,"sampler2d").set(0),o.addVertexAttribute(u,e.vertexAttributeKeys.Position),o.addVertexAttribute(c,e.vertexAttributeKeys.Scalar),o.addUniform(l),o.addUniform(h),o.addUniform(f),o.addUniform(d),o.addUniform(p),o.addUniform(m),o.addShader(s),o.addShader(a),r.addAttribute(o),r.addAttribute(i),r.addAttribute(v),r},e.utils.updateColorMappedMaterial=function(t,e){"use strict";if(t)if(e){var n=t.shaderProgram().uniform("lutMin"),r=t.shaderProgram().uniform("lutMax");n.set(e.range()[0]),r.set(e.range()[1]),t.setAttribute(e)}else console.log("[warning] Invalid lookup table. Nothing to update.");else console.log("[warning] Invalid material. Nothing to update.")},e.utils.createSolidColorMaterial=function(t){"use strict";t||(t=[1,1,1]);var n=new e.material,r=new e.blend,i=new e.shaderProgram,o=e.utils.createVertexShaderSolidColor(e.GL),a=e.utils.createFragmentShaderSolidColor(e.GL,t),s=new e.vertexAttribute("vertexPosition"),u=new e.floatUniform("pointSize",5),c=new e.floatUniform("opacity",1),l=new e.modelViewUniform("modelViewMatrix"),h=new e.projectionUniform("projectionMatrix");return i.addVertexAttribute(s,e.vertexAttributeKeys.Position),i.addUniform(u),i.addUniform(c),i.addUniform(l),i.addUniform(h),i.addShader(a),i.addShader(o),n.addAttribute(i),n.addAttribute(r),n},e.utils.createPointSpritesMaterial=function(t,n){"use strict";var r=void 0===n?[0,1]:n.range(),i=new e.material,o=new e.blend,a=new e.shaderProgram,s=e.utils.createPointSpritesVertexShader(e.GL),u=e.utils.createPointSpritesFragmentShader(e.GL),c=new e.vertexAttribute("vertexPosition"),l=new e.vertexAttribute("vertexColor"),h=new e.floatUniform("height",0),f=new e.floatUniform("vertexColorWeight",0),d=new e.floatUniform("lutMin",r[0]),p=new e.floatUniform("lutMax",r[1]),m=new e.modelViewUniform("modelViewMatrix"),v=new e.projectionUniform("projectionMatrix"),g=new e.uniform(e.GL.INT,"opacityLookup"),y=new e.uniform(e.GL.INT,"scalarsToColors"),x=new e.uniform(e.GL.INT,"useScalarsToColors"),_=new e.uniform(e.GL.INT,"useVertexColors"),b=new e.uniform(e.GL.FLOAT_VEC2,"pointSize"),M=new e.texture;return g.set(0),y.set(1),x.set(0),_.set(0),b.set([1,1]),a.addVertexAttribute(c,e.vertexAttributeKeys.Position),a.addVertexAttribute(l,e.vertexAttributeKeys.Color),a.addUniform(h),a.addUniform(f),a.addUniform(m),a.addUniform(v),a.addUniform(g),a.addUniform(_),a.addUniform(x),a.addUniform(b),a.addShader(u),a.addShader(s),i.addAttribute(a),i.addAttribute(o),n&&(a.addUniform(y),x.set(1),a.addUniform(d),a.addUniform(p),n.setTextureUnit(1),i.addAttribute(n)),M.setImage(t),M.setTextureUnit(0),i.addAttribute(M),i},e.utils.createPlane=function(t,n,r,i,o,a,s,u,c){"use strict";var l=new e.mapper,h=new e.planeSource,f=e.utils.createGeometryMaterial(),d=new e.actor;return h.setOrigin(t,n,r),h.setPoint1(i,o,a),h.setPoint2(s,u,c),l.setGeometryData(h.create()),d.setMapper(l),d.setMaterial(f),d},e.utils.createTexturePlane=function(t,n,r,i,o,a,s,u,c,l){"use strict";var h=new e.mapper,f=new e.planeSource,d=e.utils.createTextureMaterial(l,[t,n,r]),p=new e.actor;return f.setPoint1(i-t,o-n,a-r),f.setPoint2(s-t,u-n,c-r),h.setGeometryData(f.create()),p.setMapper(h),p.setMaterial(d),p},e.utils.createPoints=function(t,n,r,i,o){"use strict";if(!t)return console.log("[ERROR] Cannot create points without positions"),null;o=void 0===o?1:o;var a=new e.mapper,s=new e.pointSource,u=e.utils.createPointGeometryMaterial(o),c=new e.actor;return s.setPositions(t),r&&s.setColors(r),i&&s.setTextureCoordinates(i),n?s.setSize(n):s.setSize(1),a.setGeometryData(s.create()),c.setMapper(a),c.setMaterial(u),c},e.utils.createPointSprites=function(t,n,r,i){"use strict";if(!t)return console.log("[ERROR] Point sprites requires an image"),null;if(!n)return console.log("[ERROR] Cannot create points without positions"),null;var o=new e.mapper,a=new e.pointSource,s=e.utils.createPointSpritesMaterial(t),u=new e.actor;return a.setPositions(n),r&&a.setColors(r),i&&a.setTextureCoordinates(i),o.setGeometryData(a.create()),u.setMapper(o),u.setMaterial(s),u},e.utils.createLines=function(t,n){"use strict";if(!t)return console.log("[ERROR] Cannot create points without positions"),null;var r=new e.mapper,i=new e.lineSource,o=e.utils.createGeometryMaterial(),a=new e.actor;return i.setPositions(t),n&&i.setColors(n),r.setGeometryData(i.create()),a.setMapper(r),a.setMaterial(o),a},e.utils.createColorLegend=function(t,n,r,i,o,a,s){"use strict";if(!n)return console.log("[error] Invalid lookup table"),[];var u=r[0]+i,c=r[1],l=r[0],h=r[1]+o,f=[],d=null,p=null,m=e.groupNode();return(p=(d=e.utils.createTexturePlane(r[0],r[1],r[2],u,c,0,l,h,0,!0)).material()).addAttribute(n),d.setMaterial(p),m.addChild(d),d.material().setBinNumber(e.material.RenderBin.Overlay),d.setReferenceFrame(e.boundingObject.ReferenceFrame.Absolute),f.push(d),f=f.concat(function(t,n,r,i,o,a,s,u,c,l,h,f,d,p,m){m=m;var v=null,g=(c-a)/f,y=[],x=[];for(v=0;v<=f;v+=1)y.push(a+g*v),y.push(s),y.push(u),y.push(a+g*v),y.push(s+p),y.push(u);return x=x.concat(function(t,n,r){if(n)if(n.length%3==0){if(r){var i,o=null,a=e.utils.computePowerOfTwo(48),s=0,u=[],c=[],l=[],h=[],f=n[6]-n[0];for(c.length=3,l.length=3,h.length=3,i=0;i<2;i+=1)s=i*(n.length-3),c[0]=n[s]-f,c[1]=n[s+1]-2*f,c[2]=n[s+2],l[0]=n[s]+f,l[1]=c[1],l[2]=c[2],h[0]=c[0],h[1]=n[1],h[2]=c[2],(o=e.utils.createTexturePlane(c[0],c[1],c[2],l[0],l[1],l[2],h[0],h[1],h[2],!0)).setReferenceFrame(e.boundingObject.ReferenceFrame.Absolute),o.material().setBinNumber(e.material.RenderBin.Overlay),o.material().addAttribute(e.utils.create2DTexture(r[i].toFixed(2).toString(),12,null)),u.push(o);return c[0]=.5*(n[0]+n[n.length-3]-a),c[1]=n[1]+4,c[2]=n[2],l[0]=c[0]+a,l[1]=c[1],l[2]=c[2],h[0]=c[0],h[1]=c[1]+a,h[2]=c[2],(o=e.utils.createTexturePlane(c[0],c[1],c[2],l[0],l[1],l[2],h[0],h[1],h[2],!0)).setReferenceFrame(e.boundingObject.ReferenceFrame.Absolute),o.material().setBinNumber(e.material.RenderBin.Overlay),o.material().addAttribute(e.utils.create2DTexture(t,24,null)),u.push(o),u}console.log("[error] Create labels requires Valid range")}else console.log("[error] Create labels require positions array contain 3d points");else console.log("[error] Create labels requires positions (x,y,z) array")}(t,y,n.range()))}(t,n,r[0],r[1],r[1],l,c,0,u,0,0,a,0,5,3))},e.utils.create2DTexture=function(t,n,r,i,o,a,s){"use strict";var u=document.getElementById("textRendering"),c=null,l=e.texture();return i=i||"sans-serif",o=o||"center",a=a||"bottom",void 0===s&&(s=!0),u||(u=document.createElement("canvas")),c=u.getContext("2d"),u.setAttribute("id","textRendering"),u.style.display="none",u.height=e.utils.computePowerOfTwo(8*n),u.width=u.height,c.fillStyle="rgba(0, 0, 0, 0)",c.fillRect(0,0,c.canvas.width,c.canvas.height),c.fillStyle="rgba(200, 85, 10, 1.0)",c.textAlign=o,c.textBaseline=a,c.font=4*n+"px "+i,s&&(c.font="bold "+c.font),c.fillText(t,u.width/2,u.height/2,u.width),l.setImage(u),l.updateDimensions(),l},e.picker=function(){"use strict";if(!(this instanceof e.picker))return new e.picker;e.object.call(this);var t=[];return this.getActors=function(){return t},this.pick=function(e,n,r){if(void 0===e)return 0;if(void 0===n)return 0;if(void 0===r)return 0;t=[];var i,o,a,u,c,l,h,f,d,p,m,v=r.camera(),g=r.width(),y=r.height(),x=v.focalPoint(),_=s.fromValues(x[0],x[1],x[2],1),b=r.worldToDisplay(_,v.viewMatrix(),v.projectionMatrix(),g,y),M=s.fromValues(e,n,b[2],1),w=r.displayToWorld(M,v.viewMatrix(),v.projectionMatrix(),g,y),T=v.position(),A=[];for(a=0;a<3;a+=1)A[a]=w[a]-T[a];for(i=r.sceneRoot().children(),o=0,a=0;a<i.length;a+=1)if(!0===(m=i[a]).visible()){if(u=m.bounds(),A[0]>=0?(c=(u[0]-T[0])/A[0],l=(u[1]-T[0])/A[0]):(c=(u[1]-T[0])/A[0],l=(u[0]-T[0])/A[0]),A[1]>=0?(h=(u[2]-T[1])/A[1],f=(u[3]-T[1])/A[1]):(h=(u[3]-T[1])/A[1],f=(u[2]-T[1])/A[1]),c>f||h>l)continue;if(h>c&&(c=h),f<l&&(l=f),A[2]>=0?(d=(u[4]-T[2])/A[2],p=(u[5]-T[2])/A[2]):(d=(u[5]-T[2])/A[2],p=(u[4]-T[2])/A[2]),c>p||d>l)continue;d>c&&(c=d),p<l&&(l=p),t[o]=m,o+=1}return o},this},inherit(e.picker,e.object),e.shapefileReader=function(){"use strict";if(!(this instanceof e.shapefileReader))return new e.shapefileReader;var t=this;return this.int8=function(t,e){return t.charCodeAt(e)},this.bint32=function(t,e){return((255&t.charCodeAt(e))<<24)+((255&t.charCodeAt(e+1))<<16)+((255&t.charCodeAt(e+2))<<8)+(255&t.charCodeAt(e+3))},this.lint32=function(t,e){return((255&t.charCodeAt(e+3))<<24)+((255&t.charCodeAt(e+2))<<16)+((255&t.charCodeAt(e+1))<<8)+(255&t.charCodeAt(e))},this.bint16=function(t,e){return((255&t.charCodeAt(e))<<8)+(255&t.charCodeAt(e+1))},this.lint16=function(t,e){return((255&t.charCodeAt(e+1))<<8)+(255&t.charCodeAt(e))},this.ldbl64=function(t,e){var n=255&t.charCodeAt(e),r=255&t.charCodeAt(e+1),i=255&t.charCodeAt(e+2),o=255&t.charCodeAt(e+3),a=255&t.charCodeAt(e+4),s=255&t.charCodeAt(e+5),u=255&t.charCodeAt(e+6),c=255&t.charCodeAt(e+7),l=((127&c)<<4)+((240&u)>>4)-1023;return(1-2*(c>>7))*(1+((15&u)*Math.pow(2,48)+s*Math.pow(2,40)+a*Math.pow(2,32)+o*Math.pow(2,24)+i*Math.pow(2,16)+r*Math.pow(2,8)+n)*Math.pow(2,-52))*Math.pow(2,l)},this.lfloat32=function(t,e){var n=255&t.charCodeAt(e),r=255&t.charCodeAt(e+1),i=255&t.charCodeAt(e+2),o=255&t.charCodeAt(e+3),a=((127&o)<<1)+((254&i)>>7)-127;return(1-2*(o>>7))*(1+((127&i)*Math.pow(2,16)+r*Math.pow(2,8)+n)*Math.pow(2,-23))*Math.pow(2,a)},this.str=function(t,e,n){for(var r=[],i=e;i<e+n;){var o=t[i];if(0===o.charCodeAt(0))break;r.push(o),i+=1}return r.join("")},this.readHeader=function(t){return{code:this.bint32(t,0),length:this.bint32(t,24),version:this.lint32(t,28),shapetype:this.lint32(t,32)}},this.loadShx=function(e){for(var n=[],r=function(r){return n.push(2*t.bint32(e,r)),r+8},i=100;i<e.length;)i=r(i);return n},this.Shapefile=function(t){var e=t.path;c.ajax({url:e+".shx",mimeType:"text/plain; charset=x-user-defined",success:function(n){var r=this.loadShx(n);c.ajax({url:e+".shp",mimeType:"text/plain; charset=x-user-defined",success:function(n){c.ajax({url:e+".dbf",mimeType:"text/plain; charset=x-user-defined",success:function(e){var i=this.loadShp(n,e,r,t);t.success(i)}})}})}})},this.localShapefile=function(e){var n=e.shx,r=e.shp,i=e.dbf,o=new FileReader;o.onloadend=function(){var n=t.loadShx(o.result),a=new FileReader;a.onloadend=function(){var r=a.result,o=new FileReader;o.onloadend=function(){var i=o.result,a=t.loadShp(r,i,n,e);e.success(a)},o.readAsBinaryString(i)},a.readAsBinaryString(r)},o.readAsBinaryString(n)},this.loadDBF=function(e){if(4===t.int8(e,0))throw"Level 7 dBASE not supported";for(var n,r=t.lint32(e,4),i=t.lint16(e,8),o=t.lint16(e,10),a=32,s=[];a<i-1;)s.push((n=a,{name:t.str(e,n,10),type:t.str(e,n+11,1),length:t.int8(e,n+16)})),a+=32;for(var u=[],c=i;c<i+r*o;){if("*"===t.str(e,c,1))c+=o;else{c+=1;for(var l={},h=0;h<s.length;h+=1){var f,d=s[h];"C"===d.type?f=t.str(e,c,d.length).trim():"N"===d.type&&(f=parseFloat(t.str(e,c,d.length))),c+=d.length,l[d.name]=f}u.push(l)}}return u},this.loadShp=function(e,n,r,i){i=i;var o,a=[],s=function(n,r,i){for(var o=[],a=i-1;a>=r;a-=1){var s=t.ldbl64(e,n+16*a),u=t.ldbl64(e,n+16*a+8);o.push([s,u])}return o},u=function(n){var r,i,o,u,c,l,h,f,d,p=n+8,m=t.lint32(e,p);if(0===m)console.log("NULL Shape");else if(1===m){var v=t.ldbl64(e,p+4),g=t.ldbl64(e,p+12);a.push({type:"Point",attr:{},geom:[[v,g]]})}else if(5===m){for(r=t.lint32(e,p+36),i=t.lint32(e,p+40),o=n+52,u=n+52+4*r,d=[],c=0;c<r;c+=1)l=t.lint32(e,o+4*c),h=c+1<r?t.lint32(e,o+4*(c+1)):i,f=s(u,l,h),d.push(f);a.push({type:"Polygon",attr:{},geom:[d]})}else{if(3!==m)throw"Not Implemented: "+m;for(r=t.lint32(e,p+36),i=t.lint32(e,p+40),o=n+52,u=n+52+4*r,d=[],c=0;c<r;c+=1)l=t.lint32(e,o+4*c),h=c+1<r?t.lint32(e,o+4*(c+1)):i,f=s(u,l,h),d.push(f);a.push({type:"Polyline",attr:{},geom:[d]})}},c=this.loadDBF(n);for(o=0;o<r.length;o+=1){u(r[o])}var l=[];for(o=0;o<a.length;o+=1){var h=a[o];h.attr=c[o],l.push(h)}return l},this},e.vtkReader=function(){"use strict";if(!(this instanceof e.vtkReader))return new e.vtkReader;var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],n=[],r={},i=null,o=null,s="",u=0,c=0,l=null,h=0;if(0===n.length)for(h=0;h<t.length;h+=1)n[t[h]]=h;return this.ntos=function(t){var e;return 1===(e=t.toString(16)).length&&(e="0"+e),e="%"+e,unescape(e)},this.readReverseBase64=function(){var t;if(!s)return-1;for(;;){if(u>=s.length)return-1;if(t=s.charAt(u),u+=1,n[t])return n[t];if("A"===t)return 0}return-1},this.decode64=function(t){var e="",n=new Array(4),r=!1;for(s=t,u=0;!r&&-1!==(n[0]=this.readReverseBase64())&&-1!==(n[1]=this.readReverseBase64());)n[2]=this.readReverseBase64(),n[3]=this.readReverseBase64(),e+=this.ntos(n[0]<<2&255|n[1]>>4),-1!==n[2]?(e+=this.ntos(n[1]<<4&255|n[2]>>2),-1!==n[3]?e+=this.ntos(n[2]<<6&255|n[3]):r=!0):r=!0;return e},this.readNumber=function(t){return t[c++]+(t[c++]<<8)+(t[c++]<<16)+(t[c++]<<24)},this.readF3Array=function(t,e){var n,r=4*t*3,i=new Int8Array(r);for(n=0;n<r;n+=1)i[n]=e[c],c+=1;return new Float32Array(i.buffer)},this.readColorArray=function(t,e,n){var r,i=0,o=new Array(3*t);for(r=0;r<t;r+=1)o[i++]=e[c++]/255,o[i++]=e[c++]/255,o[i++]=e[c++]/255,c++;n.insert(o)},this.parseObject=function(t){var n,r,i,o,s,u,f,d,p,m,v,g=new e.geometryData,y=e.mapper(),x=[],_=null,b=null,M=null;for(_=atob(t.data),h=0;h<_.length;h+=1)x[h]=255&_.charCodeAt(h);if(c=0,r=this.readNumber(x),n=String.fromCharCode(x[c]),c+=1,g.setName(n),"L"===n)b=this.parseLineData(g,x),M=e.utils.createGeometryMaterial();else if("M"===n)b=this.parseMeshData(g,x),M=e.utils.createPhongMaterial();else if("P"===n)b=this.parsePointData(g,x),M=e.utils.createGeometryMaterial();else{if("C"===n){for(o=this.parseColorMapData(g,x,r),f=[],h=0;h<o.colors.length;h+=1)f.push(o.colors[h][1]),f.push(o.colors[h][2]),f.push(o.colors[h][3]),f.push(255*o.colors[h][0]);return(u=new e.lookupTable).setColorTable(f),d=l.renderWindow().windowSize(),p=o.size[0]*d[0],m=o.size[1]*d[1],(v=[o.position[0]*d[0],(1-o.position[1])*d[1],0])[1]=v[1]-m,m=30,e.utils.createColorLegend(o.title,u,v,p,m,3,0)}console.log("Ignoring unrecognized encoded data type "+n)}return y.setGeometryData(g),t.hasTransparency&&(s=M.shaderProgram().uniform("opacity"),console.log("opacity ",t.opacity),s.set(t.opacity),M.setBinNumber(1e3)),(i=e.actor()).setMapper(y),i.setMaterial(M),i.setMatrix(a.transpose(a.create(),b)),[i]},this.parseLineData=function(t,n){var r,i,o,s,u,l,h,f,d=null,p=null,m=a.create(),v=null,g=0;for(o=this.readNumber(n),v=new Array(3*o),d=new e.sourceDataP3fv,s=this.readF3Array(o,n),f=0;f<o;f+=1)v[g++]=s[3*f],v[g++]=s[3*f+1],v[g++]=s[3*f+2];for(d.insert(v),t.addSource(d),r=new e.sourceDataC3fv,this.readColorArray(o,n,r),t.addSource(r),p=new e.lines,t.addPrimitive(p),i=this.readNumber(n),u=new Int8Array(2*i),f=0;f<2*i;f+=1)u[f]=n[c],c+=1;for(l=new Uint16Array(u.buffer),p.setIndices(l),p.setPrimitiveType(e.GL.LINES),64,u=new Int8Array(64),f=0;f<64;f+=1)u[f]=n[c],c+=1;return h=new Float32Array(u.buffer),a.copy(m,h),m},this.parseMeshData=function(t,n){var r,i,o,s,u,l,h,f,d,p=null,m=a.create(),v=null,g=null,y=0;for(s=this.readNumber(n),g=new Array(6*s),p=new e.sourceDataP3N3f,u=this.readF3Array(s,n),i=this.readF3Array(s,n),d=0;d<s;d+=1)g[y++]=u[3*d],g[y++]=u[3*d+1],g[y++]=u[3*d+2],g[y++]=i[3*d],g[y++]=i[3*d+1],g[y++]=i[3*d+2];for(p.insert(g),t.addSource(p),r=new e.sourceDataC3fv,this.readColorArray(s,n,r),t.addSource(r),l=[],v=new e.triangles,o=this.readNumber(n),l=new Int8Array(2*o),d=0;d<2*o;d+=1)l[d]=n[c],c+=1;for(h=new Uint16Array(l.buffer),v.setIndices(h),t.addPrimitive(v),64,l=new Int8Array(64),d=0;d<64;d+=1)l[d]=n[c],c+=1;return f=new Float32Array(l.buffer),a.copy(m,f),m},this.parsePointData=function(t,n){var r,i,o,s,u,l,f=a.create(),d=null,p=null,m=null,v=0;for(r=this.readNumber(n),m=new Array(3*r),d=new e.sourceDataP3fv,i=this.readF3Array(r,n),o=new Uint16Array(r),h=0;h<r;h+=1)o[h]=h,m[v++]=i[3*h],m[v++]=i[3*h+1],m[v++]=i[3*h+2];for(d.insert(m),t.addSource(d),u=new e.sourceDataC3fv,this.readColorArray(r,n,u),t.addSource(u),(p=new e.points).setIndices(o),t.addPrimitive(p),64,s=new Int8Array(64),h=0;h<64;h+=1)s[h]=n[c],c+=1;return l=new Float32Array(s.buffer),a.copy(f,l),f},this.parseColorMapData=function(t,e,n){var r,i,o,a,s,u={};for(u.numOfColors=n,i=8,r=new Int8Array(i),a=0;a<i;a+=1)r[a]=e[c],c+=1;for(u.position=new Float32Array(r.buffer),i=8,r=new Int8Array(i),a=0;a<i;a+=1)r[a]=e[c],c+=1;for(u.size=new Float32Array(r.buffer),u.colors=[],s=0;s<u.numOfColors;s+=1){for(r=new Int8Array(4),a=0;a<4;a+=1)r[a]=e[c],c+=1;o=[new Float32Array(r.buffer)[0],e[c++],e[c++],e[c++]],u.colors[s]=o}for(u.orientation=e[c++],u.numOfLabels=e[c++],u.title="";c<e.length;)u.title+=String.fromCharCode(e[c++]);return u},this.parseSceneMetadata=function(t,e){var n,r,a,s=i.Renderers[e],u=t.camera();r=(s.size[0]-s.origin[0])*o.width,a=(s.size[1]-s.origin[1])*o.height,t.resize(r,a),u.setCenterOfRotation([s.LookAt[1],s.LookAt[2],s.LookAt[3]]),u.setViewAngleDegrees(s.LookAt[0]),u.setPosition(s.LookAt[7],s.LookAt[8],s.LookAt[9]),u.setFocalPoint(s.LookAt[1],s.LookAt[2],s.LookAt[3]),u.setViewUpDirection(s.LookAt[4],s.LookAt[5],s.LookAt[6]),0===e?(n=s.Background1,t.setBackgroundColor(n[0],n[1],n[2],1)):t.setResizable(!1),t.setLayer(e)},this.initScene=function(){var t,e;if(null===i)return l;for(e=i.Renderers.length-1;e>=0;e-=1)t=this.getRenderer(e),this.parseSceneMetadata(t,e);return l},this.createViewer=function(t){var n;return null===l&&(o=t,(l=e.viewer(t)).init(),l.renderWindow().removeRenderer(l.renderWindow().activeRenderer()),l.renderWindow().addRenderer(new e.depthPeelRenderer),r[0]=l.renderWindow().activeRenderer(),l.renderWindow().resize(t.width,t.height),n=e.pvwInteractorStyle(),l.setInteractorStyle(n)),l},this.deleteViewer=function(){r={},l=null},this.updateCanvas=function(t){return o=t,l.renderWindow().resize(t.width,t.height),l},this.numObjects=function(){return 0},this.getRenderer=function(t){var n;return null!==(n=r[t])&&void 0!==n||((n=new e.renderer).setResetScene(!1),n.setResetClippingRange(!1),l.renderWindow().addRenderer(n),0!==t&&n.camera().setClearMask(e.GL.DepthBufferBit),r[t]=n),n},this.setVtkScene=function(t){i=t},this},e.DataBuffers=function(t){"use strict";if(!(this instanceof e.DataBuffers))return new e.DataBuffers(t);var n,r={};n=t||0===t?t:256;var i=0,o=function(t,e,n,r){if(!t)throw"No destination";n||(n=0),r||(r=e.length);for(var i=0;i<r;i+=1)t[n+i]=e[i]};this.create=function(t,e){if(!e||e<0)throw"Length of buffer must be a positive integer";var i=new Float32Array(n*e);return r[t]={array:i,len:e,dirty:!1},r[t].array},this.alloc=function(t){i+t>=n&&function(t){var e=n;for(2*e<t&&(e=t);e<t;)e*=2;for(var i in n=e,r)if(r.hasOwnProperty(i)){var a=new Float32Array(e*r[i].len),s=r[i].array;o(a,s),r[i].array=a,r[i].dirty=!0}}(i+t);var e=i;return i+=t,e},this.get=function(t){return r[t].array},this.write=function(t,e,i,a){if(i+a>n)throw"Write would exceed buffer size";o(r[t].array,e,i*r[t].len,a*r[t].len),r[t].dirty=!0},this.repeat=function(t,e,i,a){if(i+a>n)throw"Repeat would exceed buffer size";for(var s=0;s<a;s+=1)o(r[t].array,e,(i+s)*r[t].len,r[t].len);r[t].dirty=!0},this.count=function(){return i},this.data=function(t){return r[t].array}},e.depthPeelRenderer=function(){"use strict";if(!(this instanceof e.depthPeelRenderer))return new e.depthPeelRenderer;e.renderer.call(this);var t,n,r,i,o,s,u,c,l,h,f,d=this,p=[],m=[],v=[],g=e.timestamp(),y=e.material(),x=e.material(),_=e.material(),b=null,M=null,w=6,T=null;function A(t,e){T.setMaterial(e),t.m_mapper=T.mapper(),t.m_material=e,t.m_material.bind(t),t.m_mapper.render(t),t.m_material.undoBind(t),T.setMaterial(null)}function E(a){var w,A;g.getMTime()<d.getMTime()&&(w=d.width(),A=d.height(),console.log(w),console.log(A),T=e.utils.createPlane(0,0,0,1,0,0,0,1,0),function(t){var n,a,d,p,m,v,g,w,T,A,E,S,C;d=new e.vertexAttribute("vertexPosition"),v=new e.vertexAttribute("vertexNormal"),p=new e.vertexAttribute("vertexColor"),n=new e.modelViewUniform("modelViewMatrix"),g=new e.modelViewUniform("normalMatrix"),a=new e.projectionUniform("projectionMatrix"),i=new e.floatUniform("width"),o=new e.floatUniform("height"),h=new e.floatUniform("opacity",1),(m=new e.uniform(e.GL.INT,"depthTexture")).set(0),(b=new e.shaderProgram).loadShader(e.GL.VERTEX_SHADER,"front_peel.vert"),b.loadShader(e.GL.FRAGMENT_SHADER,"front_peel.frag"),b.addUniform(n),b.addUniform(g),b.addUniform(a),b.addUniform(m),b.addUniform(i),b.addUniform(o),b.addUniform(h),b.addVertexAttribute(d,e.vertexAttributeKeys.Position),b.addVertexAttribute(v,e.vertexAttributeKeys.Normal),b.addVertexAttribute(p,e.vertexAttributeKeys.Color),b.compileAndLink(t),y.addAttribute(b),(M=new e.shaderProgram).loadShader(e.GL.VERTEX_SHADER,"blend.vert"),M.loadShader(e.GL.FRAGMENT_SHADER,"blend.frag"),T=new e.uniform(e.GL.INT,"currColorTexture"),A=new e.uniform(e.GL.INT,"prevDepthTexture"),E=new e.uniform(e.GL.INT,"currDepthTexture"),s=new e.floatUniform("width"),u=new e.floatUniform("height"),T.set(0),A.set(1),E.set(2),w=new e.vertexAttribute("vertexPosition"),M.addUniform(T),M.addUniform(A),M.addUniform(A),M.addUniform(s),M.addUniform(u),M.addVertexAttribute(w,e.vertexAttributeKeys.Position),M.compileAndLink(t),x.addAttribute(M),(r=new e.shaderProgram).loadShader(e.GL.VERTEX_SHADER,"blend.vert"),r.loadShader(e.GL.FRAGMENT_SHADER,"final.frag"),C=new e.uniform(e.GL.INT,"colorTexture"),c=new e.floatUniform("width"),l=new e.floatUniform("height"),f=new e.uniform(e.GL.FLOAT_VEC3,"backgroundColor"),C.set(0),S=new e.vertexAttribute("vertexPosition"),r.addUniform(C),r.addUniform(c),r.addUniform(l),r.addUniform(f),r.addVertexAttribute(S,e.vertexAttributeKeys.Position),r.compileAndLink(t),_.addAttribute(r)}(a,d.width(),d.height()),function(r,i,o){var a,s,u;if(r.m_context.getExtension("WEBKIT_WEBGL_depth_texture")||r.m_context.getExtension("WEBGL_depth_texture")||console.log("Depth textures are not supported"),r.m_context.getExtension("OES_texture_float")||console.log("float textures are not supported"),!r.m_context.getExtension("OES_texture_float"))return console.log("Extension Texture Float is not working"),void window.alert(":( Sorry, Your browser doesn't support texture float extension.");if(s=r.m_context.getExtension("OES_texture_float_linear"),!r.m_context.getExtension("WEBGL_depth_texture"))return console.log("Extension Depth texture is not working"),void window.alert(":( Sorry, Your browser doesn't support depth texture extension.");for(u=s?e.GL.LINEAR:e.GL.NEAREST,p.push(r.m_context.createFramebuffer()),p.push(r.m_context.createFramebuffer()),m.push(r.m_context.createTexture()),m.push(r.m_context.createTexture()),v.push(r.m_context.createTexture()),v.push(r.m_context.createTexture()),a=0;a<2;a+=1)r.m_context.bindTexture(e.GL.TEXTURE_2D,v[a]),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MAG_FILTER,e.GL.NEAREST),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MIN_FILTER,e.GL.NEAREST),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_S,e.GL.CLAMP_TO_EDGE),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_T,e.GL.CLAMP_TO_EDGE),r.m_context.texImage2D(e.GL.TEXTURE_2D,0,e.GL.DEPTH_COMPONENT,i,o,0,e.GL.DEPTH_COMPONENT,e.GL.UNSIGNED_SHORT,null),r.m_context.bindTexture(e.GL.TEXTURE_2D,m[a]),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MAG_FILTER,u),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MIN_FILTER,u),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_S,e.GL.CLAMP_TO_EDGE),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_T,e.GL.CLAMP_TO_EDGE),r.m_context.texImage2D(e.GL.TEXTURE_2D,0,e.GL.RGBA,i,o,0,e.GL.RGBA,e.GL.FLOAT,null),r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,p[a]),r.m_context.framebufferTexture2D(e.GL.FRAMEBUFFER,e.GL.DEPTH_ATTACHMENT,e.GL.TEXTURE_2D,v[a],0),r.m_context.framebufferTexture2D(e.GL.FRAMEBUFFER,e.GL.COLOR_ATTACHMENT0,e.GL.TEXTURE_2D,m[a],0);t=r.m_context.createTexture(),r.m_context.bindTexture(e.GL.TEXTURE_2D,t),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_S,e.GL.CLAMP_TO_EDGE),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_WRAP_T,e.GL.CLAMP_TO_EDGE),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MIN_FILTER,e.GL.NEAREST),r.m_context.texParameteri(e.GL.TEXTURE_2D,e.GL.TEXTURE_MAG_FILTER,e.GL.NEAREST),r.m_context.texImage2D(e.GL.TEXTURE_2D,0,e.GL.RGBA,i,o,0,e.GL.RGBA,e.GL.FLOAT,null),n=r.m_context.createFramebuffer(),r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,n),r.m_context.framebufferTexture2D(e.GL.FRAMEBUFFER,e.GL.DEPTH_ATTACHMENT,e.GL.TEXTURE_2D,v[0],0),r.m_context.framebufferTexture2D(e.GL.FRAMEBUFFER,e.GL.COLOR_ATTACHMENT0,e.GL.TEXTURE_2D,t,0),r.m_context.checkFramebufferStatus(e.GL.FRAMEBUFFER)===e.GL.FRAMEBUFFER_COMPLETE?console.log("FBO setup successful !!! \n"):console.log("Problem with FBO setup"),r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,null)}(a,d.width(),d.height()),g.modified())}function S(t,n,r){var i,o,s=a.create();for(i=0;i<n.length;i+=1)if((o=n[i][2]).referenceFrame()===e.boundingObject.ReferenceFrame.Relative?(a.multiply(t.m_modelViewMatrix,d.m_camera.viewMatrix(),o.matrix()),t.m_projectionMatrix=d.m_camera.projectionMatrix()):(t.m_modelViewMatrix=o.matrix(),t.m_projectionMatrix=a.create(),a.ortho(t.m_projectionMatrix,0,d.m_width,0,d.m_height,-1,1)),a.invert(s,t.m_modelViewMatrix),a.transpose(t.m_normalMatrix,s),t.m_mapper=o.mapper(),r){var u=o.material().shaderProgram().uniform("opacity");u?h.set(u.get()[0]):h.set(1),t.m_material=r,t.m_material.bind(t),t.m_mapper.render(t),t.m_material.undoBind(t)}else t.m_material=o.material(),t.m_material.bind(t),t.m_mapper.render(t),t.m_material.undoBind(t)}this.render=function(){var r,a,h,g=null,b=[];for((a=new e.renderState).m_renderer=d,a.m_context=d.renderWindow().context(),a.m_contextChanged=d.m_contextChanged,a.m_context.viewport(d.m_x,d.m_y,d.m_width,d.m_height),E(a),(h=d.m_sceneRoot.children()).length>0&&d.m_resetScene&&(this.resetCamera(),d.m_resetScene=!1),r=0;r<h.length;r+=1)(g=h[r]).computeBounds(),g.visible()&&b.push([g.material().binNumber(),g.material().shaderProgram().uniform("opacity").get()[0],g]);b.sort(function(t,e){return t[0]-e[0]}),b.sort(function(t,e){return e[1]-t[1]}),function(r,a){var h;i.set(d.width()),o.set(d.height()),s.set(d.width()),u.set(d.height()),c.set(d.width()),l.set(d.height()),r.m_context.clearColor(0,0,0,0),r.m_context.clear(e.GL.OLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT),r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,n),r.m_context.enable(e.GL.DEPTH_TEST),r.m_context.disable(e.GL.BLEND);var g=d.m_camera.clearColor();r.m_context.clearColor(g[0],g[1],g[2],0),r.m_context.clear(e.GL.COLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT),S(r,a);var b=2*(w-1);for(h=1;h<b;h+=1){var M=h%2,T=1-M;r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,p[M]),r.m_context.disable(e.GL.BLEND),r.m_context.enable(e.GL.DEPTH_TEST),r.m_context.bindTexture(e.GL.TEXTURE_2D,v[T]),r.m_context.clearColor(0,0,0,0),r.m_context.clear(e.GL.COLOR_BUFFER_BIT|e.GL.DEPTH_BUFFER_BIT),S(r,a,y),r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,n),r.m_context.disable(e.GL.DEPTH_TEST),r.m_context.enable(e.GL.BLEND),r.m_context.blendEquation(e.GL.FUNC_ADD),r.m_context.blendFuncSeparate(e.GL.DST_ALPHA,e.GL.ONE,e.GL.ZERO,e.GL.ONE_MINUS_SRC_ALPHA),r.m_context.activeTexture(e.GL.TEXTURE0),r.m_context.bindTexture(e.GL.TEXTURE_2D,m[M]),r.m_context.activeTexture(e.GL.TEXTURE1),r.m_context.bindTexture(e.GL.TEXTURE_2D,v[T]),r.m_context.activeTexture(e.GL.TEXTURE2),r.m_context.bindTexture(e.GL.TEXTURE_2D,v[M]),A(r,x),r.m_context.activeTexture(e.GL.TEXTURE0),r.m_context.disable(e.GL.BLEND)}r.m_context.bindFramebuffer(e.GL.FRAMEBUFFER,null),r.m_context.disable(e.GL.DEPTH_TEST),r.m_context.disable(e.GL.BLEND),r.m_context.bindTexture(e.GL.TEXTURE_2D,t),f.set(d.m_camera.clearColor()),A(r,_),r.m_context.bindTexture(e.GL.TEXTURE_2D,null)}(a,b)}},inherit(e.depthPeelRenderer,e.renderer),e},void 0===(r=function(){return i.vgl=o()}.apply(e,[]))||(t.exports=r)},function(t,e){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=n*s-r*a,x=n*u-i*a,_=n*c-o*a,b=r*u-i*s,M=r*c-o*s,w=i*c-o*u,T=l*m-h*p,A=l*v-f*p,E=l*g-d*p,S=h*v-f*m,C=h*g-d*m,O=f*g-d*v,P=y*O-x*C+_*S+b*E-M*A+w*T;if(!P)return null;return P=1/P,t[0]=(s*O-u*C+c*S)*P,t[1]=(i*C-r*O-o*S)*P,t[2]=(m*w-v*M+g*b)*P,t[3]=(f*M-h*w-d*b)*P,t[4]=(u*E-a*O-c*A)*P,t[5]=(n*O-i*E+o*A)*P,t[6]=(v*_-p*w-g*x)*P,t[7]=(l*w-f*_+d*x)*P,t[8]=(a*C-s*E+c*T)*P,t[9]=(r*E-n*C-o*T)*P,t[10]=(p*M-m*_+g*y)*P,t[11]=(h*_-l*M-d*y)*P,t[12]=(s*A-a*S-u*T)*P,t[13]=(n*S-r*A+i*T)*P,t[14]=(m*x-p*b-v*y)*P,t[15]=(l*b-h*x+f*y)*P,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15];return t[0]=s*(f*g-d*v)-h*(u*g-c*v)+m*(u*d-c*f),t[1]=-(r*(f*g-d*v)-h*(i*g-o*v)+m*(i*d-o*f)),t[2]=r*(u*g-c*v)-s*(i*g-o*v)+m*(i*c-o*u),t[3]=-(r*(u*d-c*f)-s*(i*d-o*f)+h*(i*c-o*u)),t[4]=-(a*(f*g-d*v)-l*(u*g-c*v)+p*(u*d-c*f)),t[5]=n*(f*g-d*v)-l*(i*g-o*v)+p*(i*d-o*f),t[6]=-(n*(u*g-c*v)-a*(i*g-o*v)+p*(i*c-o*u)),t[7]=n*(u*d-c*f)-a*(i*d-o*f)+l*(i*c-o*u),t[8]=a*(h*g-d*m)-l*(s*g-c*m)+p*(s*d-c*h),t[9]=-(n*(h*g-d*m)-l*(r*g-o*m)+p*(r*d-o*h)),t[10]=n*(s*g-c*m)-a*(r*g-o*m)+p*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*v-f*m)-l*(s*v-u*m)+p*(s*f-u*h)),t[13]=n*(h*v-f*m)-l*(r*v-i*m)+p*(r*f-i*h),t[14]=-(n*(s*v-u*m)-a*(r*v-i*m)+p*(r*u-i*s)),t[15]=n*(s*f-u*h)-a*(r*f-i*h)+l*(r*u-i*s),t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15];return(e*a-n*o)*(h*v-f*m)-(e*s-r*o)*(l*v-f*p)+(e*u-i*o)*(l*m-h*p)+(n*s-r*a)*(c*v-f*d)-(n*u-i*a)*(c*m-h*d)+(r*u-i*s)*(c*p-l*d)}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],g=e[14],y=e[15],x=n[0],_=n[1],b=n[2],M=n[3];return t[0]=x*r+_*s+b*h+M*m,t[1]=x*i+_*u+b*f+M*v,t[2]=x*o+_*c+b*d+M*g,t[3]=x*a+_*l+b*p+M*y,x=n[4],_=n[5],b=n[6],M=n[7],t[4]=x*r+_*s+b*h+M*m,t[5]=x*i+_*u+b*f+M*v,t[6]=x*o+_*c+b*d+M*g,t[7]=x*a+_*l+b*p+M*y,x=n[8],_=n[9],b=n[10],M=n[11],t[8]=x*r+_*s+b*h+M*m,t[9]=x*i+_*u+b*f+M*v,t[10]=x*o+_*c+b*d+M*g,t[11]=x*a+_*l+b*p+M*y,x=n[12],_=n[13],b=n[14],M=n[15],t[12]=x*r+_*s+b*h+M*m,t[13]=x*i+_*u+b*f+M*v,t[14]=x*o+_*c+b*d+M*g,t[15]=x*a+_*l+b*p+M*y,t}},function(t,e){t.exports=function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,m=n[0],v=n[1],g=n[2];e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*m+s*v+h*g+e[12],t[13]=i*m+u*v+f*g+e[13],t[14]=o*m+c*v+d*g+e[14],t[15]=a*m+l*v+p*g+e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,m,v,g,y,x,_,b,M,w,T,A,E,S,C=r[0],O=r[1],P=r[2],R=Math.sqrt(C*C+O*O+P*P);if(Math.abs(R)<1e-6)return null;C*=R=1/R,O*=R,P*=R,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],h=e[4],f=e[5],d=e[6],p=e[7],m=e[8],v=e[9],g=e[10],y=e[11],x=C*C*a+o,_=O*C*a+P*i,b=P*C*a-O*i,M=C*O*a-P*i,w=O*O*a+o,T=P*O*a+C*i,A=C*P*a+O*i,E=O*P*a-C*i,S=P*P*a+o,t[0]=s*x+h*_+m*b,t[1]=u*x+f*_+v*b,t[2]=c*x+d*_+g*b,t[3]=l*x+p*_+y*b,t[4]=s*M+h*w+m*T,t[5]=u*M+f*w+v*T,t[6]=c*M+d*w+g*T,t[7]=l*M+p*w+y*T,t[8]=s*A+h*E+m*S,t[9]=u*A+f*E+v*S,t[10]=c*A+d*E+g*S,t[11]=l*A+p*E+y*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t}},function(t,e){t.exports=function(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);if(Math.abs(c)<1e-6)return null;return a*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,f=r*c,d=i*u,p=i*c,m=o*c,v=a*s,g=a*u,y=a*c;return t[0]=1-(d+m),t[1]=h+y,t[2]=f-g,t[3]=0,t[4]=h-y,t[5]=1-(l+m),t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,f=i*a,d=i*s,p=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-h-p,t[1]=l+g,t[2]=f-v,t[3]=0,t[4]=l-g,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}},function(t,e,n){var r=n(222);t.exports=function(t,e,n,i){var o,a,s,u,c,l,h,f,d,p,m=e[0],v=e[1],g=e[2],y=i[0],x=i[1],_=i[2],b=n[0],M=n[1],w=n[2];if(Math.abs(m-b)<1e-6&&Math.abs(v-M)<1e-6&&Math.abs(g-w)<1e-6)return r(t);h=m-b,f=v-M,d=g-w,p=1/Math.sqrt(h*h+f*f+d*d),o=x*(d*=p)-_*(f*=p),a=_*(h*=p)-y*d,s=y*f-x*h,(p=Math.sqrt(o*o+a*a+s*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0);u=f*s-d*a,c=d*o-h*s,l=h*a-f*o,(p=Math.sqrt(u*u+c*c+l*l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0);return t[0]=o,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(o*m+a*v+s*g),t[13]=-(u*m+c*v+l*g),t[14]=-(h*m+f*v+d*g),t[15]=1,t}},function(t,e){t.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},function(t,e){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},function(t,e){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},function(t,e){t.exports=function(t,e,n,r){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},function(t,e){t.exports=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},function(t,e){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}},function(t,e,n){var r=n(225),i=n(224);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),r(t,t),i(t,t,e),t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t[3]=e[3],t}},function(t,e){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(228),i=n(229),o=n(230)},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},function(t,e,n){t.exports=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=n(226)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},function(t,e,n){t.exports=n(231)},function(t,e,n){t.exports=n(232)},function(t,e,n){t.exports=n(233)},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},function(t,e,n){t.exports=n(234)},function(t,e,n){t.exports=n(235)},function(t,e,n){t.exports=n(236)},function(t,e,n){t.exports=n(237)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},function(t,e){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=e[0],t[1]=i+a*c-s*u,t[2]=o+a*u+s*c,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+s*u+a*c,t[1]=e[1],t[2]=o+s*c-a*u,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+a*c-s*u,t[1]=o+a*u+s*c,t[2]=e[2],t}},function(t,e,n){t.exports=function(t,e,n,i,o,a){var s,u;e||(e=3);n||(n=0);u=i?Math.min(i*e+n,t.length):t.length;for(s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=n(227)()},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}},function(t,e){t.exports=function(t){var e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},function(t,e){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(a*s-c*i)+r*(u*i-o*s)}},function(t,e){t.exports=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,f=i*a,d=i*s,p=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-h-p,t[3]=l-g,t[6]=f+v,t[1]=l+g,t[4]=1-c-p,t[7]=d-m,t[2]=f-v,t[5]=d+m,t[8]=1-c-h,t}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*a-s*c,f=-l*o+s*u,d=c*o-a*u,p=n*h+r*f+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-l*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=f*p,t[4]=(l*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1],p=n[2],m=n[3],v=n[4],g=n[5],y=n[6],x=n[7],_=n[8];return t[0]=f*r+d*a+p*c,t[1]=f*i+d*s+p*l,t[2]=f*o+d*u+p*h,t[3]=m*r+v*a+g*c,t[4]=m*i+v*s+g*l,t[5]=m*o+v*u+g*h,t[6]=y*r+x*a+_*c,t[7]=y*i+x*s+_*l,t[8]=y*o+x*u+_*h,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=n*s-r*a,x=n*u-i*a,_=n*c-o*a,b=r*u-i*s,M=r*c-o*s,w=i*c-o*u,T=l*m-h*p,A=l*v-f*p,E=l*g-d*p,S=h*v-f*m,C=h*g-d*m,O=f*g-d*v,P=y*O-x*C+_*S+b*E-M*A+w*T;return P?(P=1/P,t[0]=(s*O-u*C+c*S)*P,t[1]=(u*E-a*O-c*A)*P,t[2]=(a*C-s*E+c*T)*P,t[3]=(i*C-r*O-o*S)*P,t[4]=(n*O-i*E+o*A)*P,t[5]=(r*E-n*C-o*T)*P,t[6]=(m*w-v*M+g*b)*P,t[7]=(v*_-p*w-g*x)*P,t[8]=(p*M-m*_+g*y)*P,t):null}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*r+f*a,t[1]=d*i+f*s,t[2]=d*o+f*u,t[3]=d*a-f*r,t[4]=d*s-f*i,t[5]=d*u-f*o,t[6]=c,t[7]=l,t[8]=h,t}},function(t,e){t.exports=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},function(t,e){t.exports=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+d*a+c,t[7]=f*i+d*s+l,t[8]=f*o+d*u+h,t}},function(t,e){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}},function(t,e,n){"use strict";var r=n(607),i=n(608),o=n(609);function a(t,e,n,i,o){e=e||s,n=n||u,o=o||Array,this.nodeSize=i||64,this.points=t,this.ids=new o(t.length),this.coords=new o(2*t.length);for(var a=0;a<t.length;a++)this.ids[a]=a,this.coords[2*a]=e(t[a]),this.coords[2*a+1]=n(t[a]);r(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function s(t){return t[0]}function u(t){return t[1]}t.exports=function(t,e,n,r,i){return new a(t,e,n,r,i)},a.prototype={range:function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)}}},function(t,e,n){"use strict";function r(t,e,n,r){i(t,n,r),i(e,2*n,2*r),i(e,2*n+1,2*r+1)}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}t.exports=function t(e,n,i,o,a,s){if(a-o<=i)return;var u=Math.floor((o+a)/2);!function t(e,n,i,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),h=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*h*(u-h)/u)*(c-u/2<0?-1:1),d=Math.max(o,Math.floor(i-c*h/u+f)),p=Math.min(a,Math.floor(i+(u-c)*h/u+f));t(e,n,i,d,p,s)}var m=n[2*i+s],v=o,g=a;for(r(e,n,o,i),n[2*a+s]>m&&r(e,n,o,a);v<g;){for(r(e,n,v,g),v++,g--;n[2*v+s]<m;)v++;for(;n[2*g+s]>m;)g--}n[2*o+s]===m?r(e,n,o,g):r(e,n,++g,a),g<=i&&(o=g+1),i<=g&&(a=g-1)}}(e,n,u,o,a,s%2);t(e,n,i,o,u-1,s+1);t(e,n,i,u+1,a,s+1)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a){var s,u,c=[0,t.length-1,0],l=[];for(;c.length;){var h=c.pop(),f=c.pop(),d=c.pop();if(f-d<=a)for(var p=d;p<=f;p++)s=e[2*p],u=e[2*p+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[p]);else{var m=Math.floor((d+f)/2);s=e[2*m],u=e[2*m+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[m]);var v=(h+1)%2;(0===h?n<=s:r<=u)&&(c.push(d),c.push(m-1),c.push(v)),(0===h?i>=s:o>=u)&&(c.push(m+1),c.push(f),c.push(v))}}return l}},function(t,e,n){"use strict";function r(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}t.exports=function(t,e,n,i,o,a){var s=[0,t.length-1,0],u=[],c=o*o;for(;s.length;){var l=s.pop(),h=s.pop(),f=s.pop();if(h-f<=a)for(var d=f;d<=h;d++)r(e[2*d],e[2*d+1],n,i)<=c&&u.push(t[d]);else{var p=Math.floor((f+h)/2),m=e[2*p],v=e[2*p+1];r(m,v,n,i)<=c&&u.push(t[p]);var g=(l+1)%2;(0===l?n-o<=m:i-o<=v)&&(s.push(f),s.push(p-1),s.push(g)),(0===l?n+o>=m:i+o>=v)&&(s.push(p+1),s.push(h),s.push(g))}}return u}},function(t,e,n){"use strict";var r=n(1),i=n(99),o=n(182),a=n(15),s=n(2),u=n(18),c=n(3),l=n(242),h=n(74),f=function t(e){if(!(this instanceof t))return new t(e);i.call(this,e);var r,f,d,p,m=n(142),v=n(23),g=n(5),y=this,x=this._init,_=this._exit,b=this.draw,M=this._update,w=v(),T=null,A=[],E=[],S={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}},C={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};return h.usedStyles.forEach(function(t){S[t]={option:"labelStyle",dataType:C[t]||"text",keys:[t,"label"+t.charAt(0).toUpperCase()+t.slice(1),t.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+t.replace(/([A-Z])/g,"-$1").toLowerCase()]}}),r=c.extend(!0,{},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointColinearity:1*Math.PI/180,finalPointProximity:10,showLabels:!0,clickToEdit:!1},e),this._processAction=function(t){var e;if(t.state&&t.state.actionRecord&&t.state.actionRecord.owner===o.actionOwner&&y.currentAnnotation)switch(y.mode()){case y.modes.edit:e=y.currentAnnotation.processEditAction(t),y.currentAnnotation&&y.currentAnnotation._editHandle&&y.currentAnnotation._editHandle.handle&&(y.geoTrigger(a.annotation.edit_action,{annotation:y.currentAnnotation,handle:y.currentAnnotation._editHandle?y.currentAnnotation._editHandle.handle:void 0,action:t.event}),t.event===a.actionup&&y._selectEditHandle({data:y.currentAnnotation._editHandle.handle},y.currentAnnotation._editHandle.handle.selected));break;default:e=y.currentAnnotation.processAction(t)}y._updateFromEvent(e)},this._updateFromEvent=function(t){switch(t){case"remove":y.removeAnnotation(y.currentAnnotation,!1),y.mode(null);break;case"done":y.mode(null)}t&&(y.modified(),y.draw())},this._handleMouseMove=function(t){y.mode()&&y.currentAnnotation&&(y.currentAnnotation.mouseMove(t)&&(y.modified(),y.draw()))},this._selectEditHandle=function(t,e){if(t.data&&t.data.editHandle){if(c.each(E[o._editHandleFeatureLevel],function(t,e){e.feature.modified()}),y.currentAnnotation.selectEditHandle(t.data,e),y.draw(),y.map().node().toggleClass("annotation-input",!!e),y.map().interactor().removeAction(void 0,void 0,o.actionOwner),e){var n=y.currentAnnotation.actions(o.state.edit);c.each(n,function(t,e){y.map().interactor().addAction(e)})}return y}},this._handleMouseOn=function(t){t.data&&t.data.annotation&&(y.mode()===y.modes.edit&&y.currentAnnotation?y._selectEditHandle(t,!0):y.mode()||y.currentAnnotation||!y.options("clickToEdit")||(t.data.annotation.state(o.state.highlight),y.modified(),y.draw()))},this._handleMouseOff=function(t){t.data&&t.data.annotation&&(y.mode()===y.modes.edit&&t.data.editHandle&&t.data.selected?y._selectEditHandle(t,!1):t.data.annotation.state()===o.state.highlight&&(t.data.annotation.state(o.state.done),y.modified(),y.draw()))},this._handleMouseClick=function(t){var e,n=!1;if(y.mode()===y.modes.edit){if(y.map().interactor().hasAction(void 0,void 0,o.actionOwner))return e=y.currentAnnotation.mouseClickEdit(t),void y._updateFromEvent(e);y.mode(null),y.draw(),c.each(E,function(t,e){c.each(e,function(t,e){e.feature._clearSelectedFeatures()})}),n=!0}else if(y.mode()&&y.currentAnnotation)e=y.currentAnnotation.mouseClick(t),y._updateFromEvent(e),n=!y.mode();else if(!y.mode()&&!y.currentAnnotation&&y.options("clickToEdit")){var r=y.annotations().filter(function(t){return t.state()===o.state.highlight});if(1!==r.length)return;y.mode(y.modes.edit,r[0]),y.draw(),n=!0}n&&y.map().interactor().retriggerMouseMove()},this.options=function(t,e){return void 0===t?r:"string"==typeof t&&void 0===e?r[t]:(void 0===e?r=c.extend(!0,r,t):r[t]=e,y.modified(),y)},this.displayDistance=function(t,e,n,r){var i=y.map();return"display"!==e&&(e=null===e?i.gcs():void 0===e?i.ingcs():e,t=i.gcsToDisplay(t,e)),"display"!==r&&(r=null===r?i.gcs():void 0===r?i.ingcs():r,n=i.gcsToDisplay(n,r)),Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},this.addAnnotation=function(t,e){if(c.inArray(t,A)<0){y.geoTrigger(a.annotation.add_before,{annotation:t}),A.push(t),t.layer(y);var n=y.map();(e=null===e?n.gcs():void 0===e?n.ingcs():e)!==n.gcs()&&t._coordinates(u.transformCoordinates(e,n.gcs(),t._coordinates())),y.modified(),y.draw(),y.geoTrigger(a.annotation.add,{annotation:t})}return y},this.removeAnnotation=function(t,e){var n=c.inArray(t,A);return n>=0&&(t===y.currentAnnotation&&(y.currentAnnotation=null),t._exit(),A.splice(n,1),!1!==e&&(y.modified(),y.draw()),y.geoTrigger(a.annotation.remove,{annotation:t})),n>=0},this.removeAllAnnotations=function(t,e){for(var n,r=0,i=0;i<A.length;)n=A[i],t&&n.state()===o.state.create?i+=1:(y.removeAnnotation(n,!1),r+=1);return r&&!1!==e&&(y.modified(),y.draw()),r},this.annotations=function(){return A.slice()},this.annotationById=function(t){void 0!==t&&null!==t&&(t=+t);var e=A.filter(function(e){return e.id()===t});if(e.length)return e[0]},this.modes={edit:"edit"},this.mode=function(t,e){if(void 0===t)return T;if(t!==T||t===y.modes.edit&&e!==y.editAnnotation){var n,r,i=y.map().node(),s=T;if(T=t,i.toggleClass("annotation-input",!(!T||T===y.modes.edit)),p||(p=l(i[0])),T?p.bind("esc",function(){y.mode(null)}):p.unbind("esc"),y.currentAnnotation){switch(y.currentAnnotation.state()){case o.state.create:y.removeAnnotation(y.currentAnnotation);break;case o.state.edit:y.currentAnnotation.state(o.state.done),y.modified(),y.draw()}y.currentAnnotation=null}switch(T){case y.modes.edit:y.currentAnnotation=e,y.currentAnnotation.state(o.state.edit),y.modified();break;case"line":n=o.lineAnnotation;break;case"point":n=o.pointAnnotation;break;case"polygon":n=o.polygonAnnotation;break;case"rectangle":n=o.rectangleAnnotation}y.map().interactor().removeAction(void 0,void 0,o.actionOwner),n&&(y.currentAnnotation=n({state:o.state.create,layer:this}),y.addAnnotation(y.currentAnnotation,null),r=y.currentAnnotation.actions(o.state.create),c.each(r,function(t,e){y.map().interactor().addAction(e)})),y.geoTrigger(a.annotation.mode,{mode:T,oldMode:s}),s===y.modes.edit&&y.modified()}return y},this.geojson=function(t,e,n,r){if(void 0!==t){var i=s.createFileReader("geojsonReader",{layer:y});if(!i.canRead(t))return;return!0===e&&y.removeAllAnnotations(!0,!1),"update"===e&&c.each(y.annotations(),function(t,e){e.options("updated",!1)}),i.read(t,function(t){c.each(t.slice(),function(t,e){y._geojsonFeatureToAnnotation(e,n),y.deleteFeature(e)})}),"update"===e&&c.each(y.annotations(),function(t,e){!1===e.options("updated")&&e.state()===o.state.done&&y.removeAnnotation(e,!1)}),y.modified(),y.draw(),A.length}t=null;var a=[];return c.each(A,function(t,e){var i=e.geojson(n,r);i&&a.push(i)}),a.length&&(t={type:"FeatureCollection",features:a}),t},this._geojsonFeatureToAnnotation=function(t,e){var n=t.data(),r=s.listAnnotations(),i=y.map();e=null===e?i.gcs():void 0===e?i.ingcs():e,c.each(n,function(n,l){var h,f,d,p,m=(l.properties||{}).annotationType||t.featureType,v=c.extend({},l.properties||{});if(!(c.inArray(m,r)<0)){switch(v.style=v.style||{},v.labelStyle=v.labelStyle||{},delete v.annotationType,t.featureType){case"line":if(!(h=t.line()(l,n))||h.length<2)return;h=h.slice();break;case"polygon":if(!(h=t.polygon()(l,n))||!h.outer||h.outer.length<3)return;if((h=h.outer.slice())[h.length-1][0]===h[0][0]&&h[h.length-1][1]===h[0][1]&&(h.splice(h.length-1,1),h.length<3))return;break;case"point":h=[t.position()(l,n)]}for(d=0;d<h.length;d+=1)h[d]=g.normalizeCoordinates(h[d]);(f=l.crs&&"name"===l.crs.type&&l.crs.properties&&"proj4"===l.crs.properties.type&&l.crs.properties.name?l.crs.properties.name:e)!==i.gcs()&&(h=u.transformCoordinates(f,i.gcs(),h)),v.coordinates=h,c.each(S,function(e,r){var i;c.each(r.keys,function(t,e){void 0===i&&(i=y.validateAttribute(v[e],r.dataType))}),void 0===i&&(i=y.validateAttribute(t.style.get(e)(l,n),r.dataType)),void 0!==i&&(v[r.option||"style"][e]=i)}),c.each(S,function(t,e){c.each(e.keys,function(t,e){delete v[e]})}),void 0!==v.annotationId&&(p=y.annotationById(v.annotationId))&&delete v.annotationId,p&&p.type()===m&&p.state()===o.state.done&&!1===p.options("updated")?(delete v.state,delete v.layer,v.updated=!0,p.options(v),y.geoTrigger(a.annotation.update,{annotation:p})):(v.state=o.state.done,v.layer=y,v.updated="new",y.addAnnotation(s.createAnnotation(m,v),null))}})},this.validateAttribute=function(t,e){var n;if(void 0!==t&&null!==t){switch(e){case"angle":if(""===t)break;if(!(n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+t).toLowerCase()))||!isFinite(n[1]))return;var r="grad"===n[2]?Math.PI/200:"deg"===n[2]?Math.PI/180:"turn"===n[2]?2*Math.PI:1;t=+n[1]*r;break;case"boolean":t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;break;case"booleanOrNumber":if(!t&&0!==t&&""!==t||["true","false","off","on","no","yes"].indexOf((""+t).toLowerCase())>=0)t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;else{if(!g.isNonNullFinite(t))return;t=+t}break;case"coordinate2":if(""===t)break;if(t&&g.isNonNullFinite(t.x)&&g.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}try{t=JSON.parse(t)}catch(t){}if(t&&g.isNonNullFinite(t.x)&&g.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}if(Array.isArray(t)&&g.isNonNullFinite(t[0])&&g.isNonNullFinite(t[1])){t={x:+t[0],y:+t[1]};break}if(!(n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+t))||!isFinite(n[1])||!isFinite(n[2]))return;t={x:+n[1],y:+n[2]};break;case"color":if(void 0===(t=g.convertColor(t))||void 0===t.r)return;break;case"number":if(!g.isNonNullFinite(t))return;t=+t;break;case"numberOrBlank":if(""===t)break;if(!g.isNonNullFinite(t))return;t=+t;break;case"opacity":if(""===t)return;if(t=+t,isNaN(t)||t<0||t>1)return;break;case"positive":if(t=+t,!isFinite(t)||t<=0)return;break;case"text":t=""+t}return t}},this._update=function(){if(y.timestamp()>w.timestamp()){var t=y.options("showLabels")?[]:null,e=y.options("clickToEdit")||y.mode()===y.modes.edit;c.each(E,function(t,e){c.each(e,function(t,e){e.data=[],delete e.feature.scaleOnZoom})}),c.each(A,function(n,r){var i=r.features();if(t){var o=r.labelRecord();o&&t.push(o)}c.each(i,function(t,n){void 0===E[t]&&(E[t]={}),c.each(n,function(n,i){if(E[t][n])(o=E[t][n].feature).selectionAPI()!==!!e&&(o.selectionAPI(e),e?(o.geoOn(a.feature.mouseon,y._handleMouseOn),o.geoOn(a.feature.mouseoff,y._handleMouseOff)):(o.geoOff(a.feature.mouseon,y._handleMouseOn),o.geoOff(a.feature.mouseoff,y._handleMouseOff)));else{var o=y.createFeature(n,{gcs:y.map().gcs(),selectionAPI:e});if(!o){var s="error_feature_"+n;return void(y[s]||(console.warn("Cannot create a "+n+" feature for annotations."),y[s]=!0))}e&&(o.geoOn(a.feature.mouseon,y._handleMouseOn),o.geoOn(a.feature.mouseoff,y._handleMouseOff));var u={};c.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","uniformPolygon"],function(t,e){var n;void 0!==o.style()[e]&&(n=o.style.get(e)),u[e]=function(t,r,i,o){var a=t&&t.style?t.style:t&&t[2]&&t[2].style?t[2].style:i.style,s=a?a[e]:t;return g.isFunction(s)&&(s=s(t,r,i,o)),void 0===s&&n&&(s=n(t,r,i,o)),s}}),o.style(u),E[t][n]={feature:o,style:u,data:[]}}var l=i.data||i;Array.isArray(l)||(l=[l]),l.forEach(function(e){e.annotation=r,E[t][n].data.push(e),i.scaleOnZoom&&(E[t][n].feature.scaleOnZoom=!0)})})})}),c.each(E,function(t,e){c.each(e,function(t,e){e.feature.data(e.data)})}),y._updateLabels(t),w.modified()}return M.call(y,arguments),y},this._updateLabels=function(t){if(!t||!t.length)return y._removeLabelFeature(),y;if(!f){if(!(s.registries.features[y.rendererName()]||{}).text){var e=s.rendererForFeatures(["text"]);d=s.createLayer("feature",y.map(),{renderer:e}),y.addChild(d),d._update(),y.geoTrigger(a.layerAdd,{target:y,layer:d})}var n={};h.usedStyles.forEach(function(t){n[t]=function(e,n){return e.style&&void 0!==e.style[t]?e.style[t]:(y.options("defaultLabelStyle")||{})[t]}}),f=(d||y).createFeature("text",{style:n,gcs:y.map().gcs(),position:function(t){return t.position}})}return f.data(t),y},this._handleZoom=function(){var t,e=y.features();for(t=0;t<e.length;t+=1)e[t].scaleOnZoom&&e[t].modified()},this._removeLabelFeature=function(){return d&&(d._exit(),y.removeChild(d),y.geoTrigger(a.layerRemove,{target:y,layer:d}),d=f=null),f&&(y.removeFeature(f),f=null),y},this.draw=function(){return y._update(),b.call(y),y},this._init=function(){return x.call(y),y.map().interactor()||y.map().interactor(m({actions:[]})),y.geoOn(a.actionselection,y._processAction),y.geoOn(a.actionmove,y._processAction),y.geoOn(a.actionup,y._processAction),y.geoOn(a.mouseclick,y._handleMouseClick),y.geoOn(a.mousemove,y._handleMouseMove),y.geoOn(a.zoom,y._handleZoom),y},this._exit=function(){return p&&p.reset(),y._removeLabelFeature(),_.call(y),A=[],E=[],y},y};r(f,i),s.registerLayer("annotation",f),t.exports=f},function(t,e,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),h="function",f=Math.round,d=Math.abs,p=Date.now;function m(t,e,n){return setTimeout(M(t,n),e)}function v(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var x=y(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),_=y(function(t,e){return x(t,e,!0)},"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function M(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return typeof t==h?t.apply(e&&e[0]||s,e):t}function T(t,e){return t===s?e:t}function A(t,e,n){g(O(e),function(e){t.addEventListener(e,n,!1)})}function E(t,e,n){g(O(e),function(e){t.removeEventListener(e,n,!1)})}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function R(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];P(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function L(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var D=1;function j(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var N="ontouchstart"in i,I=L(i,"PointerEvent")!==s,F=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=25,U=1,G=2,B=4,V=8,q=1,H=2,W=4,X=8,K=16,Y=H|W,Q=X|K,Z=Y|Q,$=["x","y"],J=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&U&&r-i==0,a=e&(B|V)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=nt(e));i>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=rt(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=st(u,c),e.distance=at(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==U&&o.eventType!==B||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var l=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,e.scale=a?(h=a.pointers,f=r,at(f[0],f[1],J)/at(h[0],h[1],J)):1,e.rotation=a?function(t,e){return st(e[1],e[0],J)+st(t[1],t[0],J)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=V&&(u>z||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=it(u,c,l);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=ot(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,f;var m=t.element;S(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:f(t.pointers[n].clientX),clientY:f(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:f(n/e),y:f(r/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?q:d(t)>=d(e)?t<0?H:W:e<0?X:K}function at(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function st(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(j(this.element),this.evWin,this.domHandler)}};var ut={mousedown:U,mousemove:G,mouseup:B},ct="mousedown",lt="mousemove mouseup";function ht(){this.evEl=ct,this.evWin=lt,this.pressed=!1,tt.apply(this,arguments)}b(ht,tt,{handler:function(t){var e=ut[t.type];e&U&&0===t.button&&(this.pressed=!0),e&G&&1!==t.which&&(e=B),this.pressed&&(e&B&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ft={pointerdown:U,pointermove:G,pointerup:B,pointercancel:V,pointerout:V},dt={2:"touch",3:"pen",4:"mouse",5:"kinect"},pt="pointerdown",mt="pointermove pointerup pointercancel";function vt(){this.evEl=pt,this.evWin=mt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(pt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),b(vt,tt,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=dt[t.pointerType]||t.pointerType,a="touch"==o,s=P(e,t.pointerId,"pointerId");i&U&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(B|V)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var gt={touchstart:U,touchmove:G,touchend:B,touchcancel:V},yt="touchstart",xt="touchstart touchmove touchend touchcancel";function _t(){this.evTarget=yt,this.evWin=xt,this.started=!1,tt.apply(this,arguments)}b(_t,tt,{handler:function(t){var e=gt[t.type];if(e===U&&(this.started=!0),this.started){var n=function(t,e){var n=R(t.touches),r=R(t.changedTouches);e&(B|V)&&(n=k(n.concat(r),"identifier",!0));return[n,r]}.call(this,t,e);e&(B|V)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var bt={touchstart:U,touchmove:G,touchend:B,touchcancel:V},Mt="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=Mt,this.targetIds={},tt.apply(this,arguments)}b(wt,tt,{handler:function(t){var e=bt[t.type],n=function(t,e){var n=R(t.touches),r=this.targetIds;if(e&(U|G)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=R(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return S(t.target,u)}),e===U)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;i=0;for(;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(B|V)&&delete r[a[i].identifier],i++;if(!s.length)return;return[k(o.concat(s),"identifier",!0),s]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Tt=2500,At=25;function Et(){tt.apply(this,arguments);var t=M(this.handler,this);this.touch=new wt(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function St(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},Tt)}}b(Et,tt,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(t,e){t&U?(this.primaryTouch=e.changedPointers[0].identifier,St.call(this,e)):t&(B|V)&&St.call(this,e)}).call(this,e,n);else if(i&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=At&&a<=At)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=L(l.style,"touchAction"),Ot=Ct!==s,Pt="auto",Rt="manipulation",kt="none",Lt="pan-x",Dt="pan-y",jt=function(){if(!Ot)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function Nt(t,e){this.manager=t,this.set(e)}Nt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ot&&this.manager.element.style&&jt[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(C(t,kt))return kt;var e=C(t,Lt),n=C(t,Dt);if(e&&n)return kt;if(e||n)return e?Lt:Dt;if(C(t,Rt))return Rt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,kt)&&!jt[kt],o=C(r,Dt)&&!jt[Dt],a=C(r,Lt)&&!jt[Lt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&Y||a&&n&Q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var It=1,Ft=2,zt=4,Ut=8,Gt=Ut,Bt=16;function Vt(t){this.options=u({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=It,this.simultaneous={},this.requireFail=[]}function qt(t){return t&Bt?"cancel":t&Ut?"end":t&zt?"move":t&Ft?"start":""}function Ht(t){return t==K?"down":t==X?"up":t==H?"left":t==W?"right":""}function Wt(t,e){var n=e.manager;return n?n.get(t):t}function Xt(){Vt.apply(this,arguments)}function Kt(){Xt.apply(this,arguments),this.pX=null,this.pY=null}function Yt(){Xt.apply(this,arguments)}function Qt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Xt.apply(this,arguments)}function $t(){Xt.apply(this,arguments)}function Jt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=T(e.recognizers,te.defaults.preset),new ee(t,e)}Vt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Wt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)?this:(t=Wt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Wt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Wt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Ut&&r(e.options.event+qt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Ut&&r(e.options.event+qt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|It)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Gt|Bt|32)&&(this.state=It),this.state=this.process(e),this.state&(Ft|zt|Ut|Bt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Xt,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Ft|zt),i=this.attrTest(t);return r&&(n&V||!i)?e|Bt:r||i?n&B?e|Ut:e&Ft?e|zt:Ft:32}}),b(Kt,Xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&Y&&e.push(Dt),t&Q&&e.push(Lt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Y?(i=0===o?q:o<0?H:W,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?q:a<0?X:K,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Xt.prototype.attrTest.call(this,t)&&(this.state&Ft||!(this.state&Ft)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Yt,Xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ft)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Qt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(B|V)&&!i)this.reset();else if(t.eventType&U)this.reset(),this._timer=m(function(){this.state=Gt,this.tryEmit()},e.time,this);else if(t.eventType&B)return Gt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Gt&&(t&&t.eventType&B?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Zt,Xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ft)}}),b($t,Xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|Q,pointers:1},getTouchAction:function(){return Kt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Y|Q)?e=t.overallVelocity:n&Y?e=t.overallVelocityX:n&Q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&B},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Jt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&U&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=B)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Gt,this.tryEmit()},e.interval,this),Ft):Gt}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Gt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[Yt,{enable:!1},["rotate"]],[$t,{direction:Y}],[Kt,{direction:Y},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Qt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){var n;this.options=u({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(I?vt:F?wt:N?Et:ht))(n,et),this.touchAction=new Nt(this,this.options.touchAction),ne(this,!0),g(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ne(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Gt)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Ft|zt|Ut)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return g(O(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return g(O(t),function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(te,{INPUT_START:U,INPUT_MOVE:G,INPUT_END:B,INPUT_CANCEL:V,STATE_POSSIBLE:It,STATE_BEGAN:Ft,STATE_CHANGED:zt,STATE_ENDED:Ut,STATE_RECOGNIZED:Gt,STATE_CANCELLED:Bt,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:H,DIRECTION_RIGHT:W,DIRECTION_UP:X,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:Q,DIRECTION_ALL:Z,Manager:ee,Input:tt,TouchAction:Nt,TouchInput:wt,MouseInput:ht,PointerEventInput:vt,TouchMouseInput:Et,SingleTouchInput:_t,Recognizer:Vt,AttrRecognizer:Xt,Tap:Jt,Pan:Kt,Swipe:$t,Pinch:Yt,Rotate:Zt,Press:Qt,on:A,off:E,each:g,merge:_,extend:x,assign:u,inherit:b,bindFn:M,prefixed:L}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=te,(r=function(){return te}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},function(t,e,n){var r,i;!function(){var o={version:"3.5.17"},a=[].slice,s=function(t){return a.call(t)},u=this.document;function c(t){return t&&(t.ownerDocument||t.document||t).documentElement}function l(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var h=this.Element.prototype,f=h.setAttribute,d=h.setAttributeNS,p=this.CSSStyleDeclaration.prototype,m=p.setProperty;h.setAttribute=function(t,e){f.call(this,t,e+"")},h.setAttributeNS=function(t,e,n){d.call(this,t,e,n+"")},p.setProperty=function(t,e,n){m.call(this,t,e+"",n)}}function v(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function g(t){return null===t?NaN:+t}function y(t){return!isNaN(t)}function x(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}o.ascending=v,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},o.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},o.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=+t[o])&&(r+=n);else for(;++o<i;)y(n=+e.call(t,t[o],o))&&(r+=n);return r},o.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)y(n=g(t[o]))?r+=n:--a;else for(;++o<i;)y(n=g(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},o.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=g(t[a]))&&r.push(n);else for(;++a<i;)y(n=g(e.call(t,t[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(v),.5)},o.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)y(n=g(t[s]))&&(a+=(r=n-o)*(n-(o+=r/++u)));else for(;++s<i;)y(n=g(e.call(t,t[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++u)));if(u>1)return a/(u-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var _=x(v);function b(t){return t.length}o.bisectLeft=_.left,o.bisect=o.bisectRight=_.right,o.bisector=function(t){return x(1===t.length?function(e,n){return v(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},o.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},o.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},o.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=o.min(t,b),r=new Array(n);++e<n;)for(var i,a=-1,s=r[e]=new Array(i);++a<i;)s[a]=t[a][e];return r},o.zip=function(){return o.transpose(arguments)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var M=Math.abs;function w(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function T(){this._=Object.create(null)}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(M(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},o.map=function(t,e){var n=new T;if(t instanceof T)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var A="__proto__",E="\0";function S(t){return(t+="")===A||t[0]===E?E+t:t}function C(t){return(t+="")[0]===E?t.slice(1):t}function O(t){return S(t)in this._}function P(t){return(t=S(t))in this._&&delete this._[t]}function R(){var t=[];for(var e in this._)t.push(C(e));return t}function k(){var t=0;for(var e in this._)++t;return t}function L(){for(var t in this._)return!1;return!0}function D(){this._=Object.create(null)}function j(t){return t}function N(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function I(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+e;if(i in t)return i}}w(T,{has:O,get:function(t){return this._[S(t)]},set:function(t,e){return this._[S(t)]=e},remove:P,keys:R,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:C(e),value:this._[e]});return t},size:k,empty:L,forEach:function(t){for(var e in this._)t.call(this,C(e),this._[e])}}),o.nest=function(){var t,e,n={},r=[],i=[];function a(i,o,s){if(s>=r.length)return e?e.call(n,o):t?o.sort(t):o;for(var u,c,l,h,f=-1,d=o.length,p=r[s++],m=new T;++f<d;)(h=m.get(u=p(c=o[f])))?h.push(c):m.set(u,[c]);return i?(c=i(),l=function(t,e){c.set(t,a(i,e,s))}):(c={},l=function(t,e){c[t]=a(i,e,s)}),m.forEach(l),c}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=r.length)return e;var o=[],a=i[n++];return e.forEach(function(e,r){o.push({key:e,values:t(r,n)})}),a?o.sort(function(t,e){return a(t.key,e.key)}):o}(a(o.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new D;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},w(D,{has:O,add:function(t){return this._[S(t+="")]=!0,t},remove:P,values:R,size:k,empty:L,forEach:function(t){for(var e in this._)t.call(this,C(e))}}),o.behavior={},o.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=N(t,e,e[n]);return t};var F=["webkit","ms","moz","Moz","o","O"];function z(){}function U(){}function G(t){var e=[],n=new T;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function B(){o.event.preventDefault()}function V(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function q(t){for(var e=new U,n=0,r=arguments.length;++n<r;)e[arguments[n]]=G(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=t,o.event=i,e[i.type].apply(n,r)}finally{o.event=a}}},e}o.dispatch=function(){for(var t=new U,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=G(t);return t},U.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},o.event=null,o.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function X(t){return W(t,Z),t}var K=function(t,e){return e.querySelector(t)},Y=function(t,e){return e.querySelectorAll(t)},Q=function(t,e){var n=t.matches||t[I(t,"matchesSelector")];return(Q=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(K=function(t,e){return Sizzle(t,e)[0]||null},Y=Sizzle,Q=Sizzle.matchesSelector),o.selection=function(){return o.select(u.documentElement)};var Z=o.selection.prototype=[];function $(t){return"function"==typeof t?t:function(){return K(t,this)}}function J(t){return"function"==typeof t?t:function(){return Y(t,this)}}Z.select=function(t){var e,n,r,i,o=[];t=$(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return X(o)},Z.selectAll=function(t){var e,n,r=[];t=J(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,c=a.length;++u<c;)(n=a[u])&&(r.push(e=s(t.call(n,n.__data__,u,i))),e.parentNode=n);return X(r)};var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t,e){return t=o.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function rt(t){return t.trim().replace(/\s+/g," ")}function it(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function ot(t){return(t+"").trim().split(/^|\s+/)}function at(t,e){var n=(t=ot(t).map(st)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function st(t){var e=it(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",rt(i+" "+t))):n.setAttribute("class",rt(i.replace(e," ")))}}function ut(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function ct(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function lt(t){return"function"==typeof t?t:(t=o.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function ht(){var t=this.parentNode;t&&t.removeChild(this)}function ft(t){return{__data__:t}}function dt(t){return function(){return Q(this,t)}}function pt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function mt(t){return W(t,vt),t}o.ns={prefix:et,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),et.hasOwnProperty(n)?{space:et[n],local:t}:t}},Z.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=o.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},Z.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=ot(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!it(t[i]).test(e))return!1;return!0}for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},Z.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(ut(n,t[n],e));return this}if(r<2){var i=this.node();return l(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(ut(t,e,n))},Z.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ct(e,t[e]));return this}return this.each(ct(t,e))},Z.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Z.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Z.append=function(t){return t=lt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Z.insert=function(t,e){return t=lt(t),e=$(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Z.remove=function(){return this.each(ht)},Z.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,l=n.length,h=Math.min(a,l),f=new Array(l),d=new Array(l),p=new Array(a);if(e){var m,v=new T,g=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(v.has(m=e.call(i,i.__data__,r))?p[r]=i:v.set(m,i),g[r]=m);for(r=-1;++r<l;)(i=v.get(m=e.call(n,o=n[r],r)))?!0!==i&&(f[r]=i,i.__data__=o):d[r]=ft(o),v.set(m,!0);for(r=-1;++r<a;)r in g&&!0!==v.get(g[r])&&(p[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=n[r],i?(i.__data__=o,f[r]=i):d[r]=ft(o);for(;r<l;++r)d[r]=ft(n[r]);for(;r<a;++r)p[r]=t[r]}d.update=f,d.parentNode=f.parentNode=p.parentNode=t.parentNode,s.push(d),u.push(f),c.push(p)}var s=mt([]),u=X([]),c=X([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return u.enter=function(){return s},u.exit=function(){return c},u},Z.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Z.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=dt(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return X(i)},Z.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Z.sort=function(t){t=function(t){arguments.length||(t=v);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Z.each=function(t){return pt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Z.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},Z.size=function(){var t=0;return pt(this,function(){++t}),t};var vt=[];function gt(t,e,n){var r="__on"+t,i=t.indexOf("."),a=xt;i>0&&(t=t.slice(0,i));var u=yt.get(t);function c(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}return u&&(t=u,a=_t),i?e?function(){var i=a(e,s(arguments));c.call(this),this.addEventListener(t,this[r]=i,i.$=n),i._=e}:c:e?z:function(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}o.selection.enter=mt,o.selection.enter.prototype=vt,vt.append=Z.append,vt.empty=Z.empty,vt.node=Z.node,vt.call=Z.call,vt.size=Z.size,vt.select=function(t){for(var e,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,s)),n.__data__=o.__data__):e.push(null)}return X(a)},vt.insert=function(t,e){var n,r,i;return arguments.length<2&&(n=this,e=function(t,e,o){var a,s=n[o].update,u=s.length;for(o!=i&&(i=o,r=0),e>=r&&(r=e+1);!(a=s[r])&&++r<u;);return a}),Z.insert.call(this,t,e)},o.select=function(t){var e;return"string"==typeof t?(e=[K(t,u)]).parentNode=u.documentElement:(e=[t]).parentNode=c(t),X([e])},o.selectAll=function(t){var e;return"string"==typeof t?(e=s(Y(t,u))).parentNode=u.documentElement:(e=s(t)).parentNode=null,X([e])},Z.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(gt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(gt(t,e,n))};var yt=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xt(t,e){return function(n){var r=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=r}}}function _t(t,e){var n=xt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}u&&yt.forEach(function(t){"on"+t in u&&yt.remove(t)});var bt,Mt=0;function wt(t){var e=".dragsuppress-"+ ++Mt,n="click"+e,r=o.select(l(t)).on("touchmove"+e,B).on("dragstart"+e,B).on("selectstart"+e,B);if(null==bt&&(bt=!("onselectstart"in t)&&I(t.style,"userSelect")),bt){var i=c(t).style,a=i[bt];i[bt]="none"}return function(t){if(r.on(e,null),bt&&(i[bt]=a),t){var o=function(){r.on(n,null)};r.on(n,function(){B(),o()},!0),setTimeout(o,0)}}}o.mouse=function(t){return At(t,V())};var Tt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function At(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Tt<0){var i=l(t);if(i.scrollX||i.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Tt=!(a.f||a.e),n.remove()}}return Tt?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Et(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=V().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return At(t,r)},o.behavior.drag=function(){var t=q(i,"drag","dragstart","dragend"),e=null,n=a(z,o.mouse,l,"mousemove","mouseup"),r=a(Et,o.touch,j,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,s){return function(){var u,c=o.event.target.correspondingElement||o.event.target,l=this.parentNode,h=t.of(this,arguments),f=0,d=n(),p=".drag"+(null==d?"":"-"+d),m=o.select(i(c)).on(a+p,function(){var t,e,n=r(l,d);if(!n)return;t=n[0]-g[0],e=n[1]-g[1],f|=t|e,g=n,h({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:t,dy:e})}).on(s+p,function(){if(!r(l,d))return;m.on(a+p,null).on(s+p,null),v(f),h({type:"dragend"})}),v=wt(c),g=r(l,d);u=e?[(u=e.apply(this,arguments)).x-g[0],u.y-g[1]]:[0,0],h({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(e=t,i):e},o.rebind(i,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=V().touches),e?s(e).map(function(e){var n=At(t,e);return n.identifier=e.identifier,n}):[]};var St=1e-6,Ct=St*St,Ot=Math.PI,Pt=2*Ot,Rt=Pt-St,kt=Ot/2,Lt=Ot/180,Dt=180/Ot;function jt(t){return t>0?1:t<0?-1:0}function Nt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function It(t){return t>1?0:t<-1?Ot:Math.acos(t)}function Ft(t){return t>1?kt:t<-1?-kt:Math.asin(t)}function zt(t){return((t=Math.exp(t))+1/t)/2}function Ut(t){return(t=Math.sin(t/2))*t}var Gt=Math.SQRT2;o.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<Ct)r=Math.log(c/a)/Gt,n=function(t){return[i+t*l,o+t*h,a*Math.exp(Gt*t*r)]};else{var d=Math.sqrt(f),p=(c*c-a*a+4*f)/(2*a*2*d),m=(c*c-a*a-4*f)/(2*c*2*d),v=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-v)/Gt,n=function(t){var e,n=t*r,s=zt(v),u=a/(2*d)*(s*(e=Gt*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+u*l,o+u*h,a*s/zt(Gt*n+v)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var t,e,n,r,i,a,s,c,h,f={x:0,y:0,k:1},d=[960,500],p=qt,m=250,v=0,g="mousedown.zoom",y="mousemove.zoom",x="mouseup.zoom",_="touchstart.zoom",b=q(M,"zoomstart","zoom","zoomend");function M(t){t.on(g,R).on(Vt+".zoom",L).on("dblclick.zoom",D).on(_,k)}function w(t){return[(t[0]-f.x)/f.k,(t[1]-f.y)/f.k]}function T(t){f.k=Math.max(p[0],Math.min(p[1],t))}function A(t,e){e=function(t){return[t[0]*f.k+f.x,t[1]*f.k+f.y]}(e),f.x+=t[0]-e[0],f.y+=t[1]-e[1]}function E(t,n,r,i){t.__chart__={x:f.x,y:f.y,k:f.k},T(Math.pow(2,i)),A(e=n,r),t=o.select(t),m>0&&(t=t.transition().duration(m)),t.call(M.event)}function S(){s&&s.domain(a.range().map(function(t){return(t-f.x)/f.k}).map(a.invert)),h&&h.domain(c.range().map(function(t){return(t-f.y)/f.k}).map(c.invert))}function C(t){v++||t({type:"zoomstart"})}function O(t){S(),t({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function P(t){--v||(t({type:"zoomend"}),e=null)}function R(){var t=this,e=b.of(t,arguments),n=0,r=o.select(l(t)).on(y,function(){n=1,A(o.mouse(t),i),O(e)}).on(x,function(){r.on(y,null).on(x,null),a(n),P(e)}),i=w(o.mouse(t)),a=wt(t);hs.call(t),C(e)}function k(){var t,e=this,n=b.of(e,arguments),r={},a=0,s=".zoom-"+o.event.changedTouches[0].identifier,u="touchmove"+s,c="touchend"+s,l=[],h=o.select(e),d=wt(e);function p(){var n=o.touches(e);return t=f.k,n.forEach(function(t){t.identifier in r&&(r[t.identifier]=w(t))}),n}function m(){var t=o.event.target;o.select(t).on(u,v).on(c,y),l.push(t);for(var n=o.event.changedTouches,s=0,h=n.length;s<h;++s)r[n[s].identifier]=null;var d=p(),m=Date.now();if(1===d.length){if(m-i<500){var g=d[0];E(e,g,r[g.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),B()}i=m}else if(d.length>1){g=d[0];var x=d[1],_=g[0]-x[0],b=g[1]-x[1];a=_*_+b*b}}function v(){var s,u,c,l,h=o.touches(e);hs.call(e);for(var f=0,d=h.length;f<d;++f,l=null)if(c=h[f],l=r[c.identifier]){if(u)break;s=c,u=l}if(l){var p=(p=c[0]-s[0])*p+(p=c[1]-s[1])*p,m=a&&Math.sqrt(p/a);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],u=[(u[0]+l[0])/2,(u[1]+l[1])/2],T(m*t)}i=null,A(s,u),O(n)}function y(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var a in r)return void p()}o.selectAll(l).on(s,null),h.on(g,R).on(_,k),d(),P(n)}m(),C(n),h.on(g,null).on(_,m)}function L(){var i=b.of(this,arguments);r?clearTimeout(r):(hs.call(this),t=w(e=n||o.mouse(this)),C(i)),r=setTimeout(function(){r=null,P(i)},50),B(),T(Math.pow(2,.002*Bt())*f.k),A(e,t),O(i)}function D(){var t=o.mouse(this),e=Math.log(f.k)/Math.LN2;E(this,t,w(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Vt||(Vt="onwheel"in u?(Bt=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Bt=function(){return o.event.wheelDelta},"mousewheel"):(Bt=function(){return-o.event.detail},"MozMousePixelScroll")),M.event=function(t){t.each(function(){var t=b.of(this,arguments),n=f;ps?o.select(this).transition().each("start.zoom",function(){f=this.__chart__||{x:0,y:0,k:1},C(t)}).tween("zoom:zoom",function(){var r=d[0],i=d[1],a=e?e[0]:r/2,s=e?e[1]:i/2,u=o.interpolateZoom([(a-f.x)/f.k,(s-f.y)/f.k,r/f.k],[(a-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(e){var n=u(e),i=r/n[2];this.__chart__=f={x:a-n[0]*i,y:s-n[1]*i,k:i},O(t)}}).each("interrupt.zoom",function(){P(t)}).each("end.zoom",function(){P(t)}):(this.__chart__=f,C(t),O(t),P(t))})},M.translate=function(t){return arguments.length?(f={x:+t[0],y:+t[1],k:f.k},S(),M):[f.x,f.y]},M.scale=function(t){return arguments.length?(f={x:f.x,y:f.y,k:null},T(+t),S(),M):f.k},M.scaleExtent=function(t){return arguments.length?(p=null==t?qt:[+t[0],+t[1]],M):p},M.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],M):n},M.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],M):d},M.duration=function(t){return arguments.length?(m=+t,M):m},M.x=function(t){return arguments.length?(s=t,a=t.copy(),f={x:0,y:0,k:1},M):s},M.y=function(t){return arguments.length?(h=t,c=t.copy(),f={x:0,y:0,k:1},M):h},o.rebind(M,b,"on")};var Bt,Vt,qt=[0,1/0];function Ht(){}function Wt(t,e,n){return this instanceof Wt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.s,t.l):pe(""+t,me,Wt):new Wt(t,e,n)}o.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},o.hsl=Wt;var Xt=Wt.prototype=new Ht;function Kt(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new ce(o(t+120),o(t),o(t-120))}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.c,t.l):oe(t instanceof $t?t.l:(t=ve((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Yt(t,e,n)}Xt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,this.l/t)},Xt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,t*this.l)},Xt.rgb=function(){return Kt(this.h,this.s,this.l)},o.hcl=Yt;var Qt=Yt.prototype=new Ht;function Zt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new $t(n,Math.cos(t*=Lt)*e,Math.sin(t)*e)}function $t(t,e,n){return this instanceof $t?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Yt?Zt(t.h,t.c,t.l):ve((t=ce(t)).r,t.g,t.b):new $t(t,e,n)}Qt.brighter=function(t){return new Yt(this.h,this.c,Math.min(100,this.l+Jt*(arguments.length?t:1)))},Qt.darker=function(t){return new Yt(this.h,this.c,Math.max(0,this.l-Jt*(arguments.length?t:1)))},Qt.rgb=function(){return Zt(this.h,this.c,this.l).rgb()},o.lab=$t;var Jt=18,te=.95047,ee=1,ne=1.08883,re=$t.prototype=new Ht;function ie(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new ce(ue(3.2404542*(i=ae(i)*te)-1.5371385*(r=ae(r)*ee)-.4985314*(o=ae(o)*ne)),ue(-.969266*i+1.8760108*r+.041556*o),ue(.0556434*i-.2040259*r+1.0572252*o))}function oe(t,e,n){return t>0?new Yt(Math.atan2(n,e)*Dt,Math.sqrt(e*e+n*n),t):new Yt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ue(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ce(t,e,n){return this instanceof ce?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ce?new ce(t.r,t.g,t.b):pe(""+t,ce,Kt):new ce(t,e,n)}function le(t){return new ce(t>>16,t>>8&255,255&t)}function he(t){return le(t)+""}re.brighter=function(t){return new $t(Math.min(100,this.l+Jt*(arguments.length?t:1)),this.a,this.b)},re.darker=function(t){return new $t(Math.max(0,this.l-Jt*(arguments.length?t:1)),this.a,this.b)},re.rgb=function(){return ie(this.l,this.a,this.b)},o.rgb=ce;var fe=ce.prototype=new Ht;function de(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function pe(t,e,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ye(i[0]),ye(i[1]),ye(i[2]))}return(o=xe.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,u=15&o,u|=u<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function me(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(i=u<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new Wt(r,i,u)}function ve(t,e,n){var r=se((.4124564*(t=ge(t))+.3575761*(e=ge(e))+.1804375*(n=ge(n)))/te),i=se((.2126729*t+.7151522*e+.072175*n)/ee);return $t(116*i-16,500*(r-i),200*(i-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ge(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ye(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}fe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ce(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ce(i,i,i)},fe.darker=function(t){return new ce((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},fe.hsl=function(){return me(this.r,this.g,this.b)},fe.toString=function(){return"#"+de(this.r)+de(this.g)+de(this.b)};var xe=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function _e(t){return"function"==typeof t?t:function(){return t}}function be(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Me(e,n,t,r)}}function Me(t,e,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,l=null;function h(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=n.call(i,c)}catch(t){return void a.error.call(i,t)}a.load.call(i,t)}else a.error.call(i,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(t){var e=o.event;o.event=t;try{a.progress.call(i,c)}finally{o.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(l=t,i):l},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(s(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),c.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),c.setRequestHeader)for(var s in u)c.setRequestHeader(s,u[s]);return null!=e&&c.overrideMimeType&&c.overrideMimeType(e),null!=l&&(c.responseType=l),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}xe.forEach(function(t,e){xe.set(t,le(e))}),o.functor=_e,o.xhr=be(j),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=Me(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(u).join(t)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},s=[],u=t.length,c=0,l=0;function h(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<u;){var s,l=1;if(10===(s=t.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(c)&&(++c,++l);else if(s!==r)continue;return t.slice(e,c-l)}return t.slice(e)}for(;(n=h())!==a;){for(var f=[];n!==o&&n!==a;)f.push(n),n=h();e&&null==(f=e(f,l++))||s.push(f)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new D,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(u).join(t)].concat(e.map(function(e){return r.map(function(t){return u(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var we,Te,Ae,Ee,Se=this[I(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ce(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return Te?Te.n=i:we=i,Te=i,Ae||(Ee=clearTimeout(Ee),Ae=1,Se(Oe)),i}function Oe(){var t=Pe(),e=Re()-t;e>24?(isFinite(e)&&(clearTimeout(Ee),Ee=setTimeout(Oe,e)),Ae=0):(Ae=1,Se(Oe))}function Pe(){for(var t=Date.now(),e=we;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Re(){for(var t,e=we,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:we=e.n;return Te=t,n}function ke(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(){Ce.apply(this,arguments)},o.timer.flush=function(){Pe(),Re()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Le=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*M(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});o.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=o.round(t,ke(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Le[8+n/3]};var De=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,je=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,ke(t,e))).toFixed(Math.max(0,Math.min(20,ke(t*(1+1e-15),e))))}});function Ne(t){return t+""}var Ie=o.time={},Fe=Date;function ze(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}ze.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ue.setUTCDate.apply(this._,arguments)},setDay:function(){Ue.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ue.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ue.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ue.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ue.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ue.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ue.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ue.setTime.apply(this._,arguments)}};var Ue=Date.prototype;function Ge(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Fe(n-1)),1),n}function o(t,n){return e(t=new Fe(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Be(t);return s.floor=s,s.round=Be(r),s.ceil=Be(i),s.offset=Be(o),s.range=function(t,e,n){try{Fe=ze;var r=new ze;return r._=t,a(r,e,n)}finally{Fe=Date}},t}function Be(t){return function(e,n){try{Fe=ze;var r=new ze;return r._=e,t(r,n)._}finally{Fe=Date}}}Ie.year=Ge(function(t){return(t=Ie.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Ie.years=Ie.year.range,Ie.years.utc=Ie.year.utc.range,Ie.day=Ge(function(t){var e=new Fe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Ie.days=Ie.day.range,Ie.days.utc=Ie.day.utc.range,Ie.dayOfYear=function(t){var e=Ie.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Ie[t]=Ge(function(t){return(t=Ie.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Ie.year(t).getDay();return Math.floor((Ie.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Ie[t+"s"]=n.range,Ie[t+"s"].utc=n.utc.range,Ie[t+"OfYear"]=function(t){var n=Ie.year(t).getDay();return Math.floor((Ie.dayOfYear(t)+(n+e)%7)/7)}}),Ie.week=Ie.sunday,Ie.weeks=Ie.sunday.range,Ie.weeks.utc=Ie.sunday.utc.range,Ie.weekOfYear=Ie.sundayOfYear;var Ve={"-":"",_:" ",0:"0"},qe=/^\s*\d+/,He=/^%/;function We(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Xe(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function Ke(t){for(var e=new T,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ye(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Qe(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ze(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function $e(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Je(t,e,n){qe.lastIndex=0;var r,i=qe.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function tn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function en(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nn(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rn(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function on(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function an(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sn(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function un(t,e,n){qe.lastIndex=0;var r=qe.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function cn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=M(e)/60|0,i=M(e)%60;return n+We(r,"0",2)+We(i,"0",2)}function ln(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}o.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:j;return function(t){var n=De.exec(t),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",c=n[4]||"",l=n[5],h=+n[6],f=n[7],d=n[8],p=n[9],m=1,v="",g="",y=!1,x=!0;switch(d&&(d=+d.substring(1)),(l||"0"===r&&"="===s)&&(l=r="0",s="="),p){case"n":f=!0,p="g";break;case"%":m=100,g="%",p="f";break;case"p":m=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+p.toLowerCase());case"c":x=!1;case"d":y=!0,d=0;break;case"s":m=-1,p="r"}"$"===c&&(v=i[0],g=i[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=je.get(p)||Ne;var _=l&&f;return function(t){var n=g;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(m<0){var c=o.formatPrefix(t,d);t=c.scale(t),n=c.symbol+g}else t*=m;var b,M,w=(t=p(t,d)).lastIndexOf(".");if(w<0){var T=x?t.lastIndexOf("e"):-1;T<0?(b=t,M=""):(b=t.substring(0,T),M=t.substring(T))}else b=t.substring(0,w),M=e+t.substring(w+1);!l&&f&&(b=a(b,1/0));var A=v.length+b.length+M.length+(_?0:i.length),E=A<h?new Array(A=h-A+1).join(r):"";return _&&(b=a(E+b,E.length?h-M.length:1/0)),i+=v,t=b+M,("<"===s?i+t+E:">"===s?E+i+t:"^"===s?E.substring(0,A>>=1)+i+t+E.substring(A):i+(_?t:E+t))+n}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,u=t.months,c=t.shortMonths;function l(t){var e=t.length;function n(n){for(var r,i,o,a=[],s=-1,u=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Ve[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=b[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Fe!==ze,i=new(r?ze:Fe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function h(t,e,n,r){for(var i,o,a,s=0,u=e.length,c=n.length;s<u;){if(r>=c)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=M[a in Ve?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}l.utc=function(t){var e=l(t);function n(t){try{var n=new(Fe=ze);return n._=t,e(n)}finally{Fe=Date}}return n.parse=function(t){try{Fe=ze;var n=e.parse(t);return n&&n._}finally{Fe=Date}},n.toString=e.toString,n},l.multi=l.utc.multi=hn;var f=o.map(),d=Xe(a),p=Ke(a),m=Xe(s),v=Ke(s),g=Xe(u),y=Ke(u),x=Xe(c),_=Ke(c);i.forEach(function(t,e){f.set(t.toLowerCase(),e)});var b={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:l(e),d:function(t,e){return We(t.getDate(),e,2)},e:function(t,e){return We(t.getDate(),e,2)},H:function(t,e){return We(t.getHours(),e,2)},I:function(t,e){return We(t.getHours()%12||12,e,2)},j:function(t,e){return We(1+Ie.dayOfYear(t),e,3)},L:function(t,e){return We(t.getMilliseconds(),e,3)},m:function(t,e){return We(t.getMonth()+1,e,2)},M:function(t,e){return We(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return We(t.getSeconds(),e,2)},U:function(t,e){return We(Ie.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return We(Ie.mondayOfYear(t),e,2)},x:l(n),X:l(r),y:function(t,e){return We(t.getFullYear()%100,e,2)},Y:function(t,e){return We(t.getFullYear()%1e4,e,4)},Z:cn,"%":function(){return"%"}},M={a:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return h(t,b.c.toString(),e,n)},d:nn,e:nn,H:on,I:on,j:rn,L:un,m:en,M:an,p:function(t,e,n){var r=f.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:sn,U:Qe,w:Ye,W:Ze,x:function(t,e,n){return h(t,b.x.toString(),e,n)},X:function(t,e,n){return h(t,b.X.toString(),e,n)},y:Je,Y:$e,Z:tn,"%":ln};return l}(t)}};var fn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dn(){}o.format=fn.numberFormat,o.geo={},dn.prototype={s:0,t:0,add:function(t){mn(t,this.t,pn),mn(pn.s,this.s,this),this.s?this.t+=pn.t:this.s=pn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pn=new dn;function mn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function vn(t,e){t&&yn.hasOwnProperty(t.type)&&yn[t.type](t,e)}o.geo.stream=function(t,e){t&&gn.hasOwnProperty(t.type)?gn[t.type](t,e):vn(t,e)};var gn={Feature:function(t,e){vn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)vn(n[r].geometry,e)}},yn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xn(n[r],e,0)},Polygon:function(t,e){_n(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)_n(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)vn(n[r],e)}};function xn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function _n(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return bn=0,o.geo.stream(t,Dn),bn};var bn,Mn,wn,Tn,An,En,Sn,Cn,On,Pn,Rn,kn,Ln=new dn,Dn={sphere:function(){bn+=4*Ot},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Ln.reset(),Dn.lineStart=jn},polygonEnd:function(){var t=2*Ln;bn+=t<0?4*Ot+t:t,Dn.lineStart=Dn.lineEnd=Dn.point=z}};function jn(){var t,e,n,r,i;function o(t,e){e=e*Lt/2+Ot/4;var o=(t*=Lt)-n,a=o>=0?1:-1,s=a*o,u=Math.cos(e),c=Math.sin(e),l=i*c,h=r*u+l*Math.cos(s),f=l*a*Math.sin(s);Ln.add(Math.atan2(f,h)),n=t,r=u,i=c}Dn.point=function(a,s){Dn.point=o,n=(t=a)*Lt,r=Math.cos(s=(e=s)*Lt/2+Ot/4),i=Math.sin(s)},Dn.lineEnd=function(){o(t,e)}}function Nn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function In(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Un(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bn(t){return[Math.atan2(t[1],t[0]),Ft(t[2])]}function Vn(t,e){return M(t[0]-e[0])<St&&M(t[1]-e[1])<St}o.geo.bounds=function(){var t,e,n,r,i,a,s,u,c,l,h,f={point:d,lineStart:m,lineEnd:v,polygonStart:function(){f.point=g,f.lineStart=y,f.lineEnd=x,c=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),f.point=d,f.lineStart=m,f.lineEnd=v,Ln<0?(t=-(n=180),e=-(r=90)):c>St?r=90:c<-St&&(e=-90),h[0]=t,h[1]=n}};function d(i,o){l.push(h=[t=i,n=i]),o<e&&(e=o),o>r&&(r=o)}function p(o,a){var s=Nn([o*Lt,a*Lt]);if(u){var c=Fn(u,s),l=Fn([c[1],-c[0],0],c);Gn(l),l=Bn(l);var h=o-i,f=h>0?1:-1,p=l[0]*Dt*f,m=M(h)>180;if(m^(f*i<p&&p<f*o))(v=l[1]*Dt)>r&&(r=v);else if(m^(f*i<(p=(p+360)%360-180)&&p<f*o)){var v;(v=-l[1]*Dt)<e&&(e=v)}else a<e&&(e=a),a>r&&(r=a);m?o<i?_(t,o)>_(t,n)&&(n=o):_(o,n)>_(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>i?_(t,o)>_(t,n)&&(n=o):_(o,n)>_(t,n)&&(t=o)}else d(o,a);u=s,i=o}function m(){f.point=p}function v(){h[0]=t,h[1]=n,f.point=d,u=null}function g(t,e){if(u){var n=t-i;c+=M(n)>180?n+(n>0?360:-360):n}else a=t,s=e;Dn.point(t,e),p(t,e)}function y(){Dn.lineStart()}function x(){g(a,s),Dn.lineEnd(),M(c)>St&&(t=-(n=180)),h[0]=t,h[1]=n,u=null}function _(t,e){return(e-=t)<0?e+360:e}function b(t,e){return t[0]-e[0]}function w(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(r=n=-(t=e=1/0),l=[],o.geo.stream(i,f),c=l.length){l.sort(b);for(var a=1,s=[m=l[0]];a<c;++a)w((d=l[a])[0],m)||w(d[1],m)?(_(m[0],d[1])>_(m[0],m[1])&&(m[1]=d[1]),_(d[0],m[1])>_(m[0],m[1])&&(m[0]=d[0])):s.push(m=d);for(var u,c,d,p=-1/0,m=(a=0,s[c=s.length-1]);a<=c;m=d,++a)d=s[a],(u=_(m[1],d[0]))>p&&(p=u,t=d[0],n=m[1])}return l=h=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),o.geo.centroid=function(t){Mn=wn=Tn=An=En=Sn=Cn=On=Pn=Rn=kn=0,o.geo.stream(t,qn);var e=Pn,n=Rn,r=kn,i=e*e+n*n+r*r;return i<Ct&&(e=Sn,n=Cn,r=On,wn<St&&(e=Tn,n=An,r=En),(i=e*e+n*n+r*r)<Ct)?[NaN,NaN]:[Math.atan2(n,e)*Dt,Ft(r/Math.sqrt(i))*Dt]};var qn={sphere:z,point:Hn,lineStart:Xn,lineEnd:Kn,polygonStart:function(){qn.lineStart=Yn},polygonEnd:function(){qn.lineStart=Xn}};function Hn(t,e){t*=Lt;var n=Math.cos(e*=Lt);Wn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Wn(t,e,n){Tn+=(t-Tn)/++Mn,An+=(e-An)/Mn,En+=(n-En)/Mn}function Xn(){var t,e,n;function r(r,i){r*=Lt;var o=Math.cos(i*=Lt),a=o*Math.cos(r),s=o*Math.sin(r),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*u-n*s)*c+(c=n*a-t*u)*c+(c=t*s-e*a)*c),t*a+e*s+n*u);wn+=c,Sn+=c*(t+(t=a)),Cn+=c*(e+(e=s)),On+=c*(n+(n=u)),Wn(t,e,n)}qn.point=function(i,o){i*=Lt;var a=Math.cos(o*=Lt);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),qn.point=r,Wn(t,e,n)}}function Kn(){qn.point=Hn}function Yn(){var t,e,n,r,i;function o(t,e){t*=Lt;var o=Math.cos(e*=Lt),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(e),c=r*u-i*s,l=i*a-n*u,h=n*s-r*a,f=Math.sqrt(c*c+l*l+h*h),d=n*a+r*s+i*u,p=f&&-It(d)/f,m=Math.atan2(f,d);Pn+=p*c,Rn+=p*l,kn+=p*h,wn+=m,Sn+=m*(n+(n=a)),Cn+=m*(r+(r=s)),On+=m*(i+(i=u)),Wn(n,r,i)}qn.point=function(a,s){t=a,e=s,qn.point=o,a*=Lt;var u=Math.cos(s*=Lt);n=u*Math.cos(a),r=u*Math.sin(a),i=Math.sin(s),Wn(n,r,i)},qn.lineEnd=function(){o(t,e),qn.lineEnd=Kn,qn.point=Hn}}function Qn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Zn(){return!0}function $n(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Vn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var u=new tr(n,t,null,!0),c=new tr(n,null,u,!1);u.o=c,o.push(u),a.push(c),c=new tr(r,null,u=new tr(r,t,null,!1),!0),u.o=c,o.push(u),a.push(c)}}}),a.sort(e),Jn(o),Jn(a),o.length){for(var s=0,u=n,c=a.length;s<c;++s)a[s].e=u=!u;for(var l,h,f=o[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,c=l.length;s<c;++s)i.point((h=l[s])[0],h[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(s=(l=d.p.z).length-1;s>=0;--s)i.point((h=l[s])[0],h[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function Jn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function tr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function er(t,e,n,r){return function(i,a){var s,u=e(a),c=i.invert(r[0],r[1]),l={point:h,lineStart:d,lineEnd:p,polygonStart:function(){l.point=_,l.lineStart=b,l.lineEnd=M,s=[],m=[]},polygonEnd:function(){l.point=h,l.lineStart=d,l.lineEnd=p,s=o.merge(s);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ln.reset();for(var s=0,u=e.length;s<u;++s){var c=e[s],l=c.length;if(l)for(var h=c[0],f=h[0],d=h[1]/2+Ot/4,p=Math.sin(d),m=Math.cos(d),v=1;;){v===l&&(v=0);var g=(t=c[v])[0],y=t[1]/2+Ot/4,x=Math.sin(y),_=Math.cos(y),b=g-f,M=b>=0?1:-1,w=M*b,T=w>Ot,A=p*x;if(Ln.add(Math.atan2(A*M*Math.sin(w),m*_+A*Math.cos(w))),o+=T?b+M*Pt:b,T^f>=n^g>=n){var E=Fn(Nn(h),Nn(t));Gn(E);var S=Fn(i,E);Gn(S);var C=(T^b>=0?-1:1)*Ft(S[2]);(r>C||r===C&&(E[0]||E[1]))&&(a+=T^b>=0?1:-1)}if(!v++)break;f=g,p=x,m=_,h=t}}return(o<-St||o<St&&Ln<-St)^1&a}(c,m);s.length?(x||(a.polygonStart(),x=!0),$n(s,ir,t,n,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),s=m=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function f(t,e){var n=i(t,e);u.point(n[0],n[1])}function d(){l.point=f,u.lineStart()}function p(){l.point=h,u.lineEnd()}var m,v,g=rr(),y=e(g),x=!1;function _(t,e){v.push([t,e]);var n=i(t,e);y.point(n[0],n[1])}function b(){y.lineStart(),v=[]}function M(){_(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),n=g.buffer(),r=n.length;if(v.pop(),m.push(v),v=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(nr))}return l}}function nr(t){return t.length>1}function rr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:z,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ir(t,e){return((t=t.x)[0]<0?t[1]-kt-St:kt-t[1])-((e=e.x)[0]<0?e[1]-kt-St:kt-e[1])}var or=er(Zn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ot:-Ot,u=M(o-n);M(u-Ot)<St?(t.point(n,r=(r+a)/2>0?kt:-kt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ot&&(M(n-i)<St&&(n-=i*St),M(o-s)<St&&(o-=s*St),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return M(a)>St?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*kt,r.point(-Ot,i),r.point(0,i),r.point(Ot,i),r.point(Ot,0),r.point(Ot,-i),r.point(0,-i),r.point(-Ot,-i),r.point(-Ot,0),r.point(-Ot,i);else if(M(t[0]-e[0])>St){var o=t[0]<e[0]?Ot:-Ot;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ot,-Ot/2]);function ar(t,e,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,c=a.y,l=0,h=1,f=s.x-u,d=s.y-c;if(o=t-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=n-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=e-c,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>l&&(l=o)}if(o=r-c,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<h&&(h=o)}return l>0&&(i.a={x:u+l*f,y:c+l*d}),h<1&&(i.b={x:u+h*f,y:c+h*d}),i}}}}}}var sr=1e9;function ur(t,e,n,r){return function(u){var c,l,h,f,d,p,m,v,g,y,x,_=u,b=rr(),M=ar(t,e,n,r),w={point:E,lineStart:function(){w.point=S,l&&l.push(h=[]);y=!0,g=!1,m=v=NaN},lineEnd:function(){c&&(S(f,d),p&&g&&b.rejoin(),c.push(b.buffer()));w.point=E,g&&u.lineEnd()},polygonStart:function(){u=b,c=[],l=[],x=!0},polygonEnd:function(){u=_,c=o.merge(c);var e=function(t){for(var e=0,n=l.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=l[i],u=s.length,c=s[0];a<u;++a)o=s[a],c[1]<=r?o[1]>r&&Nt(c,o,t)>0&&++e:o[1]<=r&&Nt(c,o,t)<0&&--e,c=o;return 0!==e}([t,r]),n=x&&e,i=c.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),T(null,null,1,u),u.lineEnd()),i&&$n(c,a,e,T,u),u.polygonEnd()),c=l=h=null}};function T(o,a,u,c){var l=0,h=0;if(null==o||(l=i(o,u))!==(h=i(a,u))||s(o,a)<0^u>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+u+4)%4)!==h);else c.point(a[0],a[1])}function A(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function E(t,e){A(t,e)&&u.point(t,e)}function S(t,e){var n=A(t=Math.max(-sr,Math.min(sr,t)),e=Math.max(-sr,Math.min(sr,e)));if(l&&h.push([t,e]),y)f=t,d=e,p=n,y=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&g)u.point(t,e);else{var r={a:{x:m,y:v},b:{x:t,y:e}};M(r)?(g||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),x=!1):n&&(u.lineStart(),u.point(t,e),x=!1)}m=t,v=e,g=n}return w};function i(r,i){return M(r[0]-t)<St?i>0?0:3:M(r[0]-n)<St?i>0?2:1:M(r[1]-e)<St?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function cr(t){var e=0,n=Ot/3,r=Rr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ot/180,n=t[1]*Ot/180):[e/Ot*180,n/Ot*180]},i}function lr(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Ft((i-(t*t+n*n)*r*r)/(2*r))]},a}o.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=ur(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return cr(lr)}).raw=lr,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,r,i=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};function c(i){var o=i[0],a=i[1];return t=null,e(o,a),t||(n(o,a),t)||r(o,a),t}return c.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?a:o>=.166&&o<.234&&r>=-.214&&r<-.115?s:i).invert(t)},c.stream=function(t){var e=i.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),s.precision(t),c):i.precision()},c.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),s.scale(t),c.translate(i.translate())):i.scale()},c.translate=function(t){if(!arguments.length)return i.translate();var o=i.scale(),l=+t[0],h=+t[1];return e=i.translate(t).clipExtent([[l-.455*o,h-.238*o],[l+.455*o,h+.238*o]]).stream(u).point,n=a.translate([l-.307*o,h+.201*o]).clipExtent([[l-.425*o+St,h+.12*o+St],[l-.214*o-St,h+.234*o-St]]).stream(u).point,r=s.translate([l-.205*o,h+.212*o]).clipExtent([[l-.214*o+St,h+.166*o+St],[l-.115*o-St,h+.234*o-St]]).stream(u).point,c},c.scale(1070)};var hr,fr,dr,pr,mr,vr,gr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){fr=0,gr.lineStart=yr},polygonEnd:function(){gr.lineStart=gr.lineEnd=gr.point=z,hr+=M(fr/2)}};function yr(){var t,e,n,r;function i(t,e){fr+=r*t-n*e,n=t,r=e}gr.point=function(o,a){gr.point=i,t=n=o,e=r=a},gr.lineEnd=function(){i(t,e)}}var xr={point:function(t,e){t<dr&&(dr=t);t>mr&&(mr=t);e<pr&&(pr=e);e>vr&&(vr=e)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function _r(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var br,Mr={point:wr,lineStart:Tr,lineEnd:Ar,polygonStart:function(){Mr.lineStart=Er},polygonEnd:function(){Mr.point=wr,Mr.lineStart=Tr,Mr.lineEnd=Ar}};function wr(t,e){Tn+=t,An+=e,++En}function Tr(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);Sn+=a*(t+n)/2,Cn+=a*(e+r)/2,On+=a,wr(t=n,e=r)}Mr.point=function(r,i){Mr.point=n,wr(t=r,e=i)}}function Ar(){Mr.point=wr}function Er(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);Sn+=a*(n+t)/2,Cn+=a*(r+e)/2,On+=a,Pn+=(a=r*t-n*e)*(n+t),Rn+=a*(r+e),kn+=3*a,wr(n=t,r=e)}Mr.point=function(o,a){Mr.point=i,wr(t=n=o,e=r=a)},Mr.lineEnd=function(){i(t,e)}}function Sr(t){var e=.5,n=Math.cos(30*Lt),r=16;function i(e){return(r?function(e){var n,i,a,s,u,c,l,h,f,d,p,m,v={point:g,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),v.lineStart=b},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){h=NaN,v.point=x,e.lineStart()}function x(n,i){var a=Nn([n,i]),s=t(n,i);o(h,f,l,d,p,m,h=s[0],f=s[1],l=n,d=a[0],p=a[1],m=a[2],r,e),e.point(h,f)}function _(){v.point=g,e.lineEnd()}function b(){y(),v.point=M,v.lineEnd=w}function M(t,e){x(n=t,e),i=h,a=f,s=d,u=p,c=m,v.point=x}function w(){o(h,f,l,d,p,m,i,a,n,s,u,c,r,e),v.lineEnd=_,_()}return v}:function(e){return Or(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function o(r,i,a,s,u,c,l,h,f,d,p,m,v,g){var y=l-r,x=h-i,_=y*y+x*x;if(_>4*e&&v--){var b=s+d,w=u+p,T=c+m,A=Math.sqrt(b*b+w*w+T*T),E=Math.asin(T/=A),S=M(M(T)-1)<St||M(a-f)<St?(a+f)/2:Math.atan2(w,b),C=t(S,E),O=C[0],P=C[1],R=O-r,k=P-i,L=x*R-y*k;(L*L/_>e||M((y*R+x*k)/_-.5)>.3||s*d+u*p+c*m<n)&&(o(r,i,a,s,u,c,O,P,S,b/=A,w/=A,T,v,g),g.point(O,P),o(O,P,S,b,w,T,l,h,f,d,p,m,v,g))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Cr(t){this.stream=t}function Or(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Pr(t){return Rr(function(){return t})()}function Rr(t){var e,n,r,i,a,s,u=Sr(function(t,n){return[(t=e(t,n))[0]*c+i,a-t[1]*c]}),c=150,l=480,h=250,f=0,d=0,p=0,m=0,v=0,g=or,y=j,x=null,_=null;function b(t){return[(t=r(t[0]*Lt,t[1]*Lt))[0]*c+i,a-t[1]*c]}function w(t){return(t=r.invert((t[0]-i)/c,(a-t[1])/c))&&[t[0]*Dt,t[1]*Dt]}function T(){r=Qn(n=jr(p,m,v),e);var t=e(f,d);return i=l-t[0]*c,a=h+t[1]*c,A()}function A(){return s&&(s.valid=!1,s=null),b}return b.stream=function(t){return s&&(s.valid=!1),(s=kr(g(n,u(y(t))))).valid=!0,s},b.clipAngle=function(t){return arguments.length?(g=null==t?(x=t,or):function(t){var e=Math.cos(t),n=e>0,r=M(e)>St;return er(i,function(t){var e,s,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var d,p=[h,f],m=i(h,f),v=n?m?0:a(h,f):m?a(h+(h<0?Ot:-Ot),f):0;if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(d=o(e,p),(Vn(e,d)||Vn(p,d))&&(p[0]+=St,p[1]+=St,m=i(p[0],p[1]))),m!==u)l=0,m?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&n^m){var g;v&s||!(g=o(p,e,!0))||(l=0,n?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!m||e&&Vn(e,p)||t.point(p[0],p[1]),e=p,u=m,s=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},zr(t,6*Lt),n?[0,-t]:[-Ot,t-Ot]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Fn(Nn(t),Nn(n)),a=In(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,h=Fn(i,o),f=Un(i,c);zn(f,Un(o,l));var d=h,p=In(f,d),m=In(d,d),v=p*p-m*(In(f,f)-1);if(!(v<0)){var g=Math.sqrt(v),y=Un(d,(-p-g)/m);if(zn(y,f),y=Bn(y),!r)return y;var x,_=t[0],b=n[0],w=t[1],T=n[1];b<_&&(x=_,_=b,b=x);var A=b-_,E=M(A-Ot)<St;if(!E&&T<w&&(x=w,w=T,T=x),E||A<St?E?w+T>0^y[1]<(M(y[0]-_)<St?w:T):w<=y[1]&&y[1]<=T:A>Ot^(_<=y[0]&&y[0]<=b)){var S=Un(d,(-p+g)/m);return zn(S,f),[y,Bn(S)]}}}function a(e,r){var i=n?t:Ot-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((x=+t)*Lt),A()):x},b.clipExtent=function(t){return arguments.length?(_=t,y=t?ur(t[0][0],t[0][1],t[1][0],t[1][1]):j,A()):_},b.scale=function(t){return arguments.length?(c=+t,T()):c},b.translate=function(t){return arguments.length?(l=+t[0],h=+t[1],T()):[l,h]},b.center=function(t){return arguments.length?(f=t[0]%360*Lt,d=t[1]%360*Lt,T()):[f*Dt,d*Dt]},b.rotate=function(t){return arguments.length?(p=t[0]%360*Lt,m=t[1]%360*Lt,v=t.length>2?t[2]%360*Lt:0,T()):[p*Dt,m*Dt,v*Dt]},o.rebind(b,u,"precision"),function(){return e=t.apply(this,arguments),b.invert=e.invert&&w,T()}}function kr(t){return Or(t,function(e,n){t.point(e*Lt,n*Lt)})}function Lr(t,e){return[t,e]}function Dr(t,e){return[t>Ot?t-Pt:t<-Ot?t+Pt:t,e]}function jr(t,e,n){return t?e||n?Qn(Ir(t),Fr(e,n)):Ir(t):e||n?Fr(e,n):Dr}function Nr(t){return function(e,n){return[(e+=t)>Ot?e-Pt:e<-Ot?e+Pt:e,n]}}function Ir(t){var e=Nr(t);return e.invert=Nr(-t),e}function Fr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,u=Math.sin(t)*a,c=Math.sin(e),l=c*n+s*r;return[Math.atan2(u*i-l*o,s*n-c*r),Ft(l*i+u*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,u=Math.sin(t)*a,c=Math.sin(e),l=c*i-u*o;return[Math.atan2(u*i+c*o,s*n+l*r),Ft(l*n-s*r)]},a}function zr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var u=a*e;null!=i?(i=Ur(n,i),o=Ur(n,o),(a>0?i<o:i>o)&&(i+=a*Pt)):(i=t+a*Pt,o=t-.5*u);for(var c,l=i;a>0?l>o:l<o;l-=u)s.point((c=Bn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function Ur(t,e){var n=Nn(e);n[0]-=t,Gn(n);var r=It(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-St)%(2*Math.PI)}function Gr(t,e,n){var r=o.range(t,e-St,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Br(t,e,n){var r=o.range(t,e-St,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Vr(t){return t.source}function qr(t){return t.target}o.geo.path=function(){var t,e,n,r,i,a=4.5;function s(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),i&&i.valid||(i=n(r)),o.geo.stream(t,i)),r.result()}function u(){return i=null,s}return s.area=function(t){return hr=0,o.geo.stream(t,n(gr)),hr},s.centroid=function(t){return Tn=An=En=Sn=Cn=On=Pn=Rn=kn=0,o.geo.stream(t,n(Mr)),kn?[Pn/kn,Rn/kn]:On?[Sn/On,Cn/On]:En?[Tn/En,An/En]:[NaN,NaN]},s.bounds=function(t){return mr=vr=-(dr=pr=1/0),o.geo.stream(t,n(xr)),[[dr,pr],[mr,vr]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||(r=e,i=Sr(function(t,e){return r([t*Dt,e*Dt])}),function(t){return kr(i(t))}):j,u()):t;var r,i},s.context=function(t){return arguments.length?(r=null==(e=t)?new function(){var t=_r(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=_r(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}:new function(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:z};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Pt)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}(t),"function"!=typeof a&&r.pointRadius(a),u()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),s):a},s.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new Cr(e);for(var r in t)n[r]=t[r];return n}}},Cr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Pr,o.geo.projectionMutator=Rr,(o.geo.equirectangular=function(){return Pr(Lr)}).raw=Lr.invert=Lr,o.geo.rotation=function(t){function e(e){return(e=t(e[0]*Lt,e[1]*Lt))[0]*=Dt,e[1]*=Dt,e}return t=jr(t[0]%360*Lt,t[1]*Lt,t.length>2?t[2]*Lt:0),e.invert=function(e){return(e=t.invert(e[0]*Lt,e[1]*Lt))[0]*=Dt,e[1]*=Dt,e},e},Dr.invert=Lr,o.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=jr(-t[0]*Lt,-t[1]*Lt,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Dt,t[1]*=Dt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=zr((t=+n)*Lt,r*Lt),i):t},i.precision=function(n){return arguments.length?(e=zr(t*Lt,(r=+n)*Lt),i):r},i.angle(90)},o.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Lt,i=t[1]*Lt,o=e[1]*Lt,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=c*l-u*h*s)*n),u*l+c*h*s)},o.geo.graticule=function(){var t,e,n,r,i,a,s,u,c,l,h,f,d=10,p=d,m=90,v=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:x()}}function x(){return o.range(Math.ceil(r/m)*m,n,m).map(h).concat(o.range(Math.ceil(u/v)*v,s,v).map(f)).concat(o.range(Math.ceil(e/d)*d,t,d).filter(function(t){return M(t%m)>St}).map(c)).concat(o.range(Math.ceil(a/p)*p,i,p).filter(function(t){return M(t%v)>St}).map(l))}return y.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(f(s).slice(1),h(n).reverse().slice(1),f(u).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),u>s&&(t=u,u=s,s=t),y.precision(g)):[[r,u],[n,s]]},y.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),y.precision(g)):[[e,a],[t,i]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],y):[m,v]},y.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],y):[d,p]},y.precision=function(o){return arguments.length?(g=+o,c=Gr(a,i,90),l=Br(e,t,g),h=Gr(u,s,90),f=Br(r,n,g),y):g},y.majorExtent([[-180,-90+St],[180,90-St]]).minorExtent([[-180,-80-St],[180,80+St]])},o.geo.greatArc=function(){var t,e,n=Vr,r=qr;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return i.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,i):n},i.target=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,i):r},i.precision=function(){return arguments.length?i:0},i},o.geo.interpolate=function(t,e){return n=t[0]*Lt,r=t[1]*Lt,i=e[0]*Lt,o=e[1]*Lt,a=Math.cos(r),s=Math.sin(r),u=Math.cos(o),c=Math.sin(o),l=a*Math.cos(n),h=a*Math.sin(n),f=u*Math.cos(i),d=u*Math.sin(i),p=2*Math.asin(Math.sqrt(Ut(o-r)+a*u*Ut(i-n))),m=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*m,n=Math.sin(p-t)*m,r=n*l+e*f,i=n*h+e*d,o=n*s+e*c;return[Math.atan2(i,r)*Dt,Math.atan2(o,Math.sqrt(r*r+i*i))*Dt]}:function(){return[n*Dt,r*Dt]}).distance=p,v;var n,r,i,o,a,s,u,c,l,h,f,d,p,m,v},o.geo.length=function(t){return br=0,o.geo.stream(t,Hr),br};var Hr={sphere:z,point:z,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Lt),a=Math.cos(i),s=M((r*=Lt)-t),u=Math.cos(s);br+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*u)*s),e*o+n*a*u),t=r,e=o,n=a}Hr.point=function(i,o){t=i*Lt,e=Math.sin(o*=Lt),n=Math.cos(o),Hr.point=r},Hr.lineEnd=function(){Hr.point=Hr.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Wr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var Xr=Wr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(o.geo.azimuthalEqualArea=function(){return Pr(Xr)}).raw=Xr;var Kr=Wr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},j);function Yr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Ot/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return $r;function a(t,e){o>0?e<-kt+St&&(e=-kt+St):e>kt-St&&(e=kt-St);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=jt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-kt]},a}function Qr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(M(r)<St)return Lr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-jt(r)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Pr(Kr)}).raw=Kr,(o.geo.conicConformal=function(){return cr(Yr)}).raw=Yr,(o.geo.conicEquidistant=function(){return cr(Qr)}).raw=Qr;var Zr=Wr(function(t){return 1/t},Math.atan);function $r(t,e){return[t,Math.log(Math.tan(Ot/4+e/2))]}function Jr(t){var e,n=Pr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ot*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return Pr(Zr)}).raw=Zr,$r.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-kt]},(o.geo.mercator=function(){return Jr($r)}).raw=$r;var ti=Wr(function(){return 1},Math.asin);(o.geo.orthographic=function(){return Pr(ti)}).raw=ti;var ei=Wr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ni(t,e){return[Math.log(Math.tan(Ot/4+e/2)),-t]}function ri(t){return t[0]}function ii(t){return t[1]}function oi(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Nt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ai(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return Pr(ei)}).raw=ei,ni.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-kt]},(o.geo.transverseMercator=function(){var t=Jr(ni),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ni,o.geom={},o.geom.hull=function(t){var e=ri,n=ii;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=_e(e),o=_e(n),a=t.length,s=[],u=[];for(r=0;r<a;r++)s.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(s.sort(ai),r=0;r<a;r++)u.push([s[r][0],-s[r][1]]);var c=oi(s),l=oi(u),h=l[0]===c[0],f=l[l.length-1]===c[c.length-1],d=[];for(r=c.length-1;r>=0;--r)d.push(t[s[c[r]][2]]);for(r=+h;r<l.length-f;++r)d.push(t[s[l[r]][2]]);return d}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},o.geom.polygon=function(t){return W(t,si),t};var si=o.geom.polygon.prototype=[];function ui(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ci(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,u=t[1],c=n[1],l=e[1]-u,h=r[1]-c,f=(s*(u-c)-h*(i-o))/(h*a-s*l);return[i+f*a,u+f*l]}function li(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}si.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},si.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},si.clip=function(t){for(var e,n,r,i,o,a,s=li(t),u=-1,c=this.length-li(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-s)-1],n=-1;++n<r;)ui(a=e[n],l,i)?(ui(o,l,i)||t.push(ci(o,a,l,i)),t.push(a)):ui(o,l,i)&&t.push(ci(o,a,l,i)),o=a;s&&t.push(t[0]),l=i}return t};var hi,fi,di,pi,mi,vi=[],gi=[];function yi(t){var e=vi.pop()||new function(){Di(this),this.edge=this.site=this.circle=null};return e.site=t,e}function xi(t){Si(t),di.remove(t),vi.push(t),Di(t)}function _i(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];xi(t);for(var u=o;u.circle&&M(n-u.circle.x)<St&&M(r-u.circle.cy)<St;)o=u.P,s.unshift(u),xi(u),u=o;s.unshift(u),Si(u);for(var c=a;c.circle&&M(n-c.circle.x)<St&&M(r-c.circle.cy)<St;)a=c.N,s.push(c),xi(c),c=a;s.push(c),Si(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],Ri(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=Pi(u.site,c.site,null,i),Ei(u),Ei(c)}function bi(t){for(var e,n,r,i,o=t.x,a=t.y,s=di._;s;)if((r=Mi(s,a)-o)>St)s=s.L;else{if(!((i=o-wi(s,a))>St)){r>-St?(e=s.P,n=s):i>-St?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=yi(t);if(di.insert(e,u),e||n){if(e===n)return Si(e),n=yi(e.site),di.insert(u,n),u.edge=n.edge=Pi(e.site,u.site),Ei(e),void Ei(n);if(n){Si(e),Si(n);var c=e.site,l=c.x,h=c.y,f=t.x-l,d=t.y-h,p=n.site,m=p.x-l,v=p.y-h,g=2*(f*v-d*m),y=f*f+d*d,x=m*m+v*v,_={x:(v*y-d*x)/g+l,y:(f*x-m*y)/g+h};Ri(n.edge,c,p,_),u.edge=Pi(c,t,null,_),n.edge=Pi(t,p,null,_),Ei(e),Ei(n)}else u.edge=Pi(e.site,u.site)}}function Mi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,u=n.y,c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function wi(t,e){var n=t.N;if(n)return Mi(n,e);var r=t.site;return r.y===e?r.x:1/0}function Ti(t){this.site=t,this.edges=[]}function Ai(t,e){return e.angle-t.angle}function Ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,c=r.y-s,l=o.x-a,h=2*(u*(v=o.y-s)-c*l);if(!(h>=-Ct)){var f=u*u+c*c,d=l*l+v*v,p=(v*f-c*d)/h,m=(u*d-l*f)/h,v=m+s,g=gi.pop()||new function(){Di(this),this.x=this.y=this.arc=this.site=this.cy=null};g.arc=t,g.site=i,g.x=p+a,g.y=v+Math.sqrt(p*p+m*m),g.cy=v,t.circle=g;for(var y=null,x=mi._;x;)if(g.y<x.y||g.y===x.y&&g.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}mi.insert(y,g),y||(pi=g)}}}}function Si(t){var e=t.circle;e&&(e.P||(pi=e.N),mi.remove(e),gi.push(e),Di(e),t.circle=null)}function Ci(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],c=e[1][1],l=t.l,h=t.r,f=l.x,d=l.y,p=h.x,m=h.y,v=(f+p)/2,g=(d+m)/2;if(m===d){if(v<a||v>=s)return;if(f>p){if(o){if(o.y>=c)return}else o={x:v,y:u};n={x:v,y:c}}else{if(o){if(o.y<u)return}else o={x:v,y:c};n={x:v,y:u}}}else if(i=g-(r=(f-p)/(m-d))*v,r<-1||r>1)if(f>p){if(o){if(o.y>=c)return}else o={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<u)return}else o={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(d<m){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Oi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Pi(t,e,n,r){var i=new Oi(t,e);return hi.push(i),n&&Ri(i,t,e,n),r&&Ri(i,e,t,r),fi[t.i].edges.push(new ki(i,t,e)),fi[e.i].edges.push(new ki(i,e,t)),i}function Ri(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function ki(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Li(){this._=null}function Di(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ji(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ni(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ii(t){for(;t.L;)t=t.L;return t}function Fi(t,e){var n,r,i,o=t.sort(zi).pop();for(hi=[],fi=new Array(t.length),di=new Li,mi=new Li;;)if(i=pi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(fi[o.i]=new Ti(o),bi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;_i(i.arc)}e&&(function(t){for(var e,n=hi,r=ar(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Ci(e=n[i],t)||!r(e)||M(e.a.x-e.b.x)<St&&M(e.a.y-e.b.y)<St)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,u,c,l,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],m=fi,v=m.length;v--;)if((o=m[v])&&o.prepare())for(u=(s=o.edges).length,a=0;a<u;)r=(l=s[a].end()).x,i=l.y,e=(c=s[++a%u].start()).x,n=c.y,(M(r-e)>St||M(i-n)>St)&&(s.splice(a,0,new ki((g=o.site,y=l,x=M(r-h)<St&&p-i>St?{x:h,y:M(e-h)<St?n:p}:M(i-p)<St&&f-r>St?{x:M(n-p)<St?e:f,y:p}:M(r-f)<St&&i-d>St?{x:f,y:M(e-f)<St?n:d}:M(i-d)<St&&r-h>St?{x:M(n-d)<St?e:h,y:d}:null,_=void 0,_=new Oi(g,null),_.a=y,_.b=x,hi.push(_),_),o.site,null)),++u);var g,y,x,_}(e));var a={cells:fi,edges:hi};return di=mi=hi=fi=null,a}function zi(t,e){return e.y-t.y||e.x-t.x}Ti.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ai),e.length},ki.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Li.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ii(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ji(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ni(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ni(this,n),n=(t=n).U),n.C=!1,r.C=!0,ji(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ii(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ji(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ni(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ji(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ni(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ji(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ni(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=ri,n=ii,r=e,i=n,o=Ui;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Fi(s(t),o).cells.forEach(function(o,s){var u=o.edges,c=o.site;(e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/St)*St,y:Math.round(i(t,e)/St)*St,i:e}})}return a.links=function(t){return Fi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Fi(s(t)).cells.forEach(function(n,r){for(var i,o,a,s,u=n.site,c=n.edges.sort(Ai),l=-1,h=c.length,f=c[h-1].edge,d=f.l===u?f.r:f.l;++l<h;)f,i=d,d=(f=c[l].edge).l===u?f.r:f.l,r<i.i&&r<d.i&&(a=i,s=d,((o=u).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[r],t[i.i],t[d.i]])}),e},a.x=function(t){return arguments.length?(r=_e(e=t),a):e},a.y=function(t){return arguments.length?(i=_e(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?Ui:t,a):o===Ui?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Ui?null:o&&o[1]},a};var Ui=[[-1e6,-1e6],[1e6,1e6]];function Gi(t){return t.x}function Bi(t){return t.y}function Vi(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,s=e.g-r,u=e.b-i;return function(t){return"#"+de(Math.round(n+a*t))+de(Math.round(r+s*t))+de(Math.round(i+u*t))}}function qi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Yi(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Hi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Wi(t,e){var n,r,i,o=Xi.lastIndex=Ki.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Xi.exec(t))&&(r=Ki.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Hi(n,r)})),o=Ki.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,r,i){var o,a=ri,s=ii;if(o=arguments.length)return a=Gi,s=Bi,3===o&&(i=n,r=e,n=e=0),u(t);function u(t){var u,c,l,h,f,d,p,m,v,g=_e(a),y=_e(s);if(null!=e)d=e,p=n,m=r,v=i;else if(m=v=-(d=p=1/0),c=[],l=[],f=t.length,o)for(h=0;h<f;++h)(u=t[h]).x<d&&(d=u.x),u.y<p&&(p=u.y),u.x>m&&(m=u.x),u.y>v&&(v=u.y),c.push(u.x),l.push(u.y);else for(h=0;h<f;++h){var x=+g(u=t[h],h),_=+y(u,h);x<d&&(d=x),_<p&&(p=_),x>m&&(m=x),_>v&&(v=_),c.push(x),l.push(_)}var b=m-d,w=v-p;function T(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(M(u-n)+M(c-r)<.01)A(t,e,n,r,i,o,a,s);else{var l=t.point;t.x=t.y=t.point=null,A(t,l,u,c,i,o,a,s),A(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else A(t,e,n,r,i,o,a,s)}function A(t,e,n,r,i,o,a,s){var u=.5*(i+a),c=.5*(o+s),l=n>=u,h=r>=c,f=h<<1|l;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(E,t,+g(t,++h),+y(t,h),d,p,m,v)}}),l?i=u:a=u,h?o=c:s=c,T(t,e,n,r,i,o,a,s)}b>w?v=p+b:m=d+w;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(E,t,+g(t,++h),+y(t,h),d,p,m,v)}};if(E.visit=function(t){!function t(e,n,r,i,o,a){if(!e(n,r,i,o,a)){var s=.5*(r+o),u=.5*(i+a),c=n.nodes;c[0]&&t(e,c[0],r,i,s,u),c[1]&&t(e,c[1],s,i,o,u),c[2]&&t(e,c[2],r,u,s,a),c[3]&&t(e,c[3],s,u,o,a)}}(t,E,d,p,m,v)},E.find=function(t){return function(t,e,n,r,i,o,a){var s,u=1/0;return function t(c,l,h,f,d){if(!(l>o||h>a||f<r||d<i)){if(p=c.point){var p,m=e-c.x,v=n-c.y,g=m*m+v*v;if(g<u){var y=Math.sqrt(u=g);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var x=c.nodes,_=.5*(l+f),b=.5*(h+d),M=(n>=b)<<1|e>=_,w=M+4;M<w;++M)if(c=x[3&M])switch(3&M){case 0:t(c,l,h,_,b);break;case 1:t(c,_,h,f,b);break;case 2:t(c,l,b,_,d);break;case 3:t(c,_,b,f,d)}}}(t,r,i,o,a),s}(E,t[0],t[1],d,p,m,v)},h=-1,null==e){for(;++h<f;)T(E,t[h],c[h],l[h],d,p,m,v);--h}else t.forEach(E.add);return c=l=t=u=null,E}return u.x=function(t){return arguments.length?(a=t,u):a},u.y=function(t){return arguments.length?(s=t,u):s},u.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),u):null==e?null:[[e,n],[r,i]]},u.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),u):null==e?null:[r-e,i-n]},u},o.interpolateRgb=Vi,o.interpolateObject=qi,o.interpolateNumber=Hi,o.interpolateString=Wi;var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(Xi.source,"g");function Yi(t,e){for(var n,r=o.interpolators.length;--r>=0&&!(n=o.interpolators[r](t,e)););return n}function Qi(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Yi(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}o.interpolate=Yi,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?xe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Vi:Wi:e instanceof Ht?Vi:Array.isArray(e)?Qi:"object"===n&&isNaN(e)?qi:Hi)(t,e)}],o.interpolateArray=Qi;var Zi=function(){return j},$i=o.map({linear:Zi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return no},cubic:function(){return ro},sin:function(){return oo},exp:function(){return ao},circle:function(){return so},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/Pt*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Pt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return uo}}),Ji=o.map({in:j,out:to,"in-out":eo,"out-in":function(t){return eo(to(t))}});function to(t){return function(e){return 1-t(1-e)}}function eo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function no(t){return t*t}function ro(t){return t*t*t}function io(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function oo(t){return 1-Math.cos(t*kt)}function ao(t){return Math.pow(2,10*(t-1))}function so(t){return 1-Math.sqrt(1-t*t)}function uo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function co(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function lo(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=fo(i),s=ho(i,o),u=fo(((e=o)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Dt,this.translate=[t.e,t.f],this.scale=[a,u],this.skew=u?Math.atan2(s,u)*Dt:0}function ho(t,e){return t[0]*e[0]+t[1]*e[1]}function fo(t){var e=Math.sqrt(ho(t,t));return e&&(t[0]/=e,t[1]/=e),e}o.ease=function(t){var e,n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return r=$i.get(r)||Zi,i=Ji.get(i)||j,e=i(r.apply(null,a.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},o.interpolateHcl=function(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,s=e.c-r,u=e.l-i;isNaN(s)&&(s=0,r=isNaN(r)?e.c:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Zt(n+a*t,r+s*t,i+u*t)+""}},o.interpolateHsl=function(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,s=e.s-r,u=e.l-i;isNaN(s)&&(s=0,r=isNaN(r)?e.s:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Kt(n+a*t,r+s*t,i+u*t)+""}},o.interpolateLab=function(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,s=e.a-r,u=e.b-i;return function(t){return ie(n+a*t,r+s*t,i+u*t)+""}},o.interpolateRound=co,o.transform=function(t){var e=u.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new lo(n?n.matrix:po)})(t)},lo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var po={a:1,b:0,c:0,d:1,e:0,f:0};function mo(t){return t.length?t.pop()+",":""}function vo(t,e){var n=[],r=[];return t=o.transform(t),e=o.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Hi(t[0],e[0])},{i:i-2,x:Hi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(mo(n)+"rotate(",null,")")-2,x:Hi(t,e)})):e&&n.push(mo(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(mo(n)+"skewX(",null,")")-2,x:Hi(t,e)}):e&&n.push(mo(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(mo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Hi(t[0],e[0])},{i:i-2,x:Hi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(mo(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function go(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function yo(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function xo(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=_o(t),r=_o(e),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function _o(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function bo(t){t.fixed|=2}function Mo(t){t.fixed&=-7}function wo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function To(t){t.fixed&=-5}o.interpolateTransform=vo,o.layout={},o.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(xo(t[n]));return e}},o.layout.chord=function(){var t,e,n,r,i,a,s,u={},c=0;function l(){var u,l,f,d,p,m={},v=[],g=o.range(r),y=[];for(t=[],e=[],u=0,d=-1;++d<r;){for(l=0,p=-1;++p<r;)l+=n[d][p];v.push(l),y.push(o.range(r)),u+=l}for(i&&g.sort(function(t,e){return i(v[t],v[e])}),a&&y.forEach(function(t,e){t.sort(function(t,r){return a(n[e][t],n[e][r])})}),u=(Pt-c*r)/u,l=0,d=-1;++d<r;){for(f=l,p=-1;++p<r;){var x=g[d],_=y[x][p],b=n[x][_],M=l,w=l+=b*u;m[x+"-"+_]={index:x,subindex:_,startAngle:M,endAngle:w,value:b}}e[x]={index:x,startAngle:f,endAngle:l,value:v[x]},l+=c}for(d=-1;++d<r;)for(p=d-1;++p<r;){var T=m[d+"-"+p],A=m[p+"-"+d];(T.value||A.value)&&t.push(T.value<A.value?{source:A,target:T}:{source:T,target:A})}s&&h()}function h(){t.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,t=e=null,u):n},u.padding=function(n){return arguments.length?(c=n,t=e=null,u):c},u.sortGroups=function(n){return arguments.length?(i=n,t=e=null,u):i},u.sortSubgroups=function(e){return arguments.length?(a=e,t=null,u):a},u.sortChords=function(e){return arguments.length?(s=e,t&&h(),u):s},u.chords=function(){return t||l(),t},u.groups=function(){return e||l(),e},u},o.layout.force=function(){var t,e,n,r,i,a,s={},u=o.dispatch("start","tick","end"),c=[1,1],l=.9,h=Ao,f=Eo,d=-30,p=So,m=.1,v=.64,g=[],y=[];function x(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,u=o*o+a*a;if(s*s/v<u){if(u<p){var c=e.charge/u;t.px-=o*c,t.py-=a*c}return!0}if(e.point&&u&&u<p){c=e.pointCharge/u;t.px-=o*c,t.py-=a*c}}return!e.charge}}function _(t){t.px=o.event.x,t.py=o.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,u.end({type:"end",alpha:n=0}),!0;var e,s,h,f,p,v,_,b,M,w=g.length,T=y.length;for(s=0;s<T;++s)f=(h=y[s]).source,(v=(b=(p=h.target).x-f.x)*b+(M=p.y-f.y)*M)&&(b*=v=n*i[s]*((v=Math.sqrt(v))-r[s])/v,M*=v,p.x-=b*(_=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=M*_,f.x+=b*(_=1-_),f.y+=M*_);if((_=n*m)&&(b=c[0]/2,M=c[1]/2,s=-1,_))for(;++s<w;)(h=g[s]).x+=(b-h.x)*_,h.y+=(M-h.y)*_;if(d)for(!function t(e,n,r){var i=0,o=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,u=s.length,c=-1;++c<u;)null!=(a=s[c])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=n*r[e.point.index];e.charge+=e.pointCharge=l,i+=l*e.point.x,o+=l*e.point.y}e.cx=i/e.charge;e.cy=o/e.charge}(e=o.geom.quadtree(g),n,a),s=-1;++s<w;)(h=g[s]).fixed||e.visit(x(h));for(s=-1;++s<w;)(h=g[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*l,h.y-=(h.py-(h.py=h.y))*l);u.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(g=t,s):g},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(l=+t,s):l},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(m=+t,s):m},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,u.end({type:"end",alpha:n=0})):e>0&&(u.start({type:"start",alpha:n=e}),t=Ce(s.tick)),s):n},s.start=function(){var t,e,n,o=g.length,u=y.length,l=c[0],p=c[1];for(t=0;t<o;++t)(n=g[t]).index=t,n.weight=0;for(t=0;t<u;++t)"number"==typeof(n=y[t]).source&&(n.source=g[n.source]),"number"==typeof n.target&&(n.target=g[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<o;++t)n=g[t],isNaN(n.x)&&(n.x=m("x",l)),isNaN(n.y)&&(n.y=m("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof h)for(t=0;t<u;++t)r[t]=+h.call(this,y[t],t);else for(t=0;t<u;++t)r[t]=h;if(i=[],"function"==typeof f)for(t=0;t<u;++t)i[t]=+f.call(this,y[t],t);else for(t=0;t<u;++t)i[t]=f;if(a=[],"function"==typeof d)for(t=0;t<o;++t)a[t]=+d.call(this,g[t],t);else for(t=0;t<o;++t)a[t]=d;function m(n,r){if(!e){for(e=new Array(o),c=0;c<o;++c)e[c]=[];for(c=0;c<u;++c){var i=y[c];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,s=e[t],c=-1,l=s.length;++c<l;)if(!isNaN(a=s[c][n]))return a;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=o.behavior.drag().origin(j).on("dragstart.force",bo).on("drag.force",_).on("dragend.force",Mo)),!arguments.length)return e;this.on("mouseover.force",wo).on("mouseout.force",To).call(e)},o.rebind(s,u,"on")};var Ao=20,Eo=1,So=1/0;function Co(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Do,t}function Oo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Po(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Ro(t){return t.children}function ko(t){return t.value}function Lo(t,e){return e.value-t.value}function Do(t){return o.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}o.layout.hierarchy=function(){var t=Lo,e=Ro,n=ko;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(c=e.call(r,o,o.depth))&&(u=c.length)){for(var u,c,l;--u>=0;)a.push(l=c[u]),l.parent=o,l.depth=o.depth+1;n&&(o.value=0),o.children=c}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Po(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Oo(t,function(t){t.children&&(t.value=0)}),Po(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(n,r){var i=t.call(this,n,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,u,c=-1;for(r=e.value?r/e.value:0;++c<a;)t(s=o[c],n,u=s.value*r,i),n+=u}}(i[0],0,e[0],e[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}return n.size=function(t){return arguments.length?(e=t,n):e},Co(n,t)},o.layout.pie=function(){var t=Number,e=jo,n=0,r=Pt,i=0;function a(s){var u,c=s.length,l=s.map(function(e,n){return+t.call(a,e,n)}),h=+("function"==typeof n?n.apply(this,arguments):n),f=("function"==typeof r?r.apply(this,arguments):r)-h,d=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),p=d*(f<0?-1:1),m=o.sum(l),v=m?(f-c*p)/m:0,g=o.range(c),y=[];return null!=e&&g.sort(e===jo?function(t,e){return l[e]-l[t]}:function(t,n){return e(s[t],s[n])}),g.forEach(function(t){y[t]={data:s[t],value:u=l[t],startAngle:h,endAngle:h+=u*v+p,padAngle:d}}),y}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(r=t,a):r},a.padAngle=function(t){return arguments.length?(i=t,a):i},a};var jo={};function No(t){return t.x}function Io(t){return t.y}function Fo(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=j,e=Go,n=Bo,r=Fo,i=No,a=Io;function s(u,c){if(!(d=u.length))return u;var l=u.map(function(e,n){return t.call(s,e,n)}),h=l.map(function(t){return t.map(function(t,e){return[i.call(s,t,e),a.call(s,t,e)]})}),f=e.call(s,h,c);l=o.permute(l,f),h=o.permute(h,f);var d,p,m,v,g=n.call(s,h,c),y=l[0].length;for(m=0;m<y;++m)for(r.call(s,l[0][m],v=g[m],h[0][m][1]),p=1;p<d;++p)r.call(s,l[p][m],v+=h[p-1][m][1],h[p][m][1]);return u}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"==typeof t?t:zo.get(t)||Go,s):e},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:Uo.get(t)||Bo,s):n},s.x=function(t){return arguments.length?(i=t,s):i},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(r=t,s):r},s};var zo=o.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(Vo),a=t.map(qo),s=o.range(r).sort(function(t,e){return i[t]-i[e]}),u=0,c=0,l=[],h=[];for(e=0;e<r;++e)n=s[e],u<c?(u+=a[n],l.push(n)):(c+=a[n],h.push(n));return h.reverse().concat(l)},reverse:function(t){return o.range(t.length).reverse()},default:Go}),Uo=o.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,r,i,o,a,s,u,c,l=t.length,h=t[0],f=h.length,d=[];for(d[0]=u=c=0,n=1;n<f;++n){for(e=0,i=0;e<l;++e)i+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];e<l;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}d[n]=u-=i?o/i*s:0,u<c&&(c=u)}for(n=0;n<f;++n)d[n]-=c;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:Bo});function Go(t){return o.range(t.length)}function Bo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Vo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function qo(t){return t.reduce(Ho,0)}function Ho(t,e){return t+e[1]}function Wo(t,e){return Xo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Xo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Ko(t){return[o.min(t),o.max(t)]}function Yo(t,e){return t.value-e.value}function Qo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Zo(t,e){t._pack_next=e,e._pack_prev=t}function $o(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Jo(t){if((e=t.children)&&(u=e.length)){var e,n,r,i,o,a,s,u,c=1/0,l=-1/0,h=1/0,f=-1/0;if(e.forEach(ta),(n=e[0]).x=-n.r,n.y=0,x(n),u>1&&((r=e[1]).x=r.r,r.y=0,x(r),u>2))for(na(n,r,i=e[2]),x(i),Qo(n,i),n._pack_prev=i,Qo(i,r),r=n._pack_next,o=3;o<u;o++){na(n,r,i=e[o]);var d=0,p=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if($o(a,i)){d=1;break}if(1==d)for(s=n._pack_prev;s!==a._pack_prev&&!$o(s,i);s=s._pack_prev,m++);d?(p<m||p==m&&r.r<n.r?Zo(n,r=a):Zo(n=s,r),o--):(Qo(n,i),r=i,x(i))}var v=(c+l)/2,g=(h+f)/2,y=0;for(o=0;o<u;o++)(i=e[o]).x-=v,i.y-=g,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ea)}function x(t){c=Math.min(t.x-t.r,c),l=Math.max(t.x+t.r,l),h=Math.min(t.y-t.r,h),f=Math.max(t.y+t.r,f)}}function ta(t){t._pack_next=t._pack_prev=t}function ea(t){delete t._pack_next,delete t._pack_prev}function na(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,u=.5+((r*=r)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+u*i+c*o,n.y=t.y+u*o-c*i}else n.x=t.x+r,n.y=t.y}function ra(t,e){return t.parent==e.parent?1:2}function ia(t){var e=t.children;return e.length?e[0]:t.t}function oa(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function aa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function sa(t,e,n){return t.a.parent===e.parent?t.a:n}function ua(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ca(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function la(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function ha(t){return t.rangeExtent?t.rangeExtent():la(t.range())}function fa(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function da(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function pa(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ma}o.layout.histogram=function(){var t=!0,e=Number,n=Ko,r=Wo;function i(i,a){for(var s,u,c=[],l=i.map(e,this),h=n.call(this,l,a),f=r.call(this,h,l,a),d=(a=-1,l.length),p=f.length-1,m=t?1:1/d;++a<p;)(s=c[a]=[]).dx=f[a+1]-(s.x=f[a]),s.y=0;if(p>0)for(a=-1;++a<d;)(u=l[a])>=h[0]&&u<=h[1]&&((s=c[o.bisect(f,u,1,p)-1]).y+=m,s.push(i[a]));return c}return i.value=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=_e(t),i):n},i.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Xo(e,t)}:_e(t),i):r},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(Yo),n=0,r=[1,1];function i(i,o){var a=e.call(this,i,o),s=a[0],u=r[0],c=r[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Po(s,function(t){t.r=+l(t.value)}),Po(s,Jo),n){var h=n*(t?1:Math.max(2*s.r/u,2*s.r/c))/2;Po(s,function(t){t.r+=h}),Po(s,Jo),Po(s,function(t){t.r-=h})}return function t(e,n,r,i){var o=e.children;e.x=n+=i*e.x;e.y=r+=i*e.y;e.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,r,i)}(s,u/2,c/2,t?1:1/Math.max(2*s.r/u,2*s.r/c)),a}return i.size=function(t){return arguments.length?(r=t,i):r},i.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},Co(i,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ra,n=[1,1],r=null;function i(i,o){var c=t.call(this,i,o),l=c[0],h=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(l);if(Po(h,a),h.parent.m=-h.z,Oo(h,s),r)Oo(l,u);else{var f=l,d=l,p=l;Oo(l,function(t){t.x<f.x&&(f=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var m=e(f,d)/2-f.x,v=n[0]/(d.x+e(d,f)/2+m),g=n[1]/(p.depth||1);Oo(l,function(t){t.x=(t.x+m)*v,t.y=t.depth*g})}return c}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){!function(t){var e,n=0,r=0,i=t.children,o=i.length;for(;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;s=oa(s),o=ia(o),s&&o;)u=ia(u),(a=oa(a)).a=t,(i=s.z+h-o.z-c+e(s._,o._))>0&&(aa(sa(s,t,r),t,i),c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!oa(a)&&(a.t=s,a.m+=h-l),o&&!ia(u)&&(u.t=o,u.m+=c-f,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t)?u:null,i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:u,i):r?n:null},Co(i,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ra,n=[1,1],r=!1;function i(i,a){var s,u=t.call(this,i,a),c=u[0],l=0;Po(c,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+o.max(t,function(t){return t.y})}(n)):(t.x=s?l+=e(t,s):0,t.y=0,s=t)});var h=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(c),f=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(c),d=h.x-e(h,f)/2,p=f.x+e(f,h)/2;return Po(c,r?function(t){t.x=(t.x-c.x)*n[0],t.y=(c.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(p-d)*n[0],t.y=(1-(c.y?t.y/c.y:1))*n[1]}),u}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t),i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null!=(n=t),i):r?n:null},Co(i,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=ua,s=!1,u="squarify",c=.5*(1+Math.sqrt(5));function l(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function h(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),s=[],c=e.slice(),f=1/0,m="slice"===u?o.dx:"dice"===u?o.dy:"slice-dice"===u?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(l(c,o.dx*o.dy/t.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==u||(r=d(s,m))<=f?(c.pop(),f=r):(s.area-=s.pop().area,p(s,m,o,!1),m=Math.min(o.dx,o.dy),s.length=s.area=0,f=1/0);s.length&&(p(s,m,o,!0),s.length=s.area=0),e.forEach(h)}}function f(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(l(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(f)}}function d(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*c/r,r/(e*o*c)):1/0}function p(t,e,r,i){var o,a=-1,s=t.length,u=r.x,c=r.y,l=e?n(t.area/e):0;if(e==r.dx){for((i||l>r.dy)&&(l=r.dy);++a<s;)(o=t[a]).x=u,o.y=c,o.dy=l,u+=o.dx=Math.min(r.x+r.dx-u,l?n(o.area/l):0);o.z=!0,o.dx+=r.x+r.dx-u,r.y+=l,r.dy-=l}else{for((i||l>r.dx)&&(l=r.dx);++a<s;)(o=t[a]).x=u,o.y=c,o.dx=l,c+=o.dy=Math.min(r.y+r.dy-c,l?n(o.area/l):0);o.z=!1,o.dy+=r.y+r.dy-c,r.x+=l,r.dx-=l}}function m(n){var i=t||e(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,t&&e.revalue(o),l([o],o.dx*o.dy/o.value),(t?f:h)(o),s&&(t=i),i}return m.size=function(t){return arguments.length?(r=t,m):r},m.padding=function(t){if(!arguments.length)return i;function e(e){return ca(e,t)}var n;return a=null==(i=t)?ua:"function"==(n=typeof t)?function(e){var n=t.call(m,e,e.depth);return null==n?ua(e):ca(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,m},m.round=function(t){return arguments.length?(n=t?Math.round:Number,m):n!=Number},m.sticky=function(e){return arguments.length?(s=e,t=null,m):s},m.ratio=function(t){return arguments.length?(c=t,m):c},m.mode=function(t){return arguments.length?(u=t+"",m):u},Co(m,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var ma={floor:j,ceil:j};function va(t,e,n,r){var i=[],a=[],s=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=u;)i.push(n(t[s-1],t[s])),a.push(r(e[s-1],e[s]));return function(e){var n=o.bisect(t,e,1,u)-1;return a[n](i[n](e))}}function ga(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ya(t,e){return da(t,pa(xa(t,e)[2])),da(t,pa(xa(t,e)[2])),t}function xa(t,e){null==e&&(e=10);var n=la(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function _a(t,e){return o.range.apply(o,xa(t,e))}function ba(t,e,n){var r=xa(t,e);if(n){var i=De.exec(n);if(i.shift(),"s"===i[8]){var a=o.formatPrefix(Math.max(M(r[0]),M(r[1])));return i[7]||(i[7]="."+wa(a.scale(r[2]))),i[8]="f",n=o.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+function(t,e){var n=wa(e[2]);return t in Ma?Math.abs(n-wa(Math.max(M(e[0]),M(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+wa(r[2])+"f";return o.format(n)}o.scale.linear=function(){return function t(e,n,r,i){var o,a;function s(){var t=Math.min(e.length,n.length)>2?va:fa,s=i?yo:go;return o=t(e,n,s,r),a=t(n,e,s,Yi),u}function u(t){return o(t)}u.invert=function(t){return a(t)};u.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};u.range=function(t){return arguments.length?(n=t,s()):n};u.rangeRound=function(t){return u.range(t).interpolate(co)};u.clamp=function(t){return arguments.length?(i=t,s()):i};u.interpolate=function(t){return arguments.length?(r=t,s()):r};u.ticks=function(t){return _a(e,t)};u.tickFormat=function(t,n){return ba(e,t,n)};u.nice=function(t){return ya(e,t),s()};u.copy=function(){return t(e,n,r,i)};return s()}([0,1],[0,1],Yi,!1)};var Ma={s:1,g:1,p:1,r:1,e:1};function wa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}o.scale.log=function(){return function t(e,n,r,i){function a(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function u(t){return e(a(t))}u.invert=function(t){return s(e.invert(t))};u.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(a)),u):i};u.base=function(t){return arguments.length?(n=+t,e.domain(i.map(a)),u):n};u.nice=function(){var t=da(i.map(a),r?Math:Aa);return e.domain(t),i=t.map(s),u};u.ticks=function(){var t=la(i),e=[],o=t[0],u=t[1],c=Math.floor(a(o)),l=Math.ceil(a(u)),h=n%1?2:n;if(isFinite(l-c)){if(r){for(;c<l;c++)for(var f=1;f<h;f++)e.push(s(c)*f);e.push(s(c))}else for(e.push(s(c));c++<l;)for(var f=h-1;f>0;f--)e.push(s(c)*f);for(c=0;e[c]<o;c++);for(l=e.length;e[l-1]>u;l--);e=e.slice(c,l)}return e};u.tickFormat=function(t,e){if(!arguments.length)return Ta;arguments.length<2?e=Ta:"function"!=typeof e&&(e=o.format(e));var r=Math.max(1,n*t/u.ticks().length);return function(t){var i=t/s(Math.round(a(t)));return i*n<n-.5&&(i*=n),i<=r?e(t):""}};u.copy=function(){return t(e.copy(),n,r,i)};return ga(u,e)}(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Ta=o.format(".0e"),Aa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ea(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}o.scale.pow=function(){return function t(e,n,r){var i=Ea(n),o=Ea(1/n);function a(t){return e(i(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return _a(r,t)};a.tickFormat=function(t,e){return ba(r,t,e)};a.nice=function(t){return a.domain(ya(r,t))};a.exponent=function(t){return arguments.length?(i=Ea(n=t),o=Ea(1/n),e.domain(r.map(i)),a):n};a.copy=function(){return t(e.copy(),n,r)};return ga(a,e)}(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return function t(e,n){var r,i,a;function s(t){return i[((r.get(t)||("range"===n.t?r.set(t,e.push(t)):NaN))-1)%i.length]}function u(t,n){return o.range(e.length).map(function(e){return t+n*e})}s.domain=function(t){if(!arguments.length)return e;e=[],r=new T;for(var i,o=-1,a=t.length;++o<a;)r.has(i=t[o])||r.set(i,e.push(i));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(i=t,a=0,n={t:"range",a:arguments},s):i};s.rangePoints=function(t,r){arguments.length<2&&(r=0);var o=t[0],c=t[1],l=e.length<2?(o=(o+c)/2,0):(c-o)/(e.length-1+r);return i=u(o+l*r/2,l),a=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var o=t[0],c=t[1],l=e.length<2?(o=c=Math.round((o+c)/2),0):(c-o)/(e.length-1+r)|0;return i=u(o+Math.round(l*r/2+(c-o-(e.length-1+r)*l)/2),l),a=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,r,o){arguments.length<2&&(r=0),arguments.length<3&&(o=r);var c=t[1]<t[0],l=t[c-0],h=t[1-c],f=(h-l)/(e.length-r+2*o);return i=u(l+f*o,f),c&&i.reverse(),a=f*(1-r),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,r,o){arguments.length<2&&(r=0),arguments.length<3&&(o=r);var c=t[1]<t[0],l=t[c-0],h=t[1-c],f=Math.floor((h-l)/(e.length-r+2*o));return i=u(l+Math.round((h-l-(e.length-r)*f)/2),f),c&&i.reverse(),a=Math.round(f*(1-r)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return la(n.a[0])};s.copy=function(){return t(e,n)};return s.domain(e)}([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Sa)},o.scale.category20=function(){return o.scale.ordinal().range(Ca)},o.scale.category20b=function(){return o.scale.ordinal().range(Oa)},o.scale.category20c=function(){return o.scale.ordinal().range(Pa)};var Sa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(he),Ca=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(he),Oa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(he),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(he);function Ra(){return 0}o.scale.quantile=function(){return function t(e,n){var r;function i(){var t=0,i=n.length;for(r=[];++t<i;)r[t-1]=o.quantile(e,t/i);return a}function a(t){if(!isNaN(t=+t))return n[o.bisect(r,t)]}a.domain=function(t){return arguments.length?(e=t.map(g).filter(y).sort(v),i()):e};a.range=function(t){return arguments.length?(n=t,i()):n};a.quantiles=function(){return r};a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};a.copy=function(){return t(e,n)};return i()}([],[])},o.scale.quantize=function(){return function t(e,n,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),o=r.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};a.range=function(t){return arguments.length?(r=t,s()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]};a.copy=function(){return t(e,n,r)};return s()}(0,1,[0,1])},o.scale.threshold=function(){return function t(e,n){function r(t){if(t<=t)return n[o.bisect(e,t)]}r.domain=function(t){return arguments.length?(e=t,r):e};r.range=function(t){return arguments.length?(n=t,r):n};r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};r.copy=function(){return t(e,n)};return r}([.5],[0,1])},o.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return _a(e,t)};n.tickFormat=function(t,n){return ba(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},o.svg={},o.svg.arc=function(){var t=La,e=Da,n=Ra,r=ka,i=ja,o=Na,a=Ia;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),l=i.apply(this,arguments)-kt,h=o.apply(this,arguments)-kt,f=Math.abs(h-l),d=l>h?0:1;if(c<s&&(p=c,c=s,s=p),f>=Rt)return u(c,d)+(s?u(s,1-d):"")+"Z";var p,m,v,g,y,x,_,b,M,w,T,A,E=0,S=0,C=[];if((g=(+a.apply(this,arguments)||0)/2)&&(v=r===ka?Math.sqrt(s*s+c*c):+r.apply(this,arguments),d||(S*=-1),c&&(S=Ft(v/c*Math.sin(g))),s&&(E=Ft(v/s*Math.sin(g)))),c){y=c*Math.cos(l+S),x=c*Math.sin(l+S),_=c*Math.cos(h-S),b=c*Math.sin(h-S);var O=Math.abs(h-l-2*S)<=Ot?0:1;if(S&&Fa(y,x,_,b)===d^O){var P=(l+h)/2;y=c*Math.cos(P),x=c*Math.sin(P),_=b=null}}else y=x=0;if(s){M=s*Math.cos(h-E),w=s*Math.sin(h-E),T=s*Math.cos(l+E),A=s*Math.sin(l+E);var R=Math.abs(l-h+2*E)<=Ot?0:1;if(E&&Fa(M,w,T,A)===1-d^R){var k=(l+h)/2;M=s*Math.cos(k),w=s*Math.sin(k),T=A=null}}else M=w=0;if(f>St&&(p=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){m=s<c^d?0:1;var L=p,D=p;if(f<Ot){var j=null==T?[M,w]:null==_?[y,x]:ci([y,x],[T,A],[_,b],[M,w]),N=y-j[0],I=x-j[1],F=_-j[0],z=b-j[1],U=1/Math.sin(Math.acos((N*F+I*z)/(Math.sqrt(N*N+I*I)*Math.sqrt(F*F+z*z)))/2),G=Math.sqrt(j[0]*j[0]+j[1]*j[1]);D=Math.min(p,(s-G)/(U-1)),L=Math.min(p,(c-G)/(U+1))}if(null!=_){var B=za(null==T?[M,w]:[T,A],[y,x],c,L,d),V=za([_,b],[M,w],c,L,d);p===L?C.push("M",B[0],"A",L,",",L," 0 0,",m," ",B[1],"A",c,",",c," 0 ",1-d^Fa(B[1][0],B[1][1],V[1][0],V[1][1]),",",d," ",V[1],"A",L,",",L," 0 0,",m," ",V[0]):C.push("M",B[0],"A",L,",",L," 0 1,",m," ",V[0])}else C.push("M",y,",",x);if(null!=T){var q=za([y,x],[T,A],s,-D,d),H=za([M,w],null==_?[y,x]:[_,b],s,-D,d);p===D?C.push("L",H[0],"A",D,",",D," 0 0,",m," ",H[1],"A",s,",",s," 0 ",d^Fa(H[1][0],H[1][1],q[1][0],q[1][1]),",",1-d," ",q[1],"A",D,",",D," 0 0,",m," ",q[0]):C.push("L",H[0],"A",D,",",D," 0 0,",m," ",q[0])}else C.push("L",M,",",w)}else C.push("M",y,",",x),null!=_&&C.push("A",c,",",c," 0 ",O,",",d," ",_,",",b),C.push("L",M,",",w),null!=T&&C.push("A",s,",",s," 0 ",R,",",1-d," ",T,",",A);return C.push("Z"),C.join("")}function u(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=_e(e),s):t},s.outerRadius=function(t){return arguments.length?(e=_e(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=_e(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==ka?ka:_e(t),s):r},s.startAngle=function(t){return arguments.length?(i=_e(t),s):i},s.endAngle=function(t){return arguments.length?(o=_e(t),s):o},s.padAngle=function(t){return arguments.length?(a=_e(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-kt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var ka="auto";function La(t){return t.innerRadius}function Da(t){return t.outerRadius}function ja(t){return t.startAngle}function Na(t){return t.endAngle}function Ia(t){return t&&t.padAngle}function Fa(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function za(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,c=-s*o,l=t[0]+u,h=t[1]+c,f=e[0]+u,d=e[1]+c,p=(l+f)/2,m=(h+d)/2,v=f-l,g=d-h,y=v*v+g*g,x=n-r,_=l*d-f*h,b=(g<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-_*_)),M=(_*g-v*b)/y,w=(-_*v-g*b)/y,T=(_*g+v*b)/y,A=(-_*v+g*b)/y,E=M-p,S=w-m,C=T-p,O=A-m;return E*E+S*S>C*C+O*O&&(M=T,w=A),[[M-u,w-c],[M*n/x,w*n/x]]}function Ua(t){var e=ri,n=ii,r=Zn,i=Ba,o=i.key,a=.7;function s(o){var s,u=[],c=[],l=-1,h=o.length,f=_e(e),d=_e(n);function p(){u.push("M",i(t(c),a))}for(;++l<h;)r.call(this,s=o[l],l)?c.push([+f.call(this,s,l),+d.call(this,s,l)]):c.length&&(p(),c=[]);return c.length&&p(),u.length?u.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=Ga.get(t)||Ba).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}o.svg.line=function(){return Ua(j)};var Ga=o.map({linear:Ba,"linear-closed":Va,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":qa,"step-after":Ha,basis:Ka,"basis-open":function(t){if(t.length<4)return Ba(t);var e,n=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);n.push(Ya($a,o)+","+Ya($a,a)),--r;for(;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ja(n,o,a);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];for(;++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);e=[Ya($a,a),",",Ya($a,s)],--r;for(;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ja(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,c=-1;++c<=n;)r=t[c],i=c/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*u);return Ka(t)},cardinal:function(t,e){return t.length<3?Ba(t):t[0]+Wa(t,Xa(t,e))},"cardinal-open":function(t,e){return t.length<4?Ba(t):t[1]+Wa(t.slice(1,-1),Xa(t,e))},"cardinal-closed":function(t,e){return t.length<3?Va(t):t[0]+Wa((t.push(t[0]),t),Xa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ba(t):t[0]+Wa(t,function(t){var e,n,r,i,o=[],a=function(t){var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=ts(i,o);for(;++e<n;)r[e]=(a+(a=ts(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,u=t.length-1;for(;++s<u;)e=ts(t[s],t[s+1]),M(e)<St?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));s=-1;for(;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function Ba(t){return t.length>1?t.join("L"):t+"Z"}function Va(t){return t.join("L")+"Z"}function qa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ha(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Wa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ba(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){s=e[1],o=t[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,u++)o=t[u],s=e[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var l=t[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+l[0]+","+l[1]}return r}function Xa(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Ka(t){if(t.length<3)return Ba(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",Ya($a,a),",",Ya($a,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ja(u,a,s);return t.pop(),u.push("L",r),u.join("")}function Ya(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ga.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Qa=[0,2/3,1/3,0],Za=[0,1/3,2/3,0],$a=[0,1/6,2/3,1/6];function Ja(t,e,n){t.push("C",Ya(Qa,e),",",Ya(Qa,n),",",Ya(Za,e),",",Ya(Za,n),",",Ya($a,e),",",Ya($a,n))}function ts(t,e){return(e[1]-t[1])/(e[0]-t[0])}function es(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-kt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function ns(t){var e=ri,n=ri,r=0,i=ii,o=Zn,a=Ba,s=a.key,u=a,c="L",l=.7;function h(s){var h,f,d,p=[],m=[],v=[],g=-1,y=s.length,x=_e(e),_=_e(r),b=e===n?function(){return f}:_e(n),M=r===i?function(){return d}:_e(i);function w(){p.push("M",a(t(v),l),c,u(t(m.reverse()),l),"Z")}for(;++g<y;)o.call(this,h=s[g],g)?(m.push([f=+x.call(this,h,g),d=+_.call(this,h,g)]),v.push([+b.call(this,h,g),+M.call(this,h,g)])):m.length&&(w(),m=[],v=[]);return m.length&&w(),p.length?p.join(""):null}return h.x=function(t){return arguments.length?(e=n=t,h):n},h.x0=function(t){return arguments.length?(e=t,h):e},h.x1=function(t){return arguments.length?(n=t,h):n},h.y=function(t){return arguments.length?(r=i=t,h):i},h.y0=function(t){return arguments.length?(r=t,h):r},h.y1=function(t){return arguments.length?(i=t,h):i},h.defined=function(t){return arguments.length?(o=t,h):o},h.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=Ga.get(t)||Ba).key,u=a.reverse||a,c=a.closed?"M":"L",h):s},h.tension=function(t){return arguments.length?(l=t,h):l},h}function rs(t){return t.radius}function is(t){return[t.x,t.y]}function os(){return 64}function as(){return"circle"}function ss(t){var e=Math.sqrt(t/Ot);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=Ua(es);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},qa.reverse=Ha,Ha.reverse=qa,o.svg.area=function(){return ns(j)},o.svg.area.radial=function(){var t=ns(es);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=Vr,e=qr,n=rs,r=ja,i=Na;function o(n,r){var i,o,c=a(this,t,n,r),l=a(this,e,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+(o=l,(i=c).a0==o.a0&&i.a1==o.a1?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+s(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function a(t,e,o,a){var s=e.call(t,o,a),u=n.call(t,s,a),c=r.call(t,s,a)-kt,l=i.call(t,s,a)-kt;return{r:u,a0:c,a1:l,p0:[u*Math.cos(c),u*Math.sin(c)],p1:[u*Math.cos(l),u*Math.sin(l)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ot)+",1 "+e}function u(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=_e(t),o):n},o.source=function(e){return arguments.length?(t=_e(e),o):t},o.target=function(t){return arguments.length?(e=_e(t),o):e},o.startAngle=function(t){return arguments.length?(r=_e(t),o):r},o.endAngle=function(t){return arguments.length?(i=_e(t),o):i},o},o.svg.diagonal=function(){var t=Vr,e=qr,n=is;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(e){return arguments.length?(t=_e(e),r):t},r.target=function(t){return arguments.length?(e=_e(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=is,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-kt;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},o.svg.symbol=function(){var t=as,e=os;function n(n,r){return(us.get(t.call(this,n,r))||ss)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=_e(e),n):t},n.size=function(t){return arguments.length?(e=_e(t),n):e},n};var us=o.map({circle:ss,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ls)),n=e*ls;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/cs),n=e*cs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/cs),n=e*cs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=us.keys();var cs=Math.sqrt(3),ls=Math.tan(30*Lt);Z.transition=function(t){for(var e,n,r=ps||++gs,i=_s(t),o=[],a=ms||{time:Date.now(),ease:io,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(n=c[l])&&bs(n,l,i,r,a),e.push(n)}return ds(o,i,r)},Z.interrupt=function(t){return this.each(null==t?hs:fs(_s(t)))};var hs=fs(_s());function fs(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ds(t,e,n){return W(t,vs),t.namespace=e,t.id=n,t}var ps,ms,vs=[],gs=0;function ys(t,e,n,r){var i=t.id,o=t.namespace;return pt(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function xs(t){return null==t&&(t=""),function(){this.textContent=t}}function _s(t){return null==t?"__transition__":"__transition_"+t+"__"}function bs(t,e,n,r,i){var o,a,s,u,c,l=t[n]||(t[n]={active:0,count:0}),h=l[r];function f(n){var i=l.active,f=l[i];for(var p in f&&(f.timer.c=null,f.timer.t=NaN,--l.count,delete l[i],f.event&&f.event.interrupt.call(t,t.__data__,f.index)),l)if(+p<r){var m=l[p];m.timer.c=null,m.timer.t=NaN,--l.count,delete l[p]}a.c=d,Ce(function(){return a.c&&d(n||1)&&(a.c=null,a.t=NaN),1},0,o),l.active=r,h.event&&h.event.start.call(t,t.__data__,e),c=[],h.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&c.push(r)}),u=h.ease,s=h.duration}function d(i){for(var o=i/s,a=u(o),f=c.length;f>0;)c[--f].call(t,a);if(o>=1)return h.event&&h.event.end.call(t,t.__data__,e),--l.count?delete l[r]:delete t[n],1}h||(o=i.time,a=Ce(function(t){var e=h.delay;if(a.t=e+o,e<=t)return f(t-e);a.c=f},0,o),h=l[r]={tween:new T,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++l.count)}vs.call=Z.call,vs.empty=Z.empty,vs.node=Z.node,vs.size=Z.size,o.transition=function(t,e){return t&&t.transition?ps?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=vs,vs.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=$(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(r=c[l])&&(n=t.call(r,r.__data__,l,s))?("__data__"in r&&(n.__data__=r.__data__),bs(n,l,o,i,r[o][i]),e.push(n)):e.push(null)}return ds(a,o,i)},vs.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,u=[];t=J(t);for(var c=-1,l=this.length;++c<l;)for(var h=this[c],f=-1,d=h.length;++f<d;)if(r=h[f]){o=r[s][a],n=t.call(r,r.__data__,f,c),u.push(e=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&bs(i,p,s,a,o),e.push(i)}return ds(u,s,a)},vs.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=dt(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,s=0,u=(a=this[i]).length;s<u;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ds(r,this.namespace,this.id)},vs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):pt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},vs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?vo:Yi,r=o.ns.qualify(t);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}return ys(this,"attr."+t,e,r.local?function(t){return null==t?a:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})})},vs.attrTween=function(t,e){var n=o.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},vs.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return ys(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=l(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Yi(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},vs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var o=e.call(this,r,i,l(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}})},vs.text=function(t){return ys(this,"text",t,xs)},vs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},vs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=o.ease.apply(o,arguments)),pt(this,function(r){r[n][e].ease=t}))},vs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:pt(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},vs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:pt(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},vs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=ms,a=ps;try{ps=n,pt(this,function(e,i,o){ms=e[r][n],t.call(e,e.__data__,i,o)})}finally{ms=i,ps=a}}else pt(this,function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(t,e)});return this},vs.transition=function(){for(var t,e,n,r=this.id,i=++gs,o=this.namespace,a=[],s=0,u=this.length;s<u;s++){a.push(t=[]);for(var c,l=0,h=(c=this[s]).length;l<h;l++)(e=c[l])&&bs(e,l,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ds(a,o,i)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Ms,r=6,i=6,a=3,u=[10],c=null;function l(s){s.each(function(){var s,l=o.select(this),h=this.__chart__||e,f=this.__chart__=e.copy(),d=null==c?f.ticks?f.ticks.apply(f,u):f.domain():c,p=null==t?f.tickFormat?f.tickFormat.apply(f,u):j:t,m=l.selectAll(".tick").data(d,f),v=m.enter().insert("g",".domain").attr("class","tick").style("opacity",St),g=o.transition(m.exit()).style("opacity",St).remove(),y=o.transition(m.order()).style("opacity",1),x=Math.max(r,0)+a,_=ha(f),b=l.selectAll(".domain").data([0]),M=(b.enter().append("path").attr("class","domain"),o.transition(b));v.append("line"),v.append("text");var w,T,A,E,S=v.select("line"),C=y.select("line"),O=m.select("text").text(p),P=v.select("text"),R=y.select("text"),k="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Ts,w="x",A="y",T="x2",E="y2",O.attr("dy",k<0?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+_[0]+","+k*i+"V0H"+_[1]+"V"+k*i)):(s=As,w="y",A="x",T="y2",E="x2",O.attr("dy",".32em").style("text-anchor",k<0?"end":"start"),M.attr("d","M"+k*i+","+_[0]+"H0V"+_[1]+"H"+k*i)),S.attr(E,k*r),P.attr(A,k*x),C.attr(T,0).attr(E,k*r),R.attr(w,0).attr(A,k*x),f.rangeBand){var L=f,D=L.rangeBand()/2;h=f=function(t){return L(t)+D}}else h.rangeBand?h=f:g.call(s,f,h);v.call(s,h,f),y.call(s,f,f)})}return l.scale=function(t){return arguments.length?(e=t,l):e},l.orient=function(t){return arguments.length?(n=t in ws?t+"":Ms,l):n},l.ticks=function(){return arguments.length?(u=s(arguments),l):u},l.tickValues=function(t){return arguments.length?(c=t,l):c},l.tickFormat=function(e){return arguments.length?(t=e,l):t},l.tickSize=function(t){var e=arguments.length;return e?(r=+t,i=+arguments[e-1],l):r},l.innerTickSize=function(t){return arguments.length?(r=+t,l):r},l.outerTickSize=function(t){return arguments.length?(i=+t,l):i},l.tickPadding=function(t){return arguments.length?(a=+t,l):a},l.tickSubdivide=function(){return arguments.length&&l},l};var Ms="bottom",ws={top:1,right:1,bottom:1,left:1};function Ts(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function As(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}o.svg.brush=function(){var t,e,n=q(f,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],s=[0,0],u=!0,c=!0,h=Ss[0];function f(t){t.each(function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(h,j);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Es[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",f.empty()?"none":null);var a,s=o.transition(t),u=o.transition(e);r&&(a=ha(r),u.attr("x",a[0]).attr("width",a[1]-a[0]),p(s)),i&&(a=ha(i),u.attr("y",a[0]).attr("height",a[1]-a[0]),m(s)),d(s)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+a[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function m(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var h,v,g=this,y=o.select(o.event.target),x=n.of(g,arguments),_=o.select(g),b=y.datum(),M=!/^(n|s)$/.test(b)&&r,w=!/^(e|w)$/.test(b)&&i,T=y.classed("extent"),A=wt(g),E=o.mouse(g),S=o.select(l(g)).on("keydown.brush",function(){32==o.event.keyCode&&(T||(h=null,E[0]-=a[1],E[1]-=s[1],T=2),B())}).on("keyup.brush",function(){32==o.event.keyCode&&2==T&&(E[0]+=a[1],E[1]+=s[1],T=0,B())});if(o.event.changedTouches?S.on("touchmove.brush",P).on("touchend.brush",k):S.on("mousemove.brush",P).on("mouseup.brush",k),_.interrupt().selectAll("*").interrupt(),T)E[0]=a[0]-E[0],E[1]=s[0]-E[1];else if(b){var C=+/w$/.test(b),O=+/^n/.test(b);v=[a[1-C]-E[0],s[1-O]-E[1]],E[0]=a[C],E[1]=s[O]}else o.event.altKey&&(h=E.slice());function P(){var t=o.mouse(g),e=!1;v&&(t[0]+=v[0],t[1]+=v[1]),T||(o.event.altKey?(h||(h=[(a[0]+a[1])/2,(s[0]+s[1])/2]),E[0]=a[+(t[0]<h[0])],E[1]=s[+(t[1]<h[1])]):h=null),M&&R(t,r,0)&&(p(_),e=!0),w&&R(t,i,1)&&(m(_),e=!0),e&&(d(_),x({type:"brush",mode:T?"move":"resize"}))}function R(n,r,i){var o,l,f=ha(r),d=f[0],p=f[1],m=E[i],v=i?s:a,g=v[1]-v[0];if(T&&(d-=m,p-=g+m),o=(i?c:u)?Math.max(d,Math.min(p,n[i])):n[i],T?l=(o+=m)+g:(h&&(m=Math.max(d,Math.min(p,2*h[i]-o))),m<o?(l=o,o=m):l=m),v[0]!=o||v[1]!=l)return i?e=null:t=null,v[0]=o,v[1]=l,!0}function k(){P(),_.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),o.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}_.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",y.style("cursor")),x({type:"brushstart"}),P()}return f.event=function(r){r.each(function(){var r=n.of(this,arguments),i={x:a,y:s,i:t,j:e},u=this.__chart__||i;this.__chart__=i,ps?o.select(this).transition().each("start.brush",function(){t=u.i,e=u.j,a=u.x,s=u.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=Qi(a,i.x),o=Qi(s,i.y);return t=e=null,function(t){a=i.x=n(t),s=i.y=o(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,e=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},f.x=function(t){return arguments.length?(h=Ss[!(r=t)<<1|!i],f):r},f.y=function(t){return arguments.length?(h=Ss[!r<<1|!(i=t)],f):i},f.clamp=function(t){return arguments.length?(r&&i?(u=!!t[0],c=!!t[1]):r?u=!!t:i&&(c=!!t),f):r&&i?[u,c]:r?u:i?c:null},f.extent=function(n){var o,u,c,l,h;return arguments.length?(r&&(o=n[0],u=n[1],i&&(o=o[0],u=u[0]),t=[o,u],r.invert&&(o=r(o),u=r(u)),u<o&&(h=o,o=u,u=h),o==a[0]&&u==a[1]||(a=[o,u])),i&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),e=[c,l],i.invert&&(c=i(c),l=i(l)),l<c&&(h=c,c=l,l=h),c==s[0]&&l==s[1]||(s=[c,l])),f):(r&&(t?(o=t[0],u=t[1]):(o=a[0],u=a[1],r.invert&&(o=r.invert(o),u=r.invert(u)),u<o&&(h=o,o=u,u=h))),i&&(e?(c=e[0],l=e[1]):(c=s[0],l=s[1],i.invert&&(c=i.invert(c),l=i.invert(l)),l<c&&(h=c,c=l,l=h))),r&&i?[[o,c],[u,l]]:r?[o,u]:i&&[c,l])},f.clear=function(){return f.empty()||(a=[0,0],s=[0,0],t=e=null),f},f.empty=function(){return!!r&&a[0]==a[1]||!!i&&s[0]==s[1]},o.rebind(f,n,"on")};var Es={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ss=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cs=Ie.format=fn.timeFormat,Os=Cs.utc,Ps=Os("%Y-%m-%dT%H:%M:%S.%LZ");function Rs(t){return t.toISOString()}function ks(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=o.bisect(Ds,r);return i==Ds.length?[e.year,xa(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/Ds[i-1]<Ds[i]/r?i-1:i]:[Is,xa(t,n)[2]]}return r.invert=function(e){return Ls(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ls)},r.nice=function(t,e){var n=r.domain(),o=la(n),a=null==t?i(o,10):"number"==typeof t&&i(o,t);function s(n){return!isNaN(n)&&!t.range(n,Ls(+n+1),e).length}return a&&(t=a[0],e=a[1]),r.domain(da(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ls(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ls(+e+1);return e}}:t))},r.ticks=function(t,e){var n=la(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Ls(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return ks(t.copy(),e,n)},ga(r,t)}function Ls(t){return new Date(t)}Cs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rs:Ps,Rs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Rs.toString=Ps.toString,Ie.second=Ge(function(t){return new Fe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Ie.seconds=Ie.second.range,Ie.seconds.utc=Ie.second.utc.range,Ie.minute=Ge(function(t){return new Fe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Ie.minutes=Ie.minute.range,Ie.minutes.utc=Ie.minute.utc.range,Ie.hour=Ge(function(t){var e=t.getTimezoneOffset()/60;return new Fe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Ie.hours=Ie.hour.range,Ie.hours.utc=Ie.hour.utc.range,Ie.month=Ge(function(t){return(t=Ie.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Ie.months=Ie.month.range,Ie.months.utc=Ie.month.utc.range;var Ds=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],js=[[Ie.second,1],[Ie.second,5],[Ie.second,15],[Ie.second,30],[Ie.minute,1],[Ie.minute,5],[Ie.minute,15],[Ie.minute,30],[Ie.hour,1],[Ie.hour,3],[Ie.hour,6],[Ie.hour,12],[Ie.day,1],[Ie.day,2],[Ie.week,1],[Ie.month,1],[Ie.month,3],[Ie.year,1]],Ns=Cs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Zn]]),Is={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(Ls)},floor:j,ceil:j};js.year=Ie.year,Ie.scale=function(){return ks(o.scale.linear(),js,Ns)};var Fs=js.map(function(t){return[t[0].utc,t[1]]}),zs=Os.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Zn]]);function Us(t){return JSON.parse(t.responseText)}function Gs(t){var e=u.createRange();return e.selectNode(u.body),e.createContextualFragment(t.responseText)}Fs.year=Ie.year.utc,Ie.scale.utc=function(){return ks(o.scale.linear(),Fs,zs)},o.text=be(function(t){return t.responseText}),o.json=function(t,e){return Me(t,"application/json",Us,e)},o.html=function(t,e){return Me(t,"text/html",Gs,e)},o.xml=be(function(t){return t.responseXML}),this.d3=o,void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)}()},function(t,e,n){"use strict";var r=n(1),i=n(71),o=n(2).registerRenderer,a=function t(e){if(!(this instanceof t))return new t(e);i.call(this,e),e=e||{};var n=this;return this.api=function(){return"dom"},this._init=function(){var t=n.layer().node();return!n.canvas()&&t&&t.length&&n.canvas(t[0]),n},this._init(e),this};r(a,i),o("dom",a),t.exports=a},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(1),a=n(2).registerFileReader,s=n(247),u=function t(e){if(!(this instanceof t))return new t(e);var o=n(3),a=n(5).convertColor,u=this,c=r({},e,{pointStyle:r({fill:!0,fillColor:"#ff7800",fillOpacity:.8,stroke:!0,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},e.pointStyle),lineStyle:r({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",closed:!1},e.lineStyle),polygonStyle:r({fill:!0,fillColor:"#b0de5c",fillOpacity:.8,stroke:!0,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1},e.polygonStyle)});s.call(this,c),this.canRead=function(t){if(t instanceof File||t instanceof Blob)return!!("application/json"===t.type||t.name&&t.name.match(/\.json$/));if("string"==typeof t){try{JSON.parse(t)}catch(t){return!1}return!0}try{if(Array.isArray(u._featureArray(t)))return!0}catch(t){}return!1},this._readObject=function(t,e,n){var r;function i(t){try{r=JSON.parse(t),e(r)}catch(n){r||o.ajax({type:"GET",url:t,dataType:"text"}).done(function(t){try{r=JSON.parse(t),e(r)}catch(t){r||e(!1)}}).fail(function(){e(!1)})}}t instanceof File||t instanceof Blob?u._getString(t,i,n):"string"==typeof t?i(t):e(t)},this._featureArray=function(t){var e,n=[];switch(t.type){case"FeatureCollection":e=t.features;break;case"Feature":e=[t];break;case"GeometryCollection":e=t.geometries.map(function(t){return{type:"Feature",geometry:t,properties:{}}});break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":e=[{type:"Feature",geometry:t,properties:{}}];break;default:throw new Error("Invalid json type")}return e.forEach(function(t){Array.prototype.push.apply(n,u._feature(t))}),n=n.filter(function(t){return t.geometry&&t.geometry.coordinates&&t.geometry.coordinates.length})},this._feature=function(t){if("Feature"!==t.type)throw new Error("Invalid feature object");switch(t.geometry.type){case"Point":case"LineString":case"Polygon":return[t];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.geometry.coordinates.map(function(e){return{type:"Feature",geometry:{type:t.geometry.type.replace("Multi",""),coordinates:e},properties:t.properties}});default:throw new Error("Invalid geometry type")}},this._position=function(t){return{x:t[0],y:t[1],z:t[2]||0}},this._style=function(t,e){var n=t.toLowerCase().match(/color$/);return n&&(e=a(e)),function(r,i,o,s){var u;return void 0!==(u=void 0!==o&&o.properties?o.properties:r.properties)&&u.hasOwnProperty(t)?n?a(u[t]):u[t]:e}},this.read=function(t,e,n){var o=new Promise(function(o,a){u._readObject(t,function(t){if(!1===t)return e&&e(t),void a(new Error("Failed to parse GeoJSON"));var n,s,l,h=void 0,f=[],d=void 0;try{h=u._featureArray(t)}catch(t){return void a(t)}(n=h.filter(function(t){return"Point"===t.geometry.type})).length&&(d=u.layer().createFeature("point"))&&(d.data(n).position(function(t){return u._position(t.geometry.coordinates)}).style([{}].concat(Object.keys(c.pointStyle)).reduce(function(t,e){return r(i({},e,u._style(e,c.pointStyle[e])),t)})),f.push(d)),(s=h.filter(function(t){return"LineString"===t.geometry.type})).length&&(d=u.layer().createFeature("line"))&&(d.data(s).line(function(t){return t.geometry.coordinates}).position(u._position).style([{}].concat(Object.keys(c.lineStyle)).reduce(function(t,e){return r(i({},e,u._style(e,c.lineStyle[e])),t)})),f.push(d)),(l=h.filter(function(t){return"Polygon"===t.geometry.type})).length&&(d=u.layer().createFeature("polygon"))&&(d.data(l).polygon(function(t,e){return{outer:t.geometry.coordinates[0],inner:t.geometry.coordinates.slice(1)}}).position(u._position).style([{}].concat(Object.keys(c.polygonStyle)).reduce(function(t,e){return r(i({},e,u._style(e,c.polygonStyle[e])),t)})),f.push(d)),e&&e(f),o(f)},n)});return this.addPromise(o),o}};o(u,s),a("geojsonReader",u),a("jsonReader",u),t.exports=u},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(55),a=function t(e){if(!(this instanceof t))return new t(e);if(void 0===(e=e||{}).node||null===e.node)return console.warn("map creation requires a node"),this;o.call(this,e);var i,a,s,u,c,l=n(140),h=n(18),f=n(5),d=n(2),p=n(15),m=n(142),v=n(251),g=this,y=this._exit,x=r(e.node),_=e.width||x.width()||512,b=e.height||x.height()||512,M=void 0===e.gcs?"EPSG:3857":e.gcs,w=void 0===e.ingcs?"EPSG:4326":e.ingcs,T={x:0,y:0},A=void 0===e.zoom?4:e.zoom,E=e.rotation?e.rotation:0,S=null,C=null,O={min:0,max:16,origMin:0},P=null,R=null,k=!!e.discreteZoom,L="function"==typeof e.allowRotation?e.allowRotation:void 0===e.allowRotation||!!e.allowRotation,D=e.maxBounds||{},j=e.camera||l(),N=e.animationQueue||[],I=void 0===e.autoResize||e.autoResize,F=((D.left||0)+(D.right||0))/2,z=((D.bottom||0)+(D.top||0))/2;function U(t,e,n,r){t.globalAlpha=e;var i=n.css("transform");i&&"matrix("===i.substr(0,7)?t.setTransform.apply(t,i.substr(7,i.length-8).split(",").map(parseFloat)):t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0)}function G(){for(var t=N.splice(0,N.length),e=1;e<t.length;e+=1)try{t[e].apply(this,arguments)}catch(t){console.error(t)}}function B(t,e,n){var r=e.width/2,i=e.height/2,o=Math.sin(n),a=Math.cos(n),s={},u={},c={},l={};return s.x=t.x+-r*a- -i*o,s.y=t.y+-r*o+-i*a,u.x=t.x+r*a- -i*o,u.y=t.y+r*o+-i*a,c.x=t.x+-r*a-i*o,c.y=t.y+-r*o+i*a,l.x=t.x+r*a-i*o,l.y=t.y+r*o+i*a,{left:Math.min(s.x,u.x,c.x,l.x),right:Math.max(s.x,u.x,c.x,l.x),bottom:Math.min(s.y,u.y,c.y,l.y),top:Math.max(s.y,u.y,c.y,l.y)}}function V(t,e){void 0===e&&(e=E);var n=function(t){var e,n,r=t.right-t.left,i=t.top-t.bottom,o=Math.abs(r/i),a=_/b;return o>a?(e=1,n=o/a):(n=1,e=a/o),{x:e,y:n}}(t=function(t,e){return e&&(t=B({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2},{width:Math.abs(t.left-t.right),height:Math.abs(t.top-t.bottom)},e)),t}(t,e));return n.y>n.x?-Math.log2(Math.abs(t.right-t.left)*n.x/(_*i)):-Math.log2(Math.abs(t.top-t.bottom)*n.y/(b*i))}function q(){O.min=u?Math.max(O.origMin,V(D)):O.origMin}function H(t,e){return t=Math.round(1e6*t)/1e6,t=Math.max(Math.min(O.max,t),O.min),k&&!e&&(t=Math.round(t))<O.min&&(t=Math.ceil(O.min)),t}function W(t,e,n){if(!L)return 0;if(e||"function"!=typeof L||(t=L(t)),!n){var r=2*Math.PI;t=t%r+(t>=0?0:r),Math.min(Math.abs(t),Math.abs(t-r))<1e-5&&(t=0)}return t}function X(t,e,n,i){if(!a&&!s)return t;var o,u,c=D;if(e){c=r.extend({},D);var l,h,f=Math.abs(t.right-t.left),d=Math.abs(t.top-t.bottom),p=Math.abs(Math.sin(e)),m=Math.abs(Math.cos(e));if(t.width&&t.height)l=t.width,h=t.height;else if(Math.abs(p-m)<5e-4)if(_&&b){var v=Math.abs(_/b),g=Math.pow(1+Math.pow(v,2),.5);h=(l=Math.max(f,d)/g)*v}else l=f*m,h=d*p;else l=(m*f-p*d)/(m*m-p*p),h=(m*d-p*f)/(m*m-p*p);var y=f-Math.max(m*l,p*h),x=d-Math.max(m*h,p*l);c.left-=y,c.right+=y,c.top+=x,c.bottom-=x}return i&&(c={left:c.left-(t.right-t.left)/2,right:c.right+(t.right-t.left)/2,top:c.top-(t.bottom-t.top)/2,bottom:c.bottom+(t.bottom-t.top)/2}),a&&(t.right-t.left>c.right-c.left?o=c.left-(t.right-t.left-(c.right-c.left))/2-t.left:t.left<c.left?o=c.left-t.left:t.right>c.right&&(o=c.right-t.right),o&&(!n||n.x*o>0)&&(n&&Math.abs(o)>Math.abs(n.x*n.unit)&&(o=Math.abs(n.x*n.unit)*o/Math.abs(o)),t={left:t.left+=o,right:t.right+=o,top:t.top,bottom:t.bottom})),s&&(t.top-t.bottom>c.top-c.bottom?u=c.bottom-(t.top-t.bottom-(c.top-c.bottom))/2-t.bottom:t.top>c.top?u=c.top-t.top:t.bottom<c.bottom&&(u=c.bottom-t.bottom),u&&(!n||-n.y*u>0)&&(n&&Math.abs(u)>Math.abs(n.y*n.unit)&&(u=Math.abs(n.y*n.unit)*u/Math.abs(u)),t={top:t.top+=u,bottom:t.bottom+=u,left:t.left,right:t.right})),t}function K(t,e){if(j.rotation=e||0,t.width&&t.height&&e){var n=(t.left+t.right)/2,r=(t.top+t.bottom)/2;j.viewFromCenterSizeRotation({x:n,y:r},t,e)}else j.bounds=t;T={x:(j.bounds.left+j.bounds.right)/2,y:(j.bounds.top+j.bounds.bottom)/2}}function Y(){g.size({width:x.width(),height:x.height()})}return D.left=h.transformCoordinates(D.gcs||w,M,{x:void 0!==D.left?D.left:-180,y:z}).x,D.right=h.transformCoordinates(D.gcs||w,M,{x:void 0!==D.right?D.right:180,y:z}).x,D.top=void 0!==D.top?h.transformCoordinates(D.gcs||w,M,{x:F,y:D.top}).y:D.right,D.bottom=void 0!==D.bottom?h.transformCoordinates(D.gcs||w,M,{x:F,y:D.bottom}).y:D.left,i=e.unitsPerPixel||(D.right-D.left)/256,j.viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},e.center=f.normalizeCoordinates(e.center),a=void 0!==e.clampBoundsX&&e.clampBoundsX,s=void 0===e.clampBoundsY||e.clampBoundsY,u=void 0===e.clampZoom||e.clampZoom,this.unitsPerPixel=function(t,e){return t=t||0,e?(i=Math.pow(2,t)*e,g.draw(),g):Math.pow(2,-t)*i},this.animationQueue=function(t){if(void 0===t)return N;if(t!==N){if(N.length){t.length&&t[0]!==N[0]&&window.cancelAnimationFrame(N[0]);for(var e=t.length?1:0;e<N.length;e+=1)t.push(N[e])}N=t}return this},this.autoResize=function(t){return void 0===t?I:(t!==I&&(r(window).off("resize",Y),(I=t)&&r(window).on("resize",Y)),this)},this.clampBoundsX=function(t){return void 0===t?a:(t!==a&&(a=!!t,g.pan({x:0,y:0})),g)},this.clampBoundsY=function(t){return void 0===t?s:(t!==s&&(s=!!t,g.pan({x:0,y:0})),g)},this.clampZoom=function(t){return void 0===t?u:(t!==u&&(u=!!t,q(),g.zoom(A)),g)},this.allowRotation=function(t){return void 0===t?L:("function"!=typeof t&&(t=!!t),t!==L&&(L=t,g.rotation(E)),g)},this.origin=function(){return r.extend({},c)},this.camera=function(){return j},this.gcs=function(t){if(void 0===t)return M;if(t!==M){var e=g.center(void 0,void 0);M=t,q();var n=H(A);n!==A&&g.zoom(n),g.center(e,void 0)}return g},this.ingcs=function(t){return void 0===t?w:(w=t,g)},this.node=function(){return x},this.zoom=function(t,e,n){if(void 0===t)return A;var r,i,o=e&&(e.mapgcs||e.geo)&&e.map,a=o;if((t=H(t,n))===A)return g;if(A=t,i=g.boundsFromZoomAndCenter(t,T,E,null,n,a),g.modified(),K(i,E),r={zoomLevel:A,screenPosition:e?e.map:void 0},g.geoTrigger(p.zoom,r),o){var s=g.gcsToDisplay(e.mapgcs||e.geo,e.mapgcs?null:void 0);g.pan({x:e.map.x-s.x,y:e.map.y-s.y},n,!0)}else g.pan({x:0,y:0},n);return g},this.pan=function(t,e,n){var r={screenDelta:t};if(t.x||t.y){var i=g.unitsPerPixel(A),o=Math.sin(E),a=Math.cos(E);j.pan({x:(t.x*a- -t.y*o)*i,y:(t.x*o+-t.y*a)*i})}var s=j.bounds;if((s=X(s,E,"limited"===n?{x:t.x,y:t.y,unit:i}:void 0,!0===n))!==j.bounds){var u=g.gcsToDisplay({x:j.bounds.left,y:j.bounds.top},null);K(s=g.boundsFromZoomAndCenter(A,{x:(s.left+s.right)/2,y:(s.top+s.bottom)/2},E,null,e,!0),E);var c=g.gcsToDisplay({x:j.bounds.left,y:j.bounds.top},null);r.screenDelta.x+=c.x-u.x,r.screenDelta.y+=c.y-u.y}return T=j.displayToWorld({x:_/2,y:b/2}),g.geoTrigger(p.pan,r),g.modified(),g},this.rotation=function(t,e,n){if(void 0===t)return E;var r=e&&e.geo&&e.map;if((t=W(t,n))===E)return g;E=t;var i=g.boundsFromZoomAndCenter(A,T,E,null,n,!0);g.modified(),K(i,E);var o={rotation:E,screenPosition:e?e.map:void 0};if(g.geoTrigger(p.rotate,o),r){var a=g.gcsToDisplay(e.geo);g.pan({x:e.map.x-a.x,y:e.map.y-a.y},void 0,!0)}else g.pan({x:0,y:0},void 0,!0);return q(),g.zoom(A,void 0,n),g},this.center=function(t,e,n,i){var o;return void 0===t?o=r.extend({},g.worldToGcs(T,e)):(o=g.gcsToWorld(t,e),K(g.boundsFromZoomAndCenter(A,o,E,null,n,i),E),g.modified(),g.geoTrigger(p.pan,{screenDelta:{x:0,y:0}}),g)},this.createLayer=function(t,e){e=e||{};var n=d.createLayer(t,g,e);return n&&(g.addChild(n),g.children().forEach(function(t){t instanceof v&&t.moveToTop()}),n._update(),g.modified(),g.geoTrigger(p.layerAdd,{target:g,layer:n})),n},this.deleteLayer=function(t){return null!==t&&void 0!==t&&(t._exit(),g.removeChild(t),g.modified(),g.geoTrigger(p.layerRemove,{target:g,layer:t})),t},this.size=function(t){if(void 0===t)return{width:_,height:b};var e=g.center();_=t.width||_,b=t.height||b,q();var n=H(A);return n!==A&&g.zoom(n),g.camera().viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},g.center(e),g.geoTrigger(p.resize,{target:g,width:_,height:b}),g.modified(),g},this.rotatedSize=function(){if(!this.rotation())return{width:_,height:b};var t=B({x:0,y:0},{width:_,height:b},this.rotation());return{width:Math.abs(t.right-t.left),height:Math.abs(t.top-t.bottom)}},this.gcsToWorld=function(t,e){return Array.isArray(t)?t.map(function(t){return g.gcsToWorld(t,e)}):((e=null===e?M:void 0===e?w:e)!==M&&(t=h.transformCoordinates(e,M,t)),c.x||c.y||c.z?t=h.affineForward({origin:c},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),t)},this.worldToGcs=function(t,e){return Array.isArray(t)?t.map(function(t){return g.worldToGcs(t,e)}):(c.x||c.y||c.z?t=h.affineInverse({origin:c},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),(e=null===e?M:void 0===e?w:e)!==M&&(t=h.transformCoordinates(M,e,t)),t)},this.gcsToDisplay=function(t,e){return t=g.gcsToWorld(t,e),g.worldToDisplay(t)},this.worldToDisplay=function(t){return Array.isArray(t)?t.map(function(t){return j.worldToDisplay(t)}):j.worldToDisplay(t)},this.displayToGcs=function(t,e){return t=g.displayToWorld(t),g.worldToGcs(t,e)},this.displayToWorld=function(t){return Array.isArray(t)?t.map(function(t){return j.displayToWorld(t)}):j.displayToWorld(t)},this.draw=function(){var t,e=g.children();for(g.geoTrigger(p.draw,{target:g}),g._update(),t=0;t<e.length;t+=1)e[t].draw();return g.geoTrigger(p.drawEnd,{target:g}),g},this.fileReader=function(t,e){return void 0===t?S:("string"==typeof t?((e=e||{}).layer||(e.layer=g.createLayer("feature",r.extend({},e))),e.renderer=e.layer.renderer().api(),S=d.createFileReader(t,e)):S=t,g)},this._init=function(){if(void 0===x||null===x)throw new Error("Map require DIV node");return x.data("data-geojs-map")&&r.isFunction(x.data("data-geojs-map").exit)&&x.data("data-geojs-map").exit(),x.addClass("geojs-map"),x.data("data-geojs-map",g),g},this._update=function(t){var e,n=g.children();for(e=0;e<n.length;e+=1)n[e]._update(t);return g},this.exit=function(){var t,e=g.children();for(t=e.length-1;t>=0;t-=1)e[t]._exit(),g.removeChild(e[t]);g.interactor()&&(g.interactor().destroy(),g.interactor(null)),N=[],g.node().data("data-geojs-map",null),g.node().off(".geo"),g.node().empty(),r(window).off("resize",Y),y()},this.interactor=function(t){return void 0===t?C:(C&&C!==t&&C.destroy(),(C=t)&&(x.attr("tabindex")||x.attr("tabindex",0),C.map(g)),g)},this.zoomRange=function(t,e){return void 0===t?r.extend({},O):(void 0!==t.max&&(O.max=t.max),void 0!==t.min&&(O.min=O.origMin=t.min),q(),e||g.zoom(A),g)},this.transition=function(t,e,n){if(void 0===t)return P;if(P){var i=r.extend(!0,{},P.end);return i.center&&M!==w&&(i.center=h.transformCoordinates(M,w,i.center)),R=r.extend({},i||{},R||{},t),g}var o=g.unitsPerPixel(0);function a(t){return Math.pow(2,-(t+1))*o*b}var s={center:void 0,zoom:g.zoom(),rotation:g.rotation(),duration:1e3,ease:function(t){return t},interp:function(t,e){return function(n){var i=[];return r.each(t,function(r){i.push(function(t,e,n){return t+(e-t)*n}(t[r],e[r],n))}),i}},done:null,zCoord:!0};function u(e){var n=P.done,r=R;if(!0===P.cancel)return g.geoTrigger(p.transitioncancel,t),n&&n({cancel:!0,source:P.cancelSource,transition:P}),P=null,void(R&&(r=R,R=null,g.transition(r,void 0,e)));if(P.start.time||(P.start.time=e,P.end.time=e+t.duration),P.time=e-P.start.time,e>=P.end.time||r){if(!r){if(P.end.center){var i=A!==H(P.end.zoom);g.center(P.end.center,null,i,i)}g.zoom(P.end.zoom,P.zoomOrigin),g.rotation(W(P.end.rotation))}return g.geoTrigger(p.transitionend,t),n&&n({next:!!r}),P=null,void(R&&(r=R,R=null,g.transition(r,void 0,e)))}var a=P.ease((e-P.start.time)/t.duration),s=P.interp(a);P.zCoord&&(s[2]=function(t){return-Math.log2(t/o/b)-1}(s[2])),H(s[2],!0)===A?g.center({x:s[0],y:s[1]},null,!0,!0):(T=g.gcsToWorld({x:s[0],y:s[1]},null,!0,!0),g.zoom(s[2],P.zoomOrigin,!0)),g.rotation(s[3],void 0,!0),g.scheduleAnimationFrame(u)}return t.center&&(e=null===e?M:void 0===e?w:e,(t=r.extend(!0,{},t)).center=f.normalizeCoordinates(t.center),e!==M&&(t.center=h.transformCoordinates(e,M,t.center))),t=r.extend(!0,{},s,t),(P={start:{center:g.center(void 0,null),zoom:g.zoom(),rotation:g.rotation()},end:{center:t.center,zoom:H(t.zoom),rotation:W(t.rotation,void 0,!0)},ease:t.ease,zCoord:t.zCoord,done:t.done,duration:t.duration,zoomOrigin:t.zoomOrigin}).interp=t.interp([P.start.center.x,P.start.center.y,t.zCoord?a(P.start.zoom):P.start.zoom,P.start.rotation],[P.end.center?P.end.center.x:P.start.center.x,P.end.center?P.end.center.y:P.start.center.y,t.zCoord?a(P.end.zoom):P.end.zoom,P.end.rotation]),g.geoTrigger(p.transitionstart,t),p.cancelNavigation?(P=null,g.geoTrigger(p.transitionend,t),g):(p.cancelAnimation?(t.duration=0,u(0)):n?u(n):g.scheduleAnimationFrame(u),g)},this.transitionCancel=function(t){return!(!P||!0===P.cancel&&!R)&&(P.cancel=!0,P.cancelSource=t||P.cancelSource||"",R=null,!0)},this.bounds=function(t,e){var n;if(e=null===e?M:void 0===e?w:e,void 0!==t){if(e!==M){var r=h.transformCoordinates(e,M,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:r[0].x,top:r[0].y,right:r[1].x,bottom:r[1].y}}t=X(t,E),n=g.zoomAndCenterFromBounds(t,E,null),g.zoom(n.zoom),g.center(n.center,null)}return g.boundsFromZoomAndCenter(A,T,E,e,!0)},this.maxBounds=function(t,e){if(e=null===e?M:void 0===e?w:e,void 0===t)return{left:h.transformCoordinates(M,e,{x:D.left,y:0}).x,right:h.transformCoordinates(M,e,{x:D.right,y:0}).x,bottom:h.transformCoordinates(M,e,{x:0,y:D.bottom}).y,top:h.transformCoordinates(M,e,{x:0,y:D.top}).y};var n=((t.left||0)+(t.right||0))/2,r=((t.bottom||0)+(t.top||0))/2;return void 0!==t.left&&(D.left=h.transformCoordinates(e,M,{x:t.left,y:r}).x),void 0!==t.right&&(D.right=h.transformCoordinates(e,M,{x:t.right,y:r}).x),void 0!==t.bottom&&(D.bottom=h.transformCoordinates(e,M,{x:n,y:t.bottom}).y),void 0!==t.top&&(D.top=h.transformCoordinates(e,M,{x:n,y:t.top}).y),q(),g.zoom(A),g.pan({x:0,y:0}),this},this.zoomAndCenterFromBounds=function(t,e,n){var r,i;if((n=null===n?M:void 0===n?w:n)!==M){var o=h.transformCoordinates(n,M,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y}}if(t.left>=t.right||t.bottom>=t.top)throw new Error("Invalid bounds provided");return i=H(V(t,e)),r={x:((t=X(t,e)).left+t.right)/2-c.x,y:(t.top+t.bottom)/2-c.y},n!==M&&(r=h.transformCoordinates(M,n,r)),{zoom:i,center:r}},this.boundsFromZoomAndCenter=function(t,e,n,r,i,o){var a,s,u,l,f,d;if(r=null===r?M:void 0===r?w:r,t=H(t,i),d=g.unitsPerPixel(t),e=g.gcsToWorld(e,null),u=(a=_*d)/2,l=(s=b*d)/2,n?(e.x+=c.x,e.y+=c.y,(f=B(e,{width:a,height:s},n)).width=a,f.height=s,f=X(f,n,void 0,o)):f=X(f={left:e.x-u+c.x,right:e.x+u+c.x,bottom:e.y-l+c.y,top:e.y+l+c.y},0,void 0,o),r!==M){var p=h.transformCoordinates(M,r,[[f.left,f.top],[f.right,f.bottom]]);f={left:p[0][0],top:p[0][1],right:p[1][0],bottom:p[1][1]}}return f.width=a,f.height=s,f},this.discreteZoom=function(t){return void 0===t?k:(k!==(t=!!t)&&((k=t)&&g.zoom(Math.round(g.zoom())),g.interactor()&&g.interactor().options({discreteZoom:k})),g)},this.layers=this.children,this.updateAttribution=function(){g.node().find(".geo-attribution").remove();var t=r("<div/>").addClass("geo-attribution").on("mousedown",function(t){t.stopPropagation()});return g.children().forEach(function(e){var n=e.attribution();n&&r("<span/>").addClass("geo-attribution-layer").html(n).appendTo(t)}),r("span",t).length&&t.appendTo(g.node()),g},this.screenshot=function(t,e,n,i){var o;if(!t||Array.isArray(t)||t.renderer||(e=e||t.type,n=n||t.encoderOptions,i=i||t,t=t.layers),(i=i||{}).wait){var a=r.extend({},i,{wait:!1});o=r.Deferred();var s=function(){window.requestAnimationFrame(function(){o.resolve()})};return"idle"===i.wait?g.onIdle(s):s(),o.then(function(){return g.screenshot(t,e,n,a)})}o=r.when(),t?Array.isArray(t)||(t=[t]):(t=g.layers(),null!==i.attribution&&void 0!==i.attribution||(i.attribution=!0)),t=(t=t.filter(function(t){return g.layers().indexOf(t)>=0&&t.opacity()>0&&(!t.visible||t.visible())})).sort(function(t,e){return t.zIndex()-e.zIndex()});var u=document.createElement("canvas");u.width=_,u.height=b;var c=u.getContext("2d");if(!1!==i.background&&null!==i.background){var l=i.background;void 0===i.background&&(c.fillStyle="white",c.fillRect(0,0,u.width,u.height),g.node().parents().get().reverse().forEach(function(t){(l=window.getComputedStyle(t).backgroundColor)&&"transparent"!==l&&(c.fillStyle=l,c.fillRect(0,0,u.width,u.height))}),l=window.getComputedStyle(g.node()[0]).backgroundColor),l&&"transparent"!==l&&(c.fillStyle=l,c.fillRect(0,0,u.width,u.height))}return t.forEach(function(t){var e=t.opacity();t.node().children("canvas").each(function(){var n=r(this);o=o.then(function(){"vgl"===t.renderer().api()&&t.renderer()._renderFrame(),U(c,e,n,n[0])})}),!t.node().children().not("canvas").length&&t.node().children().length||(o=o.then(function(){return f.htmlToImage(t.node(),1).done(function(t){U(c,1,r([]),t)})}))}),i.attribution&&g.node().find(".geo-attribution").each(function(){var t=r(this);o=o.then(function(){return f.htmlToImage(t,1).done(function(t){U(c,1,r([]),t)})})}),o=o.then(function(){var t=u;if("canvas"!==e)try{u=u.toDataURL(e,n)}catch(t){console.warn("Failed to convert screenshot to output",t);var i=r.Deferred();return i.reject(),i}return g.geoTrigger(p.screenshot.ready,{canvas:t,screenshot:u}),u})},this.scheduleAnimationFrame=function(t,e){N.length||N.push(window.requestAnimationFrame(G));var n=N.indexOf(t,1);if(n>=0){if(!e)return;if(N.splice(n,1),"remove"===e)return}return N.push(t),N[0]},this._init(e),this.node().on("dragover.geo",function(t){var e=t.originalEvent;g.fileReader()&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")}).on("drop.geo",function(t){var e,n,r=t.originalEvent,i=g.fileReader();function o(){g.draw()}if(i)for(r.stopPropagation(),r.preventDefault(),e=0;e<r.dataTransfer.files.length;e+=1)n=r.dataTransfer.files[e],i.canRead(n)&&i.read(n,o)}),c={x:0,y:0},this.zoomRange(e,!0),A=H(A),E=W(E),this.center(r.extend({},e.center||T),void 0),null!==e.interactor&&this.interactor(e.interactor||m({discreteZoom:k})),I&&r(window).on("resize",Y),g.geoOn([p.layerAdd,p.layerRemove],g.updateAttribution),this};a.create=function(t){var e=a(t),r=n(73);return e&&e.zoom?(t.data=t.data||[],t.layers=t.layers||[],t.layers.forEach(function(n){n.data=n.data||t.data,n.layer=r.create(e,n)}),e):(console.warn("Could not create map."),null)},i(a,o),t.exports=a},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(252),a=n(2),s=n(63),u=function t(e){var r=n(250);if(!(this instanceof t))return new t(e);void 0!==e.mapOpacity&&void 0===e.opacity&&(e.opacity=e.mapOpacity),o.call(this,e),this.mapOpacity=this.opacity,this._getTile=function(t,e){var n=e||t;return r({index:t,size:{x:this._options.tileWidth,y:this._options.tileHeight},queue:this._queue,overlap:this._options.tileOverlap,scale:this._options.tileScale,url:this._options.url.call(this,n.x,n.y,n.level||0,this._options.subdomains),crossDomain:this._options.crossDomain})}.bind(this)};u.defaults=r.extend({},o.defaults,{tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),i(u,o),a.registerLayer("osm",u,[s.capabilities.image]),t.exports=u},function(t,e,n){"use strict"},function(t,e,n){"use strict";t.exports="0.18.1"},function(t,e,n){"use strict";t.exports="32cdc111fa369544e8437d29d7a3db5d0773036f"},function(t,e,n){"use strict";n(15).d3={rescale:n(244)},t.exports={graphFeature:n(621),lineFeature:n(622),object:n(56),pathFeature:n(623),pointFeature:n(624),quadFeature:n(625),renderer:n(32),tileLayer:n(626),uniqueID:n(143),vectorFeature:n(627)}},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(248),a=function t(e){var n=this;return this instanceof t?(o.call(this,e),this.select=function(){var t=n.renderer(),e={},r=n.nodeFeature(),i=n.linkFeatures();return e.nodes=t.select(r._d3id()),e.links=i.map(function(e){return t.select(e._d3id())}),e},this):new t(e)};r(a,o),i("d3","graph",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(72),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(32).d3,i=n(56),a=n(23),s=n(5);e=e||{},o.call(this,e),i.call(this);var u=this,c=this._init,l=a(),h=0,f=this._update;return this._init=function(t){return c.call(u,t),u},this._build=function(){var t,e,n=u.data()||[],i=u.style(),o=u.renderer(),a=u.position();for(f.call(u),i.fill=function(){return!1},n.forEach(function(e,n){var c,l,h=u.line()(e,n),f={};function d(t){return s.isFunction(t)?function(){return t(h[0],0,e,n)}:t}for(l in i)i.hasOwnProperty(l)&&(f[l]=d(i[l]));t=r.svg.line().x(function(t){return u.featureGcsToDisplay(t).x}).y(function(t){return u.featureGcsToDisplay(t).y}).interpolate(u.style.get("closed")(e,n)&&h.length>2?"linear-closed":"linear"),c={data:[h.map(function(t,r){return a(t,r,e,n)})],append:"path",attributes:{d:t},id:u._d3id()+n,classes:["d3LineFeature","d3SubLine-"+n],visible:u.visible,style:f},o._drawFeatures(c)}),e=n.length;e<h;e+=1)o._removeFeature(u._d3id()+e);return h=n.length,l.modified(),u.updateTime().modified(),u},this._update=function(){return f.call(u),u.timestamp()>=l.timestamp()&&u._build(),u},this._init(e),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("d3","line",a,s),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(254),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(3),i=n(32).d3,a=n(56),s=n(23);e=e||{},o.call(this,e),a.call(this);var u=this,c=this._init,l=s(),h=this._update,f={style:{}};return this._init=function(t){return c.call(u,t),u},this._build=function(){var t,e,n=u.data()||[],o=u.style();return h.call(u),e=function(t){var e={source:t.source,target:t.target};return i.svg.diagonal()(e)},t=[],n.forEach(function(e,r){var i,o;r<n.length-1&&(i=e,o=n[r+1],t.push({source:u.featureGcsToDisplay(i),target:u.featureGcsToDisplay(o)}))}),f.data=t,f.attributes={d:e},f.id=u._d3id(),f.append="path",f.classes=["d3PathFeature"],f.style=r.extend({fill:function(){return!1},fillColor:function(){return{r:0,g:0,b:0}}},o),f.visible=u.visible,u.renderer()._drawFeatures(f),l.modified(),u.updateTime().modified(),u},this._update=function(){return h.call(u),u.dataTime().timestamp()>=l.timestamp()&&u._build(),u},this._init(e),this};r(a,o),i("d3","path",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(98),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(56),i=n(23);e=e||{},o.call(this,e),r.call(this);var a=this,s=this._init,u=this._update,c=i(),l={};return this._init=function(t){return s.call(a,t),a},this._build=function(){var t=a.data(),e=a.style.get(),n=a.renderer(),r=a.position();return u.call(a),t||(t=[]),l.id=a._d3id(),l.data=t,l.append="circle",l.attributes={r:n._convertScale(e.radius),cx:function(t){return a.featureGcsToDisplay(r(t)).x},cy:function(t){return a.featureGcsToDisplay(r(t)).y}},l.style=e,l.classes=["d3PointFeature"],l.visible=a.visible,a.renderer()._drawFeatures(l),c.modified(),a.updateTime().modified(),a},this._update=function(){return u.call(a),a.timestamp()>=c.timestamp()&&a._build(),a},this._init(e),this};r(a,o),i("d3","point",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(63),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(3),i=n(32).d3,a=n(56);o.call(this,e),a.call(this);var s,u=this,c=this._exit,l=this._init,h=this._update;return this._build=function(){if(this.position()){var t=this.renderer(),e=t.layer().map();s=this._generateQuads();var n=[];r.each(s.clrQuads,function(t,e){n.push({type:"clr",quad:e,zIndex:e.pos[2]})}),r.each(s.imgQuads,function(t,e){e.image&&n.push({type:"img",quad:e,zIndex:e.pos[2]})});var o={id:this._d3id(),data:n,dataIndex:function(t){return t.quad.quadId},append:function(t){var e=this.namespaceURI,n="clr"===t.type?"polygon":"image";return e?document.createElementNS(e,n):document.createElement(n)},attributes:{fill:function(t){if("clr"===t.type)return i.rgb(255*t.quad.color.r,255*t.quad.color.g,255*t.quad.color.b);1!==t.quad.opacity&&i.select(this).style("opacity",t.quad.opacity)},height:function(t){return"clr"===t.type?void 0:1},points:function(n){if("clr"===n.type&&!n.points){var r,i=[];for(r=0;r<n.quad.pos.length;r+=3){var o={x:n.quad.pos[r],y:n.quad.pos[r+1],z:n.quad.pos[r+2]};o=e.gcsToDisplay(o,null),o=t.baseToLocal(o),i.push(o.x+","+o.y)}n.points=i[0]+" "+i[1]+" "+i[3]+" "+i[2]}return"clr"===n.type?n.points:void 0},preserveAspectRatio:function(t){return"clr"===t.type?void 0:"none"},reference:function(t){return t.quad.reference},stroke:!1,transform:function(n){if("img"===n.type&&n.quad.image&&!n.svgTransform){var r,i,o,a,s=[],u=-1,c=n.quad.image.width,l=n.quad.image.height;for(o=0;o<n.quad.pos.length;o+=3){var h={x:n.quad.pos[o],y:n.quad.pos[o+1],z:n.quad.pos[o+2]};h=e.gcsToDisplay(h,null),h=t.baseToLocal(h),s.push(h)}for(o=0;o<4;o+=1)(r=Math.abs(s[(o+1)%4].x*(s[(o+2)%4].y-s[(o+3)%4].y)+s[(o+2)%4].x*(s[(o+3)%4].y-s[(o+1)%4].y)+s[(o+3)%4].x*(s[(o+1)%4].y-s[(o+2)%4].y))/2)>u&&(u=r,i=o);n.svgTransform=[3===i||2===i?s[1].x-s[0].x:s[3].x-s[2].x,3===i||2===i?s[1].y-s[0].y:s[3].y-s[2].y,0===i||2===i?s[1].x-s[3].x:s[0].x-s[2].x,0===i||2===i?s[1].y-s[3].y:s[0].y-s[2].y,2===i?s[3].x+s[0].x-s[1].x:s[2].x,2===i?s[3].y+s[0].y-s[1].y:s[2].y],Math.abs(n.svgTransform[1]/c)<1e-6&&Math.abs(n.svgTransform[2]/l)<1e-6&&(a=n.svgTransform[0]/c,n.svgTransform[4]=Math.round(n.svgTransform[4]/a)*a,a=n.svgTransform[3]/l,n.svgTransform[5]=Math.round(n.svgTransform[5]/a)*a)}return"img"===n.type&&n.quad.image?"matrix("+n.svgTransform.join(" ")+")":void 0},width:function(t){return"clr"===t.type?void 0:1},x:function(t){return"clr"===t.type?void 0:0},"xlink:href":function(t){return"clr"!==t.type&&t.quad.image?t.quad.image.src:void 0},y:function(t){return"clr"===t.type?void 0:0}},style:{fillOpacity:function(t){return"clr"===t.type?t.quad.opacity:void 0}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:!0,visible:u.visible,classes:["d3QuadFeature"]};t._drawFeatures(o),this.buildTime().modified()}},this._update=function(){return h.call(u),(u.buildTime().timestamp()<=u.dataTime().timestamp()||u.buildTime().timestamp()<u.timestamp())&&u._build(),u},this._init=function(){l.call(u,e)},this._exit=function(){c.call(u)},u._init(e),this};r(a,o);var s={};s[o.capabilities.color]=!0,s[o.capabilities.image]=!0,s[o.capabilities.imageCrop]=!1,s[o.capabilities.imageFixedScale]=!1,s[o.capabilities.imageFull]=!1,s[o.capabilities.canvas]=!1,s[o.capabilities.video]=!1,i("d3","quad",a,s),t.exports=a},function(t,e,n){"use strict";var r=function(){var t,e=this,n=this._init,r=this._exit,i=0,o=[];this._drawTile=function(n){if(t){var r=e._tileBounds(n),a=n.index.level||0,s=this._tileOffset(a),u={};u.ul=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.top-s.y},a),0),u.ll=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.bottom-s.y},a),0),u.ur=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.top-s.y},a),0),u.lr=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.bottom-s.y},a),0),u.ul.z=u.ll.z=u.ur.z=u.lr.z=a*e._levelZIncrement,i+=1,u.id=i,n.quadId=u.id,u.image=n.image,u.reference=n.toString(),o.push(u),t.data(o),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<o.length;r+=1)if(o[r].id===n.quadId){o.splice(r,1);break}t.data(o),t._update(),e.draw()}},this._exit=function(){e.deleteFeature(t),t=null,o=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=this.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(o),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(2).registerLayerAdjustment)("d3","tile",r),t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(256),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(56),i=n(23),a=n(32).d3;e=e||{},o.call(this,e),r.call(this);var s=this,u=this._init,c=this._exit,l=this._update,h=i(),f={};function d(t,e,n){return s._d3id()+"_marker_"+e+"_"+n}function p(t,e,n,r,i){var o={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:"1",refY:"5",markerHeight:"5",markerWidth:"5",orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:"6",refY:"6",markerHeight:"8",markerWidth:"8",orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:"0",refY:"5",markerHeight:"6",markerWidth:"6",orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:"10",refY:"5",markerHeight:"5",markerWidth:"5",orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}},u=s.renderer()._definitions().selectAll("g.marker-group#"+s._d3id()).data(t.length?[1]:[]);u.enter().append("g").attr("id",s._d3id).attr("class","marker-group"),u.exit().remove();var c=t.reduce(function(t,e,n){var a=o[i(e,n)],s=o[r(e,n)];return a&&t.push({data:e,dataIndex:n,head:!0}),s&&t.push({data:e,dataIndex:n,head:!1}),t},[]),l=u.selectAll("marker.geo-vector-marker").data(c);l.enter().append("marker").append("path");var h=s.renderer();l.each(function(t){var e=a.select(this),n=t.head?o[i(t.data,t.dataIndex)]:o[r(t.data,t.dataIndex)];Object.keys(n.attrs).map(function(t){e.attr(t,n.attrs[t])})}).attr("id",function(t){return d(t.data,t.dataIndex,t.head?"head":"tail")}).style("stroke",function(t){return h._convertColor(e)(t.data,t.dataIndex)}).style("fill",function(t){return h._convertColor(e)(t.data,t.dataIndex)}).style("opacity",function(t){return n(t.data,t.dataIndex)}).select("path").attr("d",function(t){return t.head?o[i(t.data,t.dataIndex)].path:o[r(t.data,t.dataIndex)].path}),l.exit().remove()}return this._init=function(t){return u.call(s,t),s},this._build=function(){var t,e=s.data(),n=s.style.get(),r=s.renderer(),i=s.origin(),o=s.delta(),a=s.style("scale"),u=Number.NEGATIVE_INFINITY;function c(){return a/r.scaleFactor()}return l.call(s),e||(e=[]),t=e.map(function(t,e){var n=s.featureGcsToDisplay(i(t,e)),r=o(t,e);return u=Math.max(u,r.x*r.x+r.y*r.y),{x1:n.x,y1:n.y,dx:r.x,dy:-r.y}}),u=Math.sqrt(u),a||(a=75/u),f.id=s._d3id(),f.data=e,f.append="line",f.attributes={x1:function(e,n){return t[n].x1},y1:function(e,n){return t[n].y1},x2:function(e,n){return t[n].x1+c()*t[n].dx},y2:function(e,n){return t[n].y1+c()*t[n].dy},"marker-start":function(t,e){return"url(#"+d(0,e,"tail")+")"},"marker-end":function(t,e){return"url(#"+d(0,e,"head")+")"}},f.style={stroke:function(){return!0},strokeColor:n.strokeColor,strokeWidth:n.strokeWidth,strokeOpacity:n.strokeOpacity,originStyle:n.originStyle,endStyle:n.endStyle},f.classes=["d3VectorFeature"],f.visible=s.visible,p(e,n.strokeColor,n.strokeOpacity,n.originStyle,n.endStyle),s.renderer()._drawFeatures(f),h.modified(),s.updateTime().modified(),s},this._update=function(){return l.call(s),s.timestamp()>=h.timestamp()?s._build():p(f.data,f.style.strokeColor,f.style.strokeOpacity,f.style.originStyle,f.style.endStyle),s},this._exit=function(){c.call(s),f={},p([],null,null,null,null)},this._init(e),this};r(a,o),i("d3","vector",a),t.exports=a},function(t,e,n){"use strict";t.exports={choroplethFeature:n(629),contourFeature:n(630),isolineFeature:n(631),lineFeature:n(632),pointFeature:n(633),polygonFeature:n(634),quadFeature:n(636),tileLayer:n(637),vglRenderer:n(238)}},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(243),a=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var n=this,r=null,i=this._exit,a=this.draw,s=this._update;return this.draw=function(){if(n._update(),r)for(var t=0;t<r.length;t+=1)r[t].draw();return a(),n},this._build=function(){return n.buildTime().modified(),r=n.createChoropleth()},this._update=function(){s.call(n),(n.dataTime().timestamp()>=n.buildTime().timestamp()||n.updateTime().timestamp()<=n.timestamp())&&(n._wipePolygons(),n._build()),n.updateTime().modified()},this._wipePolygons=function(){r&&r.map(function(t){return t._exit()}),r=null},this._exit=function(){n._wipePolygons(),i()},this._init(e),this};r(a,o),i("vgl","choropleth",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(245),a=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var r=n(40),i=n(18),a=n(5);n(64).call(this);var s=this,u=this._exit,c=null,l=null,h=null,f=null,d=null,p=null,m=null,v=null,g=void 0!==e.dynamicDraw&&e.dynamicDraw,y=this._init,x=this._update;return this._init=function(t){var e,n,i=r.blend(),o=r.shaderProgram(),a=r.material(),u=r.lookupTable(),x=r.geometryData(),_=new r.modelViewUniform("modelViewMatrix"),b=new r.projectionUniform("projectionMatrix"),M=new r.uniform(r.GL.INT,"sampler2d"),w=(e=["#ifdef GL_ES","  precision highp float;","#endif","attribute vec3 pos;","attribute float value;","attribute float opacity;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying float valueVar;","varying float opacityVar;","void main(void)","{","  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);","  if (scrPos.w != 0.0) {","    scrPos = scrPos / scrPos.w;","  }","  valueVar = value;","  opacityVar = opacity;","  gl_Position = scrPos;","}"].join("\n"),(n=new r.shader(r.GL.VERTEX_SHADER)).setShaderSource(e),n),T=function(){var t=["#ifdef GL_ES","  precision highp float;","#endif","uniform vec4 minColor;","uniform vec4 maxColor;","uniform float steps;","uniform bool stepped;","uniform sampler2D sampler2d;","varying float valueVar;","varying float opacityVar;","void main () {","  vec4 clr;","  if (valueVar < 0.0) {","    clr = minColor;","  } else if (valueVar > steps) {","    clr = maxColor;","  } else {","    float step;","    if (stepped) {","      step = floor(valueVar) + 0.5;","      if (step > steps) {","        step = steps - 0.5;","      }","    } else {","      step = valueVar;","    }","    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));","  }","  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);","}"].join("\n"),e=new r.shader(r.GL.FRAGMENT_SHADER);return e.setShaderSource(t),e}(),A=r.vertexAttribute("pos"),E=r.vertexAttribute("value"),S=r.vertexAttribute("opacity"),C=r.sourceDataP3fv({name:"pos"}),O=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.One,{name:"value"}),P=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Two,{name:"opacity"}),R=new r.triangles;y.call(s,t),l=r.mapper({dynamicDraw:g}),o.addVertexAttribute(A,r.vertexAttributeKeys.Position),o.addVertexAttribute(E,r.vertexAttributeKeysIndexed.One),o.addVertexAttribute(S,r.vertexAttributeKeysIndexed.Two),o.addUniform(_),o.addUniform(b),d=new r.uniform(r.GL.FLOAT_VEC4,"minColor"),o.addUniform(d),p=new r.uniform(r.GL.FLOAT_VEC4,"maxColor"),o.addUniform(p),m=new r.uniform(r.GL.FLOAT,"steps"),o.addUniform(m),v=new r.uniform(r.GL.BOOL,"stepped"),o.addUniform(v),o.addShader(T),o.addShader(w),o.addUniform(M),u.setTextureUnit(7),M.set(7),(h=a).addAttribute(o),h.addAttribute(i),f=u,h.addAttribute(f),(c=r.actor()).setMaterial(h),c.setMapper(l),x.addSource(C),x.addSource(O),x.addSource(P),x.addPrimitive(R),l.setGeometryData(x)},this._build=function(){c&&s.renderer().contextRenderer().removeActor(c),function(){var t,e,n,r,o,u,c,h,g=s._createContours(),y=g.elements.length,x=[],_=l.geometryData();for(d.set([g.minColor.r,g.minColor.g,g.minColor.b,g.minColor.a]),p.set([g.maxColor.r,g.maxColor.g,g.maxColor.b,g.maxColor.a]),m.set(g.colorMap.length),v.set(g.stepped),t=-1;t<g.colorMap.length+1;t+=1)n=Math.max(0,Math.min(g.colorMap.length-1,t)),x.push(255*g.colorMap[n].r),x.push(255*g.colorMap[n].g),x.push(255*g.colorMap[n].b),x.push(255*g.colorMap[n].a);for(f.setColorTable(x),g.pos=i.transformCoordinates(s.gcs(),s.layer().map().gcs(),g.pos,3),o=a.getGeomBuffer(_,"pos",3*y),u=a.getGeomBuffer(_,"opacity",y),c=a.getGeomBuffer(_,"value",y),t=e=0;t<y;t+=1,e+=3)r=3*(n=g.elements[t]),o[e]=g.pos[r],o[e+1]=g.pos[r+1],o[e+2]=g.pos[r+2],u[t]=g.opacity[n],c[t]=g.value[n];(h=_.primitive(0).indices())instanceof Uint16Array&&h.length===y||(h=new Uint16Array(y),_.primitive(0).setIndices(h)),_.boundsDirty(!0),l.modified(),l.boundsDirtyTimestamp().modified()}(),s.renderer().contextRenderer().addActor(c),s.buildTime().modified()},this._update=function(){x.call(s),(s.dataTime().timestamp()>=s.buildTime().timestamp()||s.updateTime().timestamp()<=s.timestamp())&&s._build(),c.setVisible(s.visible()),c.material().setBinNumber(s.bin()),s.updateTime().modified()},this._exit=function(){s.renderer().contextRenderer().removeActor(c),u()},this._init(e),this};r(a,o),i("vgl","contour",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(146),a=function t(e){return this instanceof t?(e=e||{},o.call(this,e),n(64).call(this),this._init(e),this):new t(e)};r(a,o),i("vgl","isoline",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(72),a=100,s={corner:0,near:1,far:3},u={butt:0,square:1,round:2},c={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7},l=2,h=5,f=8,d={normal:0,debug:1},p=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var r=n(40),i=n(18),p=n(5);n(64).call(this);var m,v,g,y,x,_,b,M,w,T=this,A=this._exit,E=void 0!==e.dynamicDraw&&e.dynamicDraw,S=this._init,C=this._update;return this.featureVertices=function(){return[[0,"corner",-1],[0,"near",1],[1,"far",-1],[1,"corner",1],[1,"near",-1],[0,"far",1]]},this.verticesPerFeature=function(){return T.featureVertices().length},this._init=function(t){var e,n,i=r.shaderProgram(),o=(e=["#ifdef GL_ES","  precision highp float;","#endif","attribute vec3 pos;","attribute vec3 prev;","attribute vec3 next;","attribute vec3 far;","attribute float flags;","attribute vec3 strokeColor;","attribute float strokeOpacity;","attribute float strokeWidth;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float pixelWidth;","uniform float aspect;","uniform float miterLimit;","uniform float antialiasing;","varying vec4 strokeColorVar;","varying vec4 subpos;","varying vec4 info;","varying vec4 angles;","const float PI = 3.14159265358979323846264;","vec4 viewCoord(vec3 c) {","  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);","  if (result.w != 0.0)  result = result / result.w;","  return result;","}","float atan2(float y, float x) {","  if (x > 0.0)  return atan(y / x);","  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;","  if (x < 0.0)  return atan(y / x) - PI;","  return sign(y) * 0.5 * PI;","}","void main(void)","{","  if (strokeOpacity < 0.0) {","    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);","    return;","  }","  vec4 A = viewCoord(prev);","  vec4 B = viewCoord(pos);","  vec4 C = viewCoord(next);","  vec4 D = viewCoord(far);","  vec2 deltaCB = C.xy - B.xy;","  if (deltaCB == vec2(0.0, 0.0)) {","    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);","    return;","  }","  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);","  strokeColorVar = vec4(strokeColor, strokeOpacity);","  int vertex = int(mod(flags, 4.0));","  int nearMode = int(mod(floor(flags / 4.0), 8.0));","  int farMode = int(mod(floor(flags / 32.0), 8.0));","  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;","  if (offset > 1.0)  offset -= 2048.0 / 1023.0;","  float yOffset = strokeWidth + antialiasing;","  if (vertex == 0 || vertex == 2)  yOffset *= -1.0;","  yOffset += strokeWidth * offset;","  float xOffset = 0.0;","  if (nearMode == 0) {","    xOffset = antialiasing;","  } else if (nearMode == 1 || nearMode == 2) {","    xOffset = strokeWidth + antialiasing;","  }","  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;","  if (nearMode >= 4) {","    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);","    if (A.xy == B.xy)  angleBA = angleCB;","    float angleABC = angleCB - angleBA;","    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;","    cosABC = cos(angleABC);  sinABC = sin(angleABC);","    if (nearMode >= 4 && cosABC > 0.999999) {","      nearMode = 3;","    }","    if (nearMode == 4 || nearMode == 7) {","      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {","        if (nearMode == 4) {","          nearMode = 5;","        } else {","          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;","        }","      } else {","        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;","        nearMode = 4;","      }","    }","    if (nearMode == 5 || nearMode == 6) {","      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;","    }","  }","  if (farMode >= 4) {","    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);","    if (D.xy == C.xy)  angleDC = angleCB;","    float angleBCD = angleDC - angleCB;","    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;","    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);","    if (farMode >= 4 && cosBCD > 0.999999) {","      farMode = 3;","    }","    if (farMode == 4 || farMode == 7) {","      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {","        if (farMode == 4)  farMode = 5;","      } else {","        farMode = 4;","      }","    }","  }","  xOffset *= -1.0;","  gl_Position = vec4(","    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,","    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,","    B.z, 1.0);","  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;","  if (vertex == 0 || vertex == 1) {","    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);","    info = vec4(float(nearMode), float(farMode), offset, 0.0);","    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);","  } else {","    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);","    info = vec4(float(farMode), float(nearMode), -offset, 0.0);","    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);","  }","}"].join("\n"),(n=new r.shader(r.GL.VERTEX_SHADER)).setShaderSource(e),n),a=function(t){var e=["#ifdef GL_ES","  #ifdef GL_FRAGMENT_PRECISION_HIGH","    precision highp float;","  #else","    precision mediump float;","  #endif","#endif","varying vec4 strokeColorVar;","varying vec4 subpos;","varying vec4 info;","varying vec4 angles;","uniform float antialiasing;","uniform float miterLimit;","uniform float fixedFlags;","void main () {","  vec4 color = strokeColorVar;",t?"  bool debug = bool(mod(fixedFlags, 2.0));":"","  float opacity = 1.0;","  int nearMode = int(floor(info.x + 0.5));","  int farMode = int(floor(info.y + 0.5));","  float cosABC = angles.x;","  float sinABC = angles.y;","  float cosBCD = angles.z;","  float sinBCD = angles.w;","  if (nearMode >= 4) {","    float dist = cosABC * subpos.x - sinABC * subpos.y;","    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));","    if (opacity == 0.0) {",t?"if (debug) {color.r=255.0/255.0;gl_FragColor=color;return;}":"","      discard;","    }","  }","  if (farMode >= 4) {","    float dist = cosBCD * subpos.z - sinBCD * subpos.y;","    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));","    if (opacity == 0.0) {",t?"if (debug) {color.r=254.0/255.0;gl_FragColor=color;return;}":"","      discard;","    }","  }","  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));","  }","  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));","  }","  if (nearMode == 2 && subpos.x <= 0.0) {","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));","  }","  if (farMode == 2 && subpos.z <= 0.0) {","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));","  }","  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {","    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);","    float w = subpos.w * (1.0 - info.z * sign(sinABC));","    float maxDist;","    if (nearMode == 5)  maxDist = cosABC * w;","    else                maxDist = miterLimit * w;","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));","  }","  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {","    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);","    float w = subpos.w * (1.0 - info.z * sign(sinBCD));","    float maxDist;","    if (farMode == 5)  maxDist = cosBCD * w;","    else               maxDist = miterLimit * w;","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));","  }","  if (nearMode == 6 && subpos.x <= 0.0) {","    float w = subpos.w * (1.0 - info.z * sign(sinABC));","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));","  }","  if (farMode == 6 && subpos.z <= 0.0) {","    float w = subpos.w * (1.0 - info.z * sign(sinBCD));","    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));","  }","  if (antialiasing > 0.0) {","    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {","      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));","    }","    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {","      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));","    }","  }","  if (opacity == 0.0) {",t?"if (debug) {color.r=253.0/255.0;gl_FragColor=color;return;}":"","    discard;","  }","  color.a *= opacity;","  gl_FragColor = color;","}"].join("\n"),n=new r.shader(r.GL.FRAGMENT_SHADER);return n.setShaderSource(e),n}(void 0!==((t||{}).style||{}).debug),s=r.vertexAttribute("pos"),u=r.vertexAttribute("prev"),c=r.vertexAttribute("next"),l=r.vertexAttribute("far"),h=r.vertexAttribute("flags"),f=r.vertexAttribute("strokeWidth"),d=r.vertexAttribute("strokeColor"),p=r.vertexAttribute("strokeOpacity"),w=new r.modelViewUniform("modelViewMatrix"),A=new r.projectionUniform("projectionMatrix"),C=r.geometryData(),O=r.sourceDataP3fv({name:"pos"}),P=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Four,{name:"prev"}),R=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Five,{name:"next"}),k=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Six,{name:"far"}),L=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Seven,{name:"flags"}),D=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),j=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),N=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),I=r.triangles();return y=new r.floatUniform("pixelWidth",1/T.renderer().width()),x=new r.floatUniform("aspect",T.renderer().width()/T.renderer().height()),_=new r.floatUniform("miterLimit",10),b=new r.floatUniform("antialiasing",0),M=new r.floatUniform("fixedFlags",0),S.call(T,t),g=r.material(),v=r.mapper({dynamicDraw:E}),i.addVertexAttribute(s,r.vertexAttributeKeys.Position),i.addVertexAttribute(f,r.vertexAttributeKeysIndexed.One),i.addVertexAttribute(d,r.vertexAttributeKeysIndexed.Two),i.addVertexAttribute(p,r.vertexAttributeKeysIndexed.Three),i.addVertexAttribute(u,r.vertexAttributeKeysIndexed.Four),i.addVertexAttribute(c,r.vertexAttributeKeysIndexed.Five),i.addVertexAttribute(l,r.vertexAttributeKeysIndexed.Six),i.addVertexAttribute(h,r.vertexAttributeKeysIndexed.Seven),i.addUniform(w),i.addUniform(A),i.addUniform(y),i.addUniform(x),i.addUniform(_),i.addUniform(b),i.addUniform(M),i.addShader(a),i.addShader(o),g.addAttribute(i),g.addAttribute(r.blend()),(m=r.actor()).setMaterial(g),m.setMapper(v),C.addSource(O),C.addSource(P),C.addSource(R),C.addSource(k),C.addSource(D),C.addSource(j),C.addSource(N),C.addSource(L),C.addPrimitive(I),v.setGeometryData(C),T},this.actors=function(){return m?[m]:[]},this._build=function(){return function(t){var e,n,r,o,m,g,y,x,A,E,S,C,O,P,R,k,L,D,j,N,I,F,z,U,G,B,V,q,H,W,X,K,Y,Q=T.data(),Z=0,$=[{},{}],J=$[1],tt=T.style.get("strokeWidth"),et=T.style.get("strokeColor"),nt=T.style.get("strokeOpacity"),rt=T.style.get("lineCap"),it=T.style.get("lineJoin"),ot=T.style.get("strokeOffset"),at=T.style.get("miterLimit")(Q),st=T.style.get("antialiasing")(Q)||0,ut=T.featureVertices(),ct=ut.length,lt=d[T.style.get("debug")(Q)?"debug":"normal"]||0,ht=v.geometryData(),ft=T.style.get("closed"),dt=[],pt=!0;if(Y=p.isFunction(T.style("closed"))?void 0:ft()||!1,j=p.isFunction(T.style("lineCap"))?void 0:rt()||"butt",N=p.isFunction(T.style("lineJoin"))?void 0:it()||"miter",L=p.isFunction(T.style("strokeColor"))?void 0:et(),I=p.isFunction(T.style("strokeOffset"))?void 0:ot()||0,D=p.isFunction(T.style("strokeOpacity"))?void 0:nt(),k=p.isFunction(T.style("strokeWidth"))?void 0:tt(),void 0!==at&&_.set(Math.max(1,Math.min(a,at))),M.set(lt),b.set(st),t)Z=w.numSegments,dt=w.closed,A=w.lineItemList,x=Z*ct,pt=j!==w.lineCapVal||void 0===j||N!==w.lineJoinVal||void 0===N||I!==w.strokeOffsetVal||void 0===I;else{var mt=[],vt=T.position();for(A=new Array(Q.length),n=0;n<Q.length;n+=1)if(e=Q[n],E=T.line()(e,n),A[n]=E,!(E.length<2)){for(Z+=E.length-1,r=0;r<E.length;r+=1)C=vt(E[r],r,e,n),mt.push(C.x),mt.push(C.y),mt.push(C.z||0),r||(P=C);E.length>2&&(void 0===Y?ft(e,n):Y)&&(C.x!==P.x||C.y!==P.y||C.z!==P.z?(Z+=1,dt[n]=2):dt[n]=1)}mt=i.transformCoordinates(T.gcs(),T.layer().map().gcs(),mt,3),x=Z*ct,F=p.getGeomBuffer(ht,"pos",3*x),z=p.getGeomBuffer(ht,"prev",3*x),U=p.getGeomBuffer(ht,"next",3*x),G=p.getGeomBuffer(ht,"far",3*x),(V=ht.primitive(0).indices())instanceof Uint16Array&&V.length===x||(V=new Uint16Array(x),ht.primitive(0).setIndices(V)),w={numSegments:Z,closed:dt,lineItemList:A,lineCapVal:j,lineJoinVal:N,strokeOffsetVal:I}}for(B=p.getGeomBuffer(ht,"flags",x),q=p.getGeomBuffer(ht,"strokeWidth",x),H=p.getGeomBuffer(ht,"strokeColor",3*x),W=p.getGeomBuffer(ht,"strokeOpacity",x),n=O=X=K=0;n<Q.length;n+=1)if(!((E=A[n]).length<2))for(e=Q[n],R=O,r=0;r<E.length+(2===dt[n]?1:0);r+=1,O+=3)if(y=r,r===E.length&&(y=0,O-=3),S=E[y],r&&(J=$[0],$[0]=$[1],$[1]=J),t||(J.pos=r===y?O:R,J.prev=y?O-3:dt[n]?R+3*(E.length-3+dt[n]):O,J.next=r+1<E.length?O+3:dt[n]?r!==y?R+3:R+6-3*dt[n]:O),J.strokeWidth=void 0===k?tt(S,y,e,n):k,J.strokeColor=void 0===L?et(S,y,e,n):L,J.strokeOpacity=void 0===D?nt(S,y,e,n):D,pt&&(J.strokeOffset=(void 0===I?ot(S,y,e,n):I)||0,J.strokeOffset?(J.posStrokeOffset=2047&Math.round(2048+1023*Math.min(1,Math.max(-1,J.strokeOffset))),J.negStrokeOffset=2047&Math.round(2048-1023*Math.min(1,Math.max(-1,J.strokeOffset)))):J.posStrokeOffset=J.negStrokeOffset=0,dt[n]||r&&r!==E.length-1?J.flags=c[void 0===N?it(S,y,e,n):N]||c.miter:J.flags=u[void 0===j?rt(S,y,e,n):j]||u.butt),r)for(o=0;o<ct;o+=1,X+=1,K+=3)m=$[ut[o][0]],g=$[1-ut[o][0]],t||(F[K]=mt[m.pos],F[K+1]=mt[m.pos+1],F[K+2]=0),ut[o][0]?(t||(z[K]=mt[m.next],z[K+1]=mt[m.next+1],z[K+2]=0,U[K]=mt[m.prev],U[K+1]=mt[m.prev+1],U[K+2]=0,G[K]=mt[g.prev],G[K+1]=mt[g.prev+1],G[K+2]=0),pt&&(B[X]=s[ut[o][1]]|m.flags<<l|g.flags<<h|m.posStrokeOffset<<f)):(t||(z[K]=mt[m.prev],z[K+1]=mt[m.prev+1],z[K+2]=0,U[K]=mt[m.next],U[K+1]=mt[m.next+1],U[K+2]=0,G[K]=mt[g.next],G[K+1]=mt[g.next+1],G[K+2]=0),pt&&(B[X]=s[ut[o][1]]|m.flags<<l|g.flags<<h|m.negStrokeOffset<<f)),q[X]=m.strokeWidth,H[K]=m.strokeColor.r,H[K+1]=m.strokeColor.g,H[K+2]=m.strokeColor.b,W[X]=m.strokeOpacity;v.modified(),t||(ht.boundsDirty(!0),v.boundsDirtyTimestamp().modified())}(T.dataTime().timestamp()<T.buildTime().timestamp()&&w),T.renderer().contextRenderer().hasActor(m)||T.renderer().contextRenderer().addActor(m),T.buildTime().modified(),T},this._update=function(){return C.call(T),(T.dataTime().timestamp()>=T.buildTime().timestamp()||T.updateTime().timestamp()<=T.timestamp())&&T._build(),y.set(1/T.renderer().width()),x.set(T.renderer().width()/T.renderer().height()),m.setVisible(T.visible()),m.material().setBinNumber(T.bin()),T.updateTime().modified(),T},this._exit=function(){T.renderer().contextRenderer().removeActor(m),m=null,A()},this._init(e),this};r(p,o);var m={};m[o.capabilities.basic]=!0,m[o.capabilities.multicolor]=!0,i("vgl","line",p,m),t.exports=p},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(2).registerFeature,a=n(98),s=function t(e){if(!(this instanceof t))return new t(e);e=e||{},a.call(this,e);var i=n(40),o=n(18),s=n(5);n(64).call(this);var u=this,c=this._exit,l=null,h=null,f=null,d=null,p=void 0!==e.dynamicDraw&&e.dynamicDraw,m="sprite",v=this._init,g=this._update,y=this.updateStyleFromArray,x=null,_=null;function b(t,e,n,r){var i;switch(m){case"triangle":i=[t,e-2*r,t-n*Math.sqrt(3),e+r,t+n*Math.sqrt(3),e+r];break;case"sprite":i=[t,e];break;default:i=[t-n,e+r,t-n,e-r,t+n,e+r,t-n,e-r,t+n,e-r,t+n,e+r]}return i}return"triangle"!==e.primitiveShape&&"square"!==e.primitiveShape&&"sprite"!==e.primitiveShape||(m=e.primitiveShape),x=["#ifdef GL_ES","  precision highp float;","#endif","attribute vec3 pos;","attribute float radius;","attribute vec3 fillColor;","attribute vec3 strokeColor;","attribute float fillOpacity;","attribute float strokeWidth;","attribute float strokeOpacity;","attribute float fill;","attribute float stroke;","uniform float pixelWidth;","uniform float aspect;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying vec4 fillColorVar;","varying vec4 strokeColorVar;","varying float radiusVar;","varying float strokeWidthVar;","varying float fillVar;","varying float strokeVar;"],"sprite"!==m&&(x=x.concat(["attribute vec2 unit;","varying vec3 unitVar;"])),x.push.apply(x,["void main(void)","{","  strokeWidthVar = strokeWidth;","  // No stroke or fill implies nothing to draw","  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {","    strokeVar = 0.0;","    strokeWidthVar = 0.0;","  }","  else","    strokeVar = 1.0;","  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)","    fillVar = 0.0;","  else","    fillVar = 1.0;","  if (fillVar == 0.0 && strokeVar == 0.0) {","    gl_Position = vec4(2, 2, 0, 1);","    return;","  }","  fillColorVar = vec4 (fillColor, fillOpacity);","  strokeColorVar = vec4 (strokeColor, strokeOpacity);","  radiusVar = radius;"]),"sprite"===m?x.push.apply(x,["  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;","  gl_PointSize = 2.0 * (radius + strokeWidthVar); ","}"]):x.push.apply(x,["  unitVar = vec3 (unit, 1.0);","  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;","  if (p.w != 0.0) {","    p = p / p.w;","  }","  p += (radius + strokeWidthVar) * ","       vec4 (unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);","  gl_Position = vec4(p.xyz, 1.0);","}"]),x=x.join("\n"),_=["#ifdef GL_ES","  precision highp float;","#endif","uniform float aspect;","varying vec4 fillColorVar;","varying vec4 strokeColorVar;","varying float radiusVar;","varying float strokeWidthVar;","varying float fillVar;","varying float strokeVar;"],"sprite"!==m&&_.push("varying vec3 unitVar;"),_.push.apply(_,["void main () {","  vec4 strokeColor, fillColor;","  float endStep;","  // No stroke or fill implies nothing to draw","  if (fillVar == 0.0 && strokeVar == 0.0)","    discard;"]),"sprite"===m?_.push("  float rad = 2.0 * length (gl_PointCoord - vec2(0.5));"):_.push("  float rad = length (unitVar.xy);"),_.push.apply(_,["  if (rad > 1.0)","    discard;","  // If there is no stroke, the fill region should transition to nothing","  if (strokeVar == 0.0) {","    strokeColor = vec4 (fillColorVar.rgb, 0.0);","    endStep = 1.0;","  } else {","    strokeColor = strokeColorVar;","    endStep = radiusVar / (radiusVar + strokeWidthVar);","  }","  // Likewise, if there is no fill, the stroke should transition to nothing","  if (fillVar == 0.0)","    fillColor = vec4 (strokeColor.rgb, 0.0);","  else","    fillColor = fillColorVar;","  // Distance to antialias over","  float antialiasDist = 3.0 / (2.0 * radiusVar);","  if (rad < endStep) {","    float step = smoothstep (endStep - antialiasDist, endStep, rad);","    gl_FragColor = mix (fillColor, strokeColor, step);","  } else {","    float step = smoothstep (1.0 - antialiasDist, 1.0, rad);","    gl_FragColor = mix (strokeColor, vec4 (strokeColor.rgb, 0.0), step);","  }","}"]),_=_.join("\n"),this.actors=function(){return l?[l]:[]},this.verticesPerFeature=function(){return b(0,0,1,1).length/2},this.updateStyleFromArray=function(t,e,n){var i,o,a={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};if("string"==typeof t){var s={};s[t]=e,t=s}return r.each(t,function(t,e){var n,r,s,c,h,f,d,p,m;if(u.visible()&&l&&a[t]&&!i&&!u.clustering())if(m="bool"===a[t]?1:a[t],c=u.data().length,s=(r=l.mapper()).getSourceBuffer(t),n=u.verticesPerFeature(),s&&c&&c*n*m===s.length){switch(a[t]){case 1:for(f=0,p=0;f<c;f+=1)for(h=e[f],d=0;d<n;d+=1,p+=1)s[p]=h;break;case 3:for(f=0,p=0;f<c;f+=1)for(h=e[f],d=0;d<n;d+=1,p+=3)s[p]=h.r,s[p+1]=h.g,s[p+2]=h.b;break;case"bool":for(f=0,p=0;f<c;f+=1)for(h=e[f]?1:0,d=0;d<n;d+=1,p+=1)s[p]=h}r.updateSourceBuffer(t),o=!0}else i=!0;else i=!0;y(t,e,!1)}),u.visible()&&i?u.draw():o&&u.renderer()._render(),u},this._init=function(){var t,n=i.shaderProgram(),r=((t=new i.shader(i.GL.VERTEX_SHADER)).setShaderSource(x),t),o=function(){var t=new i.shader(i.GL.FRAGMENT_SHADER);return t.setShaderSource(_),t}(),a=i.vertexAttribute("pos"),s=i.vertexAttribute("unit"),c=i.vertexAttribute("radius"),g=i.vertexAttribute("strokeWidth"),y=i.vertexAttribute("fillColor"),b=i.vertexAttribute("fill"),M=i.vertexAttribute("strokeColor"),w=i.vertexAttribute("stroke"),T=i.vertexAttribute("fillOpacity"),A=i.vertexAttribute("strokeOpacity"),E=new i.modelViewUniform("modelViewMatrix"),S=new i.projectionUniform("projectionMatrix"),C=i.material(),O=i.blend(),P=i.geometryData(),R=i.sourceDataP3fv({name:"pos"}),k=i.sourceDataAnyfv(2,i.vertexAttributeKeysIndexed.One,{name:"unit"}),L=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Two,{name:"radius"}),D=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),j=i.sourceDataAnyfv(3,i.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),N=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Five,{name:"fill"}),I=i.sourceDataAnyfv(3,i.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),F=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),z=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),U=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"}),G=new i.triangles;"sprite"===m&&(G=new i.points),f=new i.floatUniform("pixelWidth",2/u.renderer().width()),d=new i.floatUniform("aspect",u.renderer().width()/u.renderer().height()),v.call(u,e),h=i.mapper({dynamicDraw:p}),n.addVertexAttribute(a,i.vertexAttributeKeys.Position),"sprite"!==m&&n.addVertexAttribute(s,i.vertexAttributeKeysIndexed.One),n.addVertexAttribute(c,i.vertexAttributeKeysIndexed.Two),n.addVertexAttribute(g,i.vertexAttributeKeysIndexed.Three),n.addVertexAttribute(y,i.vertexAttributeKeysIndexed.Four),n.addVertexAttribute(b,i.vertexAttributeKeysIndexed.Five),n.addVertexAttribute(M,i.vertexAttributeKeysIndexed.Six),n.addVertexAttribute(w,i.vertexAttributeKeysIndexed.Seven),n.addVertexAttribute(T,i.vertexAttributeKeysIndexed.Eight),n.addVertexAttribute(A,i.vertexAttributeKeysIndexed.Nine),n.addUniform(f),n.addUniform(d),n.addUniform(E),n.addUniform(S),n.addShader(o),n.addShader(r),C.addAttribute(n),C.addAttribute(O),(l=i.actor()).setMaterial(C),l.setMapper(h),P.addSource(R),P.addSource(k),P.addSource(L),P.addSource(D),P.addSource(j),P.addSource(N),P.addSource(I),P.addSource(F),P.addSource(z),P.addSource(U),P.addPrimitive(G),h.setGeometryData(P)},this._build=function(){return l&&u.renderer().contextRenderer().removeActor(l),function(){var t,e,n,r,i,a,c,l,f,d,p,v,g,y,x,_,M,w,T,A,E,S,C,O,P,R,k,L,D,j,N,I,F,z,U,G,B,V=u.data().length,q=b(0,0,1,1),H=new Array(3*V),W=u.verticesPerFeature(),X=u.data(),K=h.geometryData();for(i=u.position(),d=u.style.get("radius"),g=u.style.get("stroke"),_=u.style.get("strokeWidth"),T=u.style.get("strokeOpacity"),S=u.style.get("strokeColor"),P=u.style.get("fill"),L=u.style.get("fillOpacity"),N=u.style.get("fillColor"),t=G=0;t<V;t+=1,G+=3)r=i(X[t],t),H[G]=r.x,H[G+1]=r.y,H[G+2]=r.z||0,B=B||H[G+2];if(H=o.transformCoordinates(u.gcs(),u.layer().map().gcs(),H,3),!B&&u.gcs()!==u.layer().map().gcs())for(t=G=0;t<V;t+=1,G+=3)H[G+2]=0;for(n=s.getGeomBuffer(K,"pos",W*V*3),"sprite"!==m&&(a=s.getGeomBuffer(K,"unit",W*V*2)),l=s.getGeomBuffer(K,"radius",W*V),p=s.getGeomBuffer(K,"stroke",W*V),y=s.getGeomBuffer(K,"strokeWidth",W*V),M=s.getGeomBuffer(K,"strokeOpacity",W*V),A=s.getGeomBuffer(K,"strokeColor",W*V*3),C=s.getGeomBuffer(K,"fill",W*V),R=s.getGeomBuffer(K,"fillOpacity",W*V),D=s.getGeomBuffer(K,"fillColor",W*V*3),(c=K.primitive(0).indices())instanceof Uint16Array&&c.length===W*V||(c=new Uint16Array(W*V),K.primitive(0).setIndices(c)),t=F=z=U=G=0;t<V;t+=1,G+=3){if(I=X[t],"sprite"!==m)for(e=0;e<q.length;e+=1,U+=1)a[U]=q[e];for(f=d(I,t),v=g(I,t)?1:0,x=_(I,t),w=T(I,t),E=S(I,t),O=P(I,t)?1:0,k=L(I,t),j=N(I,t),e=0;e<W;e+=1,F+=1,z+=3)n[z]=H[G],n[z+1]=H[G+1],n[z+2]=H[G+2],l[F]=f,p[F]=v,y[F]=x,M[F]=w,A[z]=E.r,A[z+1]=E.g,A[z+2]=E.b,C[F]=O,R[F]=k,D[z]=j.r,D[z+1]=j.g,D[z+2]=j.b}K.boundsDirty(!0),h.modified(),h.boundsDirtyTimestamp().modified()}(),u.renderer().contextRenderer().addActor(l),u.renderer().contextRenderer().render(),u.buildTime().modified(),u},this._update=function(){return g.call(u),(u.dataTime().timestamp()>=u.buildTime().timestamp()||u.updateTime().timestamp()<u.timestamp())&&u._build(),f.set(2/u.renderer().width()),d.set(u.renderer().width()/u.renderer().height()),l.setVisible(u.visible()),l.material().setBinNumber(u.bin()),u.updateTime().modified(),u},this._exit=function(){u.renderer().contextRenderer().removeActor(l),l=null,c()},u._init(),this};i(s,a),o("vgl","point",s),t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(141),a=function t(e){if(!(this instanceof t))return new t(e);e=e||{},o.call(this,e);var r=n(40),i=n(635),a=n(18),s=n(5);n(64).call(this);var u,c,l,h=this,f=this._exit,d=r.actor(),p=r.mapper(),m=r.material(),v=this._init,g=this._update;return this._init=function(t){var e,n,i=r.shaderProgram(),o=r.vertexAttribute("pos"),a=r.vertexAttribute("fillColor"),s=r.vertexAttribute("fillOpacity"),u=new r.modelViewUniform("modelViewMatrix"),c=new r.projectionUniform("projectionMatrix"),l=(e=["attribute vec3 pos;","attribute vec3 fillColor;","attribute float fillOpacity;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying vec4 fillColorVar;","void main(void)","{","  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1);","  if (clipPos.w != 0.0) {","    clipPos = clipPos/clipPos.w;","  }","  fillColorVar = vec4(fillColor, fillOpacity);","  gl_Position = clipPos;","}"].join("\n"),(n=new r.shader(r.GL.VERTEX_SHADER)).setShaderSource(e),n),f=function(){var t=["#ifdef GL_ES","  precision highp float;","#endif","varying vec4 fillColorVar;","void main () {","  gl_FragColor = fillColorVar;","}"].join("\n"),e=new r.shader(r.GL.FRAGMENT_SHADER);return e.setShaderSource(t),e}(),g=r.blend(),y=r.geometryData(),x=r.sourceDataP3fv({name:"pos"}),_=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),b=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),M=r.triangles();i.addVertexAttribute(o,r.vertexAttributeKeys.Position),i.addVertexAttribute(a,r.vertexAttributeKeysIndexed.Two),i.addVertexAttribute(s,r.vertexAttributeKeysIndexed.Three),i.addUniform(u),i.addUniform(c),i.addShader(f),i.addShader(l),m.addAttribute(i),m.addAttribute(g),d.setMaterial(m),d.setMapper(p),y.addSource(x),y.addSource(_),y.addSource(b),y.addPrimitive(M),p.setGeometryData(y),v.call(h,t)},this._build=function(){!function(t){var e,n,r,o,c,l,f,d,m,v,g,y,x,_,b,M,w,T,A,E,S,C,O,P,R,k,L,D,j=[],N=h.gcs(),I=h.layer().map().gcs(),F=0,z=p.geometryData();for(c=h.style.get("fillColor"),l=s.isFunction(h.style("fillColor"))?void 0:c(),d=h.style.get("fillOpacity"),m=s.isFunction(h.style("fillOpacity"))?void 0:d(),v=h.style.get("fill"),g=s.isFunction(h.style("fill"))?void 0:v(),y=h.style.get("uniformPolygon"),t?(j=u.items,F=u.numPts):(n=h.style.get("position"),r=h.style.get("polygon"),h.data().forEach(function(t,e){var o,s,u,c;if((o=r(t,e))&&!((s=o.outer||(Array.isArray(o)?o:[])).length<3)){for(u=new Array(3*s.length),S=A=0;S<s.length;S+=1,A+=3)c=n(s[S],S,t,e),u[A]=c.x,u[A+1]=c.y,u[A+2]=c.z||0;u={vertices:u,dimensions:3,holes:[]},D=s,o.inner&&o.inner.forEach(function(r){if(!(r.length<3))for(D=D.concat(r),u.holes.push(A/3),S=0;S<r.length;S+=1,A+=3)c=n(r[S],S,t,e),u.vertices[A]=c.x,u.vertices[A+1]=c.y,u.vertices[A+2]=c.z||0}),u.vertices=a.transformCoordinates(N,I,u.vertices,u.dimensions),(R={triangles:i(u.vertices,u.holes,u.dimensions),vertices:u.vertices,original:D,item:t,itemIndex:e}).triangles.length&&(j.push(R),F+=R.triangles.length)}}),e=s.getGeomBuffer(z,"pos",3*F),(_=z.primitive(0).indices())instanceof Uint16Array&&_.length===F||(_=new Uint16Array(F),z.primitive(0).setIndices(_)),u={items:j,numPts:F}),o=s.getGeomBuffer(z,"fillColor",3*F),f=s.getGeomBuffer(z,"fillOpacity",F),T=A=0,b=l,w=g,O=0;O<j.length;O+=1)if(P=j[O].triangles.length,E=j[O].vertices,k=j[O].item,L=j[O].itemIndex,D=j[O].original,M=m,(x=y(k,L))&&(void 0===l&&(b=c(E[0],0,k,L)),void 0===m&&(M=d(E[0],0,k,L))),void 0===g&&(w=v(k,L)),w||(M=0),x&&t&&j[O].uniform&&j[O].color&&b.r===j[O].color.r&&b.g===j[O].color.g&&b.b===j[O].color.b&&M===j[O].opacity)T+=P,A+=3*P;else{for(S=0;S<P;S+=1,T+=1,A+=3)t&&x?(o[A]=b.r,o[A+1]=b.g,o[A+2]=b.b,f[T]=M):(C=3*j[O].triangles[S],t||(e[A]=E[C],e[A+1]=E[C+1],e[A+2]=E[C+2],_[T]=S),x||void 0!==l||(b=c(D[C],C,k,L)),o[A]=b.r,o[A+1]=b.g,o[A+2]=b.b,x||void 0!==m||(M=d(D[C],C,k,L)),f[T]=M);(x||j[O].uniform)&&(j[O].uniform=x,j[O].color=b,j[O].opacity=M)}p.modified(),t||(z.boundsDirty(!0),p.boundsDirtyTimestamp().modified())}(h.dataTime().timestamp()<h.buildTime().timestamp()&&u),h.renderer().contextRenderer().hasActor(d)||(h.renderer().contextRenderer().addActor(d),c=!0),h.buildTime().modified()},this._update=function(t){h.ready&&(t&&t.mayDelay&&c?l=h.layer().map().scheduleAnimationFrame(h._update):(l&&(h.layer().map().scheduleAnimationFrame(h._update,"remove"),l=null),g.call(h),(h.dataTime().timestamp()>=h.buildTime().timestamp()||h.updateTime().timestamp()<=h.timestamp())&&h._build(),d.setVisible(h.visible()),d.material().setBinNumber(h.bin()),h.updateTime().modified()))},this._exit=function(){l&&h.layer()&&(h.layer().map().scheduleAnimationFrame(h._update,"remove"),l=null),h.renderer().contextRenderer().removeActor(d),f()},this._init(e),this};r(a,o),i("vgl","polygon",a),t.exports=a},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,c,l,d,m,v=e&&e.length,g=v?e[0]*n:t.length,y=i(t,0,g,n,!0),x=[];if(!y)return x;if(v&&(y=function(t,e,n,r){var a,s,u,c,l,d=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,c=a<s-1?e[a+1]*r:t.length,(l=i(t,u,c,r,!1))===l.next&&(l.steiner=!0),d.push(p(l));for(d.sort(h),a=0;a<d.length;a++)f(d[a],n),n=o(n,n.next);return n}(t,e,y,n)),t.length>80*n){r=u=t[0],s=c=t[1];for(var _=n;_<g;_+=n)l=t[_],d=t[_+1],l<r&&(r=l),d<s&&(s=d),l>u&&(u=l),d>c&&(c=d);m=0!==(m=Math.max(u-r,c-s))?1/m:0}return a(y,x,n,r,s,m),x}function i(t,e,n,r,i){var o,a;if(i===A(t,e,n,r)>0)for(o=e;o<n;o+=r)a=M(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=M(o,t[o],t[o+1],a);return a&&y(a,a.next)&&(w(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(w(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,h);for(var p,m,v=t;t.prev!==t.next;)if(p=t.prev,m=t.next,h?u(t,r,i,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(m.i/n),w(t),t=m.next,v=m.next;else if((t=m)===v){f?1===f?a(t=c(t,e,n),e,n,r,i,h,2):2===f&&l(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(g(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=d(s,u,e,n,r),f=d(c,l,e,n,r),p=t.prevZ,v=t.nextZ;p&&p.z>=h&&v&&v.z<=f;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=f;){if(v!==t.prev&&v!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!y(i,o)&&x(i,r,r.next,o)&&_(i,o)&&_(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),w(r),w(r.next),r=t=o),r=r.next}while(r!==t);return r}function l(t,e,n,r,i,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&v(u,c)){var l=b(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s),void a(l,e,n,r,i,s)}c=c.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&m(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&_(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=b(e,t);o(n,n.next)}}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&_(t,e)&&_(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,r){return!!(y(t,e)&&y(n,r)||y(t,r)&&y(n,e))||g(t,e,n)>0!=g(t,e,r)>0&&g(n,r,t)>0!=g(n,r,e)>0}function _(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function b(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function M(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(A(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(A(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(63),a=n(23),s=function t(e){if(!(this instanceof t))return new t(e);o.call(this,e);var r=n(3),i=n(40);n(64).call(this);var s,u,c,l,h,f,d,p=this,m=this._exit,v=this._init,g=this._update,y={},x=a(),_=a(),b=["varying highp vec2 iTextureCoord;","uniform sampler2D sampler2d;","uniform mediump float opacity;","uniform highp vec2 crop;","void main(void) {","  mediump vec4 color = texture2D(sampler2d, iTextureCoord);","  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {","    discard;","  }","  color.w *= opacity;","  gl_FragColor = color;","}"].join("\n"),M=["attribute vec3 vertexPosition;","attribute vec2 textureCoord;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying highp vec2 iTextureCoord;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","  iTextureCoord = textureCoord;","}"].join("\n"),w=["attribute vec3 vertexPosition;","uniform vec3 vertexColor;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying mediump vec3 iVertexColor;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","  iVertexColor = vertexColor;","}"].join("\n");function T(t){var e=new i.mapper({dynamicDraw:!0});return e.s_modified=e.modified,e.g_timestamp=a(),e.timestamp=e.g_timestamp.timestamp,e.modified=function(){return e.s_modified(),e.g_timestamp.modified(),e},e.s_render=e.render,e.render=t,e}return this._build=function(){var t,e,n,r,o,a,m;p.position()&&((d=this._generateQuads()).imgQuads.length&&!u&&(p.visible(!1),t=T(p._renderImageQuads),(u=new i.actor).setMapper(t),e=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),n.addVertexAttribute(new i.vertexAttribute("textureCoord"),i.vertexAttributeKeys.TextureCoordinate),s=new i.modelViewOriginUniform("modelViewMatrix",d.origin),n.addUniform(s),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),(o=new i.uniform(i.GL.FLOAT_VEC2,"crop")).set([1,1]),n.addUniform(o),m=p.renderer()._glContext(),n.addShader(i.getCachedShader(i.GL.VERTEX_SHADER,m,M)),n.addShader(i.getCachedShader(i.GL.FRAGMENT_SHADER,m,b)),e.addAttribute(n),e.addAttribute(new i.blend),a=new i.geometryData,l=void 0,(r=new i.sourceDataT2fv).pushBack([0,0,1,0,0,1,1,1]),a.addSource(r),t.setGeometryData(a),u.setMaterial(e),p.renderer().contextRenderer().addActor(u),p.visible(!0)),d.clrQuads.length&&!c&&(p.visible(!1),t=T(p._renderColorQuads),(c=new i.actor).setMapper(t),e=new i.material,(n=new i.shaderProgram).addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position),f=new i.modelViewOriginUniform("modelViewMatrix",d.origin),n.addUniform(f),n.addUniform(new i.projectionUniform("projectionMatrix")),n.addUniform(new i.floatUniform("opacity",1)),n.addUniform(new i.uniform(i.GL.FLOAT_VEC3,"vertexColor")),m=p.renderer()._glContext(),n.addShader(i.getCachedShader(i.GL.VERTEX_SHADER,m,w)),n.addShader(i.utils.createFragmentShader(m)),e.addAttribute(n),e.addAttribute(new i.blend),a=new i.geometryData,h=void 0,t.setGeometryData(a),c.setMaterial(e),p.renderer().contextRenderer().addActor(c),p.visible(!0)),s&&s.setOrigin(d.origin),f&&f.setOrigin(d.origin),p._updateTextures(),p.buildTime().modified())},this._updateTextures=function(){var t;r.each(d.imgQuads,function(e,n){n.image&&(n.image._texture?n.texture=n.image._texture:((t=new i.texture).setImage(n.image),n.texture=n.image._texture=t))})},this._renderColorQuads=function(t){if(d.clrQuads.length){(this.timestamp()>_.timestamp()||p.dataTime().timestamp()>_.timestamp()||t.m_contextChanged||!h||12*d.clrQuads.length>h.length)&&function(t){var e=t.m_context,n=!1;d.clrQuads.length&&((!h||h.length<12*d.clrQuads.length||!y.clrQuadsPosition)&&(y.clrQuadsPosition&&e.deleteBuffer(y.clrQuadsPosition),y.clrQuadsPosition=e.createBuffer(),h=new Float32Array(12*Math.max(128,2*d.clrQuads.length)),n=!0),r.each(d.clrQuads,function(t,e){for(var n=0;n<12;n+=1)h[12*t+n]=e.pos[n]-d.origin[n%3]}),e.bindBuffer(i.GL.ARRAY_BUFFER,y.clrQuadsPosition),n?e.bufferData(i.GL.ARRAY_BUFFER,h,i.GL.DYNAMIC_DRAW):e.bufferSubData(i.GL.ARRAY_BUFFER,0,h)),_.modified()}(t),this.s_render(t,!0);var e,n=t.m_context,o=1;n.bindBuffer(i.GL.ARRAY_BUFFER,y.clrQuadsPosition),r.each(d.clrQuads,function(r,a){a.opacity!==o&&(o=a.opacity,n.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([o]))),e&&e.r===a.color.r&&e.g===a.color.g&&e.b===a.color.b||(e=a.color,n.uniform3fv(t.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([e.r,e.g,e.b]))),n.bindBuffer(i.GL.ARRAY_BUFFER,y.clrQuadsPosition),n.vertexAttribPointer(i.vertexAttributeKeys.Position,3,i.GL.FLOAT,!1,12,12*r*4),n.enableVertexAttribArray(i.vertexAttributeKeys.Position),n.drawArrays(i.GL.TRIANGLE_STRIP,0,4)}),n.bindBuffer(i.GL.ARRAY_BUFFER,null),this.undoBindVertexData(t)}},this._renderImageQuads=function(t){if(d.imgQuads.length){(this.timestamp()>x.timestamp()||p.dataTime().timestamp()>x.timestamp()||t.m_contextChanged||!l||12*d.imgQuads.length>l.length)&&function(t){var e=t.m_context,n=!1;d.imgQuads.length&&((!l||l.length<12*d.imgQuads.length||!y.imgQuadsPosition)&&(y.imgQuadsPosition&&e.deleteBuffer(y.imgQuadsPosition),y.imgQuadsPosition=e.createBuffer(),l=new Float32Array(12*Math.max(128,2*d.imgQuads.length)),n=!0),r.each(d.imgQuads,function(t,e){for(var n=0;n<12;n+=1)l[12*t+n]=e.pos[n]-d.origin[n%3]}),e.bindBuffer(i.GL.ARRAY_BUFFER,y.imgQuadsPosition),n?e.bufferData(i.GL.ARRAY_BUFFER,l,i.GL.DYNAMIC_DRAW):e.bufferSubData(i.GL.ARRAY_BUFFER,0,l)),x.modified()}(t),this.s_render(t,!0);var e,n=t.m_context,o=1,a={x:1,y:1};n.bindBuffer(i.GL.ARRAY_BUFFER,y.imgQuadsPosition),r.each(d.imgQuads,function(r,s){s.image&&(s.texture.bind(t),s.opacity!==o&&(o=s.opacity,n.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([o]))),e=s.crop||{x:1,y:1},a&&e.x===a.x&&e.y===a.y||(a=e,n.uniform2fv(t.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([a.x,a.y]))),n.bindBuffer(i.GL.ARRAY_BUFFER,y.imgQuadsPosition),n.vertexAttribPointer(i.vertexAttributeKeys.Position,3,i.GL.FLOAT,!1,12,12*r*4),n.enableVertexAttribArray(i.vertexAttributeKeys.Position),n.drawArrays(i.GL.TRIANGLE_STRIP,0,4),s.texture.undoBind(t))}),n.bindBuffer(i.GL.ARRAY_BUFFER,null),this.undoBindVertexData(t)}},this._update=function(){g.call(p),(p.buildTime().timestamp()<=p.dataTime().timestamp()||p.updateTime().timestamp()<p.timestamp())&&p._build(),c&&(c.setVisible(p.visible(void 0,!0)),c.material().setBinNumber(p.bin())),u&&(u.setVisible(p.visible(void 0,!0)),u.material().setBinNumber(p.bin())),p.updateTime().modified()},this._init=function(){v.call(p,e)},this._exit=function(){u&&(p.renderer().contextRenderer().removeActor(u),u=null),c&&(p.renderer().contextRenderer().removeActor(c),c=null),m.call(p)},p._init(e),this};r(s,o);var u={};u[o.capabilities.color]=!0,u[o.capabilities.image]=!0,u[o.capabilities.imageCrop]=!0,u[o.capabilities.imageFixedScale]=!1,u[o.capabilities.imageFull]=!0,u[o.capabilities.canvas]=!1,u[o.capabilities.video]=!1,i("vgl","quad",s,u),t.exports=s},function(t,e,n){"use strict";var r=function(){var t,e=this,n=this._init,r=this._exit,i=0,o=[];this._drawTile=function(n){if(t){var r=this._tileBounds(n),a=n.index.level||0,s=this._tileOffset(a),u=this.tileCropFromBounds(n),c={};u&&(c.crop={x:u.x/e._options.tileWidth,y:u.y/e._options.tileHeight}),c.ul=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.top-s.y},a),0),c.ll=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.bottom-s.y},a),0),c.ur=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.top-s.y},a),0),c.lr=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.bottom-s.y},a),0);var l=e.map().camera().clipbounds,h=a*e._levelZIncrement;h=l.far+(l.near-l.far)*h,c.ul.z=c.ll.z=c.ur.z=c.lr.z=h,i+=1,c.id=i,n.quadId=c.id,c.image=n.image,o.push(c),t.data(o),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<o.length;r+=1)if(o[r].id===n.quadId){o.splice(r,1);break}t.data(o),t._update(),e.draw()}},this._exit=function(){e.deleteFeature(t),t=null,o=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=this.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(o),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(2).registerLayerAdjustment)("vgl","tile",r),t.exports=r},function(t,e,n){"use strict";t.exports={canvasRenderer:n(639),heatmapFeature:n(640),isolineFeature:n(641),lineFeature:n(642),pixelmapFeature:n(643),quadFeature:n(644),textFeature:n(645),tileLayer:n(646)}},function(t,e,n){"use strict";var r,i=n(1),o=n(2).registerRenderer,a=n(71),s=function t(e){var r=n(3);if(!(this instanceof t))return new t(e);e=e||{},a.call(this,e);var i=this,o=!0,s=this._init,u=this._exit;return this.clearCanvas=function(t){o=t},this.api=function(){return"canvas"},this._init=function(){if(i.initialized())return i;s.call(i);var t=r(document.createElement("canvas"));i.context2d=t[0].getContext("2d"),t.addClass("canvas-canvas"),r(i.layer().node().get(0)).append(t),i.canvas(t);var e=i.layer().map().size();return i._resize(0,0,e.width,e.height),i},this._resize=function(t,e,n,r){var o=i.canvas();return parseInt(o.attr("width"),10)===n&&parseInt(o.attr("height"),10)===r||(o.attr("width",n),o.attr("height",r),i._render()),i},this._render=function(){return i.layer().map().scheduleAnimationFrame(this._renderFrame),i},this._renderFrame=function(){var t,e=i.layer(),n=e.map(),r=n.size(),a=e.features();for(t=0;t<a.length;t+=1)if(a[t]._delayRender())return void i._render();for(o&&(i.context2d.setTransform(1,0,0,1,0,0),i.context2d.clearRect(0,0,r.width,r.height)),t=0;t<a.length;t+=1)a[t].visible()&&a[t]._renderOnCanvas(i.context2d,n)},this._exit=function(){i.canvas().remove(),u()},this};i(s,a),o("canvas",s),s.supported=function(){if(void 0===r){var t;try{t=document.createElement("canvas"),r=!(!t.getContext||!t.getContext("2d"))}catch(t){r=!1}t=void 0}return r},s.fallback=function(){return null},t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(249),a=n(23),s=n(5),u=function t(e){if(!(this instanceof t))return new t(e);o.call(this,e),n(65).call(this);var r,i,u,c,l,h=n(15),f=this,d=this._init,p=this._update,m=a();return this._computeGradient=function(){var t,e,n,r,i;if(i=f.style("color"),!f._grad||f._gradColors!==i){for(e in r=(n=(t=document.createElement("canvas")).getContext("2d")).createLinearGradient(0,0,0,256),t.width=1,t.height=256,i)r.addColorStop(e,s.convertColorToRGBA(i[e]));n.fillStyle=r,n.fillRect(0,0,1,256),f._grad=n.getImageData(0,0,1,256).data,f._gradColors=i}return f},this._createCircle=function(){var t,e,n,r,i,o;if(n=f.style("radius"),i=f.style("blurRadius"),o=f.style("gaussian"),!f._circle||f._circle.gaussian!==o||f._circle.radius!==n||f._circle.blurRadius!==i){if(e=(t=f._circle=document.createElement("canvas")).getContext("2d"),r=i+n,t.width=t.height=2*r,o){var a=e.createRadialGradient(r,r,0,r,r,r);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(.1,"rgba(255,255,255,0.946)"),a.addColorStop(.2,"rgba(255,255,255,0.801)"),a.addColorStop(.3,"rgba(255,255,255,0.607)"),a.addColorStop(.4,"rgba(255,255,255,0.411)"),a.addColorStop(.5,"rgba(255,255,255,0.249)"),a.addColorStop(.6,"rgba(255,255,255,0.135)"),a.addColorStop(.7,"rgba(255,255,255,0.066)"),a.addColorStop(.8,"rgba(255,255,255,0.029)"),a.addColorStop(.9,"rgba(255,255,255,0.011)"),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.fillRect(0,0,2*r,2*r)}else e.shadowOffsetX=e.shadowOffsetY=2*r,e.shadowBlur=i,e.shadowColor="black",e.beginPath(),e.arc(-r,-r,n,0,2*Math.PI,!0),e.closePath(),e.fill();t.radius=n,t.blurRadius=i,t.gaussian=o,f._circle=t}return f},this._colorize=function(t,e){var n,o,a,s=new Uint32Array(e.buffer),c=t.length;for(r&&r.length===c||(r=new ArrayBuffer(c),i=new Uint8ClampedArray(r),u=new Uint32Array(r)),n=3,a=0;n<c;n+=4,a+=1)(o=t[n])&&(u[a]=s[o]);t.set(i)},this._renderPoints=function(t,e,n,r){var i,o,a,s=f.gcsPosition(),u=f.intensity(),c=f.minIntensity(),l=f.maxIntensity()-c||1;for(i=n.length-1;i>=0;i-=1)o=e.worldToDisplay(s[i]),(a=(u(n[i],i)-c)/l)<=0||(t.globalAlpha=a<.01?.01:a>1?1:a,t.drawImage(f._circle,o.x-r,o.y-r))},this._renderBinnedData=function(t,e,n,r,i){var o,a,s,u,c,l,h,d,p=f.gcsPosition(),m=f.intensity(),v=f.minIntensity(),g=f.maxIntensity()-v||1,y=e.size(),x=[],_=Math.ceil(r/i),b=Math.ceil(y.width/i)+2*_+2,M=Math.ceil(y.height/i)+2*_+2,w=n.length;for(o=0;o<w;o+=1)a=e.worldToDisplay(p[o]),isNaN(a.x)||isNaN(a.y)||(void 0===h&&(h=(a.x%i+i)%i,d=(a.y%i+i)%i),(u=Math.floor((a.x-h)/i)+_+1)<0||u>=b||(c=Math.floor((a.y-d)/i)+_+1)<0||c>=M||(s=(m(n[o],o)-v)/g)<=0||(s>1&&(s=1),x[c]=x[c]||[],u*=4,(l=x[c])[u]?(l[u]+=s,l[u+1]+=(1-l[u+1])*s,l[u+2]+=a.x*s,l[u+3]+=a.y*s):(l[u]=l[u+1]=s,l[u+2]=a.x*s,l[u+3]=a.y*s)));for(c=x.length-1;c>=0;c-=1)if(l=x[c])for(u=l.length-4;u>=0;u-=4)l[u]&&(s=l[u+1],t.globalAlpha=s<.01?.01:s>1?1:s,t.drawImage(f._circle,l[u+2]/l[u]-r,l[u+3]/l[u]-r))},this._renderOnCanvas=function(t,e){if(m.timestamp()<f.buildTime().timestamp()){var n,r,i=f.data()||[],o=f.style("radius")+f.style("blurRadius"),a=f.binned(),s=f.layer(),u=e.size();if(!0===a||"auto"===a)if(a=Math.max(Math.floor(o/8),3),"auto"===f.binned())Math.ceil((u.width+2*o)/a)*Math.ceil((u.height+2*o)/a)>=i.length&&(a=0);(a<1||isNaN(a))&&(a=!1),f._binned=a,t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,u.width,u.height),l="",e.scheduleAnimationFrame(f._setTransform,!1),s.canvas().css({transform:""}),f._createCircle(),f._computeGradient(),a?f._renderBinnedData(t,e,i,o,a):f._renderPoints(t,e,i,o),n=s.canvas()[0],r=t.getImageData(0,0,n.width,n.height),f._colorize(r.data,f._grad),t.putImageData(r,0,0),c={zoom:e.zoom(),gcsOrigin:e.displayToGcs({x:0,y:0},null),rotation:e.rotation(),lastScale:void 0,lastOrigin:{x:0,y:0},lastRotation:void 0},m.modified(),s.renderer().clearCanvas(!1)}return f},this._init=function(){return d.call(f,e),f.geoOn(h.pan,f._animatePan),f},this._update=function(){return p.call(f),(f.buildTime().timestamp()<=f.dataTime().timestamp()||f.updateTime().timestamp()<f.timestamp())&&f._build(),f.updateTime().modified(),f},this._setTransform=function(){f.layer()&&f.layer().canvas()&&f.layer().canvas()[0]&&(f.layer().canvas()[0].style.transform=l)},this._animatePan=function(){if(c){var t=f.layer().map(),e=t.zoom(),n=Math.pow(2,e-c.zoom),r=t.gcsToDisplay(c.gcsOrigin,null),i=t.rotation();if(c.lastScale!==n||c.lastOrigin.x!==r.x||c.lastOrigin.y!==r.y||c.lastRotation!==i){var o=" translate("+r.x+"px,"+r.y+"px) scale("+n+") rotate("+180*(i-c.rotation)/Math.PI+"deg)";t.scheduleAnimationFrame(f._setTransform),l=o,c.lastScale=n,c.lastOrigin.x=r.x,c.lastOrigin.y=r.y,c.lastRotation=i,c.timeout&&(window.clearTimeout(c.timeout),c.timeout=void 0),1===parseFloat(n.toFixed(4))&&0===parseFloat((i-c.rotation).toFixed(4))&&0===parseFloat(r.x.toFixed(1))&&0===parseFloat(r.y.toFixed(1))||(c.timeout=window.setTimeout(function(){c.timeout=void 0,f.buildTime().modified(),f.layer().draw()},f.updateDelay()))}}},f._init(e),this};r(u,o),i("canvas","heatmap",u),t.exports=u},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(146),a=function t(e){return this instanceof t?(e=e||{},o.call(this,e),n(65).call(this),this._init(e),this):new t(e)};r(a,o),i("canvas","isoline",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(72),a=function t(e){if(!(this instanceof t))return new t(e);var r=n(65);e=e||{},o.call(this,e),r.call(this);var i=this;return this._renderOnCanvas=function(t,e){var n,r,o,a,s,u=i.data(),c=i.position(),l=i.line(),h=i.style.get("strokeWidth"),f=i.style.get("strokeColor"),d=i.style.get("strokeOpacity"),p=i.style.get("lineCap"),m=i.style.get("lineJoin"),v=i.style.get("miterLimit")(u),g=i.style.get("closed"),y={},x={};u.forEach(function(e,u){if(!((r=l(e,u)).length<2)){for(x.closed=g(e,u),x.width=h(r[0],0,e,u),x.color=f(r[0],0,e,u),x.opacity=d(r[0],0,e,u),x.linecap=p(r[0],0,e,u),x.linejoin=m(r[0],0,e,u),x.strokeStyle="rgba("+255*x.color.g+", "+255*x.color.g+", "+255*x.color.b+", "+(void 0!==x.opacity?x.opacity:1)+")",y.strokeStyle===x.strokeStyle&&y.width===x.width&&y.linecap===x.linecap&&y.linejoin===x.linejoin&&y.miterlimit===x.miterlimit||(void 0!==y.strokeStyle&&t.stroke(),t.beginPath(),t.strokeStyle=x.strokeStyle,t.lineWidth=x.width,t.lineCap=x.linecap,t.lineJoin=x.linejoin,t.miterLimit=v),s=0;s<r.length;s+=1)o=i.featureGcsToDisplay(c(r[s],s,e,u)),s?t.lineTo(o.x,o.y):(a=o,t.moveTo(o.x,o.y));x.closed&&t.lineTo(a.x,a.y),n=y,y=x,x=n}}),void 0!==y.strokeStyle&&t.stroke()},this._init(e),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("canvas","line",a,s),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(255),a=function t(e){return this instanceof t?(o.call(this,e),n(65).call(this),this._init(e),this):new t(e)};r(a,o),i("canvas","pixelmap",a),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(63),a=n(5),s=function t(e){if(!(this instanceof t))return new t(e);o.call(this,e),n(65).call(this);var r,i=n(3),s=this,u=this._exit,c=this._init,l=this._update;return this._build=function(){s.position()&&((r=this._generateQuads()).imgQuads&&r.imgQuads.sort(function(t,e){return t.pos[2]-e.pos[2]}),s.buildTime().modified())},this._checkQuadUpdate=function(t,e){s.layer().map().scheduleAnimationFrame(s._checkIfChanged)},this._checkIfChanged=function(){if(r&&r.vidQuads&&r.vidQuads.length){var t=!1,e=!1;i.each(r.vidQuads,function(n,r){r.video&&void 0!==r.video.HAVE_CURRENT_DATA&&(!r.video.seeking&&r.video.readyState>=r.video.HAVE_CURRENT_DATA&&(t=!0),r.video.paused&&!r.video.seeking||(e=!0))}),t&&s.renderer()._render(),e&&s.layer().map().scheduleAnimationFrame(s._checkIfChanged)}},this._renderColorQuads=function(t,e){if(r.clrQuads&&r.clrQuads.length){var n=t.globalAlpha,o=n;i.each(r.clrQuads,function(n,r){var i=e.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),s=e.gcsToDisplay({x:r.pos[3],y:r.pos[4]},null),u=e.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),c=e.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null);r.opacity!==o&&(o=r.opacity,t.globalAlpha=o),t.fillStyle=a.convertColorToHex(r.color,!0),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(s.x,s.y),t.lineTo(c.x,c.y),t.lineTo(u.x,u.y),t.closePath(),t.fill()}),o!==n&&(t.globalAlpha=n)}},this._renderImageAndVideoQuads=function(t,e){if(r.imgQuads&&r.imgQuads.length||r.vidQuads&&r.vidQuads.length){var n=t.globalAlpha,o=n;i.each([r.imgQuads,r.vidQuads],function(n,r){r&&i.each(r,function(n,r){var i,a,s;if(r.image)a=(i=r.image).width,s=i.height;else if(r.video&&(a=(i=r.video).videoWidth,s=i.videoHeight,i.seeking))return;if(i&&a&&s&&!(r.opacity<=0)){var u=e.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),c=e.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),l=e.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null);if(t.setTransform((l.x-c.x)/a,(l.y-c.y)/a,(u.x-c.x)/s,(u.y-c.y)/s,c.x,c.y),r.opacity!==o&&(o=r.opacity,t.globalAlpha=o),r.crop){var h=Math.min(i.w,r.crop.x),f=Math.min(i.h,r.crop.y);h>0&&f>0&&t.drawImage(i,0,0,h,f,0,0,h,f)}else t.drawImage(i,0,0)}})}),o!==n&&(t.globalAlpha=n),t.setTransform(1,0,0,1,0,0)}},this._delayRender=function(){var t=!1;return r&&r.vidQuads&&r.vidQuads.length&&i.each(r.vidQuads,function(e,n){n.video&&void 0!==n.video.HAVE_CURRENT_DATA&&(t|=n.video.seeking&&n.delayRenderWhenSeeking)}),t},this._renderOnCanvas=function(t,e){r&&(this._renderImageAndVideoQuads(t,e),this._renderColorQuads(t,e))},this._update=function(){l.call(s),(s.buildTime().timestamp()<=s.dataTime().timestamp()||s.updateTime().timestamp()<s.timestamp())&&s._build(),s.updateTime().modified(),s.layer().map().scheduleAnimationFrame(s._checkIfChanged)},this._init=function(){c.call(s,e)},this._exit=function(){u.call(s)},s._init(e),this};r(s,o);var u={};u[o.capabilities.color]=!0,u[o.capabilities.image]=!0,u[o.capabilities.imageCrop]=!0,u[o.capabilities.imageFixedScale]=!0,u[o.capabilities.imageFull]=!1,u[o.capabilities.canvas]=!0,u[o.capabilities.video]=!0,i("canvas","quad",s,u),t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(2).registerFeature,o=n(74),a=n(5),s=n(241),u=n(139),c=function t(e){if(!(this instanceof t))return new t(e);var r=n(65);e=e||{},o.call(this,e),r.call(this);var i=this,c=new RegExp('^\\s*(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+([-,\\"\\sa-z]+?)\\s*$',"i");return this.getFontFromStyles=function(t,e,n){var r=i.style.get("font")(e,n)||"bold 16px sans-serif";if(t){var o=c.exec(r);null===o&&(o=c.exec("bold 16px sans-serif")),o[1]=i.style.get("fontStyle")(e,n)||o[1],o[2]=i.style.get("fontVariant")(e,n)||o[2],o[3]=i.style.get("fontWeight")(e,n)||o[3],o[4]=i.style.get("fontStretch")(e,n)||o[4],o[5]=i.style.get("fontSize")(e,n)||o[5]||"16px",o[6]=i.style.get("lineHeight")(e,n)||o[6],o[7]=i.style.get("fontFamily")(e,n)||o[7]||"sans-serif",r=(r=(o[1]||"")+" "+(o[2]||"")+" "+(o[3]||"")+" "+(o[4]||"")+" "+(o[5]||"")+(o[6]?"/"+o[6]:"")+" "+o[7]).trim().replace(/\s\s+/g," ")}return r},this._renderOnCanvas=function(t,e){var n,r,o,c,l,h,f,d,p,m,v,g,y,x,_=i.data(),b=i.style.get("position"),M=i.style.get("renderThreshold")(_),w=i.style.get("text"),T=e.rotation(),A=e.zoom(),E=e.size(),S=a.mat3AsArray();n=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some(function(t){return null!==i.style(t)&&void 0!==i.style(t)}),i._canvasProperty(),o=i.featureGcsToDisplay(_.map(b)),_.forEach(function(e,_){c=o[_],M>0&&(c.x<-M||c.x>E.width+M||c.y<-M||c.y>E.height+M)||((l=i.style.get("visible")(e,_))||void 0===l)&&(h=a.convertColorAndOpacity(i.style.get("color")(e,_),i.style.get("textOpacity")(e,_)),d=a.convertColorAndOpacity(i.style.get("textStrokeColor")(e,_),i.style.get("textOpacity")(e,_),{r:0,g:0,b:0,a:0}),0===h.a&&0===d.a||(i._canvasProperty(t,"fillStyle",a.convertColorToRGBA(h)),r=w(e,_),i._canvasProperty(t,"font",i.getFontFromStyles(n,e,_)),i._canvasProperty(t,"textAlign",i.style.get("textAlign")(e,_)||"center"),i._canvasProperty(t,"textBaseline",i.style.get("textBaseline")(e,_)||"middle"),m=i.style.get("rotation")(e,_)||0,v=i.style.get("rotateWithMap")(e,_)&&T,g=i.style.get("textScaled")(e,_),g=a.isNonNullFinite(g)?Math.pow(2,A-g):null,y=i.style.get("offset")(e,_),x=a.mat3AsArray(),(m||v||g&&1!==g||y&&(y.x||y.y))&&(s.translate(x,x,[c.x,c.y]),v&&T&&s.rotate(x,x,T),s.translate(x,x,[y&&y.x?+y.x:0,y&&y.y?+y.y:0]),m&&s.rotate(x,x,m),g&&1!==g&&s.scale(x,x,[g,g]),s.translate(x,x,[-c.x,-c.y])),S[0]===x[0]&&S[1]===x[1]&&S[3]===x[3]&&S[4]===x[4]&&S[6]===x[6]&&S[7]===x[7]||(t.setTransform(x[0],x[1],x[3],x[4],x[6],x[7]),s.copy(S,x)),(h=a.convertColorAndOpacity(i.style.get("shadowColor")(e,_),void 0,{r:0,g:0,b:0,a:0})).a&&(y=i.style.get("shadowOffset")(e,_),f=i.style.get("shadowBlur")(e,_)),h.a&&(y&&(y.x||y.y)||f)?(i._canvasProperty(t,"shadowColor",a.convertColorToRGBA(h)),y&&(m||v)&&i.style.get("shadowRotate")(e,_)&&(x=[+y.x,+y.y,0],u.rotateZ(x,x,[0,0,0],m+(v?T:0)),y={x:x[0],y:x[1]}),i._canvasProperty(t,"shadowOffsetX",y&&y.x?+y.x:0),i._canvasProperty(t,"shadowOffsetY",y&&y.y?+y.y:0),i._canvasProperty(t,"shadowBlur",f||0)):i._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"),d.a&&(p=i.style.get("textStrokeWidth")(e,_),isFinite(p)&&p>0&&(i._canvasProperty(t,"strokeStyle",a.convertColorToRGBA(d)),i._canvasProperty(t,"lineWidth",p),t.strokeText(r,c.x,c.y),i._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"))),t.fillText(r,c.x,c.y)))}),i._canvasProperty(t,"globalAlpha",1),t.setTransform(1,0,0,1,0,0)},this};r(c,o);i("canvas","text",c,{}),t.exports=c},function(t,e,n){"use strict";var r=function(){var t,e=this,n=this._init,r=this._exit,i=0,o=[];this._drawTile=function(n){if(t){var r=this._tileBounds(n),a=n.index.level||0,s=this._tileOffset(a),u=this.tileCropFromBounds(n),c={};u&&(c.crop=u),c.ul=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.top-s.y},a),0),c.ll=this.fromLocal(this.fromLevel({x:r.left-s.x,y:r.bottom-s.y},a),0),c.ur=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.top-s.y},a),0),c.lr=this.fromLocal(this.fromLevel({x:r.right-s.x,y:r.bottom-s.y},a),0),c.ul.z=c.ll.z=c.ur.z=c.lr.z=a*e._levelZIncrement,i+=1,c.id=i,n.quadId=c.id,c.image=n.image,o.push(c),t.data(o),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<o.length;r+=1)if(o[r].id===n.quadId){o.splice(r,1);break}t.data(o),t._update(),e.draw()}},this._exit=function(){e.deleteFeature(t),t=null,o=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=this.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(o),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(2).registerLayerAdjustment)("canvas","tile",r),t.exports=r},function(t,e,n){"use strict";t.exports={colorLegendWidget:n(648),domWidget:n(257),legendWidget:n(651),scaleWidget:n(652),sliderWidget:n(655),svgWidget:n(100),uiLayer:n(251),widget:n(147)}},function(t,e,n){"use strict";var r=n(32).d3,i=n(257),o=n(1),a=n(2).registerWidget,s=n(5),u=n(143);n(649);var c=function t(e){if(!(this instanceof t))return new t(e);i.call(this,e);var n=this,o=[],a=e.width||300,c=e.ticks||6,h=this._init;return this._init=function(){h();var t=n.canvas();r.select(t).attr("class","color-legend-container"),n.popup=r.select(t).append("div").attr("class","color-legend-popup"),e.categories&&this.categories(e.categories)},this._draw=function(){if(r.select(n.canvas()).selectAll("div.geojs-color-legends").remove(),o.length){r.select(n.canvas()).style("display","block");var t=r.select(n.canvas()).append("div").attr("class","geojs-color-legends"),e=a;o.forEach(function(r,i){var o=t.append("div").attr("class","geojs-color-legend");o.append("div").attr("class","geojs-title").text(r.name);var a=o.append("svg").attr({class:"svg",width:e,height:"40px",viewBox:"-20 0 "+e+" 40"});"discrete"===r.type?n._drawDiscrete(a,e-40,r):"continuous"===r.type&&n._drawContinous(a,e-40,r)})}else r.select(n.canvas()).style("display","none")},this.categories=function(t){return void 0===t?o:(o=this._prepareCategories(t),this._draw(),this)},this.addCategories=function(t){return o=o.concat(this._prepareCategories(t)),this._draw(),this},this.removeCategories=function(t){return o=o.filter(function(e){return-1===t.indexOf(e)}),this._draw(),this},this._prepareCategories=function(t){return t.forEach(function(t){t.color=t.colors.map(function(t){return s.convertColorToHex(t,!0)})}),t},this._drawDiscrete=function(t,e,i){if(-1===["linear","log","sqrt","pow","quantile","ordinal"].indexOf(i.scale))throw new Error("unsupported scale");var o,a,u,h,f,d,p;if("ordinal"===i.scale)u=r.scale.ordinal().domain(i.domain).range(i.colors),n._renderDiscreteColors(t,i.domain,u,e,function(t){return t}),h=r.scale.ordinal().domain(i.domain).rangeRoundBands([0,e]),f=r.svg.axis().scale(h).tickValues(function(){var t=Math.ceil(i.domain.length/c);return i.domain.filter(function(e,n){return n%t==0})});else if("quantile"===i.scale){o=[0,i.colors.length],d=s.range(0,i.colors.length-1),a=r.scale.quantile().domain(i.domain).range(d),u=r.scale.quantize().domain(o).range(i.colors),n._renderDiscreteColors(t,d,u,e,function(t){return a.invertExtent(t).join(" - ")});var m=[a.invertExtent(0)[0]];m=m.concat(d.map(function(t){return a.invertExtent(t)[1]})),f=g(h=r.scale.ordinal().domain(m).rangePoints([0,e]))}else if(-1!==["linear","log","sqrt","pow"].indexOf(i.scale)){o=[0,i.colors.length],a=r.scale[i.scale]().domain(i.domain).range(o).nice(),u=r.scale.quantize().domain(o).range(i.colors),d=s.range(0,i.colors.length-1);var v=Math.max.apply(null,i.domain.map(function(t){return l(t)}));n._renderDiscreteColors(t,d,u,e,function(t){return n._popupFormatter(a.invert(t),v)+" - "+n._popupFormatter(a.invert(t+1),v)}),(p=d.slice()).push(i.colors.length),f=g(h=r.scale.ordinal().domain(p.map(function(t){return a.invert(t)})).rangePoints([0,e]))}function g(t){return r.svg.axis().scale(t).tickFormat(r.format(".2s")).tickValues(function(){var e=Math.ceil(t.domain().length/c);return t.domain().filter(function(t,n){return n%e==0})})}i.endAxisLabelOnly&&f.tickValues([h.domain()[0],h.domain()[h.domain().length-1]]),n._renderAxis(t,f)},this._renderDiscreteColors=function(t,e,r,i,o){t.selectAll("rect").data(e).enter().append("rect").attr("width",i/e.length).attr("height","20px").attr("fill",function(t){return r(t)}).attr("transform",function(t,n){return"translate("+n*i/e.length+" ,0)"}).on("mousemove",function(t){n._showPopup(o(t))}).on("mouseout",n._hidePopup)},this._drawContinous=function(t,e,i){var o,a,s;if(-1===["linear","log","sqrt","pow"].indexOf(i.scale))throw new Error("unsupported scale");var h=[0];for(s=1;s<i.domain.length-1;s++)h.push(e/(i.domain.length-1)*s);h.push(e),o=r.scale[i.scale]().domain(i.domain).range(h).nice(),"log"===i.scale&&i.base&&o.base(i.base),"pow"===i.scale&&i.exponent&&o.exponent(i.exponent);var f=u(),d=Math.max.apply(null,i.domain.map(function(t){return l(t)})),p=t.append("defs").append("linearGradient").attr("id","gradient"+f);for(p.append("stop").attr("offset","0%").attr("stop-color",i.colors[0]),s=1;s<i.colors.length-1;s++)p.append("stop").attr("offset",(100/(i.colors.length-1)*s).toFixed(6)+"%").attr("stop-color",i.colors[s]);p.append("stop").attr("offset","100%").attr("stop-color",i.colors[i.colors.length-1]),t.append("rect").attr("fill","url(#gradient"+f+")").attr("width",e).attr("height","20px").on("mousemove",function(){var t=o.invert(r.mouse(this)[0]),e=n._popupFormatter(t,d);n._showPopup(e)}).on("mouseout",n._hidePopup),a=r.svg.axis().scale(o).ticks(c,".2s"),i.endAxisLabelOnly&&a.tickValues([i.domain[0],i.domain[i.domain.length-1]]),this._renderAxis(t,a)},this._renderAxis=function(t,e){t.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(function(t){t.call(e)})},this._popupFormatter=function(t,e){return t=parseFloat(t.toFixed(8)),e=Math.min(e,l(t)),e=Math.min(e,Math.max(3,7-Math.trunc(t).toString().length)),r.format("."+e+"f")(t)},this._showPopup=function(t){var e=r.mouse(n.canvas());n.popup.text(t);var i=n.canvas().clientWidth,o=n.popup[0][0].clientWidth;n.popup.style({left:e[0]-(e[0]+o-i>-10?o:0)+"px",top:e[1]-22+"px"}).transition().duration(200).style("opacity",1)},this._hidePopup=function(){n.popup.transition().duration(200).style("opacity",0)},this};function l(t){if(!isFinite(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;){if(!isFinite(t*e))return 0;e*=10,n++}return n}o(c,i),a("dom","colorLegend",c),t.exports=c},function(t,e,n){var r=n(650);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(129)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(128)(!1)).push([t.i,".color-legend-container {\n  display: none;\n  padding: 10px;\n  border: 1.5px solid #000;\n  border-radius: 3px;\n  transition: 250ms background linear;\n  background-color: rgba(255,255,255,0.75);\n}\n.color-legend-container:hover {\n  background-color: #fff;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend {\n  margin-bottom: 10px;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title {\n  text-align: center;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg {\n  display: block;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line {\n  fill: none;\n  stroke: #000;\n  stroke-width: 0.7;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text {\n  font-size: 12px;\n}\n.color-legend-container .color-legend-popup {\n  position: absolute;\n  background: #fff;\n  height: 22px;\n  font-size: 14px;\n  border: solid 1px #000;\n  padding: 0 5px;\n  pointer-events: none;\n  white-space: nowrap;\n  z-index: 100000;\n  opacity: 0;\n}\n",""])},function(t,e,n){"use strict";var r=n(100),i=n(1),o=n(2).registerWidget,a=function t(e){if(!(this instanceof t))return new t(e);r.call(this,e);var i=n(32).d3,o=n(15),a=this,s=[],u=null,c=null,l=null;this.categories=function(t){return void 0===t?s.slice():(s=t.slice().map(function(t){return"line"===t.type&&(t.style.fill=!1,t.style.stroke=!0),t}),a.draw(),a)},this.size=function(){var t,e=1,n=i.select(a.canvas()).append("text").style("opacity",1e-6);return s.forEach(function(t){n.text(t.name),e=Math.max(e,n.node().getBBox().width)}),n.remove(),t=20*(s.length+1),{width:e+50,height:t}},this.draw=function(){function t(t){t.style("fill",function(t){return t.style.fill||void 0===t.style.fill?t.style.fillColor:"none"}).style("fill-opacity",function(t){return void 0===t.style.fillOpacity?1:t.style.fillOpacity}).style("stroke",function(t){return t.style.stroke||void 0===t.style.stroke?t.style.strokeColor:"none"}).style("stroke-opacity",function(t){return void 0===t.style.strokeOpacity?1:t.style.strokeOpacity}).style("stroke-width",function(t){return void 0===t.style.strokeWidth?1.5:t.style.strokeWidth})}a._init(),l.attr("height",a.size().height+24).style("display",null);var e=a._scale(),n=c.selectAll("g.geo-label").data(s,function(t){return t.name}).enter().append("g").attr("class","geo-label").attr("transform",function(t,n){return"translate(0,"+e.y(n)+")"});return t(n.filter(function(t){return"point"!==t.type&&"line"!==t.type}).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12)),t(n.filter(function(t){return"point"===t.type}).append("circle").attr("cx",20).attr("cy",0).attr("r",6)),t(n.filter(function(t){return"line"===t.type}).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0)),n.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text(function(t){return t.name}),a.reposition(),a},this._scale=function(){return{x:i.scale.linear().domain([0,1]).range([0,a.size().width]),y:i.scale.linear().domain([0,s.length-1]).range([6,a.size().height-6])}},this._init=function(){u||(a._createCanvas(),a._appendCanvasToParent());var t=a.size().width+24+4,e=a.size().height+24+4;u&&u.remove(),i.select(a.canvas()).attr("width",t).attr("height",e),u=i.select(a.canvas()).append("g"),c=u.append("g").attr("transform","translate("+[14,14]+")"),l=c.append("rect").attr("x",-12).attr("y",-12).attr("width",t-4).attr("height",e-4).attr("rx",3).attr("ry",3).style({stroke:"black","stroke-width":"1.5px",fill:"white","fill-opacity":.75,display:"none"}),c.on("mousedown",function(){i.event.stopPropagation()}),c.on("mouseover",function(){l.transition().duration(250).style("fill-opacity",1)}),c.on("mouseout",function(){l.transition().duration(250).style("fill-opacity",.75)}),a.reposition()},this.geoOn(o.resize,function(){a.draw()})};i(a,r),o("dom","legend",a),t.exports=a},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(100),a=n(2).registerWidget;n(653);var s=function t(e){if(!(this instanceof t))return new t(e);o.call(this,e);var i=n(15),a=n(18),s=n(5),u=n(32).d3,c=this,l=this._exit,h=r.extend({},{scale:1,maxWidth:200,maxHeight:"left"===e.orientation||"right"===e.orientation?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function(t,e,n){return"+proj=longlat +axis=enu"===n?Math.sqrt(s.distance2dSquared(t,e)):a.sphericalDistance(t,e,n)}},e);this._init=function(){return c._createCanvas(),c._appendCanvasToParent(),c.reposition(),u.select(c.canvas()).attr({width:h.maxWidth,height:h.maxHeight}),c.geoOn(i.pan,c._update),c._render(),c},this._exit=function(){c.geoOff(i.pan,c._update),l()},this._vertical=function(){return"left"===h.orientation||"right"===h.orientation},this._scaleValue=function(e,n,r){var i,o,a,s=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}],u=(r=t.unitsTable[r]||r||t.unitsTable[h.units]||h.units)[0];return r.forEach(function(t){e>=t.scale*(t.minimum||1)&&(u=t)}),o=Math.floor(Math.log(e/u.scale)/Math.log(u.basis||10)),(s=u.multiples||s).forEach(function(t){var n=u.scale*t.multiple*Math.pow(10,o);n<=e&&(i=t,a=n)}),{html:(i.multiple*Math.pow(10,o)).toFixed(Math.max(0,-o+i.digits-1))+" "+u.unit,value:a,pixels:a/e*n,power:o,multiple:i,unitRecord:u,originalValue:e,originalPixels:n}},this._render=function(){var t,e,n,i,o,a,s=u.select(c.canvas()),l=c.layer().map(),f=h.maxWidth,d=h.maxHeight,p=h.strokeWidth,m=.5*p,v=h.tickLength,g=c._vertical();if(t=(g?h.maxHeight:h.maxWidth)-p,n={x:(e={x:(e=r(s[0][0]).offset()).left+("left"===h.orientation?f-m:m),y:e.top+("top"===h.orientation?d-m:m)}).x+(g?0:t),y:e.y+(g?t:0)},(i=h.distance(l.displayToGcs(e,null),l.displayToGcs(n,null),l.gcs())*h.scale)<=0||!isFinite(i))console.warn("The distance calculated for the scale is invalid: "+i);else{switch(o=c._scaleValue(i,t),g?d=o.pixels+p:f=o.pixels+p,s.attr({width:f,height:d}),s.select("polyline").empty()&&s.append("polyline").classed("geojs-scale-widget-bar",!0).attr({fill:"none","stroke-width":p}),s.select("text").empty()&&s.append("text").classed("geojs-scale-widget-text",!0),h.orientation){case"bottom":a=[[m,v],[m,m],[f-m,m],[f-m,v]],s.select("text").attr({x:f/2,y:2*p,"text-anchor":"middle","dominant-baseline":"hanging"});break;case"top":a=[[m,d-v],[m,d-m],[f-m,d-m],[f-m,d-v]],s.select("text").attr({x:f/2,y:d-2*p,"text-anchor":"middle","dominant-baseline":"alphabetic"});break;case"left":a=[[f-v,m],[f-m,m],[f-m,d-m],[f-v,d-m]],s.select("text").attr({x:f-2*p,y:d/2,"text-anchor":"end","dominant-baseline":"middle"});break;case"right":a=[[v,m],[m,m],[m,d-m],[v,d-m]],s.select("text").attr({x:2*p,y:d/2,"text-anchor":"start","dominant-baseline":"middle"})}s.select("polyline").attr("points",a.map(function(t){return t.join(",")}).join(" ")),s.select("text").html(o.html)}},this._update=function(){this._render()},this.options=function(t,e){if(void 0===t){var n=r.extend({},h);return n.position=c.position(void 0,!0),n}return"string"==typeof t&&void 0===e?"position"===t?c.position(void 0,!0):h[t]:(void 0===e?h=r.extend(!0,h,t):h[t]=e,(t.position||"position"===t)&&c.position(t.position||e),c._render(),c)}};i(s,o),s.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"&mu;m",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}]},a("dom","scale",s),t.exports=s},function(t,e,n){var r=n(654);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(129)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(128)(!1)).push([t.i,".geojs-scale-widget-bar {\n  stroke: #000;\n}\n.geojs-scale-widget-text {\n  font-weight: bold;\n  font-size: 16px;\n  font-family: serif;\n}\n",""])},function(t,e,n){"use strict";var r=n(100),i=n(1),o=n(2).registerWidget,a=function t(e){if(!(this instanceof t))return new t(e);r.call(this,e);var i,o,a,s,u,c,l,h,f,d=n(32).d3,p=n(15),m=this,v=this._exit,g=e.width||20,y=e.height||160,x=e.width?.5*e.width:10;function _(t,e,n,r,i){var o=e.append("g"),a=i/1024;return o.append("g").append("g").attr("transform","translate("+n+","+r+") scale("+a+") translate(-512,-512)").append("path").attr("d",t).attr("class","geo-glyphicon"),o}c="M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z",l="M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z",f={white:"#f4f4f4",black:"#505050"},this.size=function(){return{width:g,height:y}},this._init=function(){m._createCanvas(),m._appendCanvasToParent(),m.reposition();var t=d.select(m.canvas()),e=m.layer().map();function n(n,r){var i=o.invert(d.mouse(t.node())[1]),a=e.zoomRange();i=(1-i)*(a.max-a.min)+a.min,r?e.transition({zoom:i,ease:d.ease("cubic-in-out"),duration:500,done:m._update()}):(e.zoom(i),m._update()),n.stopPropagation()}t.attr("width",g).attr("height",y),i=d.scale.linear().domain([-4,4]).range([0,g]),o=d.scale.linear().domain([0,1]).range([1.5*g,y-1.5*g]),t=t.append("g").classed("geo-ui-slider",!0),h=t,(a=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",!0).attr("cx",i(0)).attr("cy",o(0)-g+2).attr("r",(g-2)/2).style({cursor:"pointer"}).on("click",function(){var t=e.zoom();e.transition({zoom:t+1,ease:d.ease("cubic-in-out"),duration:500})}).on("mousedown",function(){d.event.stopPropagation()}),_(c,a,i(0),o(0)-g+2,g+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),(s=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",!0).attr("cx",i(0)).attr("cy",o(1)+g-2).attr("r",(g-2)/2).style({cursor:"pointer"}).on("click",function(){var t=e.zoom();e.transition({zoom:t-1,ease:d.ease("cubic-in-out"),duration:500})}).on("mousedown",function(){d.event.stopPropagation()}),_(l,s,i(0),o(1)+g-2,g+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),t.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",!0).attr("x",i(0)-g/6).attr("y",o(0)).attr("rx",g/10).attr("ry",g/10).attr("width",g/3).attr("height",y-3*g).style({cursor:"pointer"}).on("click",function(){n(d.event,!0)}),u=t.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",!0).attr("x",i(-4)).attr("y",o(.5)-x/2).attr("rx",3).attr("ry",3).attr("width",g).attr("height",x).style({cursor:"pointer"}).on("mousedown",function(){d.select(document).on("mousemove.geo.slider",function(){n(d.event)}),d.select(document).on("mouseup.geo.slider",function(){n(d.event),d.select(document).on(".geo.slider",null)}),d.event.stopPropagation()});var r=function(){d.select(this).attr("filter",null),h.selectAll("circle,rect,path").transition().duration(100).style("fill",function(t){return f[t.fill]||null}).style("stroke",function(t){return f[t.stroke]||null})};h.selectAll("*").on("mouseover",function(){d.select(this).attr("filter","url(#geo-highlight)"),h.selectAll("rect,path,circle").transition().duration(100).style("fill",function(t){return t.fill||null}).style("stroke",function(t){return t.stroke||null})}).on("mouseout",r),m.geoOn(p.zoom,m._update),r(),m._update()},this._exit=function(){m.geoOff(p.zoom,m._update),h.remove(),v()},this._update=function(t){var e=m.layer().map(),n=e.zoomRange(),r=e.zoom(),i=d.scale.linear();r=(t=t||{}).value||r,i.domain([n.min,n.max]).range([1,0]).clamp(!0),u.attr("y",o(i(r))-x/2)}};i(a,r),o("dom","slider",a),t.exports=a}])});
//# sourceMappingURL=geo.min.js.map